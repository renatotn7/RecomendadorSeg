!function(n){function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e={};t.m=n,t.c=e,t.i=function(n){return n},t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=4)}([function(n,t,e){"use strict";!function(n){function t(n){var t=n||"the-accordion";null!==(i=document.querySelector("#"+t))&&(a=i.querySelectorAll(".accordion-panel"),a.length>0&&e())}function e(){f=u(),a.forEach(function(n){n.querySelector("a").addEventListener("click",r)})}function r(n){n.preventDefault();var t=n.currentTarget.parentElement.parentElement;f!==t&&(c(),o(t))}function o(n){n.classList.add(l),f=n}function c(){if(void 0===f)return this;f.classList.remove(l)}function u(){for(var n=0;n<a.length;n++)if(a[n].classList.contains(l))return a[n]}var i=null,l="is-active",a=null,f=null;n.AccordionJS=t}(window)},,,,function(n,t,e){n.exports=e(0)}]);
/*!
 * Chart.js
 * http://chartjs.org/
 * Version: 2.7.3
 *
 * Copyright 2018 Chart.js Contributors
 * Released under the MIT license
 * https://github.com/chartjs/Chart.js/blob/master/LICENSE.md
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Chart=t()}}(function(){return function o(r,s,l){function u(e,t){if(!s[e]){if(!r[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(d)return d(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var a=s[e]={exports:{}};r[e][0].call(a.exports,function(t){return u(r[e][1][t]||t)},a,a.exports,o,r,s,l)}return s[e].exports}for(var d="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e,i){},{}],2:[function(t,e,i){var o=t(6);function n(t){if(t){var e=[0,0,0],i=1,n=t.match(/^#([a-fA-F0-9]{3})$/i);if(n){n=n[1];for(var a=0;a<e.length;a++)e[a]=parseInt(n[a]+n[a],16)}else if(n=t.match(/^#([a-fA-F0-9]{6})$/i)){n=n[1];for(a=0;a<e.length;a++)e[a]=parseInt(n.slice(2*a,2*a+2),16)}else if(n=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(a=0;a<e.length;a++)e[a]=parseInt(n[a+1]);i=parseFloat(n[4])}else if(n=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(a=0;a<e.length;a++)e[a]=Math.round(2.55*parseFloat(n[a+1]));i=parseFloat(n[4])}else if(n=t.match(/(\w+)/)){if("transparent"==n[1])return[0,0,0,0];if(!(e=o[n[1]]))return}for(a=0;a<e.length;a++)e[a]=d(e[a],0,255);return i=i||0==i?d(i,0,1):1,e[3]=i,e}}function a(t){if(t){var e=t.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var i=parseFloat(e[4]);return[d(parseInt(e[1]),0,360),d(parseFloat(e[2]),0,100),d(parseFloat(e[3]),0,100),d(isNaN(i)?1:i,0,1)]}}}function r(t){if(t){var e=t.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var i=parseFloat(e[4]);return[d(parseInt(e[1]),0,360),d(parseFloat(e[2]),0,100),d(parseFloat(e[3]),0,100),d(isNaN(i)?1:i,0,1)]}}}function s(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function l(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function u(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function d(t,e,i){return Math.min(Math.max(e,t),i)}function c(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}e.exports={getRgba:n,getHsla:a,getRgb:function(t){var e=n(t);return e&&e.slice(0,3)},getHsl:function(t){var e=a(t);return e&&e.slice(0,3)},getHwb:r,getAlpha:function(t){var e=n(t);{if(e)return e[3];if(e=a(t))return e[3];if(e=r(t))return e[3]}},hexString:function(t){return"#"+c(t[0])+c(t[1])+c(t[2])},rgbString:function(t,e){if(e<1||t[3]&&t[3]<1)return s(t,e);return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},rgbaString:s,percentString:function(t,e){if(e<1||t[3]&&t[3]<1)return l(t,e);var i=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),a=Math.round(t[2]/255*100);return"rgb("+i+"%, "+n+"%, "+a+"%)"},percentaString:l,hslString:function(t,e){if(e<1||t[3]&&t[3]<1)return u(t,e);return"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"},hslaString:u,hwbString:function(t,e){void 0===e&&(e=void 0!==t[3]?t[3]:1);return"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"},keyword:function(t){return h[t.slice(0,3)]}};var h={};for(var f in o)h[o[f]]=f},{6:6}],3:[function(t,e,i){var d=t(5),n=t(2),r=function(t){return t instanceof r?t:this instanceof r?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof t?(e=n.getRgba(t))?this.setValues("rgb",e):(e=n.getHsla(t))?this.setValues("hsl",e):(e=n.getHwb(t))&&this.setValues("hwb",e):"object"==typeof t&&(void 0!==(e=t).r||void 0!==e.red?this.setValues("rgb",e):void 0!==e.l||void 0!==e.lightness?this.setValues("hsl",e):void 0!==e.v||void 0!==e.value?this.setValues("hsv",e):void 0!==e.w||void 0!==e.whiteness?this.setValues("hwb",e):void 0===e.c&&void 0===e.cyan||this.setValues("cmyk",e)))):new r(t);var e};r.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t=(t%=360)<0?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return n.hexString(this.values.rgb)},rgbString:function(){return n.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return n.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return n.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return n.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return n.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return n.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return n.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,e=[],i=0;i<t.length;i++){var n=t[i]/255;e[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),i=t.luminosity();return i<e?(e+.05)/(i+.05):(i+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return 7.1<=e?"AAA":4.5<=e?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;e<3;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){var e=this.values.hsl;return e[2]+=e[2]*t,this.setValues("hsl",e),this},darken:function(t){var e=this.values.hsl;return e[2]-=e[2]*t,this.setValues("hsl",e),this},saturate:function(t){var e=this.values.hsl;return e[1]+=e[1]*t,this.setValues("hsl",e),this},desaturate:function(t){var e=this.values.hsl;return e[1]-=e[1]*t,this.setValues("hsl",e),this},whiten:function(t){var e=this.values.hwb;return e[1]+=e[1]*t,this.setValues("hwb",e),this},blacken:function(t){var e=this.values.hwb;return e[2]+=e[2]*t,this.setValues("hwb",e),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){var e=this.values.alpha;return this.setValues("alpha",e-e*t),this},opaquer:function(t){var e=this.values.alpha;return this.setValues("alpha",e+e*t),this},rotate:function(t){var e=this.values.hsl,i=(e[0]+t)%360;return e[0]=i<0?360+i:i,this.setValues("hsl",e),this},mix:function(t,e){var i=this,n=t,a=void 0===e?.5:e,o=2*a-1,r=i.alpha()-n.alpha(),s=((o*r==-1?o:(o+r)/(1+o*r))+1)/2,l=1-s;return this.rgb(s*i.red()+l*n.red(),s*i.green()+l*n.green(),s*i.blue()+l*n.blue()).alpha(i.alpha()*a+n.alpha()*(1-a))},toJSON:function(){return this.rgb()},clone:function(){var t,e,i=new r,n=this.values,a=i.values;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],"[object Array]"===(e={}.toString.call(t))?a[o]=t.slice(0):"[object Number]"===e?a[o]=t:console.error("unexpected color value:",t));return i}},r.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},r.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},r.prototype.getValues=function(t){for(var e=this.values,i={},n=0;n<t.length;n++)i[t.charAt(n)]=e[t][n];return 1!==e.alpha&&(i.a=e.alpha),i},r.prototype.setValues=function(t,e){var i,n,a=this.values,o=this.spaces,r=this.maxes,s=1;if(this.valid=!0,"alpha"===t)s=e;else if(e.length)a[t]=e.slice(0,t.length),s=e[t.length];else if(void 0!==e[t.charAt(0)]){for(i=0;i<t.length;i++)a[t][i]=e[t.charAt(i)];s=e.a}else if(void 0!==e[o[t][0]]){var l=o[t];for(i=0;i<t.length;i++)a[t][i]=e[l[i]];s=e.alpha}if(a.alpha=Math.max(0,Math.min(1,void 0===s?a.alpha:s)),"alpha"===t)return!1;for(i=0;i<t.length;i++)n=Math.max(0,Math.min(r[t][i],a[t][i])),a[t][i]=Math.round(n);for(var u in o)u!==t&&(a[u]=d[t][u](a[t]));return!0},r.prototype.setSpace=function(t,e){var i=e[0];return void 0===i?this.getValues(t):("number"==typeof i&&(i=Array.prototype.slice.call(e)),this.setValues(t,i),this)},r.prototype.setChannel=function(t,e,i){var n=this.values[t];return void 0===i?n[e]:(i===n[e]||(n[e]=i,this.setValues(t,n)),this)},"undefined"!=typeof window&&(window.Color=r),e.exports=r},{2:2,5:5}],4:[function(t,e,i){function a(t){var e,i,n=t[0]/255,a=t[1]/255,o=t[2]/255,r=Math.min(n,a,o),s=Math.max(n,a,o),l=s-r;return s==r?e=0:n==s?e=(a-o)/l:a==s?e=2+(o-n)/l:o==s&&(e=4+(n-a)/l),(e=Math.min(60*e,360))<0&&(e+=360),i=(r+s)/2,[e,100*(s==r?0:i<=.5?l/(s+r):l/(2-s-r)),100*i]}function n(t){var e,i,n=t[0],a=t[1],o=t[2],r=Math.min(n,a,o),s=Math.max(n,a,o),l=s-r;return i=0==s?0:l/s*1e3/10,s==r?e=0:n==s?e=(a-o)/l:a==s?e=2+(o-n)/l:o==s&&(e=4+(n-a)/l),(e=Math.min(60*e,360))<0&&(e+=360),[e,i,s/255*1e3/10]}function o(t){var e=t[0],i=t[1],n=t[2];return[a(t)[0],100*(1/255*Math.min(e,Math.min(i,n))),100*(n=1-1/255*Math.max(e,Math.max(i,n)))]}function s(t){var e,i=t[0]/255,n=t[1]/255,a=t[2]/255;return[100*((1-i-(e=Math.min(1-i,1-n,1-a)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-a-e)/(1-e)||0),100*e]}function l(t){return S[JSON.stringify(t)]}function u(t){var e=t[0]/255,i=t[1]/255,n=t[2]/255;return[100*(.4124*(e=.04045<e?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(i=.04045<i?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(n=.04045<n?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*e+.7152*i+.0722*n),100*(.0193*e+.1192*i+.9505*n)]}function d(t){var e=u(t),i=e[0],n=e[1],a=e[2];return n/=100,a/=108.883,i=.008856<(i/=95.047)?Math.pow(i,1/3):7.787*i+16/116,[116*(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116)-16,500*(i-n),200*(n-(a=.008856<a?Math.pow(a,1/3):7.787*a+16/116))]}function c(t){var e,i,n,a,o,r=t[0]/360,s=t[1]/100,l=t[2]/100;if(0==s)return[o=255*l,o,o];e=2*l-(i=l<.5?l*(1+s):l+s-l*s),a=[0,0,0];for(var u=0;u<3;u++)(n=r+1/3*-(u-1))<0&&n++,1<n&&n--,o=6*n<1?e+6*(i-e)*n:2*n<1?i:3*n<2?e+(i-e)*(2/3-n)*6:e,a[u]=255*o;return a}function h(t){var e=t[0]/60,i=t[1]/100,n=t[2]/100,a=Math.floor(e)%6,o=e-Math.floor(e),r=255*n*(1-i),s=255*n*(1-i*o),l=255*n*(1-i*(1-o));n*=255;switch(a){case 0:return[n,l,r];case 1:return[s,n,r];case 2:return[r,n,l];case 3:return[r,s,n];case 4:return[l,r,n];case 5:return[n,r,s]}}function f(t){var e,i,n,a,o=t[0]/360,s=t[1]/100,l=t[2]/100,u=s+l;switch(1<u&&(s/=u,l/=u),n=6*o-(e=Math.floor(6*o)),0!=(1&e)&&(n=1-n),a=s+n*((i=1-l)-s),e){default:case 6:case 0:r=i,g=a,b=s;break;case 1:r=a,g=i,b=s;break;case 2:r=s,g=i,b=a;break;case 3:r=s,g=a,b=i;break;case 4:r=a,g=s,b=i;break;case 5:r=i,g=s,b=a}return[255*r,255*g,255*b]}function p(t){var e=t[0]/100,i=t[1]/100,n=t[2]/100,a=t[3]/100;return[255*(1-Math.min(1,e*(1-a)+a)),255*(1-Math.min(1,i*(1-a)+a)),255*(1-Math.min(1,n*(1-a)+a))]}function m(t){var e,i,n,a=t[0]/100,o=t[1]/100,r=t[2]/100;return i=-.9689*a+1.8758*o+.0415*r,n=.0557*a+-.204*o+1.057*r,e=.0031308<(e=3.2406*a+-1.5372*o+-.4986*r)?1.055*Math.pow(e,1/2.4)-.055:e*=12.92,i=.0031308<i?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,n=.0031308<n?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,[255*(e=Math.min(Math.max(0,e),1)),255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1))]}function v(t){var e=t[0],i=t[1],n=t[2];return i/=100,n/=108.883,e=.008856<(e/=95.047)?Math.pow(e,1/3):7.787*e+16/116,[116*(i=.008856<i?Math.pow(i,1/3):7.787*i+16/116)-16,500*(e-i),200*(i-(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116))]}function x(t){var e,i,n,a,o=t[0],r=t[1],s=t[2];return a=o<=8?(i=100*o/903.3)/100*7.787+16/116:(i=100*Math.pow((o+16)/116,3),Math.pow(i/100,1/3)),[e=e/95.047<=.008856?e=95.047*(r/500+a-16/116)/7.787:95.047*Math.pow(r/500+a,3),i,n=n/108.883<=.008859?n=108.883*(a-s/200-16/116)/7.787:108.883*Math.pow(a-s/200,3)]}function y(t){var e,i=t[0],n=t[1],a=t[2];return(e=360*Math.atan2(a,n)/2/Math.PI)<0&&(e+=360),[i,Math.sqrt(n*n+a*a),e]}function k(t){return m(x(t))}function M(t){var e,i=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[i,n*Math.cos(e),n*Math.sin(e)]}function w(t){return C[t]}e.exports={rgb2hsl:a,rgb2hsv:n,rgb2hwb:o,rgb2cmyk:s,rgb2keyword:l,rgb2xyz:u,rgb2lab:d,rgb2lch:function(t){return y(d(t))},hsl2rgb:c,hsl2hsv:function(t){var e=t[0],i=t[1]/100,n=t[2]/100;return 0!==n?[e,100*(2*(i*=(n*=2)<=1?n:2-n)/(n+i)),100*((n+i)/2)]:[0,0,0]},hsl2hwb:function(t){return o(c(t))},hsl2cmyk:function(t){return s(c(t))},hsl2keyword:function(t){return l(c(t))},hsv2rgb:h,hsv2hsl:function(t){var e,i,n=t[0],a=t[1]/100,o=t[2]/100;return e=a*o,[n,100*(e=(e/=(i=(2-a)*o)<=1?i:2-i)||0),100*(i/=2)]},hsv2hwb:function(t){return o(h(t))},hsv2cmyk:function(t){return s(h(t))},hsv2keyword:function(t){return l(h(t))},hwb2rgb:f,hwb2hsl:function(t){return a(f(t))},hwb2hsv:function(t){return n(f(t))},hwb2cmyk:function(t){return s(f(t))},hwb2keyword:function(t){return l(f(t))},cmyk2rgb:p,cmyk2hsl:function(t){return a(p(t))},cmyk2hsv:function(t){return n(p(t))},cmyk2hwb:function(t){return o(p(t))},cmyk2keyword:function(t){return l(p(t))},keyword2rgb:w,keyword2hsl:function(t){return a(w(t))},keyword2hsv:function(t){return n(w(t))},keyword2hwb:function(t){return o(w(t))},keyword2cmyk:function(t){return s(w(t))},keyword2lab:function(t){return d(w(t))},keyword2xyz:function(t){return u(w(t))},xyz2rgb:m,xyz2lab:v,xyz2lch:function(t){return y(v(t))},lab2xyz:x,lab2rgb:k,lab2lch:y,lch2lab:M,lch2xyz:function(t){return x(M(t))},lch2rgb:function(t){return k(M(t))}};var C={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},S={};for(var _ in C)S[JSON.stringify(C[_])]=_},{}],5:[function(t,e,i){var a=t(4),o=function(){return new u};for(var n in a){o[n+"Raw"]=function(e){return function(t){return"number"==typeof t&&(t=Array.prototype.slice.call(arguments)),a[e](t)}}(n);var r=/(\w+)2(\w+)/.exec(n),s=r[1],l=r[2];(o[s]=o[s]||{})[l]=o[n]=function(n){return function(t){"number"==typeof t&&(t=Array.prototype.slice.call(arguments));var e=a[n](t);if("string"==typeof e||void 0===e)return e;for(var i=0;i<e.length;i++)e[i]=Math.round(e[i]);return e}}(n)}var u=function(){this.convs={}};u.prototype.routeSpace=function(t,e){var i=e[0];return void 0===i?this.getValues(t):("number"==typeof i&&(i=Array.prototype.slice.call(e)),this.setValues(t,i))},u.prototype.setValues=function(t,e){return this.space=t,this.convs={},this.convs[t]=e,this},u.prototype.getValues=function(t){var e=this.convs[t];if(!e){var i=this.space,n=this.convs[i];e=o[i][t](n),this.convs[t]=e}return e},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(e){u.prototype[e]=function(t){return this.routeSpace(e,arguments)}}),e.exports=o},{4:4}],6:[function(t,e,i){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],7:[function(t,e,i){var n=t(30)();n.helpers=t(46),t(28)(n),n.Animation=t(22),n.animationService=t(23),n.defaults=t(26),n.Element=t(27),n.elements=t(41),n.Interaction=t(29),n.layouts=t(31),n.platform=t(49),n.plugins=t(32),n.Scale=t(33),n.scaleService=t(34),n.Ticks=t(35),n.Tooltip=t(36),t(24)(n),t(25)(n),t(56)(n),t(54)(n),t(55)(n),t(57)(n),t(58)(n),t(59)(n),t(15)(n),t(16)(n),t(17)(n),t(18)(n),t(19)(n),t(20)(n),t(21)(n),t(8)(n),t(9)(n),t(10)(n),t(11)(n),t(12)(n),t(13)(n),t(14)(n);var a=t(50);for(var o in a)a.hasOwnProperty(o)&&n.plugins.register(a[o]);n.platform.initialize(),e.exports=n,"undefined"!=typeof window&&(window.Chart=n),n.Legend=a.legend._element,n.Title=a.title._element,n.pluginService=n.plugins,n.PluginBase=n.Element.extend({}),n.canvasHelpers=n.helpers.canvas,n.layoutService=n.layouts},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,41:41,46:46,49:49,50:50,54:54,55:55,56:56,57:57,58:58,59:59,8:8,9:9}],8:[function(t,e,i){"use strict";e.exports=function(i){i.Bar=function(t,e){return e.type="bar",new i(t,e)}}},{}],9:[function(t,e,i){"use strict";e.exports=function(i){i.Bubble=function(t,e){return e.type="bubble",new i(t,e)}}},{}],10:[function(t,e,i){"use strict";e.exports=function(i){i.Doughnut=function(t,e){return e.type="doughnut",new i(t,e)}}},{}],11:[function(t,e,i){"use strict";e.exports=function(i){i.Line=function(t,e){return e.type="line",new i(t,e)}}},{}],12:[function(t,e,i){"use strict";e.exports=function(i){i.PolarArea=function(t,e){return e.type="polarArea",new i(t,e)}}},{}],13:[function(t,e,i){"use strict";e.exports=function(i){i.Radar=function(t,e){return e.type="radar",new i(t,e)}}},{}],14:[function(t,e,i){"use strict";e.exports=function(i){i.Scatter=function(t,e){return e.type="scatter",new i(t,e)}}},{}],15:[function(t,e,i){"use strict";var n=t(26),a=t(41),S=t(46);n._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),n._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{position:"left",type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{callbacks:{title:function(t,e){var i="";return 0<t.length&&(t[0].yLabel?i=t[0].yLabel:0<e.labels.length&&t[0].index<e.labels.length&&(i=e.labels[t[0].index])),i},label:function(t,e){return(e.datasets[t.datasetIndex].label||"")+": "+t.xLabel}},mode:"index",axis:"y"}}),e.exports=function(e){e.controllers.bar=e.DatasetController.extend({dataElementType:a.Rectangle,initialize:function(){var t;e.DatasetController.prototype.initialize.apply(this,arguments),(t=this.getMeta()).stack=this.getDataset().stack,t.bar=!0},update:function(t){var e,i,n=this.getMeta().data;for(this._ruler=this.getRuler(),e=0,i=n.length;e<i;++e)this.updateElement(n[e],e,t)},updateElement:function(t,e,i){var n=this,a=n.chart,o=n.getMeta(),r=n.getDataset(),s=t.custom||{},l=a.options.elements.rectangle;t._xScale=n.getScaleForId(o.xAxisID),t._yScale=n.getScaleForId(o.yAxisID),t._datasetIndex=n.index,t._index=e,t._model={datasetLabel:r.label,label:a.data.labels[e],borderSkipped:s.borderSkipped?s.borderSkipped:l.borderSkipped,backgroundColor:s.backgroundColor?s.backgroundColor:S.valueAtIndexOrDefault(r.backgroundColor,e,l.backgroundColor),borderColor:s.borderColor?s.borderColor:S.valueAtIndexOrDefault(r.borderColor,e,l.borderColor),borderWidth:s.borderWidth?s.borderWidth:S.valueAtIndexOrDefault(r.borderWidth,e,l.borderWidth)},n.updateElementGeometry(t,e,i),t.pivot()},updateElementGeometry:function(t,e,i){var n=this,a=t._model,o=n.getValueScale(),r=o.getBasePixel(),s=o.isHorizontal(),l=n._ruler||n.getRuler(),u=n.calculateBarValuePixels(n.index,e),d=n.calculateBarIndexPixels(n.index,e,l);a.horizontal=s,a.base=i?r:u.base,a.x=s?i?r:u.head:d.center,a.y=s?d.center:i?r:u.head,a.height=s?d.size:void 0,a.width=s?void 0:d.size},getValueScaleId:function(){return this.getMeta().yAxisID},getIndexScaleId:function(){return this.getMeta().xAxisID},getValueScale:function(){return this.getScaleForId(this.getValueScaleId())},getIndexScale:function(){return this.getScaleForId(this.getIndexScaleId())},_getStacks:function(t){var e,i,n=this.chart,a=this.getIndexScale().options.stacked,o=void 0===t?n.data.datasets.length:t+1,r=[];for(e=0;e<o;++e)(i=n.getDatasetMeta(e)).bar&&n.isDatasetVisible(e)&&(!1===a||!0===a&&-1===r.indexOf(i.stack)||void 0===a&&(void 0===i.stack||-1===r.indexOf(i.stack)))&&r.push(i.stack);return r},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,e){var i=this._getStacks(t),n=void 0!==e?i.indexOf(e):-1;return-1===n?i.length-1:n},getRuler:function(){var t,e,i=this.getIndexScale(),n=this.getStackCount(),a=this.index,o=i.isHorizontal(),r=o?i.left:i.top,s=r+(o?i.width:i.height),l=[];for(t=0,e=this.getMeta().data.length;t<e;++t)l.push(i.getPixelForValue(null,t,a));return{min:S.isNullOrUndef(i.options.barThickness)?function(t,e){var i,n,a,o,r=t.isHorizontal()?t.width:t.height,s=t.getTicks();for(a=1,o=e.length;a<o;++a)r=Math.min(r,e[a]-e[a-1]);for(a=0,o=s.length;a<o;++a)n=t.getPixelForTick(a),r=0<a?Math.min(r,n-i):r,i=n;return r}(i,l):-1,pixels:l,start:r,end:s,stackCount:n,scale:i}},calculateBarValuePixels:function(t,e){var i,n,a,o,r,s,l=this.chart,u=this.getMeta(),d=this.getValueScale(),c=l.data.datasets,h=d.getRightValue(c[t].data[e]),f=d.options.stacked,g=u.stack,p=0;if(f||void 0===f&&void 0!==g)for(i=0;i<t;++i)(n=l.getDatasetMeta(i)).bar&&n.stack===g&&n.controller.getValueScaleId()===d.id&&l.isDatasetVisible(i)&&(a=d.getRightValue(c[i].data[e]),(h<0&&a<0||0<=h&&0<a)&&(p+=a));return o=d.getPixelForValue(p),{size:s=((r=d.getPixelForValue(p+h))-o)/2,base:o,head:r,center:r+s/2}},calculateBarIndexPixels:function(t,e,i){var n,a,o,r,s,l,u,d,c,h,f,g,p,m,v,b,x,y=i.scale.options,k="flex"===y.barThickness?(c=e,f=y,p=(h=i).pixels,m=p[c],v=0<c?p[c-1]:null,b=c<p.length-1?p[c+1]:null,x=f.categoryPercentage,null===v&&(v=m-(null===b?h.end-m:b-m)),null===b&&(b=m+m-v),g=m-(m-v)/2*x,{chunk:(b-v)/2*x/h.stackCount,ratio:f.barPercentage,start:g}):(n=e,a=i,l=(o=y).barThickness,u=a.stackCount,d=a.pixels[n],s=S.isNullOrUndef(l)?(r=a.min*o.categoryPercentage,o.barPercentage):(r=l*u,1),{chunk:r/u,ratio:s,start:d-r/2}),M=this.getStackIndex(t,this.getMeta().stack),w=k.start+k.chunk*M+k.chunk/2,C=Math.min(S.valueOrDefault(y.maxBarThickness,1/0),k.chunk*k.ratio);return{base:w-C/2,head:w+C/2,center:w,size:C}},draw:function(){var t=this.chart,e=this.getValueScale(),i=this.getMeta().data,n=this.getDataset(),a=i.length,o=0;for(S.canvas.clipArea(t.ctx,t.chartArea);o<a;++o)isNaN(e.getRightValue(n.data[o]))||i[o].draw();S.canvas.unclipArea(t.ctx)}}),e.controllers.horizontalBar=e.controllers.bar.extend({getValueScaleId:function(){return this.getMeta().xAxisID},getIndexScaleId:function(){return this.getMeta().yAxisID}})}},{26:26,41:41,46:46}],16:[function(t,e,i){"use strict";var n=t(26),a=t(41),g=t(46);n._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.datasets[t.datasetIndex].label||"",n=e.datasets[t.datasetIndex].data[t.index];return i+": ("+t.xLabel+", "+t.yLabel+", "+n.r+")"}}}}),e.exports=function(t){t.controllers.bubble=t.DatasetController.extend({dataElementType:a.Point,update:function(i){var n=this,t=n.getMeta().data;g.each(t,function(t,e){n.updateElement(t,e,i)})},updateElement:function(t,e,i){var n=this,a=n.getMeta(),o=t.custom||{},r=n.getScaleForId(a.xAxisID),s=n.getScaleForId(a.yAxisID),l=n._resolveElementOptions(t,e),u=n.getDataset().data[e],d=n.index,c=i?r.getPixelForDecimal(.5):r.getPixelForValue("object"==typeof u?u:NaN,e,d),h=i?s.getBasePixel():s.getPixelForValue(u,e,d);t._xScale=r,t._yScale=s,t._options=l,t._datasetIndex=d,t._index=e,t._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:i?0:l.radius,skip:o.skip||isNaN(c)||isNaN(h),x:c,y:h},t.pivot()},setHoverStyle:function(t){var e=t._model,i=t._options;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=g.valueOrDefault(i.hoverBackgroundColor,g.getHoverColor(i.backgroundColor)),e.borderColor=g.valueOrDefault(i.hoverBorderColor,g.getHoverColor(i.borderColor)),e.borderWidth=g.valueOrDefault(i.hoverBorderWidth,i.borderWidth),e.radius=i.radius+i.hoverRadius},_resolveElementOptions:function(t,e){var i,n,a,o=this.chart,r=o.data.datasets[this.index],s=t.custom||{},l=o.options.elements.point,u=g.options.resolve,d=r.data[e],c={},h={chart:o,dataIndex:e,dataset:r,datasetIndex:this.index},f=["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"];for(i=0,n=f.length;i<n;++i)c[a=f[i]]=u([s[a],r[a],l[a]],h,e);return c.radius=u([s.radius,d?d.r:void 0,r.radius,l.radius],h,e),c}})}},{26:26,41:41,46:46}],17:[function(t,e,i){"use strict";var n=t(26),a=t(41),A=t(46);n._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');var i=t.data,n=i.datasets,a=i.labels;if(n.length)for(var o=0;o<n[0].data.length;++o)e.push('<li><span style="background-color:'+n[0].backgroundColor[o]+'"></span>'),a[o]&&e.push(a[o]),e.push("</li>");return e.push("</ul>"),e.join("")},legend:{labels:{generateLabels:function(l){var u=l.data;return u.labels.length&&u.datasets.length?u.labels.map(function(t,e){var i=l.getDatasetMeta(0),n=u.datasets[0],a=i.data[e],o=a&&a.custom||{},r=A.valueAtIndexOrDefault,s=l.options.elements.arc;return{text:t,fillStyle:o.backgroundColor?o.backgroundColor:r(n.backgroundColor,e,s.backgroundColor),strokeStyle:o.borderColor?o.borderColor:r(n.borderColor,e,s.borderColor),lineWidth:o.borderWidth?o.borderWidth:r(n.borderWidth,e,s.borderWidth),hidden:isNaN(n.data[e])||i.data[e].hidden,index:e}}):[]}},onClick:function(t,e){var i,n,a,o=e.index,r=this.chart;for(i=0,n=(r.data.datasets||[]).length;i<n;++i)(a=r.getDatasetMeta(i)).data[o]&&(a.data[o].hidden=!a.data[o].hidden);r.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var i=e.labels[t.index],n=": "+e.datasets[t.datasetIndex].data[t.index];return A.isArray(i)?(i=i.slice())[0]+=n:i+=n,i}}}}),n._set("pie",A.clone(n.doughnut)),n._set("pie",{cutoutPercentage:0}),e.exports=function(t){t.controllers.doughnut=t.controllers.pie=t.DatasetController.extend({dataElementType:a.Arc,linkScales:A.noop,getRingIndex:function(t){for(var e=0,i=0;i<t;++i)this.chart.isDatasetVisible(i)&&++e;return e},update:function(i){var n=this,t=n.chart,e=t.chartArea,a=t.options,o=a.elements.arc,r=e.right-e.left-o.borderWidth,s=e.bottom-e.top-o.borderWidth,l=Math.min(r,s),u={x:0,y:0},d=n.getMeta(),c=a.cutoutPercentage,h=a.circumference;if(h<2*Math.PI){var f=a.rotation%(2*Math.PI),g=(f+=2*Math.PI*(f>=Math.PI?-1:f<-Math.PI?1:0))+h,p=Math.cos(f),m=Math.sin(f),v=Math.cos(g),b=Math.sin(g),x=f<=0&&0<=g||f<=2*Math.PI&&2*Math.PI<=g,y=f<=.5*Math.PI&&.5*Math.PI<=g||f<=2.5*Math.PI&&2.5*Math.PI<=g,k=f<=-Math.PI&&-Math.PI<=g||f<=Math.PI&&Math.PI<=g,M=f<=.5*-Math.PI&&.5*-Math.PI<=g||f<=1.5*Math.PI&&1.5*Math.PI<=g,w=c/100,C=k?-1:Math.min(p*(p<0?1:w),v*(v<0?1:w)),S=M?-1:Math.min(m*(m<0?1:w),b*(b<0?1:w)),_=x?1:Math.max(p*(0<p?1:w),v*(0<v?1:w)),D=y?1:Math.max(m*(0<m?1:w),b*(0<b?1:w)),P=.5*(_-C),I=.5*(D-S);l=Math.min(r/P,s/I),u={x:-.5*(_+C),y:-.5*(D+S)}}t.borderWidth=n.getMaxBorderWidth(d.data),t.outerRadius=Math.max((l-t.borderWidth)/2,0),t.innerRadius=Math.max(c?t.outerRadius/100*c:0,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),t.offsetX=u.x*t.outerRadius,t.offsetY=u.y*t.outerRadius,d.total=n.calculateTotal(),n.outerRadius=t.outerRadius-t.radiusLength*n.getRingIndex(n.index),n.innerRadius=Math.max(n.outerRadius-t.radiusLength,0),A.each(d.data,function(t,e){n.updateElement(t,e,i)})},updateElement:function(t,e,i){var n=this,a=n.chart,o=a.chartArea,r=a.options,s=r.animation,l=(o.left+o.right)/2,u=(o.top+o.bottom)/2,d=r.rotation,c=r.rotation,h=n.getDataset(),f=i&&s.animateRotate?0:t.hidden?0:n.calculateCircumference(h.data[e])*(r.circumference/(2*Math.PI)),g=i&&s.animateScale?0:n.innerRadius,p=i&&s.animateScale?0:n.outerRadius,m=A.valueAtIndexOrDefault;A.extend(t,{_datasetIndex:n.index,_index:e,_model:{x:l+a.offsetX,y:u+a.offsetY,startAngle:d,endAngle:c,circumference:f,outerRadius:p,innerRadius:g,label:m(h.label,e,a.data.labels[e])}});var v=t._model,b=t.custom||{},x=A.valueAtIndexOrDefault,y=this.chart.options.elements.arc;v.backgroundColor=b.backgroundColor?b.backgroundColor:x(h.backgroundColor,e,y.backgroundColor),v.borderColor=b.borderColor?b.borderColor:x(h.borderColor,e,y.borderColor),v.borderWidth=b.borderWidth?b.borderWidth:x(h.borderWidth,e,y.borderWidth),i&&s.animateRotate||(v.startAngle=0===e?r.rotation:n.getMeta().data[e-1]._model.endAngle,v.endAngle=v.startAngle+v.circumference),t.pivot()},calculateTotal:function(){var i,n=this.getDataset(),t=this.getMeta(),a=0;return A.each(t.data,function(t,e){i=n.data[e],isNaN(i)||t.hidden||(a+=Math.abs(i))}),a},calculateCircumference:function(t){var e=this.getMeta().total;return 0<e&&!isNaN(t)?2*Math.PI*(Math.abs(t)/e):0},getMaxBorderWidth:function(t){for(var e,i,n=0,a=this.index,o=t.length,r=0;r<o;r++)n=(n=n<(e=t[r]._model?t[r]._model.borderWidth:0)?e:n)<(i=t[r]._chart?t[r]._chart.config.data.datasets[a].hoverBorderWidth:0)?i:n;return n}})}},{26:26,41:41,46:46}],18:[function(t,e,i){"use strict";var n=t(26),a=t(41),g=t(46);n._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}}),e.exports=function(t){function f(t,e){return g.valueOrDefault(t.showLine,e.showLines)}t.controllers.line=t.DatasetController.extend({datasetElementType:a.Line,dataElementType:a.Point,update:function(t){var e,i,n,a=this,o=a.getMeta(),r=o.dataset,s=o.data||[],l=a.chart.options,u=l.elements.line,d=a.getScaleForId(o.yAxisID),c=a.getDataset(),h=f(c,l);for(h&&(n=r.custom||{},void 0!==c.tension&&void 0===c.lineTension&&(c.lineTension=c.tension),r._scale=d,r._datasetIndex=a.index,r._children=s,r._model={spanGaps:c.spanGaps?c.spanGaps:l.spanGaps,tension:n.tension?n.tension:g.valueOrDefault(c.lineTension,u.tension),backgroundColor:n.backgroundColor?n.backgroundColor:c.backgroundColor||u.backgroundColor,borderWidth:n.borderWidth?n.borderWidth:c.borderWidth||u.borderWidth,borderColor:n.borderColor?n.borderColor:c.borderColor||u.borderColor,borderCapStyle:n.borderCapStyle?n.borderCapStyle:c.borderCapStyle||u.borderCapStyle,borderDash:n.borderDash?n.borderDash:c.borderDash||u.borderDash,borderDashOffset:n.borderDashOffset?n.borderDashOffset:c.borderDashOffset||u.borderDashOffset,borderJoinStyle:n.borderJoinStyle?n.borderJoinStyle:c.borderJoinStyle||u.borderJoinStyle,fill:n.fill?n.fill:void 0!==c.fill?c.fill:u.fill,steppedLine:n.steppedLine?n.steppedLine:g.valueOrDefault(c.steppedLine,u.stepped),cubicInterpolationMode:n.cubicInterpolationMode?n.cubicInterpolationMode:g.valueOrDefault(c.cubicInterpolationMode,u.cubicInterpolationMode)},r.pivot()),e=0,i=s.length;e<i;++e)a.updateElement(s[e],e,t);for(h&&0!==r._model.tension&&a.updateBezierControlPoints(),e=0,i=s.length;e<i;++e)s[e].pivot()},getPointBackgroundColor:function(t,e){var i=this.chart.options.elements.point.backgroundColor,n=this.getDataset(),a=t.custom||{};return a.backgroundColor?i=a.backgroundColor:n.pointBackgroundColor?i=g.valueAtIndexOrDefault(n.pointBackgroundColor,e,i):n.backgroundColor&&(i=n.backgroundColor),i},getPointBorderColor:function(t,e){var i=this.chart.options.elements.point.borderColor,n=this.getDataset(),a=t.custom||{};return a.borderColor?i=a.borderColor:n.pointBorderColor?i=g.valueAtIndexOrDefault(n.pointBorderColor,e,i):n.borderColor&&(i=n.borderColor),i},getPointBorderWidth:function(t,e){var i=this.chart.options.elements.point.borderWidth,n=this.getDataset(),a=t.custom||{};return isNaN(a.borderWidth)?!isNaN(n.pointBorderWidth)||g.isArray(n.pointBorderWidth)?i=g.valueAtIndexOrDefault(n.pointBorderWidth,e,i):isNaN(n.borderWidth)||(i=n.borderWidth):i=a.borderWidth,i},getPointRotation:function(t,e){var i=this.chart.options.elements.point.rotation,n=this.getDataset(),a=t.custom||{};return isNaN(a.rotation)?isNaN(n.pointRotation)&&!g.isArray(n.pointRotation)||(i=g.valueAtIndexOrDefault(n.pointRotation,e,i)):i=a.rotation,i},updateElement:function(t,e,i){var n,a,o=this,r=o.getMeta(),s=t.custom||{},l=o.getDataset(),u=o.index,d=l.data[e],c=o.getScaleForId(r.yAxisID),h=o.getScaleForId(r.xAxisID),f=o.chart.options.elements.point;void 0!==l.radius&&void 0===l.pointRadius&&(l.pointRadius=l.radius),void 0!==l.hitRadius&&void 0===l.pointHitRadius&&(l.pointHitRadius=l.hitRadius),n=h.getPixelForValue("object"==typeof d?d:NaN,e,u),a=i?c.getBasePixel():o.calculatePointY(d,e,u),t._xScale=h,t._yScale=c,t._datasetIndex=u,t._index=e,t._model={x:n,y:a,skip:s.skip||isNaN(n)||isNaN(a),radius:s.radius||g.valueAtIndexOrDefault(l.pointRadius,e,f.radius),pointStyle:s.pointStyle||g.valueAtIndexOrDefault(l.pointStyle,e,f.pointStyle),rotation:o.getPointRotation(t,e),backgroundColor:o.getPointBackgroundColor(t,e),borderColor:o.getPointBorderColor(t,e),borderWidth:o.getPointBorderWidth(t,e),tension:r.dataset._model?r.dataset._model.tension:0,steppedLine:!!r.dataset._model&&r.dataset._model.steppedLine,hitRadius:s.hitRadius||g.valueAtIndexOrDefault(l.pointHitRadius,e,f.hitRadius)}},calculatePointY:function(t,e,i){var n,a,o,r=this.chart,s=this.getMeta(),l=this.getScaleForId(s.yAxisID),u=0,d=0;if(l.options.stacked){for(n=0;n<i;n++)if(a=r.data.datasets[n],"line"===(o=r.getDatasetMeta(n)).type&&o.yAxisID===l.id&&r.isDatasetVisible(n)){var c=Number(l.getRightValue(a.data[e]));c<0?d+=c||0:u+=c||0}var h=Number(l.getRightValue(t));return h<0?l.getPixelForValue(d+h):l.getPixelForValue(u+h)}return l.getPixelForValue(t)},updateBezierControlPoints:function(){var t,e,i,n,a=this.getMeta(),o=this.chart.chartArea,r=a.data||[];function s(t,e,i){return Math.max(Math.min(t,i),e)}if(a.dataset._model.spanGaps&&(r=r.filter(function(t){return!t._model.skip})),"monotone"===a.dataset._model.cubicInterpolationMode)g.splineCurveMonotone(r);else for(t=0,e=r.length;t<e;++t)i=r[t]._model,n=g.splineCurve(g.previousItem(r,t)._model,i,g.nextItem(r,t)._model,a.dataset._model.tension),i.controlPointPreviousX=n.previous.x,i.controlPointPreviousY=n.previous.y,i.controlPointNextX=n.next.x,i.controlPointNextY=n.next.y;if(this.chart.options.elements.line.capBezierPoints)for(t=0,e=r.length;t<e;++t)(i=r[t]._model).controlPointPreviousX=s(i.controlPointPreviousX,o.left,o.right),i.controlPointPreviousY=s(i.controlPointPreviousY,o.top,o.bottom),i.controlPointNextX=s(i.controlPointNextX,o.left,o.right),i.controlPointNextY=s(i.controlPointNextY,o.top,o.bottom)},draw:function(){var t,e=this.chart,i=this.getMeta(),n=i.data||[],a=e.chartArea,o=n.length,r=0;for(f(this.getDataset(),e.options)&&(t=(i.dataset._model.borderWidth||0)/2,g.canvas.clipArea(e.ctx,{left:a.left,right:a.right,top:a.top-t,bottom:a.bottom+t}),i.dataset.draw(),g.canvas.unclipArea(e.ctx));r<o;++r)n[r].draw(a)},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],i=t._index,n=t.custom||{},a=t._model;t.$previousStyle={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderWidth:a.borderWidth,radius:a.radius},a.backgroundColor=n.hoverBackgroundColor||g.valueAtIndexOrDefault(e.pointHoverBackgroundColor,i,g.getHoverColor(a.backgroundColor)),a.borderColor=n.hoverBorderColor||g.valueAtIndexOrDefault(e.pointHoverBorderColor,i,g.getHoverColor(a.borderColor)),a.borderWidth=n.hoverBorderWidth||g.valueAtIndexOrDefault(e.pointHoverBorderWidth,i,a.borderWidth),a.radius=n.hoverRadius||g.valueAtIndexOrDefault(e.pointHoverRadius,i,this.chart.options.elements.point.hoverRadius)}})}},{26:26,41:41,46:46}],19:[function(t,e,i){"use strict";var n=t(26),a=t(41),k=t(46);n._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');var i=t.data,n=i.datasets,a=i.labels;if(n.length)for(var o=0;o<n[0].data.length;++o)e.push('<li><span style="background-color:'+n[0].backgroundColor[o]+'"></span>'),a[o]&&e.push(a[o]),e.push("</li>");return e.push("</ul>"),e.join("")},legend:{labels:{generateLabels:function(s){var l=s.data;return l.labels.length&&l.datasets.length?l.labels.map(function(t,e){var i=s.getDatasetMeta(0),n=l.datasets[0],a=i.data[e].custom||{},o=k.valueAtIndexOrDefault,r=s.options.elements.arc;return{text:t,fillStyle:a.backgroundColor?a.backgroundColor:o(n.backgroundColor,e,r.backgroundColor),strokeStyle:a.borderColor?a.borderColor:o(n.borderColor,e,r.borderColor),lineWidth:a.borderWidth?a.borderWidth:o(n.borderWidth,e,r.borderWidth),hidden:isNaN(n.data[e])||i.data[e].hidden,index:e}}):[]}},onClick:function(t,e){var i,n,a,o=e.index,r=this.chart;for(i=0,n=(r.data.datasets||[]).length;i<n;++i)(a=r.getDatasetMeta(i)).data[o].hidden=!a.data[o].hidden;r.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}}),e.exports=function(t){t.controllers.polarArea=t.DatasetController.extend({dataElementType:a.Arc,linkScales:k.noop,update:function(i){var t,e,n,a=this,o=a.getDataset(),r=a.getMeta(),s=a.chart.options.startAngle||0,l=a._starts=[],u=a._angles=[];for(a._updateRadius(),r.count=a.countVisibleElements(),t=0,e=o.data.length;t<e;t++)l[t]=s,n=a._computeAngle(t),s+=u[t]=n;k.each(r.data,function(t,e){a.updateElement(t,e,i)})},_updateRadius:function(){var t=this,e=t.chart,i=e.chartArea,n=e.options,a=n.elements.arc,o=Math.min(i.right-i.left,i.bottom-i.top);e.outerRadius=Math.max((o-a.borderWidth/2)/2,0),e.innerRadius=Math.max(n.cutoutPercentage?e.outerRadius/100*n.cutoutPercentage:1,0),e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount(),t.outerRadius=e.outerRadius-e.radiusLength*t.index,t.innerRadius=t.outerRadius-e.radiusLength},updateElement:function(t,e,i){var n=this,a=n.chart,o=n.getDataset(),r=a.options,s=r.animation,l=a.scale,u=a.data.labels,d=l.xCenter,c=l.yCenter,h=r.startAngle,f=t.hidden?0:l.getDistanceFromCenterForValue(o.data[e]),g=n._starts[e],p=g+(t.hidden?0:n._angles[e]),m=s.animateScale?0:l.getDistanceFromCenterForValue(o.data[e]);k.extend(t,{_datasetIndex:n.index,_index:e,_scale:l,_model:{x:d,y:c,innerRadius:0,outerRadius:i?m:f,startAngle:i&&s.animateRotate?h:g,endAngle:i&&s.animateRotate?h:p,label:k.valueAtIndexOrDefault(u,e,u[e])}});var v=this.chart.options.elements.arc,b=t.custom||{},x=k.valueAtIndexOrDefault,y=t._model;y.backgroundColor=b.backgroundColor?b.backgroundColor:x(o.backgroundColor,e,v.backgroundColor),y.borderColor=b.borderColor?b.borderColor:x(o.borderColor,e,v.borderColor),y.borderWidth=b.borderWidth?b.borderWidth:x(o.borderWidth,e,v.borderWidth),t.pivot()},countVisibleElements:function(){var i=this.getDataset(),t=this.getMeta(),n=0;return k.each(t.data,function(t,e){isNaN(i.data[e])||t.hidden||n++}),n},_computeAngle:function(t){var e=this,i=this.getMeta().count,n=e.getDataset(),a=e.getMeta();if(isNaN(n.data[t])||a.data[t].hidden)return 0;var o={chart:e.chart,dataIndex:t,dataset:n,datasetIndex:e.index};return k.options.resolve([e.chart.options.elements.arc.angle,2*Math.PI/i],o,t)}})}},{26:26,41:41,46:46}],20:[function(t,e,i){"use strict";var n=t(26),a=t(41),u=t(46);n._set("radar",{scale:{type:"radialLinear"},elements:{line:{tension:0}}}),e.exports=function(t){t.controllers.radar=t.DatasetController.extend({datasetElementType:a.Line,dataElementType:a.Point,linkScales:u.noop,update:function(i){var n=this,t=n.getMeta(),e=t.dataset,a=t.data,o=e.custom||{},r=n.getDataset(),s=n.chart.options.elements.line,l=n.chart.scale;void 0!==r.tension&&void 0===r.lineTension&&(r.lineTension=r.tension),u.extend(t.dataset,{_datasetIndex:n.index,_scale:l,_children:a,_loop:!0,_model:{tension:o.tension?o.tension:u.valueOrDefault(r.lineTension,s.tension),backgroundColor:o.backgroundColor?o.backgroundColor:r.backgroundColor||s.backgroundColor,borderWidth:o.borderWidth?o.borderWidth:r.borderWidth||s.borderWidth,borderColor:o.borderColor?o.borderColor:r.borderColor||s.borderColor,fill:o.fill?o.fill:void 0!==r.fill?r.fill:s.fill,borderCapStyle:o.borderCapStyle?o.borderCapStyle:r.borderCapStyle||s.borderCapStyle,borderDash:o.borderDash?o.borderDash:r.borderDash||s.borderDash,borderDashOffset:o.borderDashOffset?o.borderDashOffset:r.borderDashOffset||s.borderDashOffset,borderJoinStyle:o.borderJoinStyle?o.borderJoinStyle:r.borderJoinStyle||s.borderJoinStyle}}),t.dataset.pivot(),u.each(a,function(t,e){n.updateElement(t,e,i)},n),n.updateBezierControlPoints()},updateElement:function(t,e,i){var n=this,a=t.custom||{},o=n.getDataset(),r=n.chart.scale,s=n.chart.options.elements.point,l=r.getPointPositionForValue(e,o.data[e]);void 0!==o.radius&&void 0===o.pointRadius&&(o.pointRadius=o.radius),void 0!==o.hitRadius&&void 0===o.pointHitRadius&&(o.pointHitRadius=o.hitRadius),u.extend(t,{_datasetIndex:n.index,_index:e,_scale:r,_model:{x:i?r.xCenter:l.x,y:i?r.yCenter:l.y,tension:a.tension?a.tension:u.valueOrDefault(o.lineTension,n.chart.options.elements.line.tension),radius:a.radius?a.radius:u.valueAtIndexOrDefault(o.pointRadius,e,s.radius),backgroundColor:a.backgroundColor?a.backgroundColor:u.valueAtIndexOrDefault(o.pointBackgroundColor,e,s.backgroundColor),borderColor:a.borderColor?a.borderColor:u.valueAtIndexOrDefault(o.pointBorderColor,e,s.borderColor),borderWidth:a.borderWidth?a.borderWidth:u.valueAtIndexOrDefault(o.pointBorderWidth,e,s.borderWidth),pointStyle:a.pointStyle?a.pointStyle:u.valueAtIndexOrDefault(o.pointStyle,e,s.pointStyle),rotation:a.rotation?a.rotation:u.valueAtIndexOrDefault(o.pointRotation,e,s.rotation),hitRadius:a.hitRadius?a.hitRadius:u.valueAtIndexOrDefault(o.pointHitRadius,e,s.hitRadius)}}),t._model.skip=a.skip?a.skip:isNaN(t._model.x)||isNaN(t._model.y)},updateBezierControlPoints:function(){var a=this.chart.chartArea,o=this.getMeta();u.each(o.data,function(t,e){var i=t._model,n=u.splineCurve(u.previousItem(o.data,e,!0)._model,i,u.nextItem(o.data,e,!0)._model,i.tension);i.controlPointPreviousX=Math.max(Math.min(n.previous.x,a.right),a.left),i.controlPointPreviousY=Math.max(Math.min(n.previous.y,a.bottom),a.top),i.controlPointNextX=Math.max(Math.min(n.next.x,a.right),a.left),i.controlPointNextY=Math.max(Math.min(n.next.y,a.bottom),a.top),t.pivot()})},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],i=t.custom||{},n=t._index,a=t._model;t.$previousStyle={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderWidth:a.borderWidth,radius:a.radius},a.radius=i.hoverRadius?i.hoverRadius:u.valueAtIndexOrDefault(e.pointHoverRadius,n,this.chart.options.elements.point.hoverRadius),a.backgroundColor=i.hoverBackgroundColor?i.hoverBackgroundColor:u.valueAtIndexOrDefault(e.pointHoverBackgroundColor,n,u.getHoverColor(a.backgroundColor)),a.borderColor=i.hoverBorderColor?i.hoverBorderColor:u.valueAtIndexOrDefault(e.pointHoverBorderColor,n,u.getHoverColor(a.borderColor)),a.borderWidth=i.hoverBorderWidth?i.hoverBorderWidth:u.valueAtIndexOrDefault(e.pointHoverBorderWidth,n,a.borderWidth)}})}},{26:26,41:41,46:46}],21:[function(t,e,i){"use strict";t(26)._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},showLines:!1,tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}}),e.exports=function(t){t.controllers.scatter=t.controllers.line}},{26:26}],22:[function(t,e,i){"use strict";var n=t(27);i=e.exports=n.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null});Object.defineProperty(i.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(i.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}})},{27:27}],23:[function(t,e,i){"use strict";var n=t(26),o=t(46);n._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:o.noop,onComplete:o.noop}}),e.exports={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(t,e,i,n){var a,o,r=this.animations;for(e.chart=t,n||(t.animating=!0),a=0,o=r.length;a<o;++a)if(r[a].chart===t)return void(r[a]=e);r.push(e),1===r.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=o.findIndex(this.animations,function(t){return t.chart===e});-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=o.requestAnimFrame.call(window,function(){t.request=null,t.startDigest()}))},startDigest:function(){var t=this,e=Date.now(),i=0;1<t.dropFrames&&(i=Math.floor(t.dropFrames),t.dropFrames=t.dropFrames%1),t.advance(1+i);var n=Date.now();t.dropFrames+=(n-e)/t.frameDuration,0<t.animations.length&&t.requestAnimationFrame()},advance:function(t){for(var e,i,n=this.animations,a=0;a<n.length;)i=(e=n[a]).chart,e.currentStep=(e.currentStep||0)+t,e.currentStep=Math.min(e.currentStep,e.numSteps),o.callback(e.render,[i,e],i),o.callback(e.onAnimationProgress,[e],i),e.currentStep>=e.numSteps?(o.callback(e.onAnimationComplete,[e],i),i.animating=!1,n.splice(a,1)):++a}}},{26:26,46:46}],24:[function(t,e,i){"use strict";var s=t(22),l=t(23),c=t(26),h=t(46),a=t(29),o=t(31),f=t(49),g=t(32),p=t(34),n=t(36);e.exports=function(u){function d(t){return"top"===t||"bottom"===t}u.types={},u.instances={},u.controllers={},h.extend(u.prototype,{construct:function(t,e){var i,n,a=this;(n=(i=(i=e)||{}).data=i.data||{}).datasets=n.datasets||[],n.labels=n.labels||[],i.options=h.configMerge(c.global,c[i.type],i.options||{}),e=i;var o=f.acquireContext(t,e),r=o&&o.canvas,s=r&&r.height,l=r&&r.width;a.id=h.uid(),a.ctx=o,a.canvas=r,a.config=e,a.width=l,a.height=s,a.aspectRatio=s?l/s:null,a.options=e.options,a._bufferedRender=!1,(a.chart=a).controller=a,u.instances[a.id]=a,Object.defineProperty(a,"data",{get:function(){return a.config.data},set:function(t){a.config.data=t}}),o&&r?(a.initialize(),a.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var t=this;return g.notify(t,"beforeInit"),h.retinaScale(t,t.options.devicePixelRatio),t.bindEvents(),t.options.responsive&&t.resize(!0),t.ensureScalesHaveIDs(),t.buildOrUpdateScales(),t.initToolTip(),g.notify(t,"afterInit"),t},clear:function(){return h.canvas.clear(this),this},stop:function(){return l.cancelAnimation(this),this},resize:function(t){var e=this,i=e.options,n=e.canvas,a=i.maintainAspectRatio&&e.aspectRatio||null,o=Math.max(0,Math.floor(h.getMaximumWidth(n))),r=Math.max(0,Math.floor(a?o/a:h.getMaximumHeight(n)));if((e.width!==o||e.height!==r)&&(n.width=e.width=o,n.height=e.height=r,n.style.width=o+"px",n.style.height=r+"px",h.retinaScale(e,i.devicePixelRatio),!t)){var s={width:o,height:r};g.notify(e,"resize",[s]),e.options.onResize&&e.options.onResize(e,s),e.stop(),e.update({duration:e.options.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options,e=t.scales||{},i=t.scale;h.each(e.xAxes,function(t,e){t.id=t.id||"x-axis-"+e}),h.each(e.yAxes,function(t,e){t.id=t.id||"y-axis-"+e}),i&&(i.id=i.id||"scale")},buildOrUpdateScales:function(){var r=this,t=r.options,s=r.scales||{},e=[],l=Object.keys(s).reduce(function(t,e){return t[e]=!1,t},{});t.scales&&(e=e.concat((t.scales.xAxes||[]).map(function(t){return{options:t,dtype:"category",dposition:"bottom"}}),(t.scales.yAxes||[]).map(function(t){return{options:t,dtype:"linear",dposition:"left"}}))),t.scale&&e.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),h.each(e,function(t){var e=t.options,i=e.id,n=h.valueOrDefault(e.type,t.dtype);d(e.position)!==d(t.dposition)&&(e.position=t.dposition),l[i]=!0;var a=null;if(i in s&&s[i].type===n)(a=s[i]).options=e,a.ctx=r.ctx,a.chart=r;else{var o=p.getScaleConstructor(n);if(!o)return;a=new o({id:i,type:n,options:e,ctx:r.ctx,chart:r}),s[a.id]=a}a.mergeTicksOptions(),t.isDefault&&(r.scale=a)}),h.each(l,function(t,e){t||delete s[e]}),r.scales=s,p.addScalesToLayout(this)},buildOrUpdateControllers:function(){var o=this,r=[],s=[];return h.each(o.data.datasets,function(t,e){var i=o.getDatasetMeta(e),n=t.type||o.config.type;if(i.type&&i.type!==n&&(o.destroyDatasetMeta(e),i=o.getDatasetMeta(e)),i.type=n,r.push(i.type),i.controller)i.controller.updateIndex(e),i.controller.linkScales();else{var a=u.controllers[i.type];if(void 0===a)throw new Error('"'+i.type+'" is not a chart type.');i.controller=new a(o,e),s.push(i.controller)}},o),s},resetElements:function(){var i=this;h.each(i.data.datasets,function(t,e){i.getDatasetMeta(e).controller.reset()},i)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(t){var e,i,n=this;if(t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]}),i=(e=n).options,h.each(e.scales,function(t){o.removeBox(e,t)}),i=h.configMerge(u.defaults.global,u.defaults[e.config.type],i),e.options=e.config.options=i,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=i.tooltips,e.tooltip.initialize(),g._invalidate(n),!1!==g.notify(n,"beforeUpdate")){n.tooltip._data=n.data;var a=n.buildOrUpdateControllers();h.each(n.data.datasets,function(t,e){n.getDatasetMeta(e).controller.buildOrUpdateElements()},n),n.updateLayout(),n.options.animation&&n.options.animation.duration&&h.each(a,function(t){t.reset()}),n.updateDatasets(),n.tooltip.initialize(),n.lastActive=[],g.notify(n,"afterUpdate"),n._bufferedRender?n._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy}:n.render(t)}},updateLayout:function(){!1!==g.notify(this,"beforeLayout")&&(o.update(this,this.width,this.height),g.notify(this,"afterScaleUpdate"),g.notify(this,"afterLayout"))},updateDatasets:function(){if(!1!==g.notify(this,"beforeDatasetsUpdate")){for(var t=0,e=this.data.datasets.length;t<e;++t)this.updateDataset(t);g.notify(this,"afterDatasetsUpdate")}},updateDataset:function(t){var e=this.getDatasetMeta(t),i={meta:e,index:t};!1!==g.notify(this,"beforeDatasetUpdate",[i])&&(e.controller.update(),g.notify(this,"afterDatasetUpdate",[i]))},render:function(t){var e=this;t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]});var i=t.duration,n=t.lazy;if(!1!==g.notify(e,"beforeRender")){var a=e.options.animation,o=function(t){g.notify(e,"afterRender"),h.callback(a&&a.onComplete,[t],e)};if(a&&(void 0!==i&&0!==i||void 0===i&&0!==a.duration)){var r=new s({numSteps:(i||a.duration)/16.66,easing:t.easing||a.easing,render:function(t,e){var i=h.easing.effects[e.easing],n=e.currentStep,a=n/e.numSteps;t.draw(i(a),a,n)},onAnimationProgress:a.onProgress,onAnimationComplete:o});l.addAnimation(e,r,i,n)}else e.draw(),o(new s({numSteps:0,chart:e}));return e}},draw:function(t){var e=this;e.clear(),h.isNullOrUndef(t)&&(t=1),e.transition(t),e.width<=0||e.height<=0||!1!==g.notify(e,"beforeDraw",[t])&&(h.each(e.boxes,function(t){t.draw(e.chartArea)},e),e.scale&&e.scale.draw(),e.drawDatasets(t),e._drawTooltip(t),g.notify(e,"afterDraw",[t]))},transition:function(t){for(var e=0,i=(this.data.datasets||[]).length;e<i;++e)this.isDatasetVisible(e)&&this.getDatasetMeta(e).controller.transition(t);this.tooltip.transition(t)},drawDatasets:function(t){var e=this;if(!1!==g.notify(e,"beforeDatasetsDraw",[t])){for(var i=(e.data.datasets||[]).length-1;0<=i;--i)e.isDatasetVisible(i)&&e.drawDataset(i,t);g.notify(e,"afterDatasetsDraw",[t])}},drawDataset:function(t,e){var i=this.getDatasetMeta(t),n={meta:i,index:t,easingValue:e};!1!==g.notify(this,"beforeDatasetDraw",[n])&&(i.controller.draw(e),g.notify(this,"afterDatasetDraw",[n]))},_drawTooltip:function(t){var e=this.tooltip,i={tooltip:e,easingValue:t};!1!==g.notify(this,"beforeTooltipDraw",[i])&&(e.draw(),g.notify(this,"afterTooltipDraw",[i]))},getElementAtEvent:function(t){return a.modes.single(this,t)},getElementsAtEvent:function(t){return a.modes.label(this,t,{intersect:!0})},getElementsAtXAxis:function(t){return a.modes["x-axis"](this,t,{intersect:!0})},getElementsAtEventForMode:function(t,e,i){var n=a.modes[e];return"function"==typeof n?n(this,t,i):[]},getDatasetAtEvent:function(t){return a.modes.dataset(this,t,{intersect:!0})},getDatasetMeta:function(t){var e=this.data.datasets[t];e._meta||(e._meta={});var i=e._meta[this.id];return i||(i=e._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),i},getVisibleDatasetCount:function(){for(var t=0,e=0,i=this.data.datasets.length;e<i;++e)this.isDatasetVisible(e)&&t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return"boolean"==typeof e.hidden?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id,i=this.data.datasets[t],n=i._meta&&i._meta[e];n&&(n.controller.destroy(),delete i._meta[e])},destroy:function(){var t,e,i=this,n=i.canvas;for(i.stop(),t=0,e=i.data.datasets.length;t<e;++t)i.destroyDatasetMeta(t);n&&(i.unbindEvents(),h.canvas.clear(i),f.releaseContext(i.ctx),i.canvas=null,i.ctx=null),g.notify(i,"destroy"),delete u.instances[i.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new n({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var e=this,i=e._listeners={},n=function(){e.eventHandler.apply(e,arguments)};h.each(e.options.events,function(t){f.addEventListener(e,t,n),i[t]=n}),e.options.responsive&&(n=function(){e.resize()},f.addEventListener(e,"resize",n),i.resize=n)},unbindEvents:function(){var i=this,t=i._listeners;t&&(delete i._listeners,h.each(t,function(t,e){f.removeEventListener(i,e,t)}))},updateHoverStyle:function(t,e,i){var n,a,o,r=i?"setHoverStyle":"removeHoverStyle";for(a=0,o=t.length;a<o;++a)(n=t[a])&&this.getDatasetMeta(n._datasetIndex).controller[r](n)},eventHandler:function(t){var e=this,i=e.tooltip;if(!1!==g.notify(e,"beforeEvent",[t])){e._bufferedRender=!0,e._bufferedRequest=null;var n=e.handleEvent(t);i&&(n=i._start?i.handleEvent(t):n|i.handleEvent(t)),g.notify(e,"afterEvent",[t]);var a=e._bufferedRequest;return a?e.render(a):n&&!e.animating&&(e.stop(),e.render({duration:e.options.hover.animationDuration,lazy:!0})),e._bufferedRender=!1,e._bufferedRequest=null,e}},handleEvent:function(t){var e,i=this,n=i.options||{},a=n.hover;return i.lastActive=i.lastActive||[],"mouseout"===t.type?i.active=[]:i.active=i.getElementsAtEventForMode(t,a.mode,a),h.callback(n.onHover||n.hover.onHover,[t.native,i.active],i),"mouseup"!==t.type&&"click"!==t.type||n.onClick&&n.onClick.call(i,t.native,i.active),i.lastActive.length&&i.updateHoverStyle(i.lastActive,a.mode,!1),i.active.length&&a.mode&&i.updateHoverStyle(i.active,a.mode,!0),e=!h.arrayEquals(i.active,i.lastActive),i.lastActive=i.active,e}}),u.Controller=u}},{22:22,23:23,26:26,29:29,31:31,32:32,34:34,36:36,46:46,49:49}],25:[function(t,e,i){"use strict";var s=t(46);e.exports=function(t){var o=["push","pop","shift","splice","unshift"];function r(e,t){var i=e._chartjs;if(i){var n=i.listeners,a=n.indexOf(t);-1!==a&&n.splice(a,1),0<n.length||(o.forEach(function(t){delete e[t]}),delete e._chartjs)}}t.DatasetController=function(t,e){this.initialize(t,e)},s.extend(t.DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(t,e){this.chart=t,this.index=e,this.linkScales(),this.addElements()},updateIndex:function(t){this.index=t},linkScales:function(){var t=this,e=t.getMeta(),i=t.getDataset();null!==e.xAxisID&&e.xAxisID in t.chart.scales||(e.xAxisID=i.xAxisID||t.chart.options.scales.xAxes[0].id),null!==e.yAxisID&&e.yAxisID in t.chart.scales||(e.yAxisID=i.yAxisID||t.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},reset:function(){this.update(!0)},destroy:function(){this._data&&r(this._data,this)},createMetaDataset:function(){var t=this.datasetElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(t){var e=this.dataElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index,_index:t})},addElements:function(){var t,e,i=this.getMeta(),n=this.getDataset().data||[],a=i.data;for(t=0,e=n.length;t<e;++t)a[t]=a[t]||this.createMetaData(t);i.dataset=i.dataset||this.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e),this.updateElement(e,t,!0)},buildOrUpdateElements:function(){var a,t,e=this,i=e.getDataset(),n=i.data||(i.data=[]);e._data!==n&&(e._data&&r(e._data,e),t=e,(a=n)._chartjs?a._chartjs.listeners.push(t):(Object.defineProperty(a,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),o.forEach(function(t){var i="onData"+t.charAt(0).toUpperCase()+t.slice(1),n=a[t];Object.defineProperty(a,t,{configurable:!0,enumerable:!1,value:function(){var e=Array.prototype.slice.call(arguments),t=n.apply(this,e);return s.each(a._chartjs.listeners,function(t){"function"==typeof t[i]&&t[i].apply(t,e)}),t}})})),e._data=n),e.resyncElements()},update:s.noop,transition:function(t){for(var e=this.getMeta(),i=e.data||[],n=i.length,a=0;a<n;++a)i[a].transition(t);e.dataset&&e.dataset.transition(t)},draw:function(){var t=this.getMeta(),e=t.data||[],i=e.length,n=0;for(t.dataset&&t.dataset.draw();n<i;++n)e[n].draw()},removeHoverStyle:function(t){s.merge(t._model,t.$previousStyle||{}),delete t.$previousStyle},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],i=t._index,n=t.custom||{},a=s.valueAtIndexOrDefault,o=s.getHoverColor,r=t._model;t.$previousStyle={backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:r.borderWidth},r.backgroundColor=n.hoverBackgroundColor?n.hoverBackgroundColor:a(e.hoverBackgroundColor,i,o(r.backgroundColor)),r.borderColor=n.hoverBorderColor?n.hoverBorderColor:a(e.hoverBorderColor,i,o(r.borderColor)),r.borderWidth=n.hoverBorderWidth?n.hoverBorderWidth:a(e.hoverBorderWidth,i,r.borderWidth)},resyncElements:function(){var t=this.getMeta(),e=this.getDataset().data,i=t.data.length,n=e.length;n<i?t.data.splice(n,i-n):i<n&&this.insertElements(i,n-i)},insertElements:function(t,e){for(var i=0;i<e;++i)this.addElementAndReset(t+i)},onDataPush:function(){this.insertElements(this.getDataset().data.length-1,arguments.length)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e),this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),t.DatasetController.extend=s.inherits}},{46:46}],26:[function(t,e,i){"use strict";var n=t(46);e.exports={_set:function(t,e){return n.merge(this[t]||(this[t]={}),e)}}},{46:46}],27:[function(t,e,i){"use strict";var g=t(3),n=t(46);var a=function(t){n.extend(this,t),this.initialize.apply(this,arguments)};n.extend(a.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=n.clone(t._model)),t._start={},t},transition:function(t){var e=this,i=e._model,n=e._start,a=e._view;return i&&1!==t?(a||(a=e._view={}),n||(n=e._start={}),function(t,e,i,n){var a,o,r,s,l,u,d,c,h,f=Object.keys(i);for(a=0,o=f.length;a<o;++a)if(u=i[r=f[a]],e.hasOwnProperty(r)||(e[r]=u),(s=e[r])!==u&&"_"!==r[0]){if(t.hasOwnProperty(r)||(t[r]=s),(d=typeof u)==typeof(l=t[r]))if("string"===d){if((c=g(l)).valid&&(h=g(u)).valid){e[r]=h.mix(c,n).rgbString();continue}}else if("number"===d&&isFinite(l)&&isFinite(u)){e[r]=l+(u-l)*n;continue}e[r]=u}}(n,a,i,t)):(e._view=i,e._start=null),e},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return n.isNumber(this._model.x)&&n.isNumber(this._model.y)}}),a.extend=n.inherits,e.exports=a},{3:3,46:46}],28:[function(t,e,i){"use strict";var n=t(3),a=t(26),g=t(46),l=t(34);e.exports=function(){function d(t,e,i){var n;return"string"==typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[i])):n=t,n}function c(t){return null!=t&&"none"!==t}function e(t,e,i){var n=document.defaultView,a=g._getParentNode(t),o=n.getComputedStyle(t)[e],r=n.getComputedStyle(a)[e],s=c(o),l=c(r),u=Number.POSITIVE_INFINITY;return s||l?Math.min(s?d(o,t,i):u,l?d(r,a,i):u):"none"}g.configMerge=function(){return g.merge(g.clone(arguments[0]),[].slice.call(arguments,1),{merger:function(t,e,i,n){var a=e[t]||{},o=i[t];"scales"===t?e[t]=g.scaleMerge(a,o):"scale"===t?e[t]=g.merge(a,[l.getScaleDefaults(o.type),o]):g._merger(t,e,i,n)}})},g.scaleMerge=function(){return g.merge(g.clone(arguments[0]),[].slice.call(arguments,1),{merger:function(t,e,i,n){if("xAxes"===t||"yAxes"===t){var a,o,r,s=i[t].length;for(e[t]||(e[t]=[]),a=0;a<s;++a)r=i[t][a],o=g.valueOrDefault(r.type,"xAxes"===t?"category":"linear"),a>=e[t].length&&e[t].push({}),!e[t][a].type||r.type&&r.type!==e[t][a].type?g.merge(e[t][a],[l.getScaleDefaults(o),r]):g.merge(e[t][a],r)}else g._merger(t,e,i,n)}})},g.where=function(t,e){if(g.isArray(t)&&Array.prototype.filter)return t.filter(e);var i=[];return g.each(t,function(t){e(t)&&i.push(t)}),i},g.findIndex=Array.prototype.findIndex?function(t,e,i){return t.findIndex(e,i)}:function(t,e,i){i=void 0===i?t:i;for(var n=0,a=t.length;n<a;++n)if(e.call(i,t[n],n,t))return n;return-1},g.findNextWhere=function(t,e,i){g.isNullOrUndef(i)&&(i=-1);for(var n=i+1;n<t.length;n++){var a=t[n];if(e(a))return a}},g.findPreviousWhere=function(t,e,i){g.isNullOrUndef(i)&&(i=t.length);for(var n=i-1;0<=n;n--){var a=t[n];if(e(a))return a}},g.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},g.almostEquals=function(t,e,i){return Math.abs(t-e)<i},g.almostWhole=function(t,e){var i=Math.round(t);return i-e<t&&t<i+e},g.max=function(t){return t.reduce(function(t,e){return isNaN(e)?t:Math.max(t,e)},Number.NEGATIVE_INFINITY)},g.min=function(t){return t.reduce(function(t,e){return isNaN(e)?t:Math.min(t,e)},Number.POSITIVE_INFINITY)},g.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return 0===(t=+t)||isNaN(t)?t:0<t?1:-1},g.log10=Math.log10?function(t){return Math.log10(t)}:function(t){var e=Math.log(t)*Math.LOG10E,i=Math.round(e);return t===Math.pow(10,i)?i:e},g.toRadians=function(t){return t*(Math.PI/180)},g.toDegrees=function(t){return t*(180/Math.PI)},g.getAngleFromPoint=function(t,e){var i=e.x-t.x,n=e.y-t.y,a=Math.sqrt(i*i+n*n),o=Math.atan2(n,i);return o<-.5*Math.PI&&(o+=2*Math.PI),{angle:o,distance:a}},g.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},g.aliasPixel=function(t){return t%2==0?0:.5},g.splineCurve=function(t,e,i,n){var a=t.skip?e:t,o=e,r=i.skip?e:i,s=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),l=Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2)),u=s/(s+l),d=l/(s+l),c=n*(u=isNaN(u)?0:u),h=n*(d=isNaN(d)?0:d);return{previous:{x:o.x-c*(r.x-a.x),y:o.y-c*(r.y-a.y)},next:{x:o.x+h*(r.x-a.x),y:o.y+h*(r.y-a.y)}}},g.EPSILON=Number.EPSILON||1e-14,g.splineCurveMonotone=function(t){var e,i,n,a,o,r,s,l,u,d=(t||[]).map(function(t){return{model:t._model,deltaK:0,mK:0}}),c=d.length;for(e=0;e<c;++e)if(!(n=d[e]).model.skip){if(i=0<e?d[e-1]:null,(a=e<c-1?d[e+1]:null)&&!a.model.skip){var h=a.model.x-n.model.x;n.deltaK=0!==h?(a.model.y-n.model.y)/h:0}!i||i.model.skip?n.mK=n.deltaK:!a||a.model.skip?n.mK=i.deltaK:this.sign(i.deltaK)!==this.sign(n.deltaK)?n.mK=0:n.mK=(i.deltaK+n.deltaK)/2}for(e=0;e<c-1;++e)n=d[e],a=d[e+1],n.model.skip||a.model.skip||(g.almostEquals(n.deltaK,0,this.EPSILON)?n.mK=a.mK=0:(o=n.mK/n.deltaK,r=a.mK/n.deltaK,(l=Math.pow(o,2)+Math.pow(r,2))<=9||(s=3/Math.sqrt(l),n.mK=o*s*n.deltaK,a.mK=r*s*n.deltaK)));for(e=0;e<c;++e)(n=d[e]).model.skip||(i=0<e?d[e-1]:null,a=e<c-1?d[e+1]:null,i&&!i.model.skip&&(u=(n.model.x-i.model.x)/3,n.model.controlPointPreviousX=n.model.x-u,n.model.controlPointPreviousY=n.model.y-u*n.mK),a&&!a.model.skip&&(u=(a.model.x-n.model.x)/3,n.model.controlPointNextX=n.model.x+u,n.model.controlPointNextY=n.model.y+u*n.mK))},g.nextItem=function(t,e,i){return i?e>=t.length-1?t[0]:t[e+1]:e>=t.length-1?t[t.length-1]:t[e+1]},g.previousItem=function(t,e,i){return i?e<=0?t[t.length-1]:t[e-1]:e<=0?t[0]:t[e-1]},g.niceNum=function(t,e){var i=Math.floor(g.log10(t)),n=t/Math.pow(10,i);return(e?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10)*Math.pow(10,i)},g.requestAnimFrame="undefined"==typeof window?function(t){t()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},g.getRelativePosition=function(t,e){var i,n,a=t.originalEvent||t,o=t.target||t.srcElement,r=o.getBoundingClientRect(),s=a.touches;n=s&&0<s.length?(i=s[0].clientX,s[0].clientY):(i=a.clientX,a.clientY);var l=parseFloat(g.getStyle(o,"padding-left")),u=parseFloat(g.getStyle(o,"padding-top")),d=parseFloat(g.getStyle(o,"padding-right")),c=parseFloat(g.getStyle(o,"padding-bottom")),h=r.right-r.left-l-d,f=r.bottom-r.top-u-c;return{x:i=Math.round((i-r.left-l)/h*o.width/e.currentDevicePixelRatio),y:n=Math.round((n-r.top-u)/f*o.height/e.currentDevicePixelRatio)}},g.getConstraintWidth=function(t){return e(t,"max-width","clientWidth")},g.getConstraintHeight=function(t){return e(t,"max-height","clientHeight")},g._calculatePadding=function(t,e,i){return-1<(e=g.getStyle(t,e)).indexOf("%")?i/parseInt(e,10):parseInt(e,10)},g._getParentNode=function(t){var e=t.parentNode;return e&&e.host&&(e=e.host),e},g.getMaximumWidth=function(t){var e=g._getParentNode(t);if(!e)return t.clientWidth;var i=e.clientWidth,n=i-g._calculatePadding(e,"padding-left",i)-g._calculatePadding(e,"padding-right",i),a=g.getConstraintWidth(t);return isNaN(a)?n:Math.min(n,a)},g.getMaximumHeight=function(t){var e=g._getParentNode(t);if(!e)return t.clientHeight;var i=e.clientHeight,n=i-g._calculatePadding(e,"padding-top",i)-g._calculatePadding(e,"padding-bottom",i),a=g.getConstraintHeight(t);return isNaN(a)?n:Math.min(n,a)},g.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},g.retinaScale=function(t,e){var i=t.currentDevicePixelRatio=e||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==i){var n=t.canvas,a=t.height,o=t.width;n.height=a*i,n.width=o*i,t.ctx.scale(i,i),n.style.height||n.style.width||(n.style.height=a+"px",n.style.width=o+"px")}},g.fontString=function(t,e,i){return e+" "+t+"px "+i},g.longestText=function(e,t,i,n){var a=(n=n||{}).data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(a=n.data={},o=n.garbageCollect=[],n.font=t),e.font=t;var r=0;g.each(i,function(t){null!=t&&!0!==g.isArray(t)?r=g.measureText(e,a,o,r,t):g.isArray(t)&&g.each(t,function(t){null==t||g.isArray(t)||(r=g.measureText(e,a,o,r,t))})});var s=o.length/2;if(s>i.length){for(var l=0;l<s;l++)delete a[o[l]];o.splice(0,s)}return r},g.measureText=function(t,e,i,n,a){var o=e[a];return o||(o=e[a]=t.measureText(a).width,i.push(a)),n<o&&(n=o),n},g.numberOfLabelLines=function(t){var e=1;return g.each(t,function(t){g.isArray(t)&&t.length>e&&(e=t.length)}),e},g.color=n?function(t){return t instanceof CanvasGradient&&(t=a.global.defaultColor),n(t)}:function(t){return console.error("Color.js not found!"),t},g.getHoverColor=function(t){return t instanceof CanvasPattern?t:g.color(t).saturate(.5).darken(.1).rgbString()}}},{26:26,3:3,34:34,46:46}],29:[function(t,e,i){"use strict";var n=t(46);function s(t,e){return t.native?{x:t.x,y:t.y}:n.getRelativePosition(t,e)}function l(t,e){var i,n,a,o,r;for(n=0,o=t.data.datasets.length;n<o;++n)if(t.isDatasetVisible(n))for(a=0,r=(i=t.getDatasetMeta(n)).data.length;a<r;++a){var s=i.data[a];s._view.skip||e(s)}}function u(t,e){var i=[];return l(t,function(t){t.inRange(e.x,e.y)&&i.push(t)}),i}function d(t,n,a,o){var r=Number.POSITIVE_INFINITY,s=[];return l(t,function(t){if(!a||t.inRange(n.x,n.y)){var e=t.getCenterPoint(),i=o(n,e);i<r?(s=[t],r=i):i===r&&s.push(t)}}),s}function c(t){var a=-1!==t.indexOf("x"),o=-1!==t.indexOf("y");return function(t,e){var i=a?Math.abs(t.x-e.x):0,n=o?Math.abs(t.y-e.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))}}function a(n,t,e){var i=s(t,n);e.axis=e.axis||"x";var a=c(e.axis),o=e.intersect?u(n,i):d(n,i,!1,a),r=[];return o.length?(n.data.datasets.forEach(function(t,e){if(n.isDatasetVisible(e)){var i=n.getDatasetMeta(e).data[o[0]._index];i&&!i._view.skip&&r.push(i)}}),r):[]}e.exports={modes:{single:function(t,e){var i=s(e,t),n=[];return l(t,function(t){if(t.inRange(i.x,i.y))return n.push(t),n}),n.slice(0,1)},label:a,index:a,dataset:function(t,e,i){var n=s(e,t);i.axis=i.axis||"xy";var a=c(i.axis),o=i.intersect?u(t,n):d(t,n,!1,a);return 0<o.length&&(o=t.getDatasetMeta(o[0]._datasetIndex).data),o},"x-axis":function(t,e){return a(t,e,{intersect:!1})},point:function(t,e){return u(t,s(e,t))},nearest:function(t,e,i){var n=s(e,t);i.axis=i.axis||"xy";var a=c(i.axis),o=d(t,n,i.intersect,a);return 1<o.length&&o.sort(function(t,e){var i=t.getArea()-e.getArea();return 0===i&&(i=t._datasetIndex-e._datasetIndex),i}),o.slice(0,1)},x:function(t,e,i){var n=s(e,t),a=[],o=!1;return l(t,function(t){t.inXRange(n.x)&&a.push(t),t.inRange(n.x,n.y)&&(o=!0)}),i.intersect&&!o&&(a=[]),a},y:function(t,e,i){var n=s(e,t),a=[],o=!1;return l(t,function(t){t.inYRange(n.y)&&a.push(t),t.inRange(n.x,n.y)&&(o=!0)}),i.intersect&&!o&&(a=[]),a}}}},{46:46}],30:[function(t,e,i){"use strict";t(26)._set("global",{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",showLines:!0,elements:{},layout:{padding:{top:0,right:0,bottom:0,left:0}}}),e.exports=function(){var t=function(t,e){return this.construct(t,e),this};return t.Chart=t}},{26:26}],31:[function(t,e,i){"use strict";var B=t(46);function W(t,e){return B.where(t,function(t){return t.position===e})}function V(t,a){t.forEach(function(t,e){return t._tmpIndex_=e,t}),t.sort(function(t,e){var i=a?e:t,n=a?t:e;return i.weight===n.weight?i._tmpIndex_-n._tmpIndex_:i.weight-n.weight}),t.forEach(function(t){delete t._tmpIndex_})}e.exports={defaults:{},addBox:function(t,e){t.boxes||(t.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,t.boxes.push(e)},removeBox:function(t,e){var i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure:function(t,e,i){for(var n,a=["fullWidth","position","weight"],o=a.length,r=0;r<o;++r)n=a[r],i.hasOwnProperty(n)&&(e[n]=i[n])},update:function(e,i,t){if(e){var n=e.options.layout||{},a=B.options.toPadding(n.padding),o=a.left,r=a.right,s=a.top,l=a.bottom,u=W(e.boxes,"left"),d=W(e.boxes,"right"),c=W(e.boxes,"top"),h=W(e.boxes,"bottom"),f=W(e.boxes,"chartArea");V(u,!0),V(d,!1),V(c,!0),V(h,!1);var g=i-o-r,p=t-s-l,m=p/2,v=(i-g/2)/(u.length+d.length),b=(t-m)/(c.length+h.length),x=g,y=p,k=[];B.each(u.concat(d,c,h),function(t){var e,i=t.isHorizontal();i?(e=t.update(t.fullWidth?g:x,b),y-=e.height):(e=t.update(v,y),x-=e.width),k.push({horizontal:i,minSize:e,box:t})});var M=0,w=0,C=0,S=0;B.each(c.concat(h),function(t){if(t.getPadding){var e=t.getPadding();M=Math.max(M,e.left),w=Math.max(w,e.right)}}),B.each(u.concat(d),function(t){if(t.getPadding){var e=t.getPadding();C=Math.max(C,e.top),S=Math.max(S,e.bottom)}});var _=o,D=r,P=s,I=l;B.each(u.concat(d),z),B.each(u,function(t){_+=t.width}),B.each(d,function(t){D+=t.width}),B.each(c.concat(h),z),B.each(c,function(t){P+=t.height}),B.each(h,function(t){I+=t.height}),B.each(u.concat(d),function(e){var t=B.findNextWhere(k,function(t){return t.box===e}),i={left:0,right:0,top:P,bottom:I};t&&e.update(t.minSize.width,y,i)}),_=o,D=r,P=s,I=l,B.each(u,function(t){_+=t.width}),B.each(d,function(t){D+=t.width}),B.each(c,function(t){P+=t.height}),B.each(h,function(t){I+=t.height});var A=Math.max(M-_,0);_+=A,D+=Math.max(w-D,0);var T=Math.max(C-P,0);P+=T,I+=Math.max(S-I,0);var F=t-P-I,O=i-_-D;O===x&&F===y||(B.each(u,function(t){t.height=F}),B.each(d,function(t){t.height=F}),B.each(c,function(t){t.fullWidth||(t.width=O)}),B.each(h,function(t){t.fullWidth||(t.width=O)}),y=F,x=O);var R=o+A,L=s+T;B.each(u.concat(c),N),R+=x,L+=y,B.each(d,N),B.each(h,N),e.chartArea={left:_,top:P,right:_+x,bottom:P+y},B.each(f,function(t){t.left=e.chartArea.left,t.top=e.chartArea.top,t.right=e.chartArea.right,t.bottom=e.chartArea.bottom,t.update(x,y)})}function z(e){var t=B.findNextWhere(k,function(t){return t.box===e});if(t)if(e.isHorizontal()){var i={left:Math.max(_,M),right:Math.max(D,w),top:0,bottom:0};e.update(e.fullWidth?g:x,p/2,i)}else e.update(t.minSize.width,y)}function N(t){t.isHorizontal()?(t.left=t.fullWidth?o:_,t.right=t.fullWidth?i-r:_+x,t.top=L,t.bottom=L+t.height,L=t.bottom):(t.left=R,t.right=R+t.width,t.top=P,t.bottom=P+y,R=t.right)}}}},{46:46}],32:[function(t,e,i){"use strict";var r=t(26),s=t(46);r._set("global",{plugins:{}}),e.exports={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach(function(t){-1===e.indexOf(t)&&e.push(t)}),this._cacheId++},unregister:function(t){var i=this._plugins;[].concat(t).forEach(function(t){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,i){var n,a,o,r,s,l=this.descriptors(t),u=l.length;for(n=0;n<u;++n)if("function"==typeof(s=(o=(a=l[n]).plugin)[e])&&((r=[t].concat(i||[])).push(a.options),!1===s.apply(o,r)))return!1;return!0},descriptors:function(t){var e=t.$plugins||(t.$plugins={});if(e.id===this._cacheId)return e.descriptors;var n=[],a=[],i=t&&t.config||{},o=i.options&&i.options.plugins||{};return this._plugins.concat(i.plugins||[]).forEach(function(t){if(-1===n.indexOf(t)){var e=t.id,i=o[e];!1!==i&&(!0===i&&(i=s.clone(r.global.plugins[e])),n.push(t),a.push({plugin:t,options:i||{}}))}}),e.descriptors=a,e.id=this._cacheId,a},_invalidate:function(t){delete t.$plugins}}},{26:26,46:46}],33:[function(t,e,i){"use strict";var y=t(26),n=t(27),H=t(46),a=t(35);function k(t){var e,i,n=[];for(e=0,i=t.length;e<i;++e)n.push(t[e].label);return n}function j(t,e,i){var n=t.getPixelForTick(e);return i&&(n-=0===e?(t.getPixelForTick(1)-n)/2:(n-t.getPixelForTick(e-1))/2),n}function M(t,e,i){return H.isArray(e)?H.longestText(t,i,e):t.measureText(e).width}function w(t){var e=H.valueOrDefault,i=y.global,n=e(t.fontSize,i.defaultFontSize),a=e(t.fontStyle,i.defaultFontStyle),o=e(t.fontFamily,i.defaultFontFamily);return{size:n,style:a,family:o,font:H.fontString(n,a,o)}}function C(t){return H.options.toLineHeight(H.valueOrDefault(t.lineHeight,1.2),H.valueOrDefault(t.fontSize,y.global.defaultFontSize))}y._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",lineHeight:1.2,padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:a.formatters.values,minor:{},major:{}}}),e.exports=n.extend({getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var t=this.options.ticks;for(var e in!1===t.minor&&(t.minor={display:!1}),!1===t.major&&(t.major={display:!1}),t)"major"!==e&&"minor"!==e&&(void 0===t.minor[e]&&(t.minor[e]=t[e]),void 0===t.major[e]&&(t.major[e]=t[e]))},beforeUpdate:function(){H.callback(this.options.beforeUpdate,[this])},update:function(t,e,i){var n,a,o,r,s,l,u=this;for(u.beforeUpdate(),u.maxWidth=t,u.maxHeight=e,u.margins=H.extend({left:0,right:0,top:0,bottom:0},i),u.longestTextCache=u.longestTextCache||{},u.beforeSetDimensions(),u.setDimensions(),u.afterSetDimensions(),u.beforeDataLimits(),u.determineDataLimits(),u.afterDataLimits(),u.beforeBuildTicks(),s=u.buildTicks()||[],u.afterBuildTicks(),u.beforeTickToLabelConversion(),o=u.convertTicksToLabels(s)||u.ticks,u.afterTickToLabelConversion(),n=0,a=(u.ticks=o).length;n<a;++n)r=o[n],(l=s[n])?l.label=r:s.push(l={label:r,major:!1});return u._ticks=s,u.beforeCalculateTickRotation(),u.calculateTickRotation(),u.afterCalculateTickRotation(),u.beforeFit(),u.fit(),u.afterFit(),u.afterUpdate(),u.minSize},afterUpdate:function(){H.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){H.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){H.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){H.callback(this.options.beforeDataLimits,[this])},determineDataLimits:H.noop,afterDataLimits:function(){H.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){H.callback(this.options.beforeBuildTicks,[this])},buildTicks:H.noop,afterBuildTicks:function(){H.callback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){H.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this.options.ticks;this.ticks=this.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){H.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){H.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t=this,e=t.ctx,i=t.options.ticks,n=k(t._ticks),a=w(i);e.font=a.font;var o=i.minRotation||0;if(n.length&&t.options.display&&t.isHorizontal())for(var r,s=H.longestText(e,a.font,n,t.longestTextCache),l=s,u=t.getPixelForTick(1)-t.getPixelForTick(0)-6;u<l&&o<i.maxRotation;){var d=H.toRadians(o);if(r=Math.cos(d),Math.sin(d)*s>t.maxHeight){o--;break}o++,l=r*s}t.labelRotation=o},afterCalculateTickRotation:function(){H.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){H.callback(this.options.beforeFit,[this])},fit:function(){var t=this,e=t.minSize={width:0,height:0},i=k(t._ticks),n=t.options,a=n.ticks,o=n.scaleLabel,r=n.gridLines,s=n.display,l=t.isHorizontal(),u=w(a),d=n.gridLines.tickMarkLength;if(e.width=l?t.isFullWidth()?t.maxWidth-t.margins.left-t.margins.right:t.maxWidth:s&&r.drawTicks?d:0,e.height=l?s&&r.drawTicks?d:0:t.maxHeight,o.display&&s){var c=C(o)+H.options.toPadding(o.padding).height;l?e.height+=c:e.width+=c}if(a.display&&s){var h=H.longestText(t.ctx,u.font,i,t.longestTextCache),f=H.numberOfLabelLines(i),g=.5*u.size,p=t.options.ticks.padding;if(l){t.longestLabelWidth=h;var m=H.toRadians(t.labelRotation),v=Math.cos(m),b=Math.sin(m)*h+u.size*f+g*(f-1)+g;e.height=Math.min(t.maxHeight,e.height+b+p),t.ctx.font=u.font;var x=M(t.ctx,i[0],u.font),y=M(t.ctx,i[i.length-1],u.font);0!==t.labelRotation?(t.paddingLeft="bottom"===n.position?v*x+3:v*g+3,t.paddingRight="bottom"===n.position?v*g+3:v*y+3):(t.paddingLeft=x/2+3,t.paddingRight=y/2+3)}else a.mirror?h=0:h+=p+g,e.width=Math.min(t.maxWidth,e.width+h),t.paddingTop=u.size/2,t.paddingBottom=u.size/2}t.handleMargins(),t.width=e.width,t.height=e.height},handleMargins:function(){var t=this;t.margins&&(t.paddingLeft=Math.max(t.paddingLeft-t.margins.left,0),t.paddingTop=Math.max(t.paddingTop-t.margins.top,0),t.paddingRight=Math.max(t.paddingRight-t.margins.right,0),t.paddingBottom=Math.max(t.paddingBottom-t.margins.bottom,0))},afterFit:function(){H.callback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(H.isNullOrUndef(t))return NaN;if("number"==typeof t&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(void 0!==t.x)return this.getRightValue(t.x)}else if(void 0!==t.y)return this.getRightValue(t.y);return t},getLabelForIndex:H.noop,getPixelForValue:H.noop,getValueForPixel:H.noop,getPixelForTick:function(t){var e=this,i=e.options.offset;if(e.isHorizontal()){var n=(e.width-(e.paddingLeft+e.paddingRight))/Math.max(e._ticks.length-(i?0:1),1),a=n*t+e.paddingLeft;i&&(a+=n/2);var o=e.left+Math.round(a);return o+=e.isFullWidth()?e.margins.left:0}var r=e.height-(e.paddingTop+e.paddingBottom);return e.top+t*(r/(e._ticks.length-1))},getPixelForDecimal:function(t){var e=this;if(e.isHorizontal()){var i=(e.width-(e.paddingLeft+e.paddingRight))*t+e.paddingLeft,n=e.left+Math.round(i);return n+=e.isFullWidth()?e.margins.left:0}return e.top+t*e.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this.min,e=this.max;return this.beginAtZero?0:t<0&&e<0?e:0<t&&0<e?t:0},_autoSkip:function(t){var e,i,n,a,o=this,r=o.isHorizontal(),s=o.options.ticks.minor,l=t.length,u=H.toRadians(o.labelRotation),d=Math.cos(u),c=o.longestLabelWidth*d,h=[];for(s.maxTicksLimit&&(a=s.maxTicksLimit),r&&(e=!1,(c+s.autoSkipPadding)*l>o.width-(o.paddingLeft+o.paddingRight)&&(e=1+Math.floor((c+s.autoSkipPadding)*l/(o.width-(o.paddingLeft+o.paddingRight)))),a&&a<l&&(e=Math.max(e,Math.floor(l/a)))),i=0;i<l;i++)n=t[i],(1<e&&0<i%e||i%e==0&&l<=i+e)&&i!==l-1&&delete n.label,h.push(n);return h},draw:function(S){var _=this,D=_.options;if(D.display){var r=_.ctx,P=y.global,I=D.ticks.minor,t=D.ticks.major||I,A=D.gridLines,e=D.scaleLabel,T=0!==_.labelRotation,F=_.isHorizontal(),O=I.autoSkip?_._autoSkip(_.getTicks()):_.getTicks(),s=H.valueOrDefault(I.fontColor,P.defaultFontColor),l=w(I),u=H.valueOrDefault(t.fontColor,P.defaultFontColor),d=w(t),R=A.drawTicks?A.tickMarkLength:0,i=H.valueOrDefault(e.fontColor,P.defaultFontColor),n=w(e),a=H.options.toPadding(e.padding),L=H.toRadians(_.labelRotation),z=[],N=_.options.gridLines.lineWidth,B="right"===D.position?_.left:_.right-N-R,W="right"===D.position?_.left+R:_.right,V="bottom"===D.position?_.top+N:_.bottom-R-N,E="bottom"===D.position?_.top+N+R:_.bottom+N;if(H.each(O,function(t,e){if(!H.isNullOrUndef(t.label)){var i,n,a,o,r,s,l,u,d,c,h,f,g,p,m=t.label;o=e===_.zeroLineIndex&&D.offset===A.offsetGridLines?(i=A.zeroLineWidth,n=A.zeroLineColor,a=A.zeroLineBorderDash,A.zeroLineBorderDashOffset):(i=H.valueAtIndexOrDefault(A.lineWidth,e),n=H.valueAtIndexOrDefault(A.color,e),a=H.valueOrDefault(A.borderDash,P.borderDash),H.valueOrDefault(A.borderDashOffset,P.borderDashOffset));var v="middle",b="middle",x=I.padding;if(F){var y=R+x;p="bottom"===D.position?(b=T?"middle":"top",v=T?"right":"center",_.top+y):(b=T?"middle":"bottom",v=T?"left":"center",_.bottom-y);var k=j(_,e,A.offsetGridLines&&1<O.length);k<_.left&&(n="rgba(0,0,0,0)"),k+=H.aliasPixel(i),g=_.getPixelForTick(e)+I.labelOffset,r=l=d=h=k,s=V,u=E,c=S.top,f=S.bottom+N}else{var M,w="left"===D.position;M=I.mirror?(v=w?"left":"right",x):(v=w?"right":"left",R+x),g=w?_.right-M:_.left+M;var C=j(_,e,A.offsetGridLines&&1<O.length);C<_.top&&(n="rgba(0,0,0,0)"),C+=H.aliasPixel(i),p=_.getPixelForTick(e)+I.labelOffset,r=B,l=W,d=S.left,h=S.right+N,s=u=c=f=C}z.push({tx1:r,ty1:s,tx2:l,ty2:u,x1:d,y1:c,x2:h,y2:f,labelX:g,labelY:p,glWidth:i,glColor:n,glBorderDash:a,glBorderDashOffset:o,rotation:-1*L,label:m,major:t.major,textBaseline:b,textAlign:v})}}),H.each(z,function(t){if(A.display&&(r.save(),r.lineWidth=t.glWidth,r.strokeStyle=t.glColor,r.setLineDash&&(r.setLineDash(t.glBorderDash),r.lineDashOffset=t.glBorderDashOffset),r.beginPath(),A.drawTicks&&(r.moveTo(t.tx1,t.ty1),r.lineTo(t.tx2,t.ty2)),A.drawOnChartArea&&(r.moveTo(t.x1,t.y1),r.lineTo(t.x2,t.y2)),r.stroke(),r.restore()),I.display){r.save(),r.translate(t.labelX,t.labelY),r.rotate(t.rotation),r.font=t.major?d.font:l.font,r.fillStyle=t.major?u:s,r.textBaseline=t.textBaseline,r.textAlign=t.textAlign;var e=t.label;if(H.isArray(e))for(var i=e.length,n=1.5*l.size,a=_.isHorizontal()?0:-n*(i-1)/2,o=0;o<i;++o)r.fillText(""+e[o],0,a),a+=n;else r.fillText(e,0,0);r.restore()}}),e.display){var o,c,h=0,f=C(e)/2;if(F)o=_.left+(_.right-_.left)/2,c="bottom"===D.position?_.bottom-f-a.bottom:_.top+f+a.top;else{var g="left"===D.position;o=g?_.left+f+a.top:_.right-f-a.top,c=_.top+(_.bottom-_.top)/2,h=g?-.5*Math.PI:.5*Math.PI}r.save(),r.translate(o,c),r.rotate(h),r.textAlign="center",r.textBaseline="middle",r.fillStyle=i,r.font=n.font,r.fillText(e.labelString,0,0),r.restore()}if(A.drawBorder){r.lineWidth=H.valueAtIndexOrDefault(A.lineWidth,0),r.strokeStyle=H.valueAtIndexOrDefault(A.color,0);var p=_.left,m=_.right+N,v=_.top,b=_.bottom+N,x=H.aliasPixel(r.lineWidth);F?(v=b="top"===D.position?_.bottom:_.top,v+=x,b+=x):(p=m="left"===D.position?_.right:_.left,p+=x,m+=x),r.beginPath(),r.moveTo(p,v),r.lineTo(m,b),r.stroke()}}}})},{26:26,27:27,35:35,46:46}],34:[function(t,e,i){"use strict";var n=t(26),a=t(46),o=t(31);e.exports={constructors:{},defaults:{},registerScaleType:function(t,e,i){this.constructors[t]=e,this.defaults[t]=a.clone(i)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?a.merge({},[n.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){this.defaults.hasOwnProperty(t)&&(this.defaults[t]=a.extend(this.defaults[t],e))},addScalesToLayout:function(e){a.each(e.scales,function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,o.addBox(e,t)})}}},{26:26,31:31,46:46}],35:[function(t,e,i){"use strict";var l=t(46);e.exports={formatters:{values:function(t){return l.isArray(t)?t:""+t},linear:function(t,e,i){var n=3<i.length?i[2]-i[1]:i[1]-i[0];1<Math.abs(n)&&t!==Math.floor(t)&&(n=t-Math.floor(t));var a=l.log10(Math.abs(n)),o="";if(0!==t)if(Math.max(Math.abs(i[0]),Math.abs(i[i.length-1]))<1e-4){var r=l.log10(Math.abs(t));o=t.toExponential(Math.floor(r)-Math.floor(a))}else{var s=-1*Math.floor(a);s=Math.max(Math.min(s,20),0),o=t.toFixed(s)}else o="0";return o},logarithmic:function(t,e,i){var n=t/Math.pow(10,Math.floor(l.log10(t)));return 0===t?"0":1===n||2===n||5===n||0===e||e===i.length-1?t.toExponential():""}}}},{46:46}],36:[function(t,e,i){"use strict";var n=t(26),a=t(27),R=t(46);n._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:R.noop,title:function(t,e){var i="",n=e.labels,a=n?n.length:0;if(0<t.length){var o=t[0];o.xLabel?i=o.xLabel:0<a&&o.index<a&&(i=n[o.index])}return i},afterTitle:R.noop,beforeBody:R.noop,beforeLabel:R.noop,label:function(t,e){var i=e.datasets[t.datasetIndex].label||"";return i&&(i+=": "),i+=t.yLabel},labelColor:function(t,e){var i=e.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:i.borderColor,backgroundColor:i.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:R.noop,afterBody:R.noop,beforeFooter:R.noop,footer:R.noop,afterFooter:R.noop}}});var L={average:function(t){if(!t.length)return!1;var e,i,n=0,a=0,o=0;for(e=0,i=t.length;e<i;++e){var r=t[e];if(r&&r.hasValue()){var s=r.tooltipPosition();n+=s.x,a+=s.y,++o}}return{x:Math.round(n/o),y:Math.round(a/o)}},nearest:function(t,e){var i,n,a,o=e.x,r=e.y,s=Number.POSITIVE_INFINITY;for(i=0,n=t.length;i<n;++i){var l=t[i];if(l&&l.hasValue()){var u=l.getCenterPoint(),d=R.distanceBetweenPoints(e,u);d<s&&(s=d,a=l)}}if(a){var c=a.tooltipPosition();o=c.x,r=c.y}return{x:o,y:r}}};function h(t,e){var i=R.color(t);return i.alpha(e*i.alpha()).rgbaString()}function r(t,e){return e&&(R.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function s(t){return("string"==typeof t||t instanceof String)&&-1<t.indexOf("\n")?t.split("\n"):t}function z(t){var e=n.global,i=R.valueOrDefault;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,bodyFontColor:t.bodyFontColor,_bodyFontFamily:i(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:i(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:i(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:i(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:i(t.titleFontStyle,e.defaultFontStyle),titleFontSize:i(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:i(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:i(t.footerFontStyle,e.defaultFontStyle),footerFontSize:i(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function o(t){return r([],s(t))}(e.exports=a.extend({initialize:function(){this._model=z(this._options),this._lastActive=[]},getTitle:function(){var t=this._options.callbacks,e=t.beforeTitle.apply(this,arguments),i=t.title.apply(this,arguments),n=t.afterTitle.apply(this,arguments),a=[];return a=r(a=r(a=r(a,s(e)),s(i)),s(n))},getBeforeBody:function(){return o(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,i){var n=this,a=n._options.callbacks,o=[];return R.each(t,function(t){var e={before:[],lines:[],after:[]};r(e.before,s(a.beforeLabel.call(n,t,i))),r(e.lines,a.label.call(n,t,i)),r(e.after,s(a.afterLabel.call(n,t,i))),o.push(e)}),o},getAfterBody:function(){return o(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this._options.callbacks,e=t.beforeFooter.apply(this,arguments),i=t.footer.apply(this,arguments),n=t.afterFooter.apply(this,arguments),a=[];return a=r(a=r(a=r(a,s(e)),s(i)),s(n))},update:function(t){var e,i,n,a,o,r,s,l,u,d,c,h,f,g,p,m,v,b,x,y,k=this,M=k._options,w=k._model,C=k._model=z(M),S=k._active,_=k._data,D={xAlign:w.xAlign,yAlign:w.yAlign},P={x:w.x,y:w.y},I={width:w.width,height:w.height},A={x:w.caretX,y:w.caretY};if(S.length){C.opacity=1;var T=[],F=[];A=L[M.position].call(k,S,k._eventPosition);var O=[];for(e=0,i=S.length;e<i;++e)O.push((m=S[e],b=v=void 0,v=m._xScale,b=m._yScale||m._scale,x=m._index,y=m._datasetIndex,{xLabel:v?v.getLabelForIndex(x,y):"",yLabel:b?b.getLabelForIndex(x,y):"",index:x,datasetIndex:y,x:m._model.x,y:m._model.y}));M.filter&&(O=O.filter(function(t){return M.filter(t,_)})),M.itemSort&&(O=O.sort(function(t,e){return M.itemSort(t,e,_)})),R.each(O,function(t){T.push(M.callbacks.labelColor.call(k,t,k._chart)),F.push(M.callbacks.labelTextColor.call(k,t,k._chart))}),C.title=k.getTitle(O,_),C.beforeBody=k.getBeforeBody(O,_),C.body=k.getBody(O,_),C.afterBody=k.getAfterBody(O,_),C.footer=k.getFooter(O,_),C.x=Math.round(A.x),C.y=Math.round(A.y),C.caretPadding=M.caretPadding,C.labelColors=T,C.labelTextColors=F,C.dataPoints=O,D=function(t,e){var i,n,a,o,r,s=t._model,l=t._chart,u=t._chart.chartArea,d="center",c="center";s.y<e.height?c="top":s.y>l.height-e.height&&(c="bottom");var h=(u.left+u.right)/2,f=(u.top+u.bottom)/2;n="center"===c?(i=function(t){return t<=h},function(t){return h<t}):(i=function(t){return t<=e.width/2},function(t){return t>=l.width-e.width/2}),a=function(t){return t+e.width+s.caretSize+s.caretPadding>l.width},o=function(t){return t-e.width-s.caretSize-s.caretPadding<0},r=function(t){return t<=f?"top":"bottom"},i(s.x)?(d="left",a(s.x)&&(d="center",c=r(s.y))):n(s.x)&&(d="right",o(s.x)&&(d="center",c=r(s.y)));var g=t._options;return{xAlign:g.xAlign?g.xAlign:d,yAlign:g.yAlign?g.yAlign:c}}(this,I=function(t,e){var i=t._chart.ctx,n=2*e.yPadding,a=0,o=e.body,r=o.reduce(function(t,e){return t+e.before.length+e.lines.length+e.after.length},0);r+=e.beforeBody.length+e.afterBody.length;var s=e.title.length,l=e.footer.length,u=e.titleFontSize,d=e.bodyFontSize,c=e.footerFontSize;n+=s*u,n+=s?(s-1)*e.titleSpacing:0,n+=s?e.titleMarginBottom:0,n+=r*d,n+=r?(r-1)*e.bodySpacing:0,n+=l?e.footerMarginTop:0,n+=l*c,n+=l?(l-1)*e.footerSpacing:0;var h=0,f=function(t){a=Math.max(a,i.measureText(t).width+h)};return i.font=R.fontString(u,e._titleFontStyle,e._titleFontFamily),R.each(e.title,f),i.font=R.fontString(d,e._bodyFontStyle,e._bodyFontFamily),R.each(e.beforeBody.concat(e.afterBody),f),h=e.displayColors?d+2:0,R.each(o,function(t){R.each(t.before,f),R.each(t.lines,f),R.each(t.after,f)}),h=0,i.font=R.fontString(c,e._footerFontStyle,e._footerFontFamily),R.each(e.footer,f),{width:a+=2*e.xPadding,height:n}}(this,C)),n=C,a=I,o=D,r=k._chart,s=n.x,l=n.y,u=n.caretSize,d=n.caretPadding,c=n.cornerRadius,h=o.xAlign,f=o.yAlign,g=u+d,p=c+d,"right"===h?s-=a.width:"center"===h&&((s-=a.width/2)+a.width>r.width&&(s=r.width-a.width),s<0&&(s=0)),"top"===f?l+=g:l-="bottom"===f?a.height+g:a.height/2,"center"===f?"left"===h?s+=g:"right"===h&&(s-=g):"left"===h?s-=p:"right"===h&&(s+=p),P={x:s,y:l}}else C.opacity=0;return C.xAlign=D.xAlign,C.yAlign=D.yAlign,C.x=P.x,C.y=P.y,C.width=I.width,C.height=I.height,C.caretX=A.x,C.caretY=A.y,k._model=C,t&&M.custom&&M.custom.call(k,C),k},drawCaret:function(t,e){var i=this._chart.ctx,n=this._view,a=this.getCaretPosition(t,e,n);i.lineTo(a.x1,a.y1),i.lineTo(a.x2,a.y2),i.lineTo(a.x3,a.y3)},getCaretPosition:function(t,e,i){var n,a,o,r,s,l,u=i.caretSize,d=i.cornerRadius,c=i.xAlign,h=i.yAlign,f=t.x,g=t.y,p=e.width,m=e.height;if("center"===h)s=g+m/2,l="left"===c?(a=(n=f)-u,o=n,r=s+u,s-u):(a=(n=f+p)+u,o=n,r=s-u,s+u);else if(o=(n="left"===c?(a=f+d+u)-u:"right"===c?(a=f+p-d-u)-u:(a=i.caretX)-u,a+u),"top"===h)s=(r=g)-u,l=r;else{s=(r=g+m)+u,l=r;var v=o;o=n,n=v}return{x1:n,x2:a,x3:o,y1:r,y2:s,y3:l}},drawTitle:function(t,e,i,n){var a=e.title;if(a.length){i.textAlign=e._titleAlign,i.textBaseline="top";var o,r,s=e.titleFontSize,l=e.titleSpacing;for(i.fillStyle=h(e.titleFontColor,n),i.font=R.fontString(s,e._titleFontStyle,e._titleFontFamily),o=0,r=a.length;o<r;++o)i.fillText(a[o],t.x,t.y),t.y+=s+l,o+1===a.length&&(t.y+=e.titleMarginBottom-l)}},drawBody:function(n,a,o,r){var s=a.bodyFontSize,e=a.bodySpacing,t=a.body;o.textAlign=a._bodyAlign,o.textBaseline="top",o.font=R.fontString(s,a._bodyFontStyle,a._bodyFontFamily);var i=0,l=function(t){o.fillText(t,n.x+i,n.y),n.y+=s+e};o.fillStyle=h(a.bodyFontColor,r),R.each(a.beforeBody,l);var u=a.displayColors;i=u?s+2:0,R.each(t,function(t,e){var i=h(a.labelTextColors[e],r);o.fillStyle=i,R.each(t.before,l),R.each(t.lines,function(t){u&&(o.fillStyle=h(a.legendColorBackground,r),o.fillRect(n.x,n.y,s,s),o.lineWidth=1,o.strokeStyle=h(a.labelColors[e].borderColor,r),o.strokeRect(n.x,n.y,s,s),o.fillStyle=h(a.labelColors[e].backgroundColor,r),o.fillRect(n.x+1,n.y+1,s-2,s-2),o.fillStyle=i),l(t)}),R.each(t.after,l)}),i=0,R.each(a.afterBody,l),n.y-=e},drawFooter:function(e,i,n,t){var a=i.footer;a.length&&(e.y+=i.footerMarginTop,n.textAlign=i._footerAlign,n.textBaseline="top",n.fillStyle=h(i.footerFontColor,t),n.font=R.fontString(i.footerFontSize,i._footerFontStyle,i._footerFontFamily),R.each(a,function(t){n.fillText(t,e.x,e.y),e.y+=i.footerFontSize+i.footerSpacing}))},drawBackground:function(t,e,i,n,a){i.fillStyle=h(e.backgroundColor,a),i.strokeStyle=h(e.borderColor,a),i.lineWidth=e.borderWidth;var o=e.xAlign,r=e.yAlign,s=t.x,l=t.y,u=n.width,d=n.height,c=e.cornerRadius;i.beginPath(),i.moveTo(s+c,l),"top"===r&&this.drawCaret(t,n),i.lineTo(s+u-c,l),i.quadraticCurveTo(s+u,l,s+u,l+c),"center"===r&&"right"===o&&this.drawCaret(t,n),i.lineTo(s+u,l+d-c),i.quadraticCurveTo(s+u,l+d,s+u-c,l+d),"bottom"===r&&this.drawCaret(t,n),i.lineTo(s+c,l+d),i.quadraticCurveTo(s,l+d,s,l+d-c),"center"===r&&"left"===o&&this.drawCaret(t,n),i.lineTo(s,l+c),i.quadraticCurveTo(s,l,s+c,l),i.closePath(),i.fill(),0<e.borderWidth&&i.stroke()},draw:function(){var t=this._chart.ctx,e=this._view;if(0!==e.opacity){var i={width:e.width,height:e.height},n={x:e.x,y:e.y},a=Math.abs(e.opacity<.001)?0:e.opacity,o=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;this._options.enabled&&o&&(this.drawBackground(n,e,t,i,a),n.x+=e.xPadding,n.y+=e.yPadding,this.drawTitle(n,e,t,a),this.drawBody(n,e,t,a),this.drawFooter(n,e,t,a))}},handleEvent:function(t){var e,i=this,n=i._options;return i._lastActive=i._lastActive||[],"mouseout"===t.type?i._active=[]:i._active=i._chart.getElementsAtEventForMode(t,n.mode,n),(e=!R.arrayEquals(i._active,i._lastActive))&&(i._lastActive=i._active,(n.enabled||n.custom)&&(i._eventPosition={x:t.x,y:t.y},i.update(!0),i.pivot())),e}})).positioners=L},{26:26,27:27,46:46}],37:[function(t,e,i){"use strict";var n=t(26),a=t(27),d=t(46);n._set("global",{elements:{arc:{backgroundColor:n.global.defaultColor,borderColor:"#fff",borderWidth:2}}}),e.exports=a.extend({inLabelRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)},inRange:function(t,e){var i=this._view;if(i){for(var n=d.getAngleFromPoint(i,{x:t,y:e}),a=n.angle,o=n.distance,r=i.startAngle,s=i.endAngle;s<r;)s+=2*Math.PI;for(;s<a;)a-=2*Math.PI;for(;a<r;)a+=2*Math.PI;var l=r<=a&&a<=s,u=o>=i.innerRadius&&o<=i.outerRadius;return l&&u}return!1},getCenterPoint:function(){var t=this._view,e=(t.startAngle+t.endAngle)/2,i=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view,e=t.startAngle+(t.endAngle-t.startAngle)/2,i=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*i,y:t.y+Math.sin(e)*i}},draw:function(){var t=this._chart.ctx,e=this._view,i=e.startAngle,n=e.endAngle;t.beginPath(),t.arc(e.x,e.y,e.outerRadius,i,n),t.arc(e.x,e.y,e.innerRadius,n,i,!0),t.closePath(),t.strokeStyle=e.borderColor,t.lineWidth=e.borderWidth,t.fillStyle=e.backgroundColor,t.fill(),t.lineJoin="bevel",e.borderWidth&&t.stroke()}})},{26:26,27:27,46:46}],38:[function(t,e,i){"use strict";var n=t(26),a=t(27),d=t(46),c=n.global;n._set("global",{elements:{line:{tension:.4,backgroundColor:c.defaultColor,borderWidth:3,borderColor:c.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}}),e.exports=a.extend({draw:function(){var t,e,i,n,a=this._view,o=this._chart.ctx,r=a.spanGaps,s=this._children.slice(),l=c.elements.line,u=-1;for(this._loop&&s.length&&s.push(s[0]),o.save(),o.lineCap=a.borderCapStyle||l.borderCapStyle,o.setLineDash&&o.setLineDash(a.borderDash||l.borderDash),o.lineDashOffset=a.borderDashOffset||l.borderDashOffset,o.lineJoin=a.borderJoinStyle||l.borderJoinStyle,o.lineWidth=a.borderWidth||l.borderWidth,o.strokeStyle=a.borderColor||c.defaultColor,o.beginPath(),u=-1,t=0;t<s.length;++t)e=s[t],i=d.previousItem(s,t),n=e._view,0===t?n.skip||(o.moveTo(n.x,n.y),u=t):(i=-1===u?i:s[u],n.skip||(u!==t-1&&!r||-1===u?o.moveTo(n.x,n.y):d.canvas.lineTo(o,i._view,e._view),u=t));o.stroke(),o.restore()}})},{26:26,27:27,46:46}],39:[function(t,e,i){"use strict";var u=t(26),n=t(27),d=t(46),c=u.global.defaultColor;function a(t){var e=this._view;return!!e&&Math.abs(t-e.x)<e.radius+e.hitRadius}u._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:c,borderColor:c,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}}),e.exports=n.extend({inRange:function(t,e){var i=this._view;return!!i&&Math.pow(t-i.x,2)+Math.pow(e-i.y,2)<Math.pow(i.hitRadius+i.radius,2)},inLabelRange:a,inXRange:a,inYRange:function(t){var e=this._view;return!!e&&Math.abs(t-e.y)<e.radius+e.hitRadius},getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view,i=this._model,n=this._chart.ctx,a=e.pointStyle,o=e.rotation,r=e.radius,s=e.x,l=e.y;e.skip||(void 0===t||i.x>=t.left&&1.01*t.right>=i.x&&i.y>=t.top&&1.01*t.bottom>=i.y)&&(n.strokeStyle=e.borderColor||c,n.lineWidth=d.valueOrDefault(e.borderWidth,u.global.elements.point.borderWidth),n.fillStyle=e.backgroundColor||c,d.canvas.drawPoint(n,a,r,s,l,o))}})},{26:26,27:27,46:46}],40:[function(t,e,i){"use strict";var n=t(26),a=t(27);function l(t){return void 0!==t._view.width}function o(t){var e,i,n,a,o=t._view;if(l(t)){var r=o.width/2;e=o.x-r,i=o.x+r,n=Math.min(o.y,o.base),a=Math.max(o.y,o.base)}else{var s=o.height/2;e=Math.min(o.x,o.base),i=Math.max(o.x,o.base),n=o.y-s,a=o.y+s}return{left:e,top:n,right:i,bottom:a}}n._set("global",{elements:{rectangle:{backgroundColor:n.global.defaultColor,borderColor:n.global.defaultColor,borderSkipped:"bottom",borderWidth:0}}}),e.exports=a.extend({draw:function(){var t,e,i,n,a,o,r,s=this._chart.ctx,l=this._view,u=l.borderWidth;if(r=l.horizontal?(t=l.base,e=l.x,i=l.y-l.height/2,n=l.y+l.height/2,a=t<e?1:-1,o=1,l.borderSkipped||"left"):(t=l.x-l.width/2,e=l.x+l.width/2,a=1,o=(i=l.y)<(n=l.base)?1:-1,l.borderSkipped||"bottom"),u){var d=Math.min(Math.abs(t-e),Math.abs(i-n)),c=(u=d<u?d:u)/2,h=t+("left"!==r?c*a:0),f=e+("right"!==r?-c*a:0),g=i+("top"!==r?c*o:0),p=n+("bottom"!==r?-c*o:0);h!==f&&(i=g,n=p),g!==p&&(t=h,e=f)}s.beginPath(),s.fillStyle=l.backgroundColor,s.strokeStyle=l.borderColor,s.lineWidth=u;var m=[[t,n],[t,i],[e,i],[e,n]],v=["bottom","left","top","right"].indexOf(r,0);function b(t){return m[(v+t)%4]}-1===v&&(v=0);var x=b(0);s.moveTo(x[0],x[1]);for(var y=1;y<4;y++)x=b(y),s.lineTo(x[0],x[1]);s.fill(),u&&s.stroke()},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){var i=!1;if(this._view){var n=o(this);i=t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom}return i},inLabelRange:function(t,e){if(!this._view)return!1;var i=o(this);return l(this)?t>=i.left&&t<=i.right:e>=i.top&&e<=i.bottom},inXRange:function(t){var e=o(this);return t>=e.left&&t<=e.right},inYRange:function(t){var e=o(this);return t>=e.top&&t<=e.bottom},getCenterPoint:function(){var t,e,i=this._view;return e=l(this)?(t=i.x,(i.y+i.base)/2):(t=(i.x+i.base)/2,i.y),{x:t,y:e}},getArea:function(){var t=this._view;return t.width*Math.abs(t.y-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}})},{26:26,27:27}],41:[function(t,e,i){"use strict";e.exports={},e.exports.Arc=t(37),e.exports.Line=t(38),e.exports.Point=t(39),e.exports.Rectangle=t(40)},{37:37,38:38,39:39,40:40}],42:[function(t,e,i){"use strict";var n=t(43);i=e.exports={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,i,n,a,o){if(o){var r=Math.min(o,a/2-1e-7,n/2-1e-7);t.moveTo(e+r,i),t.lineTo(e+n-r,i),t.arcTo(e+n,i,e+n,i+r,r),t.lineTo(e+n,i+a-r),t.arcTo(e+n,i+a,e+n-r,i+a,r),t.lineTo(e+r,i+a),t.arcTo(e,i+a,e,i+a-r,r),t.lineTo(e,i+r),t.arcTo(e,i,e+r,i,r),t.closePath(),t.moveTo(e,i)}else t.rect(e,i,n,a)},drawPoint:function(t,e,i,n,a,o){var r,s,l,u,d,c;if(o=o||0,!e||"object"!=typeof e||"[object HTMLImageElement]"!==(r=e.toString())&&"[object HTMLCanvasElement]"!==r){if(!(isNaN(i)||i<=0)){switch(t.save(),t.translate(n,a),t.rotate(o*Math.PI/180),t.beginPath(),e){default:t.arc(0,0,i,0,2*Math.PI),t.closePath();break;case"triangle":d=(s=3*i/Math.sqrt(3))*Math.sqrt(3)/2,t.moveTo(-s/2,d/3),t.lineTo(s/2,d/3),t.lineTo(0,-2*d/3),t.closePath();break;case"rect":c=1/Math.SQRT2*i,t.rect(-c,-c,2*c,2*c);break;case"rectRounded":var h=i/Math.SQRT2,f=-h,g=-h,p=Math.SQRT2*i;this.roundedRect(t,f,g,p,p,.425*i);break;case"rectRot":c=1/Math.SQRT2*i,t.moveTo(-c,0),t.lineTo(0,c),t.lineTo(c,0),t.lineTo(0,-c),t.closePath();break;case"cross":t.moveTo(0,i),t.lineTo(0,-i),t.moveTo(-i,0),t.lineTo(i,0);break;case"crossRot":l=Math.cos(Math.PI/4)*i,u=Math.sin(Math.PI/4)*i,t.moveTo(-l,-u),t.lineTo(l,u),t.moveTo(-l,u),t.lineTo(l,-u);break;case"star":t.moveTo(0,i),t.lineTo(0,-i),t.moveTo(-i,0),t.lineTo(i,0),l=Math.cos(Math.PI/4)*i,u=Math.sin(Math.PI/4)*i,t.moveTo(-l,-u),t.lineTo(l,u),t.moveTo(-l,u),t.lineTo(l,-u);break;case"line":t.moveTo(-i,0),t.lineTo(i,0);break;case"dash":t.moveTo(0,0),t.lineTo(i,0)}t.fill(),t.stroke(),t.restore()}}else t.drawImage(e,n-e.width/2,a-e.height/2,e.width,e.height)},clipArea:function(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,i,n){if(i.steppedLine)return"after"===i.steppedLine&&!n||"after"!==i.steppedLine&&n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y),void t.lineTo(i.x,i.y);i.tension?t.bezierCurveTo(n?e.controlPointPreviousX:e.controlPointNextX,n?e.controlPointPreviousY:e.controlPointNextY,n?i.controlPointNextX:i.controlPointPreviousX,n?i.controlPointNextY:i.controlPointPreviousY,i.x,i.y):t.lineTo(i.x,i.y)}};n.clear=i.clear,n.drawRoundedRectangle=function(t){t.beginPath(),i.roundedRect.apply(i,arguments)}},{43:43}],43:[function(t,e,i){"use strict";var n,d={noop:function(){},uid:(n=0,function(){return n++}),isNullOrUndef:function(t){return null==t},isArray:Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isObject:function(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)},valueOrDefault:function(t,e){return void 0===t?e:t},valueAtIndexOrDefault:function(t,e,i){return d.valueOrDefault(d.isArray(t)?t[e]:t,i)},callback:function(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)},each:function(t,e,i,n){var a,o,r;if(d.isArray(t))if(o=t.length,n)for(a=o-1;0<=a;a--)e.call(i,t[a],a);else for(a=0;a<o;a++)e.call(i,t[a],a);else if(d.isObject(t))for(o=(r=Object.keys(t)).length,a=0;a<o;a++)e.call(i,t[r[a]],r[a])},arrayEquals:function(t,e){var i,n,a,o;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(a=t[i],o=e[i],a instanceof Array&&o instanceof Array){if(!d.arrayEquals(a,o))return!1}else if(a!==o)return!1;return!0},clone:function(t){if(d.isArray(t))return t.map(d.clone);if(d.isObject(t)){for(var e={},i=Object.keys(t),n=i.length,a=0;a<n;++a)e[i[a]]=d.clone(t[i[a]]);return e}return t},_merger:function(t,e,i,n){var a=e[t],o=i[t];d.isObject(a)&&d.isObject(o)?d.merge(a,o,n):e[t]=d.clone(o)},_mergerIf:function(t,e,i){var n=e[t],a=i[t];d.isObject(n)&&d.isObject(a)?d.mergeIf(n,a):e.hasOwnProperty(t)||(e[t]=d.clone(a))},merge:function(t,e,i){var n,a,o,r,s,l=d.isArray(e)?e:[e],u=l.length;if(!d.isObject(t))return t;for(n=(i=i||{}).merger||d._merger,a=0;a<u;++a)if(e=l[a],d.isObject(e))for(s=0,r=(o=Object.keys(e)).length;s<r;++s)n(o[s],t,e,i);return t},mergeIf:function(t,e){return d.merge(t,e,{merger:d._mergerIf})},extend:function(i){for(var t=function(t,e){i[e]=t},e=1,n=arguments.length;e<n;++e)d.each(arguments[e],t);return i},inherits:function(t){var e=this,i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},n=function(){this.constructor=i};return n.prototype=e.prototype,i.prototype=new n,i.extend=d.inherits,t&&d.extend(i.prototype,t),i.__super__=e.prototype,i}};(e.exports=d).callCallback=d.callback,d.indexOf=function(t,e,i){return Array.prototype.indexOf.call(t,e,i)},d.getValueOrDefault=d.valueOrDefault,d.getValueAtIndexOrDefault=d.valueAtIndexOrDefault},{}],44:[function(t,e,i){"use strict";var n=t(43),a={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return 1<=t?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1===t?1:(i||(i=.3),e=n<1?(n=1,i/4):i/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))},easeOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1===t?1:(i||(i=.3),e=n<1?(n=1,i/4):i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1)},easeInOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:2==(t/=.5)?1:(i||(i=.45),e=n<1?(n=1,i/4):i/(2*Math.PI)*Math.asin(1/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1)},easeInBack:function(t){return t*t*(2.70158*t-1.70158)},easeOutBack:function(t){return(t-=1)*t*(2.70158*t+1.70158)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-a.easeOutBounce(1-t)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*a.easeInBounce(2*t):.5*a.easeOutBounce(2*t-1)+.5}};e.exports={effects:a},n.easingEffects=a},{43:43}],45:[function(t,e,i){"use strict";var r=t(43);e.exports={toLineHeight:function(t,e){var i=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t},toPadding:function(t){var e,i,n,a;return r.isObject(t)?(e=+t.top||0,i=+t.right||0,n=+t.bottom||0,a=+t.left||0):e=i=n=a=+t||0,{top:e,right:i,bottom:n,left:a,height:e+n,width:a+i}},resolve:function(t,e,i){var n,a,o;for(n=0,a=t.length;n<a;++n)if(void 0!==(o=t[n])&&(void 0!==e&&"function"==typeof o&&(o=o(e)),void 0!==i&&r.isArray(o)&&(o=o[i]),void 0!==o))return o}}},{43:43}],46:[function(t,e,i){"use strict";e.exports=t(43),e.exports.easing=t(44),e.exports.canvas=t(42),e.exports.options=t(45)},{42:42,43:43,44:44,45:45}],47:[function(t,e,i){e.exports={acquireContext:function(t){return t&&t.canvas&&(t=t.canvas),t&&t.getContext("2d")||null}}},{}],48:[function(t,e,i){"use strict";var f=t(46),g="$chartjs",p="chartjs-",m=p+"render-monitor",v=p+"render-animation",b=["animationstart","webkitAnimationStart"],s={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function l(t,e){var i=f.getStyle(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):void 0}var n=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("e",null,e)}catch(t){}return t}()&&{passive:!0};function x(t,e,i){t.addEventListener(e,i,n)}function r(t,e,i){t.removeEventListener(e,i,n)}function y(t,e,i,n,a){return{type:t,chart:e,native:a||null,x:void 0!==i?i:null,y:void 0!==n?n:null}}function a(e,t,i){var n,a,o,r,s,l,u,d,c=e[g]||(e[g]={}),h=c.resizer=function(t){var e=document.createElement("div"),i=p+"size-monitor",n="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;";e.style.cssText=n,e.className=i,e.innerHTML='<div class="'+i+'-expand" style="'+n+'"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="'+i+'-shrink" style="'+n+'"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div>';var a=e.childNodes[0],o=e.childNodes[1];e._reset=function(){a.scrollLeft=1e6,a.scrollTop=1e6,o.scrollLeft=1e6,o.scrollTop=1e6};var r=function(){e._reset(),t()};return x(a,"scroll",r.bind(a,"expand")),x(o,"scroll",r.bind(o,"shrink")),e}((o=!(n=function(){if(c.resizer)return t(y("resize",i))}),r=[],function(){r=Array.prototype.slice.call(arguments),a=a||this,o||(o=!0,f.requestAnimFrame.call(window,function(){o=!1,n.apply(a,r)}))}));l=function(){if(c.resizer){var t=e.parentNode;t&&t!==h.parentNode&&t.insertBefore(h,t.firstChild),h._reset()}},u=(s=e)[g]||(s[g]={}),d=u.renderProxy=function(t){t.animationName===v&&l()},f.each(b,function(t){x(s,t,d)}),u.reflow=!!s.offsetParent,s.classList.add(m)}function o(t){var e,i,n,a=t[g]||{},o=a.resizer;delete a.resizer,i=(e=t)[g]||{},(n=i.renderProxy)&&(f.each(b,function(t){r(e,t,n)}),delete i.renderProxy),e.classList.remove(m),o&&o.parentNode&&o.parentNode.removeChild(o)}e.exports={_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,initialize:function(){var t,e,i,n="from{opacity:0.99}to{opacity:1}";e="@-webkit-keyframes "+v+"{"+n+"}@keyframes "+v+"{"+n+"}."+m+"{-webkit-animation:"+v+" 0.001s;animation:"+v+" 0.001s;}",i=(t=this)._style||document.createElement("style"),t._style||(e="/* Chart.js */\n"+e,(t._style=i).setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(i)),i.appendChild(document.createTextNode(e))},acquireContext:function(t,e){"string"==typeof t?t=document.getElementById(t):t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas);var i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function(t,e){var i=t.style,n=t.getAttribute("height"),a=t.getAttribute("width");if(t[g]={initial:{height:n,width:a,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",null===a||""===a){var o=l(t,"width");void 0!==o&&(t.width=o)}if(null===n||""===n)if(""===t.style.height)t.height=t.width/(e.options.aspectRatio||2);else{var r=l(t,"height");void 0!==o&&(t.height=r)}}(t,e),i):null},releaseContext:function(t){var i=t.canvas;if(i[g]){var n=i[g].initial;["height","width"].forEach(function(t){var e=n[t];f.isNullOrUndef(e)?i.removeAttribute(t):i.setAttribute(t,e)}),f.each(n.style||{},function(t,e){i.style[e]=t}),i.width=i.width,delete i[g]}},addEventListener:function(o,t,r){var e=o.canvas;if("resize"!==t){var i=r[g]||(r[g]={});x(e,t,(i.proxies||(i.proxies={}))[o.id+"_"+t]=function(t){var e,i,n,a;r((i=o,n=s[(e=t).type]||e.type,a=f.getRelativePosition(e,i),y(n,i,a.x,a.y,e)))})}else a(e,r,o)},removeEventListener:function(t,e,i){var n=t.canvas;if("resize"!==e){var a=((i[g]||{}).proxies||{})[t.id+"_"+e];a&&r(n,e,a)}else o(n)}},f.addEvent=x,f.removeEvent=r},{46:46}],49:[function(t,e,i){"use strict";var n=t(46),a=t(47),o=t(48),r=o._enabled?o:a;e.exports=n.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},r)},{46:46,47:47,48:48}],50:[function(t,e,i){"use strict";e.exports={},e.exports.filler=t(51),e.exports.legend=t(52),e.exports.title=t(53)},{51:51,52:52,53:53}],51:[function(t,e,i){"use strict";var u=t(26),h=t(41),d=t(46);u._set("global",{plugins:{filler:{propagate:!0}}});var f={dataset:function(t){var e=t.fill,i=t.chart,n=i.getDatasetMeta(e),a=n&&i.isDatasetVisible(e)&&n.dataset._children||[],o=a.length||0;return o?function(t,e){return e<o&&a[e]._view||null}:null},boundary:function(t){var e=t.boundary,i=e?e.x:null,n=e?e.y:null;return function(t){return{x:null===i?t.x:i,y:null===n?t.y:n}}}};function g(t,e,i){var n,a=t._model||{},o=a.fill;if(void 0===o&&(o=!!a.backgroundColor),!1===o||null===o)return!1;if(!0===o)return"origin";if(n=parseFloat(o,10),isFinite(n)&&Math.floor(n)===n)return"-"!==o[0]&&"+"!==o[0]||(n=e+n),!(n===e||n<0||i<=n)&&n;switch(o){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return o;default:return!1}}function p(t){var e,i=t.el._model||{},n=t.el._scale||{},a=t.fill,o=null;if(isFinite(a))return null;if("start"===a?o=void 0===i.scaleBottom?n.bottom:i.scaleBottom:"end"===a?o=void 0===i.scaleTop?n.top:i.scaleTop:void 0!==i.scaleZero?o=i.scaleZero:n.getBasePosition?o=n.getBasePosition():n.getBasePixel&&(o=n.getBasePixel()),null!=o){if(void 0!==o.x&&void 0!==o.y)return o;if("number"==typeof o&&isFinite(o))return{x:(e=n.isHorizontal())?o:null,y:e?null:o}}return null}function m(t,e,i){var n,a=t[e].fill,o=[e];if(!i)return a;for(;!1!==a&&-1===o.indexOf(a);){if(!isFinite(a))return a;if(!(n=t[a]))return!1;if(n.visible)return a;o.push(a),a=n.fill}return!1}function x(t){return t&&!t.skip}function y(t,e,i,n,a){var o;if(n&&a){for(t.moveTo(e[0].x,e[0].y),o=1;o<n;++o)d.canvas.lineTo(t,e[o-1],e[o]);for(t.lineTo(i[a-1].x,i[a-1].y),o=a-1;0<o;--o)d.canvas.lineTo(t,i[o],i[o-1],!0)}}e.exports={id:"filler",afterDatasetsUpdate:function(t,e){var i,n,a,o,r,s,l,u=(t.data.datasets||[]).length,d=e.propagate,c=[];for(n=0;n<u;++n)o=null,(a=(i=t.getDatasetMeta(n)).dataset)&&a._model&&a instanceof h.Line&&(o={visible:t.isDatasetVisible(n),fill:g(a,n,u),chart:t,el:a}),i.$filler=o,c.push(o);for(n=0;n<u;++n)(o=c[n])&&(o.fill=m(c,n,d),o.boundary=p(o),o.mapper=(l=void 0,s=(r=o).fill,!(l="dataset")===s?null:(isFinite(s)||(l="boundary"),f[l](r))))},beforeDatasetDraw:function(t,e){var i=e.meta.$filler;if(i){var n=t.ctx,a=i.el,o=a._view,r=a._children||[],s=i.mapper,l=o.backgroundColor||u.global.defaultColor;s&&l&&r.length&&(d.canvas.clipArea(n,t.chartArea),function(t,e,i,n,a,o){var r,s,l,u,d,c,h,f=e.length,g=n.spanGaps,p=[],m=[],v=0,b=0;for(t.beginPath(),r=0,s=f+!!o;r<s;++r)d=i(u=e[l=r%f]._view,l,n),c=x(u),h=x(d),c&&h?(v=p.push(u),b=m.push(d)):v&&b&&(g?(c&&p.push(u),h&&m.push(d)):(y(t,p,m,v,b),v=b=0,p=[],m=[]));y(t,p,m,v,b),t.closePath(),t.fillStyle=a,t.fill()}(n,r,s,o,l,a._loop),d.canvas.unclipArea(n))}}}},{26:26,41:41,46:46}],52:[function(t,e,i){"use strict";var _=t(26),n=t(27),D=t(46),a=t(31),o=D.noop;function P(t,e){return t.usePointStyle?e*Math.SQRT2:t.boxWidth}_._set("global",{legend:{display:!0,position:"top",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(t,e){var i=e.datasetIndex,n=this.chart,a=n.getDatasetMeta(i);a.hidden=null===a.hidden?!n.data.datasets[i].hidden:null,n.update()},onHover:null,labels:{boxWidth:40,padding:10,generateLabels:function(i){var t=i.data;return D.isArray(t.datasets)?t.datasets.map(function(t,e){return{text:t.label,fillStyle:D.isArray(t.backgroundColor)?t.backgroundColor[0]:t.backgroundColor,hidden:!i.isDatasetVisible(e),lineCap:t.borderCapStyle,lineDash:t.borderDash,lineDashOffset:t.borderDashOffset,lineJoin:t.borderJoinStyle,lineWidth:t.borderWidth,strokeStyle:t.borderColor,pointStyle:t.pointStyle,datasetIndex:e}},this):[]}}},legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');for(var i=0;i<t.data.datasets.length;i++)e.push('<li><span style="background-color:'+t.data.datasets[i].backgroundColor+'"></span>'),t.data.datasets[i].label&&e.push(t.data.datasets[i].label),e.push("</li>");return e.push("</ul>"),e.join("")}});var r=n.extend({initialize:function(t){D.extend(this,t),this.legendHitBoxes=[],this.doughnutMode=!1},beforeUpdate:o,update:function(t,e,i){var n=this;return n.beforeUpdate(),n.maxWidth=t,n.maxHeight=e,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:o,beforeSetDimensions:o,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:o,beforeBuildLabels:o,buildLabels:function(){var e=this,i=e.options.labels||{},t=D.callback(i.generateLabels,[e.chart],e)||[];i.filter&&(t=t.filter(function(t){return i.filter(t,e.chart.data)})),e.options.reverse&&t.reverse(),e.legendItems=t},afterBuildLabels:o,beforeFit:o,fit:function(){var n=this,t=n.options,a=t.labels,e=t.display,o=n.ctx,i=_.global,r=D.valueOrDefault,s=r(a.fontSize,i.defaultFontSize),l=r(a.fontStyle,i.defaultFontStyle),u=r(a.fontFamily,i.defaultFontFamily),d=D.fontString(s,l,u),c=n.legendHitBoxes=[],h=n.minSize,f=n.isHorizontal();if(h.height=f?(h.width=n.maxWidth,e?10:0):(h.width=e?10:0,n.maxHeight),e)if(o.font=d,f){var g=n.lineWidths=[0],p=n.legendItems.length?s+a.padding:0;o.textAlign="left",o.textBaseline="top",D.each(n.legendItems,function(t,e){var i=P(a,s)+s/2+o.measureText(t.text).width;g[g.length-1]+i+a.padding>=n.width&&(p+=s+a.padding,g[g.length]=n.left),c[e]={left:0,top:0,width:i,height:s},g[g.length-1]+=i+a.padding}),h.height+=p}else{var m=a.padding,v=n.columnWidths=[],b=a.padding,x=0,y=0,k=s+m;D.each(n.legendItems,function(t,e){var i=P(a,s)+s/2+o.measureText(t.text).width;y+k>h.height&&(b+=x+a.padding,v.push(x),y=x=0),x=Math.max(x,i),y+=k,c[e]={left:0,top:0,width:i,height:s}}),b+=x,v.push(x),h.width+=b}n.width=h.width,n.height=h.height},afterFit:o,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var c=this,h=c.options,f=h.labels,g=_.global,p=g.elements.line,m=c.width,v=c.lineWidths;if(h.display){var b,x=c.ctx,y=D.valueOrDefault,t=y(f.fontColor,g.defaultFontColor),k=y(f.fontSize,g.defaultFontSize),e=y(f.fontStyle,g.defaultFontStyle),i=y(f.fontFamily,g.defaultFontFamily),n=D.fontString(k,e,i);x.textAlign="left",x.textBaseline="middle",x.lineWidth=.5,x.strokeStyle=t,x.fillStyle=t,x.font=n;var M=P(f,k),w=c.legendHitBoxes,C=c.isHorizontal();b=C?{x:c.left+(m-v[0])/2,y:c.top+f.padding,line:0}:{x:c.left+f.padding,y:c.top+f.padding,line:0};var S=k+f.padding;D.each(c.legendItems,function(t,e){var i,n,a,o,r,s=x.measureText(t.text).width,l=M+k/2+s,u=b.x,d=b.y;C?m<=u+l&&(d=b.y+=S,b.line++,u=b.x=c.left+(m-v[b.line])/2):d+S>c.bottom&&(u=b.x=u+c.columnWidths[b.line]+f.padding,d=b.y=c.top+f.padding,b.line++),function(t,e,i){if(!(isNaN(M)||M<=0)){x.save(),x.fillStyle=y(i.fillStyle,g.defaultColor),x.lineCap=y(i.lineCap,p.borderCapStyle),x.lineDashOffset=y(i.lineDashOffset,p.borderDashOffset),x.lineJoin=y(i.lineJoin,p.borderJoinStyle),x.lineWidth=y(i.lineWidth,p.borderWidth),x.strokeStyle=y(i.strokeStyle,g.defaultColor);var n=0===y(i.lineWidth,p.borderWidth);if(x.setLineDash&&x.setLineDash(y(i.lineDash,p.borderDash)),h.labels&&h.labels.usePointStyle){var a=k*Math.SQRT2/2,o=a/Math.SQRT2,r=t+o,s=e+o;D.canvas.drawPoint(x,i.pointStyle,a,r,s)}else n||x.strokeRect(t,e,M,k),x.fillRect(t,e,M,k);x.restore()}}(u,d,t),w[e].left=u,w[e].top=d,i=t,n=s,o=M+(a=k/2)+u,r=d+a,x.fillText(i.text,o,r),i.hidden&&(x.beginPath(),x.lineWidth=2,x.moveTo(o,r),x.lineTo(o+n,r),x.stroke()),C?b.x+=l+f.padding:b.y+=S})}},handleEvent:function(t){var e=this,i=e.options,n="mouseup"===t.type?"click":t.type,a=!1;if("mousemove"===n){if(!i.onHover)return}else{if("click"!==n)return;if(!i.onClick)return}var o=t.x,r=t.y;if(o>=e.left&&o<=e.right&&r>=e.top&&r<=e.bottom)for(var s=e.legendHitBoxes,l=0;l<s.length;++l){var u=s[l];if(o>=u.left&&o<=u.left+u.width&&r>=u.top&&r<=u.top+u.height){if("click"===n){i.onClick.call(e,t.native,e.legendItems[l]),a=!0;break}if("mousemove"===n){i.onHover.call(e,t.native,e.legendItems[l]),a=!0;break}}}return a}});function s(t,e){var i=new r({ctx:t.ctx,options:e,chart:t});a.configure(t,i,e),a.addBox(t,i),t.legend=i}e.exports={id:"legend",_element:r,beforeInit:function(t){var e=t.options.legend;e&&s(t,e)},beforeUpdate:function(t){var e=t.options.legend,i=t.legend;e?(D.mergeIf(e,_.global.legend),i?(a.configure(t,i,e),i.options=e):s(t,e)):i&&(a.removeBox(t,i),delete t.legend)},afterEvent:function(t,e){var i=t.legend;i&&i.handleEvent(e)}}},{26:26,27:27,31:31,46:46}],53:[function(t,e,i){"use strict";var M=t(26),n=t(27),w=t(46),a=t(31),o=w.noop;M._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,lineHeight:1.2,padding:10,position:"top",text:"",weight:2e3}});var r=n.extend({initialize:function(t){w.extend(this,t),this.legendHitBoxes=[]},beforeUpdate:o,update:function(t,e,i){var n=this;return n.beforeUpdate(),n.maxWidth=t,n.maxHeight=e,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:o,beforeSetDimensions:o,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:o,beforeBuildLabels:o,buildLabels:o,afterBuildLabels:o,beforeFit:o,fit:function(){var t=this,e=w.valueOrDefault,i=t.options,n=i.display,a=e(i.fontSize,M.global.defaultFontSize),o=t.minSize,r=w.isArray(i.text)?i.text.length:1,s=w.options.toLineHeight(i.lineHeight,a),l=n?r*s+2*i.padding:0;t.isHorizontal()?(o.width=t.maxWidth,o.height=l):(o.width=l,o.height=t.maxHeight),t.width=o.width,t.height=o.height},afterFit:o,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var t=this,e=t.ctx,i=w.valueOrDefault,n=t.options,a=M.global;if(n.display){var o,r,s,l=i(n.fontSize,a.defaultFontSize),u=i(n.fontStyle,a.defaultFontStyle),d=i(n.fontFamily,a.defaultFontFamily),c=w.fontString(l,u,d),h=w.options.toLineHeight(n.lineHeight,l),f=h/2+n.padding,g=0,p=t.top,m=t.left,v=t.bottom,b=t.right;e.fillStyle=i(n.fontColor,a.defaultFontColor),e.font=c,t.isHorizontal()?(r=m+(b-m)/2,s=p+f,o=b-m):(r="left"===n.position?m+f:b-f,s=p+(v-p)/2,o=v-p,g=Math.PI*("left"===n.position?-.5:.5)),e.save(),e.translate(r,s),e.rotate(g),e.textAlign="center",e.textBaseline="middle";var x=n.text;if(w.isArray(x))for(var y=0,k=0;k<x.length;++k)e.fillText(x[k],0,y,o),y+=h;else e.fillText(x,0,0,o);e.restore()}}});function s(t,e){var i=new r({ctx:t.ctx,options:e,chart:t});a.configure(t,i,e),a.addBox(t,i),t.titleBlock=i}e.exports={id:"title",_element:r,beforeInit:function(t){var e=t.options.title;e&&s(t,e)},beforeUpdate:function(t){var e=t.options.title,i=t.titleBlock;e?(w.mergeIf(e,M.global.title),i?(a.configure(t,i,e),i.options=e):s(t,e)):i&&(a.removeBox(t,i),delete t.titleBlock)}}},{26:26,27:27,31:31,46:46}],54:[function(t,e,i){"use strict";var n=t(33),a=t(34);e.exports=function(){var t=n.extend({getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels},determineDataLimits:function(){var t,e=this,i=e.getLabels();e.minIndex=0,e.maxIndex=i.length-1,void 0!==e.options.ticks.min&&(t=i.indexOf(e.options.ticks.min),e.minIndex=-1!==t?t:e.minIndex),void 0!==e.options.ticks.max&&(t=i.indexOf(e.options.ticks.max),e.maxIndex=-1!==t?t:e.maxIndex),e.min=i[e.minIndex],e.max=i[e.maxIndex]},buildTicks:function(){var t=this,e=t.getLabels();t.ticks=0===t.minIndex&&t.maxIndex===e.length-1?e:e.slice(t.minIndex,t.maxIndex+1)},getLabelForIndex:function(t,e){var i=this,n=i.chart.data,a=i.isHorizontal();return n.yLabels&&!a?i.getRightValue(n.datasets[e].data[t]):i.ticks[t-i.minIndex]},getPixelForValue:function(t,e){var i,n=this,a=n.options.offset,o=Math.max(n.maxIndex+1-n.minIndex-(a?0:1),1);if(null!=t&&(i=n.isHorizontal()?t.x:t.y),void 0!==i||void 0!==t&&isNaN(e)){t=i||t;var r=n.getLabels().indexOf(t);e=-1!==r?r:e}if(n.isHorizontal()){var s=n.width/o,l=s*(e-n.minIndex);return a&&(l+=s/2),n.left+Math.round(l)}var u=n.height/o,d=u*(e-n.minIndex);return a&&(d+=u/2),n.top+Math.round(d)},getPixelForTick:function(t){return this.getPixelForValue(this.ticks[t],t+this.minIndex,null)},getValueForPixel:function(t){var e=this,i=e.options.offset,n=Math.max(e._ticks.length-(i?0:1),1),a=e.isHorizontal(),o=(a?e.width:e.height)/n;return t-=a?e.left:e.top,i&&(t-=o/2),(t<=0?0:Math.round(t/o))+e.minIndex},getBasePixel:function(){return this.bottom}});a.registerScaleType("category",t,{position:"bottom"})}},{33:33,34:34}],55:[function(t,e,i){"use strict";var n=t(26),c=t(46),a=t(34),o=t(35);e.exports=function(t){var e={position:"left",ticks:{callback:o.formatters.linear}},i=t.LinearScaleBase.extend({determineDataLimits:function(){var r=this,s=r.options,l=r.chart,t=l.data.datasets,e=r.isHorizontal();function u(t){return e?t.xAxisID===r.id:t.yAxisID===r.id}r.min=null,r.max=null;var n=s.stacked;if(void 0===n&&c.each(t,function(t,e){if(!n){var i=l.getDatasetMeta(e);l.isDatasetVisible(e)&&u(i)&&void 0!==i.stack&&(n=!0)}}),s.stacked||n){var d={};c.each(t,function(t,e){var n=l.getDatasetMeta(e),i=[n.type,void 0===s.stacked&&void 0===n.stack?e:"",n.stack].join(".");void 0===d[i]&&(d[i]={positiveValues:[],negativeValues:[]});var a=d[i].positiveValues,o=d[i].negativeValues;l.isDatasetVisible(e)&&u(n)&&c.each(t.data,function(t,e){var i=+r.getRightValue(t);isNaN(i)||n.data[e].hidden||(a[e]=a[e]||0,o[e]=o[e]||0,s.relativePoints?a[e]=100:i<0?o[e]+=i:a[e]+=i)})}),c.each(d,function(t){var e=t.positiveValues.concat(t.negativeValues),i=c.min(e),n=c.max(e);r.min=null===r.min?i:Math.min(r.min,i),r.max=null===r.max?n:Math.max(r.max,n)})}else c.each(t,function(t,e){var n=l.getDatasetMeta(e);l.isDatasetVisible(e)&&u(n)&&c.each(t.data,function(t,e){var i=+r.getRightValue(t);isNaN(i)||n.data[e].hidden||(null===r.min?r.min=i:i<r.min&&(r.min=i),null===r.max?r.max=i:i>r.max&&(r.max=i))})});r.min=isFinite(r.min)&&!isNaN(r.min)?r.min:0,r.max=isFinite(r.max)&&!isNaN(r.max)?r.max:1,this.handleTickRangeOptions()},getTickLimit:function(){var t,e=this.options.ticks;if(this.isHorizontal())t=Math.min(e.maxTicksLimit?e.maxTicksLimit:11,Math.ceil(this.width/50));else{var i=c.valueOrDefault(e.fontSize,n.global.defaultFontSize);t=Math.min(e.maxTicksLimit?e.maxTicksLimit:11,Math.ceil(this.height/(2*i)))}return t},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){var e=this,i=e.start,n=+e.getRightValue(t),a=e.end-i;return e.isHorizontal()?e.left+e.width/a*(n-i):e.bottom-e.height/a*(n-i)},getValueForPixel:function(t){var e=this,i=e.isHorizontal(),n=i?e.width:e.height,a=(i?t-e.left:e.bottom-t)/n;return e.start+(e.end-e.start)*a},getPixelForTick:function(t){return this.getPixelForValue(this.ticksAsNumbers[t])}});a.registerScaleType("linear",i,e)}},{26:26,34:34,35:35,46:46}],56:[function(t,e,i){"use strict";var c=t(46),n=t(33);e.exports=function(t){var e=c.noop;t.LinearScaleBase=n.extend({getRightValue:function(t){return"string"==typeof t?+t:n.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;if(e.beginAtZero){var i=c.sign(t.min),n=c.sign(t.max);i<0&&n<0?t.max=0:0<i&&0<n&&(t.min=0)}var a=void 0!==e.min||void 0!==e.suggestedMin,o=void 0!==e.max||void 0!==e.suggestedMax;void 0!==e.min?t.min=e.min:void 0!==e.suggestedMin&&(null===t.min?t.min=e.suggestedMin:t.min=Math.min(t.min,e.suggestedMin)),void 0!==e.max?t.max=e.max:void 0!==e.suggestedMax&&(null===t.max?t.max=e.suggestedMax:t.max=Math.max(t.max,e.suggestedMax)),a!==o&&t.min>=t.max&&(a?t.max=t.min+1:t.min=t.max-1),t.min===t.max&&(t.max++,e.beginAtZero||t.min--)},getTickLimit:e,handleDirectionalChanges:e,buildTicks:function(){var t=this,e=t.options.ticks,i=t.getTickLimit(),n={maxTicks:i=Math.max(2,i),min:e.min,max:e.max,precision:e.precision,stepSize:c.valueOrDefault(e.fixedStepSize,e.stepSize)},a=t.ticks=function(t,e){var i,n,a,o=[];if(t.stepSize&&0<t.stepSize)a=t.stepSize;else{var r=c.niceNum(e.max-e.min,!1);a=c.niceNum(r/(t.maxTicks-1),!0),void 0!==(n=t.precision)&&(i=Math.pow(10,n),a=Math.ceil(a*i)/i)}var s=Math.floor(e.min/a)*a,l=Math.ceil(e.max/a)*a;c.isNullOrUndef(t.min)||c.isNullOrUndef(t.max)||!t.stepSize||c.almostWhole((t.max-t.min)/t.stepSize,a/1e3)&&(s=t.min,l=t.max);var u=(l-s)/a;u=c.almostEquals(u,Math.round(u),a/1e3)?Math.round(u):Math.ceil(u),a<(n=1)&&(n=Math.pow(10,1-Math.floor(c.log10(a))),s=Math.round(s*n)/n,l=Math.round(l*n)/n),o.push(void 0!==t.min?t.min:s);for(var d=1;d<u;++d)o.push(Math.round((s+d*a)*n)/n);return o.push(void 0!==t.max?t.max:l),o}(n,t);t.handleDirectionalChanges(),t.max=c.max(a),t.min=c.min(a),e.reverse?(a.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),n.prototype.convertTicksToLabels.call(t)}})}},{33:33,46:46}],57:[function(t,e,i){"use strict";var h=t(46),n=t(33),a=t(34),o=t(35);e.exports=function(c){var t={position:"left",ticks:{callback:o.formatters.logarithmic}},e=n.extend({determineDataLimits:function(){var r=this,i=r.options,s=r.chart,t=s.data.datasets,e=r.isHorizontal();function l(t){return e?t.xAxisID===r.id:t.yAxisID===r.id}r.min=null,r.max=null,r.minNotZero=null;var n=i.stacked;if(void 0===n&&h.each(t,function(t,e){if(!n){var i=s.getDatasetMeta(e);s.isDatasetVisible(e)&&l(i)&&void 0!==i.stack&&(n=!0)}}),i.stacked||n){var u={};h.each(t,function(t,e){var a=s.getDatasetMeta(e),o=[a.type,void 0===i.stacked&&void 0===a.stack?e:"",a.stack].join(".");s.isDatasetVisible(e)&&l(a)&&(void 0===u[o]&&(u[o]=[]),h.each(t.data,function(t,e){var i=u[o],n=+r.getRightValue(t);isNaN(n)||a.data[e].hidden||n<0||(i[e]=i[e]||0,i[e]+=n)}))}),h.each(u,function(t){if(0<t.length){var e=h.min(t),i=h.max(t);r.min=null===r.min?e:Math.min(r.min,e),r.max=null===r.max?i:Math.max(r.max,i)}})}else h.each(t,function(t,e){var n=s.getDatasetMeta(e);s.isDatasetVisible(e)&&l(n)&&h.each(t.data,function(t,e){var i=+r.getRightValue(t);isNaN(i)||n.data[e].hidden||i<0||(null===r.min?r.min=i:i<r.min&&(r.min=i),null===r.max?r.max=i:i>r.max&&(r.max=i),0!==i&&(null===r.minNotZero||i<r.minNotZero)&&(r.minNotZero=i))})});this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this,e=t.options.ticks,i=h.valueOrDefault;t.min=i(e.min,t.min),t.max=i(e.max,t.max),t.min===t.max&&(0!==t.min&&null!==t.min?(t.min=Math.pow(10,Math.floor(h.log10(t.min))-1),t.max=Math.pow(10,Math.floor(h.log10(t.max))+1)):(t.min=1,t.max=10)),null===t.min&&(t.min=Math.pow(10,Math.floor(h.log10(t.max))-1)),null===t.max&&(t.max=0!==t.min?Math.pow(10,Math.floor(h.log10(t.min))+1):10),null===t.minNotZero&&(0<t.min?t.minNotZero=t.min:t.max<1?t.minNotZero=Math.pow(10,Math.floor(h.log10(t.max))):t.minNotZero=1)},buildTicks:function(){var t=this,e=t.options.ticks,i=!t.isHorizontal(),n={min:e.min,max:e.max},a=t.ticks=function(t,e){var i,n,a=[],o=h.valueOrDefault,r=o(t.min,Math.pow(10,Math.floor(h.log10(e.min)))),s=Math.floor(h.log10(e.max)),l=Math.ceil(e.max/Math.pow(10,s));0===r?(i=Math.floor(h.log10(e.minNotZero)),n=Math.floor(e.minNotZero/Math.pow(10,i)),a.push(r),r=n*Math.pow(10,i)):(i=Math.floor(h.log10(r)),n=Math.floor(r/Math.pow(10,i)));for(var u=i<0?Math.pow(10,Math.abs(i)):1;a.push(r),10==++n&&(n=1,u=0<=++i?1:u),r=Math.round(n*Math.pow(10,i)*u)/u,i<s||i===s&&n<l;);var d=o(t.max,r);return a.push(d),a}(n,t);t.max=h.max(a),t.min=h.min(a),e.reverse?(i=!i,t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),i&&a.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),n.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){return this.getPixelForValue(this.tickValues[t])},_getFirstTickValue:function(t){var e=Math.floor(h.log10(t));return Math.floor(t/Math.pow(10,e))*Math.pow(10,e)},getPixelForValue:function(t){var e,i,n,a,o,r=this,s=r.options.ticks.reverse,l=h.log10,u=r._getFirstTickValue(r.minNotZero),d=0;return t=+r.getRightValue(t),o=s?(n=r.end,a=r.start,-1):(n=r.start,a=r.end,1),i=r.isHorizontal()?(e=r.width,s?r.right:r.left):(e=r.height,o*=-1,s?r.top:r.bottom),t!==n&&(0===n&&(e-=d=h.getValueOrDefault(r.options.ticks.fontSize,c.defaults.global.defaultFontSize),n=u),0!==t&&(d+=e/(l(a)-l(n))*(l(t)-l(n))),i+=o*d),i},getValueForPixel:function(t){var e,i,n,a,o=this,r=o.options.ticks.reverse,s=h.log10,l=o._getFirstTickValue(o.minNotZero);if(n=r?(i=o.end,o.start):(i=o.start,o.end),(a=o.isHorizontal()?(e=o.width,r?o.right-t:t-o.left):(e=o.height,r?t-o.top:o.bottom-t))!==i){if(0===i){var u=h.getValueOrDefault(o.options.ticks.fontSize,c.defaults.global.defaultFontSize);a-=u,e-=u,i=l}a*=s(n)-s(i),a/=e,a=Math.pow(10,s(i)+a)}return a}});a.registerScaleType("logarithmic",e,t)}},{33:33,34:34,35:35,46:46}],58:[function(t,e,i){"use strict";var n=t(26),k=t(46),a=t(34),o=t(35);e.exports=function(e){var v=n.global,t={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:o.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(t){return t}}};function b(t){var e=t.options;return e.angleLines.display||e.pointLabels.display?t.chart.data.labels.length:0}function x(t){var e=t.options.pointLabels,i=k.valueOrDefault(e.fontSize,v.defaultFontSize),n=k.valueOrDefault(e.fontStyle,v.defaultFontStyle),a=k.valueOrDefault(e.fontFamily,v.defaultFontFamily);return{size:i,style:n,family:a,font:k.fontString(i,n,a)}}function m(t,e,i,n,a){return t===n||t===a?{start:e-i/2,end:e+i/2}:t<n||a<t?{start:e-i-5,end:e}:{start:e,end:e+i+5}}function y(t,e,i,n){if(k.isArray(e))for(var a=i.y,o=1.5*n,r=0;r<e.length;++r)t.fillText(e[r],i.x,a),a+=o;else t.fillText(e,i.x,i.y)}function s(t){return k.isNumber(t)?t:0}var i=e.LinearScaleBase.extend({setDimensions:function(){var t=this,e=t.options,i=e.ticks;t.width=t.maxWidth,t.height=t.maxHeight,t.xCenter=Math.round(t.width/2),t.yCenter=Math.round(t.height/2);var n=k.min([t.height,t.width]),a=k.valueOrDefault(i.fontSize,v.defaultFontSize);t.drawingArea=e.display?n/2-(a/2+i.backdropPaddingY):n/2},determineDataLimits:function(){var a=this,i=a.chart,o=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;k.each(i.data.datasets,function(t,e){if(i.isDatasetVisible(e)){var n=i.getDatasetMeta(e);k.each(t.data,function(t,e){var i=+a.getRightValue(t);isNaN(i)||n.data[e].hidden||(o=Math.min(i,o),r=Math.max(i,r))})}}),a.min=o===Number.POSITIVE_INFINITY?0:o,a.max=r===Number.NEGATIVE_INFINITY?0:r,a.handleTickRangeOptions()},getTickLimit:function(){var t=this.options.ticks,e=k.valueOrDefault(t.fontSize,v.defaultFontSize);return Math.min(t.maxTicksLimit?t.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*e)))},convertTicksToLabels:function(){var t=this;e.LinearScaleBase.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map(t.options.pointLabels.callback,t)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t,e;this.options.pointLabels.display?function(t){var e,i,n,a=x(t),o=Math.min(t.height/2,t.width/2),r={r:t.width,l:0,t:t.height,b:0},s={};t.ctx.font=a.font,t._pointLabelSizes=[];var l,u,d,c=b(t);for(e=0;e<c;e++){n=t.getPointPosition(e,o),l=t.ctx,u=a.size,d=t.pointLabels[e]||"",i=k.isArray(d)?{w:k.longestText(l,l.font,d),h:d.length*u+1.5*(d.length-1)*u}:{w:l.measureText(d).width,h:u},t._pointLabelSizes[e]=i;var h=t.getIndexAngle(e),f=k.toDegrees(h)%360,g=m(f,n.x,i.w,0,180),p=m(f,n.y,i.h,90,270);g.start<r.l&&(r.l=g.start,s.l=h),g.end>r.r&&(r.r=g.end,s.r=h),p.start<r.t&&(r.t=p.start,s.t=h),p.end>r.b&&(r.b=p.end,s.b=h)}t.setReductions(o,r,s)}(this):(t=this,e=Math.min(t.height/2,t.width/2),t.drawingArea=Math.round(e),t.setCenterPoint(0,0,0,0))},setReductions:function(t,e,i){var n=e.l/Math.sin(i.l),a=Math.max(e.r-this.width,0)/Math.sin(i.r),o=-e.t/Math.cos(i.t),r=-Math.max(e.b-this.height,0)/Math.cos(i.b);n=s(n),a=s(a),o=s(o),r=s(r),this.drawingArea=Math.min(Math.round(t-(n+a)/2),Math.round(t-(o+r)/2)),this.setCenterPoint(n,a,o,r)},setCenterPoint:function(t,e,i,n){var a=this,o=a.width-e-a.drawingArea,r=t+a.drawingArea,s=i+a.drawingArea,l=a.height-n-a.drawingArea;a.xCenter=Math.round((r+o)/2+a.left),a.yCenter=Math.round((s+l)/2+a.top)},getIndexAngle:function(t){return t*(2*Math.PI/b(this))+(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(null===t)return 0;var i=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-t)*i:(t-e.min)*i},getPointPosition:function(t,e){var i=this.getIndexAngle(t)-Math.PI/2;return{x:Math.round(Math.cos(i)*e)+this.xCenter,y:Math.round(Math.sin(i)*e)+this.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(){var t=this.min,e=this.max;return this.getPointPositionForValue(0,this.beginAtZero?0:t<0&&e<0?e:0<t&&0<e?t:0)},draw:function(){var o=this,t=o.options,r=t.gridLines,s=t.ticks,l=k.valueOrDefault;if(t.display){var u=o.ctx,d=this.getIndexAngle(0),c=l(s.fontSize,v.defaultFontSize),e=l(s.fontStyle,v.defaultFontStyle),i=l(s.fontFamily,v.defaultFontFamily),h=k.fontString(c,e,i);k.each(o.ticks,function(t,e){if(0<e||s.reverse){var i=o.getDistanceFromCenterForValue(o.ticksAsNumbers[e]);if(r.display&&0!==e&&function(t,e,i,n){var a=t.ctx;if(a.strokeStyle=k.valueAtIndexOrDefault(e.color,n-1),a.lineWidth=k.valueAtIndexOrDefault(e.lineWidth,n-1),t.options.gridLines.circular)a.beginPath(),a.arc(t.xCenter,t.yCenter,i,0,2*Math.PI),a.closePath(),a.stroke();else{var o=b(t);if(0===o)return;a.beginPath();var r=t.getPointPosition(0,i);a.moveTo(r.x,r.y);for(var s=1;s<o;s++)r=t.getPointPosition(s,i),a.lineTo(r.x,r.y);a.closePath(),a.stroke()}}(o,r,i,e),s.display){var n=l(s.fontColor,v.defaultFontColor);if(u.font=h,u.save(),u.translate(o.xCenter,o.yCenter),u.rotate(d),s.showLabelBackdrop){var a=u.measureText(t).width;u.fillStyle=s.backdropColor,u.fillRect(-a/2-s.backdropPaddingX,-i-c/2-s.backdropPaddingY,a+2*s.backdropPaddingX,c+2*s.backdropPaddingY)}u.textAlign="center",u.textBaseline="middle",u.fillStyle=n,u.fillText(t,0,-i),u.restore()}}}),(t.angleLines.display||t.pointLabels.display)&&function(t){var e=t.ctx,i=t.options,n=i.angleLines,a=i.pointLabels;e.lineWidth=n.lineWidth,e.strokeStyle=n.color;var o,r,s,l,u=t.getDistanceFromCenterForValue(i.ticks.reverse?t.min:t.max),d=x(t);e.textBaseline="top";for(var c=b(t)-1;0<=c;c--){if(n.display){var h=t.getPointPosition(c,u);e.beginPath(),e.moveTo(t.xCenter,t.yCenter),e.lineTo(h.x,h.y),e.stroke(),e.closePath()}if(a.display){var f=t.getPointPosition(c,u+5),g=k.valueAtIndexOrDefault(a.fontColor,c,v.defaultFontColor);e.font=d.font,e.fillStyle=g;var p=t.getIndexAngle(c),m=k.toDegrees(p);e.textAlign=0===(l=m)||180===l?"center":l<180?"left":"right",o=m,r=t._pointLabelSizes[c],s=f,90===o||270===o?s.y-=r.h/2:(270<o||o<90)&&(s.y-=r.h),y(e,t.pointLabels[c]||"",f,d.size)}}}(o)}}});a.registerScaleType("radialLinear",i,t)}},{26:26,34:34,35:35,46:46}],59:[function(t,e,i){"use strict";var x=t(1);x="function"==typeof x?x:window.moment;var r=t(26),m=t(46),n=t(33),a=t(34),p=Number.MIN_SAFE_INTEGER||-9007199254740991,v=Number.MAX_SAFE_INTEGER||9007199254740991,y={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,15,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,15,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},k=Object.keys(y);function b(t,e){return t-e}function M(t){var e,i,n,a={},o=[];for(e=0,i=t.length;e<i;++e)a[n=t[e]]||(a[n]=!0,o.push(n));return o}function w(t,e,i,n){var a=function(t,e,i){for(var n,a,o,r=0,s=t.length-1;0<=r&&r<=s;){if(a=t[(n=r+s>>1)-1]||null,o=t[n],!a)return{lo:null,hi:o};if(o[e]<i)r=n+1;else{if(!(a[e]>i))return{lo:a,hi:o};s=n-1}}return{lo:o,hi:null}}(t,e,i),o=a.lo?a.hi?a.lo:t[t.length-2]:t[0],r=a.lo?a.hi?a.hi:t[t.length-1]:t[1],s=r[e]-o[e],l=s?(i-o[e])/s:0,u=(r[n]-o[n])*l;return o[n]+u}function C(t,e){var i=e.parser,n=e.parser||e.format;return"function"==typeof i?i(t):"string"==typeof t&&"string"==typeof n?x(t,n):(t instanceof x||(t=x(t)),t.isValid()?t:"function"==typeof n?n(t):t)}function S(t,e){if(m.isNullOrUndef(t))return null;var i=e.options.time,n=C(e.getRightValue(t),i);return n.isValid()?(i.round&&n.startOf(i.round),n.valueOf()):null}function _(t){for(var e=k.indexOf(t)+1,i=k.length;e<i;++e)if(y[k[e]].common)return k[e]}function D(t,e,i,n){var a,o=n.time,r=o.unit||function(t,e,i,n){var a,o,r,s=k.length;for(a=k.indexOf(t);a<s-1;++a)if(r=(o=y[k[a]]).steps?o.steps[o.steps.length-1]:v,o.common&&Math.ceil((i-e)/(r*o.size))<=n)return k[a];return k[s-1]}(o.minUnit,t,e,i),s=_(r),l=m.valueOrDefault(o.stepSize,o.unitStepSize),u="week"===r&&o.isoWeekday,d=n.ticks.major.enabled,c=y[r],h=x(t),f=x(e),g=[];for(l||(l=function(t,e,i,n){var a,o,r,s=e-t,l=y[i],u=l.size,d=l.steps;if(!d)return Math.ceil(s/(n*u));for(a=0,o=d.length;a<o&&(r=d[a],!(Math.ceil(s/(u*r))<=n));++a);return r}(t,e,r,i)),u&&(h=h.isoWeekday(u),f=f.isoWeekday(u)),h=h.startOf(u?"day":r),(f=f.startOf(u?"day":r))<e&&f.add(1,r),a=x(h),d&&s&&!u&&!o.round&&(a.startOf(s),a.add(~~((h-a)/(c.size*l))*l,r));a<f;a.add(l,r))g.push(+a);return g.push(+a),g}e.exports=function(){var t=n.extend({initialize:function(){if(!x)throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com");this.mergeTicksOptions(),n.prototype.initialize.call(this)},update:function(){var t=this.options;return t.time&&t.time.format&&console.warn("options.time.format is deprecated and replaced by options.time.parser."),n.prototype.update.apply(this,arguments)},getRightValue:function(t){return t&&void 0!==t.t&&(t=t.t),n.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t,e,i,n,a,o,r=this,s=r.chart,l=r.options.time,u=l.unit||"day",d=v,c=p,h=[],f=[],g=[];for(t=0,i=s.data.labels.length;t<i;++t)g.push(S(s.data.labels[t],r));for(t=0,i=(s.data.datasets||[]).length;t<i;++t)if(s.isDatasetVisible(t))if(a=s.data.datasets[t].data,m.isObject(a[0]))for(f[t]=[],e=0,n=a.length;e<n;++e)o=S(a[e],r),h.push(o),f[t][e]=o;else h.push.apply(h,g),f[t]=g.slice(0);else f[t]=[];g.length&&(g=M(g).sort(b),d=Math.min(d,g[0]),c=Math.max(c,g[g.length-1])),h.length&&(h=M(h).sort(b),d=Math.min(d,h[0]),c=Math.max(c,h[h.length-1])),d=S(l.min,r)||d,c=S(l.max,r)||c,d=d===v?+x().startOf(u):d,c=c===p?+x().endOf(u)+1:c,r.min=Math.min(d,c),r.max=Math.max(d+1,c),r._horizontal=r.isHorizontal(),r._table=[],r._timestamps={data:h,datasets:f,labels:g}},buildTicks:function(){var t,e,i,n,a,o,r,s,l,u,d,c,h=this,f=h.min,g=h.max,p=h.options,m=p.time,v=[],b=[];switch(p.ticks.source){case"data":v=h._timestamps.data;break;case"labels":v=h._timestamps.labels;break;case"auto":default:v=D(f,g,h.getLabelCapacity(f),p)}for("ticks"===p.bounds&&v.length&&(f=v[0],g=v[v.length-1]),f=S(m.min,h)||f,g=S(m.max,h)||g,t=0,e=v.length;t<e;++t)f<=(i=v[t])&&i<=g&&b.push(i);return h.min=f,h.max=g,h._unit=m.unit||function(t,e,i,n){var a,o,r=x.duration(x(n).diff(x(i)));for(a=k.length-1;a>=k.indexOf(e);a--)if(o=k[a],y[o].common&&r.as(o)>=t.length)return o;return k[e?k.indexOf(e):0]}(b,m.minUnit,h.min,h.max),h._majorUnit=_(h._unit),h._table=function(t,e,i,n){if("linear"===n||!t.length)return[{time:e,pos:0},{time:i,pos:1}];var a,o,r,s,l,u=[],d=[e];for(a=0,o=t.length;a<o;++a)e<(s=t[a])&&s<i&&d.push(s);for(d.push(i),a=0,o=d.length;a<o;++a)l=d[a+1],r=d[a-1],s=d[a],void 0!==r&&void 0!==l&&Math.round((l+r)/2)===s||u.push({time:s,pos:a/(o-1)});return u}(h._timestamps.data,f,g,p.distribution),h._offsets=(n=h._table,a=b,o=f,r=g,c=d=0,(s=p).offset&&a.length&&(s.time.min||(l=1<a.length?a[1]:r,u=a[0],d=(w(n,"time",l,"pos")-w(n,"time",u,"pos"))/2),s.time.max||(l=a[a.length-1],u=1<a.length?a[a.length-2]:o,c=(w(n,"time",l,"pos")-w(n,"time",u,"pos"))/2)),{left:d,right:c}),h._labelFormat=function(t,e){var i,n,a,o=t.length;for(i=0;i<o;i++){if(0!==(n=C(t[i],e)).millisecond())return"MMM D, YYYY h:mm:ss.SSS a";0===n.second()&&0===n.minute()&&0===n.hour()||(a=!0)}return a?"MMM D, YYYY h:mm:ss a":"MMM D, YYYY"}(h._timestamps.data,m),function(t,e){var i,n,a,o,r=[];for(i=0,n=t.length;i<n;++i)a=t[i],o=!!e&&a===+x(a).startOf(e),r.push({value:a,major:o});return r}(b,h._majorUnit)},getLabelForIndex:function(t,e){var i=this.chart.data,n=this.options.time,a=i.labels&&t<i.labels.length?i.labels[t]:"",o=i.datasets[e].data[t];return m.isObject(o)&&(a=this.getRightValue(o)),n.tooltipFormat?C(a,n).format(n.tooltipFormat):"string"==typeof a?a:C(a,n).format(this._labelFormat)},tickFormatFunction:function(t,e,i,n){var a=this.options,o=t.valueOf(),r=a.time.displayFormats,s=r[this._unit],l=this._majorUnit,u=r[l],d=t.clone().startOf(l).valueOf(),c=a.ticks.major,h=c.enabled&&l&&u&&o===d,f=t.format(n||(h?u:s)),g=h?c:a.ticks.minor,p=m.valueOrDefault(g.callback,g.userCallback);return p?p(f,e,i):f},convertTicksToLabels:function(t){var e,i,n=[];for(e=0,i=t.length;e<i;++e)n.push(this.tickFormatFunction(x(t[e].value),e,t));return n},getPixelForOffset:function(t){var e=this,i=e._horizontal?e.width:e.height,n=e._horizontal?e.left:e.top,a=w(e._table,"time",t,"pos");return n+i*(e._offsets.left+a)/(e._offsets.left+1+e._offsets.right)},getPixelForValue:function(t,e,i){var n=null;if(void 0!==e&&void 0!==i&&(n=this._timestamps.datasets[i][e]),null===n&&(n=S(t,this)),null!==n)return this.getPixelForOffset(n)},getPixelForTick:function(t){var e=this.getTicks();return 0<=t&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this,i=e._horizontal?e.width:e.height,n=e._horizontal?e.left:e.top,a=(i?(t-n)/i:0)*(e._offsets.left+1+e._offsets.left)-e._offsets.right,o=w(e._table,"pos",a,"time");return x(o)},getLabelWidth:function(t){var e=this.options.ticks,i=this.ctx.measureText(t).width,n=m.toRadians(e.maxRotation),a=Math.cos(n),o=Math.sin(n);return i*a+m.valueOrDefault(e.fontSize,r.global.defaultFontSize)*o},getLabelCapacity:function(t){var e=this.options.time.displayFormats.millisecond,i=this.tickFormatFunction(x(t),0,[],e),n=this.getLabelWidth(i),a=this.isHorizontal()?this.width:this.height,o=Math.floor(a/n);return 0<o?o:1}});a.registerScaleType("time",t,{position:"bottom",distribution:"linear",bounds:"data",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}})}},{1:1,26:26,33:33,34:34,46:46}]},{},[7])(7)});
if (!Element.prototype.matches) {
  Element.prototype.matches = Element.prototype.msMatchesSelector ||  Element.prototype.webkitMatchesSelector;
}

if (!Element.prototype.closest) {
  Element.prototype.closest = function(s) {
      var el = this;
      if (!document.documentElement.contains(el)) return null;
      do {
          if (el.matches(s)) return el;
          el = el.parentElement;
      } while (el !== null);
      return null;
  };
}

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.dragula=e()}}(function(){return function e(n,t,r){function o(u,c){if(!t[u]){if(!n[u]){var a="function"==typeof require&&require;if(!c&&a)return a(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var l=t[u]={exports:{}};n[u][0].call(l.exports,function(e){var t=n[u][1][e];return o(t?t:e)},l,l.exports,e,n,t,r)}return t[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,n,t){"use strict";function r(e){var n=u[e];return n?n.lastIndex=0:u[e]=n=new RegExp(c+e+a,"g"),n}function o(e,n){var t=e.className;t.length?r(n).test(t)||(e.className+=" "+n):e.className=n}function i(e,n){e.className=e.className.replace(r(n)," ").trim()}var u={},c="(?:^|\\s)",a="(?:\\s|$)";n.exports={add:o,rm:i}},{}],2:[function(e,n,t){(function(t){"use strict";function r(e,n){function t(e){return-1!==le.containers.indexOf(e)||fe.isContainer(e)}function r(e){var n=e?"remove":"add";o(S,n,"mousedown",O),o(S,n,"mouseup",L)}function c(e){var n=e?"remove":"add";o(S,n,"mousemove",N)}function m(e){var n=e?"remove":"add";w[n](S,"selectstart",C),w[n](S,"click",C)}function h(){r(!0),L({})}function C(e){ce&&e.preventDefault()}function O(e){ne=e.clientX,te=e.clientY;var n=1!==i(e)||e.metaKey||e.ctrlKey;if(!n){var t=e.target,r=T(t);r&&(ce=r,c(),"mousedown"===e.type&&(p(t)?t.focus():e.preventDefault()))}}function N(e){if(ce){if(0===i(e))return void L({});if(void 0===e.clientX||e.clientX!==ne||void 0===e.clientY||e.clientY!==te){if(fe.ignoreInputTextSelection){var n=y("clientX",e),t=y("clientY",e),r=x.elementFromPoint(n,t);if(p(r))return}var o=ce;c(!0),m(),D(),B(o);var a=u(W);Z=y("pageX",e)-a.left,ee=y("pageY",e)-a.top,E.add(ie||W,"gu-transit"),K(),U(e)}}}function T(e){if(!(le.dragging&&J||t(e))){for(var n=e;v(e)&&t(v(e))===!1;){if(fe.invalid(e,n))return;if(e=v(e),!e)return}var r=v(e);if(r&&!fe.invalid(e,n)){var o=fe.moves(e,r,n,g(e));if(o)return{item:e,source:r}}}}function X(e){return!!T(e)}function Y(e){var n=T(e);n&&B(n)}function B(e){$(e.item,e.source)&&(ie=e.item.cloneNode(!0),le.emit("cloned",ie,e.item,"copy")),Q=e.source,W=e.item,re=oe=g(e.item),le.dragging=!0,le.emit("drag",W,Q)}function P(){return!1}function D(){if(le.dragging){var e=ie||W;M(e,v(e))}}function I(){ce=!1,c(!0),m(!0)}function L(e){if(I(),le.dragging){var n=ie||W,t=y("clientX",e),r=y("clientY",e),o=a(J,t,r),i=q(o,t,r);i&&(ie&&fe.copySortSource||!ie||i!==Q)?M(n,i):fe.removeOnSpill?R():A()}}function M(e,n){var t=v(e);ie&&fe.copySortSource&&n===Q&&t.removeChild(W),k(n)?le.emit("cancel",e,Q,Q):le.emit("drop",e,n,Q,oe),j()}function R(){if(le.dragging){var e=ie||W,n=v(e);n&&n.removeChild(e),le.emit(ie?"cancel":"remove",e,n,Q),j()}}function A(e){if(le.dragging){var n=arguments.length>0?e:fe.revertOnSpill,t=ie||W,r=v(t),o=k(r);o===!1&&n&&(ie?r&&r.removeChild(ie):Q.insertBefore(t,re)),o||n?le.emit("cancel",t,Q,Q):le.emit("drop",t,r,Q,oe),j()}}function j(){var e=ie||W;I(),z(),e&&E.rm(e,"gu-transit"),ue&&clearTimeout(ue),le.dragging=!1,ae&&le.emit("out",e,ae,Q),le.emit("dragend",e),Q=W=ie=re=oe=ue=ae=null}function k(e,n){var t;return t=void 0!==n?n:J?oe:g(ie||W),e===Q&&t===re}function q(e,n,r){function o(){var o=t(i);if(o===!1)return!1;var u=H(i,e),c=V(i,u,n,r),a=k(i,c);return a?!0:fe.accepts(W,i,Q,c)}for(var i=e;i&&!o();)i=v(i);return i}function U(e){function n(e){le.emit(e,f,ae,Q)}function t(){s&&n("over")}function r(){ae&&n("out")}if(J){e.preventDefault();var o=y("clientX",e),i=y("clientY",e),u=o-Z,c=i-ee;J.style.left=u+"px",J.style.top=c+"px";var f=ie||W,l=a(J,o,i),d=q(l,o,i),s=null!==d&&d!==ae;(s||null===d)&&(r(),ae=d,t());var p=v(f);if(d===Q&&ie&&!fe.copySortSource)return void(p&&p.removeChild(f));var m,h=H(d,l);if(null!==h)m=V(d,h,o,i);else{if(fe.revertOnSpill!==!0||ie)return void(ie&&p&&p.removeChild(f));m=re,d=Q}(null===m&&s||m!==f&&m!==g(f))&&(oe=m,d.insertBefore(f,m),le.emit("shadow",f,d,Q))}}function _(e){E.rm(e,"gu-hide")}function F(e){le.dragging&&E.add(e,"gu-hide")}function K(){if(!J){var e=W.getBoundingClientRect();J=W.cloneNode(!0),J.style.width=d(e)+"px",J.style.height=s(e)+"px",E.rm(J,"gu-transit"),E.add(J,"gu-mirror"),fe.mirrorContainer.appendChild(J),o(S,"add","mousemove",U),E.add(fe.mirrorContainer,"gu-unselectable"),le.emit("cloned",J,W,"mirror")}}function z(){J&&(E.rm(fe.mirrorContainer,"gu-unselectable"),o(S,"remove","mousemove",U),v(J).removeChild(J),J=null)}function H(e,n){for(var t=n;t!==e&&v(t)!==e;)t=v(t);return t===S?null:t}function V(e,n,t,r){function o(){var n,o,i,u=e.children.length;for(n=0;u>n;n++){if(o=e.children[n],i=o.getBoundingClientRect(),c&&i.left+i.width/2>t)return o;if(!c&&i.top+i.height/2>r)return o}return null}function i(){var e=n.getBoundingClientRect();return u(c?t>e.left+d(e)/2:r>e.top+s(e)/2)}function u(e){return e?g(n):n}var c="horizontal"===fe.direction,a=n!==e?i():o();return a}function $(e,n){return"boolean"==typeof fe.copy?fe.copy:fe.copy(e,n)}var G=arguments.length;1===G&&Array.isArray(e)===!1&&(n=e,e=[]);var J,Q,W,Z,ee,ne,te,re,oe,ie,ue,ce,ae=null,fe=n||{};void 0===fe.moves&&(fe.moves=l),void 0===fe.accepts&&(fe.accepts=l),void 0===fe.invalid&&(fe.invalid=P),void 0===fe.containers&&(fe.containers=e||[]),void 0===fe.isContainer&&(fe.isContainer=f),void 0===fe.copy&&(fe.copy=!1),void 0===fe.copySortSource&&(fe.copySortSource=!1),void 0===fe.revertOnSpill&&(fe.revertOnSpill=!1),void 0===fe.removeOnSpill&&(fe.removeOnSpill=!1),void 0===fe.direction&&(fe.direction="vertical"),void 0===fe.ignoreInputTextSelection&&(fe.ignoreInputTextSelection=!0),void 0===fe.mirrorContainer&&(fe.mirrorContainer=x.body);var le=b({containers:fe.containers,start:Y,end:D,cancel:A,remove:R,destroy:h,canMove:X,dragging:!1});return fe.removeOnSpill===!0&&le.on("over",_).on("out",F),r(),le}function o(e,n,r,o){var i={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},u={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},c={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};t.navigator.pointerEnabled?w[n](e,u[r],o):t.navigator.msPointerEnabled?w[n](e,c[r],o):(w[n](e,i[r],o),w[n](e,r,o))}function i(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var n=e.button;return void 0!==n?1&n?1:2&n?3:4&n?2:0:void 0}function u(e){var n=e.getBoundingClientRect();return{left:n.left+c("scrollLeft","pageXOffset"),top:n.top+c("scrollTop","pageYOffset")}}function c(e,n){return"undefined"!=typeof t[n]?t[n]:S.clientHeight?S[e]:x.body[e]}function a(e,n,t){var r,o=e||{},i=o.className;return o.className+=" gu-hide",r=x.elementFromPoint(n,t),o.className=i,r}function f(){return!1}function l(){return!0}function d(e){return e.width||e.right-e.left}function s(e){return e.height||e.bottom-e.top}function v(e){return e.parentNode===x?null:e.parentNode}function p(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||m(e)}function m(e){return e?"false"===e.contentEditable?!1:"true"===e.contentEditable?!0:m(v(e)):!1}function g(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}return e.nextElementSibling||n()}function h(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function y(e,n){var t=h(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),t[e]}var b=e("contra/emitter"),w=e("crossvent"),E=e("./classes"),x=document,S=x.documentElement;n.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":1,"contra/emitter":5,crossvent:6}],3:[function(e,n,t){n.exports=function(e,n){return Array.prototype.slice.call(e,n)}},{}],4:[function(e,n,t){"use strict";var r=e("ticky");n.exports=function(e,n,t){e&&r(function(){e.apply(t||null,n||[])})}},{ticky:9}],5:[function(e,n,t){"use strict";var r=e("atoa"),o=e("./debounce");n.exports=function(e,n){var t=n||{},i={};return void 0===e&&(e={}),e.on=function(n,t){return i[n]?i[n].push(t):i[n]=[t],e},e.once=function(n,t){return t._once=!0,e.on(n,t),e},e.off=function(n,t){var r=arguments.length;if(1===r)delete i[n];else if(0===r)i={};else{var o=i[n];if(!o)return e;o.splice(o.indexOf(t),1)}return e},e.emit=function(){var n=r(arguments);return e.emitterSnapshot(n.shift()).apply(this,n)},e.emitterSnapshot=function(n){var u=(i[n]||[]).slice(0);return function(){var i=r(arguments),c=this||e;if("error"===n&&t["throws"]!==!1&&!u.length)throw 1===i.length?i[0]:i;return u.forEach(function(r){t.async?o(r,i,c):r.apply(c,i),r._once&&e.off(n,r)}),e}},e}},{"./debounce":4,atoa:3}],6:[function(e,n,t){(function(t){"use strict";function r(e,n,t,r){return e.addEventListener(n,t,r)}function o(e,n,t){return e.attachEvent("on"+n,f(e,n,t))}function i(e,n,t,r){return e.removeEventListener(n,t,r)}function u(e,n,t){var r=l(e,n,t);return r?e.detachEvent("on"+n,r):void 0}function c(e,n,t){function r(){var e;return p.createEvent?(e=p.createEvent("Event"),e.initEvent(n,!0,!0)):p.createEventObject&&(e=p.createEventObject()),e}function o(){return new s(n,{detail:t})}var i=-1===v.indexOf(n)?o():r();e.dispatchEvent?e.dispatchEvent(i):e.fireEvent("on"+n,i)}function a(e,n,r){return function(n){var o=n||t.event;o.target=o.target||o.srcElement,o.preventDefault=o.preventDefault||function(){o.returnValue=!1},o.stopPropagation=o.stopPropagation||function(){o.cancelBubble=!0},o.which=o.which||o.keyCode,r.call(e,o)}}function f(e,n,t){var r=l(e,n,t)||a(e,n,t);return h.push({wrapper:r,element:e,type:n,fn:t}),r}function l(e,n,t){var r=d(e,n,t);if(r){var o=h[r].wrapper;return h.splice(r,1),o}}function d(e,n,t){var r,o;for(r=0;r<h.length;r++)if(o=h[r],o.element===e&&o.type===n&&o.fn===t)return r}var s=e("custom-event"),v=e("./eventmap"),p=t.document,m=r,g=i,h=[];t.addEventListener||(m=o,g=u),n.exports={add:m,remove:g,fabricate:c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":7,"custom-event":8}],7:[function(e,n,t){(function(e){"use strict";var t=[],r="",o=/^on/;for(r in e)o.test(r)&&t.push(r.slice(2));n.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,n,t){(function(e){function t(){try{var e=new r("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(n){}return!1}var r=e.CustomEvent;n.exports=t()?r:"function"==typeof document.createEvent?function(e,n){var t=document.createEvent("CustomEvent");return n?t.initCustomEvent(e,n.bubbles,n.cancelable,n.detail):t.initCustomEvent(e,!1,!1,void 0),t}:function(e,n){var t=document.createEventObject();return t.type=e,n?(t.bubbles=Boolean(n.bubbles),t.cancelable=Boolean(n.cancelable),t.detail=n.detail):(t.bubbles=!1,t.cancelable=!1,t.detail=void 0),t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,n,t){var r,o="function"==typeof setImmediate;r=o?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},n.exports=r},{}]},{},[2])(2)});
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function e(t){return"function"==typeof t}function n(t){B=t}function r(t){G=t}function o(){return function(){return process.nextTick(a)}}function i(){return"undefined"!=typeof z?function(){z(a)}:c()}function s(){var t=0,e=new J(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<W;t+=2){var e=V[t],n=V[t+1];e(n),V[t]=void 0,V[t+1]=void 0}W=0}function f(){try{var t=Function("return this")().require("vertx");return z=t.runOnLoop||t.runOnContext,i()}catch(e){return c()}}function l(t,e){var n=this,r=new this.constructor(p);void 0===r[Z]&&O(r);var o=n._state;if(o){var i=arguments[o-1];G(function(){return P(o,r,i,n._result)})}else E(n,r,t,e);return r}function h(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(p);return g(n,t),n}function p(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function _(t){try{return t.then}catch(e){return nt.error=e,nt}}function y(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function m(t,e,n){G(function(t){var r=!1,o=y(n,e,function(n){r||(r=!0,e!==n?g(t,n):S(t,n))},function(e){r||(r=!0,j(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,j(t,o))},t)}function b(t,e){e._state===tt?S(t,e._result):e._state===et?j(t,e._result):E(e,void 0,function(e){return g(t,e)},function(e){return j(t,e)})}function w(t,n,r){n.constructor===t.constructor&&r===l&&n.constructor.resolve===h?b(t,n):r===nt?(j(t,nt.error),nt.error=null):void 0===r?S(t,n):e(r)?m(t,n,r):S(t,n)}function g(e,n){e===n?j(e,v()):t(n)?w(e,n,_(n)):S(e,n)}function A(t){t._onerror&&t._onerror(t._result),T(t)}function S(t,e){t._state===$&&(t._result=e,t._state=tt,0!==t._subscribers.length&&G(T,t))}function j(t,e){t._state===$&&(t._state=et,t._result=e,G(A,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+tt]=n,o[i+et]=r,0===i&&t._state&&G(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?P(n,r,o,i):o(i);t._subscribers.length=0}}function M(t,e){try{return t(e)}catch(n){return nt.error=n,nt}}function P(t,n,r,o){var i=e(r),s=void 0,u=void 0,c=void 0,a=void 0;if(i){if(s=M(r,o),s===nt?(a=!0,u=s.error,s.error=null):c=!0,n===s)return void j(n,d())}else s=o,c=!0;n._state!==$||(i&&c?g(n,s):a?j(n,u):t===tt?S(n,s):t===et&&j(n,s))}function x(t,e){try{e(function(e){g(t,e)},function(e){j(t,e)})}catch(n){j(t,n)}}function C(){return rt++}function O(t){t[Z]=rt++,t._state=void 0,t._result=void 0,t._subscribers=[]}function k(){return new Error("Array Methods must be provided an Array")}function F(t){return new ot(this,t).promise}function Y(t){var e=this;return new e(U(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function q(t){var e=this,n=new e(p);return j(n,t),n}function D(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function K(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}t.Promise=it}var N=void 0;N=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var U=N,W=0,z=void 0,B=void 0,G=function(t,e){V[W]=t,V[W+1]=e,W+=2,2===W&&(B?B(a):X())},H="undefined"!=typeof window?window:void 0,I=H||{},J=I.MutationObserver||I.WebKitMutationObserver,Q="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),R="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,V=new Array(1e3),X=void 0;X=Q?o():J?s():R?u():void 0===H&&"function"==typeof require?f():c();var Z=Math.random().toString(36).substring(2),$=void 0,tt=1,et=2,nt={error:null},rt=0,ot=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[Z]||O(this.promise),U(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&S(this.promise,this._result))):j(this.promise,k())}return t.prototype._enumerate=function(t){for(var e=0;this._state===$&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var o=_(t);if(o===l&&t._state!==$)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===it){var i=new n(p);w(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===$&&(this._remaining--,t===et?j(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){return n._settledAt(tt,e,t)},function(t){return n._settledAt(et,e,t)})},t}(),it=function(){function t(e){this[Z]=C(),this._result=this._state=void 0,this._subscribers=[],p!==e&&("function"!=typeof e&&D(),this instanceof t?x(this,e):K())}return t.prototype["catch"]=function(t){return this.then(null,t)},t.prototype["finally"]=function(t){var n=this,r=n.constructor;return e(t)?n.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}):n.then(t,t)},t}();return it.prototype.then=l,it.all=F,it.race=Y,it.resolve=h,it.reject=q,it._setScheduler=n,it._setAsap=r,it._asap=G,it.polyfill=L,it.Promise=it,it.polyfill(),it});

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function e(t){return"function"==typeof t}function n(t){B=t}function r(t){G=t}function o(){return function(){return process.nextTick(a)}}function i(){return"undefined"!=typeof z?function(){z(a)}:c()}function s(){var t=0,e=new J(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<W;t+=2){var e=V[t],n=V[t+1];e(n),V[t]=void 0,V[t+1]=void 0}W=0}function f(){try{var t=Function("return this")().require("vertx");return z=t.runOnLoop||t.runOnContext,i()}catch(e){return c()}}function l(t,e){var n=this,r=new this.constructor(p);void 0===r[Z]&&O(r);var o=n._state;if(o){var i=arguments[o-1];G(function(){return P(o,r,i,n._result)})}else E(n,r,t,e);return r}function h(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(p);return g(n,t),n}function p(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function _(t){try{return t.then}catch(e){return nt.error=e,nt}}function y(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function m(t,e,n){G(function(t){var r=!1,o=y(n,e,function(n){r||(r=!0,e!==n?g(t,n):S(t,n))},function(e){r||(r=!0,j(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,j(t,o))},t)}function b(t,e){e._state===tt?S(t,e._result):e._state===et?j(t,e._result):E(e,void 0,function(e){return g(t,e)},function(e){return j(t,e)})}function w(t,n,r){n.constructor===t.constructor&&r===l&&n.constructor.resolve===h?b(t,n):r===nt?(j(t,nt.error),nt.error=null):void 0===r?S(t,n):e(r)?m(t,n,r):S(t,n)}function g(e,n){e===n?j(e,v()):t(n)?w(e,n,_(n)):S(e,n)}function A(t){t._onerror&&t._onerror(t._result),T(t)}function S(t,e){t._state===$&&(t._result=e,t._state=tt,0!==t._subscribers.length&&G(T,t))}function j(t,e){t._state===$&&(t._state=et,t._result=e,G(A,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+tt]=n,o[i+et]=r,0===i&&t._state&&G(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?P(n,r,o,i):o(i);t._subscribers.length=0}}function M(t,e){try{return t(e)}catch(n){return nt.error=n,nt}}function P(t,n,r,o){var i=e(r),s=void 0,u=void 0,c=void 0,a=void 0;if(i){if(s=M(r,o),s===nt?(a=!0,u=s.error,s.error=null):c=!0,n===s)return void j(n,d())}else s=o,c=!0;n._state!==$||(i&&c?g(n,s):a?j(n,u):t===tt?S(n,s):t===et&&j(n,s))}function x(t,e){try{e(function(e){g(t,e)},function(e){j(t,e)})}catch(n){j(t,n)}}function C(){return rt++}function O(t){t[Z]=rt++,t._state=void 0,t._result=void 0,t._subscribers=[]}function k(){return new Error("Array Methods must be provided an Array")}function F(t){return new ot(this,t).promise}function Y(t){var e=this;return new e(U(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function q(t){var e=this,n=new e(p);return j(n,t),n}function D(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function K(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}t.Promise=it}var N=void 0;N=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var U=N,W=0,z=void 0,B=void 0,G=function(t,e){V[W]=t,V[W+1]=e,W+=2,2===W&&(B?B(a):X())},H="undefined"!=typeof window?window:void 0,I=H||{},J=I.MutationObserver||I.WebKitMutationObserver,Q="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),R="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,V=new Array(1e3),X=void 0;X=Q?o():J?s():R?u():void 0===H&&"function"==typeof require?f():c();var Z=Math.random().toString(36).substring(2),$=void 0,tt=1,et=2,nt={error:null},rt=0,ot=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[Z]||O(this.promise),U(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&S(this.promise,this._result))):j(this.promise,k())}return t.prototype._enumerate=function(t){for(var e=0;this._state===$&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var o=_(t);if(o===l&&t._state!==$)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===it){var i=new n(p);w(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===$&&(this._remaining--,t===et?j(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){return n._settledAt(tt,e,t)},function(t){return n._settledAt(et,e,t)})},t}(),it=function(){function t(e){this[Z]=C(),this._result=this._state=void 0,this._subscribers=[],p!==e&&("function"!=typeof e&&D(),this instanceof t?x(this,e):K())}return t.prototype["catch"]=function(t){return this.then(null,t)},t.prototype["finally"]=function(t){var n=this,r=n.constructor;return e(t)?n.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}):n.then(t,t)},t}();return it.prototype.then=l,it.all=F,it.race=Y,it.resolve=h,it.reject=q,it._setScheduler=n,it._setAsap=r,it._asap=G,it.polyfill=L,it.Promise=it,it});

(function(a,b){if("function"==typeof define&&define.amd)define([],b);else if("undefined"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){"use strict";function b(a,b){return"undefined"==typeof b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Depricated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open("GET",b),e.responseType="blob",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error("could not download file")},e.send()}function d(a){var b=new XMLHttpRequest;return b.open("HEAD",a,!1),b.send(),200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=function(){try{return Function("return this")()||(42,eval)("this")}catch(a){return"object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:this}}(),a=f.saveAs||"object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout(function(){e(i)})}}:function(a,b,d,e){if(e=e||open("","_blank"),e&&(e.document.title=e.document.body.innerText="downloading..."),"string"==typeof a)return c(a,b,d);var g="application/octet-stream"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||g&&h)&&"object"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout(function(){k.revokeObjectURL(l)},4E4)}};f.saveAs=a.saveAs=a,"undefined"!=typeof module&&(module.exports=a)});

/*!
 * Flickity PACKAGED v2.1.2
 * Touch, responsive, flickable carousels
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * https://flickity.metafizzy.co
 * Copyright 2015-2018 Metafizzy
 */

!function(t,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,function(t,e){"use strict";function i(i,o,a){function l(t,e,n){var s,o="$()."+i+'("'+e+'")';return t.each(function(t,l){var h=a.data(l,i);if(!h)return void r(i+" not initialized. Cannot call methods, i.e. "+o);var c=h[e];if(!c||"_"==e.charAt(0))return void r(o+" is not a valid method");var d=c.apply(h,n);s=void 0===s?d:s}),void 0!==s?s:t}function h(t,e){t.each(function(t,n){var s=a.data(n,i);s?(s.option(e),s._init()):(s=new o(n,e),a.data(n,i,s))})}a=a||e||t.jQuery,a&&(o.prototype.option||(o.prototype.option=function(t){a.isPlainObject(t)&&(this.options=a.extend(!0,this.options,t))}),a.fn[i]=function(t){if("string"==typeof t){var e=s.call(arguments,1);return l(this,t,e)}return h(this,t),this},n(a))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var s=Array.prototype.slice,o=t.console,r="undefined"==typeof o?function(){}:function(t){o.error(t)};return n(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return n.indexOf(e)==-1&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||{};return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return n!=-1&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],s=0;s<i.length;s++){var o=i[s],r=n&&n[o];r&&(this.off(t,o),delete n[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function t(t){var e=parseFloat(t),i=t.indexOf("%")==-1&&!isNaN(e);return i&&e}function e(){}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<h;e++){var i=l[e];t[i]=0}return t}function n(t){var e=getComputedStyle(t);return e||a("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}function s(){if(!c){c=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(e);var s=n(e);r=200==Math.round(t(s.width)),o.isBoxSizeOuter=r,i.removeChild(e)}}function o(e){if(s(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var o=n(e);if("none"==o.display)return i();var a={};a.width=e.offsetWidth,a.height=e.offsetHeight;for(var c=a.isBorderBox="border-box"==o.boxSizing,d=0;d<h;d++){var u=l[d],f=o[u],p=parseFloat(f);a[u]=isNaN(p)?0:p}var g=a.paddingLeft+a.paddingRight,v=a.paddingTop+a.paddingBottom,m=a.marginLeft+a.marginRight,y=a.marginTop+a.marginBottom,b=a.borderLeftWidth+a.borderRightWidth,E=a.borderTopWidth+a.borderBottomWidth,S=c&&r,C=t(o.width);C!==!1&&(a.width=C+(S?0:g+b));var x=t(o.height);return x!==!1&&(a.height=x+(S?0:v+E)),a.innerWidth=a.width-(g+b),a.innerHeight=a.height-(v+E),a.outerWidth=a.width+m,a.outerHeight=a.height+y,a}}var r,a="undefined"==typeof console?e:function(t){console.error(t)},l=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],h=l.length,c=!1;return o}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i],s=n+"MatchesSelector";if(t[s])return s}}();return function(e,i){return e[t](i)}}),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,function(t,e){var i={};i.extend=function(t,e){for(var i in e)t[i]=e[i];return t},i.modulo=function(t,e){return(t%e+e)%e};var n=Array.prototype.slice;i.makeArray=function(t){if(Array.isArray(t))return t;if(null===t||void 0===t)return[];var e="object"==typeof t&&"number"==typeof t.length;return e?n.call(t):[t]},i.removeFrom=function(t,e){var i=t.indexOf(e);i!=-1&&t.splice(i,1)},i.getParent=function(t,i){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,n){t=i.makeArray(t);var s=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!n)return void s.push(t);e(t,n)&&s.push(t);for(var i=t.querySelectorAll(n),o=0;o<i.length;o++)s.push(i[o])}}),s},i.debounceMethod=function(t,e,i){i=i||100;var n=t.prototype[e],s=e+"Timeout";t.prototype[e]=function(){var t=this[s];clearTimeout(t);var e=arguments,o=this;this[s]=setTimeout(function(){n.apply(o,e),delete o[s]},i)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var s=t.console;return i.htmlInit=function(e,n){i.docReady(function(){var o=i.toDashed(n),r="data-"+o,a=document.querySelectorAll("["+r+"]"),l=document.querySelectorAll(".js-"+o),h=i.makeArray(a).concat(i.makeArray(l)),c=r+"-options",d=t.jQuery;h.forEach(function(t){var i,o=t.getAttribute(r)||t.getAttribute(c);try{i=o&&JSON.parse(o)}catch(a){return void(s&&s.error("Error parsing "+r+" on "+t.className+": "+a))}var l=new e(t,i);d&&d.data(t,n,l)})})},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/cell",["get-size/get-size"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("get-size")):(t.Flickity=t.Flickity||{},t.Flickity.Cell=e(t,t.getSize))}(window,function(t,e){function i(t,e){this.element=t,this.parent=e,this.create()}var n=i.prototype;return n.create=function(){this.element.style.position="absolute",this.element.setAttribute("aria-selected","false"),this.x=0,this.shift=0},n.destroy=function(){this.element.style.position="";var t=this.parent.originSide;this.element.removeAttribute("aria-selected"),this.element.style[t]=""},n.getSize=function(){this.size=e(this.element)},n.setPosition=function(t){this.x=t,this.updateTarget(),this.renderPosition(t)},n.updateTarget=n.setDefaultTarget=function(){var t="left"==this.parent.originSide?"marginLeft":"marginRight";this.target=this.x+this.size[t]+this.size.width*this.parent.cellAlign},n.renderPosition=function(t){var e=this.parent.originSide;this.element.style[e]=this.parent.getPositionValue(t)},n.wrapShift=function(t){this.shift=t,this.renderPosition(this.x+this.parent.slideableWidth*t)},n.remove=function(){this.element.parentNode.removeChild(this.element)},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/slide",e):"object"==typeof module&&module.exports?module.exports=e():(t.Flickity=t.Flickity||{},t.Flickity.Slide=e())}(window,function(){"use strict";function t(t){this.parent=t,this.isOriginLeft="left"==t.originSide,this.cells=[],this.outerWidth=0,this.height=0}var e=t.prototype;return e.addCell=function(t){if(this.cells.push(t),this.outerWidth+=t.size.outerWidth,this.height=Math.max(t.size.outerHeight,this.height),1==this.cells.length){this.x=t.x;var e=this.isOriginLeft?"marginLeft":"marginRight";this.firstMargin=t.size[e]}},e.updateTarget=function(){var t=this.isOriginLeft?"marginRight":"marginLeft",e=this.getLastCell(),i=e?e.size[t]:0,n=this.outerWidth-(this.firstMargin+i);this.target=this.x+this.firstMargin+n*this.parent.cellAlign},e.getLastCell=function(){return this.cells[this.cells.length-1]},e.select=function(){this.changeSelected(!0)},e.unselect=function(){this.changeSelected(!1)},e.changeSelected=function(t){var e=t?"add":"remove";this.cells.forEach(function(i){i.element.classList[e]("is-selected"),i.element.setAttribute("aria-selected",t.toString())})},e.getCellElements=function(){return this.cells.map(function(t){return t.element})},t}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/animate",["fizzy-ui-utils/utils"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("fizzy-ui-utils")):(t.Flickity=t.Flickity||{},t.Flickity.animatePrototype=e(t,t.fizzyUIUtils))}(window,function(t,e){var i={};return i.startAnimation=function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},i.animate=function(){this.applyDragForce(),this.applySelectedAttraction();var t=this.x;if(this.integratePhysics(),this.positionSlider(),this.settle(t),this.isAnimating){var e=this;requestAnimationFrame(function(){e.animate()})}},i.positionSlider=function(){var t=this.x;this.options.wrapAround&&this.cells.length>1&&(t=e.modulo(t,this.slideableWidth),t-=this.slideableWidth,this.shiftWrapCells(t)),t+=this.cursorPosition,t=this.options.rightToLeft?-t:t;var i=this.getPositionValue(t);this.slider.style.transform=this.isAnimating?"translate3d("+i+",0,0)":"translateX("+i+")";var n=this.slides[0];if(n){var s=-this.x-n.target,o=s/this.slidesWidth;this.dispatchEvent("scroll",null,[o,s])}},i.positionSliderAtSelected=function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},i.getPositionValue=function(t){return this.options.percentPosition?.01*Math.round(t/this.size.innerWidth*1e4)+"%":Math.round(t)+"px"},i.settle=function(t){this.isPointerDown||Math.round(100*this.x)!=Math.round(100*t)||this.restingFrames++,this.restingFrames>2&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},i.shiftWrapCells=function(t){var e=this.cursorPosition+t;this._shiftCells(this.beforeShiftCells,e,-1);var i=this.size.innerWidth-(t+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,i,1)},i._shiftCells=function(t,e,i){for(var n=0;n<t.length;n++){var s=t[n],o=e>0?i:0;s.wrapShift(o),e-=s.size.outerWidth}},i._unshiftCells=function(t){if(t&&t.length)for(var e=0;e<t.length;e++)t[e].wrapShift(0)},i.integratePhysics=function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},i.applyForce=function(t){this.velocity+=t},i.getFrictionFactor=function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},i.getRestingPosition=function(){return this.x+this.velocity/(1-this.getFrictionFactor())},i.applyDragForce=function(){if(this.isDraggable&&this.isPointerDown){var t=this.dragX-this.x,e=t-this.velocity;this.applyForce(e)}},i.applySelectedAttraction=function(){var t=this.isDraggable&&this.isPointerDown;if(!t&&!this.isFreeScrolling&&this.slides.length){var e=this.selectedSlide.target*-1-this.x,i=e*this.options.selectedAttraction;this.applyForce(i)}},i}),function(t,e){if("function"==typeof define&&define.amd)define("flickity/js/flickity",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./cell","./slide","./animate"],function(i,n,s,o,r,a){return e(t,i,n,s,o,r,a)});else if("object"==typeof module&&module.exports)module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./cell"),require("./slide"),require("./animate"));else{var i=t.Flickity;t.Flickity=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,i.Cell,i.Slide,i.animatePrototype)}}(window,function(t,e,i,n,s,o,r){function a(t,e){for(t=n.makeArray(t);t.length;)e.appendChild(t.shift())}function l(t,e){var i=n.getQueryElement(t);if(!i)return void(d&&d.error("Bad element for Flickity: "+(i||t)));if(this.element=i,this.element.flickityGUID){var s=f[this.element.flickityGUID];return s.option(e),s}h&&(this.$element=h(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e),this._create()}var h=t.jQuery,c=t.getComputedStyle,d=t.console,u=0,f={};l.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},l.createMethods=[];var p=l.prototype;n.extend(p,e.prototype),p._create=function(){var e=this.guid=++u;this.element.flickityGUID=e,f[e]=this,this.selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&t.addEventListener("resize",this);for(var i in this.options.on){var n=this.options.on[i];this.on(i,n)}l.createMethods.forEach(function(t){this[t]()},this),this.options.watchCSS?this.watchCSS():this.activate()},p.option=function(t){n.extend(this.options,t)},p.activate=function(){if(!this.isActive){this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize();var t=this._filterFindCellElements(this.element.children);a(t,this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate");var e,i=this.options.initialIndex;e=this.isInitActivated?this.selectedIndex:void 0!==i&&this.cells[i]?i:0,this.select(e,!1,!0),this.isInitActivated=!0,this.dispatchEvent("ready")}},p._createSlider=function(){var t=document.createElement("div");t.className="flickity-slider",t.style[this.originSide]=0,this.slider=t},p._filterFindCellElements=function(t){return n.filterFindElements(t,this.options.cellSelector)},p.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},p._makeCells=function(t){var e=this._filterFindCellElements(t),i=e.map(function(t){return new s(t,this)},this);return i},p.getLastCell=function(){return this.cells[this.cells.length-1]},p.getLastSlide=function(){return this.slides[this.slides.length-1]},p.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},p._positionCells=function(t){t=t||0,this.maxCellHeight=t?this.maxCellHeight||0:0;var e=0;if(t>0){var i=this.cells[t-1];e=i.x+i.size.outerWidth}for(var n=this.cells.length,s=t;s<n;s++){var o=this.cells[s];o.setPosition(e),e+=o.size.outerWidth,this.maxCellHeight=Math.max(o.size.outerHeight,this.maxCellHeight)}this.slideableWidth=e,this.updateSlides(),this._containSlides(),this.slidesWidth=n?this.getLastSlide().target-this.slides[0].target:0},p._sizeCells=function(t){t.forEach(function(t){t.getSize()})},p.updateSlides=function(){if(this.slides=[],this.cells.length){var t=new o(this);this.slides.push(t);var e="left"==this.originSide,i=e?"marginRight":"marginLeft",n=this._getCanCellFit();this.cells.forEach(function(e,s){if(!t.cells.length)return void t.addCell(e);var r=t.outerWidth-t.firstMargin+(e.size.outerWidth-e.size[i]);n.call(this,s,r)?t.addCell(e):(t.updateTarget(),t=new o(this),this.slides.push(t),t.addCell(e))},this),t.updateTarget(),this.updateSelectedSlide()}},p._getCanCellFit=function(){var t=this.options.groupCells;if(!t)return function(){return!1};if("number"==typeof t){var e=parseInt(t,10);return function(t){return t%e!==0}}var i="string"==typeof t&&t.match(/^(\d+)%$/),n=i?parseInt(i[1],10)/100:1;return function(t,e){return e<=(this.size.innerWidth+1)*n}},p._init=p.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},p.getSize=function(){this.size=i(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign};var g={center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}};return p.setCellAlign=function(){var t=g[this.options.cellAlign];this.cellAlign=t?t[this.originSide]:this.options.cellAlign},p.setGallerySize=function(){if(this.options.setGallerySize){var t=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight;this.viewport.style.height=t+"px"}},p._getWrapShiftCells=function(){if(this.options.wrapAround){this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells);var t=this.cursorPosition,e=this.cells.length-1;this.beforeShiftCells=this._getGapCells(t,e,-1),t=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(t,0,1)}},p._getGapCells=function(t,e,i){for(var n=[];t>0;){var s=this.cells[e];if(!s)break;n.push(s),e+=i,t-=s.size.outerWidth}return n},p._containSlides=function(){if(this.options.contain&&!this.options.wrapAround&&this.cells.length){var t=this.options.rightToLeft,e=t?"marginRight":"marginLeft",i=t?"marginLeft":"marginRight",n=this.slideableWidth-this.getLastCell().size[i],s=n<this.size.innerWidth,o=this.cursorPosition+this.cells[0].size[e],r=n-this.size.innerWidth*(1-this.cellAlign);this.slides.forEach(function(t){s?t.target=n*this.cellAlign:(t.target=Math.max(t.target,o),t.target=Math.min(t.target,r))},this)}},p.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),h&&this.$element){t+=this.options.namespaceJQueryEvents?".flickity":"";var s=t;if(e){var o=h.Event(e);o.type=t,s=o}this.$element.trigger(s,i)}},p.select=function(t,e,i){if(this.isActive&&(t=parseInt(t,10),this._wrapSelect(t),(this.options.wrapAround||e)&&(t=n.modulo(t,this.slides.length)),this.slides[t])){var s=this.selectedIndex;this.selectedIndex=t,this.updateSelectedSlide(),i?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[t]),t!=s&&this.dispatchEvent("change",null,[t]),this.dispatchEvent("cellSelect")}},p._wrapSelect=function(t){var e=this.slides.length,i=this.options.wrapAround&&e>1;if(!i)return t;var s=n.modulo(t,e),o=Math.abs(s-this.selectedIndex),r=Math.abs(s+e-this.selectedIndex),a=Math.abs(s-e-this.selectedIndex);!this.isDragSelect&&r<o?t+=e:!this.isDragSelect&&a<o&&(t-=e),t<0?this.x-=this.slideableWidth:t>=e&&(this.x+=this.slideableWidth)},p.previous=function(t,e){this.select(this.selectedIndex-1,t,e)},p.next=function(t,e){this.select(this.selectedIndex+1,t,e)},p.updateSelectedSlide=function(){var t=this.slides[this.selectedIndex];t&&(this.unselectSelectedSlide(),this.selectedSlide=t,t.select(),this.selectedCells=t.cells,this.selectedElements=t.getCellElements(),this.selectedCell=t.cells[0],this.selectedElement=this.selectedElements[0])},p.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},p.selectCell=function(t,e,i){var n=this.queryCell(t);if(n){var s=this.getCellSlideIndex(n);this.select(s,e,i)}},p.getCellSlideIndex=function(t){for(var e=0;e<this.slides.length;e++){var i=this.slides[e],n=i.cells.indexOf(t);if(n!=-1)return e}},p.getCell=function(t){for(var e=0;e<this.cells.length;e++){var i=this.cells[e];if(i.element==t)return i}},p.getCells=function(t){t=n.makeArray(t);var e=[];return t.forEach(function(t){var i=this.getCell(t);i&&e.push(i)},this),e},p.getCellElements=function(){return this.cells.map(function(t){return t.element})},p.getParentCell=function(t){var e=this.getCell(t);return e?e:(t=n.getParent(t,".flickity-slider > *"),this.getCell(t))},p.getAdjacentCellElements=function(t,e){if(!t)return this.selectedSlide.getCellElements();e=void 0===e?this.selectedIndex:e;var i=this.slides.length;if(1+2*t>=i)return this.getCellElements();for(var s=[],o=e-t;o<=e+t;o++){var r=this.options.wrapAround?n.modulo(o,i):o,a=this.slides[r];a&&(s=s.concat(a.getCellElements()))}return s},p.queryCell=function(t){return"number"==typeof t?this.cells[t]:("string"==typeof t&&(t=this.element.querySelector(t)),this.getCell(t))},p.uiChange=function(){this.emitEvent("uiChange")},p.childUIPointerDown=function(t){this.emitEvent("childUIPointerDown",[t])},p.onresize=function(){this.watchCSS(),this.resize()},n.debounceMethod(l,"onresize",150),p.resize=function(){if(this.isActive){this.getSize(),this.options.wrapAround&&(this.x=n.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize");var t=this.selectedElements&&this.selectedElements[0];this.selectCell(t,!1,!0)}},p.watchCSS=function(){var t=this.options.watchCSS;if(t){var e=c(this.element,":after").content;e.indexOf("flickity")!=-1?this.activate():this.deactivate()}},p.onkeydown=function(t){var e=document.activeElement&&document.activeElement!=this.element;if(this.options.accessibility&&!e){var i=l.keyboardHandlers[t.keyCode];i&&i.call(this)}},l.keyboardHandlers={37:function(){var t=this.options.rightToLeft?"next":"previous";this.uiChange(),this[t]()},39:function(){var t=this.options.rightToLeft?"previous":"next";this.uiChange(),this[t]()}},p.focus=function(){var e=t.pageYOffset;this.element.focus({preventScroll:!0}),t.pageYOffset!=e&&t.scrollTo(t.pageXOffset,e)},p.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(function(t){t.destroy()}),this.element.removeChild(this.viewport),a(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},p.destroy=function(){this.deactivate(),t.removeEventListener("resize",this),this.emitEvent("destroy"),h&&this.$element&&h.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete f[this.guid]},n.extend(p,r),l.data=function(t){t=n.getQueryElement(t);var e=t&&t.flickityGUID;return e&&f[e]},n.htmlInit(l,"flickity"),h&&h.bridget&&h.bridget("flickity",l),l.setJQuery=function(t){h=t},l.Cell=s,l}),function(t,e){"function"==typeof define&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.Unipointer=e(t,t.EvEmitter)}(window,function(t,e){function i(){}function n(){}var s=n.prototype=Object.create(e.prototype);s.bindStartEvent=function(t){this._bindStartEvent(t,!0)},s.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},s._bindStartEvent=function(e,i){i=void 0===i||i;var n=i?"addEventListener":"removeEventListener",s="mousedown";t.PointerEvent?s="pointerdown":"ontouchstart"in t&&(s="touchstart"),e[n](s,this)},s.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},s.getTouch=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.identifier==this.pointerIdentifier)return i}},s.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},s.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},s.onpointerdown=function(t){this._pointerDown(t,t)},s._pointerDown=function(t,e){t.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},s.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])};var o={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return s._bindPostStartEvents=function(e){if(e){var i=o[e.type];i.forEach(function(e){t.addEventListener(e,this)},this),this._boundPointerEvents=i}},s._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(e){t.removeEventListener(e,this)},this),delete this._boundPointerEvents)},s.onmousemove=function(t){this._pointerMove(t,t)},s.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},s.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},s._pointerMove=function(t,e){this.pointerMove(t,e)},s.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},s.onmouseup=function(t){this._pointerUp(t,t)},s.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},s.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},s._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},s.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},s._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},s._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},s.pointerDone=i,s.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},s.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},s._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},s.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},n.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},n}),function(t,e){"function"==typeof define&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("unipointer")):t.Unidragger=e(t,t.Unipointer)}(window,function(t,e){function i(){}var n=i.prototype=Object.create(e.prototype);n.bindHandles=function(){this._bindHandles(!0)},n.unbindHandles=function(){this._bindHandles(!1)},n._bindHandles=function(e){e=void 0===e||e;for(var i=e?"addEventListener":"removeEventListener",n=e?this._touchActionValue:"",s=0;s<this.handles.length;s++){var o=this.handles[s];this._bindStartEvent(o,e),o[i]("click",this),t.PointerEvent&&(o.style.touchAction=n)}},n._touchActionValue="none",n.pointerDown=function(t,e){var i=this.okayPointerDown(t);i&&(this.pointerDownPointer=e,t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e]))};var s={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},o={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return n.okayPointerDown=function(t){var e=s[t.target.nodeName],i=o[t.target.type],n=!e||i;return n||this._pointerReset(),n},n.pointerDownBlur=function(){var t=document.activeElement,e=t&&t.blur&&t!=document.body;e&&t.blur()},n.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,i]),this._dragMove(t,e,i)},n._dragPointerMove=function(t,e){var i={x:e.pageX-this.pointerDownPointer.pageX,y:e.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this._dragStart(t,e),i},n.hasDragStarted=function(t){return Math.abs(t.x)>3||Math.abs(t.y)>3},n.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},n._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},n._dragStart=function(t,e){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(t,e)},n.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},n._dragMove=function(t,e,i){this.isDragging&&this.dragMove(t,e,i)},n.dragMove=function(t,e,i){t.preventDefault(),this.emitEvent("dragMove",[t,e,i])},n._dragEnd=function(t,e){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,e)},n.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},n.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},n._staticClick=function(t,e){this.isIgnoringMouseUp&&"mouseup"==t.type||(this.staticClick(t,e),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},n.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},i.getPointerPoint=e.getPointerPoint,i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/drag",["./flickity","unidragger/unidragger","fizzy-ui-utils/utils"],function(i,n,s){return e(t,i,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("unidragger"),require("fizzy-ui-utils")):t.Flickity=e(t,t.Flickity,t.Unidragger,t.fizzyUIUtils)}(window,function(t,e,i,n){function s(){return{x:t.pageXOffset,y:t.pageYOffset}}n.extend(e.defaults,{draggable:">1",dragThreshold:3}),e.createMethods.push("_createDrag");var o=e.prototype;n.extend(o,i.prototype),o._touchActionValue="pan-y";var r="createTouch"in document,a=!1;o._createDrag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("childUIPointerDown",this._childUIPointerDownDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable),r&&!a&&(t.addEventListener("touchmove",function(){}),a=!0)},o.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},o.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},o.updateDraggable=function(){">1"==this.options.draggable?this.isDraggable=this.slides.length>1:this.isDraggable=this.options.draggable,this.isDraggable?this.element.classList.add("is-draggable"):this.element.classList.remove("is-draggable")},o.bindDrag=function(){this.options.draggable=!0,this.updateDraggable()},o.unbindDrag=function(){this.options.draggable=!1,this.updateDraggable()},o._uiChangeDrag=function(){delete this.isFreeScrolling},o._childUIPointerDownDrag=function(t){t.preventDefault(),this.pointerDownFocus(t)},o.pointerDown=function(e,i){if(!this.isDraggable)return void this._pointerDownDefault(e,i);var n=this.okayPointerDown(e);n&&(this._pointerDownPreventDefault(e),this.pointerDownFocus(e),document.activeElement!=this.element&&this.pointerDownBlur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=s(),t.addEventListener("scroll",this),this._pointerDownDefault(e,i))},o._pointerDownDefault=function(t,e){this.pointerDownPointer=e,this._bindPostStartEvents(t),this.dispatchEvent("pointerDown",t,[e])};var l={INPUT:!0,TEXTAREA:!0,SELECT:!0};return o.pointerDownFocus=function(t){var e=l[t.target.nodeName];e||this.focus()},o._pointerDownPreventDefault=function(t){var e="touchstart"==t.type,i="touch"==t.pointerType,n=l[t.target.nodeName];e||i||n||t.preventDefault()},o.hasDragStarted=function(t){return Math.abs(t.x)>this.options.dragThreshold},o.pointerUp=function(t,e){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",t,[e]),this._dragPointerUp(t,e)},o.pointerDone=function(){t.removeEventListener("scroll",this),delete this.pointerDownScroll},o.dragStart=function(e,i){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),t.removeEventListener("scroll",this),this.dispatchEvent("dragStart",e,[i]))},o.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.dispatchEvent("pointerMove",t,[e,i]),this._dragMove(t,e,i)},o.dragMove=function(t,e,i){if(this.isDraggable){t.preventDefault(),this.previousDragX=this.dragX;var n=this.options.rightToLeft?-1:1;this.options.wrapAround&&(i.x=i.x%this.slideableWidth);var s=this.dragStartPosition+i.x*n;if(!this.options.wrapAround&&this.slides.length){var o=Math.max(-this.slides[0].target,this.dragStartPosition);s=s>o?.5*(s+o):s;var r=Math.min(-this.getLastSlide().target,this.dragStartPosition);s=s<r?.5*(s+r):s}this.dragX=s,this.dragMoveTime=new Date,
this.dispatchEvent("dragMove",t,[e,i])}},o.dragEnd=function(t,e){if(this.isDraggable){this.options.freeScroll&&(this.isFreeScrolling=!0);var i=this.dragEndRestingSelect();if(this.options.freeScroll&&!this.options.wrapAround){var n=this.getRestingPosition();this.isFreeScrolling=-n>this.slides[0].target&&-n<this.getLastSlide().target}else this.options.freeScroll||i!=this.selectedIndex||(i+=this.dragEndBoostSelect());delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(i),delete this.isDragSelect,this.dispatchEvent("dragEnd",t,[e])}},o.dragEndRestingSelect=function(){var t=this.getRestingPosition(),e=Math.abs(this.getSlideDistance(-t,this.selectedIndex)),i=this._getClosestResting(t,e,1),n=this._getClosestResting(t,e,-1),s=i.distance<n.distance?i.index:n.index;return s},o._getClosestResting=function(t,e,i){for(var n=this.selectedIndex,s=1/0,o=this.options.contain&&!this.options.wrapAround?function(t,e){return t<=e}:function(t,e){return t<e};o(e,s)&&(n+=i,s=e,e=this.getSlideDistance(-t,n),null!==e);)e=Math.abs(e);return{distance:s,index:n-i}},o.getSlideDistance=function(t,e){var i=this.slides.length,s=this.options.wrapAround&&i>1,o=s?n.modulo(e,i):e,r=this.slides[o];if(!r)return null;var a=s?this.slideableWidth*Math.floor(e/i):0;return t-(r.target+a)},o.dragEndBoostSelect=function(){if(void 0===this.previousDragX||!this.dragMoveTime||new Date-this.dragMoveTime>100)return 0;var t=this.getSlideDistance(-this.dragX,this.selectedIndex),e=this.previousDragX-this.dragX;return t>0&&e>0?1:t<0&&e<0?-1:0},o.staticClick=function(t,e){var i=this.getParentCell(t.target),n=i&&i.element,s=i&&this.cells.indexOf(i);this.dispatchEvent("staticClick",t,[e,n,s])},o.onscroll=function(){var t=s(),e=this.pointerDownScroll.x-t.x,i=this.pointerDownScroll.y-t.y;(Math.abs(e)>3||Math.abs(i)>3)&&this._pointerDone()},e}),function(t,e){"function"==typeof define&&define.amd?define("tap-listener/tap-listener",["unipointer/unipointer"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("unipointer")):t.TapListener=e(t,t.Unipointer)}(window,function(t,e){function i(t){this.bindTap(t)}var n=i.prototype=Object.create(e.prototype);return n.bindTap=function(t){t&&(this.unbindTap(),this.tapElement=t,this._bindStartEvent(t,!0))},n.unbindTap=function(){this.tapElement&&(this._bindStartEvent(this.tapElement,!0),delete this.tapElement)},n.pointerUp=function(i,n){if(!this.isIgnoringMouseUp||"mouseup"!=i.type){var s=e.getPointerPoint(n),o=this.tapElement.getBoundingClientRect(),r=t.pageXOffset,a=t.pageYOffset,l=s.x>=o.left+r&&s.x<=o.right+r&&s.y>=o.top+a&&s.y<=o.bottom+a;if(l&&this.emitEvent("tap",[i,n]),"mouseup"!=i.type){this.isIgnoringMouseUp=!0;var h=this;setTimeout(function(){delete h.isIgnoringMouseUp},400)}}},n.destroy=function(){this.pointerDone(),this.unbindTap()},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/prev-next-button",["./flickity","tap-listener/tap-listener","fizzy-ui-utils/utils"],function(i,n,s){return e(t,i,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("tap-listener"),require("fizzy-ui-utils")):e(t,t.Flickity,t.TapListener,t.fizzyUIUtils)}(window,function(t,e,i,n){"use strict";function s(t,e){this.direction=t,this.parent=e,this._create()}function o(t){return"string"==typeof t?t:"M "+t.x0+",50 L "+t.x1+","+(t.y1+50)+" L "+t.x2+","+(t.y2+50)+" L "+t.x3+",50  L "+t.x2+","+(50-t.y2)+" L "+t.x1+","+(50-t.y1)+" Z"}var r="http://www.w3.org/2000/svg";s.prototype=Object.create(i.prototype),s.prototype._create=function(){this.isEnabled=!0,this.isPrevious=this.direction==-1;var t=this.parent.options.rightToLeft?1:-1;this.isLeft=this.direction==t;var e=this.element=document.createElement("button");e.className="flickity-button flickity-prev-next-button",e.className+=this.isPrevious?" previous":" next",e.setAttribute("type","button"),this.disable(),e.setAttribute("aria-label",this.isPrevious?"Previous":"Next");var i=this.createSVG();e.appendChild(i),this.on("tap",this.onTap),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},s.prototype.activate=function(){this.bindTap(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},s.prototype.deactivate=function(){this.parent.element.removeChild(this.element),i.prototype.destroy.call(this),this.element.removeEventListener("click",this)},s.prototype.createSVG=function(){var t=document.createElementNS(r,"svg");t.setAttribute("class","flickity-button-icon"),t.setAttribute("viewBox","0 0 100 100");var e=document.createElementNS(r,"path"),i=o(this.parent.options.arrowShape);return e.setAttribute("d",i),e.setAttribute("class","arrow"),this.isLeft||e.setAttribute("transform","translate(100, 100) rotate(180) "),t.appendChild(e),t},s.prototype.onTap=function(){if(this.isEnabled){this.parent.uiChange();var t=this.isPrevious?"previous":"next";this.parent[t]()}},s.prototype.handleEvent=n.handleEvent,s.prototype.onclick=function(t){var e=document.activeElement;e&&e==this.element&&this.onTap(t,t)},s.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},s.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},s.prototype.update=function(){var t=this.parent.slides;if(this.parent.options.wrapAround&&t.length>1)return void this.enable();var e=t.length?t.length-1:0,i=this.isPrevious?0:e,n=this.parent.selectedIndex==i?"disable":"enable";this[n]()},s.prototype.destroy=function(){this.deactivate()},n.extend(e.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),e.createMethods.push("_createPrevNextButtons");var a=e.prototype;return a._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new s((-1),this),this.nextButton=new s(1,this),this.on("activate",this.activatePrevNextButtons))},a.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},a.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},e.PrevNextButton=s,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/page-dots",["./flickity","tap-listener/tap-listener","fizzy-ui-utils/utils"],function(i,n,s){return e(t,i,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("tap-listener"),require("fizzy-ui-utils")):e(t,t.Flickity,t.TapListener,t.fizzyUIUtils)}(window,function(t,e,i,n){function s(t){this.parent=t,this._create()}s.prototype=new i,s.prototype._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.on("tap",this.onTap),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},s.prototype.activate=function(){this.setDots(),this.bindTap(this.holder),this.parent.element.appendChild(this.holder)},s.prototype.deactivate=function(){this.parent.element.removeChild(this.holder),i.prototype.destroy.call(this)},s.prototype.setDots=function(){var t=this.parent.slides.length-this.dots.length;t>0?this.addDots(t):t<0&&this.removeDots(-t)},s.prototype.addDots=function(t){for(var e=document.createDocumentFragment(),i=[],n=this.dots.length,s=n+t,o=n;o<s;o++){var r=document.createElement("li");r.className="dot",r.setAttribute("aria-label","Page dot "+(o+1)),e.appendChild(r),i.push(r)}this.holder.appendChild(e),this.dots=this.dots.concat(i)},s.prototype.removeDots=function(t){var e=this.dots.splice(this.dots.length-t,t);e.forEach(function(t){this.holder.removeChild(t)},this)},s.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot",this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected",this.selectedDot.setAttribute("aria-current","step"))},s.prototype.onTap=function(t){var e=t.target;if("LI"==e.nodeName){this.parent.uiChange();var i=this.dots.indexOf(e);this.parent.select(i)}},s.prototype.destroy=function(){this.deactivate()},e.PageDots=s,n.extend(e.defaults,{pageDots:!0}),e.createMethods.push("_createPageDots");var o=e.prototype;return o._createPageDots=function(){this.options.pageDots&&(this.pageDots=new s(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},o.activatePageDots=function(){this.pageDots.activate()},o.updateSelectedPageDots=function(){this.pageDots.updateSelected()},o.updatePageDots=function(){this.pageDots.setDots()},o.deactivatePageDots=function(){this.pageDots.deactivate()},e.PageDots=s,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/player",["ev-emitter/ev-emitter","fizzy-ui-utils/utils","./flickity"],function(t,i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("fizzy-ui-utils"),require("./flickity")):e(t.EvEmitter,t.fizzyUIUtils,t.Flickity)}(window,function(t,e,i){function n(t){this.parent=t,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}n.prototype=Object.create(t.prototype),n.prototype.play=function(){if("playing"!=this.state){var t=document.hidden;if(t)return void document.addEventListener("visibilitychange",this.onVisibilityPlay);this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()}},n.prototype.tick=function(){if("playing"==this.state){var t=this.parent.options.autoPlay;t="number"==typeof t?t:3e3;var e=this;this.clear(),this.timeout=setTimeout(function(){e.parent.next(!0),e.tick()},t)}},n.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},n.prototype.clear=function(){clearTimeout(this.timeout)},n.prototype.pause=function(){"playing"==this.state&&(this.state="paused",this.clear())},n.prototype.unpause=function(){"paused"==this.state&&this.play()},n.prototype.visibilityChange=function(){var t=document.hidden;this[t?"pause":"unpause"]()},n.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},e.extend(i.defaults,{pauseAutoPlayOnHover:!0}),i.createMethods.push("_createPlayer");var s=i.prototype;return s._createPlayer=function(){this.player=new n(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},s.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},s.playPlayer=function(){this.player.play()},s.stopPlayer=function(){this.player.stop()},s.pausePlayer=function(){this.player.pause()},s.unpausePlayer=function(){this.player.unpause()},s.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},s.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},s.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},i.Player=n,i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/add-remove-cell",["./flickity","fizzy-ui-utils/utils"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("fizzy-ui-utils")):e(t,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,i){function n(t){var e=document.createDocumentFragment();return t.forEach(function(t){e.appendChild(t.element)}),e}var s=e.prototype;return s.insert=function(t,e){var i=this._makeCells(t);if(i&&i.length){var s=this.cells.length;e=void 0===e?s:e;var o=n(i),r=e==s;if(r)this.slider.appendChild(o);else{var a=this.cells[e].element;this.slider.insertBefore(o,a)}if(0===e)this.cells=i.concat(this.cells);else if(r)this.cells=this.cells.concat(i);else{var l=this.cells.splice(e,s-e);this.cells=this.cells.concat(i).concat(l)}this._sizeCells(i),this.cellChange(e,!0)}},s.append=function(t){this.insert(t,this.cells.length)},s.prepend=function(t){this.insert(t,0)},s.remove=function(t){var e=this.getCells(t);if(e&&e.length){var n=this.cells.length-1;e.forEach(function(t){t.remove();var e=this.cells.indexOf(t);n=Math.min(e,n),i.removeFrom(this.cells,t)},this),this.cellChange(n,!0)}},s.cellSizeChange=function(t){var e=this.getCell(t);if(e){e.getSize();var i=this.cells.indexOf(e);this.cellChange(i)}},s.cellChange=function(t,e){var i=this.selectedElement;this._positionCells(t),this._getWrapShiftCells(),this.setGallerySize();var n=this.getCell(i);n&&(this.selectedIndex=this.getCellSlideIndex(n)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[t]),this.select(this.selectedIndex),e&&this.positionSliderAtSelected()},e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/lazyload",["./flickity","fizzy-ui-utils/utils"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("fizzy-ui-utils")):e(t,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,i){"use strict";function n(t){if("IMG"==t.nodeName){var e=t.getAttribute("data-flickity-lazyload"),n=t.getAttribute("data-flickity-lazyload-src"),s=t.getAttribute("data-flickity-lazyload-srcset");if(e||n||s)return[t]}var o="img[data-flickity-lazyload], img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]",r=t.querySelectorAll(o);return i.makeArray(r)}function s(t,e){this.img=t,this.flickity=e,this.load()}e.createMethods.push("_createLazyload");var o=e.prototype;return o._createLazyload=function(){this.on("select",this.lazyLoad)},o.lazyLoad=function(){var t=this.options.lazyLoad;if(t){var e="number"==typeof t?t:0,i=this.getAdjacentCellElements(e),o=[];i.forEach(function(t){var e=n(t);o=o.concat(e)}),o.forEach(function(t){new s(t,this)},this)}},s.prototype.handleEvent=i.handleEvent,s.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var t=this.img.getAttribute("data-flickity-lazyload")||this.img.getAttribute("data-flickity-lazyload-src"),e=this.img.getAttribute("data-flickity-lazyload-srcset");this.img.src=t,e&&this.img.setAttribute("srcset",e),this.img.removeAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload-src"),this.img.removeAttribute("data-flickity-lazyload-srcset")},s.prototype.onload=function(t){this.complete(t,"flickity-lazyloaded")},s.prototype.onerror=function(t){this.complete(t,"flickity-lazyerror")},s.prototype.complete=function(t,e){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var i=this.flickity.getParentCell(this.img),n=i&&i.element;this.flickity.cellSizeChange(n),this.img.classList.add(e),this.flickity.dispatchEvent("lazyLoad",t,n)},e.LazyLoader=s,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/index",["./flickity","./drag","./prev-next-button","./page-dots","./player","./add-remove-cell","./lazyload"],e):"object"==typeof module&&module.exports&&(module.exports=e(require("./flickity"),require("./drag"),require("./prev-next-button"),require("./page-dots"),require("./player"),require("./add-remove-cell"),require("./lazyload")))}(window,function(t){return t}),function(t,e){"function"==typeof define&&define.amd?define("flickity-as-nav-for/as-nav-for",["flickity/js/index","fizzy-ui-utils/utils"],e):"object"==typeof module&&module.exports?module.exports=e(require("flickity"),require("fizzy-ui-utils")):t.Flickity=e(t.Flickity,t.fizzyUIUtils)}(window,function(t,e){function i(t,e,i){return(e-t)*i+t}t.createMethods.push("_createAsNavFor");var n=t.prototype;return n._createAsNavFor=function(){this.on("activate",this.activateAsNavFor),this.on("deactivate",this.deactivateAsNavFor),this.on("destroy",this.destroyAsNavFor);var t=this.options.asNavFor;if(t){var e=this;setTimeout(function(){e.setNavCompanion(t)})}},n.setNavCompanion=function(i){i=e.getQueryElement(i);var n=t.data(i);if(n&&n!=this){this.navCompanion=n;var s=this;this.onNavCompanionSelect=function(){s.navCompanionSelect()},n.on("select",this.onNavCompanionSelect),this.on("staticClick",this.onNavStaticClick),this.navCompanionSelect(!0)}},n.navCompanionSelect=function(t){if(this.navCompanion){var e=this.navCompanion.selectedCells[0],n=this.navCompanion.cells.indexOf(e),s=n+this.navCompanion.selectedCells.length-1,o=Math.floor(i(n,s,this.navCompanion.cellAlign));if(this.selectCell(o,!1,t),this.removeNavSelectedElements(),!(o>=this.cells.length)){var r=this.cells.slice(n,s+1);this.navSelectedElements=r.map(function(t){return t.element}),this.changeNavSelectedClass("add")}}},n.changeNavSelectedClass=function(t){this.navSelectedElements.forEach(function(e){e.classList[t]("is-nav-selected")})},n.activateAsNavFor=function(){this.navCompanionSelect(!0)},n.removeNavSelectedElements=function(){this.navSelectedElements&&(this.changeNavSelectedClass("remove"),delete this.navSelectedElements)},n.onNavStaticClick=function(t,e,i,n){"number"==typeof n&&this.navCompanion.selectCell(n)},n.deactivateAsNavFor=function(){this.removeNavSelectedElements()},n.destroyAsNavFor=function(){this.navCompanion&&(this.navCompanion.off("select",this.onNavCompanionSelect),this.off("staticClick",this.onNavStaticClick),delete this.navCompanion)},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t){if(Array.isArray(t))return t;var e="object"==typeof t&&"number"==typeof t.length;return e?h.call(t):[t]}function s(t,e,o){if(!(this instanceof s))return new s(t,e,o);var r=t;return"string"==typeof t&&(r=document.querySelectorAll(t)),r?(this.elements=n(r),this.options=i({},this.options),"function"==typeof e?o=e:i(this.options,e),o&&this.on("always",o),this.getImages(),a&&(this.jqDeferred=new a.Deferred),void setTimeout(this.check.bind(this))):void l.error("Bad element for imagesLoaded "+(r||t))}function o(t){this.img=t}function r(t,e){this.url=t,this.element=e,this.img=new Image}var a=t.jQuery,l=t.console,h=Array.prototype.slice;s.prototype=Object.create(e.prototype),s.prototype.options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),this.options.background===!0&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&c[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var s=i[n];this.addImage(s)}if("string"==typeof this.options.background){var o=t.querySelectorAll(this.options.background);for(n=0;n<o.length;n++){var r=o[n];this.addElementBackgroundImages(r)}}}};var c={1:!0,9:!0,11:!0};return s.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var s=n&&n[2];s&&this.addBackground(s,t),n=i.exec(e.backgroundImage)}},s.prototype.addImage=function(t){var e=new o(t);this.images.push(e)},s.prototype.addBackground=function(t,e){var i=new r(t,e);this.images.push(i)},s.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},s.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&l&&l.log("progress: "+i,t,e)},s.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},o.prototype=Object.create(e.prototype),o.prototype.check=function(){var t=this.getIsImageComplete();return t?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},o.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},o.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},o.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},o.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},o.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},o.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},r.prototype=Object.create(o.prototype),r.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},r.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},s.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(a=e,a.fn.imagesLoaded=function(t,e){var i=new s(this,t,e);return i.jqDeferred.promise(a(this))})},s.makeJQueryPlugin(),s}),function(t,e){"function"==typeof define&&define.amd?define(["flickity/js/index","imagesloaded/imagesloaded"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("flickity"),require("imagesloaded")):t.Flickity=e(t,t.Flickity,t.imagesLoaded)}(window,function(t,e,i){"use strict";e.createMethods.push("_createImagesLoaded");var n=e.prototype;return n._createImagesLoaded=function(){this.on("activate",this.imagesLoaded)},n.imagesLoaded=function(){function t(t,i){var n=e.getParentCell(i.img);e.cellSizeChange(n&&n.element),e.options.freeScroll||e.positionSliderAtSelected()}if(this.options.imagesLoaded){var e=this;i(this.slider).on("progress",t)}},e});
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
	typeof define === 'function' && define.amd ? define(factory) :
	(global.IMask = factory());
}(this, (function () { 'use strict';

// 7.2.1 RequireObjectCoercible(argument)
var _defined = function (it) {
  if (it == undefined) throw TypeError("Can't call method on  " + it);
  return it;
};

// 7.1.13 ToObject(argument)

var _toObject = function (it) {
  return Object(_defined(it));
};

var hasOwnProperty = {}.hasOwnProperty;
var _has = function (it, key) {
  return hasOwnProperty.call(it, key);
};

var toString = {}.toString;

var _cof = function (it) {
  return toString.call(it).slice(8, -1);
};

// fallback for non-array-like ES3 and non-enumerable old V8 strings

// eslint-disable-next-line no-prototype-builtins
var _iobject = Object('z').propertyIsEnumerable(0) ? Object : function (it) {
  return _cof(it) == 'String' ? it.split('') : Object(it);
};

// to indexed object, toObject with fallback for non-array-like ES3 strings


var _toIobject = function (it) {
  return _iobject(_defined(it));
};

// 7.1.4 ToInteger
var ceil = Math.ceil;
var floor = Math.floor;
var _toInteger = function (it) {
  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);
};

// 7.1.15 ToLength

var min = Math.min;
var _toLength = function (it) {
  return it > 0 ? min(_toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991
};

var max = Math.max;
var min$1 = Math.min;
var _toAbsoluteIndex = function (index, length) {
  index = _toInteger(index);
  return index < 0 ? max(index + length, 0) : min$1(index, length);
};

// false -> Array#indexOf
// true  -> Array#includes



var _arrayIncludes = function (IS_INCLUDES) {
  return function ($this, el, fromIndex) {
    var O = _toIobject($this);
    var length = _toLength(O.length);
    var index = _toAbsoluteIndex(fromIndex, length);
    var value;
    // Array#includes uses SameValueZero equality algorithm
    // eslint-disable-next-line no-self-compare
    if (IS_INCLUDES && el != el) while (length > index) {
      value = O[index++];
      // eslint-disable-next-line no-self-compare
      if (value != value) return true;
    // Array#indexOf ignores holes, Array#includes - not
    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {
      if (O[index] === el) return IS_INCLUDES || index || 0;
    } return !IS_INCLUDES && -1;
  };
};

function createCommonjsModule(fn, module) {
	return module = { exports: {} }, fn(module, module.exports), module.exports;
}

var _global = createCommonjsModule(function (module) {
// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
var global = module.exports = typeof window != 'undefined' && window.Math == Math
  ? window : typeof self != 'undefined' && self.Math == Math ? self
  // eslint-disable-next-line no-new-func
  : Function('return this')();
if (typeof __g == 'number') __g = global; // eslint-disable-line no-undef
});

var SHARED = '__core-js_shared__';
var store = _global[SHARED] || (_global[SHARED] = {});
var _shared = function (key) {
  return store[key] || (store[key] = {});
};

var id = 0;
var px = Math.random();
var _uid = function (key) {
  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));
};

var shared = _shared('keys');

var _sharedKey = function (key) {
  return shared[key] || (shared[key] = _uid(key));
};

var arrayIndexOf = _arrayIncludes(false);
var IE_PROTO = _sharedKey('IE_PROTO');

var _objectKeysInternal = function (object, names) {
  var O = _toIobject(object);
  var i = 0;
  var result = [];
  var key;
  for (key in O) if (key != IE_PROTO) _has(O, key) && result.push(key);
  // Don't enum bug & hidden keys
  while (names.length > i) if (_has(O, key = names[i++])) {
    ~arrayIndexOf(result, key) || result.push(key);
  }
  return result;
};

// IE 8- don't enum bug keys
var _enumBugKeys = (
  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'
).split(',');

// 19.1.2.14 / 15.2.3.14 Object.keys(O)



var _objectKeys = Object.keys || function keys(O) {
  return _objectKeysInternal(O, _enumBugKeys);
};

var _core = createCommonjsModule(function (module) {
var core = module.exports = { version: '2.5.3' };
if (typeof __e == 'number') __e = core; // eslint-disable-line no-undef
});

var _core_1 = _core.version;

var _isObject = function (it) {
  return typeof it === 'object' ? it !== null : typeof it === 'function';
};

var _anObject = function (it) {
  if (!_isObject(it)) throw TypeError(it + ' is not an object!');
  return it;
};

var _fails = function (exec) {
  try {
    return !!exec();
  } catch (e) {
    return true;
  }
};

// Thank's IE8 for his funny defineProperty
var _descriptors = !_fails(function () {
  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;
});

var document$1 = _global.document;
// typeof document.createElement is 'object' in old IE
var is = _isObject(document$1) && _isObject(document$1.createElement);
var _domCreate = function (it) {
  return is ? document$1.createElement(it) : {};
};

var _ie8DomDefine = !_descriptors && !_fails(function () {
  return Object.defineProperty(_domCreate('div'), 'a', { get: function () { return 7; } }).a != 7;
});

// 7.1.1 ToPrimitive(input [, PreferredType])

// instead of the ES6 spec version, we didn't implement @@toPrimitive case
// and the second argument - flag - preferred type is a string
var _toPrimitive = function (it, S) {
  if (!_isObject(it)) return it;
  var fn, val;
  if (S && typeof (fn = it.toString) == 'function' && !_isObject(val = fn.call(it))) return val;
  if (typeof (fn = it.valueOf) == 'function' && !_isObject(val = fn.call(it))) return val;
  if (!S && typeof (fn = it.toString) == 'function' && !_isObject(val = fn.call(it))) return val;
  throw TypeError("Can't convert object to primitive value");
};

var dP = Object.defineProperty;

var f = _descriptors ? Object.defineProperty : function defineProperty(O, P, Attributes) {
  _anObject(O);
  P = _toPrimitive(P, true);
  _anObject(Attributes);
  if (_ie8DomDefine) try {
    return dP(O, P, Attributes);
  } catch (e) { /* empty */ }
  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');
  if ('value' in Attributes) O[P] = Attributes.value;
  return O;
};

var _objectDp = {
	f: f
};

var _propertyDesc = function (bitmap, value) {
  return {
    enumerable: !(bitmap & 1),
    configurable: !(bitmap & 2),
    writable: !(bitmap & 4),
    value: value
  };
};

var _hide = _descriptors ? function (object, key, value) {
  return _objectDp.f(object, key, _propertyDesc(1, value));
} : function (object, key, value) {
  object[key] = value;
  return object;
};

var _redefine = createCommonjsModule(function (module) {
var SRC = _uid('src');
var TO_STRING = 'toString';
var $toString = Function[TO_STRING];
var TPL = ('' + $toString).split(TO_STRING);

_core.inspectSource = function (it) {
  return $toString.call(it);
};

(module.exports = function (O, key, val, safe) {
  var isFunction = typeof val == 'function';
  if (isFunction) _has(val, 'name') || _hide(val, 'name', key);
  if (O[key] === val) return;
  if (isFunction) _has(val, SRC) || _hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));
  if (O === _global) {
    O[key] = val;
  } else if (!safe) {
    delete O[key];
    _hide(O, key, val);
  } else if (O[key]) {
    O[key] = val;
  } else {
    _hide(O, key, val);
  }
// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative
})(Function.prototype, TO_STRING, function toString() {
  return typeof this == 'function' && this[SRC] || $toString.call(this);
});
});

var _aFunction = function (it) {
  if (typeof it != 'function') throw TypeError(it + ' is not a function!');
  return it;
};

// optional / simple context binding

var _ctx = function (fn, that, length) {
  _aFunction(fn);
  if (that === undefined) return fn;
  switch (length) {
    case 1: return function (a) {
      return fn.call(that, a);
    };
    case 2: return function (a, b) {
      return fn.call(that, a, b);
    };
    case 3: return function (a, b, c) {
      return fn.call(that, a, b, c);
    };
  }
  return function (/* ...args */) {
    return fn.apply(that, arguments);
  };
};

var PROTOTYPE = 'prototype';

var $export = function (type, name, source) {
  var IS_FORCED = type & $export.F;
  var IS_GLOBAL = type & $export.G;
  var IS_STATIC = type & $export.S;
  var IS_PROTO = type & $export.P;
  var IS_BIND = type & $export.B;
  var target = IS_GLOBAL ? _global : IS_STATIC ? _global[name] || (_global[name] = {}) : (_global[name] || {})[PROTOTYPE];
  var exports = IS_GLOBAL ? _core : _core[name] || (_core[name] = {});
  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});
  var key, own, out, exp;
  if (IS_GLOBAL) source = name;
  for (key in source) {
    // contains in native
    own = !IS_FORCED && target && target[key] !== undefined;
    // export native or passed
    out = (own ? target : source)[key];
    // bind timers to global for call from export context
    exp = IS_BIND && own ? _ctx(out, _global) : IS_PROTO && typeof out == 'function' ? _ctx(Function.call, out) : out;
    // extend global
    if (target) _redefine(target, key, out, type & $export.U);
    // export
    if (exports[key] != out) _hide(exports, key, exp);
    if (IS_PROTO && expProto[key] != out) expProto[key] = out;
  }
};
_global.core = _core;
// type bitmap
$export.F = 1;   // forced
$export.G = 2;   // global
$export.S = 4;   // static
$export.P = 8;   // proto
$export.B = 16;  // bind
$export.W = 32;  // wrap
$export.U = 64;  // safe
$export.R = 128; // real proto method for `library`
var _export = $export;

// most Object methods by ES6 should accept primitives



var _objectSap = function (KEY, exec) {
  var fn = (_core.Object || {})[KEY] || Object[KEY];
  var exp = {};
  exp[KEY] = exec(fn);
  _export(_export.S + _export.F * _fails(function () { fn(1); }), 'Object', exp);
};

// 19.1.2.14 Object.keys(O)



_objectSap('keys', function () {
  return function keys(it) {
    return _objectKeys(_toObject(it));
  };
});

var keys = _core.Object.keys;

var _stringRepeat = function repeat(count) {
  var str = String(_defined(this));
  var res = '';
  var n = _toInteger(count);
  if (n < 0 || n == Infinity) throw RangeError("Count can't be negative");
  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) res += str;
  return res;
};

_export(_export.P, 'String', {
  // 21.1.3.13 String.prototype.repeat(count)
  repeat: _stringRepeat
});

var repeat$1 = _core.String.repeat;

// https://github.com/tc39/proposal-string-pad-start-end




var _stringPad = function (that, maxLength, fillString, left) {
  var S = String(_defined(that));
  var stringLength = S.length;
  var fillStr = fillString === undefined ? ' ' : String(fillString);
  var intMaxLength = _toLength(maxLength);
  if (intMaxLength <= stringLength || fillStr == '') return S;
  var fillLen = intMaxLength - stringLength;
  var stringFiller = _stringRepeat.call(fillStr, Math.ceil(fillLen / fillStr.length));
  if (stringFiller.length > fillLen) stringFiller = stringFiller.slice(0, fillLen);
  return left ? stringFiller + S : S + stringFiller;
};

var navigator = _global.navigator;

var _userAgent = navigator && navigator.userAgent || '';

// https://github.com/tc39/proposal-string-pad-start-end




// https://github.com/zloirock/core-js/issues/280
_export(_export.P + _export.F * /Version\/10\.\d+(\.\d+)? Safari\//.test(_userAgent), 'String', {
  padStart: function padStart(maxLength /* , fillString = ' ' */) {
    return _stringPad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, true);
  }
});

var padStart = _core.String.padStart;

// https://github.com/tc39/proposal-string-pad-start-end




// https://github.com/zloirock/core-js/issues/280
_export(_export.P + _export.F * /Version\/10\.\d+(\.\d+)? Safari\//.test(_userAgent), 'String', {
  padEnd: function padEnd(maxLength /* , fillString = ' ' */) {
    return _stringPad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, false);
  }
});

var padEnd = _core.String.padEnd;

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
  return typeof obj;
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};











var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

var createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();







var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];

    for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }

  return target;
};

var get = function get(object, property, receiver) {
  if (object === null) object = Function.prototype;
  var desc = Object.getOwnPropertyDescriptor(object, property);

  if (desc === undefined) {
    var parent = Object.getPrototypeOf(object);

    if (parent === null) {
      return undefined;
    } else {
      return get(parent, property, receiver);
    }
  } else if ("value" in desc) {
    return desc.value;
  } else {
    var getter = desc.get;

    if (getter === undefined) {
      return undefined;
    }

    return getter.call(receiver);
  }
};

var inherits = function (subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
};











var possibleConstructorReturn = function (self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return call && (typeof call === "object" || typeof call === "function") ? call : self;
};



var set = function set(object, property, value, receiver) {
  var desc = Object.getOwnPropertyDescriptor(object, property);

  if (desc === undefined) {
    var parent = Object.getPrototypeOf(object);

    if (parent !== null) {
      set(parent, property, value, receiver);
    }
  } else if ("value" in desc && desc.writable) {
    desc.value = value;
  } else {
    var setter = desc.set;

    if (setter !== undefined) {
      setter.call(receiver, value);
    }
  }

  return value;
};

var slicedToArray = function () {
  function sliceIterator(arr, i) {
    var _arr = [];
    var _n = true;
    var _d = false;
    var _e = undefined;

    try {
      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
        _arr.push(_s.value);

        if (i && _arr.length === i) break;
      }
    } catch (err) {
      _d = true;
      _e = err;
    } finally {
      try {
        if (!_n && _i["return"]) _i["return"]();
      } finally {
        if (_d) throw _e;
      }
    }

    return _arr;
  }

  return function (arr, i) {
    if (Array.isArray(arr)) {
      return arr;
    } else if (Symbol.iterator in Object(arr)) {
      return sliceIterator(arr, i);
    } else {
      throw new TypeError("Invalid attempt to destructure non-iterable instance");
    }
  };
}();













var toConsumableArray = function (arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];

    return arr2;
  } else {
    return Array.from(arr);
  }
};

/** Checks if value is string */
function isString(str) {
  return typeof str === 'string' || str instanceof String;
}

/** Conforms string with fallback */
function conform(res, str) {
  var fallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';

  return isString(res) ? res : res ? str : fallback;
}

/**
  Direction
  @prop {number} NONE
  @prop {number} LEFT
  @prop {number} RIGHT
*/
var DIRECTION = {
  NONE: 0,
  LEFT: -1,
  RIGHT: 1
  /**
    Direction
    @enum {number}
  */
};

/** Returns next char position in direction */
function indexInDirection(pos, direction) {
  if (direction === DIRECTION.LEFT) --pos;
  return pos;
}

/** Escapes regular expression control chars */
function escapeRegExp(str) {
  return str.replace(/([.*+?^=!:${}()|[\]/\\])/g, '\\$1');
}

// cloned from https://github.com/epoberezkin/fast-deep-equal with small changes
function objectIncludes(b, a) {
  if (a === b) return true;

  var arrA = Array.isArray(a),
      arrB = Array.isArray(b),
      i;

  if (arrA && arrB) {
    if (a.length != b.length) return false;
    for (i = 0; i < a.length; i++) {
      if (!objectIncludes(a[i], b[i])) return false;
    }return true;
  }

  if (arrA != arrB) return false;

  if (a && b && (typeof a === 'undefined' ? 'undefined' : _typeof(a)) === 'object' && (typeof b === 'undefined' ? 'undefined' : _typeof(b)) === 'object') {
    var keys = Object.keys(a);
    // if (keys.length !== Object.keys(b).length) return false;

    var dateA = a instanceof Date,
        dateB = b instanceof Date;
    if (dateA && dateB) return a.getTime() == b.getTime();
    if (dateA != dateB) return false;

    var regexpA = a instanceof RegExp,
        regexpB = b instanceof RegExp;
    if (regexpA && regexpB) return a.toString() == b.toString();
    if (regexpA != regexpB) return false;

    for (i = 0; i < keys.length; i++) {
      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;
    }for (i = 0; i < keys.length; i++) {
      if (!objectIncludes(a[keys[i]], b[keys[i]])) return false;
    }return true;
  }

  return false;
}

/* eslint-disable no-undef */
var g = typeof window !== 'undefined' && window || typeof global !== 'undefined' && global.global === global && global || typeof self !== 'undefined' && self.self === self && self || {};
/* eslint-enable no-undef */

/** Selection range */

/** Provides details of changing input */

var ActionDetails = function () {
  /** Old input value */

  /** Current input value */
  function ActionDetails(value, cursorPos, oldValue, oldSelection) {
    classCallCheck(this, ActionDetails);

    this.value = value;
    this.cursorPos = cursorPos;
    this.oldValue = oldValue;
    this.oldSelection = oldSelection;

    // double check if left part was changed (autofilling, other non-standard input triggers)
    while (this.value.slice(0, this.startChangePos) !== this.oldValue.slice(0, this.startChangePos)) {
      --this.oldSelection.start;
    }
  }

  /**
    Start changing position
    @readonly
  */

  /** Old selection */

  /** Current cursor position */


  createClass(ActionDetails, [{
    key: 'startChangePos',
    get: function get$$1() {
      return Math.min(this.cursorPos, this.oldSelection.start);
    }

    /**
      Inserted symbols count
      @readonly
    */

  }, {
    key: 'insertedCount',
    get: function get$$1() {
      return this.cursorPos - this.startChangePos;
    }

    /**
      Inserted symbols
      @readonly
    */

  }, {
    key: 'inserted',
    get: function get$$1() {
      return this.value.substr(this.startChangePos, this.insertedCount);
    }

    /**
      Removed symbols count
      @readonly
    */

  }, {
    key: 'removedCount',
    get: function get$$1() {
      // Math.max for opposite operation
      return Math.max(this.oldSelection.end - this.startChangePos ||
      // for Delete
      this.oldValue.length - this.value.length, 0);
    }

    /**
      Removed symbols
      @readonly
    */

  }, {
    key: 'removed',
    get: function get$$1() {
      return this.oldValue.substr(this.startChangePos, this.removedCount);
    }

    /**
      Unchanged head symbols
      @readonly
    */

  }, {
    key: 'head',
    get: function get$$1() {
      return this.value.substring(0, this.startChangePos);
    }

    /**
      Unchanged tail symbols
      @readonly
    */

  }, {
    key: 'tail',
    get: function get$$1() {
      return this.value.substring(this.startChangePos + this.insertedCount);
    }

    /**
      Remove direction
      @readonly
    */

  }, {
    key: 'removeDirection',
    get: function get$$1() {
      if (!this.removedCount || this.insertedCount) return DIRECTION.NONE;

      // align right if delete at right or if range removed (event with backspace)
      return this.oldSelection.end === this.cursorPos || this.oldSelection.start === this.cursorPos ? DIRECTION.RIGHT : DIRECTION.LEFT;
    }
  }]);
  return ActionDetails;
}();

/**
  Provides details of changing model value
  @param {Object} [details]
  @param {string} [details.inserted] - Inserted symbols
  @param {boolean} [details.overflow] - Is overflowed
  @param {number} [details.removeCount] - Removed symbols count
  @param {number} [details.shift] - Additional offset if any changes occurred before current position
*/
var ChangeDetails = function () {
  /** Additional offset if any changes occurred before current position */

  /** Inserted symbols */
  function ChangeDetails(details) {
    classCallCheck(this, ChangeDetails);

    _extends(this, {
      inserted: '',
      overflow: false,
      shift: 0
    }, details);
  }

  /**
    Aggregate changes
    @returns {ChangeDetails} `this`
  */

  /** Is overflowed */


  createClass(ChangeDetails, [{
    key: 'aggregate',
    value: function aggregate(details) {
      if (details.rawInserted) this.rawInserted += details.rawInserted;
      this.inserted += details.inserted;
      this.shift += details.shift;
      this.overflow = this.overflow || details.overflow;
      return this;
    }

    /** Total offset considering all changes */

  }, {
    key: 'offset',
    get: function get$$1() {
      return this.shift + this.inserted.length;
    }

    /** Raw inserted is used by dynamic mask */

  }, {
    key: 'rawInserted',
    get: function get$$1() {
      return this._rawInserted != null ? this._rawInserted : this.inserted;
    },
    set: function set$$1(rawInserted) {
      this._rawInserted = rawInserted;
    }
  }]);
  return ChangeDetails;
}();

/** Supported mask type */


/** Append flags */


/** Extract flags */

/** Provides common masking stuff */
var Masked = function () {
  /** Does additional processing in the end of editing */

  /** Transforms value before mask processing */
  function Masked(opts) {
    classCallCheck(this, Masked);

    this._value = '';
    this._update(_extends({}, Masked.DEFAULTS, opts));
    this.isInitialized = true;
  }

  /** Sets and applies new options */

  /** */

  /** Validates if value is acceptable */
  // $Shape<MaskedOptions>; TODO after fix https://github.com/facebook/flow/issues/4773

  /** @type {Mask} */


  createClass(Masked, [{
    key: 'updateOptions',
    value: function updateOptions(opts) {
      this.withValueRefresh(this._update.bind(this, opts));
    }

    /**
      Sets new options
      @protected
    */

  }, {
    key: '_update',
    value: function _update(opts) {
      _extends(this, opts);
    }

    /** Clones masked with options and value */

  }, {
    key: 'clone',
    value: function clone() {
      var m = new Masked(this);
      m._value = this.value.slice();
      return m;
    }

    /** */

  }, {
    key: 'assign',
    value: function assign(source) {
      // $FlowFixMe
      return _extends(this, source);
    }

    /** Resets value */

  }, {
    key: 'reset',
    value: function reset() {
      this._value = '';
    }

    /** */

  }, {
    key: 'resolve',


    /** Resolve new value */
    value: function resolve(value) {
      this.reset();
      this._append(value, { input: true });
      this._appendTail();
      this.doCommit();
      return this.value;
    }

    /** */

  }, {
    key: 'nearestInputPos',


    /** Finds nearest input position in direction */
    value: function nearestInputPos(cursorPos, direction) {
      return cursorPos;
    }

    /** Extracts value in range considering flags */

  }, {
    key: 'extractInput',
    value: function extractInput() {
      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;
      return this.value.slice(fromPos, toPos);
    }

    /** Extracts tail in range */

  }, {
    key: '_extractTail',
    value: function _extractTail() {
      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;

      return {
        value: this.extractInput(fromPos, toPos),
        fromPos: fromPos,
        toPos: toPos
      };
    }

    /** Appends tail */

  }, {
    key: '_appendTail',
    value: function _appendTail(tail) {
      return this._append(tail ? tail.value : '', { tail: true });
    }

    /** Appends symbols considering flags */

  }, {
    key: '_append',
    value: function _append(str) {
      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      var oldValueLength = this.value.length;
      var consistentValue = this.clone();
      var overflow = false;

      str = this.doPrepare(str, flags);

      for (var ci = 0; ci < str.length; ++ci) {
        this._value += str[ci];
        if (this.doValidate(flags) === false) {
          this.assign(consistentValue);
          if (!flags.input) {
            // in `input` mode dont skip invalid chars
            overflow = true;
            break;
          }
        }

        consistentValue = this.clone();
      }

      return new ChangeDetails({
        inserted: this.value.slice(oldValueLength),
        overflow: overflow
      });
    }

    /** Appends symbols considering tail */

  }, {
    key: 'appendWithTail',
    value: function appendWithTail(str, tail) {
      // TODO refactor
      var aggregateDetails = new ChangeDetails();
      var consistentValue = this.clone();
      var consistentAppended = void 0;

      for (var ci = 0; ci < str.length; ++ci) {
        var ch = str[ci];

        var appendDetails = this._append(ch, { input: true });
        consistentAppended = this.clone();
        var tailAppended = !appendDetails.overflow && !this._appendTail(tail).overflow;
        if (!tailAppended || this.doValidate({ tail: true }) === false) {
          this.assign(consistentValue);
          break;
        }

        this.assign(consistentAppended);
        consistentValue = this.clone();
        aggregateDetails.aggregate(appendDetails);
      }

      // TODO needed for cases when
      // 1) REMOVE ONLY AND NO LOOP AT ALL
      // 2) last loop iteration removes tail
      // 3) when breaks on tail insert

      // aggregate only shift from tail
      aggregateDetails.shift += this._appendTail(tail).shift;

      return aggregateDetails;
    }

    /** */

  }, {
    key: 'remove',
    value: function remove() {
      var from = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      var count = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length - from;

      this._value = this.value.slice(0, from) + this.value.slice(from + count);
      return new ChangeDetails();
    }

    /** Calls function and reapplies current value */

  }, {
    key: 'withValueRefresh',
    value: function withValueRefresh(fn) {
      if (this._refreshing || !this.isInitialized) return fn();
      this._refreshing = true;

      var unmasked = this.unmaskedValue;

      var ret = fn();

      this.unmaskedValue = unmasked;

      delete this._refreshing;
      return ret;
    }

    /**
      Prepares string before mask processing
      @protected
    */

  }, {
    key: 'doPrepare',
    value: function doPrepare(str) {
      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      return this.prepare(str, this, flags);
    }

    /**
      Validates if value is acceptable
      @protected
    */

  }, {
    key: 'doValidate',
    value: function doValidate(flags) {
      return this.validate(this.value, this, flags);
    }

    /**
      Does additional processing in the end of editing
      @protected
    */

  }, {
    key: 'doCommit',
    value: function doCommit() {
      this.commit(this.value, this);
    }

    // TODO
    // insert (str, fromPos, flags)

    /** */

  }, {
    key: 'splice',
    value: function splice(start, deleteCount, inserted, removeDirection) {
      var tailPos = start + deleteCount;
      var tail = this._extractTail(tailPos);

      var startChangePos = this.nearestInputPos(start, removeDirection);
      var changeDetails = new ChangeDetails({
        shift: startChangePos - start // adjust shift if start was aligned
      }).aggregate(this.remove(startChangePos)).aggregate(this.appendWithTail(inserted, tail));

      return changeDetails;
    }
  }, {
    key: 'value',
    get: function get$$1() {
      return this._value;
    },
    set: function set$$1(value) {
      this.resolve(value);
    }
  }, {
    key: 'unmaskedValue',
    get: function get$$1() {
      return this.value;
    },
    set: function set$$1(value) {
      this.reset();
      this._append(value);
      this._appendTail();
      this.doCommit();
    }

    /** Value that includes raw user input */

  }, {
    key: 'rawInputValue',
    get: function get$$1() {
      return this.extractInput(0, this.value.length, { raw: true });
    },
    set: function set$$1(value) {
      this.reset();
      this._append(value, { raw: true });
      this._appendTail();
      this.doCommit();
    }

    /** */

  }, {
    key: 'isComplete',
    get: function get$$1() {
      return true;
    }
  }]);
  return Masked;
}();

Masked.DEFAULTS = {
  prepare: function prepare(val) {
    return val;
  },
  validate: function validate() {
    return true;
  },
  commit: function commit() {}
};

/** Get Masked class by mask type */
function maskedClass(mask) {
  if (mask == null) {
    throw new Error('mask property should be defined');
  }

  if (mask instanceof RegExp) return g.IMask.MaskedRegExp;
  if (isString(mask)) return g.IMask.MaskedPattern;
  if (mask instanceof Date || mask === Date) return g.IMask.MaskedDate;
  if (mask instanceof Number || typeof mask === 'number' || mask === Number) return g.IMask.MaskedNumber;
  if (Array.isArray(mask) || mask === Array) return g.IMask.MaskedDynamic;
  // $FlowFixMe
  if (mask.prototype instanceof g.IMask.Masked) return mask;
  // $FlowFixMe
  if (mask instanceof Function) return g.IMask.MaskedFunction;

  console.warn('Mask not found for mask', mask); // eslint-disable-line no-console
  return g.IMask.Masked;
}

/** Creates new {@link Masked} depending on mask type */
function createMask(opts) {
  opts = _extends({}, opts); // clone
  var mask = opts.mask;

  if (mask instanceof g.IMask.Masked) return mask;

  var MaskedClass = maskedClass(mask);
  return new MaskedClass(opts);
}

/** */

/** */
var PatternDefinition = function () {
  /** */

  /** */

  /** */
  function PatternDefinition(opts) {
    classCallCheck(this, PatternDefinition);
    // TODO flow
    _extends(this, opts);

    if (this.mask) {
      this._masked = createMask(opts);
    }
  }

  /** */

  /** */

  /** */

  /** */


  /** */


  createClass(PatternDefinition, [{
    key: 'reset',
    value: function reset() {
      this.isHollow = false;
      this.isRawInput = false;
      if (this._masked) this._masked.reset();
    }

    /** */

  }, {
    key: 'resolve',


    /** */
    value: function resolve(ch) {
      if (!this._masked) return false;
      return this._masked.resolve(ch);
    }
  }, {
    key: 'isInput',
    get: function get$$1() {
      return this.type === PatternDefinition.TYPES.INPUT;
    }

    /** */

  }, {
    key: 'isHiddenHollow',
    get: function get$$1() {
      return this.isHollow && this.optional;
    }
  }]);
  return PatternDefinition;
}();

PatternDefinition.DEFAULTS = {
  '0': /\d/,
  'a': /[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/, // http://stackoverflow.com/a/22075070
  '*': /./
};
/**
  @prop {string} INPUT
  @prop {string} FIXED
*/
PatternDefinition.TYPES = {
  INPUT: 'input',
  FIXED: 'fixed'
};

/** */


/** */

/**
  Pattern group symbols from parent
  @param {MaskedPattern} masked - Internal {@link masked} model
  @param {Object} opts
  @param {string} opts.name - Group name
  @param {number} opts.offset - Group offset in masked definitions array
  @param {string} opts.mask - Group mask
  @param {Function} [opts.validate] - Custom group validator
*/
var PatternGroup = function () {
  /** Group mask */

  /** Group name */

  /** */
  function PatternGroup(masked, _ref) {
    var name = _ref.name,
        offset = _ref.offset,
        mask = _ref.mask,
        validate = _ref.validate;
    classCallCheck(this, PatternGroup);

    this.masked = masked;
    this.name = name;
    this.offset = offset;
    this.mask = mask;
    this.validate = validate || function () {
      return true;
    };
  }

  /** Slice of internal {@link masked} value */

  /** Custom group validator */

  /** Group offset in masked definitions array */


  /** Internal {@link masked} model */

  /** */


  createClass(PatternGroup, [{
    key: 'doValidate',


    /** Validates if current value is acceptable */
    value: function doValidate(flags) {
      return this.validate(this.value, this, flags);
    }
  }, {
    key: 'value',
    get: function get$$1() {
      return this.masked.value.slice(this.masked.mapDefIndexToPos(this.offset), this.masked.mapDefIndexToPos(this.offset + this.mask.length));
    }

    /** Unmasked slice of internal {@link masked} value */

  }, {
    key: 'unmaskedValue',
    get: function get$$1() {
      return this.masked.extractInput(this.masked.mapDefIndexToPos(this.offset), this.masked.mapDefIndexToPos(this.offset + this.mask.length));
    }
  }]);
  return PatternGroup;
}();

var RangeGroup = function () {
  /** @type {Function} */
  function RangeGroup(_ref2) {
    var _ref3 = slicedToArray(_ref2, 2),
        from = _ref3[0],
        to = _ref3[1];

    var maxlen = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : String(to).length;
    classCallCheck(this, RangeGroup);

    this._from = from;
    this._to = to;
    this._maxLength = maxlen;
    this.validate = this.validate.bind(this);

    this._update();
  }
  /** @type {string} */


  createClass(RangeGroup, [{
    key: '_update',
    value: function _update() {
      this._maxLength = Math.max(this._maxLength, String(this.to).length);
      this.mask = '0'.repeat(this._maxLength);
    }
  }, {
    key: 'validate',
    value: function validate(str) {
      var minstr = '';
      var maxstr = '';

      var _ref4 = str.match(/^(\D*)(\d*)(\D*)/) || [],
          _ref5 = slicedToArray(_ref4, 3),
          placeholder = _ref5[1],
          num = _ref5[2];

      if (num) {
        minstr = '0'.repeat(placeholder.length) + num;
        maxstr = '9'.repeat(placeholder.length) + num;
      }

      var firstNonZero = str.search(/[^0]/);
      if (firstNonZero === -1 && str.length <= this._matchFrom) return true;

      minstr = minstr.padEnd(this._maxLength, '0');
      maxstr = maxstr.padEnd(this._maxLength, '9');

      return this.from <= Number(maxstr) && Number(minstr) <= this.to;
    }
  }, {
    key: 'to',
    get: function get$$1() {
      return this._to;
    },
    set: function set$$1(to) {
      this._to = to;
      this._update();
    }
  }, {
    key: 'from',
    get: function get$$1() {
      return this._from;
    },
    set: function set$$1(from) {
      this._from = from;
      this._update();
    }
  }, {
    key: 'maxLength',
    get: function get$$1() {
      return this._maxLength;
    },
    set: function set$$1(maxLength) {
      this._maxLength = maxLength;
      this._update();
    }
  }, {
    key: '_matchFrom',
    get: function get$$1() {
      return this.maxLength - String(this.from).length;
    }
  }]);
  return RangeGroup;
}();

/** Pattern group that validates enum values */
function EnumGroup(enums) {
  return {
    mask: '*'.repeat(enums[0].length),
    validate: function validate(value, group, flags) {
      return enums.some(function (e) {
        return e.indexOf(group.unmaskedValue) >= 0;
      });
    }
  };
}

PatternGroup.Range = RangeGroup;
PatternGroup.Enum = EnumGroup;

var ChunksTailDetails = function () {
  function ChunksTailDetails(chunks) {
    classCallCheck(this, ChunksTailDetails);

    this.chunks = chunks;
  }

  createClass(ChunksTailDetails, [{
    key: 'value',
    get: function get$$1() {
      return this.chunks.map(function (c) {
        return c.value;
      }).join('');
    }
  }, {
    key: 'fromPos',
    get: function get$$1() {
      var firstChunk = this.chunks[0];
      return firstChunk && firstChunk.stop;
    }
  }, {
    key: 'toPos',
    get: function get$$1() {
      var lastChunk = this.chunks[this.chunks.length - 1];
      return lastChunk && lastChunk.stop;
    }
  }]);
  return ChunksTailDetails;
}();

/**
  Pattern mask
  @param {Object} opts
  @param {Object} opts.groups
  @param {Object} opts.definitions
  @param {string} opts.placeholderChar
  @param {boolean} opts.lazy
*/
var MaskedPattern = function (_Masked) {
  inherits(MaskedPattern, _Masked);

  // TODO mask type
  /** Single char for empty input */


  /** */
  function MaskedPattern() {
    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    classCallCheck(this, MaskedPattern);
    // TODO type $Shape<MaskedPatternOptions>={} does not work
    opts.definitions = _extends({}, PatternDefinition.DEFAULTS, opts.definitions);
    return possibleConstructorReturn(this, (MaskedPattern.__proto__ || Object.getPrototypeOf(MaskedPattern)).call(this, _extends({}, MaskedPattern.DEFAULTS, opts)));
  }

  /**
    @override
    @param {Object} opts
  */

  /** Show placeholder only when needed */

  /** */


  createClass(MaskedPattern, [{
    key: '_update',
    value: function _update() {
      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      opts.definitions = _extends({}, this.definitions, opts.definitions);
      get(MaskedPattern.prototype.__proto__ || Object.getPrototypeOf(MaskedPattern.prototype), '_update', this).call(this, opts);
      this._rebuildMask();
    }

    /** */

  }, {
    key: '_rebuildMask',
    value: function _rebuildMask() {
      var _this2 = this;

      var defs = this.definitions;
      this._charDefs = [];
      this._groupDefs = [];

      var pattern = this.mask;
      if (!pattern || !defs) return;

      var unmaskingBlock = false;
      var optionalBlock = false;
      var stopAlign = false;

      var _loop = function _loop(_i) {
        if (_this2.groups) {
          var p = pattern.slice(_i);
          var gNames = Object.keys(_this2.groups).filter(function (gName) {
            return p.indexOf(gName) === 0;
          });
          // order by key length
          gNames.sort(function (a, b) {
            return b.length - a.length;
          });
          // use group name with max length
          var gName = gNames[0];
          if (gName) {
            var group = _this2.groups[gName];
            _this2._groupDefs.push(new PatternGroup(_this2, {
              name: gName,
              offset: _this2._charDefs.length,
              mask: group.mask,
              validate: group.validate
            }));
            pattern = pattern.replace(gName, group.mask);
          }
        }

        var char = pattern[_i];
        var type = char in defs ? PatternDefinition.TYPES.INPUT : PatternDefinition.TYPES.FIXED;
        var unmasking = type === PatternDefinition.TYPES.INPUT || unmaskingBlock;
        var optional = type === PatternDefinition.TYPES.INPUT && optionalBlock;

        if (char === MaskedPattern.STOP_CHAR) {
          stopAlign = true;
          return 'continue';
        }

        if (char === '{' || char === '}') {
          unmaskingBlock = !unmaskingBlock;
          return 'continue';
        }

        if (char === '[' || char === ']') {
          optionalBlock = !optionalBlock;
          return 'continue';
        }

        if (char === MaskedPattern.ESCAPE_CHAR) {
          ++_i;
          char = pattern[_i];
          if (!char) return 'break';
          type = PatternDefinition.TYPES.FIXED;
        }

        _this2._charDefs.push(new PatternDefinition({
          char: char,
          type: type,
          optional: optional,
          stopAlign: stopAlign,
          unmasking: unmasking,
          mask: type === PatternDefinition.TYPES.INPUT ? defs[char] : function (value) {
            return value === char;
          }
        }));

        stopAlign = false;
        i = _i;
      };

      _loop2: for (var i = 0; i < pattern.length; ++i) {
        var _ret = _loop(i);

        switch (_ret) {
          case 'continue':
            continue;

          case 'break':
            break _loop2;}
      }
    }

    /**
      @override
    */

  }, {
    key: 'doValidate',
    value: function doValidate() {
      var _babelHelpers$get;

      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      return this._groupDefs.every(function (g$$1) {
        return g$$1.doValidate.apply(g$$1, toConsumableArray(args));
      }) && (_babelHelpers$get = get(MaskedPattern.prototype.__proto__ || Object.getPrototypeOf(MaskedPattern.prototype), 'doValidate', this)).call.apply(_babelHelpers$get, [this].concat(toConsumableArray(args)));
    }

    /**
      @override
    */

  }, {
    key: 'clone',
    value: function clone() {
      var _this3 = this;

      var m = new MaskedPattern(this);
      m._value = this.value;
      // $FlowFixMe
      m._charDefs.forEach(function (d, i) {
        return _extends(d, _this3._charDefs[i]);
      });
      // $FlowFixMe
      m._groupDefs.forEach(function (d, i) {
        return _extends(d, _this3._groupDefs[i]);
      });
      return m;
    }

    /**
      @override
    */

  }, {
    key: 'reset',
    value: function reset() {
      get(MaskedPattern.prototype.__proto__ || Object.getPrototypeOf(MaskedPattern.prototype), 'reset', this).call(this);
      this._charDefs.forEach(function (d) {
        delete d.isHollow;
      });
    }

    /**
      @override
    */

  }, {
    key: 'hiddenHollowsBefore',


    /** */
    value: function hiddenHollowsBefore(defIndex) {
      return this._charDefs.slice(0, defIndex).filter(function (d) {
        return d.isHiddenHollow;
      }).length;
    }

    /** Map definition index to position on view */

  }, {
    key: 'mapDefIndexToPos',
    value: function mapDefIndexToPos(defIndex) {
      return defIndex - this.hiddenHollowsBefore(defIndex);
    }

    /** Map position on view to definition index */

  }, {
    key: 'mapPosToDefIndex',
    value: function mapPosToDefIndex(pos) {
      var defIndex = pos;
      for (var di = 0; di < this._charDefs.length; ++di) {
        var def = this._charDefs[di];
        if (di >= defIndex) break;
        if (def.isHiddenHollow) ++defIndex;
      }
      return defIndex;
    }

    /**
      @override
    */

  }, {
    key: '_appendTail',


    /**
      @override
    */
    value: function _appendTail(tail) {
      var details = new ChangeDetails();
      if (tail) {
        details.aggregate(tail instanceof ChunksTailDetails ? this._appendChunks(tail.chunks, { tail: true }) : get(MaskedPattern.prototype.__proto__ || Object.getPrototypeOf(MaskedPattern.prototype), '_appendTail', this).call(this, tail));
      }
      return details.aggregate(this._appendPlaceholder());
    }

    /**
      @override
    */

  }, {
    key: '_append',
    value: function _append(str) {
      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      var oldValueLength = this.value.length;
      var rawInserted = '';
      var overflow = false;

      str = this.doPrepare(str, flags);

      for (var ci = 0, di = this.mapPosToDefIndex(this.value.length); ci < str.length;) {
        var ch = str[ci];
        var def = this._charDefs[di];

        // check overflow
        if (def == null) {
          overflow = true;
          break;
        }

        // reset
        def.isHollow = false;

        var resolved = void 0,
            skipped = void 0;
        var chres = conform(def.resolve(ch), ch);

        if (def.type === PatternDefinition.TYPES.INPUT) {
          if (chres) {
            this._value += chres;
            if (!this.doValidate()) {
              chres = '';
              this._value = this.value.slice(0, -1);
            }
          }

          resolved = !!chres;
          skipped = !chres && !def.optional;

          if (!chres) {
            if (!def.optional && !flags.input && !this.lazy) {
              this._value += this.placeholderChar;
              skipped = false;
            }
            if (!skipped) def.isHollow = true;
          } else {
            rawInserted += chres;
          }
        } else {
          this._value += def.char;
          resolved = chres && (def.unmasking || flags.input || flags.raw) && !flags.tail;
          def.isRawInput = resolved && (flags.raw || flags.input);
          if (def.isRawInput) rawInserted += def.char;
        }

        if (!skipped) ++di;
        if (resolved || skipped) ++ci;
      }

      return new ChangeDetails({
        inserted: this.value.slice(oldValueLength),
        rawInserted: rawInserted,
        overflow: overflow
      });
    }

    /** Appends chunks splitted by stop chars */

  }, {
    key: '_appendChunks',
    value: function _appendChunks(chunks) {
      var details = new ChangeDetails();

      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
        args[_key2 - 1] = arguments[_key2];
      }

      for (var ci = 0; ci < chunks.length; ++ci) {
        var _chunks$ci = chunks[ci],
            stop = _chunks$ci.stop,
            value = _chunks$ci.value;

        var fromDef = stop != null && this._charDefs[stop];
        // lets double check if stopAlign is here
        if (fromDef && fromDef.stopAlign) details.aggregate(this._appendPlaceholder(stop));
        if (details.aggregate(this._append.apply(this, [value].concat(toConsumableArray(args)))).overflow) break;
      }
      return details;
    }

    /**
      @override
    */

  }, {
    key: '_extractTail',
    value: function _extractTail() {
      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;

      return new ChunksTailDetails(this._extractInputChunks(fromPos, toPos));
    }

    /**
      @override
    */

  }, {
    key: 'extractInput',
    value: function extractInput() {
      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;
      var flags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

      if (fromPos === toPos) return '';

      var str = this.value;
      var input = '';

      var toDefIndex = this.mapPosToDefIndex(toPos);
      for (var ci = fromPos, di = this.mapPosToDefIndex(fromPos); ci < toPos && ci < str.length && di < toDefIndex; ++di) {
        var ch = str[ci];
        var def = this._charDefs[di];

        if (!def) break;
        if (def.isHiddenHollow) continue;

        if (def.isInput && !def.isHollow || flags.raw && !def.isInput && def.isRawInput) input += ch;
        ++ci;
      }
      return input;
    }

    /** Extracts chunks from input splitted by stop chars */

  }, {
    key: '_extractInputChunks',
    value: function _extractInputChunks() {
      var _this4 = this;

      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;

      if (fromPos === toPos) return [];

      var fromDefIndex = this.mapPosToDefIndex(fromPos);
      var toDefIndex = this.mapPosToDefIndex(toPos);
      var stopDefIndices = this._charDefs.map(function (d, i) {
        return [d, i];
      }).slice(fromDefIndex, toDefIndex).filter(function (_ref) {
        var _ref2 = slicedToArray(_ref, 1),
            d = _ref2[0];

        return d.stopAlign;
      }).map(function (_ref3) {
        var _ref4 = slicedToArray(_ref3, 2),
            i = _ref4[1];

        return i;
      });

      var stops = [fromDefIndex].concat(toConsumableArray(stopDefIndices), [toDefIndex]);

      return stops.map(function (s, i) {
        return {
          stop: stopDefIndices.indexOf(s) >= 0 ? s : null,

          value: _this4.extractInput(_this4.mapDefIndexToPos(s), _this4.mapDefIndexToPos(stops[++i]))
        };
      }).filter(function (_ref5) {
        var stop = _ref5.stop,
            value = _ref5.value;
        return stop != null || value;
      });
    }

    /** Appends placeholder depending on laziness */

  }, {
    key: '_appendPlaceholder',
    value: function _appendPlaceholder(toDefIndex) {
      var oldValueLength = this.value.length;
      var maxDefIndex = toDefIndex || this._charDefs.length;
      for (var di = this.mapPosToDefIndex(this.value.length); di < maxDefIndex; ++di) {
        var def = this._charDefs[di];
        if (def.isInput) def.isHollow = true;

        if (!this.lazy || toDefIndex) {
          this._value += !def.isInput && def.char != null ? def.char : !def.optional ? this.placeholderChar : '';
        }
      }
      return new ChangeDetails({
        inserted: this.value.slice(oldValueLength)
      });
    }

    /**
      @override
    */

  }, {
    key: 'remove',
    value: function remove() {
      var from = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      var count = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length - from;

      var fromDefIndex = this.mapPosToDefIndex(from);
      var toDefIndex = this.mapPosToDefIndex(from + count);
      this._charDefs.slice(fromDefIndex, toDefIndex).forEach(function (d) {
        return d.reset();
      });

      return get(MaskedPattern.prototype.__proto__ || Object.getPrototypeOf(MaskedPattern.prototype), 'remove', this).call(this, from, count);
    }

    /**
      @override
    */

  }, {
    key: 'nearestInputPos',
    value: function nearestInputPos(cursorPos) {
      var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DIRECTION.NONE;

      var step = direction || DIRECTION.RIGHT;

      var initialDefIndex = this.mapPosToDefIndex(cursorPos);
      var initialDef = this._charDefs[initialDefIndex];
      var di = initialDefIndex;

      var firstInputIndex = void 0,
          firstFilledInputIndex = void 0,
          firstVisibleHollowIndex = void 0,
          nextdi = void 0;

      // check if chars at right is acceptable for LEFT and NONE directions
      if (direction !== DIRECTION.RIGHT && (initialDef && initialDef.isInput ||
      // in none direction latest position is acceptable also
      direction === DIRECTION.NONE && cursorPos === this.value.length)) {
        firstInputIndex = initialDefIndex;
        if (initialDef && !initialDef.isHollow) firstFilledInputIndex = initialDefIndex;
      }

      if (firstFilledInputIndex == null && direction == DIRECTION.LEFT || firstInputIndex == null) {
        // search forward
        for (nextdi = indexInDirection(di, step); 0 <= nextdi && nextdi < this._charDefs.length; di += step, nextdi += step) {
          var nextDef = this._charDefs[nextdi];
          if (firstInputIndex == null && nextDef.isInput) {
            firstInputIndex = di;
            if (direction === DIRECTION.NONE) break;
          }
          if (firstVisibleHollowIndex == null && nextDef.isHollow && !nextDef.isHiddenHollow) firstVisibleHollowIndex = di;
          if (nextDef.isInput && !nextDef.isHollow) {
            firstFilledInputIndex = di;
            break;
          }
        }
      }

      // for lazy if has aligned left inside fixed and has came to the start - use start position
      if (direction === DIRECTION.LEFT && di === 0 && this.lazy && !this.extractInput() && (!initialDef || !initialDef.isInput)) firstInputIndex = 0;

      if (direction === DIRECTION.LEFT || firstInputIndex == null) {
        // search backward
        step = -step;
        var overflow = false;

        // find hollows only before initial pos
        for (nextdi = indexInDirection(di, step); 0 <= nextdi && nextdi < this._charDefs.length; di += step, nextdi += step) {
          var _nextDef = this._charDefs[nextdi];
          if (_nextDef.isInput) {
            firstInputIndex = di;
            if (_nextDef.isHollow && !_nextDef.isHiddenHollow) break;
          }

          // if hollow not found before start position - set `overflow`
          // and try to find just any input
          if (di === initialDefIndex) overflow = true;

          // first input found
          if (overflow && firstInputIndex != null) break;
        }

        // process overflow
        overflow = overflow || nextdi >= this._charDefs.length;
        if (overflow && firstInputIndex != null) di = firstInputIndex;
      } else if (firstFilledInputIndex == null) {
        // adjust index if delete at right and filled input not found at right
        di = firstVisibleHollowIndex != null ? firstVisibleHollowIndex : firstInputIndex;
      }

      return this.mapDefIndexToPos(di);
    }

    /** Get group by name */

  }, {
    key: 'group',
    value: function group(name) {
      return this.groupsByName(name)[0];
    }

    /** Get all groups by name */

  }, {
    key: 'groupsByName',
    value: function groupsByName(name) {
      return this._groupDefs.filter(function (g$$1) {
        return g$$1.name === name;
      });
    }
  }, {
    key: 'isComplete',
    get: function get$$1() {
      var _this5 = this;

      return !this._charDefs.some(function (d, i) {
        return d.isInput && !d.optional && (d.isHollow || !_this5.extractInput(i, i + 1));
      });
    }
  }, {
    key: 'unmaskedValue',
    get: function get$$1() {
      var str = this.value;
      var unmasked = '';

      for (var ci = 0, di = 0; ci < str.length && di < this._charDefs.length; ++di) {
        var ch = str[ci];
        var def = this._charDefs[di];

        if (def.isHiddenHollow) continue;
        if (def.unmasking && !def.isHollow) unmasked += ch;
        ++ci;
      }

      return unmasked;
    },
    set: function set$$1(unmaskedValue) {
      set(MaskedPattern.prototype.__proto__ || Object.getPrototypeOf(MaskedPattern.prototype), 'unmaskedValue', unmaskedValue, this);
    }
  }]);
  return MaskedPattern;
}(Masked);

MaskedPattern.DEFAULTS = {
  lazy: true,
  placeholderChar: '_'
};
MaskedPattern.STOP_CHAR = '`';
MaskedPattern.ESCAPE_CHAR = '\\';
MaskedPattern.Definition = PatternDefinition;
MaskedPattern.Group = PatternGroup;

/** Date mask */

var MaskedDate = function (_MaskedPattern) {
  inherits(MaskedDate, _MaskedPattern);

  /**
    @param {Object} opts
  */

  /** Start date */

  /** Format Date to string */
  function MaskedDate(opts) {
    classCallCheck(this, MaskedDate);
    return possibleConstructorReturn(this, (MaskedDate.__proto__ || Object.getPrototypeOf(MaskedDate)).call(this, _extends({}, MaskedDate.DEFAULTS, opts)));
  }

  /**
    @override
  */

  /** End date */

  /** Pattern mask for date according to {@link MaskedDate#format} */


  /** Parse string to Date */


  createClass(MaskedDate, [{
    key: '_update',
    value: function _update(opts) {
      if (opts.mask === Date) delete opts.mask;
      if (opts.pattern) {
        opts.mask = opts.pattern;
        delete opts.pattern;
      }

      var groups = opts.groups;
      opts.groups = _extends({}, MaskedDate.GET_DEFAULT_GROUPS());
      // adjust year group
      if (opts.min) opts.groups.Y.from = opts.min.getFullYear();
      if (opts.max) opts.groups.Y.to = opts.max.getFullYear();
      _extends(opts.groups, groups);

      get(MaskedDate.prototype.__proto__ || Object.getPrototypeOf(MaskedDate.prototype), '_update', this).call(this, opts);
    }

    /**
      @override
    */

  }, {
    key: 'doValidate',
    value: function doValidate() {
      var _babelHelpers$get;

      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      var valid = (_babelHelpers$get = get(MaskedDate.prototype.__proto__ || Object.getPrototypeOf(MaskedDate.prototype), 'doValidate', this)).call.apply(_babelHelpers$get, [this].concat(toConsumableArray(args)));
      var date = this.date;

      return valid && (!this.isComplete || this.isDateExist(this.value) && date && (this.min == null || this.min <= date) && (this.max == null || date <= this.max));
    }

    /** Checks if date is exists */

  }, {
    key: 'isDateExist',
    value: function isDateExist(str) {
      return this.format(this.parse(str)) === str;
    }

    /** Parsed Date */

  }, {
    key: 'date',
    get: function get$$1() {
      return this.isComplete ? this.parse(this.value) : null;
    },
    set: function set$$1(date) {
      this.value = this.format(date);
    }
  }]);
  return MaskedDate;
}(MaskedPattern);

MaskedDate.DEFAULTS = {
  pattern: 'd{.}`m{.}`Y',
  format: function format(date) {
    var day = String(date.getDate()).padStart(2, '0');
    var month = String(date.getMonth() + 1).padStart(2, '0');
    var year = date.getFullYear();

    return [day, month, year].join('.');
  },
  parse: function parse(str) {
    var _str$split = str.split('.'),
        _str$split2 = slicedToArray(_str$split, 3),
        day = _str$split2[0],
        month = _str$split2[1],
        year = _str$split2[2];

    return new Date(year, month - 1, day);
  }
};
MaskedDate.GET_DEFAULT_GROUPS = function () {
  return {
    d: new PatternGroup.Range([1, 31]),
    m: new PatternGroup.Range([1, 12]),
    Y: new PatternGroup.Range([1900, 9999])
  };
};

/**
  Generic element API to use with mask
  @interface
*/

/** Listens to element events and controls changes between element and {@link Masked} */
var InputMask = function () {

  /**
    @param {UIElement} el
    @param {Object} opts
  */

  /**
    View element
    @readonly
  */
  function InputMask(el, opts) {
    classCallCheck(this, InputMask);

    this.el = el;
    this.masked = createMask(opts);

    this._listeners = {};
    this._value = '';
    this._unmaskedValue = '';

    this._saveSelection = this._saveSelection.bind(this);
    this._onInput = this._onInput.bind(this);
    this._onChange = this._onChange.bind(this);
    this._onDrop = this._onDrop.bind(this);
    this.alignCursor = this.alignCursor.bind(this);
    this.alignCursorFriendly = this.alignCursorFriendly.bind(this);

    this._bindEvents();

    // refresh
    this.updateValue();
    this._onChange();
  }

  /** Read or update mask */


  /**
    Internal {@link Masked} model
    @readonly
  */


  createClass(InputMask, [{
    key: '_bindEvents',


    /**
      Starts listening to element events
      @protected
    */
    value: function _bindEvents() {
      this.el.addEventListener('keydown', this._saveSelection);
      this.el.addEventListener('input', this._onInput);
      this.el.addEventListener('drop', this._onDrop);
      this.el.addEventListener('click', this.alignCursorFriendly);
      this.el.addEventListener('change', this._onChange);
    }

    /**
      Stops listening to element events
      @protected
     */

  }, {
    key: '_unbindEvents',
    value: function _unbindEvents() {
      this.el.removeEventListener('keydown', this._saveSelection);
      this.el.removeEventListener('input', this._onInput);
      this.el.removeEventListener('drop', this._onDrop);
      this.el.removeEventListener('click', this.alignCursorFriendly);
      this.el.removeEventListener('change', this._onChange);
    }

    /**
      Fires custom event
      @protected
     */

  }, {
    key: '_fireEvent',
    value: function _fireEvent(ev) {
      var listeners = this._listeners[ev] || [];
      listeners.forEach(function (l) {
        return l();
      });
    }

    /**
      Current selection start
      @readonly
    */

  }, {
    key: '_saveSelection',


    /**
      Stores current selection
      @protected
    */
    value: function _saveSelection() /* ev */{
      if (this.value !== this.el.value) {
        console.warn('Uncontrolled input change, refresh mask manually!'); // eslint-disable-line no-console
      }
      this._selection = {
        start: this.selectionStart,
        end: this.cursorPos
      };
    }

    /** Syncronizes model value from view */

  }, {
    key: 'updateValue',
    value: function updateValue() {
      this.masked.value = this.el.value;
    }

    /** Syncronizes view from model value, fires change events */

  }, {
    key: 'updateControl',
    value: function updateControl() {
      var newUnmaskedValue = this.masked.unmaskedValue;
      var newValue = this.masked.value;
      var isChanged = this.unmaskedValue !== newUnmaskedValue || this.value !== newValue;

      this._unmaskedValue = newUnmaskedValue;
      this._value = newValue;

      if (this.el.value !== newValue) this.el.value = newValue;
      if (isChanged) this._fireChangeEvents();
    }

    /** Updates options with deep equal check, recreates @{link Masked} model if mask type changes */

  }, {
    key: 'updateOptions',
    value: function updateOptions(opts) {
      opts = _extends({}, opts); // clone
      if (opts.mask === Date && this.masked instanceof MaskedDate) delete opts.mask;

      // check if changed
      if (objectIncludes(this.masked, opts)) return;

      this.masked.updateOptions(opts);
      this.updateControl();
    }

    /** Updates cursor */

  }, {
    key: 'updateCursor',
    value: function updateCursor(cursorPos) {
      if (cursorPos == null) return;
      this.cursorPos = cursorPos;

      // also queue change cursor for mobile browsers
      this._delayUpdateCursor(cursorPos);
    }

    /**
      Delays cursor update to support mobile browsers
      @private
    */

  }, {
    key: '_delayUpdateCursor',
    value: function _delayUpdateCursor(cursorPos) {
      var _this = this;

      this._abortUpdateCursor();
      this._changingCursorPos = cursorPos;
      this._cursorChanging = setTimeout(function () {
        if (!_this.el) return; // if was destroyed
        _this.cursorPos = _this._changingCursorPos;
        _this._abortUpdateCursor();
      }, 10);
    }

    /**
      Fires custom events
      @protected
    */

  }, {
    key: '_fireChangeEvents',
    value: function _fireChangeEvents() {
      this._fireEvent('accept');
      if (this.masked.isComplete) this._fireEvent('complete');
    }

    /**
      Aborts delayed cursor update
      @private
    */

  }, {
    key: '_abortUpdateCursor',
    value: function _abortUpdateCursor() {
      if (this._cursorChanging) {
        clearTimeout(this._cursorChanging);
        delete this._cursorChanging;
      }
    }

    /** Aligns cursor to nearest available position */

  }, {
    key: 'alignCursor',
    value: function alignCursor() {
      this.cursorPos = this.masked.nearestInputPos(this.cursorPos, DIRECTION.LEFT);
    }

    /** Aligns cursor only if selection is empty */

  }, {
    key: 'alignCursorFriendly',
    value: function alignCursorFriendly() {
      if (this.selectionStart !== this.cursorPos) return;
      this.alignCursor();
    }

    /** Adds listener on custom event */

  }, {
    key: 'on',
    value: function on(ev, handler) {
      if (!this._listeners[ev]) this._listeners[ev] = [];
      this._listeners[ev].push(handler);
      return this;
    }

    /** Removes custom event listener */

  }, {
    key: 'off',
    value: function off(ev, handler) {
      if (!this._listeners[ev]) return;
      if (!handler) {
        delete this._listeners[ev];
        return;
      }
      var hIndex = this._listeners[ev].indexOf(handler);
      if (hIndex >= 0) this._listeners[ev].splice(hIndex, 1);
      return this;
    }

    /** Handles view input event */

  }, {
    key: '_onInput',
    value: function _onInput() {
      this._abortUpdateCursor();

      var details = new ActionDetails(
      // new state
      this.el.value, this.cursorPos,
      // old state
      this.value, this._selection);

      var offset = this.masked.splice(details.startChangePos, details.removed.length, details.inserted, details.removeDirection).offset;

      var cursorPos = this.masked.nearestInputPos(details.startChangePos + offset, details.removeDirection);

      this.updateControl();
      this.updateCursor(cursorPos);
    }

    /** Handles view change event and commits model value */

  }, {
    key: '_onChange',
    value: function _onChange() {
      if (this.value !== this.el.value) {
        this.updateValue();
      }
      this.masked.doCommit();
      this.updateControl();
    }

    /** Handles view drop event, prevents by default */

  }, {
    key: '_onDrop',
    value: function _onDrop(ev) {
      ev.preventDefault();
      ev.stopPropagation();
    }

    /** Unbind view events and removes element reference */

  }, {
    key: 'destroy',
    value: function destroy() {
      this._unbindEvents();
      // $FlowFixMe why not do so?
      this._listeners.length = 0;
      delete this.el;
    }
  }, {
    key: 'mask',
    get: function get$$1() {
      return this.masked.mask;
    },
    set: function set$$1(mask) {
      if (mask == null || mask === this.masked.mask) return;

      if (this.masked.constructor === maskedClass(mask)) {
        this.masked.mask = mask;
        return;
      }

      var masked = createMask({ mask: mask });
      masked.unmaskedValue = this.masked.unmaskedValue;
      this.masked = masked;
    }

    /** Raw value */

  }, {
    key: 'value',
    get: function get$$1() {
      return this._value;
    },
    set: function set$$1(str) {
      this.masked.value = str;
      this.updateControl();
      this.alignCursor();
    }

    /** Unmasked value */

  }, {
    key: 'unmaskedValue',
    get: function get$$1() {
      return this._unmaskedValue;
    },
    set: function set$$1(str) {
      this.masked.unmaskedValue = str;
      this.updateControl();
      this.alignCursor();
    }
  }, {
    key: 'selectionStart',
    get: function get$$1() {
      return this._cursorChanging ? this._changingCursorPos : this.el.selectionStart;
    }

    /** Current cursor position */

  }, {
    key: 'cursorPos',
    get: function get$$1() {
      return this._cursorChanging ? this._changingCursorPos : this.el.selectionEnd;
    },
    set: function set$$1(pos) {
      if (this.el !== document.activeElement) return;

      this.el.setSelectionRange(pos, pos);
      this._saveSelection();
    }
  }]);
  return InputMask;
}();

/**
  Number mask
  @param {Object} opts
  @param {string} opts.radix - Single char
  @param {string} opts.thousandsSeparator - Single char
  @param {Array<string>} opts.mapToRadix - Array of single chars
  @param {number} opts.min
  @param {number} opts.max
  @param {number} opts.scale - Digits after point
  @param {boolean} opts.signed - Allow negative
  @param {boolean} opts.normalizeZeros - Flag to remove leading and trailing zeros in the end of editing
  @param {boolean} opts.padFractionalZeros - Flag to pad trailing zeros after point in the end of editing
*/
var MaskedNumber = function (_Masked) {
  inherits(MaskedNumber, _Masked);

  /** Flag to remove leading and trailing zeros in the end of editing */

  /** Digits after point */

  /** */

  /** Single char */
  function MaskedNumber(opts) {
    classCallCheck(this, MaskedNumber);
    return possibleConstructorReturn(this, (MaskedNumber.__proto__ || Object.getPrototypeOf(MaskedNumber)).call(this, _extends({}, MaskedNumber.DEFAULTS, opts)));
  }

  /**
    @override
  */

  /** Flag to pad trailing zeros after point in the end of editing */

  /** */

  /** */

  /** Array of single chars */


  /** Single char */


  createClass(MaskedNumber, [{
    key: '_update',
    value: function _update(opts) {
      get(MaskedNumber.prototype.__proto__ || Object.getPrototypeOf(MaskedNumber.prototype), '_update', this).call(this, opts);
      this._updateRegExps();
    }

    /** */

  }, {
    key: '_updateRegExps',
    value: function _updateRegExps() {
      // use different regexp to process user input (more strict, input suffix) and tail shifting
      var start = '^';

      var midInput = '';
      var mid = '';
      if (this.allowNegative) {
        midInput += '([+|\\-]?|([+|\\-]?(0|([1-9]+\\d*))))';
        mid += '[+|\\-]?';
      } else {
        midInput += '(0|([1-9]+\\d*))';
      }
      mid += '\\d*';

      var end = (this.scale ? '(' + this.radix + '\\d{0,' + this.scale + '})?' : '') + '$';

      this._numberRegExpInput = new RegExp(start + midInput + end);
      this._numberRegExp = new RegExp(start + mid + end);
      this._mapToRadixRegExp = new RegExp('[' + this.mapToRadix.map(escapeRegExp).join('') + ']', 'g');
      this._thousandsSeparatorRegExp = new RegExp(escapeRegExp(this.thousandsSeparator), 'g');
    }

    /**
      @override
    */

  }, {
    key: '_extractTail',
    value: function _extractTail() {
      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;

      var tail = get(MaskedNumber.prototype.__proto__ || Object.getPrototypeOf(MaskedNumber.prototype), '_extractTail', this).call(this, fromPos, toPos);

      return _extends({}, tail, {
        value: this._removeThousandsSeparators(tail.value)
      });
    }

    /** */

  }, {
    key: '_removeThousandsSeparators',
    value: function _removeThousandsSeparators(value) {
      return value.replace(this._thousandsSeparatorRegExp, '');
    }

    /** */

  }, {
    key: '_insertThousandsSeparators',
    value: function _insertThousandsSeparators(value) {
      // https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript
      var parts = value.split(this.radix);
      parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, this.thousandsSeparator);
      return parts.join(this.radix);
    }

    /**
      @override
    */

  }, {
    key: 'doPrepare',
    value: function doPrepare(str) {
      var _babelHelpers$get;

      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        args[_key - 1] = arguments[_key];
      }

      return (_babelHelpers$get = get(MaskedNumber.prototype.__proto__ || Object.getPrototypeOf(MaskedNumber.prototype), 'doPrepare', this)).call.apply(_babelHelpers$get, [this, this._removeThousandsSeparators(str.replace(this._mapToRadixRegExp, this.radix))].concat(toConsumableArray(args)));
    }

    /**
      @override
    */

  }, {
    key: 'appendWithTail',
    value: function appendWithTail() {
      var _babelHelpers$get2;

      var previousValue = this.value;
      this._value = this._removeThousandsSeparators(this.value);
      var startChangePos = this.value.length;

      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }

      var appendDetails = (_babelHelpers$get2 = get(MaskedNumber.prototype.__proto__ || Object.getPrototypeOf(MaskedNumber.prototype), 'appendWithTail', this)).call.apply(_babelHelpers$get2, [this].concat(toConsumableArray(args)));
      this._value = this._insertThousandsSeparators(this.value);

      // calculate offsets after insert separators
      var beforeTailPos = startChangePos + appendDetails.inserted.length;
      for (var pos = 0; pos <= beforeTailPos; ++pos) {
        if (this.value[pos] === this.thousandsSeparator) {
          if (pos < startChangePos ||
          // check high bound
          // if separator is still there - consider it also
          pos === startChangePos && previousValue[pos] === this.thousandsSeparator) {
            ++startChangePos;
          }
          if (pos < beforeTailPos) ++beforeTailPos;
        }
      }

      // adjust details with separators
      appendDetails.rawInserted = appendDetails.inserted;
      appendDetails.inserted = this.value.slice(startChangePos, beforeTailPos);
      appendDetails.shift += startChangePos - previousValue.length;

      return appendDetails;
    }

    /**
      @override
    */

  }, {
    key: 'nearestInputPos',
    value: function nearestInputPos(cursorPos, direction) {
      if (!direction) return cursorPos;

      var nextPos = indexInDirection(cursorPos, direction);
      if (this.value[nextPos] === this.thousandsSeparator) cursorPos += direction;
      return cursorPos;
    }

    /**
      @override
    */

  }, {
    key: 'doValidate',
    value: function doValidate(flags) {
      var regexp = flags.input ? this._numberRegExpInput : this._numberRegExp;

      // validate as string
      var valid = regexp.test(this._removeThousandsSeparators(this.value));

      if (valid) {
        // validate as number
        var number = this.number;
        valid = valid && !isNaN(number) && (
        // check min bound for negative values
        this.min == null || this.min >= 0 || this.min <= this.number) && (
        // check max bound for positive values
        this.max == null || this.max <= 0 || this.number <= this.max);
      }

      return valid && get(MaskedNumber.prototype.__proto__ || Object.getPrototypeOf(MaskedNumber.prototype), 'doValidate', this).call(this, flags);
    }

    /**
      @override
    */

  }, {
    key: 'doCommit',
    value: function doCommit() {
      var number = this.number;
      var validnum = number;

      // check bounds
      if (this.min != null) validnum = Math.max(validnum, this.min);
      if (this.max != null) validnum = Math.min(validnum, this.max);

      if (validnum !== number) this.unmaskedValue = String(validnum);

      var formatted = this.value;

      if (this.normalizeZeros) formatted = this._normalizeZeros(formatted);
      if (this.padFractionalZeros) formatted = this._padFractionalZeros(formatted);

      this._value = formatted;
      get(MaskedNumber.prototype.__proto__ || Object.getPrototypeOf(MaskedNumber.prototype), 'doCommit', this).call(this);
    }

    /** */

  }, {
    key: '_normalizeZeros',
    value: function _normalizeZeros(value) {
      var parts = this._removeThousandsSeparators(value).split(this.radix);

      // remove leading zeros
      parts[0] = parts[0].replace(/^(\D*)(0*)(\d*)/, function (match, sign, zeros, num) {
        return sign + num;
      });
      // add leading zero
      if (value.length && !/\d$/.test(parts[0])) parts[0] = parts[0] + '0';

      if (parts.length > 1) {
        parts[1] = parts[1].replace(/0*$/, ''); // remove trailing zeros
        if (!parts[1].length) parts.length = 1; // remove fractional
      }

      return this._insertThousandsSeparators(parts.join(this.radix));
    }

    /** */

  }, {
    key: '_padFractionalZeros',
    value: function _padFractionalZeros(value) {
      if (!value) return value;

      var parts = value.split(this.radix);
      if (parts.length < 2) parts.push('');
      parts[1] = parts[1].padEnd(this.scale, '0');
      return parts.join(this.radix);
    }

    /**
      @override
    */

  }, {
    key: 'unmaskedValue',
    get: function get$$1() {
      return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix, '.');
    },
    set: function set$$1(unmaskedValue) {
      set(MaskedNumber.prototype.__proto__ || Object.getPrototypeOf(MaskedNumber.prototype), 'unmaskedValue', unmaskedValue.replace('.', this.radix), this);
    }

    /** Parsed Number */

  }, {
    key: 'number',
    get: function get$$1() {
      return Number(this.unmaskedValue);
    },
    set: function set$$1(number) {
      this.unmaskedValue = String(number);
    }

    /**
      Is negative allowed
      @readonly
    */

  }, {
    key: 'allowNegative',
    get: function get$$1() {
      return this.signed || this.min != null && this.min < 0 || this.max != null && this.max < 0;
    }
  }]);
  return MaskedNumber;
}(Masked);

MaskedNumber.DEFAULTS = {
  radix: ',',
  thousandsSeparator: '',
  mapToRadix: ['.'],
  scale: 2,
  signed: false,
  normalizeZeros: true,
  padFractionalZeros: false
};

/** Masking by RegExp */

var MaskedRegExp = function (_Masked) {
  inherits(MaskedRegExp, _Masked);

  function MaskedRegExp() {
    classCallCheck(this, MaskedRegExp);
    return possibleConstructorReturn(this, (MaskedRegExp.__proto__ || Object.getPrototypeOf(MaskedRegExp)).apply(this, arguments));
  }

  createClass(MaskedRegExp, [{
    key: '_update',

    /**
      @override
      @param {Object} opts
    */
    value: function _update(opts) {
      opts.validate = function (value) {
        return value.search(opts.mask) >= 0;
      };
      get(MaskedRegExp.prototype.__proto__ || Object.getPrototypeOf(MaskedRegExp.prototype), '_update', this).call(this, opts);
    }
  }]);
  return MaskedRegExp;
}(Masked);

/** Masking by custom Function */

var MaskedFunction = function (_Masked) {
  inherits(MaskedFunction, _Masked);

  function MaskedFunction() {
    classCallCheck(this, MaskedFunction);
    return possibleConstructorReturn(this, (MaskedFunction.__proto__ || Object.getPrototypeOf(MaskedFunction)).apply(this, arguments));
  }

  createClass(MaskedFunction, [{
    key: '_update',

    /**
      @override
      @param {Object} opts
    */
    value: function _update(opts) {
      opts.validate = opts.mask;
      get(MaskedFunction.prototype.__proto__ || Object.getPrototypeOf(MaskedFunction.prototype), '_update', this).call(this, opts);
    }
  }]);
  return MaskedFunction;
}(Masked);

/** Dynamic mask for choosing apropriate mask in run-time */
var MaskedDynamic = function (_Masked) {
  inherits(MaskedDynamic, _Masked);

  /**
    @param {Object} opts
  */

  /** Compliled {@link Masked} options */
  function MaskedDynamic(opts) {
    classCallCheck(this, MaskedDynamic);

    var _this = possibleConstructorReturn(this, (MaskedDynamic.__proto__ || Object.getPrototypeOf(MaskedDynamic)).call(this, _extends({}, MaskedDynamic.DEFAULTS, opts)));

    _this.currentMask = null;
    return _this;
  }

  /**
    @override
  */

  /** Chooses {@link Masked} depending on input value */

  /** Currently chosen mask */


  createClass(MaskedDynamic, [{
    key: '_update',
    value: function _update(opts) {
      get(MaskedDynamic.prototype.__proto__ || Object.getPrototypeOf(MaskedDynamic.prototype), '_update', this).call(this, opts);
      // mask could be totally dynamic with only `dispatch` option
      this.compiledMasks = Array.isArray(opts.mask) ? opts.mask.map(function (m) {
        return createMask(m);
      }) : [];
    }

    /**
      @override
    */

  }, {
    key: '_append',
    value: function _append(str) {
      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        args[_key - 1] = arguments[_key];
      }

      str = this.doPrepare.apply(this, [str].concat(toConsumableArray(args)));

      var details = this._applyDispatch.apply(this, [str].concat(toConsumableArray(args)));

      if (this.currentMask) {
        var _currentMask;

        details.aggregate((_currentMask = this.currentMask)._append.apply(_currentMask, [str].concat(toConsumableArray(args))));
      }

      return details;
    }
  }, {
    key: '_applyDispatch',
    value: function _applyDispatch() {
      var appended = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';

      var oldValueLength = this.value.length;
      var inputValue = this.rawInputValue;
      var oldMask = this.currentMask;
      var details = new ChangeDetails();

      // dispatch SHOULD NOT modify mask

      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
        args[_key2 - 1] = arguments[_key2];
      }

      this.currentMask = this.doDispatch.apply(this, [appended].concat(toConsumableArray(args)));

      // restore state after dispatch
      if (this.currentMask && this.currentMask !== oldMask) {
        // if mask changed reapply input
        this.currentMask.reset();
        // $FlowFixMe - it's ok, we don't change current mask
        this.currentMask._append(inputValue, { raw: true });
        details.shift = this.value.length - oldValueLength;
      }

      return details;
    }

    /**
      @override
    */

  }, {
    key: 'doDispatch',
    value: function doDispatch(appended) {
      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      return this.dispatch(appended, this, flags);
    }

    /**
      @override
    */

  }, {
    key: 'clone',
    value: function clone() {
      var m = new MaskedDynamic(this);
      m._value = this.value;

      // try to keep reference to compiled masks
      var currentMaskIndex = this.compiledMasks.indexOf(this.currentMask);
      if (this.currentMask) {
        m.currentMask = currentMaskIndex >= 0 ? m.compiledMasks[currentMaskIndex].assign(this.currentMask) : this.currentMask.clone();
      }

      return m;
    }

    /**
      @override
    */

  }, {
    key: 'reset',
    value: function reset() {
      if (this.currentMask) this.currentMask.reset();
      this.compiledMasks.forEach(function (cm) {
        return cm.reset();
      });
    }

    /**
      @override
    */

  }, {
    key: 'remove',


    /**
      @override
    */
    value: function remove() {
      var details = new ChangeDetails();
      if (this.currentMask) {
        var _currentMask2;

        details.aggregate((_currentMask2 = this.currentMask).remove.apply(_currentMask2, arguments))
        // update with dispatch
        .aggregate(this._applyDispatch());
      }

      return details;
    }

    /**
      @override
    */

  }, {
    key: 'extractInput',
    value: function extractInput() {
      var _currentMask3;

      return this.currentMask ? (_currentMask3 = this.currentMask).extractInput.apply(_currentMask3, arguments) : '';
    }

    /**
      @override
    */

  }, {
    key: '_extractTail',
    value: function _extractTail() {
      var _currentMask4, _babelHelpers$get;

      for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        args[_key3] = arguments[_key3];
      }

      return this.currentMask ? (_currentMask4 = this.currentMask)._extractTail.apply(_currentMask4, toConsumableArray(args)) : (_babelHelpers$get = get(MaskedDynamic.prototype.__proto__ || Object.getPrototypeOf(MaskedDynamic.prototype), '_extractTail', this)).call.apply(_babelHelpers$get, [this].concat(toConsumableArray(args)));
    }

    /**
      @override
    */

  }, {
    key: '_appendTail',
    value: function _appendTail(tail) {
      var details = new ChangeDetails();
      if (tail) details.aggregate(this._applyDispatch(tail.value));

      return details.aggregate(this.currentMask ? this.currentMask._appendTail(tail) : get(MaskedDynamic.prototype.__proto__ || Object.getPrototypeOf(MaskedDynamic.prototype), '_appendTail', this).call(this, tail));
    }

    /**
      @override
    */

  }, {
    key: 'doCommit',
    value: function doCommit() {
      if (this.currentMask) this.currentMask.doCommit();
      get(MaskedDynamic.prototype.__proto__ || Object.getPrototypeOf(MaskedDynamic.prototype), 'doCommit', this).call(this);
    }

    /**
      @override
    */

  }, {
    key: 'nearestInputPos',
    value: function nearestInputPos() {
      var _currentMask5, _babelHelpers$get2;

      for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
        args[_key4] = arguments[_key4];
      }

      return this.currentMask ? (_currentMask5 = this.currentMask).nearestInputPos.apply(_currentMask5, toConsumableArray(args)) : (_babelHelpers$get2 = get(MaskedDynamic.prototype.__proto__ || Object.getPrototypeOf(MaskedDynamic.prototype), 'nearestInputPos', this)).call.apply(_babelHelpers$get2, [this].concat(toConsumableArray(args)));
    }
  }, {
    key: 'value',
    get: function get$$1() {
      return this.currentMask ? this.currentMask.value : '';
    },
    set: function set$$1(value) {
      set(MaskedDynamic.prototype.__proto__ || Object.getPrototypeOf(MaskedDynamic.prototype), 'value', value, this);
    }

    /**
      @override
    */

  }, {
    key: 'unmaskedValue',
    get: function get$$1() {
      return this.currentMask ? this.currentMask.unmaskedValue : '';
    },
    set: function set$$1(unmaskedValue) {
      set(MaskedDynamic.prototype.__proto__ || Object.getPrototypeOf(MaskedDynamic.prototype), 'unmaskedValue', unmaskedValue, this);
    }

    /**
      @override
    */

  }, {
    key: 'isComplete',
    get: function get$$1() {
      return !!this.currentMask && this.currentMask.isComplete;
    }
  }]);
  return MaskedDynamic;
}(Masked);

MaskedDynamic.DEFAULTS = {
  dispatch: function dispatch(appended, masked, flags) {
    if (!masked.compiledMasks.length) return;

    var inputValue = masked.rawInputValue;

    // simulate input
    var inputs = masked.compiledMasks.map(function (cm, index) {
      var m = cm.clone();
      m.rawInputValue = inputValue;
      m._append(appended, flags);

      return { value: m.rawInputValue.length, index: index };
    });

    // pop masks with longer values first
    inputs.sort(function (i1, i2) {
      return i2.value - i1.value;
    });

    return masked.compiledMasks[inputs[0].index];
  }
};

/**
 * Applies mask on element.
 * @constructor
 * @param {HTMLInput|UIElement} el - Element to apply mask
 * @param {Object} opts - Custom mask options
 * @return {InputMask}
 */
function IMask(el) {
  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  // currently available only for input-like elements
  return new InputMask(el, opts);
}

/** {@link InputMask} */
IMask.InputMask = InputMask;

/** {@link Masked} */
IMask.Masked = Masked;
/** {@link MaskedPattern} */
IMask.MaskedPattern = MaskedPattern;
/** {@link MaskedNumber} */
IMask.MaskedNumber = MaskedNumber;
/** {@link MaskedDate} */
IMask.MaskedDate = MaskedDate;
/** {@link MaskedRegExp} */
IMask.MaskedRegExp = MaskedRegExp;
/** {@link MaskedFunction} */
IMask.MaskedFunction = MaskedFunction;
/** {@link MaskedDynamic} */
IMask.MaskedDynamic = MaskedDynamic;
/** {@link createMask} */
IMask.createMask = createMask;

g.IMask = IMask;

return IMask;

})));
//# sourceMappingURL=imask.js.map

/*!
 * Isotope PACKAGED v3.0.5
 *
 * Licensed GPLv3 for open source use
 * or Isotope Commercial License for commercial use
 *
 * https://isotope.metafizzy.co
 * Copyright 2017 Metafizzy
 */

!function(t,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,function(t,e){"use strict";function i(i,s,a){function u(t,e,o){var n,s="$()."+i+'("'+e+'")';return t.each(function(t,u){var h=a.data(u,i);if(!h)return void r(i+" not initialized. Cannot call methods, i.e. "+s);var d=h[e];if(!d||"_"==e.charAt(0))return void r(s+" is not a valid method");var l=d.apply(h,o);n=void 0===n?l:n}),void 0!==n?n:t}function h(t,e){t.each(function(t,o){var n=a.data(o,i);n?(n.option(e),n._init()):(n=new s(o,e),a.data(o,i,n))})}a=a||e||t.jQuery,a&&(s.prototype.option||(s.prototype.option=function(t){a.isPlainObject(t)&&(this.options=a.extend(!0,this.options,t))}),a.fn[i]=function(t){if("string"==typeof t){var e=n.call(arguments,1);return u(this,t,e)}return h(this,t),this},o(a))}function o(t){!t||t&&t.bridget||(t.bridget=i)}var n=Array.prototype.slice,s=t.console,r="undefined"==typeof s?function(){}:function(t){s.error(t)};return o(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},o=i[t]=i[t]||[];return o.indexOf(e)==-1&&o.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},o=i[t]=i[t]||{};return o[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var o=i.indexOf(e);return o!=-1&&i.splice(o,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var o=this._onceEvents&&this._onceEvents[t],n=0;n<i.length;n++){var s=i[n],r=o&&o[s];r&&(this.off(t,s),delete o[s]),s.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("get-size/get-size",[],function(){return e()}):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function t(t){var e=parseFloat(t),i=t.indexOf("%")==-1&&!isNaN(e);return i&&e}function e(){}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<h;e++){var i=u[e];t[i]=0}return t}function o(t){var e=getComputedStyle(t);return e||a("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),e}function n(){if(!d){d=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(e);var n=o(e);s.isBoxSizeOuter=r=200==t(n.width),i.removeChild(e)}}function s(e){if(n(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var s=o(e);if("none"==s.display)return i();var a={};a.width=e.offsetWidth,a.height=e.offsetHeight;for(var d=a.isBorderBox="border-box"==s.boxSizing,l=0;l<h;l++){var f=u[l],c=s[f],m=parseFloat(c);a[f]=isNaN(m)?0:m}var p=a.paddingLeft+a.paddingRight,y=a.paddingTop+a.paddingBottom,g=a.marginLeft+a.marginRight,v=a.marginTop+a.marginBottom,_=a.borderLeftWidth+a.borderRightWidth,I=a.borderTopWidth+a.borderBottomWidth,z=d&&r,x=t(s.width);x!==!1&&(a.width=x+(z?0:p+_));var S=t(s.height);return S!==!1&&(a.height=S+(z?0:y+I)),a.innerWidth=a.width-(p+_),a.innerHeight=a.height-(y+I),a.outerWidth=a.width+g,a.outerHeight=a.height+v,a}}var r,a="undefined"==typeof console?e:function(t){console.error(t)},u=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],h=u.length,d=!1;return s}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var o=e[i],n=o+"MatchesSelector";if(t[n])return n}}();return function(e,i){return e[t](i)}}),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,function(t,e){var i={};i.extend=function(t,e){for(var i in e)t[i]=e[i];return t},i.modulo=function(t,e){return(t%e+e)%e},i.makeArray=function(t){var e=[];if(Array.isArray(t))e=t;else if(t&&"object"==typeof t&&"number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e},i.removeFrom=function(t,e){var i=t.indexOf(e);i!=-1&&t.splice(i,1)},i.getParent=function(t,i){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,o){t=i.makeArray(t);var n=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!o)return void n.push(t);e(t,o)&&n.push(t);for(var i=t.querySelectorAll(o),s=0;s<i.length;s++)n.push(i[s])}}),n},i.debounceMethod=function(t,e,i){var o=t.prototype[e],n=e+"Timeout";t.prototype[e]=function(){var t=this[n];t&&clearTimeout(t);var e=arguments,s=this;this[n]=setTimeout(function(){o.apply(s,e),delete s[n]},i||100)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var o=t.console;return i.htmlInit=function(e,n){i.docReady(function(){var s=i.toDashed(n),r="data-"+s,a=document.querySelectorAll("["+r+"]"),u=document.querySelectorAll(".js-"+s),h=i.makeArray(a).concat(i.makeArray(u)),d=r+"-options",l=t.jQuery;h.forEach(function(t){var i,s=t.getAttribute(r)||t.getAttribute(d);try{i=s&&JSON.parse(s)}catch(a){return void(o&&o.error("Error parsing "+r+" on "+t.className+": "+a))}var u=new e(t,i);l&&l.data(t,n,u)})})},i}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){"use strict";function i(t){for(var e in t)return!1;return e=null,!0}function o(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}function n(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}var s=document.documentElement.style,r="string"==typeof s.transition?"transition":"WebkitTransition",a="string"==typeof s.transform?"transform":"WebkitTransform",u={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[r],h={transform:a,transition:r,transitionDuration:r+"Duration",transitionProperty:r+"Property",transitionDelay:r+"Delay"},d=o.prototype=Object.create(t.prototype);d.constructor=o,d._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},d.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},d.getSize=function(){this.size=e(this.element)},d.css=function(t){var e=this.element.style;for(var i in t){var o=h[i]||i;e[o]=t[i]}},d.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),o=t[e?"left":"right"],n=t[i?"top":"bottom"],s=this.layout.size,r=o.indexOf("%")!=-1?parseFloat(o)/100*s.width:parseInt(o,10),a=n.indexOf("%")!=-1?parseFloat(n)/100*s.height:parseInt(n,10);r=isNaN(r)?0:r,a=isNaN(a)?0:a,r-=e?s.paddingLeft:s.paddingRight,a-=i?s.paddingTop:s.paddingBottom,this.position.x=r,this.position.y=a},d.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),o=this.layout._getOption("originTop"),n=i?"paddingLeft":"paddingRight",s=i?"left":"right",r=i?"right":"left",a=this.position.x+t[n];e[s]=this.getXValue(a),e[r]="";var u=o?"paddingTop":"paddingBottom",h=o?"top":"bottom",d=o?"bottom":"top",l=this.position.y+t[u];e[h]=this.getYValue(l),e[d]="",this.css(e),this.emitEvent("layout",[this])},d.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},d.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},d._transitionTo=function(t,e){this.getPosition();var i=this.position.x,o=this.position.y,n=parseInt(t,10),s=parseInt(e,10),r=n===this.position.x&&s===this.position.y;if(this.setPosition(t,e),r&&!this.isTransitioning)return void this.layoutPosition();var a=t-i,u=e-o,h={};h.transform=this.getTranslate(a,u),this.transition({to:h,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},d.getTranslate=function(t,e){var i=this.layout._getOption("originLeft"),o=this.layout._getOption("originTop");return t=i?t:-t,e=o?e:-e,"translate3d("+t+"px, "+e+"px, 0)"},d.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},d.moveTo=d._transitionTo,d.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},d._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},d.transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);var o=this.element.offsetHeight;o=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var l="opacity,"+n(a);d.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;t="number"==typeof t?t+"ms":t,this.css({transitionProperty:l,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(u,this,!1)}},d.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},d.onotransitionend=function(t){this.ontransitionend(t)};var f={"-webkit-transform":"transform"};d.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,o=f[t.propertyName]||t.propertyName;if(delete e.ingProperties[o],i(e.ingProperties)&&this.disableTransition(),o in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[o]),o in e.onEnd){var n=e.onEnd[o];n.call(this),delete e.onEnd[o]}this.emitEvent("transitionEnd",[this])}},d.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(u,this,!1),this.isTransitioning=!1},d._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var c={transitionProperty:"",transitionDuration:"",transitionDelay:""};return d.removeTransitionStyles=function(){this.css(c)},d.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},d.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},d.remove=function(){return r&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},d.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={},i=this.getHideRevealTransitionEndProperty("visibleStyle");e[i]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},d.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},d.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var i in e)return i},d.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={},i=this.getHideRevealTransitionEndProperty("hiddenStyle");e[i]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},d.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},d.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},o}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(i,o,n,s){return e(t,i,o,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):t.Outlayer=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)}(window,function(t,e,i,o,n){"use strict";function s(t,e){var i=o.getQueryElement(t);if(!i)return void(u&&u.error("Bad element for "+this.constructor.namespace+": "+(i||t)));this.element=i,h&&(this.$element=h(this.element)),this.options=o.extend({},this.constructor.defaults),this.option(e);var n=++l;this.element.outlayerGUID=n,f[n]=this,this._create();var s=this._getOption("initLayout");s&&this.layout()}function r(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}function a(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),i=e&&e[1],o=e&&e[2];if(!i.length)return 0;i=parseFloat(i);var n=m[o]||1;return i*n}var u=t.console,h=t.jQuery,d=function(){},l=0,f={};s.namespace="outlayer",s.Item=n,s.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var c=s.prototype;o.extend(c,e.prototype),c.option=function(t){o.extend(this.options,t)},c._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},s.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},c._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),o.extend(this.element.style,this.options.containerStyle);var t=this._getOption("resize");t&&this.bindResize()},c.reloadItems=function(){this.items=this._itemize(this.element.children)},c._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,o=[],n=0;n<e.length;n++){var s=e[n],r=new i(s,this);o.push(r)}return o},c._filterFindItemElements=function(t){return o.filterFindElements(t,this.options.itemSelector)},c.getItemElements=function(){return this.items.map(function(t){return t.element})},c.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},c._init=c.layout,c._resetLayout=function(){this.getSize()},c.getSize=function(){this.size=i(this.element)},c._getMeasurement=function(t,e){var o,n=this.options[t];n?("string"==typeof n?o=this.element.querySelector(n):n instanceof HTMLElement&&(o=n),this[t]=o?i(o)[e]:n):this[t]=0},c.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},c._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},c._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var i=[];t.forEach(function(t){var o=this._getItemLayoutPosition(t);o.item=t,o.isInstant=e||t.isLayoutInstant,i.push(o)},this),this._processLayoutQueue(i)}},c._getItemLayoutPosition=function(){return{x:0,y:0}},c._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},c.updateStagger=function(){var t=this.options.stagger;return null===t||void 0===t?void(this.stagger=0):(this.stagger=a(t),this.stagger)},c._positionItem=function(t,e,i,o,n){o?t.goTo(e,i):(t.stagger(n*this.stagger),t.moveTo(e,i))},c._postLayout=function(){this.resizeContainer()},c.resizeContainer=function(){var t=this._getOption("resizeContainer");if(t){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},c._getContainerSize=d,c._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},c._emitCompleteOnItems=function(t,e){function i(){n.dispatchEvent(t+"Complete",null,[e])}function o(){r++,r==s&&i()}var n=this,s=e.length;if(!e||!s)return void i();var r=0;e.forEach(function(e){e.once(t,o)})},c.dispatchEvent=function(t,e,i){var o=e?[e].concat(i):i;if(this.emitEvent(t,o),h)if(this.$element=this.$element||h(this.element),e){var n=h.Event(e);n.type=t,this.$element.trigger(n,i)}else this.$element.trigger(t,i)},c.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},c.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},c.stamp=function(t){t=this._find(t),t&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},c.unstamp=function(t){t=this._find(t),t&&t.forEach(function(t){o.removeFrom(this.stamps,t),this.unignore(t)},this)},c._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),t=o.makeArray(t)},c._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},c._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},c._manageStamp=d,c._getElementOffset=function(t){var e=t.getBoundingClientRect(),o=this._boundingRect,n=i(t),s={left:e.left-o.left-n.marginLeft,top:e.top-o.top-n.marginTop,right:o.right-e.right-n.marginRight,bottom:o.bottom-e.bottom-n.marginBottom};return s},c.handleEvent=o.handleEvent,c.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},c.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},c.onresize=function(){this.resize()},o.debounceMethod(s,"onresize",100),c.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},c.needsResizeLayout=function(){var t=i(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},c.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},c.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},c.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},c.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.reveal()})}},c.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.hide()})}},c.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},c.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},c.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},c.getItems=function(t){t=o.makeArray(t);var e=[];return t.forEach(function(t){var i=this.getItem(t);i&&e.push(i)},this),e},c.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(t){t.remove(),o.removeFrom(this.items,t)},this)},c.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();var e=this.element.outlayerGUID;delete f[e],delete this.element.outlayerGUID,h&&h.removeData(this.element,this.constructor.namespace)},s.data=function(t){t=o.getQueryElement(t);var e=t&&t.outlayerGUID;return e&&f[e]},s.create=function(t,e){var i=r(s);return i.defaults=o.extend({},s.defaults),o.extend(i.defaults,e),i.compatOptions=o.extend({},s.compatOptions),i.namespace=t,i.data=s.data,i.Item=r(n),o.htmlInit(i,t),h&&h.bridget&&h.bridget(t,i),i};var m={ms:1,s:1e3};return s.Item=n,s}),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/item",["outlayer/outlayer"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.Item=e(t.Outlayer))}(window,function(t){"use strict";function e(){t.Item.apply(this,arguments)}var i=e.prototype=Object.create(t.Item.prototype),o=i._create;i._create=function(){this.id=this.layout.itemGUID++,o.call(this),this.sortData={}},i.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var t=this.layout.options.getSortData,e=this.layout._sorters;for(var i in t){var o=e[i];this.sortData[i]=o(this.element,this)}}};var n=i.destroy;return i.destroy=function(){n.apply(this,arguments),this.css({display:""})},e}),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-mode",["get-size/get-size","outlayer/outlayer"],e):"object"==typeof module&&module.exports?module.exports=e(require("get-size"),require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.LayoutMode=e(t.getSize,t.Outlayer))}(window,function(t,e){"use strict";function i(t){this.isotope=t,t&&(this.options=t.options[this.namespace],this.element=t.element,this.items=t.filteredItems,this.size=t.size)}var o=i.prototype,n=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout","_getOption"];return n.forEach(function(t){o[t]=function(){return e.prototype[t].apply(this.isotope,arguments)}}),o.needsVerticalResizeLayout=function(){var e=t(this.isotope.element),i=this.isotope.size&&e;return i&&e.innerHeight!=this.isotope.size.innerHeight},o._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},o.getColumnWidth=function(){this.getSegmentSize("column","Width")},o.getRowHeight=function(){this.getSegmentSize("row","Height")},o.getSegmentSize=function(t,e){var i=t+e,o="outer"+e;if(this._getMeasurement(i,o),!this[i]){var n=this.getFirstItemSize();this[i]=n&&n[o]||this.isotope.size["inner"+e]}},o.getFirstItemSize=function(){var e=this.isotope.filteredItems[0];return e&&e.element&&t(e.element)},o.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},o.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},i.modes={},i.create=function(t,e){function n(){i.apply(this,arguments)}return n.prototype=Object.create(o),n.prototype.constructor=n,e&&(n.options=e),n.prototype.namespace=t,i.modes[t]=n,n},i}),function(t,e){"function"==typeof define&&define.amd?define("masonry-layout/masonry",["outlayer/outlayer","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,e){var i=t.create("masonry");i.compatOptions.fitWidth="isFitWidth";var o=i.prototype;return o._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},o.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}var o=this.columnWidth+=this.gutter,n=this.containerWidth+this.gutter,s=n/o,r=o-n%o,a=r&&r<1?"round":"floor";s=Math[a](s),this.cols=Math.max(s,1)},o.getContainerWidth=function(){var t=this._getOption("fitWidth"),i=t?this.element.parentNode:this.element,o=e(i);this.containerWidth=o&&o.innerWidth},o._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,i=e&&e<1?"round":"ceil",o=Math[i](t.size.outerWidth/this.columnWidth);o=Math.min(o,this.cols);for(var n=this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition",s=this[n](o,t),r={x:this.columnWidth*s.col,y:s.y},a=s.y+t.size.outerHeight,u=o+s.col,h=s.col;h<u;h++)this.colYs[h]=a;return r},o._getTopColPosition=function(t){var e=this._getTopColGroup(t),i=Math.min.apply(Math,e);return{col:e.indexOf(i),y:i}},o._getTopColGroup=function(t){if(t<2)return this.colYs;for(var e=[],i=this.cols+1-t,o=0;o<i;o++)e[o]=this._getColGroupY(o,t);return e},o._getColGroupY=function(t,e){if(e<2)return this.colYs[t];var i=this.colYs.slice(t,t+e);return Math.max.apply(Math,i)},o._getHorizontalColPosition=function(t,e){var i=this.horizontalColIndex%this.cols,o=t>1&&i+t>this.cols;i=o?0:i;var n=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=n?i+t:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,t)}},o._manageStamp=function(t){var i=e(t),o=this._getElementOffset(t),n=this._getOption("originLeft"),s=n?o.left:o.right,r=s+i.outerWidth,a=Math.floor(s/this.columnWidth);a=Math.max(0,a);var u=Math.floor(r/this.columnWidth);u-=r%this.columnWidth?0:1,u=Math.min(this.cols-1,u);for(var h=this._getOption("originTop"),d=(h?o.top:o.bottom)+i.outerHeight,l=a;l<=u;l++)this.colYs[l]=Math.max(d,this.colYs[l])},o._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},o._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},o.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},i}),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/masonry",["../layout-mode","masonry-layout/masonry"],e):"object"==typeof module&&module.exports?module.exports=e(require("../layout-mode"),require("masonry-layout")):e(t.Isotope.LayoutMode,t.Masonry)}(window,function(t,e){"use strict";var i=t.create("masonry"),o=i.prototype,n={_getElementOffset:!0,layout:!0,_getMeasurement:!0};for(var s in e.prototype)n[s]||(o[s]=e.prototype[s]);var r=o.measureColumns;o.measureColumns=function(){this.items=this.isotope.filteredItems,r.call(this)};var a=o._getOption;return o._getOption=function(t){return"fitWidth"==t?void 0!==this.options.isFitWidth?this.options.isFitWidth:this.options.fitWidth:a.apply(this.isotope,arguments)},i}),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/fit-rows",["../layout-mode"],e):"object"==typeof exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window,function(t){"use strict";var e=t.create("fitRows"),i=e.prototype;return i._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},i._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth+this.gutter,i=this.isotope.size.innerWidth+this.gutter;0!==this.x&&e+this.x>i&&(this.x=0,this.y=this.maxY);var o={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+t.size.outerHeight),this.x+=e,o},i._getContainerSize=function(){return{height:this.maxY}},e}),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/vertical",["../layout-mode"],e):"object"==typeof module&&module.exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window,function(t){"use strict";var e=t.create("vertical",{horizontalAlignment:0}),i=e.prototype;return i._resetLayout=function(){this.y=0},i._getItemLayoutPosition=function(t){t.getSize();var e=(this.isotope.size.innerWidth-t.size.outerWidth)*this.options.horizontalAlignment,i=this.y;return this.y+=t.size.outerHeight,{x:e,y:i}},i._getContainerSize=function(){return{height:this.y}},e}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","desandro-matches-selector/matches-selector","fizzy-ui-utils/utils","isotope-layout/js/item","isotope-layout/js/layout-mode","isotope-layout/js/layout-modes/masonry","isotope-layout/js/layout-modes/fit-rows","isotope-layout/js/layout-modes/vertical"],function(i,o,n,s,r,a){return e(t,i,o,n,s,r,a)}):"object"==typeof module&&module.exports?module.exports=e(t,require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("fizzy-ui-utils"),require("isotope-layout/js/item"),require("isotope-layout/js/layout-mode"),require("isotope-layout/js/layout-modes/masonry"),require("isotope-layout/js/layout-modes/fit-rows"),require("isotope-layout/js/layout-modes/vertical")):t.Isotope=e(t,t.Outlayer,t.getSize,t.matchesSelector,t.fizzyUIUtils,t.Isotope.Item,t.Isotope.LayoutMode)}(window,function(t,e,i,o,n,s,r){function a(t,e){return function(i,o){for(var n=0;n<t.length;n++){var s=t[n],r=i.sortData[s],a=o.sortData[s];if(r>a||r<a){var u=void 0!==e[s]?e[s]:e,h=u?1:-1;return(r>a?1:-1)*h}}return 0}}var u=t.jQuery,h=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/g,"")},d=e.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});d.Item=s,d.LayoutMode=r;var l=d.prototype;l._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),e.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var t in r.modes)this._initLayoutMode(t)},l.reloadItems=function(){this.itemGUID=0,e.prototype.reloadItems.call(this)},l._itemize=function(){for(var t=e.prototype._itemize.apply(this,arguments),i=0;i<t.length;i++){var o=t[i];o.id=this.itemGUID++}return this._updateItemsSortData(t),t},l._initLayoutMode=function(t){var e=r.modes[t],i=this.options[t]||{};this.options[t]=e.options?n.extend(e.options,i):i,this.modes[t]=new e(this)},l.layout=function(){return!this._isLayoutInited&&this._getOption("initLayout")?void this.arrange():void this._layout()},l._layout=function(){var t=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,t),this._isLayoutInited=!0},l.arrange=function(t){this.option(t),this._getIsInstant();var e=this._filter(this.items);this.filteredItems=e.matches,this._bindArrangeComplete(),this._isInstant?this._noTransition(this._hideReveal,[e]):this._hideReveal(e),this._sort(),this._layout()},l._init=l.arrange,l._hideReveal=function(t){this.reveal(t.needReveal),this.hide(t.needHide)},l._getIsInstant=function(){var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;return this._isInstant=e,e},l._bindArrangeComplete=function(){function t(){e&&i&&o&&n.dispatchEvent("arrangeComplete",null,[n.filteredItems])}var e,i,o,n=this;this.once("layoutComplete",function(){e=!0,t()}),this.once("hideComplete",function(){i=!0,t()}),this.once("revealComplete",function(){o=!0,t()})},l._filter=function(t){var e=this.options.filter;e=e||"*";for(var i=[],o=[],n=[],s=this._getFilterTest(e),r=0;r<t.length;r++){var a=t[r];if(!a.isIgnored){var u=s(a);u&&i.push(a),u&&a.isHidden?o.push(a):u||a.isHidden||n.push(a)}}return{matches:i,needReveal:o,needHide:n}},l._getFilterTest=function(t){
return u&&this.options.isJQueryFiltering?function(e){return u(e.element).is(t)}:"function"==typeof t?function(e){return t(e.element)}:function(e){return o(e.element,t)}},l.updateSortData=function(t){var e;t?(t=n.makeArray(t),e=this.getItems(t)):e=this.items,this._getSorters(),this._updateItemsSortData(e)},l._getSorters=function(){var t=this.options.getSortData;for(var e in t){var i=t[e];this._sorters[e]=f(i)}},l._updateItemsSortData=function(t){for(var e=t&&t.length,i=0;e&&i<e;i++){var o=t[i];o.updateSortData()}};var f=function(){function t(t){if("string"!=typeof t)return t;var i=h(t).split(" "),o=i[0],n=o.match(/^\[(.+)\]$/),s=n&&n[1],r=e(s,o),a=d.sortDataParsers[i[1]];return t=a?function(t){return t&&a(r(t))}:function(t){return t&&r(t)}}function e(t,e){return t?function(e){return e.getAttribute(t)}:function(t){var i=t.querySelector(e);return i&&i.textContent}}return t}();d.sortDataParsers={parseInt:function(t){return parseInt(t,10)},parseFloat:function(t){return parseFloat(t)}},l._sort=function(){if(this.options.sortBy){var t=n.makeArray(this.options.sortBy);this._getIsSameSortBy(t)||(this.sortHistory=t.concat(this.sortHistory));var e=a(this.sortHistory,this.options.sortAscending);this.filteredItems.sort(e)}},l._getIsSameSortBy=function(t){for(var e=0;e<t.length;e++)if(t[e]!=this.sortHistory[e])return!1;return!0},l._mode=function(){var t=this.options.layoutMode,e=this.modes[t];if(!e)throw new Error("No layout mode: "+t);return e.options=this.options[t],e},l._resetLayout=function(){e.prototype._resetLayout.call(this),this._mode()._resetLayout()},l._getItemLayoutPosition=function(t){return this._mode()._getItemLayoutPosition(t)},l._manageStamp=function(t){this._mode()._manageStamp(t)},l._getContainerSize=function(){return this._mode()._getContainerSize()},l.needsResizeLayout=function(){return this._mode().needsResizeLayout()},l.appended=function(t){var e=this.addItems(t);if(e.length){var i=this._filterRevealAdded(e);this.filteredItems=this.filteredItems.concat(i)}},l.prepended=function(t){var e=this._itemize(t);if(e.length){this._resetLayout(),this._manageStamps();var i=this._filterRevealAdded(e);this.layoutItems(this.filteredItems),this.filteredItems=i.concat(this.filteredItems),this.items=e.concat(this.items)}},l._filterRevealAdded=function(t){var e=this._filter(t);return this.hide(e.needHide),this.reveal(e.matches),this.layoutItems(e.matches,!0),e.matches},l.insert=function(t){var e=this.addItems(t);if(e.length){var i,o,n=e.length;for(i=0;i<n;i++)o=e[i],this.element.appendChild(o.element);var s=this._filter(e).matches;for(i=0;i<n;i++)e[i].isLayoutInstant=!0;for(this.arrange(),i=0;i<n;i++)delete e[i].isLayoutInstant;this.reveal(s)}};var c=l.remove;return l.remove=function(t){t=n.makeArray(t);var e=this.getItems(t);c.call(this,t);for(var i=e&&e.length,o=0;i&&o<i;o++){var s=e[o];n.removeFrom(this.filteredItems,s)}},l.shuffle=function(){for(var t=0;t<this.items.length;t++){var e=this.items[t];e.sortData.random=Math.random()}this.options.sortBy="random",this._sort(),this._layout()},l._noTransition=function(t,e){var i=this.options.transitionDuration;this.options.transitionDuration=0;var o=t.apply(this,e);return this.options.transitionDuration=i,o},l.getFilteredItemElements=function(){return this.filteredItems.map(function(t){return t.element})},d});
/*!

JSZip v3.1.5 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.JSZip=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./support"),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.encode=function(a){for(var b,c,e,g,h,i,j,k=[],l=0,m=a.length,n=m,o="string"!==d.getTypeOf(a);l<a.length;)n=m-l,o?(b=a[l++],c=l<m?a[l++]:0,e=l<m?a[l++]:0):(b=a.charCodeAt(l++),c=l<m?a.charCodeAt(l++):0,e=l<m?a.charCodeAt(l++):0),g=b>>2,h=(3&b)<<4|c>>4,i=n>1?(15&c)<<2|e>>6:64,j=n>2?63&e:64,k.push(f.charAt(g)+f.charAt(h)+f.charAt(i)+f.charAt(j));return k.join("")},c.decode=function(a){var b,c,d,g,h,i,j,k=0,l=0,m="data:";if(a.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");var n=3*a.length/4;if(a.charAt(a.length-1)===f.charAt(64)&&n--,a.charAt(a.length-2)===f.charAt(64)&&n--,n%1!==0)throw new Error("Invalid base64 input, bad content length.");var o;for(o=e.uint8array?new Uint8Array(0|n):new Array(0|n);k<a.length;)g=f.indexOf(a.charAt(k++)),h=f.indexOf(a.charAt(k++)),i=f.indexOf(a.charAt(k++)),j=f.indexOf(a.charAt(k++)),b=g<<2|h>>4,c=(15&h)<<4|i>>2,d=(3&i)<<6|j,o[l++]=b,64!==i&&(o[l++]=c),64!==j&&(o[l++]=d);return o}},{"./support":30,"./utils":32}],2:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.compressedSize=a,this.uncompressedSize=b,this.crc32=c,this.compression=d,this.compressedContent=e}var e=a("./external"),f=a("./stream/DataWorker"),g=a("./stream/DataLengthProbe"),h=a("./stream/Crc32Probe"),g=a("./stream/DataLengthProbe");d.prototype={getContentWorker:function(){var a=new f(e.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new g("data_length")),b=this;return a.on("end",function(){if(this.streamInfo.data_length!==b.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),a},getCompressedWorker:function(){return new f(e.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(a,b,c){return a.pipe(new h).pipe(new g("uncompressedSize")).pipe(b.compressWorker(c)).pipe(new g("compressedSize")).withStreamInfo("compression",b)},b.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,b,c){"use strict";var d=a("./stream/GenericWorker");c.STORE={magic:"\0\0",compressWorker:function(a){return new d("STORE compression")},uncompressWorker:function(){return new d("STORE decompression")}},c.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,b,c){"use strict";function d(){for(var a,b=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function e(a,b,c,d){var e=h,f=d+c;a^=-1;for(var g=d;g<f;g++)a=a>>>8^e[255&(a^b[g])];return a^-1}function f(a,b,c,d){var e=h,f=d+c;a^=-1;for(var g=d;g<f;g++)a=a>>>8^e[255&(a^b.charCodeAt(g))];return a^-1}var g=a("./utils"),h=d();b.exports=function(a,b){if("undefined"==typeof a||!a.length)return 0;var c="string"!==g.getTypeOf(a);return c?e(0|b,a,a.length,0):f(0|b,a,a.length,0)}},{"./utils":32}],5:[function(a,b,c){"use strict";c.base64=!1,c.binary=!1,c.dir=!1,c.createFolders=!0,c.date=null,c.compression=null,c.compressionOptions=null,c.comment=null,c.unixPermissions=null,c.dosPermissions=null},{}],6:[function(a,b,c){"use strict";var d=null;d="undefined"!=typeof Promise?Promise:a("lie"),b.exports={Promise:d}},{lie:58}],7:[function(a,b,c){"use strict";function d(a,b){h.call(this,"FlateWorker/"+a),this._pako=null,this._pakoAction=a,this._pakoOptions=b,this.meta={}}var e="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,f=a("pako"),g=a("./utils"),h=a("./stream/GenericWorker"),i=e?"uint8array":"array";c.magic="\b\0",g.inherits(d,h),d.prototype.processChunk=function(a){this.meta=a.meta,null===this._pako&&this._createPako(),this._pako.push(g.transformTo(i,a.data),!1)},d.prototype.flush=function(){h.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new f[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var a=this;this._pako.onData=function(b){a.push({data:b,meta:a.meta})}},c.compressWorker=function(a){return new d("Deflate",a)},c.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:59}],8:[function(a,b,c){"use strict";function d(a,b,c,d){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=c,this.encodeFileName=d,this.streamFiles=a,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var e=a("../utils"),f=a("../stream/GenericWorker"),g=a("../utf8"),h=a("../crc32"),i=a("../signature"),j=function(a,b){var c,d="";for(c=0;c<b;c++)d+=String.fromCharCode(255&a),a>>>=8;return d},k=function(a,b){var c=a;return a||(c=b?16893:33204),(65535&c)<<16},l=function(a,b){return 63&(a||0)},m=function(a,b,c,d,f,m){var n,o,p=a.file,q=a.compression,r=m!==g.utf8encode,s=e.transformTo("string",m(p.name)),t=e.transformTo("string",g.utf8encode(p.name)),u=p.comment,v=e.transformTo("string",m(u)),w=e.transformTo("string",g.utf8encode(u)),x=t.length!==p.name.length,y=w.length!==u.length,z="",A="",B="",C=p.dir,D=p.date,E={crc32:0,compressedSize:0,uncompressedSize:0};b&&!c||(E.crc32=a.crc32,E.compressedSize=a.compressedSize,E.uncompressedSize=a.uncompressedSize);var F=0;b&&(F|=8),r||!x&&!y||(F|=2048);var G=0,H=0;C&&(G|=16),"UNIX"===f?(H=798,G|=k(p.unixPermissions,C)):(H=20,G|=l(p.dosPermissions,C)),n=D.getUTCHours(),n<<=6,n|=D.getUTCMinutes(),n<<=5,n|=D.getUTCSeconds()/2,o=D.getUTCFullYear()-1980,o<<=4,o|=D.getUTCMonth()+1,o<<=5,o|=D.getUTCDate(),x&&(A=j(1,1)+j(h(s),4)+t,z+="up"+j(A.length,2)+A),y&&(B=j(1,1)+j(h(v),4)+w,z+="uc"+j(B.length,2)+B);var I="";I+="\n\0",I+=j(F,2),I+=q.magic,I+=j(n,2),I+=j(o,2),I+=j(E.crc32,4),I+=j(E.compressedSize,4),I+=j(E.uncompressedSize,4),I+=j(s.length,2),I+=j(z.length,2);var J=i.LOCAL_FILE_HEADER+I+s+z,K=i.CENTRAL_FILE_HEADER+j(H,2)+I+j(v.length,2)+"\0\0\0\0"+j(G,4)+j(d,4)+s+z+v;return{fileRecord:J,dirRecord:K}},n=function(a,b,c,d,f){var g="",h=e.transformTo("string",f(d));return g=i.CENTRAL_DIRECTORY_END+"\0\0\0\0"+j(a,2)+j(a,2)+j(b,4)+j(c,4)+j(h.length,2)+h},o=function(a){var b="";return b=i.DATA_DESCRIPTOR+j(a.crc32,4)+j(a.compressedSize,4)+j(a.uncompressedSize,4)};e.inherits(d,f),d.prototype.push=function(a){var b=a.meta.percent||0,c=this.entriesCount,d=this._sources.length;this.accumulate?this.contentBuffer.push(a):(this.bytesWritten+=a.data.length,f.prototype.push.call(this,{data:a.data,meta:{currentFile:this.currentFile,percent:c?(b+100*(c-d-1))/c:100}}))},d.prototype.openedSource=function(a){this.currentSourceOffset=this.bytesWritten,this.currentFile=a.file.name;var b=this.streamFiles&&!a.file.dir;if(b){var c=m(a,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:c.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(a){this.accumulate=!1;var b=this.streamFiles&&!a.file.dir,c=m(a,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(c.dirRecord),b)this.push({data:o(a),meta:{percent:100}});else for(this.push({data:c.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var a=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var c=this.bytesWritten-a,d=n(this.dirRecords.length,c,a,this.zipComment,this.encodeFileName);this.push({data:d,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(a){this._sources.push(a);var b=this;return a.on("data",function(a){b.processChunk(a)}),a.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),a.on("error",function(a){b.error(a)}),this},d.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(a){var b=this._sources;if(!f.prototype.error.call(this,a))return!1;for(var c=0;c<b.length;c++)try{b[c].error(a)}catch(a){}return!0},d.prototype.lock=function(){f.prototype.lock.call(this);for(var a=this._sources,b=0;b<a.length;b++)a[b].lock()},b.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,b,c){"use strict";var d=a("../compressions"),e=a("./ZipFileWorker"),f=function(a,b){var c=a||b,e=d[c];if(!e)throw new Error(c+" is not a valid compression method !");return e};c.generateWorker=function(a,b,c){var d=new e(b.streamFiles,c,b.platform,b.encodeFileName),g=0;try{a.forEach(function(a,c){g++;var e=f(c.options.compression,b.compression),h=c.options.compressionOptions||b.compressionOptions||{},i=c.dir,j=c.date;c._compressWorker(e,h).withStreamInfo("file",{name:a,dir:i,date:j,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(d)}),d.entriesCount=g}catch(h){d.error(h)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,b,c){"use strict";function d(){if(!(this instanceof d))return new d;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var a=new d;for(var b in this)"function"!=typeof this[b]&&(a[b]=this[b]);return a}}d.prototype=a("./object"),d.prototype.loadAsync=a("./load"),d.support=a("./support"),d.defaults=a("./defaults"),d.version="3.1.5",d.loadAsync=function(a,b){return(new d).loadAsync(a,b)},d.external=a("./external"),b.exports=d},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,b,c){"use strict";function d(a){return new f.Promise(function(b,c){var d=a.decompressed.getContentWorker().pipe(new i);d.on("error",function(a){c(a)}).on("end",function(){d.streamInfo.crc32!==a.decompressed.crc32?c(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}var e=a("./utils"),f=a("./external"),g=a("./utf8"),e=a("./utils"),h=a("./zipEntries"),i=a("./stream/Crc32Probe"),j=a("./nodejsUtils");b.exports=function(a,b){var c=this;return b=e.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:g.utf8decode}),j.isNode&&j.isStream(a)?f.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):e.prepareContent("the loaded zip file",a,!0,b.optimizedBinaryString,b.base64).then(function(a){var c=new h(b);return c.load(a),c}).then(function(a){var c=[f.Promise.resolve(a)],e=a.files;if(b.checkCRC32)for(var g=0;g<e.length;g++)c.push(d(e[g]));return f.Promise.all(c)}).then(function(a){for(var d=a.shift(),e=d.files,f=0;f<e.length;f++){var g=e[f];c.file(g.fileNameStr,g.decompressed,{binary:!0,optimizedBinaryString:!0,date:g.date,dir:g.dir,comment:g.fileCommentStr.length?g.fileCommentStr:null,unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions,createFolders:b.createFolders})}return d.zipComment.length&&(c.comment=d.zipComment),c})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,b,c){"use strict";function d(a,b){f.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(b)}var e=a("../utils"),f=a("../stream/GenericWorker");e.inherits(d,f),d.prototype._bindStream=function(a){var b=this;this._stream=a,a.pause(),a.on("data",function(a){b.push({data:a,meta:{percent:0}})}).on("error",function(a){b.isPaused?this.generatedError=a:b.error(a)}).on("end",function(){b.isPaused?b._upstreamEnded=!0:b.end()})},d.prototype.pause=function(){return!!f.prototype.pause.call(this)&&(this._stream.pause(),!0)},d.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},b.exports=d},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,b,c){"use strict";function d(a,b,c){e.call(this,b),this._helper=a;var d=this;a.on("data",function(a,b){d.push(a)||d._helper.pause(),c&&c(b)}).on("error",function(a){d.emit("error",a)}).on("end",function(){d.push(null)})}var e=a("readable-stream").Readable,f=a("../utils");f.inherits(d,e),d.prototype._read=function(){this._helper.resume()},b.exports=d},{"../utils":32,"readable-stream":16}],14:[function(a,b,c){"use strict";b.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(a,b){return new Buffer(a,b)},allocBuffer:function(a){return Buffer.alloc?Buffer.alloc(a):new Buffer(a)},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&"function"==typeof a.on&&"function"==typeof a.pause&&"function"==typeof a.resume}}},{}],15:[function(a,b,c){"use strict";function d(a){return"[object RegExp]"===Object.prototype.toString.call(a)}var e=a("./utf8"),f=a("./utils"),g=a("./stream/GenericWorker"),h=a("./stream/StreamHelper"),i=a("./defaults"),j=a("./compressedObject"),k=a("./zipObject"),l=a("./generate"),m=a("./nodejsUtils"),n=a("./nodejs/NodejsStreamInputAdapter"),o=function(a,b,c){var d,e=f.getTypeOf(b),h=f.extend(c||{},i);h.date=h.date||new Date,null!==h.compression&&(h.compression=h.compression.toUpperCase()),"string"==typeof h.unixPermissions&&(h.unixPermissions=parseInt(h.unixPermissions,8)),h.unixPermissions&&16384&h.unixPermissions&&(h.dir=!0),h.dosPermissions&&16&h.dosPermissions&&(h.dir=!0),h.dir&&(a=q(a)),h.createFolders&&(d=p(a))&&r.call(this,d,!0);var l="string"===e&&h.binary===!1&&h.base64===!1;c&&"undefined"!=typeof c.binary||(h.binary=!l);var o=b instanceof j&&0===b.uncompressedSize;(o||h.dir||!b||0===b.length)&&(h.base64=!1,h.binary=!0,b="",h.compression="STORE",e="string");var s=null;s=b instanceof j||b instanceof g?b:m.isNode&&m.isStream(b)?new n(a,b):f.prepareContent(a,b,h.binary,h.optimizedBinaryString,h.base64);var t=new k(a,s,h);this.files[a]=t},p=function(a){"/"===a.slice(-1)&&(a=a.substring(0,a.length-1));var b=a.lastIndexOf("/");return b>0?a.substring(0,b):""},q=function(a){return"/"!==a.slice(-1)&&(a+="/"),a},r=function(a,b){return b="undefined"!=typeof b?b:i.createFolders,a=q(a),this.files[a]||o.call(this,a,null,{dir:!0,createFolders:b}),this.files[a]},s={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(a){var b,c,d;for(b in this.files)this.files.hasOwnProperty(b)&&(d=this.files[b],c=b.slice(this.root.length,b.length),c&&b.slice(0,this.root.length)===this.root&&a(c,d))},filter:function(a){var b=[];return this.forEach(function(c,d){a(c,d)&&b.push(d)}),b},file:function(a,b,c){if(1===arguments.length){if(d(a)){var e=a;return this.filter(function(a,b){return!b.dir&&e.test(a)})}var f=this.files[this.root+a];return f&&!f.dir?f:null}return a=this.root+a,o.call(this,a,b,c),this},folder:function(a){if(!a)return this;if(d(a))return this.filter(function(b,c){return c.dir&&a.test(b)});var b=this.root+a,c=r.call(this,b),e=this.clone();return e.root=c.name,e},remove:function(a){a=this.root+a;var b=this.files[a];if(b||("/"!==a.slice(-1)&&(a+="/"),b=this.files[a]),b&&!b.dir)delete this.files[a];else for(var c=this.filter(function(b,c){return c.name.slice(0,a.length)===a}),d=0;d<c.length;d++)delete this.files[c[d].name];return this},generate:function(a){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(a){var b,c={};try{if(c=f.extend(a||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:e.utf8encode}),c.type=c.type.toLowerCase(),c.compression=c.compression.toUpperCase(),"binarystring"===c.type&&(c.type="string"),!c.type)throw new Error("No output type specified.");f.checkSupport(c.type),"darwin"!==c.platform&&"freebsd"!==c.platform&&"linux"!==c.platform&&"sunos"!==c.platform||(c.platform="UNIX"),"win32"===c.platform&&(c.platform="DOS");var d=c.comment||this.comment||"";b=l.generateWorker(this,c,d)}catch(i){b=new g("error"),b.error(i)}return new h(b,c.type||"string",c.mimeType)},generateAsync:function(a,b){return this.generateInternalStream(a).accumulate(b)},generateNodeStream:function(a,b){return a=a||{},a.type||(a.type="nodebuffer"),this.generateInternalStream(a).toNodejsStream(b)}};b.exports=s},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,b,c){b.exports=a("stream")},{stream:void 0}],17:[function(a,b,c){"use strict";function d(a){e.call(this,a);for(var b=0;b<this.data.length;b++)a[b]=255&a[b]}var e=a("./DataReader"),f=a("../utils");f.inherits(d,e),d.prototype.byteAt=function(a){return this.data[this.zero+a]},d.prototype.lastIndexOfSignature=function(a){for(var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),e=a.charCodeAt(3),f=this.length-4;f>=0;--f)if(this.data[f]===b&&this.data[f+1]===c&&this.data[f+2]===d&&this.data[f+3]===e)return f-this.zero;return-1},d.prototype.readAndCheckSignature=function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),e=a.charCodeAt(3),f=this.readData(4);return b===f[0]&&c===f[1]&&d===f[2]&&e===f[3]},d.prototype.readData=function(a){if(this.checkOffset(a),0===a)return[];var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=d},{"../utils":32,"./DataReader":18}],18:[function(a,b,c){"use strict";function d(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}var e=a("../utils");d.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(a){},readInt:function(a){var b,c=0;for(this.checkOffset(a),b=this.index+a-1;b>=this.index;b--)c=(c<<8)+this.byteAt(b);return this.index+=a,c},readString:function(a){return e.transformTo("string",this.readData(a))},readData:function(a){},lastIndexOfSignature:function(a){},readAndCheckSignature:function(a){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},b.exports=d},{"../utils":32}],19:[function(a,b,c){"use strict";function d(a){e.call(this,a)}var e=a("./Uint8ArrayReader"),f=a("../utils");f.inherits(d,e),d.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=d},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,b,c){"use strict";function d(a){e.call(this,a)}var e=a("./DataReader"),f=a("../utils");f.inherits(d,e),d.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},d.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},d.prototype.readAndCheckSignature=function(a){var b=this.readData(4);return a===b},d.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=d},{"../utils":32,"./DataReader":18}],21:[function(a,b,c){"use strict";function d(a){e.call(this,a)}var e=a("./ArrayReader"),f=a("../utils");f.inherits(d,e),d.prototype.readData=function(a){if(this.checkOffset(a),0===a)return new Uint8Array(0);var b=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=d},{"../utils":32,"./ArrayReader":17}],22:[function(a,b,c){"use strict";var d=a("../utils"),e=a("../support"),f=a("./ArrayReader"),g=a("./StringReader"),h=a("./NodeBufferReader"),i=a("./Uint8ArrayReader");b.exports=function(a){var b=d.getTypeOf(a);return d.checkSupport(b),"string"!==b||e.uint8array?"nodebuffer"===b?new h(a):e.uint8array?new i(d.transformTo("uint8array",a)):new f(d.transformTo("array",a)):new g(a)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,b,c){"use strict";c.LOCAL_FILE_HEADER="PK",c.CENTRAL_FILE_HEADER="PK",c.CENTRAL_DIRECTORY_END="PK",c.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",c.ZIP64_CENTRAL_DIRECTORY_END="PK",c.DATA_DESCRIPTOR="PK\b"},{}],24:[function(a,b,c){"use strict";function d(a){e.call(this,"ConvertWorker to "+a),this.destType=a}var e=a("./GenericWorker"),f=a("../utils");f.inherits(d,e),d.prototype.processChunk=function(a){this.push({data:f.transformTo(this.destType,a.data),meta:a.meta})},b.exports=d},{"../utils":32,"./GenericWorker":28}],25:[function(a,b,c){"use strict";function d(){e.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}var e=a("./GenericWorker"),f=a("../crc32"),g=a("../utils");g.inherits(d,e),d.prototype.processChunk=function(a){this.streamInfo.crc32=f(a.data,this.streamInfo.crc32||0),this.push(a)},b.exports=d},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,b,c){"use strict";function d(a){f.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}var e=a("../utils"),f=a("./GenericWorker");e.inherits(d,f),d.prototype.processChunk=function(a){if(a){var b=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=b+a.data.length}f.prototype.processChunk.call(this,a)},b.exports=d},{"../utils":32,"./GenericWorker":28}],27:[function(a,b,c){"use strict";function d(a){f.call(this,"DataWorker");var b=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(a){b.dataIsReady=!0,b.data=a,b.max=a&&a.length||0,b.type=e.getTypeOf(a),b.isPaused||b._tickAndRepeat()},function(a){b.error(a)})}var e=a("../utils"),f=a("./GenericWorker"),g=16384;e.inherits(d,f),d.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this.data=null},d.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,e.delay(this._tickAndRepeat,[],this)),!0)},d.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(e.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=g,b=null,c=Math.min(this.max,this.index+a);if(this.index>=this.max)return this.end();switch(this.type){case"string":b=this.data.substring(this.index,c);break;case"uint8array":b=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":b=this.data.slice(this.index,c)}return this.index=c,this.push({data:b,meta:{percent:this.max?this.index/this.max*100:0}})},b.exports=d},{"../utils":32,"./GenericWorker":28}],28:[function(a,b,c){"use strict";function d(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}d.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,b){return this._listeners[a].push(b),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,b){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,b)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var b=this;return a.on("data",function(a){b.processChunk(a)}),a.on("end",function(){b.end()}),a.on("error",function(a){b.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var a=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,b){return this.extraStreamInfo[a]=b,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},b.exports=d},{}],29:[function(a,b,c){"use strict";function d(a,b,c){switch(a){case"blob":return h.newBlob(h.transformTo("arraybuffer",b),c);case"base64":return k.encode(b);default:return h.transformTo(a,b)}}function e(a,b){var c,d=0,e=null,f=0;for(c=0;c<b.length;c++)f+=b[c].length;switch(a){case"string":return b.join("");case"array":return Array.prototype.concat.apply([],b);case"uint8array":for(e=new Uint8Array(f),c=0;c<b.length;c++)e.set(b[c],d),d+=b[c].length;return e;case"nodebuffer":return Buffer.concat(b);default:throw new Error("concat : unsupported type '"+a+"'")}}function f(a,b){return new m.Promise(function(c,f){var g=[],h=a._internalType,i=a._outputType,j=a._mimeType;a.on("data",function(a,c){g.push(a),b&&b(c)}).on("error",function(a){g=[],f(a)}).on("end",function(){try{var a=d(i,e(h,g),j);c(a)}catch(b){f(b)}g=[]}).resume()})}function g(a,b,c){var d=b;switch(b){case"blob":case"arraybuffer":d="uint8array";break;case"base64":d="string"}try{this._internalType=d,this._outputType=b,this._mimeType=c,h.checkSupport(d),this._worker=a.pipe(new i(d)),a.lock()}catch(e){this._worker=new j("error"),this._worker.error(e)}}var h=a("../utils"),i=a("./ConvertWorker"),j=a("./GenericWorker"),k=a("../base64"),l=a("../support"),m=a("../external"),n=null;if(l.nodestream)try{n=a("../nodejs/NodejsStreamOutputAdapter")}catch(o){}g.prototype={accumulate:function(a){return f(this,a)},on:function(a,b){var c=this;return"data"===a?this._worker.on(a,function(a){b.call(c,a.data,a.meta)}):this._worker.on(a,function(){h.delay(b,arguments,c)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(a){if(h.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new n(this,{objectMode:"nodebuffer"!==this._outputType},a)}},b.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,b,c){"use strict";if(c.base64=!0,c.array=!0,c.string=!0,c.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,c.nodebuffer="undefined"!=typeof Buffer,c.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)c.blob=!1;else{var d=new ArrayBuffer(0);try{c.blob=0===new Blob([d],{type:"application/zip"}).size}catch(e){try{var f=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,g=new f;g.append(d),c.blob=0===g.getBlob("application/zip").size}catch(e){c.blob=!1}}}try{c.nodestream=!!a("readable-stream").Readable}catch(e){c.nodestream=!1}},{"readable-stream":16}],31:[function(a,b,c){"use strict";function d(){i.call(this,"utf-8 decode"),this.leftOver=null}function e(){i.call(this,"utf-8 encode")}for(var f=a("./utils"),g=a("./support"),h=a("./nodejsUtils"),i=a("./stream/GenericWorker"),j=new Array(256),k=0;k<256;k++)j[k]=k>=252?6:k>=248?5:k>=240?4:k>=224?3:k>=192?2:1;j[254]=j[254]=1;var l=function(a){var b,c,d,e,f,h=a.length,i=0;for(e=0;e<h;e++)c=a.charCodeAt(e),55296===(64512&c)&&e+1<h&&(d=a.charCodeAt(e+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),e++)),i+=c<128?1:c<2048?2:c<65536?3:4;for(b=g.uint8array?new Uint8Array(i):new Array(i),f=0,e=0;f<i;e++)c=a.charCodeAt(e),55296===(64512&c)&&e+1<h&&(d=a.charCodeAt(e+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),e++)),c<128?b[f++]=c:c<2048?(b[f++]=192|c>>>6,b[f++]=128|63&c):c<65536?(b[f++]=224|c>>>12,b[f++]=128|c>>>6&63,b[f++]=128|63&c):(b[f++]=240|c>>>18,b[f++]=128|c>>>12&63,b[f++]=128|c>>>6&63,b[f++]=128|63&c);return b},m=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return c<0?b:0===c?b:c+j[a[c]]>b?c:b},n=function(a){var b,c,d,e,g=a.length,h=new Array(2*g);for(c=0,b=0;b<g;)if(d=a[b++],d<128)h[c++]=d;else if(e=j[d],e>4)h[c++]=65533,b+=e-1;else{for(d&=2===e?31:3===e?15:7;e>1&&b<g;)d=d<<6|63&a[b++],e--;e>1?h[c++]=65533:d<65536?h[c++]=d:(d-=65536,h[c++]=55296|d>>10&1023,h[c++]=56320|1023&d)}return h.length!==c&&(h.subarray?h=h.subarray(0,c):h.length=c),f.applyFromCharCode(h)};c.utf8encode=function(a){return g.nodebuffer?h.newBufferFrom(a,"utf-8"):l(a)},c.utf8decode=function(a){return g.nodebuffer?f.transformTo("nodebuffer",a).toString("utf-8"):(a=f.transformTo(g.uint8array?"uint8array":"array",a),n(a))},f.inherits(d,i),d.prototype.processChunk=function(a){var b=f.transformTo(g.uint8array?"uint8array":"array",a.data);if(this.leftOver&&this.leftOver.length){if(g.uint8array){var d=b;b=new Uint8Array(d.length+this.leftOver.length),b.set(this.leftOver,0),b.set(d,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var e=m(b),h=b;e!==b.length&&(g.uint8array?(h=b.subarray(0,e),this.leftOver=b.subarray(e,b.length)):(h=b.slice(0,e),this.leftOver=b.slice(e,b.length))),this.push({data:c.utf8decode(h),meta:a.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:c.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},c.Utf8DecodeWorker=d,f.inherits(e,i),e.prototype.processChunk=function(a){this.push({data:c.utf8encode(a.data),meta:a.meta})},c.Utf8EncodeWorker=e},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,b,c){"use strict";function d(a){var b=null;return b=i.uint8array?new Uint8Array(a.length):new Array(a.length),f(a,b)}function e(a){return a}function f(a,b){for(var c=0;c<a.length;++c)b[c]=255&a.charCodeAt(c);return b}function g(a){var b=65536,d=c.getTypeOf(a),e=!0;if("uint8array"===d?e=n.applyCanBeUsed.uint8array:"nodebuffer"===d&&(e=n.applyCanBeUsed.nodebuffer),e)for(;b>1;)try{return n.stringifyByChunk(a,d,b)}catch(f){b=Math.floor(b/2)}return n.stringifyByChar(a)}function h(a,b){for(var c=0;c<a.length;c++)b[c]=a[c];
return b}var i=a("./support"),j=a("./base64"),k=a("./nodejsUtils"),l=a("core-js/library/fn/set-immediate"),m=a("./external");c.newBlob=function(a,b){c.checkSupport("blob");try{return new Blob([a],{type:b})}catch(d){try{var e=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,f=new e;return f.append(a),f.getBlob(b)}catch(d){throw new Error("Bug : can't construct the Blob.")}}};var n={stringifyByChunk:function(a,b,c){var d=[],e=0,f=a.length;if(f<=c)return String.fromCharCode.apply(null,a);for(;e<f;)"array"===b||"nodebuffer"===b?d.push(String.fromCharCode.apply(null,a.slice(e,Math.min(e+c,f)))):d.push(String.fromCharCode.apply(null,a.subarray(e,Math.min(e+c,f)))),e+=c;return d.join("")},stringifyByChar:function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(a){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,k.allocBuffer(1)).length}catch(a){return!1}}()}};c.applyFromCharCode=g;var o={};o.string={string:e,array:function(a){return f(a,new Array(a.length))},arraybuffer:function(a){return o.string.uint8array(a).buffer},uint8array:function(a){return f(a,new Uint8Array(a.length))},nodebuffer:function(a){return f(a,k.allocBuffer(a.length))}},o.array={string:g,array:e,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return k.newBufferFrom(a)}},o.arraybuffer={string:function(a){return g(new Uint8Array(a))},array:function(a){return h(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:e,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return k.newBufferFrom(new Uint8Array(a))}},o.uint8array={string:g,array:function(a){return h(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:e,nodebuffer:function(a){return k.newBufferFrom(a)}},o.nodebuffer={string:g,array:function(a){return h(a,new Array(a.length))},arraybuffer:function(a){return o.nodebuffer.uint8array(a).buffer},uint8array:function(a){return h(a,new Uint8Array(a.length))},nodebuffer:e},c.transformTo=function(a,b){if(b||(b=""),!a)return b;c.checkSupport(a);var d=c.getTypeOf(b),e=o[d][a](b);return e},c.getTypeOf=function(a){return"string"==typeof a?"string":"[object Array]"===Object.prototype.toString.call(a)?"array":i.nodebuffer&&k.isBuffer(a)?"nodebuffer":i.uint8array&&a instanceof Uint8Array?"uint8array":i.arraybuffer&&a instanceof ArrayBuffer?"arraybuffer":void 0},c.checkSupport=function(a){var b=i[a.toLowerCase()];if(!b)throw new Error(a+" is not supported by this platform")},c.MAX_VALUE_16BITS=65535,c.MAX_VALUE_32BITS=-1,c.pretty=function(a){var b,c,d="";for(c=0;c<(a||"").length;c++)b=a.charCodeAt(c),d+="\\x"+(b<16?"0":"")+b.toString(16).toUpperCase();return d},c.delay=function(a,b,c){l(function(){a.apply(c||null,b||[])})},c.inherits=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c},c.extend=function(){var a,b,c={};for(a=0;a<arguments.length;a++)for(b in arguments[a])arguments[a].hasOwnProperty(b)&&"undefined"==typeof c[b]&&(c[b]=arguments[a][b]);return c},c.prepareContent=function(a,b,e,f,g){var h=m.Promise.resolve(b).then(function(a){var b=i.blob&&(a instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(a))!==-1);return b&&"undefined"!=typeof FileReader?new m.Promise(function(b,c){var d=new FileReader;d.onload=function(a){b(a.target.result)},d.onerror=function(a){c(a.target.error)},d.readAsArrayBuffer(a)}):a});return h.then(function(b){var h=c.getTypeOf(b);return h?("arraybuffer"===h?b=c.transformTo("uint8array",b):"string"===h&&(g?b=j.decode(b):e&&f!==!0&&(b=d(b))),b):m.Promise.reject(new Error("Can't read the data of '"+a+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"core-js/library/fn/set-immediate":36}],33:[function(a,b,c){"use strict";function d(a){this.files=[],this.loadOptions=a}var e=a("./reader/readerFor"),f=a("./utils"),g=a("./signature"),h=a("./zipEntry"),i=(a("./utf8"),a("./support"));d.prototype={checkSignature:function(a){if(!this.reader.readAndCheckSignature(a)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+f.pretty(b)+", expected "+f.pretty(a)+")")}},isSignature:function(a,b){var c=this.reader.index;this.reader.setIndex(a);var d=this.reader.readString(4),e=d===b;return this.reader.setIndex(c),e},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var a=this.reader.readData(this.zipCommentLength),b=i.uint8array?"uint8array":"array",c=f.transformTo(b,a);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var a,b,c,d=this.zip64EndOfCentralSize-44,e=0;e<d;)a=this.reader.readInt(2),b=this.reader.readInt(4),c=this.reader.readData(b),this.zip64ExtensibleData[a]={id:a,length:b,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var a,b;for(a=0;a<this.files.length;a++)b=this.files[a],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(g.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var a;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(g.CENTRAL_FILE_HEADER);)a=new h({zip64:this.zip64},this.loadOptions),a.readCentralPart(this.reader),this.files.push(a);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var a=this.reader.lastIndexOfSignature(g.CENTRAL_DIRECTORY_END);if(a<0){var b=!this.isSignature(0,g.LOCAL_FILE_HEADER);throw b?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(a);var c=a;if(this.checkSignature(g.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===f.MAX_VALUE_16BITS||this.diskWithCentralDirStart===f.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===f.MAX_VALUE_16BITS||this.centralDirRecords===f.MAX_VALUE_16BITS||this.centralDirSize===f.MAX_VALUE_32BITS||this.centralDirOffset===f.MAX_VALUE_32BITS){if(this.zip64=!0,a=this.reader.lastIndexOfSignature(g.ZIP64_CENTRAL_DIRECTORY_LOCATOR),a<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(a),this.checkSignature(g.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,g.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(g.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(g.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var e=c-d;if(e>0)this.isSignature(c,g.CENTRAL_FILE_HEADER)||(this.reader.zero=e);else if(e<0)throw new Error("Corrupted zip: missing "+Math.abs(e)+" bytes.")},prepareReader:function(a){this.reader=e(a)},load:function(a){this.prepareReader(a),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},b.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(a,b,c){"use strict";function d(a,b){this.options=a,this.loadOptions=b}var e=a("./reader/readerFor"),f=a("./utils"),g=a("./compressedObject"),h=a("./crc32"),i=a("./utf8"),j=a("./compressions"),k=a("./support"),l=0,m=3,n=function(a){for(var b in j)if(j.hasOwnProperty(b)&&j[b].magic===a)return j[b];return null};d.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},readLocalPart:function(a){var b,c;if(a.skip(22),this.fileNameLength=a.readInt(2),c=a.readInt(2),this.fileName=a.readData(this.fileNameLength),a.skip(c),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(b=n(this.compressionMethod),null===b)throw new Error("Corrupted zip : compression "+f.pretty(this.compressionMethod)+" unknown (inner file : "+f.transformTo("string",this.fileName)+")");this.decompressed=new g(this.compressedSize,this.uncompressedSize,this.crc32,b,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2),a.skip(2),this.bitFlag=a.readInt(2),this.compressionMethod=a.readString(2),this.date=a.readDate(),this.crc32=a.readInt(4),this.compressedSize=a.readInt(4),this.uncompressedSize=a.readInt(4);var b=a.readInt(2);if(this.extraFieldsLength=a.readInt(2),this.fileCommentLength=a.readInt(2),this.diskNumberStart=a.readInt(2),this.internalFileAttributes=a.readInt(2),this.externalFileAttributes=a.readInt(4),this.localHeaderOffset=a.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");a.skip(b),this.readExtraFields(a),this.parseZIP64ExtraField(a),this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),a===l&&(this.dosPermissions=63&this.externalFileAttributes),a===m&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(a){if(this.extraFields[1]){var b=e(this.extraFields[1].value);this.uncompressedSize===f.MAX_VALUE_32BITS&&(this.uncompressedSize=b.readInt(8)),this.compressedSize===f.MAX_VALUE_32BITS&&(this.compressedSize=b.readInt(8)),this.localHeaderOffset===f.MAX_VALUE_32BITS&&(this.localHeaderOffset=b.readInt(8)),this.diskNumberStart===f.MAX_VALUE_32BITS&&(this.diskNumberStart=b.readInt(4))}},readExtraFields:function(a){var b,c,d,e=a.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});a.index<e;)b=a.readInt(2),c=a.readInt(2),d=a.readData(c),this.extraFields[b]={id:b,length:c,value:d}},handleUTF8:function(){var a=k.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=i.utf8decode(this.fileName),this.fileCommentStr=i.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(null!==b)this.fileNameStr=b;else{var c=f.transformTo(a,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}var d=this.findExtraFieldUnicodeComment();if(null!==d)this.fileCommentStr=d;else{var e=f.transformTo(a,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(e)}}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var b=e(a.value);return 1!==b.readInt(1)?null:h(this.fileName)!==b.readInt(4)?null:i.utf8decode(b.readData(a.length-5))}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var b=e(a.value);return 1!==b.readInt(1)?null:h(this.fileComment)!==b.readInt(4)?null:i.utf8decode(b.readData(a.length-5))}return null}},b.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,b,c){"use strict";var d=a("./stream/StreamHelper"),e=a("./stream/DataWorker"),f=a("./utf8"),g=a("./compressedObject"),h=a("./stream/GenericWorker"),i=function(a,b,c){this.name=a,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=b,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}};i.prototype={internalStream:function(a){var b=null,c="string";try{if(!a)throw new Error("No output type specified.");c=a.toLowerCase();var e="string"===c||"text"===c;"binarystring"!==c&&"text"!==c||(c="string"),b=this._decompressWorker();var g=!this._dataBinary;g&&!e&&(b=b.pipe(new f.Utf8EncodeWorker)),!g&&e&&(b=b.pipe(new f.Utf8DecodeWorker))}catch(i){b=new h("error"),b.error(i)}return new d(b,c,"")},async:function(a,b){return this.internalStream(a).accumulate(b)},nodeStream:function(a,b){return this.internalStream(a||"nodebuffer").toNodejsStream(b)},_compressWorker:function(a,b){if(this._data instanceof g&&this._data.compression.magic===a.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new f.Utf8EncodeWorker)),g.createWorkerFrom(c,a,b)},_decompressWorker:function(){return this._data instanceof g?this._data.getContentWorker():this._data instanceof h?this._data:new e(this._data)}};for(var j=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],k=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},l=0;l<j.length;l++)i.prototype[j[l]]=k;b.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,b,c){a("../modules/web.immediate"),b.exports=a("../modules/_core").setImmediate},{"../modules/_core":40,"../modules/web.immediate":56}],37:[function(a,b,c){b.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},{}],38:[function(a,b,c){var d=a("./_is-object");b.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},{"./_is-object":51}],39:[function(a,b,c){var d={}.toString;b.exports=function(a){return d.call(a).slice(8,-1)}},{}],40:[function(a,b,c){var d=b.exports={version:"2.3.0"};"number"==typeof __e&&(__e=d)},{}],41:[function(a,b,c){var d=a("./_a-function");b.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},{"./_a-function":37}],42:[function(a,b,c){b.exports=!a("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":45}],43:[function(a,b,c){var d=a("./_is-object"),e=a("./_global").document,f=d(e)&&d(e.createElement);b.exports=function(a){return f?e.createElement(a):{}}},{"./_global":46,"./_is-object":51}],44:[function(a,b,c){var d=a("./_global"),e=a("./_core"),f=a("./_ctx"),g=a("./_hide"),h="prototype",i=function(a,b,c){var j,k,l,m=a&i.F,n=a&i.G,o=a&i.S,p=a&i.P,q=a&i.B,r=a&i.W,s=n?e:e[b]||(e[b]={}),t=s[h],u=n?d:o?d[b]:(d[b]||{})[h];n&&(c=b);for(j in c)k=!m&&u&&void 0!==u[j],k&&j in s||(l=k?u[j]:c[j],s[j]=n&&"function"!=typeof u[j]?c[j]:q&&k?f(l,d):r&&u[j]==l?function(a){var b=function(b,c,d){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,c)}return new a(b,c,d)}return a.apply(this,arguments)};return b[h]=a[h],b}(l):p&&"function"==typeof l?f(Function.call,l):l,p&&((s.virtual||(s.virtual={}))[j]=l,a&i.R&&t&&!t[j]&&g(t,j,l)))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,i.U=64,i.R=128,b.exports=i},{"./_core":40,"./_ctx":41,"./_global":46,"./_hide":47}],45:[function(a,b,c){b.exports=function(a){try{return!!a()}catch(b){return!0}}},{}],46:[function(a,b,c){var d=b.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=d)},{}],47:[function(a,b,c){var d=a("./_object-dp"),e=a("./_property-desc");b.exports=a("./_descriptors")?function(a,b,c){return d.f(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},{"./_descriptors":42,"./_object-dp":52,"./_property-desc":53}],48:[function(a,b,c){b.exports=a("./_global").document&&document.documentElement},{"./_global":46}],49:[function(a,b,c){b.exports=!a("./_descriptors")&&!a("./_fails")(function(){return 7!=Object.defineProperty(a("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":42,"./_dom-create":43,"./_fails":45}],50:[function(a,b,c){b.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}},{}],51:[function(a,b,c){b.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},{}],52:[function(a,b,c){var d=a("./_an-object"),e=a("./_ie8-dom-define"),f=a("./_to-primitive"),g=Object.defineProperty;c.f=a("./_descriptors")?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(h){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(a[b]=c.value),a}},{"./_an-object":38,"./_descriptors":42,"./_ie8-dom-define":49,"./_to-primitive":55}],53:[function(a,b,c){b.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},{}],54:[function(a,b,c){var d,e,f,g=a("./_ctx"),h=a("./_invoke"),i=a("./_html"),j=a("./_dom-create"),k=a("./_global"),l=k.process,m=k.setImmediate,n=k.clearImmediate,o=k.MessageChannel,p=0,q={},r="onreadystatechange",s=function(){var a=+this;if(q.hasOwnProperty(a)){var b=q[a];delete q[a],b()}},t=function(a){s.call(a.data)};m&&n||(m=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return q[++p]=function(){h("function"==typeof a?a:Function(a),b)},d(p),p},n=function(a){delete q[a]},"process"==a("./_cof")(l)?d=function(a){l.nextTick(g(s,a,1))}:o?(e=new o,f=e.port2,e.port1.onmessage=t,d=g(f.postMessage,f,1)):k.addEventListener&&"function"==typeof postMessage&&!k.importScripts?(d=function(a){k.postMessage(a+"","*")},k.addEventListener("message",t,!1)):d=r in j("script")?function(a){i.appendChild(j("script"))[r]=function(){i.removeChild(this),s.call(a)}}:function(a){setTimeout(g(s,a,1),0)}),b.exports={set:m,clear:n}},{"./_cof":39,"./_ctx":41,"./_dom-create":43,"./_global":46,"./_html":48,"./_invoke":50}],55:[function(a,b,c){var d=a("./_is-object");b.exports=function(a,b){if(!d(a))return a;var c,e;if(b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;if("function"==typeof(c=a.valueOf)&&!d(e=c.call(a)))return e;if(!b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":51}],56:[function(a,b,c){var d=a("./_export"),e=a("./_task");d(d.G+d.B,{setImmediate:e.set,clearImmediate:e.clear})},{"./_export":44,"./_task":54}],57:[function(a,b,c){(function(a){"use strict";function c(){k=!0;for(var a,b,c=l.length;c;){for(b=l,l=[],a=-1;++a<c;)b[a]();c=l.length}k=!1}function d(a){1!==l.push(a)||k||e()}var e,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var g=0,h=new f(c),i=a.document.createTextNode("");h.observe(i,{characterData:!0}),e=function(){i.data=g=++g%2}}else if(a.setImmediate||"undefined"==typeof a.MessageChannel)e="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){c(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:function(){setTimeout(c,0)};else{var j=new a.MessageChannel;j.port1.onmessage=c,e=function(){j.port2.postMessage(0)}}var k,l=[];b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],58:[function(a,b,c){"use strict";function d(){}function e(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,a!==d&&i(this,a)}function f(a,b,c){this.promise=a,"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),"function"==typeof c&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function g(a,b,c){o(function(){var d;try{d=b(c)}catch(e){return p.reject(a,e)}d===a?p.reject(a,new TypeError("Cannot resolve promise with itself")):p.resolve(a,d)})}function h(a){var b=a&&a.then;if(a&&("object"==typeof a||"function"==typeof a)&&"function"==typeof b)return function(){b.apply(a,arguments)}}function i(a,b){function c(b){f||(f=!0,p.reject(a,b))}function d(b){f||(f=!0,p.resolve(a,b))}function e(){b(d,c)}var f=!1,g=j(e);"error"===g.status&&c(g.value)}function j(a,b){var c={};try{c.value=a(b),c.status="success"}catch(d){c.status="error",c.value=d}return c}function k(a){return a instanceof this?a:p.resolve(new this(d),a)}function l(a){var b=new this(d);return p.reject(b,a)}function m(a){function b(a,b){function d(a){g[b]=a,++h!==e||f||(f=!0,p.resolve(j,g))}c.resolve(a).then(d,function(a){f||(f=!0,p.reject(j,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=new Array(e),h=0,i=-1,j=new this(d);++i<e;)b(a[i],i);return j}function n(a){function b(a){c.resolve(a).then(function(a){f||(f=!0,p.resolve(h,a))},function(a){f||(f=!0,p.reject(h,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=-1,h=new this(d);++g<e;)b(a[g]);return h}var o=a("immediate"),p={},q=["REJECTED"],r=["FULFILLED"],s=["PENDING"];b.exports=e,e.prototype["catch"]=function(a){return this.then(null,a)},e.prototype.then=function(a,b){if("function"!=typeof a&&this.state===r||"function"!=typeof b&&this.state===q)return this;var c=new this.constructor(d);if(this.state!==s){var e=this.state===r?a:b;g(c,e,this.outcome)}else this.queue.push(new f(c,a,b));return c},f.prototype.callFulfilled=function(a){p.resolve(this.promise,a)},f.prototype.otherCallFulfilled=function(a){g(this.promise,this.onFulfilled,a)},f.prototype.callRejected=function(a){p.reject(this.promise,a)},f.prototype.otherCallRejected=function(a){g(this.promise,this.onRejected,a)},p.resolve=function(a,b){var c=j(h,b);if("error"===c.status)return p.reject(a,c.value);var d=c.value;if(d)i(a,d);else{a.state=r,a.outcome=b;for(var e=-1,f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a},p.reject=function(a,b){a.state=q,a.outcome=b;for(var c=-1,d=a.queue.length;++c<d;)a.queue[c].callRejected(b);return a},e.resolve=k,e.reject=l,e.all=m,e.race=n},{immediate:57}],59:[function(a,b,c){"use strict";var d=a("./lib/utils/common").assign,e=a("./lib/deflate"),f=a("./lib/inflate"),g=a("./lib/zlib/constants"),h={};d(h,e,f,g),b.exports=h},{"./lib/deflate":60,"./lib/inflate":61,"./lib/utils/common":62,"./lib/zlib/constants":65}],60:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);this.options=i.assign({level:s,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:t,to:""},a||{});var b=this.options;b.raw&&b.windowBits>0?b.windowBits=-b.windowBits:b.gzip&&b.windowBits>0&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var c=h.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(c!==p)throw new Error(k[c]);if(b.header&&h.deflateSetHeader(this.strm,b.header),b.dictionary){var e;if(e="string"==typeof b.dictionary?j.string2buf(b.dictionary):"[object ArrayBuffer]"===m.call(b.dictionary)?new Uint8Array(b.dictionary):b.dictionary,c=h.deflateSetDictionary(this.strm,e),c!==p)throw new Error(k[c]);this._dict_set=!0}}function e(a,b){var c=new d(b);if(c.push(a,!0),c.err)throw c.msg||k[c.err];return c.result}function f(a,b){return b=b||{},b.raw=!0,e(a,b)}function g(a,b){return b=b||{},b.gzip=!0,e(a,b)}var h=a("./zlib/deflate"),i=a("./utils/common"),j=a("./utils/strings"),k=a("./zlib/messages"),l=a("./zlib/zstream"),m=Object.prototype.toString,n=0,o=4,p=0,q=1,r=2,s=-1,t=0,u=8;d.prototype.push=function(a,b){var c,d,e=this.strm,f=this.options.chunkSize;if(this.ended)return!1;d=b===~~b?b:b===!0?o:n,"string"==typeof a?e.input=j.string2buf(a):"[object ArrayBuffer]"===m.call(a)?e.input=new Uint8Array(a):e.input=a,e.next_in=0,e.avail_in=e.input.length;do{if(0===e.avail_out&&(e.output=new i.Buf8(f),e.next_out=0,e.avail_out=f),c=h.deflate(e,d),c!==q&&c!==p)return this.onEnd(c),this.ended=!0,!1;0!==e.avail_out&&(0!==e.avail_in||d!==o&&d!==r)||("string"===this.options.to?this.onData(j.buf2binstring(i.shrinkBuf(e.output,e.next_out))):this.onData(i.shrinkBuf(e.output,e.next_out)))}while((e.avail_in>0||0===e.avail_out)&&c!==q);return d===o?(c=h.deflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===p):d!==r||(this.onEnd(p),e.avail_out=0,!0)},d.prototype.onData=function(a){this.chunks.push(a)},d.prototype.onEnd=function(a){a===p&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Deflate=d,c.deflate=e,c.deflateRaw=f,c.gzip=g},{"./utils/common":62,"./utils/strings":63,"./zlib/deflate":67,"./zlib/messages":72,"./zlib/zstream":74}],61:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);this.options=h.assign({chunkSize:16384,windowBits:0,to:""},a||{});var b=this.options;b.raw&&b.windowBits>=0&&b.windowBits<16&&(b.windowBits=-b.windowBits,0===b.windowBits&&(b.windowBits=-15)),!(b.windowBits>=0&&b.windowBits<16)||a&&a.windowBits||(b.windowBits+=32),b.windowBits>15&&b.windowBits<48&&0===(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var c=g.inflateInit2(this.strm,b.windowBits);if(c!==j.Z_OK)throw new Error(k[c]);this.header=new m,g.inflateGetHeader(this.strm,this.header)}function e(a,b){var c=new d(b);if(c.push(a,!0),c.err)throw c.msg||k[c.err];return c.result}function f(a,b){return b=b||{},b.raw=!0,e(a,b)}var g=a("./zlib/inflate"),h=a("./utils/common"),i=a("./utils/strings"),j=a("./zlib/constants"),k=a("./zlib/messages"),l=a("./zlib/zstream"),m=a("./zlib/gzheader"),n=Object.prototype.toString;d.prototype.push=function(a,b){var c,d,e,f,k,l,m=this.strm,o=this.options.chunkSize,p=this.options.dictionary,q=!1;if(this.ended)return!1;d=b===~~b?b:b===!0?j.Z_FINISH:j.Z_NO_FLUSH,"string"==typeof a?m.input=i.binstring2buf(a):"[object ArrayBuffer]"===n.call(a)?m.input=new Uint8Array(a):m.input=a,m.next_in=0,m.avail_in=m.input.length;do{if(0===m.avail_out&&(m.output=new h.Buf8(o),m.next_out=0,m.avail_out=o),c=g.inflate(m,j.Z_NO_FLUSH),c===j.Z_NEED_DICT&&p&&(l="string"==typeof p?i.string2buf(p):"[object ArrayBuffer]"===n.call(p)?new Uint8Array(p):p,c=g.inflateSetDictionary(this.strm,l)),c===j.Z_BUF_ERROR&&q===!0&&(c=j.Z_OK,q=!1),c!==j.Z_STREAM_END&&c!==j.Z_OK)return this.onEnd(c),this.ended=!0,!1;m.next_out&&(0!==m.avail_out&&c!==j.Z_STREAM_END&&(0!==m.avail_in||d!==j.Z_FINISH&&d!==j.Z_SYNC_FLUSH)||("string"===this.options.to?(e=i.utf8border(m.output,m.next_out),f=m.next_out-e,k=i.buf2string(m.output,e),m.next_out=f,m.avail_out=o-f,f&&h.arraySet(m.output,m.output,e,f,0),this.onData(k)):this.onData(h.shrinkBuf(m.output,m.next_out)))),0===m.avail_in&&0===m.avail_out&&(q=!0)}while((m.avail_in>0||0===m.avail_out)&&c!==j.Z_STREAM_END);return c===j.Z_STREAM_END&&(d=j.Z_FINISH),d===j.Z_FINISH?(c=g.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===j.Z_OK):d!==j.Z_SYNC_FLUSH||(this.onEnd(j.Z_OK),m.avail_out=0,!0)},d.prototype.onData=function(a){this.chunks.push(a)},d.prototype.onEnd=function(a){a===j.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Inflate=d,c.inflate=e,c.inflateRaw=f,c.ungzip=e},{"./utils/common":62,"./utils/strings":63,"./zlib/constants":65,"./zlib/gzheader":68,"./zlib/inflate":70,"./zlib/messages":72,"./zlib/zstream":74}],62:[function(a,b,c){"use strict";var d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;c.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!=typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a},c.shrinkBuf=function(a,b){return a.length===b?a:a.subarray?a.subarray(0,b):(a.length=b,a)};var e={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray)return void a.set(b.subarray(c,c+d),e);for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f,g;for(d=0,b=0,c=a.length;b<c;b++)d+=a[b].length;for(g=new Uint8Array(d),e=0,b=0,c=a.length;b<c;b++)f=a[b],g.set(f,e),e+=f.length;return g}},f={arraySet:function(a,b,c,d,e){for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};c.setTyped=function(a){a?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,e)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,f))},c.setTyped(d)},{}],63:[function(a,b,c){"use strict";function d(a,b){if(b<65537&&(a.subarray&&g||!a.subarray&&f))return String.fromCharCode.apply(null,e.shrinkBuf(a,b));for(var c="",d=0;d<b;d++)c+=String.fromCharCode(a[d]);return c}var e=a("./common"),f=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch(h){f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){g=!1}for(var i=new e.Buf8(256),j=0;j<256;j++)i[j]=j>=252?6:j>=248?5:j>=240?4:j>=224?3:j>=192?2:1;i[254]=i[254]=1,c.string2buf=function(a){var b,c,d,f,g,h=a.length,i=0;for(f=0;f<h;f++)c=a.charCodeAt(f),55296===(64512&c)&&f+1<h&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),i+=c<128?1:c<2048?2:c<65536?3:4;for(b=new e.Buf8(i),g=0,f=0;g<i;f++)c=a.charCodeAt(f),55296===(64512&c)&&f+1<h&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),c<128?b[g++]=c:c<2048?(b[g++]=192|c>>>6,b[g++]=128|63&c):c<65536?(b[g++]=224|c>>>12,b[g++]=128|c>>>6&63,b[g++]=128|63&c):(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63,b[g++]=128|c>>>6&63,b[g++]=128|63&c);return b},c.buf2binstring=function(a){return d(a,a.length)},c.binstring2buf=function(a){for(var b=new e.Buf8(a.length),c=0,d=b.length;c<d;c++)b[c]=a.charCodeAt(c);return b},c.buf2string=function(a,b){var c,e,f,g,h=b||a.length,j=new Array(2*h);for(e=0,c=0;c<h;)if(f=a[c++],f<128)j[e++]=f;else if(g=i[f],g>4)j[e++]=65533,c+=g-1;else{for(f&=2===g?31:3===g?15:7;g>1&&c<h;)f=f<<6|63&a[c++],g--;g>1?j[e++]=65533:f<65536?j[e++]=f:(f-=65536,j[e++]=55296|f>>10&1023,j[e++]=56320|1023&f)}return d(j,e)},c.utf8border=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return c<0?b:0===c?b:c+i[a[c]]>b?c:b}},{"./common":62}],64:[function(a,b,c){"use strict";function d(a,b,c,d){for(var e=65535&a|0,f=a>>>16&65535|0,g=0;0!==c;){g=c>2e3?2e3:c,c-=g;do e=e+b[d++]|0,f=f+e|0;while(--g);e%=65521,f%=65521}return e|f<<16|0;
}b.exports=d},{}],65:[function(a,b,c){"use strict";b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],66:[function(a,b,c){"use strict";function d(){for(var a,b=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function e(a,b,c,d){var e=f,g=d+c;a^=-1;for(var h=d;h<g;h++)a=a>>>8^e[255&(a^b[h])];return a^-1}var f=d();b.exports=e},{}],67:[function(a,b,c){"use strict";function d(a,b){return a.msg=I[b],b}function e(a){return(a<<1)-(a>4?9:0)}function f(a){for(var b=a.length;--b>=0;)a[b]=0}function g(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out),0!==c&&(E.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function h(a,b){F._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,b),a.block_start=a.strstart,g(a.strm)}function i(a,b){a.pending_buf[a.pending++]=b}function j(a,b){a.pending_buf[a.pending++]=b>>>8&255,a.pending_buf[a.pending++]=255&b}function k(a,b,c,d){var e=a.avail_in;return e>d&&(e=d),0===e?0:(a.avail_in-=e,E.arraySet(b,a.input,a.next_in,e,c),1===a.state.wrap?a.adler=G(a.adler,b,e,c):2===a.state.wrap&&(a.adler=H(a.adler,b,e,c)),a.next_in+=e,a.total_in+=e,e)}function l(a,b){var c,d,e=a.max_chain_length,f=a.strstart,g=a.prev_length,h=a.nice_match,i=a.strstart>a.w_size-la?a.strstart-(a.w_size-la):0,j=a.window,k=a.w_mask,l=a.prev,m=a.strstart+ka,n=j[f+g-1],o=j[f+g];a.prev_length>=a.good_match&&(e>>=2),h>a.lookahead&&(h=a.lookahead);do if(c=b,j[c+g]===o&&j[c+g-1]===n&&j[c]===j[f]&&j[++c]===j[f+1]){f+=2,c++;do;while(j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&f<m);if(d=ka-(m-f),f=m-ka,d>g){if(a.match_start=b,g=d,d>=h)break;n=j[f+g-1],o=j[f+g]}}while((b=l[b&k])>i&&0!==--e);return g<=a.lookahead?g:a.lookahead}function m(a){var b,c,d,e,f,g=a.w_size;do{if(e=a.window_size-a.lookahead-a.strstart,a.strstart>=g+(g-la)){E.arraySet(a.window,a.window,g,g,0),a.match_start-=g,a.strstart-=g,a.block_start-=g,c=a.hash_size,b=c;do d=a.head[--b],a.head[b]=d>=g?d-g:0;while(--c);c=g,b=c;do d=a.prev[--b],a.prev[b]=d>=g?d-g:0;while(--c);e+=g}if(0===a.strm.avail_in)break;if(c=k(a.strm,a.window,a.strstart+a.lookahead,e),a.lookahead+=c,a.lookahead+a.insert>=ja)for(f=a.strstart-a.insert,a.ins_h=a.window[f],a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+ja-1])&a.hash_mask,a.prev[f&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=f,f++,a.insert--,!(a.lookahead+a.insert<ja)););}while(a.lookahead<la&&0!==a.strm.avail_in)}function n(a,b){var c=65535;for(c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);;){if(a.lookahead<=1){if(m(a),0===a.lookahead&&b===J)return ua;if(0===a.lookahead)break}a.strstart+=a.lookahead,a.lookahead=0;var d=a.block_start+c;if((0===a.strstart||a.strstart>=d)&&(a.lookahead=a.strstart-d,a.strstart=d,h(a,!1),0===a.strm.avail_out))return ua;if(a.strstart-a.block_start>=a.w_size-la&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.strstart>a.block_start&&(h(a,!1),0===a.strm.avail_out)?ua:ua}function o(a,b){for(var c,d;;){if(a.lookahead<la){if(m(a),a.lookahead<la&&b===J)return ua;if(0===a.lookahead)break}if(c=0,a.lookahead>=ja&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==c&&a.strstart-c<=a.w_size-la&&(a.match_length=l(a,c)),a.match_length>=ja)if(d=F._tr_tally(a,a.strstart-a.match_start,a.match_length-ja),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=ja){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else d=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=a.strstart<ja-1?a.strstart:ja-1,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function p(a,b){for(var c,d,e;;){if(a.lookahead<la){if(m(a),a.lookahead<la&&b===J)return ua;if(0===a.lookahead)break}if(c=0,a.lookahead>=ja&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=ja-1,0!==c&&a.prev_length<a.max_lazy_match&&a.strstart-c<=a.w_size-la&&(a.match_length=l(a,c),a.match_length<=5&&(a.strategy===U||a.match_length===ja&&a.strstart-a.match_start>4096)&&(a.match_length=ja-1)),a.prev_length>=ja&&a.match_length<=a.prev_length){e=a.strstart+a.lookahead-ja,d=F._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-ja),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=e&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);if(a.match_available=0,a.match_length=ja-1,a.strstart++,d&&(h(a,!1),0===a.strm.avail_out))return ua}else if(a.match_available){if(d=F._tr_tally(a,0,a.window[a.strstart-1]),d&&h(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return ua}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(d=F._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<ja-1?a.strstart:ja-1,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function q(a,b){for(var c,d,e,f,g=a.window;;){if(a.lookahead<=ka){if(m(a),a.lookahead<=ka&&b===J)return ua;if(0===a.lookahead)break}if(a.match_length=0,a.lookahead>=ja&&a.strstart>0&&(e=a.strstart-1,d=g[e],d===g[++e]&&d===g[++e]&&d===g[++e])){f=a.strstart+ka;do;while(d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&e<f);a.match_length=ka-(f-e),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=ja?(c=F._tr_tally(a,1,a.match_length-ja),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(c=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),c&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function r(a,b){for(var c;;){if(0===a.lookahead&&(m(a),0===a.lookahead)){if(b===J)return ua;break}if(a.match_length=0,c=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,c&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function s(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e}function t(a){a.window_size=2*a.w_size,f(a.head),a.max_lazy_match=D[a.level].max_lazy,a.good_match=D[a.level].good_length,a.nice_match=D[a.level].nice_length,a.max_chain_length=D[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=ja-1,a.match_available=0,a.ins_h=0}function u(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(2*ha),this.dyn_dtree=new E.Buf16(2*(2*fa+1)),this.bl_tree=new E.Buf16(2*(2*ga+1)),f(this.dyn_ltree),f(this.dyn_dtree),f(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(ia+1),this.heap=new E.Buf16(2*ea+1),f(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*ea+1),f(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function v(a){var b;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=Z,b=a.state,b.pending=0,b.pending_out=0,b.wrap<0&&(b.wrap=-b.wrap),b.status=b.wrap?na:sa,a.adler=2===b.wrap?0:1,b.last_flush=J,F._tr_init(b),O):d(a,Q)}function w(a){var b=v(a);return b===O&&t(a.state),b}function x(a,b){return a&&a.state?2!==a.state.wrap?Q:(a.state.gzhead=b,O):Q}function y(a,b,c,e,f,g){if(!a)return Q;var h=1;if(b===T&&(b=6),e<0?(h=0,e=-e):e>15&&(h=2,e-=16),f<1||f>_||c!==$||e<8||e>15||b<0||b>9||g<0||g>X)return d(a,Q);8===e&&(e=9);var i=new u;return a.state=i,i.strm=a,i.wrap=h,i.gzhead=null,i.w_bits=e,i.w_size=1<<i.w_bits,i.w_mask=i.w_size-1,i.hash_bits=f+7,i.hash_size=1<<i.hash_bits,i.hash_mask=i.hash_size-1,i.hash_shift=~~((i.hash_bits+ja-1)/ja),i.window=new E.Buf8(2*i.w_size),i.head=new E.Buf16(i.hash_size),i.prev=new E.Buf16(i.w_size),i.lit_bufsize=1<<f+6,i.pending_buf_size=4*i.lit_bufsize,i.pending_buf=new E.Buf8(i.pending_buf_size),i.d_buf=1*i.lit_bufsize,i.l_buf=3*i.lit_bufsize,i.level=b,i.strategy=g,i.method=c,w(a)}function z(a,b){return y(a,b,$,aa,ba,Y)}function A(a,b){var c,h,k,l;if(!a||!a.state||b>N||b<0)return a?d(a,Q):Q;if(h=a.state,!a.output||!a.input&&0!==a.avail_in||h.status===ta&&b!==M)return d(a,0===a.avail_out?S:Q);if(h.strm=a,c=h.last_flush,h.last_flush=b,h.status===na)if(2===h.wrap)a.adler=0,i(h,31),i(h,139),i(h,8),h.gzhead?(i(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),i(h,255&h.gzhead.time),i(h,h.gzhead.time>>8&255),i(h,h.gzhead.time>>16&255),i(h,h.gzhead.time>>24&255),i(h,9===h.level?2:h.strategy>=V||h.level<2?4:0),i(h,255&h.gzhead.os),h.gzhead.extra&&h.gzhead.extra.length&&(i(h,255&h.gzhead.extra.length),i(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(a.adler=H(a.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=oa):(i(h,0),i(h,0),i(h,0),i(h,0),i(h,0),i(h,9===h.level?2:h.strategy>=V||h.level<2?4:0),i(h,ya),h.status=sa);else{var m=$+(h.w_bits-8<<4)<<8,n=-1;n=h.strategy>=V||h.level<2?0:h.level<6?1:6===h.level?2:3,m|=n<<6,0!==h.strstart&&(m|=ma),m+=31-m%31,h.status=sa,j(h,m),0!==h.strstart&&(j(h,a.adler>>>16),j(h,65535&a.adler)),a.adler=1}if(h.status===oa)if(h.gzhead.extra){for(k=h.pending;h.gzindex<(65535&h.gzhead.extra.length)&&(h.pending!==h.pending_buf_size||(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending!==h.pending_buf_size));)i(h,255&h.gzhead.extra[h.gzindex]),h.gzindex++;h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=pa)}else h.status=pa;if(h.status===pa)if(h.gzhead.name){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.name.length?255&h.gzhead.name.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.gzindex=0,h.status=qa)}else h.status=qa;if(h.status===qa)if(h.gzhead.comment){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.comment.length?255&h.gzhead.comment.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.status=ra)}else h.status=ra;if(h.status===ra&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&g(a),h.pending+2<=h.pending_buf_size&&(i(h,255&a.adler),i(h,a.adler>>8&255),a.adler=0,h.status=sa)):h.status=sa),0!==h.pending){if(g(a),0===a.avail_out)return h.last_flush=-1,O}else if(0===a.avail_in&&e(b)<=e(c)&&b!==M)return d(a,S);if(h.status===ta&&0!==a.avail_in)return d(a,S);if(0!==a.avail_in||0!==h.lookahead||b!==J&&h.status!==ta){var o=h.strategy===V?r(h,b):h.strategy===W?q(h,b):D[h.level].func(h,b);if(o!==wa&&o!==xa||(h.status=ta),o===ua||o===wa)return 0===a.avail_out&&(h.last_flush=-1),O;if(o===va&&(b===K?F._tr_align(h):b!==N&&(F._tr_stored_block(h,0,0,!1),b===L&&(f(h.head),0===h.lookahead&&(h.strstart=0,h.block_start=0,h.insert=0))),g(a),0===a.avail_out))return h.last_flush=-1,O}return b!==M?O:h.wrap<=0?P:(2===h.wrap?(i(h,255&a.adler),i(h,a.adler>>8&255),i(h,a.adler>>16&255),i(h,a.adler>>24&255),i(h,255&a.total_in),i(h,a.total_in>>8&255),i(h,a.total_in>>16&255),i(h,a.total_in>>24&255)):(j(h,a.adler>>>16),j(h,65535&a.adler)),g(a),h.wrap>0&&(h.wrap=-h.wrap),0!==h.pending?O:P)}function B(a){var b;return a&&a.state?(b=a.state.status,b!==na&&b!==oa&&b!==pa&&b!==qa&&b!==ra&&b!==sa&&b!==ta?d(a,Q):(a.state=null,b===sa?d(a,R):O)):Q}function C(a,b){var c,d,e,g,h,i,j,k,l=b.length;if(!a||!a.state)return Q;if(c=a.state,g=c.wrap,2===g||1===g&&c.status!==na||c.lookahead)return Q;for(1===g&&(a.adler=G(a.adler,b,l,0)),c.wrap=0,l>=c.w_size&&(0===g&&(f(c.head),c.strstart=0,c.block_start=0,c.insert=0),k=new E.Buf8(c.w_size),E.arraySet(k,b,l-c.w_size,c.w_size,0),b=k,l=c.w_size),h=a.avail_in,i=a.next_in,j=a.input,a.avail_in=l,a.next_in=0,a.input=b,m(c);c.lookahead>=ja;){d=c.strstart,e=c.lookahead-(ja-1);do c.ins_h=(c.ins_h<<c.hash_shift^c.window[d+ja-1])&c.hash_mask,c.prev[d&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=d,d++;while(--e);c.strstart=d,c.lookahead=ja-1,m(c)}return c.strstart+=c.lookahead,c.block_start=c.strstart,c.insert=c.lookahead,c.lookahead=0,c.match_length=c.prev_length=ja-1,c.match_available=0,a.next_in=i,a.input=j,a.avail_in=h,c.wrap=g,O}var D,E=a("../utils/common"),F=a("./trees"),G=a("./adler32"),H=a("./crc32"),I=a("./messages"),J=0,K=1,L=3,M=4,N=5,O=0,P=1,Q=-2,R=-3,S=-5,T=-1,U=1,V=2,W=3,X=4,Y=0,Z=2,$=8,_=9,aa=15,ba=8,ca=29,da=256,ea=da+1+ca,fa=30,ga=19,ha=2*ea+1,ia=15,ja=3,ka=258,la=ka+ja+1,ma=32,na=42,oa=69,pa=73,qa=91,ra=103,sa=113,ta=666,ua=1,va=2,wa=3,xa=4,ya=3;D=[new s(0,0,0,0,n),new s(4,4,8,4,o),new s(4,5,16,8,o),new s(4,6,32,32,o),new s(4,4,16,16,p),new s(8,16,32,32,p),new s(8,16,128,128,p),new s(8,32,128,256,p),new s(32,128,258,1024,p),new s(32,258,258,4096,p)],c.deflateInit=z,c.deflateInit2=y,c.deflateReset=w,c.deflateResetKeep=v,c.deflateSetHeader=x,c.deflate=A,c.deflateEnd=B,c.deflateSetDictionary=C,c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":62,"./adler32":64,"./crc32":66,"./messages":72,"./trees":73}],68:[function(a,b,c){"use strict";function d(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}b.exports=d},{}],69:[function(a,b,c){"use strict";var d=30,e=12;b.exports=function(a,b){var c,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;c=a.state,f=a.next_in,B=a.input,g=f+(a.avail_in-5),h=a.next_out,C=a.output,i=h-(b-a.avail_out),j=h+(a.avail_out-257),k=c.dmax,l=c.wsize,m=c.whave,n=c.wnext,o=c.window,p=c.hold,q=c.bits,r=c.lencode,s=c.distcode,t=(1<<c.lenbits)-1,u=(1<<c.distbits)-1;a:do{q<15&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=r[p&t];b:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,0===w)C[h++]=65535&v;else{if(!(16&w)){if(0===(64&w)){v=r[(65535&v)+(p&(1<<w)-1)];continue b}if(32&w){c.mode=e;break a}a.msg="invalid literal/length code",c.mode=d;break a}x=65535&v,w&=15,w&&(q<w&&(p+=B[f++]<<q,q+=8),x+=p&(1<<w)-1,p>>>=w,q-=w),q<15&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=s[p&u];c:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,!(16&w)){if(0===(64&w)){v=s[(65535&v)+(p&(1<<w)-1)];continue c}a.msg="invalid distance code",c.mode=d;break a}if(y=65535&v,w&=15,q<w&&(p+=B[f++]<<q,q+=8,q<w&&(p+=B[f++]<<q,q+=8)),y+=p&(1<<w)-1,y>k){a.msg="invalid distance too far back",c.mode=d;break a}if(p>>>=w,q-=w,w=h-i,y>w){if(w=y-w,w>m&&c.sane){a.msg="invalid distance too far back",c.mode=d;break a}if(z=0,A=o,0===n){if(z+=l-w,w<x){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}else if(n<w){if(z+=l+n-w,w-=n,w<x){x-=w;do C[h++]=o[z++];while(--w);if(z=0,n<x){w=n,x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}}else if(z+=n-w,w<x){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}for(;x>2;)C[h++]=A[z++],C[h++]=A[z++],C[h++]=A[z++],x-=3;x&&(C[h++]=A[z++],x>1&&(C[h++]=A[z++]))}else{z=h-y;do C[h++]=C[z++],C[h++]=C[z++],C[h++]=C[z++],x-=3;while(x>2);x&&(C[h++]=C[z++],x>1&&(C[h++]=C[z++]))}break}}break}}while(f<g&&h<j);x=q>>3,f-=x,q-=x<<3,p&=(1<<q)-1,a.next_in=f,a.next_out=h,a.avail_in=f<g?5+(g-f):5-(f-g),a.avail_out=h<j?257+(j-h):257-(h-j),c.hold=p,c.bits=q}},{}],70:[function(a,b,c){"use strict";function d(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(a){var b;return a&&a.state?(b=a.state,a.total_in=a.total_out=b.total=0,a.msg="",b.wrap&&(a.adler=1&b.wrap),b.mode=L,b.last=0,b.havedict=0,b.dmax=32768,b.head=null,b.hold=0,b.bits=0,b.lencode=b.lendyn=new s.Buf32(pa),b.distcode=b.distdyn=new s.Buf32(qa),b.sane=1,b.back=-1,D):G}function g(a){var b;return a&&a.state?(b=a.state,b.wsize=0,b.whave=0,b.wnext=0,f(a)):G}function h(a,b){var c,d;return a&&a.state?(d=a.state,b<0?(c=0,b=-b):(c=(b>>4)+1,b<48&&(b&=15)),b&&(b<8||b>15)?G:(null!==d.window&&d.wbits!==b&&(d.window=null),d.wrap=c,d.wbits=b,g(a))):G}function i(a,b){var c,d;return a?(d=new e,a.state=d,d.window=null,c=h(a,b),c!==D&&(a.state=null),c):G}function j(a){return i(a,sa)}function k(a){if(ta){var b;for(q=new s.Buf32(512),r=new s.Buf32(32),b=0;b<144;)a.lens[b++]=8;for(;b<256;)a.lens[b++]=9;for(;b<280;)a.lens[b++]=7;for(;b<288;)a.lens[b++]=8;for(w(y,a.lens,0,288,q,0,a.work,{bits:9}),b=0;b<32;)a.lens[b++]=5;w(z,a.lens,0,32,r,0,a.work,{bits:5}),ta=!1}a.lencode=q,a.lenbits=9,a.distcode=r,a.distbits=5}function l(a,b,c,d){var e,f=a.state;return null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new s.Buf8(f.wsize)),d>=f.wsize?(s.arraySet(f.window,b,c-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(e=f.wsize-f.wnext,e>d&&(e=d),s.arraySet(f.window,b,c-d,e,f.wnext),d-=e,d?(s.arraySet(f.window,b,c-d,d,0),f.wnext=d,f.whave=f.wsize):(f.wnext+=e,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=e))),0}function m(a,b){var c,e,f,g,h,i,j,m,n,o,p,q,r,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa=0,Ba=new s.Buf8(4),Ca=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return G;c=a.state,c.mode===W&&(c.mode=X),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,o=i,p=j,xa=D;a:for(;;)switch(c.mode){case L:if(0===c.wrap){c.mode=X;break}for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(2&c.wrap&&35615===m){c.check=0,Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0),m=0,n=0,c.mode=M;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&m)<<8)+(m>>8))%31){a.msg="incorrect header check",c.mode=ma;break}if((15&m)!==K){a.msg="unknown compression method",c.mode=ma;break}if(m>>>=4,n-=4,wa=(15&m)+8,0===c.wbits)c.wbits=wa;else if(wa>c.wbits){a.msg="invalid window size",c.mode=ma;break}c.dmax=1<<wa,a.adler=c.check=1,c.mode=512&m?U:W,m=0,n=0;break;case M:for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.flags=m,(255&c.flags)!==K){a.msg="unknown compression method",c.mode=ma;break}if(57344&c.flags){a.msg="unknown header flags set",c.mode=ma;break}c.head&&(c.head.text=m>>8&1),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0,c.mode=N;case N:for(;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.time=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,Ba[2]=m>>>16&255,Ba[3]=m>>>24&255,c.check=u(c.check,Ba,4,0)),m=0,n=0,c.mode=O;case O:for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.xflags=255&m,c.head.os=m>>8),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0,c.mode=P;case P:if(1024&c.flags){for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length=m,c.head&&(c.head.extra_len=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0}else c.head&&(c.head.extra=null);c.mode=Q;case Q:if(1024&c.flags&&(q=c.length,q>i&&(q=i),q&&(c.head&&(wa=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),s.arraySet(c.head.extra,e,g,q,wa)),512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,c.length-=q),c.length))break a;c.length=0,c.mode=R;case R:if(2048&c.flags){if(0===i)break a;q=0;do wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.name+=String.fromCharCode(wa));while(wa&&q<i);if(512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.name=null);c.length=0,c.mode=S;case S:if(4096&c.flags){if(0===i)break a;q=0;do wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.comment+=String.fromCharCode(wa));while(wa&&q<i);if(512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.comment=null);c.mode=T;case T:if(512&c.flags){for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(65535&c.check)){a.msg="header crc mismatch",c.mode=ma;break}m=0,n=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),a.adler=c.check=0,c.mode=W;break;case U:for(;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}a.adler=c.check=d(m),m=0,n=0,c.mode=V;case V:if(0===c.havedict)return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,F;a.adler=c.check=1,c.mode=W;case W:if(b===B||b===C)break a;case X:if(c.last){m>>>=7&n,n-=7&n,c.mode=ja;break}for(;n<3;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}switch(c.last=1&m,m>>>=1,n-=1,3&m){case 0:c.mode=Y;break;case 1:if(k(c),c.mode=ca,b===C){m>>>=2,n-=2;break a}break;case 2:c.mode=_;break;case 3:a.msg="invalid block type",c.mode=ma}m>>>=2,n-=2;break;case Y:for(m>>>=7&n,n-=7&n;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if((65535&m)!==(m>>>16^65535)){a.msg="invalid stored block lengths",c.mode=ma;break}if(c.length=65535&m,m=0,n=0,c.mode=Z,b===C)break a;case Z:c.mode=$;case $:if(q=c.length){if(q>i&&(q=i),q>j&&(q=j),0===q)break a;s.arraySet(f,e,g,q,h),i-=q,g+=q,j-=q,h+=q,c.length-=q;break}c.mode=W;break;case _:for(;n<14;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.nlen=(31&m)+257,m>>>=5,n-=5,c.ndist=(31&m)+1,m>>>=5,n-=5,c.ncode=(15&m)+4,m>>>=4,n-=4,c.nlen>286||c.ndist>30){a.msg="too many length or distance symbols",c.mode=ma;break}c.have=0,c.mode=aa;case aa:for(;c.have<c.ncode;){for(;n<3;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.lens[Ca[c.have++]]=7&m,m>>>=3,n-=3}for(;c.have<19;)c.lens[Ca[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,ya={bits:c.lenbits},xa=w(x,c.lens,0,19,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid code lengths set",c.mode=ma;break}c.have=0,c.mode=ba;case ba:for(;c.have<c.nlen+c.ndist;){for(;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(sa<16)m>>>=qa,n-=qa,c.lens[c.have++]=sa;else{if(16===sa){for(za=qa+2;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m>>>=qa,n-=qa,0===c.have){a.msg="invalid bit length repeat",c.mode=ma;break}wa=c.lens[c.have-1],q=3+(3&m),m>>>=2,n-=2}else if(17===sa){for(za=qa+3;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=3+(7&m),m>>>=3,n-=3}else{for(za=qa+7;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=11+(127&m),m>>>=7,n-=7}if(c.have+q>c.nlen+c.ndist){a.msg="invalid bit length repeat",c.mode=ma;break}for(;q--;)c.lens[c.have++]=wa}}if(c.mode===ma)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block",c.mode=ma;break}if(c.lenbits=9,ya={bits:c.lenbits},xa=w(y,c.lens,0,c.nlen,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid literal/lengths set",c.mode=ma;break}if(c.distbits=6,c.distcode=c.distdyn,ya={bits:c.distbits},xa=w(z,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,ya),c.distbits=ya.bits,xa){a.msg="invalid distances set",c.mode=ma;break}if(c.mode=ca,b===C)break a;case ca:c.mode=da;case da:if(i>=6&&j>=258){a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,v(a,p),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,c.mode===W&&(c.back=-1);break}for(c.back=0;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(ra&&0===(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.lencode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(ta+qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,c.length=sa,0===ra){c.mode=ia;break}if(32&ra){c.back=-1,c.mode=W;break}if(64&ra){a.msg="invalid literal/length code",c.mode=ma;break}c.extra=15&ra,c.mode=ea;case ea:if(c.extra){for(za=c.extra;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=fa;case fa:for(;Aa=c.distcode[m&(1<<c.distbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(0===(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.distcode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(ta+qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,64&ra){a.msg="invalid distance code",c.mode=ma;break}c.offset=sa,c.extra=15&ra,c.mode=ga;case ga:if(c.extra){for(za=c.extra;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.offset+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back",c.mode=ma;break}c.mode=ha;case ha:if(0===j)break a;if(q=p-j,c.offset>q){if(q=c.offset-q,q>c.whave&&c.sane){a.msg="invalid distance too far back",c.mode=ma;break}q>c.wnext?(q-=c.wnext,r=c.wsize-q):r=c.wnext-q,q>c.length&&(q=c.length),pa=c.window}else pa=f,r=h-c.offset,q=c.length;q>j&&(q=j),j-=q,c.length-=q;do f[h++]=pa[r++];while(--q);0===c.length&&(c.mode=da);break;case ia:if(0===j)break a;f[h++]=c.length,j--,c.mode=da;break;case ja:if(c.wrap){for(;n<32;){if(0===i)break a;i--,m|=e[g++]<<n,n+=8}if(p-=j,a.total_out+=p,c.total+=p,p&&(a.adler=c.check=c.flags?u(c.check,f,p,h-p):t(c.check,f,p,h-p)),p=j,(c.flags?m:d(m))!==c.check){a.msg="incorrect data check",c.mode=ma;break}m=0,n=0}c.mode=ka;case ka:if(c.wrap&&c.flags){for(;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(4294967295&c.total)){a.msg="incorrect length check",c.mode=ma;break}m=0,n=0}c.mode=la;case la:xa=E;break a;case ma:xa=H;break a;case na:return I;case oa:default:return G}return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,(c.wsize||p!==a.avail_out&&c.mode<ma&&(c.mode<ja||b!==A))&&l(a,a.output,a.next_out,p-a.avail_out)?(c.mode=na,I):(o-=a.avail_in,p-=a.avail_out,a.total_in+=o,a.total_out+=p,c.total+=p,c.wrap&&p&&(a.adler=c.check=c.flags?u(c.check,f,p,a.next_out-p):t(c.check,f,p,a.next_out-p)),a.data_type=c.bits+(c.last?64:0)+(c.mode===W?128:0)+(c.mode===ca||c.mode===Z?256:0),(0===o&&0===p||b===A)&&xa===D&&(xa=J),xa)}function n(a){if(!a||!a.state)return G;var b=a.state;return b.window&&(b.window=null),a.state=null,D}function o(a,b){var c;return a&&a.state?(c=a.state,0===(2&c.wrap)?G:(c.head=b,b.done=!1,D)):G}function p(a,b){var c,d,e,f=b.length;return a&&a.state?(c=a.state,0!==c.wrap&&c.mode!==V?G:c.mode===V&&(d=1,d=t(d,b,f,0),d!==c.check)?H:(e=l(a,b,f,f))?(c.mode=na,I):(c.havedict=1,D)):G}var q,r,s=a("../utils/common"),t=a("./adler32"),u=a("./crc32"),v=a("./inffast"),w=a("./inftrees"),x=0,y=1,z=2,A=4,B=5,C=6,D=0,E=1,F=2,G=-2,H=-3,I=-4,J=-5,K=8,L=1,M=2,N=3,O=4,P=5,Q=6,R=7,S=8,T=9,U=10,V=11,W=12,X=13,Y=14,Z=15,$=16,_=17,aa=18,ba=19,ca=20,da=21,ea=22,fa=23,ga=24,ha=25,ia=26,ja=27,ka=28,la=29,ma=30,na=31,oa=32,pa=852,qa=592,ra=15,sa=ra,ta=!0;c.inflateReset=g,c.inflateReset2=h,c.inflateResetKeep=f,c.inflateInit=j,c.inflateInit2=i,c.inflate=m,c.inflateEnd=n,c.inflateGetHeader=o,c.inflateSetDictionary=p,c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":62,"./adler32":64,"./crc32":66,"./inffast":69,"./inftrees":71}],71:[function(a,b,c){"use strict";var d=a("../utils/common"),e=15,f=852,g=592,h=0,i=1,j=2,k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],n=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];b.exports=function(a,b,c,o,p,q,r,s){var t,u,v,w,x,y,z,A,B,C=s.bits,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=null,O=0,P=new d.Buf16(e+1),Q=new d.Buf16(e+1),R=null,S=0;for(D=0;D<=e;D++)P[D]=0;for(E=0;E<o;E++)P[b[c+E]]++;for(H=C,G=e;G>=1&&0===P[G];G--);if(H>G&&(H=G),0===G)return p[q++]=20971520,p[q++]=20971520,s.bits=1,0;for(F=1;F<G&&0===P[F];F++);for(H<F&&(H=F),K=1,D=1;D<=e;D++)if(K<<=1,K-=P[D],K<0)return-1;if(K>0&&(a===h||1!==G))return-1;for(Q[1]=0,D=1;D<e;D++)Q[D+1]=Q[D]+P[D];for(E=0;E<o;E++)0!==b[c+E]&&(r[Q[b[c+E]]++]=E);if(a===h?(N=R=r,y=19):a===i?(N=k,O-=257,R=l,S-=257,y=256):(N=m,R=n,y=-1),M=0,E=0,D=F,x=q,I=H,J=0,v=-1,L=1<<H,w=L-1,a===i&&L>f||a===j&&L>g)return 1;for(;;){z=D-J,r[E]<y?(A=0,B=r[E]):r[E]>y?(A=R[S+r[E]],B=N[O+r[E]]):(A=96,B=0),t=1<<D-J,u=1<<I,F=u;do u-=t,p[x+(M>>J)+u]=z<<24|A<<16|B|0;while(0!==u);for(t=1<<D-1;M&t;)t>>=1;if(0!==t?(M&=t-1,M+=t):M=0,E++,0===--P[D]){if(D===G)break;D=b[c+r[E]]}if(D>H&&(M&w)!==v){for(0===J&&(J=H),x+=F,I=D-J,K=1<<I;I+J<G&&(K-=P[I+J],!(K<=0));)I++,K<<=1;if(L+=1<<I,a===i&&L>f||a===j&&L>g)return 1;v=M&w,p[v]=H<<24|I<<16|x-q|0}}return 0!==M&&(p[x+M]=D-J<<24|64<<16|0),s.bits=H,0}},{"../utils/common":62}],72:[function(a,b,c){"use strict";b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],73:[function(a,b,c){"use strict";function d(a){for(var b=a.length;--b>=0;)a[b]=0}function e(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e,this.has_stree=a&&a.length}function f(a,b){this.dyn_tree=a,this.max_code=0,this.stat_desc=b}function g(a){return a<256?ia[a]:ia[256+(a>>>7)]}function h(a,b){a.pending_buf[a.pending++]=255&b,a.pending_buf[a.pending++]=b>>>8&255}function i(a,b,c){a.bi_valid>X-c?(a.bi_buf|=b<<a.bi_valid&65535,h(a,a.bi_buf),a.bi_buf=b>>X-a.bi_valid,a.bi_valid+=c-X):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function j(a,b,c){i(a,c[2*b],c[2*b+1])}function k(a,b){var c=0;do c|=1&a,a>>>=1,c<<=1;while(--b>0);return c>>>1}function l(a){16===a.bi_valid?(h(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)}function m(a,b){var c,d,e,f,g,h,i=b.dyn_tree,j=b.max_code,k=b.stat_desc.static_tree,l=b.stat_desc.has_stree,m=b.stat_desc.extra_bits,n=b.stat_desc.extra_base,o=b.stat_desc.max_length,p=0;for(f=0;f<=W;f++)a.bl_count[f]=0;for(i[2*a.heap[a.heap_max]+1]=0,
c=a.heap_max+1;c<V;c++)d=a.heap[c],f=i[2*i[2*d+1]+1]+1,f>o&&(f=o,p++),i[2*d+1]=f,d>j||(a.bl_count[f]++,g=0,d>=n&&(g=m[d-n]),h=i[2*d],a.opt_len+=h*(f+g),l&&(a.static_len+=h*(k[2*d+1]+g)));if(0!==p){do{for(f=o-1;0===a.bl_count[f];)f--;a.bl_count[f]--,a.bl_count[f+1]+=2,a.bl_count[o]--,p-=2}while(p>0);for(f=o;0!==f;f--)for(d=a.bl_count[f];0!==d;)e=a.heap[--c],e>j||(i[2*e+1]!==f&&(a.opt_len+=(f-i[2*e+1])*i[2*e],i[2*e+1]=f),d--)}}function n(a,b,c){var d,e,f=new Array(W+1),g=0;for(d=1;d<=W;d++)f[d]=g=g+c[d-1]<<1;for(e=0;e<=b;e++){var h=a[2*e+1];0!==h&&(a[2*e]=k(f[h]++,h))}}function o(){var a,b,c,d,f,g=new Array(W+1);for(c=0,d=0;d<Q-1;d++)for(ka[d]=c,a=0;a<1<<ba[d];a++)ja[c++]=d;for(ja[c-1]=d,f=0,d=0;d<16;d++)for(la[d]=f,a=0;a<1<<ca[d];a++)ia[f++]=d;for(f>>=7;d<T;d++)for(la[d]=f<<7,a=0;a<1<<ca[d]-7;a++)ia[256+f++]=d;for(b=0;b<=W;b++)g[b]=0;for(a=0;a<=143;)ga[2*a+1]=8,a++,g[8]++;for(;a<=255;)ga[2*a+1]=9,a++,g[9]++;for(;a<=279;)ga[2*a+1]=7,a++,g[7]++;for(;a<=287;)ga[2*a+1]=8,a++,g[8]++;for(n(ga,S+1,g),a=0;a<T;a++)ha[2*a+1]=5,ha[2*a]=k(a,5);ma=new e(ga,ba,R+1,S,W),na=new e(ha,ca,0,T,W),oa=new e(new Array(0),da,0,U,Y)}function p(a){var b;for(b=0;b<S;b++)a.dyn_ltree[2*b]=0;for(b=0;b<T;b++)a.dyn_dtree[2*b]=0;for(b=0;b<U;b++)a.bl_tree[2*b]=0;a.dyn_ltree[2*Z]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0}function q(a){a.bi_valid>8?h(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function r(a,b,c,d){q(a),d&&(h(a,c),h(a,~c)),G.arraySet(a.pending_buf,a.window,b,c,a.pending),a.pending+=c}function s(a,b,c,d){var e=2*b,f=2*c;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function t(a,b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len&&(e<a.heap_len&&s(b,a.heap[e+1],a.heap[e],a.depth)&&e++,!s(b,d,a.heap[e],a.depth));)a.heap[c]=a.heap[e],c=e,e<<=1;a.heap[c]=d}function u(a,b,c){var d,e,f,h,k=0;if(0!==a.last_lit)do d=a.pending_buf[a.d_buf+2*k]<<8|a.pending_buf[a.d_buf+2*k+1],e=a.pending_buf[a.l_buf+k],k++,0===d?j(a,e,b):(f=ja[e],j(a,f+R+1,b),h=ba[f],0!==h&&(e-=ka[f],i(a,e,h)),d--,f=g(d),j(a,f,c),h=ca[f],0!==h&&(d-=la[f],i(a,d,h)));while(k<a.last_lit);j(a,Z,b)}function v(a,b){var c,d,e,f=b.dyn_tree,g=b.stat_desc.static_tree,h=b.stat_desc.has_stree,i=b.stat_desc.elems,j=-1;for(a.heap_len=0,a.heap_max=V,c=0;c<i;c++)0!==f[2*c]?(a.heap[++a.heap_len]=j=c,a.depth[c]=0):f[2*c+1]=0;for(;a.heap_len<2;)e=a.heap[++a.heap_len]=j<2?++j:0,f[2*e]=1,a.depth[e]=0,a.opt_len--,h&&(a.static_len-=g[2*e+1]);for(b.max_code=j,c=a.heap_len>>1;c>=1;c--)t(a,f,c);e=i;do c=a.heap[1],a.heap[1]=a.heap[a.heap_len--],t(a,f,1),d=a.heap[1],a.heap[--a.heap_max]=c,a.heap[--a.heap_max]=d,f[2*e]=f[2*c]+f[2*d],a.depth[e]=(a.depth[c]>=a.depth[d]?a.depth[c]:a.depth[d])+1,f[2*c+1]=f[2*d+1]=e,a.heap[1]=e++,t(a,f,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],m(a,b),n(f,j,a.bl_count)}function w(a,b,c){var d,e,f=-1,g=b[1],h=0,i=7,j=4;for(0===g&&(i=138,j=3),b[2*(c+1)+1]=65535,d=0;d<=c;d++)e=g,g=b[2*(d+1)+1],++h<i&&e===g||(h<j?a.bl_tree[2*e]+=h:0!==e?(e!==f&&a.bl_tree[2*e]++,a.bl_tree[2*$]++):h<=10?a.bl_tree[2*_]++:a.bl_tree[2*aa]++,h=0,f=e,0===g?(i=138,j=3):e===g?(i=6,j=3):(i=7,j=4))}function x(a,b,c){var d,e,f=-1,g=b[1],h=0,k=7,l=4;for(0===g&&(k=138,l=3),d=0;d<=c;d++)if(e=g,g=b[2*(d+1)+1],!(++h<k&&e===g)){if(h<l){do j(a,e,a.bl_tree);while(0!==--h)}else 0!==e?(e!==f&&(j(a,e,a.bl_tree),h--),j(a,$,a.bl_tree),i(a,h-3,2)):h<=10?(j(a,_,a.bl_tree),i(a,h-3,3)):(j(a,aa,a.bl_tree),i(a,h-11,7));h=0,f=e,0===g?(k=138,l=3):e===g?(k=6,l=3):(k=7,l=4)}}function y(a){var b;for(w(a,a.dyn_ltree,a.l_desc.max_code),w(a,a.dyn_dtree,a.d_desc.max_code),v(a,a.bl_desc),b=U-1;b>=3&&0===a.bl_tree[2*ea[b]+1];b--);return a.opt_len+=3*(b+1)+5+5+4,b}function z(a,b,c,d){var e;for(i(a,b-257,5),i(a,c-1,5),i(a,d-4,4),e=0;e<d;e++)i(a,a.bl_tree[2*ea[e]+1],3);x(a,a.dyn_ltree,b-1),x(a,a.dyn_dtree,c-1)}function A(a){var b,c=4093624447;for(b=0;b<=31;b++,c>>>=1)if(1&c&&0!==a.dyn_ltree[2*b])return I;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return J;for(b=32;b<R;b++)if(0!==a.dyn_ltree[2*b])return J;return I}function B(a){pa||(o(),pa=!0),a.l_desc=new f(a.dyn_ltree,ma),a.d_desc=new f(a.dyn_dtree,na),a.bl_desc=new f(a.bl_tree,oa),a.bi_buf=0,a.bi_valid=0,p(a)}function C(a,b,c,d){i(a,(L<<1)+(d?1:0),3),r(a,b,c,!0)}function D(a){i(a,M<<1,3),j(a,Z,ga),l(a)}function E(a,b,c,d){var e,f,g=0;a.level>0?(a.strm.data_type===K&&(a.strm.data_type=A(a)),v(a,a.l_desc),v(a,a.d_desc),g=y(a),e=a.opt_len+3+7>>>3,f=a.static_len+3+7>>>3,f<=e&&(e=f)):e=f=c+5,c+4<=e&&b!==-1?C(a,b,c,d):a.strategy===H||f===e?(i(a,(M<<1)+(d?1:0),3),u(a,ga,ha)):(i(a,(N<<1)+(d?1:0),3),z(a,a.l_desc.max_code+1,a.d_desc.max_code+1,g+1),u(a,a.dyn_ltree,a.dyn_dtree)),p(a),d&&q(a)}function F(a,b,c){return a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&b,a.pending_buf[a.l_buf+a.last_lit]=255&c,a.last_lit++,0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(ja[c]+R+1)]++,a.dyn_dtree[2*g(b)]++),a.last_lit===a.lit_bufsize-1}var G=a("../utils/common"),H=4,I=0,J=1,K=2,L=0,M=1,N=2,O=3,P=258,Q=29,R=256,S=R+1+Q,T=30,U=19,V=2*S+1,W=15,X=16,Y=7,Z=256,$=16,_=17,aa=18,ba=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ca=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],da=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ea=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fa=512,ga=new Array(2*(S+2));d(ga);var ha=new Array(2*T);d(ha);var ia=new Array(fa);d(ia);var ja=new Array(P-O+1);d(ja);var ka=new Array(Q);d(ka);var la=new Array(T);d(la);var ma,na,oa,pa=!1;c._tr_init=B,c._tr_stored_block=C,c._tr_flush_block=E,c._tr_tally=F,c._tr_align=D},{"../utils/common":62}],74:[function(a,b,c){"use strict";function d(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}b.exports=d},{}]},{},[10])(10)});
/**
* @author: Rinat G. http://coding.kz
* @copyright: Copyright (c) 2019 Rinat G.
* @license: Licensed under the MIT license. See http://www.opensource.org/licenses/mit-license.php
*/

// Following the UMD template https://github.com/umdjs/umd/blob/master/templates/returnExportsGlobal.js
(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
      // AMD. Make globaly available as well
      define(['moment'], function (moment) {
          return factory(moment);
      });
  } else if (typeof module === 'object' && module.exports) {
      // Node / Browserify
      var moment = (typeof window != 'undefined' && typeof window.moment != 'undefined') ? window.moment : require('moment');
      module.exports = factory(moment);
  } else {
      // Browser globals
      root.Lightpick = factory(root.moment);
  }
}(this, function(moment) {
  'use strict';

  var document = window.document,

  defaults = {
      field: null,
      secondField: null,
      firstDay: 1,
      parentEl: 'body',
      lang: 'auto',
      format: 'DD/MM/YYYY',
      separator: ' - ',
      numberOfMonths: 1,
      numberOfColumns: 2,
      singleDate: true,
      autoclose: true,
      repick: false,
      startDate: null,
      endDate: null,
      minDate: null,
      maxDate: null,
      disableDates: null,
      selectForward: false,
      selectBackward: false,
      minDays: null,
      maxDays: null,
      onSelect: null,
      onOpen: null,
      onClose: null,
      onError: null,
      hoveringTooltip: true,
      hideOnBodyClick: true,
      footer: false,
      disabledDatesInRange: true,
      tooltipNights: false,
      orientation: 'auto',
      disableWeekends: false,
      locale: {
          buttons: {
              prev: '&leftarrow;',
              next: '&rightarrow;',
              close: '&times;',
              reset: 'Reset',
              apply: 'Apply',
          },
          tooltip: {
              one: 'day',
              other: 'days',
          },
          tooltipOnDisabled: null,
          pluralize: function(i, locale){
              if (typeof i === "string") i = parseInt(i, 10);

              if (i === 1 && 'one' in locale) return locale.one;
              if ('other' in locale) return locale.other;

              return '';
          }
      }
  },

  renderTopButtons = function(opts, viewMode)
  {
      return '<div class="lightpick__toolbar">'
          + ''
          + '<button type="button" class="lightpick__previous-action" data-view-mode="' + viewMode + '">' + opts.locale.buttons.prev + '</button>'
          + '<button type="button" class="lightpick__next-action" data-view-mode="' + viewMode + '">' + opts.locale.buttons.next + '</button>'
          + (!opts.autoclose ? '<button type="button" class="lightpick__close-action">' + opts.locale.buttons.close + '</button>'  : '')
          + '</div>';
  },

  weekdayName = function(opts, day, short)
  {
      return new Date(1970, 0, day).toLocaleString(opts.lang, { weekday: short ? 'short' : 'long' })
  },

  renderDay = function(opts, date, dummy, extraClass)
  {
      if (dummy) return '<div></div>';

      var date = moment(date),
          prevMonth = moment(date).subtract(1, 'month'),
          nextMonth = moment(date).add(1, 'month');

      var day = {
          time: moment(date).valueOf(),
          className: ['lightpick__day', 'is-available']
      };

      if (extraClass instanceof Array || Object.prototype.toString.call(extraClass) === '[object Array]') {
          extraClass = extraClass.filter( function( el ) {
              return ['lightpick__day', 'is-available', 'is-previous-month', 'is-next-month'].indexOf( el ) >= 0;
          });
          day.className = day.className.concat(extraClass);
      }
      else {
          day.className.push(extraClass);
      }

      if (opts.disableDates) {
          for (var i = 0; i < opts.disableDates.length; i++) {
              if (opts.disableDates[i] instanceof Array || Object.prototype.toString.call(opts.disableDates[i]) === '[object Array]') {
                  var _from = moment(opts.disableDates[i][0]),
                      _to = moment(opts.disableDates[i][1]);

                  if (_from.isValid() && _to.isValid() && date.isBetween(_from, _to, 'day', '[]')){
                      day.className.push('is-disabled');
                  }
              }
              else if (moment(opts.disableDates[i]).isValid() && moment(opts.disableDates[i]).isSame(date, 'day')) {
                  day.className.push('is-disabled');
              }

              if (day.className.indexOf('is-disabled') >= 0) {

                  if (opts.locale.tooltipOnDisabled && (!opts.startDate || date.isAfter(opts.startDate) || opts.startDate && opts.endDate)) {
                      day.className.push('disabled-tooltip');
                  }

                  if (day.className.indexOf('is-start-date') >= 0) {
                      this.setStartDate(null);
                      this.setEndDate(null);
                  }
                  else if (day.className.indexOf('is-end-date') >= 0) {
                      this.setEndDate(null);
                  }
              }
          }
      }

      if (opts.minDays && opts.startDate && !opts.endDate) {
          if (date.isBetween(moment(opts.startDate).subtract(opts.minDays - 1, 'day'), moment(opts.startDate).add(opts.minDays - 1, 'day'), 'day')) {
              day.className.push('is-disabled');

              if (opts.selectForward && date.isSameOrAfter(opts.startDate)) {
                  day.className.push('is-forward-selected');
                  day.className.push('is-in-range');
              }
          }
      }

      if (opts.maxDays && opts.startDate && !opts.endDate) {
          if (date.isSameOrBefore(moment(opts.startDate).subtract(opts.maxDays, 'day'), 'day')) {
              day.className.push('is-disabled');
          }
          else if (date.isSameOrAfter(moment(opts.startDate).add(opts.maxDays, 'day'), 'day')) {
              day.className.push('is-disabled');
          }
      }

      if (opts.repick && (opts.minDays || opts.maxDays) && opts.startDate && opts.endDate) {
          var tempStartDate = moment(opts.repickTrigger == opts.field ? opts.endDate : opts.startDate);

          if (opts.minDays) {
              if (date.isBetween(moment(tempStartDate).subtract(opts.minDays - 1, 'day'), moment(tempStartDate).add(opts.minDays - 1, 'day'), 'day')) {
                  day.className.push('is-disabled');
              }
          }

          if (opts.maxDays) {
              if (date.isSameOrBefore(moment(tempStartDate).subtract(opts.maxDays, 'day'), 'day')) {
                  day.className.push('is-disabled');
              }
              else if (date.isSameOrAfter(moment(tempStartDate).add(opts.maxDays, 'day'), 'day')) {
                  day.className.push('is-disabled');
              }
          }
      }

      if (date.isSame(new Date(), 'day')) {
          day.className.push('is-today');
      }

      if (date.isSame(opts.startDate, 'day')) {
          day.className.push('is-start-date');
      }

      if (date.isSame(opts.endDate, 'day')) {
          day.className.push('is-end-date');
      }

      if (opts.startDate && opts.endDate && date.isBetween(opts.startDate, opts.endDate, 'day', '[]')) {
          day.className.push('is-in-range');
      }

      if (moment().isSame(date, 'month')) {

      }
      else if (prevMonth.isSame(date, 'month')) {
          day.className.push('is-previous-month');
      }
      else if (nextMonth.isSame(date, 'month')) {
          day.className.push('is-next-month');
      }

      if (opts.minDate && date.isBefore(opts.minDate, 'day')) {
          day.className.push('is-disabled');
      }

      if (opts.maxDate && date.isAfter(opts.maxDate, 'day')) {
          day.className.push('is-disabled');
      }

      if (opts.selectForward && !opts.singleDate && opts.startDate && !opts.endDate && date.isBefore(opts.startDate, 'day')) {
          day.className.push('is-disabled');
      }

      if (opts.selectBackward && !opts.singleDate && opts.startDate && !opts.endDate && date.isAfter(opts.startDate, 'day')) {
          day.className.push('is-disabled');
      }

      if (opts.disableWeekends && (date.isoWeekday() == 6 || date.isoWeekday() == 7)) {
          day.className.push('is-disabled');
      }

      day.className = day.className.filter(function(value, index, self) {
          return self.indexOf(value) === index;
      });

      if (day.className.indexOf('is-disabled') >= 0 && day.className.indexOf('is-available') >= 0) {
          day.className.splice(day.className.indexOf('is-available'), 1);
      }

      var div = document.createElement('div');
      div.className = day.className.join(' ');
      div.innerHTML = date.get('date');
      div.setAttribute('data-time', day.time);

      return div.outerHTML;
  },

  renderCalendar = function(el, opts)
  {
      var html = '',
          monthDate = moment(opts.calendar[0]);

      for (var i = 0; i < opts.numberOfMonths; i++) {
          var day = moment(monthDate);

          html += '<section class="lightpick__month">';
          html += '<header class="lightpick__month-title-bar">'
          html += '<h1 class="lightpick__month-title" data-ym="' + day.format('YYYY-MM') + '">'
          + '<b class="lightpick__month-title-accent">' + day.toDate().toLocaleString(opts.lang, { month: 'long' }) + '</b> '
          + day.format('YYYY')
          + '</h1>';

          if (opts.numberOfMonths === 1) {
              html += renderTopButtons(opts, 'days');
          }

          html += '</header>'; // lightpick__month-title-bar

          html += '<div class="lightpick__days-of-the-week">';
          for (var w = opts.firstDay + 4; w < 7 + opts.firstDay + 4; ++w) {
              html += '<div class="lightpick__day-of-the-week" title="' + weekdayName(opts, w) + '">' + weekdayName(opts, w, true) + '</div>';
          }
          html += '</div>'; // lightpick__days-of-the-week

          html += '<div class="lightpick__days">';

          if (day.isoWeekday() !== opts.firstDay) {
              var prevDays = day.isoWeekday() - opts.firstDay > 0 ? day.isoWeekday() - opts.firstDay : day.isoWeekday(),
                  prevMonth = moment(day).subtract(prevDays, 'day'),
                  daysInMonth = prevMonth.daysInMonth();

              for (var d = prevMonth.get('date'); d <= daysInMonth; d++) {
                  html += renderDay(opts, prevMonth, i > 0, 'is-previous-month');

                  prevMonth.add(1, 'day');
              }
          }

          var daysInMonth = day.daysInMonth(),
              today = new Date();

          for (var d = 0; d < daysInMonth; d++) {
              html += renderDay(opts, day);

              day.add(1, 'day');
          }

          var nextMonth = moment(day),
              nextDays = 7 - nextMonth.isoWeekday() + opts.firstDay;

          if (nextDays < 7) {
              for (var d = nextMonth.get('date'); d <= nextDays; d++) {
                  html += renderDay(opts, nextMonth, i < opts.numberOfMonths - 1, 'is-next-month');

                  nextMonth.add(1, 'day');
              }
          }

          html += '</div>'; // lightpick__days

          html += '</section>'; // lightpick__month

          monthDate.add(1, 'month');
      }

      opts.calendar[1] = moment(monthDate);

      el.querySelector('.lightpick__months').innerHTML = html;
  },

  renderMonthsOfYear = function(el, opts, date)
  {
      if (date) {
          opts.calendar[0] = moment(date);
      }
      var ym = moment(opts.calendar[0]);

      var html = '<header class="lightpick__month-title-bar">'
      html += '<h1 class="lightpick__month-title">' + ym.format('YYYY') +  '</h1>';
      html += renderTopButtons(opts, 'months');
      html += '</header>';

      html += '<div class="lightpick__months-of-the-year-list">';

      for (var i = 1; i <= 12; i++) {
          html += '<div class="lightpick__month-of-the-year" data-goto-month="' + ym.format('YYYY') + '-' + i + '">'
               + '<div>' + moment(i, 'M').toDate().toLocaleString(opts.lang, { month: 'long' }) + '</div>'
               + '<div>' + ym.format('YYYY') + '</div>'
               + '</div>';
      }
      html += '</div>';

      el.querySelector('.lightpick__months-of-the-year').innerHTML = html;
  },

  updateDates = function(el, opts)
  {
      var days = el.querySelectorAll('.lightpick__day');
      [].forEach.call(days, function(day) {
          day.outerHTML = renderDay(opts, parseInt(day.getAttribute('data-time')), false, day.className.split(' '));
      });

      checkDisabledDatesInRange(el, opts);
  },

  checkDisabledDatesInRange = function(el, opts)
  {
      if (opts.disabledDatesInRange || !opts.startDate || opts.endDate || !opts.disableDates) return;

      var days = el.querySelectorAll('.lightpick__day'),
          disabledArray = opts.disableDates.map(function(entry){
              return entry instanceof Array || Object.prototype.toString.call(entry) === '[object Array]' ? entry[0] : entry;
          }),
          closestPrev = moment(disabledArray.filter(function(d) {
              return moment(d).isBefore(opts.startDate);
          }).sort(function(a,b){
              return moment(b).isAfter(moment(a));
          })[0]),
          closestNext = moment(disabledArray.filter(function(d) {
              return moment(d).isAfter(opts.startDate);
          }).sort(function(a,b){
              return moment(a).isAfter(moment(b));
          })[0]);

      [].forEach.call(days, function(dayCell) {
          var day = moment(parseInt(dayCell.getAttribute('data-time')));
          if (
              (closestPrev && day.isBefore(closestPrev) && opts.startDate.isAfter(closestPrev))
              || (closestNext && day.isAfter(closestNext) && closestNext.isAfter(opts.startDate))
          ) {
              dayCell.classList.remove('is-available');
              dayCell.classList.add('is-disabled');
          }
      });
  },

  Lightpick = function(options)
  {
      var self = this,
          opts = self.config(options);

      self.el = document.createElement('section');

      self.el.className = 'lightpick lightpick--' + opts.numberOfColumns + '-columns is-hidden';

      if (opts.parentEl !== 'body') {
          self.el.className += ' lightpick--inlined';
      }

      var html = '<div class="lightpick__inner">'
      + (opts.numberOfMonths > 1 ? renderTopButtons(opts, 'days') : '')
      + '<div class="lightpick__months"></div>'
      + '<div class="lightpick__tooltip" style="visibility: hidden"></div>'
      + '<div class="lightpick__months-of-the-year"></div>';

      if (opts.footer) {
          html += '<div class="lightpick__footer">';
          if (opts.footer === true) {
              html += '<button type="button" class="lightpick__reset-action">' + opts.locale.buttons.reset + '</button>';
              html += '<div class="lightpick__footer-message"></div>';
              html += '<button type="button" class="lightpick__apply-action">' + opts.locale.buttons.apply + '</button>';
          }
          else {
              html += opts.footer;
          }
          html += '</div>';
      }

      html += '</div>';

      self.el.innerHTML = html;


      if (opts.parentEl instanceof Node) {
          opts.parentEl.appendChild(self.el)
      } else {
          document.querySelector(opts.parentEl).appendChild(self.el);
      }

      self._onMouseDown = function(e)
      {
          if (!self.isShowing) {
              return;
          }

          e = e || window.event;
          var target = e.target || e.srcElement;
          if (!target) {
              return;
          }

          e.stopPropagation();
          e.preventDefault();

          var opts = self._opts;

          if (target.classList.contains('lightpick__day') && target.classList.contains('is-available')) {

              var day = moment(parseInt(target.getAttribute('data-time')));

              if (!opts.disabledDatesInRange && opts.disableDates && opts.startDate) {
                  var start = day.isAfter(opts.startDate) ? moment(opts.startDate) : moment(day),
                      end = day.isAfter(opts.startDate) ? moment(day) : moment(opts.startDate),

                      isInvalidRange = opts.disableDates.filter(function(d) {
                      if (d instanceof Array || Object.prototype.toString.call(d) === '[object Array]') {
                          var _from = moment(d[0]),
                              _to = moment(d[1]);

                          return _from.isValid() && _to.isValid() && (_from.isBetween(start, end, 'day', '[]') || _to.isBetween(start, end, 'day', '[]'));
                      }

                      return moment(d).isBetween(start, end, 'day', '[]');
                  });

                  if (isInvalidRange.length) {
                      self.setStartDate(null);
                      self.setEndDate(null);

                      target.dispatchEvent(new Event('mousedown'));
                      self.el.querySelector('.lightpick__tooltip').style.visibility = 'hidden';

                      updateDates(self.el, opts);
                      return;
                  }
              }

              if (opts.singleDate || (!opts.startDate && !opts.endDate) || (opts.startDate && opts.endDate)) {
                  if (opts.repick && opts.startDate && opts.endDate) {
                      if (opts.repickTrigger === opts.field) {
                          self.setStartDate(day);
                          target.classList.add('is-start-date');
                      }
                      else {
                          self.setEndDate(day);
                          target.classList.add('is-end-date');
                      }

                      if (opts.startDate.isAfter(opts.endDate)) {
                          self.swapDate();
                      }

                      if (opts.autoclose) {
                          setTimeout(function() {
                              self.hide();
                          }, 100);
                      }
                  }
                  else {
                      self.setStartDate(day);
                      self.setEndDate(null);

                      target.classList.add('is-start-date');

                      if (opts.singleDate && opts.autoclose) {
                          setTimeout(function() {
                              self.hide();
                          }, 100);
                      }
                      else if (!opts.singleDate) {
                          updateDates(self.el, opts);
                      }
                  }
              }
              else if (opts.startDate && !opts.endDate) {
                  self.setEndDate(day);

                  if (opts.startDate.isAfter(opts.endDate)) {
                      self.swapDate();
                  }

                  target.classList.add('is-end-date');


                  if (opts.autoclose) {
                      setTimeout(function() {
                          self.hide();
                      }, 100);
                  }
                  else {
                      updateDates(self.el, opts);
                  }
              }

              if (!opts.disabledDatesInRange) {
                  if (self.el.querySelectorAll('.lightpick__day.is-available').length === 0) {
                      self.setStartDate(null);
                      updateDates(self.el, opts);

                      if (opts.footer) {
                          if (typeof self._opts.onError === 'function') {
                              self._opts.onError.call(self, 'Invalid range');
                          }
                          else {
                              var footerMessage = self.el.querySelector('.lightpick__footer-message');

                              if (footerMessage) {
                                  footerMessage.innerHTML = opts.locale.not_allowed_range;

                                  setTimeout(function(){
                                      footerMessage.innerHTML = '';
                                  }, 3000);
                              }
                          }
                      }
                  }
              }
          }
          else if (target.classList.contains('lightpick__previous-action')) {
              if (target.hasAttribute('data-view-mode')) {
                  var viewMode = target.getAttribute('data-view-mode');

                  switch (viewMode) {
                      case 'days':
                          self.prevMonth();
                      break;

                      case 'months':
                          self.prevYear();
                      break;
                  }
              }
          }
          else if (target.classList.contains('lightpick__next-action')) {
              if (target.hasAttribute('data-view-mode')) {
                  var viewMode = target.getAttribute('data-view-mode');

                  switch (viewMode) {
                      case 'days':
                          self.nextMonth();
                      break;

                      case 'months':
                          self.nextYear();
                      break;
                  }
              }
          }
          else if (target.classList.contains('lightpick__close-action') || target.classList.contains('lightpick__apply-action')) {
              self.hide();
          }
          else if (target.classList.contains('lightpick__reset-action')) {
              self.reset();
          }
          else if (target.classList.contains('lightpick__month-title')) {
              if (target.hasAttribute('data-ym')) {
                  var _toolbar = self.el.querySelector('.lightpick__inner > .lightpick__toolbar');
                  if (_toolbar) {
                      _toolbar.style.display = 'none';
                  }

                  self.el.querySelector('.lightpick__months').innerHTML = '';
                  renderMonthsOfYear(self.el, opts, target.getAttribute('data-ym'));
              }
          }
          else if (target.hasAttribute('data-goto-month')) {
              var month = moment(target.getAttribute('data-goto-month'), 'YYYY-M');
              if (month.isValid()) {
                  self.gotoDate(month);

                  self.el.querySelector('.lightpick__months-of-the-year').innerHTML = '';

                  var _toolbar = self.el.querySelector('.lightpick__inner > .lightpick__toolbar');
                  if (_toolbar) {
                      _toolbar.style.display = 'flex';
                  }
              }
          }

      };
      self._onMouseEnter = function(e)
      {
          if (!self.isShowing) {
              return;
          }

          e = e || window.event;
          var target = e.target || e.srcElement;
          if (!target) {
              return;
          }

          var opts = self._opts;

          if (target.classList.contains('lightpick__day') && target.classList.contains('disabled-tooltip') && opts.locale.tooltipOnDisabled) {
              self.showTooltip(target, opts.locale.tooltipOnDisabled);
              return;
          }
          else {
              self.hideTooltip();
          }

          if (opts.singleDate || (!opts.startDate && !opts.endDate)) {
              return;
          }

          if (!target.classList.contains('lightpick__day') && !target.classList.contains('is-available')) {
              return;
          }

          if ((opts.startDate && !opts.endDate) || opts.repick) {
              var hoverDate = moment(parseInt(target.getAttribute('data-time')));

              if (!hoverDate.isValid()) {
                  return;
              }

              var startDate = (opts.startDate && !opts.endDate) || (opts.repick && opts.repickTrigger === opts.secondField) ? opts.startDate : opts.endDate;

              var days = self.el.querySelectorAll('.lightpick__day');
              [].forEach.call(days, function(day) {
                  var dt = moment(parseInt(day.getAttribute('data-time')));

                  day.classList.remove('is-flipped');

                  if (dt.isValid() && dt.isSameOrAfter(startDate, 'day') && dt.isSameOrBefore(hoverDate, 'day')) {
                      day.classList.add('is-in-range');

                      if (opts.repickTrigger === opts.field && dt.isSameOrAfter(opts.endDate)) {
                          day.classList.add('is-flipped');
                      }
                  }
                  else if (dt.isValid() && dt.isSameOrAfter(hoverDate, 'day') && dt.isSameOrBefore(startDate, 'day')) {
                      day.classList.add('is-in-range');

                      if (((opts.startDate && !opts.endDate) || opts.repickTrigger === opts.secondField) && dt.isSameOrBefore(opts.startDate)) {
                          day.classList.add('is-flipped');
                      }
                  }
                  else {
                      day.classList.remove('is-in-range');
                  }

                  if (opts.startDate && opts.endDate && opts.repick && opts.repickTrigger === opts.field) {
                      day.classList.remove('is-start-date');
                  }
                  else {
                      day.classList.remove('is-end-date');
                  }
              });

              if (opts.hoveringTooltip) {
                  days = Math.abs(hoverDate.isAfter(startDate) ? hoverDate.diff(startDate, 'day') : startDate.diff(hoverDate, 'day'));

                  if (!opts.tooltipNights) {
                      days += 1;
                  }

                  var tooltip = self.el.querySelector('.lightpick__tooltip');

                  if (days > 0 && !target.classList.contains('is-disabled')) {

                      var pluralText = '';
                      if (typeof opts.locale.pluralize === 'function') {
                          pluralText = opts.locale.pluralize.call(self, days, opts.locale.tooltip);
                      }

                      self.showTooltip(target, days + ' ' + pluralText);
                  }
                  else {
                      self.hideTooltip();
                  }
              }

              if (opts.startDate && opts.endDate && opts.repick && opts.repickTrigger === opts.field) {
                  target.classList.add('is-start-date');
              }
              else {
                  target.classList.add('is-end-date');
              }
          }
      };
      self._onChange = function(e)
      {
          e = e || window.event;
          var target = e.target || e.srcElement;
          if (!target) {
              return;
          }

          if (target.classList.contains('is-selected-lightpick-month')) {
              self.gotoMonth(target.value);
          }
          else if (target.classList.contains('is-selected-lightpick-year')) {
              self.gotoYear(target.value);
          }
      };

      self._onInputChange = function(e)
      {
          var target = e.target || e.srcElement;

          if (self._opts.singleDate) {
              if (!self._opts.autoclose) {
                  self.gotoDate(opts.field.value);
              }

              self.setStartDate(opts.field.value);
          }

          if (!self.isShowing) {
              self.show();
          }
      };

      self._onInputFocus = function(e)
      {
          var target = e.target || e.srcElement;

          self.show(target);
      };

      self._onInputClick = function(e)
      {
          var target = e.target || e.srcElement;

          self.show(target);
      };

      self._onClick = function(e)
      {
          e = e || window.event;
          var target = e.target || e.srcElement,
              parentEl = target;

          if (!target) {
              return;
          }

          do {
              if ((parentEl.classList && parentEl.classList.contains('lightpick')) || parentEl === opts.field || (opts.secondField && parentEl === opts.secondField)) {
                  return;
              }
          }
          while ((parentEl = parentEl.parentNode));

          if (self.isShowing && opts.hideOnBodyClick && target !== opts.field && parentEl !== opts.field) {
              self.hide();
          }
      };

      self.showTooltip = function(target, text)
      {
          var tooltip = self.el.querySelector('.lightpick__tooltip');

          var hasParentEl = self.el.classList.contains('lightpick--inlined'),
          dayBounding = target.getBoundingClientRect(),
          pickerBouding = hasParentEl ? self.el.parentNode.getBoundingClientRect() : self.el.getBoundingClientRect(),
          _left = (dayBounding.left - pickerBouding.left) + (dayBounding.width / 2),
          _top = dayBounding.top - pickerBouding.top;

          tooltip.style.visibility = 'visible';
          tooltip.textContent = text;

          var tooltipBounding = tooltip.getBoundingClientRect();

          _top -= tooltipBounding.height;
          _left -= (tooltipBounding.width / 2);

          setTimeout(function(){
              tooltip.style.top = _top + 'px';
              tooltip.style.left = _left + 'px';
          }, 10);
      };

      self.hideTooltip = function()
      {
          var tooltip = self.el.querySelector('.lightpick__tooltip');
          tooltip.style.visibility = 'hidden';
      };

      self.el.addEventListener('mousedown', self._onMouseDown, true);
      self.el.addEventListener('mouseenter', self._onMouseEnter, true);
      self.el.addEventListener('touchend', self._onMouseDown, true);

      self.hide();

      opts.field.addEventListener('change', self._onInputChange);
      opts.field.addEventListener('click', self._onInputClick);
      opts.field.addEventListener('focus', self._onInputFocus);

      if (opts.secondField) {
          opts.secondField.addEventListener('change', self._onInputChange);
          opts.secondField.addEventListener('click', self._onInputClick);
          opts.secondField.addEventListener('focus', self._onInputFocus);
      }
  };

  Lightpick.prototype = {
      config: function(options)
      {
          var opts = Object.assign({}, defaults, options);

          opts.field = (opts.field && opts.field.nodeName) ? opts.field : null;

          opts.calendar = [moment().set('date', 1)];

          if (opts.numberOfMonths === 1 && opts.numberOfColumns > 1) {
              opts.numberOfColumns = 1;
          }

          opts.minDate = opts.minDate && moment(opts.minDate).isValid() ? moment(opts.minDate) : null;

          opts.maxDate = opts.maxDate && moment(opts.maxDate).isValid() ? moment(opts.maxDate) : null;

          if (opts.lang === 'auto') {
              var browserLang = navigator.language || navigator.userLanguage;
              if (browserLang) {
                  opts.lang = browserLang;
              }
              else {
                  opts.lang = 'en-US';
              }
          }

          if (opts.secondField && opts.singleDate) {
              opts.singleDate = false;
          }

          if (opts.hoveringTooltip && opts.singleDate) {
              opts.hoveringTooltip = false;
          }

          if (Object.prototype.toString.call(options.locale) === '[object Object]') {
              opts.locale = Object.assign({}, defaults.locale, options.locale);
          }

          if (window.innerWidth < 480 && opts.numberOfMonths > 1) {
              opts.numberOfMonths = 1;
              opts.numberOfColumns = 1;
          }

          if (opts.repick && !opts.secondField) {
              opts.repick = false;
          }

          this._opts = Object.assign({}, opts);

          if (this.getStartDate() === null && moment(this._opts.field.value, this._opts.format).isValid()) {
              this._opts.startDate = moment(this._opts.field.value, this._opts.format);
          }

          if (this.getEndDate() === null && this._opts.secondField && moment(this._opts.secondField.value, this._opts.format).isValid()) {
              this._opts.endDate = moment(this._opts.secondField.value, this._opts.format);
          }

          this.setStartDate(this._opts.startDate, true);
          this.setEndDate(this._opts.endDate, true);

          return this._opts;
      },

      swapDate: function()
      {
          var tmp = moment(this._opts.startDate);
          this.setDateRange(this._opts.endDate, tmp);
      },

      gotoToday: function()
      {
          this.gotoDate(new Date());
      },

      gotoDate: function(date)
      {
          var date = moment(date);

          if (!date.isValid()) {
              date = moment();
          }

          date.set('date', 1);

          this._opts.calendar = [moment(date)];

          renderCalendar(this.el, this._opts);
      },

      gotoMonth: function(month)
      {
          if (isNaN(month)) {
              return;
          }

          this._opts.calendar[0].set('month', month);

          renderCalendar(this.el, this._opts);
      },

      prevMonth: function()
      {
          this._opts.calendar[0] = moment(this._opts.calendar[0]).subtract(this._opts.numberOfMonths, 'month');

          renderCalendar(this.el, this._opts);

          checkDisabledDatesInRange(this.el, this._opts);
      },

      nextMonth: function()
      {
          this._opts.calendar[0] = moment(this._opts.calendar[1]);

          renderCalendar(this.el, this._opts);

          checkDisabledDatesInRange(this.el, this._opts);
      },

      prevYear: function()
      {
          this._opts.calendar[0] = moment(this._opts.calendar[0]).subtract(1, 'year');

          renderMonthsOfYear(this.el, this._opts);
      },

      nextYear: function()
      {
          this._opts.calendar[0] = moment(this._opts.calendar[0]).add(1, 'year');

          renderMonthsOfYear(this.el, this._opts);
      },

      updatePosition: function()
      {
          if (this.el.classList.contains('lightpick--inlined')) return;

          // remove `is-hidden` class for getBoundingClientRect
          this.el.classList.remove('is-hidden');

          var rect = this._opts.field.getBoundingClientRect(),
              calRect = this.el.getBoundingClientRect(),
              orientation = this._opts.orientation.split(' '),
              top = 0,
              left = 0;

          if (orientation[0] == 'auto' || !(/top|bottom/.test(orientation[0]))) {
              if (rect.bottom + calRect.height > window.innerHeight && window.pageYOffset > calRect.height) {
                  top = (rect.top + window.pageYOffset) - calRect.height;
              }
              else {
                  top = rect.bottom + window.pageYOffset;
              }
          }
          else {
              top = rect[orientation[0]] + window.pageYOffset;

              if (orientation[0] == 'top') {
                  top -= calRect.height;
              }
          }

          if (!(/left|right/.test(orientation[0])) && (!orientation[1] || orientation[1] == 'auto' || !(/left|right/.test(orientation[1])))) {
              if (rect.left + calRect.width > window.innerWidth) {
                  left = (rect.right + window.pageXOffset) - calRect.width;
              }
              else {
                  left = rect.left + window.pageXOffset;
              }
          }
          else {
              if (/left|right/.test(orientation[0])) {
                  left = rect[orientation[0]] + window.pageXOffset;
              }
              else {
                  left = rect[orientation[1]] + window.pageXOffset;
              }

              if (orientation[0] == 'right' || orientation[1] == 'right') {
                  left -= calRect.width;
              }
          }

          this.el.classList.add('is-hidden');

          this.el.style.top = top + 'px';
          this.el.style.left = left + 'px';
      },

      setStartDate: function(date, preventOnSelect)
      {
          var dateISO = moment(date, moment.ISO_8601),
              dateOptFormat = moment(date, this._opts.format);

          if (!dateISO.isValid() && !dateOptFormat.isValid()) {
              this._opts.startDate = null;
              this._opts.field.value = '';
              return;
          }

          this._opts.startDate = moment(dateISO.isValid() ? dateISO : dateOptFormat);

          if (this._opts.singleDate || this._opts.secondField) {
              this._opts.field.value = this._opts.startDate.format(this._opts.format);
          }
          else {
              this._opts.field.value = this._opts.startDate.format(this._opts.format) + this._opts.separator + '...'
          }

          if (!preventOnSelect && typeof this._opts.onSelect === 'function') {
              this._opts.onSelect.call(this, this.getStartDate(), this.getEndDate());
          }
      },

      setEndDate: function(date, preventOnSelect)
      {
          var dateISO = moment(date, moment.ISO_8601),
              dateOptFormat = moment(date, this._opts.format);

          if (!dateISO.isValid() && !dateOptFormat.isValid()) {
              this._opts.endDate = null;

              if (this._opts.secondField) {
                  this._opts.secondField.value = '';
              }
              else if (!this._opts.singleDate && this._opts.startDate) {
                  this._opts.field.value = this._opts.startDate.format(this._opts.format) + this._opts.separator + '...'
              }
              return;
          }

          this._opts.endDate = moment(dateISO.isValid() ? dateISO : dateOptFormat);

          if (this._opts.secondField) {
              this._opts.field.value = this._opts.startDate.format(this._opts.format);
              this._opts.secondField.value = this._opts.endDate.format(this._opts.format);
          }
          else {
              this._opts.field.value = this._opts.startDate.format(this._opts.format) + this._opts.separator + this._opts.endDate.format(this._opts.format);
          }

          if (!preventOnSelect && typeof this._opts.onSelect === 'function') {
              this._opts.onSelect.call(this, this.getStartDate(), this.getEndDate());
          }
      },

      setDate: function(date)
      {
          if (!this._opts.singleDate) {
              return;
          }
          this.setStartDate(date, true);
      },

      setDateRange: function(start, end, preventOnSelect)
      {
          if (this._opts.singleDate) {
              return;
          }
          this.setStartDate(start, true);
          this.setEndDate(end, true);

          if (this.isShowing) {
              updateDates(this.el, this._opts);
          }

          if (!preventOnSelect && typeof this._opts.onSelect === 'function') {
              this._opts.onSelect.call(this, this.getStartDate(), this.getEndDate());
          }
      },

      setDisableDates: function(dates)
      {
          this._opts.disableDates = dates;

          if (this.isShowing) {
              updateDates(this.el, this._opts);
          }
      },

      getStartDate: function()
      {
          return moment(this._opts.startDate).isValid() ? this._opts.startDate : null;
      },

      getEndDate: function()
      {
          return moment(this._opts.endDate).isValid() ? this._opts.endDate : null;
      },

      getDate: function()
      {
          return moment(this._opts.startDate).isValid() ? this._opts.startDate : null;
      },

      toString: function(format)
      {
          if (this._opts.singleDate) {
              return moment(this._opts.startDate).isValid() ? this._opts.startDate.format(format) : '';
          }

          if (moment(this._opts.startDate).isValid() && moment(this._opts.endDate).isValid()) {
              return this._opts.startDate.format(format) + this._opts.separator + this._opts.endDate.format(format);
          }

          if (moment(this._opts.startDate).isValid() && !moment(this._opts.endDate).isValid()) {
              return this._opts.startDate.format(format) + this._opts.separator + '...';
          }

          if (!moment(this._opts.startDate).isValid() && moment(this._opts.endDate).isValid()) {
              return '...' + this._opts.separator + this._opts.endDate.format(format);
          }

          return '';
      },

      show: function(target)
      {
          if (!this.isShowing) {
              this.isShowing = true;

              if (this._opts.repick) {
                  this._opts.repickTrigger = target;
              }

              if (this._opts.secondField && this._opts.secondField === target && this._opts.endDate) {
                  this.gotoDate(this._opts.endDate);
              }
              else {
                  this.gotoDate(this._opts.startDate);
              }

              document.addEventListener('click', this._onClick);

              this.updatePosition();

              this.el.classList.remove('is-hidden');

              if (typeof this._opts.onOpen === 'function') {
                  this._opts.onOpen.call(this);
              }

              this.el.querySelector('.lightpick__months-of-the-year').innerHTML = '';

              if (document.activeElement && document.activeElement != document.body) {
                  document.activeElement.blur();
              }
          }
      },

      hide: function()
      {
          if (this.isShowing) {
              this.isShowing = false;

              document.removeEventListener('click', this._onClick);

              this.el.classList.add('is-hidden');

              this.el.querySelector('.lightpick__tooltip').style.visibility = 'hidden';

              if (typeof this._opts.onClose === 'function') {
                  this._opts.onClose.call(this);
              }
          }
      },

      destroy: function()
      {
          var opts = this._opts;

          this.hide();
          this.el.removeEventListener('mousedown', this._onMouseDown, true);
          this.el.removeEventListener('touchend', this._onMouseDown, true);
          this.el.removeEventListener('change', this._onChange, true);

          opts.field.removeEventListener('change', this._onInputChange);
          opts.field.removeEventListener('click', this._onInputClick);
          opts.field.removeEventListener('focus', this._onInputFocus);

          if (opts.secondField) {
              opts.secondField.removeEventListener('change', this._onInputChange);
              opts.secondField.removeEventListener('click', this._onInputClick);
              opts.secondField.removeEventListener('focus', this._onInputFocus);
          }

          if (this.el.parentNode) {
              this.el.parentNode.removeChild(this.el);
          }
      },

      reset: function()
      {
          this.setStartDate(null, true);
          this.setEndDate(null, true);

          updateDates(this.el, this._opts);

          if (typeof this._opts.onSelect === 'function') {
              this._opts.onSelect.call(this, this.getStartDate(), this.getEndDate());
          }

          this.el.querySelector('.lightpick__tooltip').style.visibility = 'hidden';
      },

      reloadOptions: function(options)
      {
          this._opts = Object.assign({}, this._opts, options);
      }

  };

  return Lightpick;
}));

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e,i;function c(){return e.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function u(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function l(e){return void 0===e}function d(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var n,s=[];for(n=0;n<e.length;++n)s.push(t(e[n],n));return s}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _(e,t){for(var n in t)m(t,n)&&(e[n]=t[n]);return m(t,"toString")&&(e.toString=t.toString),m(t,"valueOf")&&(e.valueOf=t.valueOf),e}function y(e,t,n,s){return Ot(e,t,n,s,!0).utc()}function g(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function p(e){if(null==e._isValid){var t=g(e),n=i.call(t.parsedDateParts,function(e){return null!=e}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(s=s&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return s;e._isValid=s}return e._isValid}function v(e){var t=y(NaN);return null!=e?_(g(t),e):g(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,s=0;s<n;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};var r=c.momentProperties=[];function w(e,t){var n,s,i;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=g(t)),l(t._locale)||(e._locale=t._locale),0<r.length)for(n=0;n<r.length;n++)l(i=t[s=r[n]])||(e[s]=i);return e}var t=!1;function M(e){w(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===t&&(t=!0,c.updateOffset(this),t=!1)}function S(e){return e instanceof M||null!=e&&null!=e._isAMomentObject}function D(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function k(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=D(t)),n}function a(e,t,n){var s,i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0;for(s=0;s<i;s++)(n&&e[s]!==t[s]||!n&&k(e[s])!==k(t[s]))&&a++;return a+r}function Y(e){!1===c.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function n(i,r){var a=!0;return _(function(){if(null!=c.deprecationHandler&&c.deprecationHandler(null,i),a){for(var e,t=[],n=0;n<arguments.length;n++){if(e="","object"==typeof arguments[n]){for(var s in e+="\n["+n+"] ",arguments[0])e+=s+": "+arguments[0][s]+", ";e=e.slice(0,-2)}else e=arguments[n];t.push(e)}Y(i+"\nArguments: "+Array.prototype.slice.call(t).join("")+"\n"+(new Error).stack),a=!1}return r.apply(this,arguments)},r)}var s,O={};function T(e,t){null!=c.deprecationHandler&&c.deprecationHandler(e,t),O[e]||(Y(t),O[e]=!0)}function x(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function b(e,t){var n,s=_({},e);for(n in t)m(t,n)&&(u(e[n])&&u(t[n])?(s[n]={},_(s[n],e[n]),_(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)m(e,n)&&!m(t,n)&&u(e[n])&&(s[n]=_({},s[n]));return s}function P(e){null!=e&&this.set(e)}c.suppressDeprecationWarnings=!1,c.deprecationHandler=null,s=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)m(e,t)&&n.push(t);return n};var W={};function H(e,t){var n=e.toLowerCase();W[n]=W[n+"s"]=W[t]=e}function R(e){return"string"==typeof e?W[e]||W[e.toLowerCase()]:void 0}function C(e){var t,n,s={};for(n in e)m(e,n)&&(t=R(n))&&(s[t]=e[n]);return s}var F={};function L(e,t){F[e]=t}function U(e,t,n){var s=""+Math.abs(e),i=t-s.length;return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,G=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,V={},E={};function I(e,t,n,s){var i=s;"string"==typeof s&&(i=function(){return this[s]()}),e&&(E[e]=i),t&&(E[t[0]]=function(){return U(i.apply(this,arguments),t[1],t[2])}),n&&(E[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function A(e,t){return e.isValid()?(t=j(t,e.localeData()),V[t]=V[t]||function(s){var e,i,t,r=s.match(N);for(e=0,i=r.length;e<i;e++)E[r[e]]?r[e]=E[r[e]]:r[e]=(t=r[e]).match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(e){var t,n="";for(t=0;t<i;t++)n+=x(r[t])?r[t].call(e,s):r[t];return n}}(t),V[t](e)):e.localeData().invalidDate()}function j(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(G.lastIndex=0;0<=n&&G.test(e);)e=e.replace(G,s),G.lastIndex=0,n-=1;return e}var Z=/\d/,z=/\d\d/,$=/\d{3}/,q=/\d{4}/,J=/[+-]?\d{6}/,B=/\d\d?/,Q=/\d\d\d\d?/,X=/\d\d\d\d\d\d?/,K=/\d{1,3}/,ee=/\d{1,4}/,te=/[+-]?\d{1,6}/,ne=/\d+/,se=/[+-]?\d+/,ie=/Z|[+-]\d\d:?\d\d/gi,re=/Z|[+-]\d\d(?::?\d\d)?/gi,ae=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,oe={};function ue(e,n,s){oe[e]=x(n)?n:function(e,t){return e&&s?s:n}}function le(e,t){return m(oe,e)?oe[e](t._strict,t._locale):new RegExp(de(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,i){return t||n||s||i})))}function de(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var he={};function ce(e,n){var t,s=n;for("string"==typeof e&&(e=[e]),d(n)&&(s=function(e,t){t[n]=k(e)}),t=0;t<e.length;t++)he[e[t]]=s}function fe(e,i){ce(e,function(e,t,n,s){n._w=n._w||{},i(e,n._w,n,s)})}var me=0,_e=1,ye=2,ge=3,pe=4,ve=5,we=6,Me=7,Se=8;function De(e){return ke(e)?366:365}function ke(e){return e%4==0&&e%100!=0||e%400==0}I("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),I(0,["YY",2],0,function(){return this.year()%100}),I(0,["YYYY",4],0,"year"),I(0,["YYYYY",5],0,"year"),I(0,["YYYYYY",6,!0],0,"year"),H("year","y"),L("year",1),ue("Y",se),ue("YY",B,z),ue("YYYY",ee,q),ue("YYYYY",te,J),ue("YYYYYY",te,J),ce(["YYYYY","YYYYYY"],me),ce("YYYY",function(e,t){t[me]=2===e.length?c.parseTwoDigitYear(e):k(e)}),ce("YY",function(e,t){t[me]=c.parseTwoDigitYear(e)}),ce("Y",function(e,t){t[me]=parseInt(e,10)}),c.parseTwoDigitYear=function(e){return k(e)+(68<k(e)?1900:2e3)};var Ye,Oe=Te("FullYear",!0);function Te(t,n){return function(e){return null!=e?(be(this,t,e),c.updateOffset(this,n),this):xe(this,t)}}function xe(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function be(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ke(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Pe(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function Pe(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,s=(t%(n=12)+n)%n;return e+=(t-s)/12,1===s?ke(e)?29:28:31-s%7%2}Ye=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},I("M",["MM",2],"Mo",function(){return this.month()+1}),I("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),I("MMMM",0,0,function(e){return this.localeData().months(this,e)}),H("month","M"),L("month",8),ue("M",B),ue("MM",B,z),ue("MMM",function(e,t){return t.monthsShortRegex(e)}),ue("MMMM",function(e,t){return t.monthsRegex(e)}),ce(["M","MM"],function(e,t){t[_e]=k(e)-1}),ce(["MMM","MMMM"],function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);null!=i?t[_e]=i:g(n).invalidMonth=e});var We=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,He="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Re="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Ce(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=k(t);else if(!d(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Pe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Fe(e){return null!=e?(Ce(this,e),c.updateOffset(this,!0),this):xe(this,"Month")}var Le=ae;var Ue=ae;function Ne(){function e(e,t){return t.length-e.length}var t,n,s=[],i=[],r=[];for(t=0;t<12;t++)n=y([2e3,t]),s.push(this.monthsShort(n,"")),i.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(s.sort(e),i.sort(e),r.sort(e),t=0;t<12;t++)s[t]=de(s[t]),i[t]=de(i[t]);for(t=0;t<24;t++)r[t]=de(r[t]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Ge(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&0<=e&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function Ve(e,t,n){var s=7+t-n;return-((7+Ge(e,0,s).getUTCDay()-t)%7)+s-1}function Ee(e,t,n,s,i){var r,a,o=1+7*(t-1)+(7+n-s)%7+Ve(e,s,i);return o<=0?a=De(r=e-1)+o:o>De(e)?(r=e+1,a=o-De(e)):(r=e,a=o),{year:r,dayOfYear:a}}function Ie(e,t,n){var s,i,r=Ve(e.year(),t,n),a=Math.floor((e.dayOfYear()-r-1)/7)+1;return a<1?s=a+Ae(i=e.year()-1,t,n):a>Ae(e.year(),t,n)?(s=a-Ae(e.year(),t,n),i=e.year()+1):(i=e.year(),s=a),{week:s,year:i}}function Ae(e,t,n){var s=Ve(e,t,n),i=Ve(e+1,t,n);return(De(e)-s+i)/7}I("w",["ww",2],"wo","week"),I("W",["WW",2],"Wo","isoWeek"),H("week","w"),H("isoWeek","W"),L("week",5),L("isoWeek",5),ue("w",B),ue("ww",B,z),ue("W",B),ue("WW",B,z),fe(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=k(e)});I("d",0,"do","day"),I("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),I("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),I("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),I("e",0,0,"weekday"),I("E",0,0,"isoWeekday"),H("day","d"),H("weekday","e"),H("isoWeekday","E"),L("day",11),L("weekday",11),L("isoWeekday",11),ue("d",B),ue("e",B),ue("E",B),ue("dd",function(e,t){return t.weekdaysMinRegex(e)}),ue("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ue("dddd",function(e,t){return t.weekdaysRegex(e)}),fe(["dd","ddd","dddd"],function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);null!=i?t.d=i:g(n).invalidWeekday=e}),fe(["d","e","E"],function(e,t,n,s){t[s]=k(e)});var je="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var Ze="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var ze="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var $e=ae;var qe=ae;var Je=ae;function Be(){function e(e,t){return t.length-e.length}var t,n,s,i,r,a=[],o=[],u=[],l=[];for(t=0;t<7;t++)n=y([2e3,1]).day(t),s=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),r=this.weekdays(n,""),a.push(s),o.push(i),u.push(r),l.push(s),l.push(i),l.push(r);for(a.sort(e),o.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)o[t]=de(o[t]),u[t]=de(u[t]),l[t]=de(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Qe(){return this.hours()%12||12}function Xe(e,t){I(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Ke(e,t){return t._meridiemParse}I("H",["HH",2],0,"hour"),I("h",["hh",2],0,Qe),I("k",["kk",2],0,function(){return this.hours()||24}),I("hmm",0,0,function(){return""+Qe.apply(this)+U(this.minutes(),2)}),I("hmmss",0,0,function(){return""+Qe.apply(this)+U(this.minutes(),2)+U(this.seconds(),2)}),I("Hmm",0,0,function(){return""+this.hours()+U(this.minutes(),2)}),I("Hmmss",0,0,function(){return""+this.hours()+U(this.minutes(),2)+U(this.seconds(),2)}),Xe("a",!0),Xe("A",!1),H("hour","h"),L("hour",13),ue("a",Ke),ue("A",Ke),ue("H",B),ue("h",B),ue("k",B),ue("HH",B,z),ue("hh",B,z),ue("kk",B,z),ue("hmm",Q),ue("hmmss",X),ue("Hmm",Q),ue("Hmmss",X),ce(["H","HH"],ge),ce(["k","kk"],function(e,t,n){var s=k(e);t[ge]=24===s?0:s}),ce(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ce(["h","hh"],function(e,t,n){t[ge]=k(e),g(n).bigHour=!0}),ce("hmm",function(e,t,n){var s=e.length-2;t[ge]=k(e.substr(0,s)),t[pe]=k(e.substr(s)),g(n).bigHour=!0}),ce("hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[ge]=k(e.substr(0,s)),t[pe]=k(e.substr(s,2)),t[ve]=k(e.substr(i)),g(n).bigHour=!0}),ce("Hmm",function(e,t,n){var s=e.length-2;t[ge]=k(e.substr(0,s)),t[pe]=k(e.substr(s))}),ce("Hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[ge]=k(e.substr(0,s)),t[pe]=k(e.substr(s,2)),t[ve]=k(e.substr(i))});var et,tt=Te("Hours",!0),nt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:He,monthsShort:Re,week:{dow:0,doy:6},weekdays:je,weekdaysMin:ze,weekdaysShort:Ze,meridiemParse:/[ap]\.?m?\.?/i},st={},it={};function rt(e){return e?e.toLowerCase().replace("_","-"):e}function at(e){var t=null;if(!st[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=et._abbr,require("./locale/"+e),ot(t)}catch(e){}return st[e]}function ot(e,t){var n;return e&&((n=l(t)?lt(e):ut(e,t))?et=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),et._abbr}function ut(e,t){if(null!==t){var n,s=nt;if(t.abbr=e,null!=st[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=st[e]._config;else if(null!=t.parentLocale)if(null!=st[t.parentLocale])s=st[t.parentLocale]._config;else{if(null==(n=at(t.parentLocale)))return it[t.parentLocale]||(it[t.parentLocale]=[]),it[t.parentLocale].push({name:e,config:t}),null;s=n._config}return st[e]=new P(b(s,t)),it[e]&&it[e].forEach(function(e){ut(e.name,e.config)}),ot(e),st[e]}return delete st[e],null}function lt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return et;if(!o(e)){if(t=at(e))return t;e=[e]}return function(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=rt(e[r]).split("-")).length,n=(n=rt(e[r+1]))?n.split("-"):null;0<t;){if(s=at(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&a(i,n,!0)>=t-1)break;t--}r++}return et}(e)}function dt(e){var t,n=e._a;return n&&-2===g(e).overflow&&(t=n[_e]<0||11<n[_e]?_e:n[ye]<1||n[ye]>Pe(n[me],n[_e])?ye:n[ge]<0||24<n[ge]||24===n[ge]&&(0!==n[pe]||0!==n[ve]||0!==n[we])?ge:n[pe]<0||59<n[pe]?pe:n[ve]<0||59<n[ve]?ve:n[we]<0||999<n[we]?we:-1,g(e)._overflowDayOfYear&&(t<me||ye<t)&&(t=ye),g(e)._overflowWeeks&&-1===t&&(t=Me),g(e)._overflowWeekday&&-1===t&&(t=Se),g(e).overflow=t),e}function ht(e,t,n){return null!=e?e:null!=t?t:n}function ct(e){var t,n,s,i,r,a=[];if(!e._d){var o,u;for(o=e,u=new Date(c.now()),s=o._useUTC?[u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()]:[u.getFullYear(),u.getMonth(),u.getDate()],e._w&&null==e._a[ye]&&null==e._a[_e]&&function(e){var t,n,s,i,r,a,o,u;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)r=1,a=4,n=ht(t.GG,e._a[me],Ie(Tt(),1,4).year),s=ht(t.W,1),((i=ht(t.E,1))<1||7<i)&&(u=!0);else{r=e._locale._week.dow,a=e._locale._week.doy;var l=Ie(Tt(),r,a);n=ht(t.gg,e._a[me],l.year),s=ht(t.w,l.week),null!=t.d?((i=t.d)<0||6<i)&&(u=!0):null!=t.e?(i=t.e+r,(t.e<0||6<t.e)&&(u=!0)):i=r}s<1||s>Ae(n,r,a)?g(e)._overflowWeeks=!0:null!=u?g(e)._overflowWeekday=!0:(o=Ee(n,s,i,r,a),e._a[me]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(r=ht(e._a[me],s[me]),(e._dayOfYear>De(r)||0===e._dayOfYear)&&(g(e)._overflowDayOfYear=!0),n=Ge(r,0,e._dayOfYear),e._a[_e]=n.getUTCMonth(),e._a[ye]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=s[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ge]&&0===e._a[pe]&&0===e._a[ve]&&0===e._a[we]&&(e._nextDay=!0,e._a[ge]=0),e._d=(e._useUTC?Ge:function(e,t,n,s,i,r,a){var o=new Date(e,t,n,s,i,r,a);return e<100&&0<=e&&isFinite(o.getFullYear())&&o.setFullYear(e),o}).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ge]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(g(e).weekdayMismatch=!0)}}var ft=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_t=/Z|[+-]\d\d(?::?\d\d)?/,yt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],gt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],pt=/^\/?Date\((\-?\d+)/i;function vt(e){var t,n,s,i,r,a,o=e._i,u=ft.exec(o)||mt.exec(o);if(u){for(g(e).iso=!0,t=0,n=yt.length;t<n;t++)if(yt[t][1].exec(u[1])){i=yt[t][0],s=!1!==yt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=gt.length;t<n;t++)if(gt[t][1].exec(u[3])){r=(u[2]||" ")+gt[t][0];break}if(null==r)return void(e._isValid=!1)}if(!s&&null!=r)return void(e._isValid=!1);if(u[4]){if(!_t.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(r||"")+(a||""),kt(e)}else e._isValid=!1}var wt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function Mt(e,t,n,s,i,r){var a=[function(e){var t=parseInt(e,10);{if(t<=49)return 2e3+t;if(t<=999)return 1900+t}return t}(e),Re.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return r&&a.push(parseInt(r,10)),a}var St={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Dt(e){var t,n,s,i=wt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim());if(i){var r=Mt(i[4],i[3],i[2],i[5],i[6],i[7]);if(t=i[1],n=r,s=e,t&&Ze.indexOf(t)!==new Date(n[0],n[1],n[2]).getDay()&&(g(s).weekdayMismatch=!0,!(s._isValid=!1)))return;e._a=r,e._tzm=function(e,t,n){if(e)return St[e];if(t)return 0;var s=parseInt(n,10),i=s%100;return(s-i)/100*60+i}(i[8],i[9],i[10]),e._d=Ge.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),g(e).rfc2822=!0}else e._isValid=!1}function kt(e){if(e._f!==c.ISO_8601)if(e._f!==c.RFC_2822){e._a=[],g(e).empty=!0;var t,n,s,i,r,a,o,u,l=""+e._i,d=l.length,h=0;for(s=j(e._f,e._locale).match(N)||[],t=0;t<s.length;t++)i=s[t],(n=(l.match(le(i,e))||[])[0])&&(0<(r=l.substr(0,l.indexOf(n))).length&&g(e).unusedInput.push(r),l=l.slice(l.indexOf(n)+n.length),h+=n.length),E[i]?(n?g(e).empty=!1:g(e).unusedTokens.push(i),a=i,u=e,null!=(o=n)&&m(he,a)&&he[a](o,u._a,u,a)):e._strict&&!n&&g(e).unusedTokens.push(i);g(e).charsLeftOver=d-h,0<l.length&&g(e).unusedInput.push(l),e._a[ge]<=12&&!0===g(e).bigHour&&0<e._a[ge]&&(g(e).bigHour=void 0),g(e).parsedDateParts=e._a.slice(0),g(e).meridiem=e._meridiem,e._a[ge]=function(e,t,n){var s;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):(null!=e.isPM&&((s=e.isPM(n))&&t<12&&(t+=12),s||12!==t||(t=0)),t)}(e._locale,e._a[ge],e._meridiem),ct(e),dt(e)}else Dt(e);else vt(e)}function Yt(e){var t,n,s,i,r=e._i,a=e._f;return e._locale=e._locale||lt(e._l),null===r||void 0===a&&""===r?v({nullInput:!0}):("string"==typeof r&&(e._i=r=e._locale.preparse(r)),S(r)?new M(dt(r)):(h(r)?e._d=r:o(a)?function(e){var t,n,s,i,r;if(0===e._f.length)return g(e).invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<e._f.length;i++)r=0,t=w({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],kt(t),p(t)&&(r+=g(t).charsLeftOver,r+=10*g(t).unusedTokens.length,g(t).score=r,(null==s||r<s)&&(s=r,n=t));_(e,n||t)}(e):a?kt(e):l(n=(t=e)._i)?t._d=new Date(c.now()):h(n)?t._d=new Date(n.valueOf()):"string"==typeof n?(s=t,null===(i=pt.exec(s._i))?(vt(s),!1===s._isValid&&(delete s._isValid,Dt(s),!1===s._isValid&&(delete s._isValid,c.createFromInputFallback(s)))):s._d=new Date(+i[1])):o(n)?(t._a=f(n.slice(0),function(e){return parseInt(e,10)}),ct(t)):u(n)?function(e){if(!e._d){var t=C(e._i);e._a=f([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ct(e)}}(t):d(n)?t._d=new Date(n):c.createFromInputFallback(t),p(e)||(e._d=null),e))}function Ot(e,t,n,s,i){var r,a={};return!0!==n&&!1!==n||(s=n,n=void 0),(u(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||o(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=e,a._f=t,a._strict=s,(r=new M(dt(Yt(a))))._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function Tt(e,t,n,s){return Ot(e,t,n,s,!1)}c.createFromInputFallback=n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),c.ISO_8601=function(){},c.RFC_2822=function(){};var xt=n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:v()}),bt=n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:v()});function Pt(e,t){var n,s;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Tt();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}var Wt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ht(e){var t=C(e),n=t.year||0,s=t.quarter||0,i=t.month||0,r=t.week||0,a=t.day||0,o=t.hour||0,u=t.minute||0,l=t.second||0,d=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Ye.call(Wt,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,s=0;s<Wt.length;++s)if(e[Wt[s]]){if(n)return!1;parseFloat(e[Wt[s]])!==k(e[Wt[s]])&&(n=!0)}return!0}(t),this._milliseconds=+d+1e3*l+6e4*u+1e3*o*60*60,this._days=+a+7*r,this._months=+i+3*s+12*n,this._data={},this._locale=lt(),this._bubble()}function Rt(e){return e instanceof Ht}function Ct(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ft(e,n){I(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+U(~~(e/60),2)+n+U(~~e%60,2)})}Ft("Z",":"),Ft("ZZ",""),ue("Z",re),ue("ZZ",re),ce(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ut(re,e)});var Lt=/([\+\-]|\d\d)/gi;function Ut(e,t){var n=(t||"").match(e);if(null===n)return null;var s=((n[n.length-1]||[])+"").match(Lt)||["-",0,0],i=60*s[1]+k(s[2]);return 0===i?0:"+"===s[0]?i:-i}function Nt(e,t){var n,s;return t._isUTC?(n=t.clone(),s=(S(e)||h(e)?e.valueOf():Tt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),c.updateOffset(n,!1),n):Tt(e).local()}function Gt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Vt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}c.updateOffset=function(){};var Et=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,It=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function At(e,t){var n,s,i,r=e,a=null;return Rt(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:d(e)?(r={},t?r[t]=e:r.milliseconds=e):(a=Et.exec(e))?(n="-"===a[1]?-1:1,r={y:0,d:k(a[ye])*n,h:k(a[ge])*n,m:k(a[pe])*n,s:k(a[ve])*n,ms:k(Ct(1e3*a[we]))*n}):(a=It.exec(e))?(n="-"===a[1]?-1:(a[1],1),r={y:jt(a[2],n),M:jt(a[3],n),w:jt(a[4],n),d:jt(a[5],n),h:jt(a[6],n),m:jt(a[7],n),s:jt(a[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(i=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Nt(t,e),e.isBefore(t)?n=Zt(e,t):((n=Zt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(Tt(r.from),Tt(r.to)),(r={}).ms=i.milliseconds,r.M=i.months),s=new Ht(r),Rt(e)&&m(e,"_locale")&&(s._locale=e._locale),s}function jt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Zt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function zt(s,i){return function(e,t){var n;return null===t||isNaN(+t)||(T(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=e,e=t,t=n),$t(this,At(e="string"==typeof e?+e:e,t),s),this}}function $t(e,t,n,s){var i=t._milliseconds,r=Ct(t._days),a=Ct(t._months);e.isValid()&&(s=null==s||s,a&&Ce(e,xe(e,"Month")+a*n),r&&be(e,"Date",xe(e,"Date")+r*n),i&&e._d.setTime(e._d.valueOf()+i*n),s&&c.updateOffset(e,r||a))}At.fn=Ht.prototype,At.invalid=function(){return At(NaN)};var qt=zt(1,"add"),Jt=zt(-1,"subtract");function Bt(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months");return-(n+(t-s<0?(t-s)/(s-e.clone().add(n-1,"months")):(t-s)/(e.clone().add(n+1,"months")-s)))||0}function Qt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=lt(e))&&(this._locale=t),this)}c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",c.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xt=n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Kt(){return this._locale}function en(e,t){I(0,[e,e.length],0,t)}function tn(e,t,n,s,i){var r;return null==e?Ie(this,s,i).year:((r=Ae(e,s,i))<t&&(t=r),function(e,t,n,s,i){var r=Ee(e,t,n,s,i),a=Ge(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,n,s,i))}I(0,["gg",2],0,function(){return this.weekYear()%100}),I(0,["GG",2],0,function(){return this.isoWeekYear()%100}),en("gggg","weekYear"),en("ggggg","weekYear"),en("GGGG","isoWeekYear"),en("GGGGG","isoWeekYear"),H("weekYear","gg"),H("isoWeekYear","GG"),L("weekYear",1),L("isoWeekYear",1),ue("G",se),ue("g",se),ue("GG",B,z),ue("gg",B,z),ue("GGGG",ee,q),ue("gggg",ee,q),ue("GGGGG",te,J),ue("ggggg",te,J),fe(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=k(e)}),fe(["gg","GG"],function(e,t,n,s){t[s]=c.parseTwoDigitYear(e)}),I("Q",0,"Qo","quarter"),H("quarter","Q"),L("quarter",7),ue("Q",Z),ce("Q",function(e,t){t[_e]=3*(k(e)-1)}),I("D",["DD",2],"Do","date"),H("date","D"),L("date",9),ue("D",B),ue("DD",B,z),ue("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ce(["D","DD"],ye),ce("Do",function(e,t){t[ye]=k(e.match(B)[0])});var nn=Te("Date",!0);I("DDD",["DDDD",3],"DDDo","dayOfYear"),H("dayOfYear","DDD"),L("dayOfYear",4),ue("DDD",K),ue("DDDD",$),ce(["DDD","DDDD"],function(e,t,n){n._dayOfYear=k(e)}),I("m",["mm",2],0,"minute"),H("minute","m"),L("minute",14),ue("m",B),ue("mm",B,z),ce(["m","mm"],pe);var sn=Te("Minutes",!1);I("s",["ss",2],0,"second"),H("second","s"),L("second",15),ue("s",B),ue("ss",B,z),ce(["s","ss"],ve);var rn,an=Te("Seconds",!1);for(I("S",0,0,function(){return~~(this.millisecond()/100)}),I(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),I(0,["SSS",3],0,"millisecond"),I(0,["SSSS",4],0,function(){return 10*this.millisecond()}),I(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),I(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),I(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),I(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),I(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),H("millisecond","ms"),L("millisecond",16),ue("S",K,Z),ue("SS",K,z),ue("SSS",K,$),rn="SSSS";rn.length<=9;rn+="S")ue(rn,ne);function on(e,t){t[we]=k(1e3*("0."+e))}for(rn="S";rn.length<=9;rn+="S")ce(rn,on);var un=Te("Milliseconds",!1);I("z",0,0,"zoneAbbr"),I("zz",0,0,"zoneName");var ln=M.prototype;function dn(e){return e}ln.add=qt,ln.calendar=function(e,t){var n=e||Tt(),s=Nt(n,this).startOf("day"),i=c.calendarFormat(this,s)||"sameElse",r=t&&(x(t[i])?t[i].call(this,n):t[i]);return this.format(r||this.localeData().calendar(i,this,Tt(n)))},ln.clone=function(){return new M(this)},ln.diff=function(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=Nt(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=R(t)){case"year":r=Bt(this,s)/12;break;case"month":r=Bt(this,s);break;case"quarter":r=Bt(this,s)/3;break;case"second":r=(this-s)/1e3;break;case"minute":r=(this-s)/6e4;break;case"hour":r=(this-s)/36e5;break;case"day":r=(this-s-i)/864e5;break;case"week":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:D(r)},ln.endOf=function(e){return void 0===(e=R(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},ln.format=function(e){e||(e=this.isUtc()?c.defaultFormatUtc:c.defaultFormat);var t=A(this,e);return this.localeData().postformat(t)},ln.from=function(e,t){return this.isValid()&&(S(e)&&e.isValid()||Tt(e).isValid())?At({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ln.fromNow=function(e){return this.from(Tt(),e)},ln.to=function(e,t){return this.isValid()&&(S(e)&&e.isValid()||Tt(e).isValid())?At({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ln.toNow=function(e){return this.to(Tt(),e)},ln.get=function(e){return x(this[e=R(e)])?this[e]():this},ln.invalidAt=function(){return g(this).overflow},ln.isAfter=function(e,t){var n=S(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=R(l(t)?"millisecond":t))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},ln.isBefore=function(e,t){var n=S(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=R(l(t)?"millisecond":t))?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},ln.isBetween=function(e,t,n,s){return("("===(s=s||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===s[1]?this.isBefore(t,n):!this.isAfter(t,n))},ln.isSame=function(e,t){var n,s=S(e)?e:Tt(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=R(t||"millisecond"))?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},ln.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},ln.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},ln.isValid=function(){return p(this)},ln.lang=Xt,ln.locale=Qt,ln.localeData=Kt,ln.max=bt,ln.min=xt,ln.parsingFlags=function(){return _({},g(this))},ln.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:F[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=C(e)),s=0;s<n.length;s++)this[n[s].unit](e[n[s].unit]);else if(x(this[e=R(e)]))return this[e](t);return this},ln.startOf=function(e){switch(e=R(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},ln.subtract=Jt,ln.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},ln.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},ln.toDate=function(){return new Date(this.valueOf())},ln.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||9999<n.year()?A(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):x(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",A(n,"Z")):A(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ln.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(n+s+"-MM-DD[T]HH:mm:ss.SSS"+i)},ln.toJSON=function(){return this.isValid()?this.toISOString():null},ln.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ln.unix=function(){return Math.floor(this.valueOf()/1e3)},ln.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ln.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ln.year=Oe,ln.isLeapYear=function(){return ke(this.year())},ln.weekYear=function(e){return tn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ln.isoWeekYear=function(e){return tn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},ln.quarter=ln.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},ln.month=Fe,ln.daysInMonth=function(){return Pe(this.year(),this.month())},ln.week=ln.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},ln.isoWeek=ln.isoWeeks=function(e){var t=Ie(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},ln.weeksInYear=function(){var e=this.localeData()._week;return Ae(this.year(),e.dow,e.doy)},ln.isoWeeksInYear=function(){return Ae(this.year(),1,4)},ln.date=nn,ln.day=ln.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,n,s=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-s,"d")):s},ln.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},ln.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=(n=e,s=this.localeData(),"string"==typeof n?s.weekdaysParse(n)%7||7:isNaN(n)?null:n);return this.day(this.day()%7?t:t-7)}return this.day()||7;var n,s},ln.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},ln.hour=ln.hours=tt,ln.minute=ln.minutes=sn,ln.second=ln.seconds=an,ln.millisecond=ln.milliseconds=un,ln.utcOffset=function(e,t,n){var s,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Ut(re,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(s=Gt(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),i!==e&&(!t||this._changeInProgress?$t(this,At(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,c.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:Gt(this)},ln.utc=function(e){return this.utcOffset(0,e)},ln.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Gt(this),"m")),this},ln.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Ut(ie,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},ln.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Tt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},ln.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ln.isLocal=function(){return!!this.isValid()&&!this._isUTC},ln.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ln.isUtc=Vt,ln.isUTC=Vt,ln.zoneAbbr=function(){return this._isUTC?"UTC":""},ln.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ln.dates=n("dates accessor is deprecated. Use date instead.",nn),ln.months=n("months accessor is deprecated. Use month instead",Fe),ln.years=n("years accessor is deprecated. Use year instead",Oe),ln.zone=n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),ln.isDSTShifted=n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e={};if(w(e,this),(e=Yt(e))._a){var t=e._isUTC?y(e._a):Tt(e._a);this._isDSTShifted=this.isValid()&&0<a(e._a,t.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var hn=P.prototype;function cn(e,t,n,s){var i=lt(),r=y().set(s,t);return i[n](r,e)}function fn(e,t,n){if(d(e)&&(t=e,e=void 0),e=e||"",null!=t)return cn(e,t,n,"month");var s,i=[];for(s=0;s<12;s++)i[s]=cn(e,s,n,"month");return i}function mn(e,t,n,s){"boolean"==typeof e?d(t)&&(n=t,t=void 0):(t=e,e=!1,d(n=t)&&(n=t,t=void 0)),t=t||"";var i,r=lt(),a=e?r._week.dow:0;if(null!=n)return cn(t,(n+a)%7,s,"day");var o=[];for(i=0;i<7;i++)o[i]=cn(t,(i+a)%7,s,"day");return o}hn.calendar=function(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return x(s)?s.call(t,n):s},hn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},hn.invalidDate=function(){return this._invalidDate},hn.ordinal=function(e){return this._ordinal.replace("%d",e)},hn.preparse=dn,hn.postformat=dn,hn.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return x(i)?i(e,t,n,s):i.replace(/%d/i,e)},hn.pastFuture=function(e,t){var n=this._relativeTime[0<e?"future":"past"];return x(n)?n(t):n.replace(/%s/i,t)},hn.set=function(e){var t,n;for(n in e)x(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},hn.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||We).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},hn.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[We.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},hn.monthsParse=function(e,t,n){var s,i,r;if(this._monthsParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=y([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Ye.call(this._shortMonthsParse,a))?i:null:-1!==(i=Ye.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Ye.call(this._shortMonthsParse,a))?i:-1!==(i=Ye.call(this._longMonthsParse,a))?i:null:-1!==(i=Ye.call(this._longMonthsParse,a))?i:-1!==(i=Ye.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=y([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},hn.monthsRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||Ne.call(this),e?this._monthsStrictRegex:this._monthsRegex):(m(this,"_monthsRegex")||(this._monthsRegex=Ue),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},hn.monthsShortRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||Ne.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(m(this,"_monthsShortRegex")||(this._monthsShortRegex=Le),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},hn.week=function(e){return Ie(e,this._week.dow,this._week.doy).week},hn.firstDayOfYear=function(){return this._week.doy},hn.firstDayOfWeek=function(){return this._week.dow},hn.weekdays=function(e,t){return e?o(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:o(this._weekdays)?this._weekdays:this._weekdays.standalone},hn.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},hn.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},hn.weekdaysParse=function(e,t,n){var s,i,r;if(this._weekdaysParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=y([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Ye.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Ye.call(this._weekdaysParse,a))?i:-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:-1!==(i=Ye.call(this._weekdaysParse,a))?i:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:-1!==(i=Ye.call(this._weekdaysParse,a))?i:-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=y([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[s]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},hn.weekdaysRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(m(this,"_weekdaysRegex")||(this._weekdaysRegex=$e),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},hn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(m(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=qe),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},hn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(m(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Je),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},hn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},hn.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},ot("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===k(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),c.lang=n("moment.lang is deprecated. Use moment.locale instead.",ot),c.langData=n("moment.langData is deprecated. Use moment.localeData instead.",lt);var _n=Math.abs;function yn(e,t,n,s){var i=At(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function gn(e){return e<0?Math.floor(e):Math.ceil(e)}function pn(e){return 4800*e/146097}function vn(e){return 146097*e/4800}function wn(e){return function(){return this.as(e)}}var Mn=wn("ms"),Sn=wn("s"),Dn=wn("m"),kn=wn("h"),Yn=wn("d"),On=wn("w"),Tn=wn("M"),xn=wn("y");function bn(e){return function(){return this.isValid()?this._data[e]:NaN}}var Pn=bn("milliseconds"),Wn=bn("seconds"),Hn=bn("minutes"),Rn=bn("hours"),Cn=bn("days"),Fn=bn("months"),Ln=bn("years");var Un=Math.round,Nn={ss:44,s:45,m:45,h:22,d:26,M:11};var Gn=Math.abs;function Vn(e){return(0<e)-(e<0)||+e}function En(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=Gn(this._milliseconds)/1e3,s=Gn(this._days),i=Gn(this._months);t=D((e=D(n/60))/60),n%=60,e%=60;var r=D(i/12),a=i%=12,o=s,u=t,l=e,d=n?n.toFixed(3).replace(/\.?0+$/,""):"",h=this.asSeconds();if(!h)return"P0D";var c=h<0?"-":"",f=Vn(this._months)!==Vn(h)?"-":"",m=Vn(this._days)!==Vn(h)?"-":"",_=Vn(this._milliseconds)!==Vn(h)?"-":"";return c+"P"+(r?f+r+"Y":"")+(a?f+a+"M":"")+(o?m+o+"D":"")+(u||l||d?"T":"")+(u?_+u+"H":"")+(l?_+l+"M":"")+(d?_+d+"S":"")}var In=Ht.prototype;return In.isValid=function(){return this._isValid},In.abs=function(){var e=this._data;return this._milliseconds=_n(this._milliseconds),this._days=_n(this._days),this._months=_n(this._months),e.milliseconds=_n(e.milliseconds),e.seconds=_n(e.seconds),e.minutes=_n(e.minutes),e.hours=_n(e.hours),e.months=_n(e.months),e.years=_n(e.years),this},In.add=function(e,t){return yn(this,e,t,1)},In.subtract=function(e,t){return yn(this,e,t,-1)},In.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=R(e))||"year"===e)return t=this._days+s/864e5,n=this._months+pn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(vn(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}},In.asMilliseconds=Mn,In.asSeconds=Sn,In.asMinutes=Dn,In.asHours=kn,In.asDays=Yn,In.asWeeks=On,In.asMonths=Tn,In.asYears=xn,In.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*k(this._months/12):NaN},In._bubble=function(){var e,t,n,s,i,r=this._milliseconds,a=this._days,o=this._months,u=this._data;return 0<=r&&0<=a&&0<=o||r<=0&&a<=0&&o<=0||(r+=864e5*gn(vn(o)+a),o=a=0),u.milliseconds=r%1e3,e=D(r/1e3),u.seconds=e%60,t=D(e/60),u.minutes=t%60,n=D(t/60),u.hours=n%24,o+=i=D(pn(a+=D(n/24))),a-=gn(vn(i)),s=D(o/12),o%=12,u.days=a,u.months=o,u.years=s,this},In.clone=function(){return At(this)},In.get=function(e){return e=R(e),this.isValid()?this[e+"s"]():NaN},In.milliseconds=Pn,In.seconds=Wn,In.minutes=Hn,In.hours=Rn,In.days=Cn,In.weeks=function(){return D(this.days()/7)},In.months=Fn,In.years=Ln,In.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t,n,s,i,r,a,o,u,l,d,h,c=this.localeData(),f=(n=!e,s=c,i=At(t=this).abs(),r=Un(i.as("s")),a=Un(i.as("m")),o=Un(i.as("h")),u=Un(i.as("d")),l=Un(i.as("M")),d=Un(i.as("y")),(h=r<=Nn.ss&&["s",r]||r<Nn.s&&["ss",r]||a<=1&&["m"]||a<Nn.m&&["mm",a]||o<=1&&["h"]||o<Nn.h&&["hh",o]||u<=1&&["d"]||u<Nn.d&&["dd",u]||l<=1&&["M"]||l<Nn.M&&["MM",l]||d<=1&&["y"]||["yy",d])[2]=n,h[3]=0<+t,h[4]=s,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,h));return e&&(f=c.pastFuture(+this,f)),c.postformat(f)},In.toISOString=En,In.toString=En,In.toJSON=En,In.locale=Qt,In.localeData=Kt,In.toIsoString=n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",En),In.lang=Xt,I("X",0,0,"unix"),I("x",0,0,"valueOf"),ue("x",se),ue("X",/[+-]?\d+(\.\d{1,3})?/),ce("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),ce("x",function(e,t,n){n._d=new Date(k(e))}),c.version="2.22.1",e=Tt,c.fn=ln,c.min=function(){return Pt("isBefore",[].slice.call(arguments,0))},c.max=function(){return Pt("isAfter",[].slice.call(arguments,0))},c.now=function(){return Date.now?Date.now():+new Date},c.utc=y,c.unix=function(e){return Tt(1e3*e)},c.months=function(e,t){return fn(e,t,"months")},c.isDate=h,c.locale=ot,c.invalid=v,c.duration=At,c.isMoment=S,c.weekdays=function(e,t,n){return mn(e,t,n,"weekdays")},c.parseZone=function(){return Tt.apply(null,arguments).parseZone()},c.localeData=lt,c.isDuration=Rt,c.monthsShort=function(e,t){return fn(e,t,"monthsShort")},c.weekdaysMin=function(e,t,n){return mn(e,t,n,"weekdaysMin")},c.defineLocale=ut,c.updateLocale=function(e,t){if(null!=t){var n,s,i=nt;null!=(s=at(e))&&(i=s._config),(n=new P(t=b(i,t))).parentLocale=st[e],st[e]=n,ot(e)}else null!=st[e]&&(null!=st[e].parentLocale?st[e]=st[e].parentLocale:null!=st[e]&&delete st[e]);return st[e]},c.locales=function(){return s(st)},c.weekdaysShort=function(e,t,n){return mn(e,t,n,"weekdaysShort")},c.normalizeUnits=R,c.relativeTimeRounding=function(e){return void 0===e?Un:"function"==typeof e&&(Un=e,!0)},c.relativeTimeThreshold=function(e,t){return void 0!==Nn[e]&&(void 0===t?Nn[e]:(Nn[e]=t,"s"===e&&(Nn.ss=t-1),!0))},c.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},c.prototype=ln,c.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},c});
/**
 * Object-fit Images for IE11
 * @link https://github.com/renansan/object-fit-images
 * @link npm.im/object-fit-images 3.2.4
 *
 * The project's archived by the owner, so we made changes directly in this file. More info:
 * @link https://github.com/bfred-it/object-fit-images/issues/104#issuecomment-437572463
 */
 var objectFitImages=function(){"use strict";function t(t,e){return"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='"+t+"' height='"+e+"'%3E%3C/svg%3E"}function e(t){if(t.srcset&&!m&&window.picturefill){var e=window.picturefill._;t[e.ns]&&t[e.ns].evaled||e.fillImg(t,{reselect:!0}),t[e.ns].curSrc||(t[e.ns].supported=!1,e.fillImg(t,{reselect:!0})),t.currentSrc=t[e.ns].curSrc||t.src}}function r(t){for(var e,r=getComputedStyle(t).fontFamily,i={};null!==(e=u.exec(r));)i[e[1]]=e[2];return i}function i(e,r,i){var n=t(r||1,i||0);p.call(e,"src")!==n&&b.call(e,"src",n)}function n(t,e){t.naturalWidth?e(t):setTimeout(n,100,t,e)}function c(t){var c=r(t),o=t[a];if(t.naturalWidth){if(c["object-fit"]=c["object-fit"]||"fill",!o.img){if("fill"===c["object-fit"])return;if(!o.skipTest&&g&&!c["object-position"])return}if(!o.img){o.img=new Image(t.width,t.height),o.img.srcset=p.call(t,"data-ofi-srcset")||t.srcset;var u=p.call(t,"data-ofi-src")||t.src;u&&(o.img.src=u),b.call(t,"data-ofi-src",t.src),t.srcset&&b.call(t,"data-ofi-srcset",t.srcset),i(t,t.naturalWidth||t.width,t.naturalHeight||t.height),t.srcset&&(t.srcset="");try{s(t)}catch(t){window.console&&console.warn("https://bit.ly/ofi-old-browser")}}e(o.img);(o.img.currentSrc||o.img.src)&&(t.style.backgroundImage='url("'+(o.img.currentSrc||o.img.src).replace(/"/g,'\\"')+'")'),t.style.backgroundImage='url("'+(o.img.currentSrc||o.img.src).replace(/"/g,'\\"')+'")',t.style.backgroundPosition=c["object-position"]||"center",t.style.backgroundRepeat="no-repeat",t.style.backgroundOrigin="content-box",/scale-down/.test(c["object-fit"])?n(o.img,function(){o.img.naturalWidth>t.width||o.img.naturalHeight>t.height?t.style.backgroundSize="contain":t.style.backgroundSize="auto"}):t.style.backgroundSize=c["object-fit"].replace("none","auto").replace("fill","100% 100%"),n(o.img,function(e){i(t,e.naturalWidth,e.naturalHeight)})}}function s(t){var e={get:function(e){return t[a].img[e||"src"]},set:function(e,r){return t[a].img[r||"src"]=e,b.call(t,"data-ofi-"+r,e),c(t),e}};Object.defineProperty(t,"src",e),Object.defineProperty(t,"currentSrc",{get:function(){return e.get("currentSrc")}}),Object.defineProperty(t,"srcset",{get:function(){return e.get("srcset")},set:function(t){return e.set(t,"srcset")}})}function o(t,e){var r=!h&&!t;if(e=e||{},t=t||"img",f&&!e.skipTest||!d)return!1;"img"===t?t=document.getElementsByTagName("img"):"string"==typeof t?t=document.querySelectorAll(t):"length"in t||(t=[t]);for(var i=0;i<t.length;i++)t[i][a]=t[i][a]||{skipTest:e.skipTest},c(t[i]);r&&(document.body.addEventListener("load",function(t){"IMG"===t.target.tagName&&o(t.target,{skipTest:e.skipTest})},!0),h=!0,t="img"),e.watchMQ&&window.addEventListener("resize",o.bind(null,t,{skipTest:e.skipTest}))}var a="bfred-it:object-fit-images",u=/(object-fit|object-position)\s*:\s*([-.\w\s%]+)/g,l="undefined"==typeof Image?{style:{"object-position":1}}:new Image,g="object-fit"in l.style,f="object-position"in l.style,d="background-size"in l.style,m="string"==typeof l.currentSrc,p=l.getAttribute,b=l.setAttribute,h=!1;return o.supportsObjectFit=g,o.supportsObjectPosition=f,function(){function t(t,e){return t[a]&&t[a].img&&("src"===e||"srcset"===e)?t[a].img:t}f||(HTMLImageElement.prototype.getAttribute=function(e){return p.call(t(this,e),e)},HTMLImageElement.prototype.setAttribute=function(e,r){return b.call(t(this,e),e,String(r))})}(),o}();

/*!
 * Packery layout mode PACKAGED v2.0.1
 * sub-classes Packery
 */

!function(a,b){"function"==typeof define&&define.amd?define("packery/js/rect",b):"object"==typeof module&&module.exports?module.exports=b():(a.Packery=a.Packery||{},a.Packery.Rect=b())}(window,function(){function a(b){for(var c in a.defaults)this[c]=a.defaults[c];for(c in b)this[c]=b[c]}a.defaults={x:0,y:0,width:0,height:0};var b=a.prototype;return b.contains=function(a){var b=a.width||0,c=a.height||0;return this.x<=a.x&&this.y<=a.y&&this.x+this.width>=a.x+b&&this.y+this.height>=a.y+c},b.overlaps=function(a){var b=this.x+this.width,c=this.y+this.height,d=a.x+a.width,e=a.y+a.height;return this.x<d&&b>a.x&&this.y<e&&c>a.y},b.getMaximalFreeRects=function(b){if(!this.overlaps(b))return!1;var c,d=[],e=this.x+this.width,f=this.y+this.height,g=b.x+b.width,h=b.y+b.height;return this.y<b.y&&(c=new a({x:this.x,y:this.y,width:this.width,height:b.y-this.y}),d.push(c)),e>g&&(c=new a({x:g,y:this.y,width:e-g,height:this.height}),d.push(c)),f>h&&(c=new a({x:this.x,y:h,width:this.width,height:f-h}),d.push(c)),this.x<b.x&&(c=new a({x:this.x,y:this.y,width:b.x-this.x,height:this.height}),d.push(c)),d},b.canFit=function(a){return this.width>=a.width&&this.height>=a.height},a}),function(a,b){if("function"==typeof define&&define.amd)define("packery/js/packer",["./rect"],b);else if("object"==typeof module&&module.exports)module.exports=b(require("./rect"));else{var c=a.Packery=a.Packery||{};c.Packer=b(c.Rect)}}(window,function(a){function b(a,b,c){this.width=a||0,this.height=b||0,this.sortDirection=c||"downwardLeftToRight",this.reset()}var c=b.prototype;c.reset=function(){this.spaces=[];var b=new a({x:0,y:0,width:this.width,height:this.height});this.spaces.push(b),this.sorter=d[this.sortDirection]||d.downwardLeftToRight},c.pack=function(a){for(var b=0;b<this.spaces.length;b++){var c=this.spaces[b];if(c.canFit(a)){this.placeInSpace(a,c);break}}},c.columnPack=function(a){for(var b=0;b<this.spaces.length;b++){var c=this.spaces[b],d=c.x<=a.x&&c.x+c.width>=a.x+a.width&&c.height>=a.height-.01;if(d){a.y=c.y,this.placed(a);break}}},c.rowPack=function(a){for(var b=0;b<this.spaces.length;b++){var c=this.spaces[b],d=c.y<=a.y&&c.y+c.height>=a.y+a.height&&c.width>=a.width-.01;if(d){a.x=c.x,this.placed(a);break}}},c.placeInSpace=function(a,b){a.x=b.x,a.y=b.y,this.placed(a)},c.placed=function(a){for(var b=[],c=0;c<this.spaces.length;c++){var d=this.spaces[c],e=d.getMaximalFreeRects(a);e?b.push.apply(b,e):b.push(d)}this.spaces=b,this.mergeSortSpaces()},c.mergeSortSpaces=function(){b.mergeRects(this.spaces),this.spaces.sort(this.sorter)},c.addSpace=function(a){this.spaces.push(a),this.mergeSortSpaces()},b.mergeRects=function(a){var b=0,c=a[b];a:for(;c;){for(var d=0,e=a[b+d];e;){if(e==c)d++;else{if(e.contains(c)){a.splice(b,1),c=a[b];continue a}c.contains(e)?a.splice(b+d,1):d++}e=a[b+d]}b++,c=a[b]}return a};var d={downwardLeftToRight:function(a,b){return a.y-b.y||a.x-b.x},rightwardTopToBottom:function(a,b){return a.x-b.x||a.y-b.y}};return b}),function(a,b){"function"==typeof define&&define.amd?define("packery/js/item",["outlayer/outlayer","./rect"],b):"object"==typeof module&&module.exports?module.exports=b(require("outlayer"),require("./rect")):a.Packery.Item=b(a.Outlayer,a.Packery.Rect)}(window,function(a,b){var c=document.documentElement.style,d="string"==typeof c.transform?"transform":"WebkitTransform",e=function(){a.Item.apply(this,arguments)},f=e.prototype=Object.create(a.Item.prototype),g=f._create;f._create=function(){g.call(this),this.rect=new b};var h=f.moveTo;return f.moveTo=function(a,b){var c=Math.abs(this.position.x-a),d=Math.abs(this.position.y-b),e=this.layout.dragItemCount&&!this.isPlacing&&!this.isTransitioning&&1>c&&1>d;return e?void this.goTo(a,b):void h.apply(this,arguments)},f.enablePlacing=function(){this.removeTransitionStyles(),this.isTransitioning&&d&&(this.element.style[d]="none"),this.isTransitioning=!1,this.getSize(),this.layout._setRectSize(this.element,this.rect),this.isPlacing=!0},f.disablePlacing=function(){this.isPlacing=!1},f.removeElem=function(){this.element.parentNode.removeChild(this.element),this.layout.packer.addSpace(this.rect),this.emitEvent("remove",[this])},f.showDropPlaceholder=function(){var a=this.dropPlaceholder;a||(a=this.dropPlaceholder=document.createElement("div"),a.className="packery-drop-placeholder",a.style.position="absolute"),a.style.width=this.size.width+"px",a.style.height=this.size.height+"px",this.positionDropPlaceholder(),this.layout.element.appendChild(a)},f.positionDropPlaceholder=function(){this.dropPlaceholder.style[d]="translate("+this.rect.x+"px, "+this.rect.y+"px)"},f.hideDropPlaceholder=function(){this.layout.element.removeChild(this.dropPlaceholder)},e}),function(a,b){"function"==typeof define&&define.amd?define("packery/js/packery",["get-size/get-size","outlayer/outlayer","./rect","./packer","./item"],b):"object"==typeof module&&module.exports?module.exports=b(require("get-size"),require("outlayer"),require("./rect"),require("./packer"),require("./item")):a.Packery=b(a.getSize,a.Outlayer,a.Packery.Rect,a.Packery.Packer,a.Packery.Item)}(window,function(a,b,c,d,e){function f(a,b){return a.position.y-b.position.y||a.position.x-b.position.x}function g(a,b){return a.position.x-b.position.x||a.position.y-b.position.y}function h(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(c*c+d*d)}c.prototype.canFit=function(a){return this.width>=a.width-1&&this.height>=a.height-1};var i=b.create("packery");i.Item=e;var j=i.prototype;j._create=function(){b.prototype._create.call(this),this.packer=new d,this.shiftPacker=new d,this.isEnabled=!0,this.dragItemCount=0;var a=this;this.handleDraggabilly={dragStart:function(){a.itemDragStart(this.element)},dragMove:function(){a.itemDragMove(this.element,this.position.x,this.position.y)},dragEnd:function(){a.itemDragEnd(this.element)}},this.handleUIDraggable={start:function(b,c){c&&a.itemDragStart(b.currentTarget)},drag:function(b,c){c&&a.itemDragMove(b.currentTarget,c.position.left,c.position.top)},stop:function(b,c){c&&a.itemDragEnd(b.currentTarget)}}},j._resetLayout=function(){this.getSize(),this._getMeasurements();var a,b,c;this._getOption("horizontal")?(a=1/0,b=this.size.innerHeight+this.gutter,c="rightwardTopToBottom"):(a=this.size.innerWidth+this.gutter,b=1/0,c="downwardLeftToRight"),this.packer.width=this.shiftPacker.width=a,this.packer.height=this.shiftPacker.height=b,this.packer.sortDirection=this.shiftPacker.sortDirection=c,this.packer.reset(),this.maxY=0,this.maxX=0},j._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},j._getItemLayoutPosition=function(a){if(this._setRectSize(a.element,a.rect),this.isShifting||this.dragItemCount>0){var b=this._getPackMethod();this.packer[b](a.rect)}else this.packer.pack(a.rect);return this._setMaxXY(a.rect),a.rect},j.shiftLayout=function(){this.isShifting=!0,this.layout(),delete this.isShifting},j._getPackMethod=function(){return this._getOption("horizontal")?"rowPack":"columnPack"},j._setMaxXY=function(a){this.maxX=Math.max(a.x+a.width,this.maxX),this.maxY=Math.max(a.y+a.height,this.maxY)},j._setRectSize=function(b,c){var d=a(b),e=d.outerWidth,f=d.outerHeight;(e||f)&&(e=this._applyGridGutter(e,this.columnWidth),f=this._applyGridGutter(f,this.rowHeight)),c.width=Math.min(e,this.packer.width),c.height=Math.min(f,this.packer.height)},j._applyGridGutter=function(a,b){if(!b)return a+this.gutter;b+=this.gutter;var c=a%b,d=c&&1>c?"round":"ceil";return a=Math[d](a/b)*b},j._getContainerSize=function(){return this._getOption("horizontal")?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}},j._manageStamp=function(a){var b,d=this.getItem(a);if(d&&d.isPlacing)b=d.rect;else{var e=this._getElementOffset(a);b=new c({x:this._getOption("originLeft")?e.left:e.right,y:this._getOption("originTop")?e.top:e.bottom})}this._setRectSize(a,b),this.packer.placed(b),this._setMaxXY(b)},j.sortItemsByPosition=function(){var a=this._getOption("horizontal")?g:f;this.items.sort(a)},j.fit=function(a,b,c){var d=this.getItem(a);d&&(this.stamp(d.element),d.enablePlacing(),this.updateShiftTargets(d),b=void 0===b?d.rect.x:b,c=void 0===c?d.rect.y:c,this.shift(d,b,c),this._bindFitEvents(d),d.moveTo(d.rect.x,d.rect.y),this.shiftLayout(),this.unstamp(d.element),this.sortItemsByPosition(),d.disablePlacing())},j._bindFitEvents=function(a){function b(){d++,2==d&&c.dispatchEvent("fitComplete",null,[a])}var c=this,d=0;a.once("layout",b),this.once("layoutComplete",b)},j.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&(this.options.shiftPercentResize?this.resizeShiftPercentLayout():this.layout())},j.needsResizeLayout=function(){var b=a(this.element),c=this._getOption("horizontal")?"innerHeight":"innerWidth";return b[c]!=this.size[c]},j.resizeShiftPercentLayout=function(){var b=this._getItemsForLayout(this.items),c=this._getOption("horizontal"),d=c?"y":"x",e=c?"height":"width",f=c?"rowHeight":"columnWidth",g=c?"innerHeight":"innerWidth",h=this[f];if(h=h&&h+this.gutter){this._getMeasurements();var i=this[f]+this.gutter;b.forEach(function(a){var b=Math.round(a.rect[d]/h);a.rect[d]=b*i})}else{var j=a(this.element)[g]+this.gutter,k=this.packer[e];b.forEach(function(a){a.rect[d]=a.rect[d]/k*j})}this.shiftLayout()},j.itemDragStart=function(a){if(this.isEnabled){this.stamp(a);var b=this.getItem(a);b&&(b.enablePlacing(),b.showDropPlaceholder(),this.dragItemCount++,this.updateShiftTargets(b))}},j.updateShiftTargets=function(a){this.shiftPacker.reset(),this._getBoundingRect();var b=this._getOption("originLeft"),d=this._getOption("originTop");this.stamps.forEach(function(a){var e=this.getItem(a);if(!e||!e.isPlacing){var f=this._getElementOffset(a),g=new c({x:b?f.left:f.right,y:d?f.top:f.bottom});this._setRectSize(a,g),this.shiftPacker.placed(g)}},this);var e=this._getOption("horizontal"),f=e?"rowHeight":"columnWidth",g=e?"height":"width";this.shiftTargetKeys=[],this.shiftTargets=[];var h,i=this[f];if(i=i&&i+this.gutter){var j=Math.ceil(a.rect[g]/i),k=Math.floor((this.shiftPacker[g]+this.gutter)/i);h=(k-j)*i;for(var l=0;k>l;l++)this._addShiftTarget(l*i,0,h)}else h=this.shiftPacker[g]+this.gutter-a.rect[g],this._addShiftTarget(0,0,h);var m=this._getItemsForLayout(this.items),n=this._getPackMethod();m.forEach(function(a){var b=a.rect;this._setRectSize(a.element,b),this.shiftPacker[n](b),this._addShiftTarget(b.x,b.y,h);var c=e?b.x+b.width:b.x,d=e?b.y:b.y+b.height;if(this._addShiftTarget(c,d,h),i)for(var f=Math.round(b[g]/i),j=1;f>j;j++){var k=e?c:b.x+i*j,l=e?b.y+i*j:d;this._addShiftTarget(k,l,h)}},this)},j._addShiftTarget=function(a,b,c){var d=this._getOption("horizontal")?b:a;if(!(0!==d&&d>c)){var e=a+","+b,f=-1!=this.shiftTargetKeys.indexOf(e);f||(this.shiftTargetKeys.push(e),this.shiftTargets.push({x:a,y:b}))}},j.shift=function(a,b,c){var d,e=1/0,f={x:b,y:c};this.shiftTargets.forEach(function(a){var b=h(a,f);e>b&&(d=a,e=b)}),a.rect.x=d.x,a.rect.y=d.y};var k=120;j.itemDragMove=function(a,b,c){function d(){f.shift(e,b,c),e.positionDropPlaceholder(),f.layout()}var e=this.isEnabled&&this.getItem(a);if(e){b-=this.size.paddingLeft,c-=this.size.paddingTop;var f=this,g=new Date;this._itemDragTime&&g-this._itemDragTime<k?(clearTimeout(this.dragTimeout),this.dragTimeout=setTimeout(d,k)):(d(),this._itemDragTime=g)}},j.itemDragEnd=function(a){function b(){d++,2==d&&(c.element.classList.remove("is-positioning-post-drag"),c.hideDropPlaceholder(),e.dispatchEvent("dragItemPositioned",null,[c]))}var c=this.isEnabled&&this.getItem(a);if(c){clearTimeout(this.dragTimeout),c.element.classList.add("is-positioning-post-drag");var d=0,e=this;c.once("layout",b),this.once("layoutComplete",b),c.moveTo(c.rect.x,c.rect.y),this.layout(),this.dragItemCount=Math.max(0,this.dragItemCount-1),this.sortItemsByPosition(),c.disablePlacing(),this.unstamp(c.element)}},j.bindDraggabillyEvents=function(a){this._bindDraggabillyEvents(a,"on")},j.unbindDraggabillyEvents=function(a){this._bindDraggabillyEvents(a,"off")},j._bindDraggabillyEvents=function(a,b){var c=this.handleDraggabilly;a[b]("dragStart",c.dragStart),a[b]("dragMove",c.dragMove),a[b]("dragEnd",c.dragEnd)},j.bindUIDraggableEvents=function(a){this._bindUIDraggableEvents(a,"on")},j.unbindUIDraggableEvents=function(a){this._bindUIDraggableEvents(a,"off")},j._bindUIDraggableEvents=function(a,b){var c=this.handleUIDraggable;a[b]("dragstart",c.start)[b]("drag",c.drag)[b]("dragstop",c.stop)};var l=j.destroy;return j.destroy=function(){l.apply(this,arguments),this.isEnabled=!1},i.Rect=c,i.Packer=d,i}),function(a,b){"function"==typeof define&&define.amd?define(["isotope-layout/js/layout-mode","packery/js/packery"],b):"object"==typeof module&&module.exports?module.exports=b(require("isotope-layout/js/layout-mode"),require("packery")):b(a.Isotope.LayoutMode,a.Packery)}(window,function(a,b){var c=a.create("packery"),d=c.prototype,e={_getElementOffset:!0,_getMeasurement:!0};for(var f in b.prototype)e[f]||(d[f]=b.prototype[f]);var g=d._resetLayout;d._resetLayout=function(){this.packer=this.packer||new b.Packer,this.shiftPacker=this.shiftPacker||new b.Packer,g.apply(this,arguments)};var h=d._getItemLayoutPosition;d._getItemLayoutPosition=function(a){return a.rect=a.rect||new b.Rect,h.call(this,a)};var i=d.needsResizeLayout;d.needsResizeLayout=function(){return this._getOption("horizontal")?this.needsVerticalResizeLayout():i.call(this)};var j=d._getOption;return d._getOption=function(a){return"horizontal"==a?void 0!==this.options.isHorizontal?this.options.isHorizontal:this.options.horizontal:j.apply(this.isotope,arguments)},c});

/*! picturefill - v3.0.2 - 2016-02-12
 * https://scottjehl.github.io/picturefill/
 * Copyright (c) 2016 https://github.com/scottjehl/picturefill/blob/master/Authors.txt; Licensed MIT
 */
!function(a){var b=navigator.userAgent;a.HTMLPictureElement&&/ecko/.test(b)&&b.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",function(){var b,c=document.createElement("source"),d=function(a){var b,d,e=a.parentNode;"PICTURE"===e.nodeName.toUpperCase()?(b=c.cloneNode(),e.insertBefore(b,e.firstElementChild),setTimeout(function(){e.removeChild(b)})):(!a._pfLastSize||a.offsetWidth>a._pfLastSize)&&(a._pfLastSize=a.offsetWidth,d=a.sizes,a.sizes+=",100vw",setTimeout(function(){a.sizes=d}))},e=function(){var a,b=document.querySelectorAll("picture > img, img[srcset][sizes]");for(a=0;a<b.length;a++)d(b[a])},f=function(){clearTimeout(b),b=setTimeout(e,99)},g=a.matchMedia&&matchMedia("(orientation: landscape)"),h=function(){f(),g&&g.addListener&&g.addListener(f)};return c.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?h():document.addEventListener("DOMContentLoaded",h),f}())}(window),function(a,b,c){"use strict";function d(a){return" "===a||"	"===a||"\n"===a||"\f"===a||"\r"===a}function e(b,c){var d=new a.Image;return d.onerror=function(){A[b]=!1,ba()},d.onload=function(){A[b]=1===d.width,ba()},d.src=c,"pending"}function f(){M=!1,P=a.devicePixelRatio,N={},O={},s.DPR=P||1,Q.width=Math.max(a.innerWidth||0,z.clientWidth),Q.height=Math.max(a.innerHeight||0,z.clientHeight),Q.vw=Q.width/100,Q.vh=Q.height/100,r=[Q.height,Q.width,P].join("-"),Q.em=s.getEmValue(),Q.rem=Q.em}function g(a,b,c,d){var e,f,g,h;return"saveData"===B.algorithm?a>2.7?h=c+1:(f=b-c,e=Math.pow(a-.6,1.5),g=f*e,d&&(g+=.1*e),h=a+g):h=c>1?Math.sqrt(a*b):a,h>c}function h(a){var b,c=s.getSet(a),d=!1;"pending"!==c&&(d=r,c&&(b=s.setRes(c),s.applySetCandidate(b,a))),a[s.ns].evaled=d}function i(a,b){return a.res-b.res}function j(a,b,c){var d;return!c&&b&&(c=a[s.ns].sets,c=c&&c[c.length-1]),d=k(b,c),d&&(b=s.makeUrl(b),a[s.ns].curSrc=b,a[s.ns].curCan=d,d.res||aa(d,d.set.sizes)),d}function k(a,b){var c,d,e;if(a&&b)for(e=s.parseSet(b),a=s.makeUrl(a),c=0;c<e.length;c++)if(a===s.makeUrl(e[c].url)){d=e[c];break}return d}function l(a,b){var c,d,e,f,g=a.getElementsByTagName("source");for(c=0,d=g.length;d>c;c++)e=g[c],e[s.ns]=!0,f=e.getAttribute("srcset"),f&&b.push({srcset:f,media:e.getAttribute("media"),type:e.getAttribute("type"),sizes:e.getAttribute("sizes")})}function m(a,b){function c(b){var c,d=b.exec(a.substring(m));return d?(c=d[0],m+=c.length,c):void 0}function e(){var a,c,d,e,f,i,j,k,l,m=!1,o={};for(e=0;e<h.length;e++)f=h[e],i=f[f.length-1],j=f.substring(0,f.length-1),k=parseInt(j,10),l=parseFloat(j),X.test(j)&&"w"===i?((a||c)&&(m=!0),0===k?m=!0:a=k):Y.test(j)&&"x"===i?((a||c||d)&&(m=!0),0>l?m=!0:c=l):X.test(j)&&"h"===i?((d||c)&&(m=!0),0===k?m=!0:d=k):m=!0;m||(o.url=g,a&&(o.w=a),c&&(o.d=c),d&&(o.h=d),d||c||a||(o.d=1),1===o.d&&(b.has1x=!0),o.set=b,n.push(o))}function f(){for(c(T),i="",j="in descriptor";;){if(k=a.charAt(m),"in descriptor"===j)if(d(k))i&&(h.push(i),i="",j="after descriptor");else{if(","===k)return m+=1,i&&h.push(i),void e();if("("===k)i+=k,j="in parens";else{if(""===k)return i&&h.push(i),void e();i+=k}}else if("in parens"===j)if(")"===k)i+=k,j="in descriptor";else{if(""===k)return h.push(i),void e();i+=k}else if("after descriptor"===j)if(d(k));else{if(""===k)return void e();j="in descriptor",m-=1}m+=1}}for(var g,h,i,j,k,l=a.length,m=0,n=[];;){if(c(U),m>=l)return n;g=c(V),h=[],","===g.slice(-1)?(g=g.replace(W,""),e()):f()}}function n(a){function b(a){function b(){f&&(g.push(f),f="")}function c(){g[0]&&(h.push(g),g=[])}for(var e,f="",g=[],h=[],i=0,j=0,k=!1;;){if(e=a.charAt(j),""===e)return b(),c(),h;if(k){if("*"===e&&"/"===a[j+1]){k=!1,j+=2,b();continue}j+=1}else{if(d(e)){if(a.charAt(j-1)&&d(a.charAt(j-1))||!f){j+=1;continue}if(0===i){b(),j+=1;continue}e=" "}else if("("===e)i+=1;else if(")"===e)i-=1;else{if(","===e){b(),c(),j+=1;continue}if("/"===e&&"*"===a.charAt(j+1)){k=!0,j+=2;continue}}f+=e,j+=1}}}function c(a){return k.test(a)&&parseFloat(a)>=0?!0:l.test(a)?!0:"0"===a||"-0"===a||"+0"===a?!0:!1}var e,f,g,h,i,j,k=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,l=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(f=b(a),g=f.length,e=0;g>e;e++)if(h=f[e],i=h[h.length-1],c(i)){if(j=i,h.pop(),0===h.length)return j;if(h=h.join(" "),s.matchesMedia(h))return j}return"100vw"}b.createElement("picture");var o,p,q,r,s={},t=!1,u=function(){},v=b.createElement("img"),w=v.getAttribute,x=v.setAttribute,y=v.removeAttribute,z=b.documentElement,A={},B={algorithm:""},C="data-pfsrc",D=C+"set",E=navigator.userAgent,F=/rident/.test(E)||/ecko/.test(E)&&E.match(/rv\:(\d+)/)&&RegExp.$1>35,G="currentSrc",H=/\s+\+?\d+(e\d+)?w/,I=/(\([^)]+\))?\s*(.+)/,J=a.picturefillCFG,K="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",L="font-size:100%!important;",M=!0,N={},O={},P=a.devicePixelRatio,Q={px:1,"in":96},R=b.createElement("a"),S=!1,T=/^[ \t\n\r\u000c]+/,U=/^[, \t\n\r\u000c]+/,V=/^[^ \t\n\r\u000c]+/,W=/[,]+$/,X=/^\d+$/,Y=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,Z=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)},$=function(a){var b={};return function(c){return c in b||(b[c]=a(c)),b[c]}},_=function(){var a=/^([\d\.]+)(em|vw|px)$/,b=function(){for(var a=arguments,b=0,c=a[0];++b in a;)c=c.replace(a[b],a[++b]);return c},c=$(function(a){return"return "+b((a||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"});return function(b,d){var e;if(!(b in N))if(N[b]=!1,d&&(e=b.match(a)))N[b]=e[1]*Q[e[2]];else try{N[b]=new Function("e",c(b))(Q)}catch(f){}return N[b]}}(),aa=function(a,b){return a.w?(a.cWidth=s.calcListLength(b||"100vw"),a.res=a.w/a.cWidth):a.res=a.d,a},ba=function(a){if(t){var c,d,e,f=a||{};if(f.elements&&1===f.elements.nodeType&&("IMG"===f.elements.nodeName.toUpperCase()?f.elements=[f.elements]:(f.context=f.elements,f.elements=null)),c=f.elements||s.qsa(f.context||b,f.reevaluate||f.reselect?s.sel:s.selShort),e=c.length){for(s.setupRun(f),S=!0,d=0;e>d;d++)s.fillImg(c[d],f);s.teardownRun(f)}}};o=a.console&&console.warn?function(a){console.warn(a)}:u,G in v||(G="src"),A["image/jpeg"]=!0,A["image/gif"]=!0,A["image/png"]=!0,A["image/svg+xml"]=b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),s.ns=("pf"+(new Date).getTime()).substr(0,9),s.supSrcset="srcset"in v,s.supSizes="sizes"in v,s.supPicture=!!a.HTMLPictureElement,s.supSrcset&&s.supPicture&&!s.supSizes&&!function(a){v.srcset="data:,a",a.src="data:,a",s.supSrcset=v.complete===a.complete,s.supPicture=s.supSrcset&&s.supPicture}(b.createElement("img")),s.supSrcset&&!s.supSizes?!function(){var a="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",c="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d=b.createElement("img"),e=function(){var a=d.width;2===a&&(s.supSizes=!0),q=s.supSrcset&&!s.supSizes,t=!0,setTimeout(ba)};d.onload=e,d.onerror=e,d.setAttribute("sizes","9px"),d.srcset=c+" 1w,"+a+" 9w",d.src=c}():t=!0,s.selShort="picture>img,img[srcset]",s.sel=s.selShort,s.cfg=B,s.DPR=P||1,s.u=Q,s.types=A,s.setSize=u,s.makeUrl=$(function(a){return R.href=a,R.href}),s.qsa=function(a,b){return"querySelector"in a?a.querySelectorAll(b):[]},s.matchesMedia=function(){return a.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?s.matchesMedia=function(a){return!a||matchMedia(a).matches}:s.matchesMedia=s.mMQ,s.matchesMedia.apply(this,arguments)},s.mMQ=function(a){return a?_(a):!0},s.calcLength=function(a){var b=_(a,!0)||!1;return 0>b&&(b=!1),b},s.supportsType=function(a){return a?A[a]:!0},s.parseSize=$(function(a){var b=(a||"").match(I);return{media:b&&b[1],length:b&&b[2]}}),s.parseSet=function(a){return a.cands||(a.cands=m(a.srcset,a)),a.cands},s.getEmValue=function(){var a;if(!p&&(a=b.body)){var c=b.createElement("div"),d=z.style.cssText,e=a.style.cssText;c.style.cssText=K,z.style.cssText=L,a.style.cssText=L,a.appendChild(c),p=c.offsetWidth,a.removeChild(c),p=parseFloat(p,10),z.style.cssText=d,a.style.cssText=e}return p||16},s.calcListLength=function(a){if(!(a in O)||B.uT){var b=s.calcLength(n(a));O[a]=b?b:Q.width}return O[a]},s.setRes=function(a){var b;if(a){b=s.parseSet(a);for(var c=0,d=b.length;d>c;c++)aa(b[c],a.sizes)}return b},s.setRes.res=aa,s.applySetCandidate=function(a,b){if(a.length){var c,d,e,f,h,k,l,m,n,o=b[s.ns],p=s.DPR;if(k=o.curSrc||b[G],l=o.curCan||j(b,k,a[0].set),l&&l.set===a[0].set&&(n=F&&!b.complete&&l.res-.1>p,n||(l.cached=!0,l.res>=p&&(h=l))),!h)for(a.sort(i),f=a.length,h=a[f-1],d=0;f>d;d++)if(c=a[d],c.res>=p){e=d-1,h=a[e]&&(n||k!==s.makeUrl(c.url))&&g(a[e].res,c.res,p,a[e].cached)?a[e]:c;break}h&&(m=s.makeUrl(h.url),o.curSrc=m,o.curCan=h,m!==k&&s.setSrc(b,h),s.setSize(b))}},s.setSrc=function(a,b){var c;a.src=b.url,"image/svg+xml"===b.set.type&&(c=a.style.width,a.style.width=a.offsetWidth+1+"px",a.offsetWidth+1&&(a.style.width=c))},s.getSet=function(a){var b,c,d,e=!1,f=a[s.ns].sets;for(b=0;b<f.length&&!e;b++)if(c=f[b],c.srcset&&s.matchesMedia(c.media)&&(d=s.supportsType(c.type))){"pending"===d&&(c=d),e=c;break}return e},s.parseSets=function(a,b,d){var e,f,g,h,i=b&&"PICTURE"===b.nodeName.toUpperCase(),j=a[s.ns];(j.src===c||d.src)&&(j.src=w.call(a,"src"),j.src?x.call(a,C,j.src):y.call(a,C)),(j.srcset===c||d.srcset||!s.supSrcset||a.srcset)&&(e=w.call(a,"srcset"),j.srcset=e,h=!0),j.sets=[],i&&(j.pic=!0,l(b,j.sets)),j.srcset?(f={srcset:j.srcset,sizes:w.call(a,"sizes")},j.sets.push(f),g=(q||j.src)&&H.test(j.srcset||""),g||!j.src||k(j.src,f)||f.has1x||(f.srcset+=", "+j.src,f.cands.push({url:j.src,d:1,set:f}))):j.src&&j.sets.push({srcset:j.src,sizes:null}),j.curCan=null,j.curSrc=c,j.supported=!(i||f&&!s.supSrcset||g&&!s.supSizes),h&&s.supSrcset&&!j.supported&&(e?(x.call(a,D,e),a.srcset=""):y.call(a,D)),j.supported&&!j.srcset&&(!j.src&&a.src||a.src!==s.makeUrl(j.src))&&(null===j.src?a.removeAttribute("src"):a.src=j.src),j.parsed=!0},s.fillImg=function(a,b){var c,d=b.reselect||b.reevaluate;a[s.ns]||(a[s.ns]={}),c=a[s.ns],(d||c.evaled!==r)&&((!c.parsed||b.reevaluate)&&s.parseSets(a,a.parentNode,b),c.supported?c.evaled=r:h(a))},s.setupRun=function(){(!S||M||P!==a.devicePixelRatio)&&f()},s.supPicture?(ba=u,s.fillImg=u):!function(){var c,d=a.attachEvent?/d$|^c/:/d$|^c|^i/,e=function(){var a=b.readyState||"";f=setTimeout(e,"loading"===a?200:999),b.body&&(s.fillImgs(),c=c||d.test(a),c&&clearTimeout(f))},f=setTimeout(e,b.body?9:99),g=function(a,b){var c,d,e=function(){var f=new Date-d;b>f?c=setTimeout(e,b-f):(c=null,a())};return function(){d=new Date,c||(c=setTimeout(e,b))}},h=z.clientHeight,i=function(){M=Math.max(a.innerWidth||0,z.clientWidth)!==Q.width||z.clientHeight!==h,h=z.clientHeight,M&&s.fillImgs()};Z(a,"resize",g(i,99)),Z(b,"readystatechange",e)}(),s.picturefill=ba,s.fillImgs=ba,s.teardownRun=u,ba._=s,a.picturefillCFG={pf:s,push:function(a){var b=a.shift();"function"==typeof s[b]?s[b].apply(s,a):(B[b]=a[0],S&&s.fillImgs({reselect:!0}))}};for(;J&&J.length;)a.picturefillCFG.push(J.shift());a.picturefill=ba,"object"==typeof module&&"object"==typeof module.exports?module.exports=ba:"function"==typeof define&&define.amd&&define("picturefill",function(){return ba}),s.supPicture||(A["image/webp"]=e("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="))}(window,document);

/*!
 * Pikaday
 *
 * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday
 */

(function (root, factory)
{
    'use strict';

    var moment;
    if (typeof exports === 'object') {
        // CommonJS module
        // Load moment.js as an optional dependency
        try { moment = require('moment'); } catch (e) {}
        module.exports = factory(moment);
    } else if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(function (req)
        {
            // Load moment.js as an optional dependency
            var id = 'moment';
            try { moment = req(id); } catch (e) {}
            return factory(moment);
        });
    } else {
        root.Pikaday = factory(root.moment);
    }
}(this, function (moment)
{
    'use strict';

    /**
     * feature detection and helper functions
     */
    var hasMoment = typeof moment === 'function',

    hasEventListeners = !!window.addEventListener,

    document = window.document,

    sto = window.setTimeout,

    addEvent = function(el, e, callback, capture)
    {
        if (hasEventListeners) {
            el.addEventListener(e, callback, !!capture);
        } else {
            el.attachEvent('on' + e, callback);
        }
    },

    removeEvent = function(el, e, callback, capture)
    {
        if (hasEventListeners) {
            el.removeEventListener(e, callback, !!capture);
        } else {
            el.detachEvent('on' + e, callback);
        }
    },

    trim = function(str)
    {
        return str.trim ? str.trim() : str.replace(/^\s+|\s+$/g,'');
    },

    hasClass = function(el, cn)
    {
        return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;
    },

    addClass = function(el, cn)
    {
        if (!hasClass(el, cn)) {
            el.className = (el.className === '') ? cn : el.className + ' ' + cn;
        }
    },

    removeClass = function(el, cn)
    {
        el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));
    },

    isArray = function(obj)
    {
        return (/Array/).test(Object.prototype.toString.call(obj));
    },

    isDate = function(obj)
    {
        return (/Date/).test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime());
    },

    isWeekend = function(date)
    {
        var day = date.getDay();
        return day === 0 || day === 6;
    },

    isLeapYear = function(year)
    {
        // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951
        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;
    },

    getDaysInMonth = function(year, month)
    {
        return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];
    },

    setToStartOfDay = function(date)
    {
        if (isDate(date)) date.setHours(0,0,0,0);
    },

    compareDates = function(a,b)
    {
        // weak date comparison (use setToStartOfDay(date) to ensure correct result)
        return a.getTime() === b.getTime();
    },

    extend = function(to, from, overwrite)
    {
        var prop, hasProp;
        for (prop in from) {
            hasProp = to[prop] !== undefined;
            if (hasProp && typeof from[prop] === 'object' && from[prop] !== null && from[prop].nodeName === undefined) {
                if (isDate(from[prop])) {
                    if (overwrite) {
                        to[prop] = new Date(from[prop].getTime());
                    }
                }
                else if (isArray(from[prop])) {
                    if (overwrite) {
                        to[prop] = from[prop].slice(0);
                    }
                } else {
                    to[prop] = extend({}, from[prop], overwrite);
                }
            } else if (overwrite || !hasProp) {
                to[prop] = from[prop];
            }
        }
        return to;
    },

    fireEvent = function(el, eventName, data)
    {
        var ev;

        if (document.createEvent) {
            ev = document.createEvent('HTMLEvents');
            ev.initEvent(eventName, true, false);
            ev = extend(ev, data);
            el.dispatchEvent(ev);
        } else if (document.createEventObject) {
            ev = document.createEventObject();
            ev = extend(ev, data);
            el.fireEvent('on' + eventName, ev);
        }
    },

    adjustCalendar = function(calendar) {
        if (calendar.month < 0) {
            calendar.year -= Math.ceil(Math.abs(calendar.month)/12);
            calendar.month += 12;
        }
        if (calendar.month > 11) {
            calendar.year += Math.floor(Math.abs(calendar.month)/12);
            calendar.month -= 12;
        }
        return calendar;
    },

    /**
     * defaults and localisation
     */
    defaults = {

        // bind the picker to a form field
        field: null,

        // automatically show/hide the picker on `field` focus (default `true` if `field` is set)
        bound: undefined,

        // position of the datepicker, relative to the field (default to bottom & left)
        // ('bottom' & 'left' keywords are not used, 'top' & 'right' are modifier on the bottom/left position)
        position: 'bottom left',

        // automatically fit in the viewport even if it means repositioning from the position option
        reposition: true,

        // the default output format for `.toString()` and `field` value
        format: 'YYYY-MM-DD',

        // the toString function which gets passed a current date object and format
        // and returns a string
        toString: null,

        // used to create date object from current input string
        parse: null,

        // the initial date to view when first opened
        defaultDate: null,

        // make the `defaultDate` the initial selected value
        setDefaultDate: false,

        // first day of week (0: Sunday, 1: Monday etc)
        firstDay: 0,

        // the default flag for moment's strict date parsing
        formatStrict: false,

        // the minimum/earliest date that can be selected
        minDate: null,
        // the maximum/latest date that can be selected
        maxDate: null,

        // number of years either side, or array of upper/lower range
        yearRange: 10,

        // show week numbers at head of row
        showWeekNumber: false,

        // Week picker mode
        pickWholeWeek: false,

        // used internally (don't config outside)
        minYear: 0,
        maxYear: 9999,
        minMonth: undefined,
        maxMonth: undefined,

        startRange: null,
        endRange: null,

        isRTL: false,

        // Additional text to append to the year in the calendar title
        yearSuffix: '',

        // Render the month after year in the calendar title
        showMonthAfterYear: false,

        // Render days of the calendar grid that fall in the next or previous month
        showDaysInNextAndPreviousMonths: false,

        // how many months are visible
        numberOfMonths: 1,

        // when numberOfMonths is used, this will help you to choose where the main calendar will be (default `left`, can be set to `right`)
        // only used for the first display or when a selected date is not visible
        mainCalendar: 'left',

        // Specify a DOM element to render the calendar in
        container: undefined,

        // Blur field when date is selected
        blurFieldOnSelect : true,

        // internationalization
        i18n: {
            previousMonth : 'Previous Month',
            nextMonth     : 'Next Month',
            months        : ['January','February','March','April','May','June','July','August','September','October','November','December'],
            weekdays      : ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],
            weekdaysShort : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']
        },

        // Theme Classname
        theme: null,

        // events array
        events: [],

        // callback function
        onSelect: null,
        onOpen: null,
        onClose: null,
        onDraw: null
    },


    /**
     * templating functions to abstract HTML rendering
     */
    renderDayName = function(opts, day, abbr)
    {
        day += opts.firstDay;
        while (day >= 7) {
            day -= 7;
        }
        return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];
    },

    renderDay = function(opts)
    {
        var arr = [];
        var ariaSelected = 'false';
        if (opts.isEmpty) {
            if (opts.showDaysInNextAndPreviousMonths) {
                arr.push('is-outside-current-month');
            } else {
                return '<td class="is-empty"></td>';
            }
        }
        if (opts.isDisabled) {
            arr.push('is-disabled');
        }
        if (opts.isToday) {
            arr.push('is-today');
        }
        if (opts.isSelected) {
            arr.push('is-selected');
            ariaSelected = 'true';
        }
        if (opts.hasEvent) {
            arr.push('has-event');
        }
        if (opts.isInRange) {
            arr.push('is-inrange');
        }
        if (opts.isStartRange) {
            arr.push('is-startrange');
        }
        if (opts.isEndRange) {
            arr.push('is-endrange');
        }
        return '<td data-day="' + opts.day + '" class="' + arr.join(' ') + '" aria-selected="' + ariaSelected + '">' +
                 '<button class="pika-button pika-day" type="button" ' +
                    'data-pika-year="' + opts.year + '" data-pika-month="' + opts.month + '" data-pika-day="' + opts.day + '">' +
                        opts.day +
                 '</button>' +
               '</td>';
    },

    renderWeek = function (d, m, y) {
        // Lifted from http://javascript.about.com/library/blweekyear.htm, lightly modified.
        var onejan = new Date(y, 0, 1),
            weekNum = Math.ceil((((new Date(y, m, d) - onejan) / 86400000) + onejan.getDay()+1)/7);
        return '<td class="pika-week">' + weekNum + '</td>';
    },

    renderRow = function(days, isRTL, pickWholeWeek, isRowSelected)
    {
        return '<tr class="pika-row' + (pickWholeWeek ? ' pick-whole-week' : '') + (isRowSelected ? ' is-selected' : '') + '">' + (isRTL ? days.reverse() : days).join('') + '</tr>';
    },

    renderBody = function(rows)
    {
        return '<tbody>' + rows.join('') + '</tbody>';
    },

    renderHead = function(opts)
    {
        var i, arr = [];
        if (opts.showWeekNumber) {
            arr.push('<th></th>');
        }
        for (i = 0; i < 7; i++) {
            arr.push('<th scope="col"><abbr title="' + renderDayName(opts, i) + '">' + renderDayName(opts, i, true) + '</abbr></th>');
        }
        return '<thead><tr>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</tr></thead>';
    },

    renderTitle = function(instance, c, year, month, refYear, randId)
    {
        var i, j, arr,
            opts = instance._o,
            isMinYear = year === opts.minYear,
            isMaxYear = year === opts.maxYear,
            html = '<div id="' + randId + '" class="pika-title" role="heading" aria-live="assertive">',
            monthHtml,
            yearHtml,
            prev = true,
            next = true;

        for (arr = [], i = 0; i < 12; i++) {
            arr.push('<option value="' + (year === refYear ? i - c : 12 + i - c) + '"' +
                (i === month ? ' selected="selected"': '') +
                ((isMinYear && i < opts.minMonth) || (isMaxYear && i > opts.maxMonth) ? 'disabled="disabled"' : '') + '>' +
                opts.i18n.months[i] + '</option>');
        }

        monthHtml = '<div class="pika-label">' + opts.i18n.months[month] + '<select class="pika-select pika-select-month" tabindex="-1">' + arr.join('') + '</select></div>';

        if (isArray(opts.yearRange)) {
            i = opts.yearRange[0];
            j = opts.yearRange[1] + 1;
        } else {
            i = year - opts.yearRange;
            j = 1 + year + opts.yearRange;
        }

        for (arr = []; i < j && i <= opts.maxYear; i++) {
            if (i >= opts.minYear) {
                arr.push('<option value="' + i + '"' + (i === year ? ' selected="selected"': '') + '>' + (i) + '</option>');
            }
        }
        yearHtml = '<div class="pika-label">' + year + opts.yearSuffix + '<select class="pika-select pika-select-year" tabindex="-1">' + arr.join('') + '</select></div>';

        if (opts.showMonthAfterYear) {
            html += yearHtml + monthHtml;
        } else {
            html += monthHtml + yearHtml;
        }

        if (isMinYear && (month === 0 || opts.minMonth >= month)) {
            prev = false;
        }

        if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {
            next = false;
        }

        if (c === 0) {
            html += '<button class="pika-prev' + (prev ? '' : ' is-disabled') + '" type="button">' + opts.i18n.previousMonth + '</button>';
        }
        if (c === (instance._o.numberOfMonths - 1) ) {
            html += '<button class="pika-next' + (next ? '' : ' is-disabled') + '" type="button">' + opts.i18n.nextMonth + '</button>';
        }

        return html += '</div>';
    },

    renderTable = function(opts, data, randId)
    {
        return '<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="' + randId + '">' + renderHead(opts) + renderBody(data) + '</table>';
    },


    /**
     * Pikaday constructor
     */
    Pikaday = function(options)
    {
        var self = this,
            opts = self.config(options);

        self._onMouseDown = function(e)
        {
            if (!self._v) {
                return;
            }
            e = e || window.event;
            var target = e.target || e.srcElement;
            if (!target) {
                return;
            }

            if (!hasClass(target, 'is-disabled')) {
                if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty') && !hasClass(target.parentNode, 'is-disabled')) {
                    self.setDate(new Date(target.getAttribute('data-pika-year'), target.getAttribute('data-pika-month'), target.getAttribute('data-pika-day')));
                    if (opts.bound) {
                        sto(function() {
                            self.hide();
                            if (opts.blurFieldOnSelect && opts.field) {
                                opts.field.blur();
                            }
                        }, 100);
                    }
                }
                else if (hasClass(target, 'pika-prev')) {
                    self.prevMonth();
                }
                else if (hasClass(target, 'pika-next')) {
                    self.nextMonth();
                }
            }
            if (!hasClass(target, 'pika-select')) {
                // if this is touch event prevent mouse events emulation
                if (e.preventDefault) {
                    e.preventDefault();
                } else {
                    e.returnValue = false;
                    return false;
                }
            } else {
                self._c = true;
            }
        };

        self._onChange = function(e)
        {
            e = e || window.event;
            var target = e.target || e.srcElement;
            if (!target) {
                return;
            }
            if (hasClass(target, 'pika-select-month')) {
                self.gotoMonth(target.value);
            }
            else if (hasClass(target, 'pika-select-year')) {
                self.gotoYear(target.value);
            }
        };

        self._onKeyChange = function(e)
        {
            e = e || window.event;

            if (self.isVisible()) {

                switch(e.keyCode){
                    case 13:
                    case 27:
                        if (opts.field) {
                            opts.field.blur();
                        }
                        break;
                    case 37:
                        e.preventDefault();
                        self.adjustDate('subtract', 1);
                        break;
                    case 38:
                        self.adjustDate('subtract', 7);
                        break;
                    case 39:
                        self.adjustDate('add', 1);
                        break;
                    case 40:
                        self.adjustDate('add', 7);
                        break;
                }
            }
        };

        self._onInputChange = function(e)
        {
            var date;

            if (e.firedBy === self) {
                return;
            }
            if (opts.parse) {
                date = opts.parse(opts.field.value, opts.format);
            } else if (hasMoment) {
                date = moment(opts.field.value, opts.format, opts.formatStrict);
                date = (date && date.isValid()) ? date.toDate() : null;
            }
            else {
                date = new Date(Date.parse(opts.field.value));
            }
            if (isDate(date)) {
              self.setDate(date);
            }
            if (!self._v) {
                self.show();
            }
        };

        self._onInputFocus = function()
        {
            self.show();
        };

        self._onInputClick = function()
        {
            self.show();
        };

        self._onInputBlur = function()
        {
            // IE allows pika div to gain focus; catch blur the input field
            var pEl = document.activeElement;
            do {
                if (hasClass(pEl, 'pika-single')) {
                    return;
                }
            }
            while ((pEl = pEl.parentNode));

            if (!self._c) {
                self._b = sto(function() {
                    self.hide();
                }, 50);
            }
            self._c = false;
        };

        self._onClick = function(e)
        {
            e = e || window.event;
            var target = e.target || e.srcElement,
                pEl = target;
            if (!target) {
                return;
            }
            if (!hasEventListeners && hasClass(target, 'pika-select')) {
                if (!target.onchange) {
                    target.setAttribute('onchange', 'return;');
                    addEvent(target, 'change', self._onChange);
                }
            }
            do {
                if (hasClass(pEl, 'pika-single') || pEl === opts.trigger) {
                    return;
                }
            }
            while ((pEl = pEl.parentNode));
            if (self._v && target !== opts.trigger && pEl !== opts.trigger) {
                self.hide();
            }
        };

        self.el = document.createElement('div');
        self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '') + (opts.theme ? ' ' + opts.theme : '');

        addEvent(self.el, 'mousedown', self._onMouseDown, true);
        addEvent(self.el, 'touchend', self._onMouseDown, true);
        addEvent(self.el, 'change', self._onChange);
        addEvent(document, 'keydown', self._onKeyChange);

        if (opts.field) {
            if (opts.container) {
                opts.container.appendChild(self.el);
            } else if (opts.bound) {
                document.body.appendChild(self.el);
            } else {
                opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);
            }
            addEvent(opts.field, 'change', self._onInputChange);

            if (!opts.defaultDate) {
                if (hasMoment && opts.field.value) {
                    opts.defaultDate = moment(opts.field.value, opts.format).toDate();
                } else {
                    opts.defaultDate = new Date(Date.parse(opts.field.value));
                }
                opts.setDefaultDate = true;
            }
        }

        var defDate = opts.defaultDate;

        if (isDate(defDate)) {
            if (opts.setDefaultDate) {
                self.setDate(defDate, true);
            } else {
                self.gotoDate(defDate);
            }
        } else {
            self.gotoDate(new Date());
        }

        if (opts.bound) {
            this.hide();
            self.el.className += ' is-bound';
            addEvent(opts.trigger, 'click', self._onInputClick);
            addEvent(opts.trigger, 'focus', self._onInputFocus);
            addEvent(opts.trigger, 'blur', self._onInputBlur);
        } else {
            this.show();
        }
    };


    /**
     * public Pikaday API
     */
    Pikaday.prototype = {


        /**
         * configure functionality
         */
        config: function(options)
        {
            if (!this._o) {
                this._o = extend({}, defaults, true);
            }

            var opts = extend(this._o, options, true);

            opts.isRTL = !!opts.isRTL;

            opts.field = (opts.field && opts.field.nodeName) ? opts.field : null;

            opts.theme = (typeof opts.theme) === 'string' && opts.theme ? opts.theme : null;

            opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);

            opts.trigger = (opts.trigger && opts.trigger.nodeName) ? opts.trigger : opts.field;

            opts.disableWeekends = !!opts.disableWeekends;

            opts.disableDayFn = (typeof opts.disableDayFn) === 'function' ? opts.disableDayFn : null;

            var nom = parseInt(opts.numberOfMonths, 10) || 1;
            opts.numberOfMonths = nom > 4 ? 4 : nom;

            if (!isDate(opts.minDate)) {
                opts.minDate = false;
            }
            if (!isDate(opts.maxDate)) {
                opts.maxDate = false;
            }
            if ((opts.minDate && opts.maxDate) && opts.maxDate < opts.minDate) {
                opts.maxDate = opts.minDate = false;
            }
            if (opts.minDate) {
                this.setMinDate(opts.minDate);
            }
            if (opts.maxDate) {
                this.setMaxDate(opts.maxDate);
            }

            if (isArray(opts.yearRange)) {
                var fallback = new Date().getFullYear() - 10;
                opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;
                opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;
            } else {
                opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;
                if (opts.yearRange > 100) {
                    opts.yearRange = 100;
                }
            }

            return opts;
        },

        /**
         * return a formatted string of the current selection (using Moment.js if available)
         */
        toString: function(format)
        {
            format = format || this._o.format;
            if (!isDate(this._d)) {
                return '';
            }
            if (this._o.toString) {
              return this._o.toString(this._d, format);
            }
            if (hasMoment) {
              return moment(this._d).format(format);
            }
            return this._d.toDateString();
        },

        /**
         * return a Moment.js object of the current selection (if available)
         */
        getMoment: function()
        {
            return hasMoment ? moment(this._d) : null;
        },

        /**
         * set the current selection from a Moment.js object (if available)
         */
        setMoment: function(date, preventOnSelect)
        {
            if (hasMoment && moment.isMoment(date)) {
                this.setDate(date.toDate(), preventOnSelect);
            }
        },

        /**
         * return a Date object of the current selection
         */
        getDate: function()
        {
            return isDate(this._d) ? new Date(this._d.getTime()) : null;
        },

        /**
         * set the current selection
         */
        setDate: function(date, preventOnSelect)
        {
            if (!date) {
                this._d = null;

                if (this._o.field) {
                    this._o.field.value = '';
                    fireEvent(this._o.field, 'change', { firedBy: this });
                }

                return this.draw();
            }
            if (typeof date === 'string') {
                date = new Date(Date.parse(date));
            }
            if (!isDate(date)) {
                return;
            }

            var min = this._o.minDate,
                max = this._o.maxDate;

            if (isDate(min) && date < min) {
                date = min;
            } else if (isDate(max) && date > max) {
                date = max;
            }

            this._d = new Date(date.getTime());
            setToStartOfDay(this._d);
            this.gotoDate(this._d);

            if (this._o.field) {
                this._o.field.value = this.toString();
                fireEvent(this._o.field, 'change', { firedBy: this });
            }
            if (!preventOnSelect && typeof this._o.onSelect === 'function') {
                this._o.onSelect.call(this, this.getDate());
            }
        },

        /**
         * change view to a specific date
         */
        gotoDate: function(date)
        {
            var newCalendar = true;

            if (!isDate(date)) {
                return;
            }

            if (this.calendars) {
                var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),
                    lastVisibleDate = new Date(this.calendars[this.calendars.length-1].year, this.calendars[this.calendars.length-1].month, 1),
                    visibleDate = date.getTime();
                // get the end of the month
                lastVisibleDate.setMonth(lastVisibleDate.getMonth()+1);
                lastVisibleDate.setDate(lastVisibleDate.getDate()-1);
                newCalendar = (visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate);
            }

            if (newCalendar) {
                this.calendars = [{
                    month: date.getMonth(),
                    year: date.getFullYear()
                }];
                if (this._o.mainCalendar === 'right') {
                    this.calendars[0].month += 1 - this._o.numberOfMonths;
                }
            }

            this.adjustCalendars();
        },

        adjustDate: function(sign, days) {

            var day = this.getDate() || new Date();
            var difference = parseInt(days)*24*60*60*1000;

            var newDay;

            if (sign === 'add') {
                newDay = new Date(day.valueOf() + difference);
            } else if (sign === 'subtract') {
                newDay = new Date(day.valueOf() - difference);
            }

            this.setDate(newDay);
        },

        adjustCalendars: function() {
            this.calendars[0] = adjustCalendar(this.calendars[0]);
            for (var c = 1; c < this._o.numberOfMonths; c++) {
                this.calendars[c] = adjustCalendar({
                    month: this.calendars[0].month + c,
                    year: this.calendars[0].year
                });
            }
            this.draw();
        },

        gotoToday: function()
        {
            this.gotoDate(new Date());
        },

        /**
         * change view to a specific month (zero-index, e.g. 0: January)
         */
        gotoMonth: function(month)
        {
            if (!isNaN(month)) {
                this.calendars[0].month = parseInt(month, 10);
                this.adjustCalendars();
            }
        },

        nextMonth: function()
        {
            this.calendars[0].month++;
            this.adjustCalendars();
        },

        prevMonth: function()
        {
            this.calendars[0].month--;
            this.adjustCalendars();
        },

        /**
         * change view to a specific full year (e.g. "2012")
         */
        gotoYear: function(year)
        {
            if (!isNaN(year)) {
                this.calendars[0].year = parseInt(year, 10);
                this.adjustCalendars();
            }
        },

        /**
         * change the minDate
         */
        setMinDate: function(value)
        {
            if(value instanceof Date) {
                setToStartOfDay(value);
                this._o.minDate = value;
                this._o.minYear  = value.getFullYear();
                this._o.minMonth = value.getMonth();
            } else {
                this._o.minDate = defaults.minDate;
                this._o.minYear  = defaults.minYear;
                this._o.minMonth = defaults.minMonth;
                this._o.startRange = defaults.startRange;
            }

            this.draw();
        },

        /**
         * change the maxDate
         */
        setMaxDate: function(value)
        {
            if(value instanceof Date) {
                setToStartOfDay(value);
                this._o.maxDate = value;
                this._o.maxYear = value.getFullYear();
                this._o.maxMonth = value.getMonth();
            } else {
                this._o.maxDate = defaults.maxDate;
                this._o.maxYear = defaults.maxYear;
                this._o.maxMonth = defaults.maxMonth;
                this._o.endRange = defaults.endRange;
            }

            this.draw();
        },

        setStartRange: function(value)
        {
            this._o.startRange = value;
        },

        setEndRange: function(value)
        {
            this._o.endRange = value;
        },

        /**
         * refresh the HTML
         */
        draw: function(force)
        {
            if (!this._v && !force) {
                return;
            }
            var opts = this._o,
                minYear = opts.minYear,
                maxYear = opts.maxYear,
                minMonth = opts.minMonth,
                maxMonth = opts.maxMonth,
                html = '',
                randId;

            if (this._y <= minYear) {
                this._y = minYear;
                if (!isNaN(minMonth) && this._m < minMonth) {
                    this._m = minMonth;
                }
            }
            if (this._y >= maxYear) {
                this._y = maxYear;
                if (!isNaN(maxMonth) && this._m > maxMonth) {
                    this._m = maxMonth;
                }
            }

            randId = 'pika-title-' + Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 2);

            for (var c = 0; c < opts.numberOfMonths; c++) {
                html += '<div class="pika-lendar">' + renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year, randId) + this.render(this.calendars[c].year, this.calendars[c].month, randId) + '</div>';
            }

            this.el.innerHTML = html;

            if (opts.bound) {
                if(opts.field.type !== 'hidden') {
                    sto(function() {
                        opts.trigger.focus();
                    }, 1);
                }
            }

            if (typeof this._o.onDraw === 'function') {
                this._o.onDraw(this);
            }

            if (opts.bound) {
                // let the screen reader user know to use arrow keys
                opts.field.setAttribute('aria-label', 'Use the arrow keys to pick a date');
            }
        },

        adjustPosition: function()
        {
            var field, pEl, width, height, viewportWidth, viewportHeight, scrollTop, left, top, clientRect;

            if (this._o.container) return;

            this.el.style.position = 'absolute';

            field = this._o.trigger;
            pEl = field;
            width = this.el.offsetWidth;
            height = this.el.offsetHeight;
            viewportWidth = window.innerWidth || document.documentElement.clientWidth;
            viewportHeight = window.innerHeight || document.documentElement.clientHeight;
            scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;

            if (typeof field.getBoundingClientRect === 'function') {
                clientRect = field.getBoundingClientRect();
                left = clientRect.left + window.pageXOffset;
                top = clientRect.bottom + window.pageYOffset;
            } else {
                left = pEl.offsetLeft;
                top  = pEl.offsetTop + pEl.offsetHeight;
                while((pEl = pEl.offsetParent)) {
                    left += pEl.offsetLeft;
                    top  += pEl.offsetTop;
                }
            }

            // default position is bottom & left
            if ((this._o.reposition && left + width > viewportWidth) ||
                (
                    this._o.position.indexOf('right') > -1 &&
                    left - width + field.offsetWidth > 0
                )
            ) {
                left = left - width + field.offsetWidth;
            }
            if ((this._o.reposition && top + height > viewportHeight + scrollTop) ||
                (
                    this._o.position.indexOf('top') > -1 &&
                    top - height - field.offsetHeight > 0
                )
            ) {
                top = top - height - field.offsetHeight;
            }

            this.el.style.left = left + 'px';
            this.el.style.top = top + 'px';
        },

        /**
         * render HTML for a particular month
         */
        render: function(year, month, randId)
        {
            var opts   = this._o,
                now    = new Date(),
                days   = getDaysInMonth(year, month),
                before = new Date(year, month, 1).getDay(),
                data   = [],
                row    = [];
            setToStartOfDay(now);
            if (opts.firstDay > 0) {
                before -= opts.firstDay;
                if (before < 0) {
                    before += 7;
                }
            }
            var previousMonth = month === 0 ? 11 : month - 1,
                nextMonth = month === 11 ? 0 : month + 1,
                yearOfPreviousMonth = month === 0 ? year - 1 : year,
                yearOfNextMonth = month === 11 ? year + 1 : year,
                daysInPreviousMonth = getDaysInMonth(yearOfPreviousMonth, previousMonth);
            var cells = days + before,
                after = cells;
            while(after > 7) {
                after -= 7;
            }
            cells += 7 - after;
            var isWeekSelected = false;
            for (var i = 0, r = 0; i < cells; i++)
            {
                var day = new Date(year, month, 1 + (i - before)),
                    isSelected = isDate(this._d) ? compareDates(day, this._d) : false,
                    isToday = compareDates(day, now),
                    hasEvent = opts.events.indexOf(day.toDateString()) !== -1 ? true : false,
                    isEmpty = i < before || i >= (days + before),
                    dayNumber = 1 + (i - before),
                    monthNumber = month,
                    yearNumber = year,
                    isStartRange = opts.startRange && compareDates(opts.startRange, day),
                    isEndRange = opts.endRange && compareDates(opts.endRange, day),
                    isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,
                    isDisabled = (opts.minDate && day < opts.minDate) ||
                                 (opts.maxDate && day > opts.maxDate) ||
                                 (opts.disableWeekends && isWeekend(day)) ||
                                 (opts.disableDayFn && opts.disableDayFn(day));

                if (isEmpty) {
                    if (i < before) {
                        dayNumber = daysInPreviousMonth + dayNumber;
                        monthNumber = previousMonth;
                        yearNumber = yearOfPreviousMonth;
                    } else {
                        dayNumber = dayNumber - days;
                        monthNumber = nextMonth;
                        yearNumber = yearOfNextMonth;
                    }
                }

                var dayConfig = {
                        day: dayNumber,
                        month: monthNumber,
                        year: yearNumber,
                        hasEvent: hasEvent,
                        isSelected: isSelected,
                        isToday: isToday,
                        isDisabled: isDisabled,
                        isEmpty: isEmpty,
                        isStartRange: isStartRange,
                        isEndRange: isEndRange,
                        isInRange: isInRange,
                        showDaysInNextAndPreviousMonths: opts.showDaysInNextAndPreviousMonths
                    };

                if (opts.pickWholeWeek && isSelected) {
                    isWeekSelected = true;
                }

                row.push(renderDay(dayConfig));

                if (++r === 7) {
                    if (opts.showWeekNumber) {
                        row.unshift(renderWeek(i - before, month, year));
                    }
                    data.push(renderRow(row, opts.isRTL, opts.pickWholeWeek, isWeekSelected));
                    row = [];
                    r = 0;
                    isWeekSelected = false;
                }
            }
            return renderTable(opts, data, randId);
        },

        isVisible: function()
        {
            return this._v;
        },

        show: function()
        {
            if (!this.isVisible()) {
                this._v = true;
                this.draw();
                removeClass(this.el, 'is-hidden');
                if (this._o.bound) {
                    addEvent(document, 'click', this._onClick);
                    this.adjustPosition();
                }
                if (typeof this._o.onOpen === 'function') {
                    this._o.onOpen.call(this);
                }
            }
        },

        hide: function()
        {
            var v = this._v;
            if (v !== false) {
                if (this._o.bound) {
                    removeEvent(document, 'click', this._onClick);
                }
                this.el.style.position = 'static'; // reset
                this.el.style.left = 'auto';
                this.el.style.top = 'auto';
                addClass(this.el, 'is-hidden');
                this._v = false;
                if (v !== undefined && typeof this._o.onClose === 'function') {
                    this._o.onClose.call(this);
                }
            }
        },

        /**
         * GAME OVER
         */
        destroy: function()
        {
            this.hide();
            removeEvent(this.el, 'mousedown', this._onMouseDown, true);
            removeEvent(this.el, 'touchend', this._onMouseDown, true);
            removeEvent(this.el, 'change', this._onChange);
            if (this._o.field) {
                removeEvent(this._o.field, 'change', this._onInputChange);
                if (this._o.bound) {
                    removeEvent(this._o.trigger, 'click', this._onInputClick);
                    removeEvent(this._o.trigger, 'focus', this._onInputFocus);
                    removeEvent(this._o.trigger, 'blur', this._onInputBlur);
                }
            }
            if (this.el.parentNode) {
                this.el.parentNode.removeChild(this.el);
            }
        }

    };

    return Pikaday;

}));

!function(){"use strict";function e(n){return"undefined"==typeof this||Object.getPrototypeOf(this)!==e.prototype?new e(n):(O=this,O.version="3.3.6",O.tools=new E,O.isSupported()?(O.tools.extend(O.defaults,n||{}),O.defaults.container=t(O.defaults),O.store={elements:{},containers:[]},O.sequences={},O.history=[],O.uid=0,O.initialized=!1):"undefined"!=typeof console&&null!==console,O)}function t(e){if(e&&e.container){if("string"==typeof e.container)return window.document.documentElement.querySelector(e.container);if(O.tools.isNode(e.container))return e.container}return O.defaults.container}function n(e,t){return"string"==typeof e?Array.prototype.slice.call(t.querySelectorAll(e)):O.tools.isNode(e)?[e]:O.tools.isNodeList(e)?Array.prototype.slice.call(e):[]}function i(){return++O.uid}function o(e,t,n){t.container&&(t.container=n),e.config?e.config=O.tools.extendClone(e.config,t):e.config=O.tools.extendClone(O.defaults,t),"top"===e.config.origin||"bottom"===e.config.origin?e.config.axis="Y":e.config.axis="X"}function r(e){var t=window.getComputedStyle(e.domEl);e.styles||(e.styles={transition:{},transform:{},computed:{}},e.styles.inline=e.domEl.getAttribute("style")||"",e.styles.inline+="; visibility: visible; ",e.styles.computed.opacity=t.opacity,t.transition&&"all 0s ease 0s"!==t.transition?e.styles.computed.transition=t.transition+", ":e.styles.computed.transition=""),e.styles.transition.instant=s(e,0),e.styles.transition.delayed=s(e,e.config.delay),e.styles.transform.initial=" -webkit-transform:",e.styles.transform.target=" -webkit-transform:",a(e),e.styles.transform.initial+="transform:",e.styles.transform.target+="transform:",a(e)}function s(e,t){var n=e.config;return"-webkit-transition: "+e.styles.computed.transition+"-webkit-transform "+n.duration/1e3+"s "+n.easing+" "+t/1e3+"s, opacity "+n.duration/1e3+"s "+n.easing+" "+t/1e3+"s; transition: "+e.styles.computed.transition+"transform "+n.duration/1e3+"s "+n.easing+" "+t/1e3+"s, opacity "+n.duration/1e3+"s "+n.easing+" "+t/1e3+"s; "}function a(e){var t,n=e.config,i=e.styles.transform;t="top"===n.origin||"left"===n.origin?/^-/.test(n.distance)?n.distance.substr(1):"-"+n.distance:n.distance,parseInt(n.distance)&&(i.initial+=" translate"+n.axis+"("+t+")",i.target+=" translate"+n.axis+"(0)"),n.scale&&(i.initial+=" scale("+n.scale+")",i.target+=" scale(1)"),n.rotate.x&&(i.initial+=" rotateX("+n.rotate.x+"deg)",i.target+=" rotateX(0)"),n.rotate.y&&(i.initial+=" rotateY("+n.rotate.y+"deg)",i.target+=" rotateY(0)"),n.rotate.z&&(i.initial+=" rotateZ("+n.rotate.z+"deg)",i.target+=" rotateZ(0)"),i.initial+="; opacity: "+n.opacity+";",i.target+="; opacity: "+e.styles.computed.opacity+";"}function l(e){var t=e.config.container;t&&O.store.containers.indexOf(t)===-1&&O.store.containers.push(e.config.container),O.store.elements[e.id]=e}function c(e,t,n){var i={target:e,config:t,interval:n};O.history.push(i)}function f(){if(O.isSupported()){y();for(var e=0;e<O.store.containers.length;e++)O.store.containers[e].addEventListener("scroll",d),O.store.containers[e].addEventListener("resize",d);O.initialized||(window.addEventListener("scroll",d),window.addEventListener("resize",d),O.initialized=!0)}return O}function d(){T(y)}function u(){var e,t,n,i;O.tools.forOwn(O.sequences,function(o){i=O.sequences[o],e=!1;for(var r=0;r<i.elemIds.length;r++)n=i.elemIds[r],t=O.store.elements[n],q(t)&&!e&&(e=!0);i.active=e})}function y(){var e,t;u(),O.tools.forOwn(O.store.elements,function(n){t=O.store.elements[n],e=w(t),g(t)?(t.config.beforeReveal(t.domEl),e?t.domEl.setAttribute("style",t.styles.inline+t.styles.transform.target+t.styles.transition.delayed):t.domEl.setAttribute("style",t.styles.inline+t.styles.transform.target+t.styles.transition.instant),p("reveal",t,e),t.revealing=!0,t.seen=!0,t.sequence&&m(t,e)):v(t)&&(t.config.beforeReset(t.domEl),t.domEl.setAttribute("style",t.styles.inline+t.styles.transform.initial+t.styles.transition.instant),p("reset",t),t.revealing=!1)})}function m(e,t){var n=0,i=0,o=O.sequences[e.sequence.id];o.blocked=!0,t&&"onload"===e.config.useDelay&&(i=e.config.delay),e.sequence.timer&&(n=Math.abs(e.sequence.timer.started-new Date),window.clearTimeout(e.sequence.timer)),e.sequence.timer={started:new Date},e.sequence.timer.clock=window.setTimeout(function(){o.blocked=!1,e.sequence.timer=null,d()},Math.abs(o.interval)+i-n)}function p(e,t,n){var i=0,o=0,r="after";switch(e){case"reveal":o=t.config.duration,n&&(o+=t.config.delay),r+="Reveal";break;case"reset":o=t.config.duration,r+="Reset"}t.timer&&(i=Math.abs(t.timer.started-new Date),window.clearTimeout(t.timer.clock)),t.timer={started:new Date},t.timer.clock=window.setTimeout(function(){t.config[r](t.domEl),t.timer=null},o-i)}function g(e){if(e.sequence){var t=O.sequences[e.sequence.id];return t.active&&!t.blocked&&!e.revealing&&!e.disabled}return q(e)&&!e.revealing&&!e.disabled}function w(e){var t=e.config.useDelay;return"always"===t||"onload"===t&&!O.initialized||"once"===t&&!e.seen}function v(e){if(e.sequence){var t=O.sequences[e.sequence.id];return!t.active&&e.config.reset&&e.revealing&&!e.disabled}return!q(e)&&e.config.reset&&e.revealing&&!e.disabled}function b(e){return{width:e.clientWidth,height:e.clientHeight}}function h(e){if(e&&e!==window.document.documentElement){var t=x(e);return{x:e.scrollLeft+t.left,y:e.scrollTop+t.top}}return{x:window.pageXOffset,y:window.pageYOffset}}function x(e){var t=0,n=0,i=e.offsetHeight,o=e.offsetWidth;do isNaN(e.offsetTop)||(t+=e.offsetTop),isNaN(e.offsetLeft)||(n+=e.offsetLeft),e=e.offsetParent;while(e);return{top:t,left:n,height:i,width:o}}function q(e){function t(){var t=c+a*s,n=f+l*s,i=d-a*s,y=u-l*s,m=r.y+e.config.viewOffset.top,p=r.x+e.config.viewOffset.left,g=r.y-e.config.viewOffset.bottom+o.height,w=r.x-e.config.viewOffset.right+o.width;return t<g&&i>m&&n<w&&y>p}function n(){return"fixed"===window.getComputedStyle(e.domEl).position}var i=x(e.domEl),o=b(e.config.container),r=h(e.config.container),s=e.config.viewFactor,a=i.height,l=i.width,c=i.top,f=i.left,d=c+a,u=f+l;return t()||n()}function E(){}var O,T;e.prototype.defaults={origin:"bottom",distance:"20px",duration:500,delay:0,rotate:{x:0,y:0,z:0},opacity:0,scale:.9,easing:"cubic-bezier(0.6, 0.2, 0.1, 1)",container:window.document.documentElement,mobile:!0,reset:!1,useDelay:"always",viewFactor:.2,viewOffset:{top:0,right:0,bottom:0,left:0},beforeReveal:function(e){},beforeReset:function(e){},afterReveal:function(e){},afterReset:function(e){}},e.prototype.isSupported=function(){var e=document.documentElement.style;return"WebkitTransition"in e&&"WebkitTransform"in e||"transition"in e&&"transform"in e},e.prototype.reveal=function(e,s,a,d){var u,y,m,p,g,w;if(void 0!==s&&"number"==typeof s?(a=s,s={}):void 0!==s&&null!==s||(s={}),u=t(s),y=n(e,u),!y.length)return O;a&&"number"==typeof a&&(w=i(),g=O.sequences[w]={id:w,interval:a,elemIds:[],active:!1});for(var v=0;v<y.length;v++)p=y[v].getAttribute("data-sr-id"),p?m=O.store.elements[p]:(m={id:i(),domEl:y[v],seen:!1,revealing:!1},m.domEl.setAttribute("data-sr-id",m.id)),g&&(m.sequence={id:g.id,index:g.elemIds.length},g.elemIds.push(m.id)),o(m,s,u),r(m),l(m),O.tools.isMobile()&&!m.config.mobile||!O.isSupported()?(m.domEl.setAttribute("style",m.styles.inline),m.disabled=!0):m.revealing||m.domEl.setAttribute("style",m.styles.inline+m.styles.transform.initial);return!d&&O.isSupported()&&(c(e,s,a),O.initTimeout&&window.clearTimeout(O.initTimeout),O.initTimeout=window.setTimeout(f,0)),O},e.prototype.sync=function(){if(O.history.length&&O.isSupported()){for(var e=0;e<O.history.length;e++){var t=O.history[e];O.reveal(t.target,t.config,t.interval,!0)}f()}return O},E.prototype.isObject=function(e){return null!==e&&"object"==typeof e&&e.constructor===Object},E.prototype.isNode=function(e){return"object"==typeof window.Node?e instanceof window.Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},E.prototype.isNodeList=function(e){var t=Object.prototype.toString.call(e),n=/^\[object (HTMLCollection|NodeList|Object)\]$/;return"object"==typeof window.NodeList?e instanceof window.NodeList:e&&"object"==typeof e&&n.test(t)&&"number"==typeof e.length&&(0===e.length||this.isNode(e[0]))},E.prototype.forOwn=function(e,t){if(!this.isObject(e))throw new TypeError('Expected "object", but received "'+typeof e+'".');for(var n in e)e.hasOwnProperty(n)&&t(n)},E.prototype.extend=function(e,t){return this.forOwn(t,function(n){this.isObject(t[n])?(e[n]&&this.isObject(e[n])||(e[n]={}),this.extend(e[n],t[n])):e[n]=t[n]}.bind(this)),e},E.prototype.extendClone=function(e,t){return this.extend(this.extend({},e),t)},E.prototype.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},T=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:window.ScrollReveal=e}();

/**
 * shave - Shave is a javascript plugin that truncates multi-line text within a html element based on set max height
 * @version v2.1.7
 * @link https://github.com/dollarshaveclub/shave#readme
 * @author Jeff Wainwright <jjwainwright2@gmail.com> (jeffry.in)
 * @license MIT */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.shave=t()}(this,function(){"use strict";function e(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw Error("maxHeight is required");var i="string"==typeof e?document.querySelectorAll(e):e;if(i){var r=n.character||"…",s=n.classname||"js-shave",a=n.spaces||!0,o='<span class="js-shave-char">'+r+"</span>";"length"in i||(i=[i]);for(var h=0;h<i.length;h+=1){var c=i[h],l=c.style,f=c.querySelector("."+s),d=void 0===c.textContent?"innerText":"textContent";f&&(c.removeChild(c.querySelector(".js-shave-char")),c[d]=c[d]);var v=c[d],g=a?v:v.split(" ");if(!(g.length<2)){var u=l.height;l.height="auto";var p=l.maxHeight;if(l.maxHeight="none",c.offsetHeight<=t)l.height=u,l.maxHeight=p;else{for(var m=g.length-1,j=0,x=void 0;j<m;)x=j+m+1>>1,c[d]=a?g.slice(0,x):g.slice(0,x).join(" "),c.insertAdjacentHTML("beforeend",o),c.offsetHeight>t?m=a?x-2:x-1:j=x;c[d]=a?g.slice(0,m):g.slice(0,m).join(" "),c.insertAdjacentHTML("beforeend",o);var y=a?g.slice(m):g.slice(m).join(" ");c.insertAdjacentHTML("beforeend",'<span class="'+s+'" style="display:none;">'+y+"</span>"),l.height=u,l.maxHeight=p}}}}}return e});
/**
 * Simple Mask Money (edited)
 * Peguei o código original, converti pra <es6 no babel
 * e fiz algumas modificações pra funcionar.
 * @link: https://github.com/codermarcos/simple-mask-money/blob/master/lib/simple-mask-money.js
 * @return {String} Money formated
 */
var SimpleMaskMoney = function () {
  var args = {
    prefix: '',
    suffix: '',
    fixed: true,
    fractionDigits: 2,
    decimalSeparator: ',',
    thousandsSeparator: '.',
    autoCompleteDecimal: false,
    emptyOrInvalid: function emptyOrInvalid() {
      return args.fixed ? '0' + args.decimalSeparator + '00' : '_' + args.decimalSeparator + '__';
    }
  };

  var functions = {
    get args() {
      return args;
    },
    set args(value) {
      args = Object.assign(args, value);
      args.prefix = value.prefix || value.preffix;
    },

    onlyNumber: function onlyNumber(value) {
      var retorno = '';

      for (var i = 0; i < value.length; i++) {
        if (isFinite(value[i])) {
          retorno += value[i];
        }
      }

      return retorno;
    },

    addingPrefix: function addingPrefix(value) {
      return '' + args.prefix + value;
    },
    removingPrefix: function removingPrefix(value) {
      return value.replace(args.prefix, '');
    },

    addingSuffix: function addingSuffix(value) {
      return '' + value + args.suffix;
    },
    removingSuffix: function removingSuffix(value) {
      if (value.includes(args.suffix, value.length - args.fractionDigits)) {
        value = value.replace(args.suffix, '');
      } else {
        value = value.substring(0, value.length - 1);
      }
      return value;
    },

    addingCompleterFromStart: function addingCompleterFromStart(value, completer) {
      while (value.length < args.fractionDigits) {
        value = '' + completer + value;
      }
      return value;
    },

    addingCompleterFromEnd: function addingCompleterFromEnd(value, completer) {
      while (value.length < args.fractionDigits) {
        value = '' + value + completer;
      }
      return value;
    },

    removingCompleterFromStart: function removingCompleterFromStart(value, completer) {
      while (value[0] === completer) {
        value = value.replace(completer, '');
      }
      return value;
    },

    removingCompleterFromEnd: function removingCompleterFromEnd(value, completer) {
      while (value[value.length - 1] === completer) {
        value = value.substring(0, value.length - 1);
      }
      return value;
    },

    addingAutoComplete: function addingAutoComplete(value) {
      var n = '' + value + functions.addingCompleterFromEnd('', '0');
      return n;
    },

    autoComplete: function autoComplete(value) {
      var array = value.match(new RegExp('\\' + args.decimalSeparator, 'g')) || [];
      if (array.length > 1) {
        value = functions.addingAutoComplete(value);
      }
      return value;
    },

    addingDecimalSeparator: function addingDecimalSeparator(value, completer, separator) {
      var length = value.length - args.fractionDigits;

      var regexpFraction = void 0;
      var decimals = '$1';
      var dezenas = completer;
      var character = isFinite(completer) ? 'd' : 'w';

      regexpFraction = '(\\' + character + '{' + args.fractionDigits + '})';
      if (length > 0) {
        regexpFraction = '(\\' + character + '{' + length + '})' + regexpFraction;
        dezenas = decimals;
        decimals = '$2';
      }

      return value.replace(new RegExp(regexpFraction), '' + dezenas + separator + decimals);
    },

    addingHundredsSeparator: function addingHundredsSeparator(value) {
      var size = value.length - args.fractionDigits;
      var hundreds = Math.ceil(size / 3);
      var regexpHundreds = '(\\d)';

      var replacement = args.decimalSeparator + '$' + (hundreds + 1);

      for (var i = hundreds; i !== 0; i--) {
        if (size >= 3) {
          regexpHundreds = '(\\d{3})' + regexpHundreds;
          size -= 3;
        } else {
          regexpHundreds = '(\\d{' + size + '})' + regexpHundreds;
        }

        if (i > 1) {
          replacement = args.thousandsSeparator + '$' + i + replacement;
        } else {
          replacement = '$' + i + replacement;
        }
      }

      return value.replace(new RegExp(regexpHundreds), replacement);
    },
    removeSeparator: function removeSeparator(value, separator) {
      return value.replace(new RegExp('\\' + separator, 'g'), '');
    },
    formatDecimal: function formatDecimal(value, completer, separator) {
      value = functions.addingCompleterFromStart(value, completer);
      value = functions.addingDecimalSeparator(value, completer, separator);
      return value;
    },

    textToNumber: function textToNumber(input) {
      var retorno = input.toString();
      var completer = args.fixed ? '0' : '_';

      if (args.prefix) {
        retorno = functions.removingPrefix(retorno);
      }

      if (args.suffix) {
        retorno = functions.removingSuffix(retorno);
      }

      if (args.autoCompleteDecimal) {
        retorno = functions.autoComplete(retorno);
      }

      retorno = functions.removeSeparator(retorno, args.thousandsSeparator);
      retorno = functions.removeSeparator(retorno, args.decimalSeparator);

      retorno = functions.onlyNumber(retorno);

      retorno = functions.removingCompleterFromStart(retorno, completer);

      return retorno || (args.fixed ? '0' : '');
    },

    numberToText: function numberToText(input) {
      var retorno = args.emptyOrInvalid();

      if (parseFloat(input) !== 'NaN') {
        if (input.length <= args.fractionDigits) {
          retorno = functions.formatDecimal(input, args.fixed ? '0' : '_', args.decimalSeparator);
        } else {
          retorno = functions.addingHundredsSeparator(input);
        }
      }

      if (args.prefix) {
        retorno = functions.addingPrefix(retorno);
      }
      if (args.suffix) {
        retorno = functions.addingSuffix(retorno);
      }

      return retorno;
    },

    format: function format(value) {
      return functions.numberToText(functions.textToNumber(value));
    },

    formatToNumber: function formatToNumber(input) {
      var retorno = '0';
      var value = functions.textToNumber(input);

      if (parseFloat(value) !== 'NaN') {
        if (value.length <= args.fractionDigits) {
          value = functions.formatDecimal(value, '0', '.');
        } else {
          var lengthWithoutDecimals = value.length - args.fractionDigits;
          value = value.replace(new RegExp('(\\d{' + lengthWithoutDecimals + '})(\\d{' + args.fractionDigits + '})'), '$1.$2');
        }

        retorno = value;
      }

      return parseFloat(retorno);
    },

    setMask: function setMask(element, args) {
      var input = typeof element == 'string' ? document.querySelector(element) : element;

      if (args) {
        args = args;
      }

      input.addEventListener('input', function () {
        input.value = functions.format(input.value);
      });
      input['formatToNumber'] = function () {
        return functions.formatToNumber(input.value);
      };

      return input.value;
    }
  };

  return functions;
}();

/*! smooth-scroll v14.2.1 | (c) 2018 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/smooth-scroll */
window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t,n=(this.document||this.ownerDocument).querySelectorAll(e),o=this;do{for(t=n.length;--t>=0&&n.item(t)!==o;);}while(t<0&&(o=o.parentElement));return o}),(function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}if("function"==typeof window.CustomEvent)return!1;e.prototype=window.Event.prototype,window.CustomEvent=e})(),(function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var o=(new Date).getTime(),i=Math.max(0,16-(o-e)),r=window.setTimeout((function(){t(o+i)}),i);return e=o+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})})(),(function(e,t){"function"==typeof define&&define.amd?define([],(function(){return t(e)})):"object"==typeof exports?module.exports=t(e):e.SmoothScroll=t(e)})("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,(function(e){"use strict";var t={ignore:"[data-scroll-ignore]",header:null,topOnEmptyHash:!0,speed:500,clip:!0,offset:0,easing:"easeInOutCubic",customEasing:null,updateURL:!0,popstate:!0,emitEvents:!0},n=function(){return"querySelector"in document&&"addEventListener"in e&&"requestAnimationFrame"in e&&"closest"in e.Element.prototype},o=function(){for(var e={},t=0;t<arguments.length;t++)!(function(t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(arguments[t]);return e},i=function(t){return!!("matchMedia"in e&&e.matchMedia("(prefers-reduced-motion)").matches)},r=function(t){return parseInt(e.getComputedStyle(t).height,10)},a=function(e){var t;try{t=decodeURIComponent(e)}catch(n){t=e}return t},u=function(e){"#"===e.charAt(0)&&(e=e.substr(1));for(var t,n=String(e),o=n.length,i=-1,r="",a=n.charCodeAt(0);++i<o;){if(0===(t=n.charCodeAt(i)))throw new InvalidCharacterError("Invalid character: the input contains U+0000.");t>=1&&t<=31||127==t||0===i&&t>=48&&t<=57||1===i&&t>=48&&t<=57&&45===a?r+="\\"+t.toString(16)+" ":r+=t>=128||45===t||95===t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122?n.charAt(i):"\\"+n.charAt(i)}var u;try{u=decodeURIComponent("#"+r)}catch(e){u="#"+r}return u},c=function(e,t){var n;return"easeInQuad"===e.easing&&(n=t*t),"easeOutQuad"===e.easing&&(n=t*(2-t)),"easeInOutQuad"===e.easing&&(n=t<.5?2*t*t:(4-2*t)*t-1),"easeInCubic"===e.easing&&(n=t*t*t),"easeOutCubic"===e.easing&&(n=--t*t*t+1),"easeInOutCubic"===e.easing&&(n=t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1),"easeInQuart"===e.easing&&(n=t*t*t*t),"easeOutQuart"===e.easing&&(n=1- --t*t*t*t),"easeInOutQuart"===e.easing&&(n=t<.5?8*t*t*t*t:1-8*--t*t*t*t),"easeInQuint"===e.easing&&(n=t*t*t*t*t),"easeOutQuint"===e.easing&&(n=1+--t*t*t*t*t),"easeInOutQuint"===e.easing&&(n=t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t),e.customEasing&&(n=e.customEasing(t)),n||t},s=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},l=function(t,n,o,i){var r=0;if(t.offsetParent)do{r+=t.offsetTop,t=t.offsetParent}while(t);return r=Math.max(r-n-o,0),i&&(r=Math.min(r,s()-e.innerHeight)),r},m=function(e){return e?r(e)+e.offsetTop:0},d=function(e,t,n){t||history.pushState&&n.updateURL&&history.pushState({smoothScroll:JSON.stringify(n),anchor:e.id},document.title,e===document.documentElement?"#top":"#"+e.id)},f=function(t,n,o){0===t&&document.body.focus(),o||(t.focus(),document.activeElement!==t&&(t.setAttribute("tabindex","-1"),t.focus(),t.style.outline="none"),e.scrollTo(0,n))},h=function(t,n,o,i){if(n.emitEvents&&"function"==typeof e.CustomEvent){var r=new CustomEvent(t,{bubbles:!0,detail:{anchor:o,toggle:i}});document.dispatchEvent(r)}};return function(r,p){var g,v,w,y,E,b,S,A={};A.cancelScroll=function(e){cancelAnimationFrame(S),S=null,e||h("scrollCancel",g)},A.animateScroll=function(n,i,r){var a=o(g||t,r||{}),u="[object Number]"===Object.prototype.toString.call(n),p=u||!n.tagName?null:n;if(u||p){var v=e.pageYOffset;a.header&&!y&&(y=document.querySelector(a.header)),E||(E=m(y));var w,b,C,O=u?n:l(p,E,parseInt("function"==typeof a.offset?a.offset(n,i):a.offset,10),a.clip),I=O-v,q=s(),F=0,L=function(t,o){var r=e.pageYOffset;if(t==o||r==o||(v<o&&e.innerHeight+r)>=q)return A.cancelScroll(!0),f(n,o,u),h("scrollStop",a,n,i),w=null,S=null,!0},H=function(t){w||(w=t),F+=t-w,b=F/parseInt(a.speed,10),b=b>1?1:b,C=v+I*c(a,b),e.scrollTo(0,Math.floor(C)),L(C,O)||(S=e.requestAnimationFrame(H),w=t)};0===e.pageYOffset&&e.scrollTo(0,0),d(n,u,a),h("scrollStart",a,n,i),A.cancelScroll(!0),e.requestAnimationFrame(H)}};var C=function(t){if(!i()&&0===t.button&&!t.metaKey&&!t.ctrlKey&&"closest"in t.target&&(w=t.target.closest(r))&&"a"===w.tagName.toLowerCase()&&!t.target.closest(g.ignore)&&w.hostname===e.location.hostname&&w.pathname===e.location.pathname&&/#/.test(w.href)){var n=u(a(w.hash)),o=g.topOnEmptyHash&&"#"===n?document.documentElement:document.querySelector(n);o=o||"#top"!==n?o:document.documentElement,o&&(t.preventDefault(),A.animateScroll(o,w))}},O=function(e){if(null!==history.state&&history.state.smoothScroll&&history.state.smoothScroll===JSON.stringify(g)&&history.state.anchor){var t=document.querySelector(u(a(history.state.anchor)));t&&A.animateScroll(t,null,{updateURL:!1})}},I=function(e){b||(b=setTimeout((function(){b=null,E=m(y)}),66))};return A.destroy=function(){g&&(document.removeEventListener("click",C,!1),e.removeEventListener("resize",I,!1),e.removeEventListener("popstate",O,!1),A.cancelScroll(),g=null,v=null,w=null,y=null,E=null,b=null,S=null)},A.init=function(i){if(!n())throw"Smooth Scroll: This browser does not support the required JavaScript methods and browser APIs.";A.destroy(),g=o(t,i||{}),y=g.header?document.querySelector(g.header):null,E=m(y),document.addEventListener("click",C,!1),y&&e.addEventListener("resize",I,!1),g.updateURL&&g.popstate&&e.addEventListener("popstate",O,!1)},A.init(p),A}}));

/*!
 * tablesort v5.0.2 (2017-11-12)
 * http://tristen.ca/tablesort/demo/
 * Copyright (c) 2017 ; Licensed MIT
*/!function(){function a(b,c){if(!(this instanceof a))return new a(b,c);if(!b||"TABLE"!==b.tagName)throw new Error("Element must be a table");this.init(b,c||{})}var b=[],c=function(a){var b;return window.CustomEvent&&"function"==typeof window.CustomEvent?b=new CustomEvent(a):(b=document.createEvent("CustomEvent"),b.initCustomEvent(a,!1,!1,void 0)),b},d=function(a){return a.getAttribute("data-sort")||a.textContent||a.innerText||""},e=function(a,b){return a=a.trim().toLowerCase(),b=b.trim().toLowerCase(),a===b?0:a<b?1:-1},f=function(a,b){return function(c,d){var e=a(c.td,d.td);return 0===e?b?d.index-c.index:c.index-d.index:e}};a.extend=function(a,c,d){if("function"!=typeof c||"function"!=typeof d)throw new Error("Pattern and sort must be a function");b.push({name:a,pattern:c,sort:d})},a.prototype={init:function(a,b){var c,d,e,f,g=this;if(g.table=a,g.thead=!1,g.options=b,a.rows&&a.rows.length>0)if(a.tHead&&a.tHead.rows.length>0){for(e=0;e<a.tHead.rows.length;e++)if("thead"===a.tHead.rows[e].getAttribute("data-sort-method")){c=a.tHead.rows[e];break}c||(c=a.tHead.rows[a.tHead.rows.length-1]),g.thead=!0}else c=a.rows[0];if(c){var h=function(){g.current&&g.current!==this&&g.current.removeAttribute("aria-sort"),g.current=this,g.sortTable(this)};for(e=0;e<c.cells.length;e++)f=c.cells[e],f.setAttribute("role","columnheader"),"none"!==f.getAttribute("data-sort-method")&&(f.tabindex=0,f.addEventListener("click",h,!1),null!==f.getAttribute("data-sort-default")&&(d=f));d&&(g.current=d,g.sortTable(d))}},sortTable:function(a,g){var h=this,i=a.cellIndex,j=e,k="",l=[],m=h.thead?0:1,n=a.getAttribute("data-sort-method"),o=a.getAttribute("aria-sort");if(h.table.dispatchEvent(c("beforeSort")),g||(o="ascending"===o?"descending":"descending"===o?"ascending":h.options.descending?"descending":"ascending",a.setAttribute("aria-sort",o)),!(h.table.rows.length<2)){if(!n){for(;l.length<3&&m<h.table.tBodies[0].rows.length;)k=d(h.table.tBodies[0].rows[m].cells[i]),k=k.trim(),k.length>0&&l.push(k),m++;if(!l)return}for(m=0;m<b.length;m++)if(k=b[m],n){if(k.name===n){j=k.sort;break}}else if(l.every(k.pattern)){j=k.sort;break}for(h.col=i,m=0;m<h.table.tBodies.length;m++){var p,q=[],r={},s=0,t=0;if(!(h.table.tBodies[m].rows.length<2)){for(p=0;p<h.table.tBodies[m].rows.length;p++)k=h.table.tBodies[m].rows[p],"none"===k.getAttribute("data-sort-method")?r[s]=k:q.push({tr:k,td:d(k.cells[h.col]),index:s}),s++;for("descending"===o?q.sort(f(j,!0)):(q.sort(f(j,!1)),q.reverse()),p=0;p<s;p++)r[p]?(k=r[p],t++):k=q[p-t].tr,h.table.tBodies[m].appendChild(k)}}h.table.dispatchEvent(c("afterSort"))}},refresh:function(){void 0!==this.current&&this.sortTable(this.current,!0)}},"undefined"!=typeof module&&module.exports?module.exports=a:window.Tablesort=a}();

/*!
 * tablesort v5.0.2 (2017-11-12)
 * http://tristen.ca/tablesort/demo/
 * Copyright (c) 2017 ; Licensed MIT
*/!function(){var a=function(a){return a=a.replace(/\-/g,"/"),a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3"),new Date(a).getTime()||-1};Tablesort.extend("date",function(b){return(b.search(/(Mon|Tue|Wed|Thu|Fri|Sat|Sun)\.?\,?\s*/i)!==-1||b.search(/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/)!==-1||b.search(/(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)/i)!==-1)&&!isNaN(a(b))},function(b,c){return b=b.toLowerCase(),c=c.toLowerCase(),a(c)-a(b)})}();

(function(e,t){'object'==typeof exports&&'undefined'!=typeof module?module.exports=t():'function'==typeof define&&define.amd?define(t):e.tippy=t()})(this,function(){'use strict';function e(e){return e&&'[object Function]'==={}.toString.call(e)}function t(e,t){if(1!==e.nodeType)return[];var r=e.ownerDocument.defaultView,a=r.getComputedStyle(e,null);return t?a[t]:a}function r(e){return'HTML'===e.nodeName?e:e.parentNode||e.host}function a(e){if(!e)return document.body;switch(e.nodeName){case'HTML':case'BODY':return e.ownerDocument.body;case'#document':return e.body;}var p=t(e),o=p.overflow,i=p.overflowX,n=p.overflowY;return /(auto|scroll|overlay)/.test(o+n+i)?e:a(r(e))}function p(e){return 11===e?bt:10===e?yt:bt||yt}function o(e){if(!e)return document.documentElement;for(var r=p(10)?document.body:null,a=e.offsetParent||null;a===r&&e.nextElementSibling;)a=(e=e.nextElementSibling).offsetParent;var i=a&&a.nodeName;return i&&'BODY'!==i&&'HTML'!==i?-1!==['TH','TD','TABLE'].indexOf(a.nodeName)&&'static'===t(a,'position')?o(a):a:e?e.ownerDocument.documentElement:document.documentElement}function n(e){var t=e.nodeName;return'BODY'!==t&&('HTML'===t||o(e.firstElementChild)===e)}function s(e){return null===e.parentNode?e:s(e.parentNode)}function l(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var r=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,a=r?e:t,p=r?t:e,i=document.createRange();i.setStart(a,0),i.setEnd(p,0);var d=i.commonAncestorContainer;if(e!==d&&t!==d||a.contains(p))return n(d)?d:o(d);var c=s(e);return c.host?l(c.host,t):l(e,s(t).host)}function d(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'top',r='top'===t?'scrollTop':'scrollLeft',a=e.nodeName;if('BODY'===a||'HTML'===a){var p=e.ownerDocument.documentElement,o=e.ownerDocument.scrollingElement||p;return o[r]}return e[r]}function c(e,t){var r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],a=d(t,'top'),p=d(t,'left'),o=r?-1:1;return e.top+=a*o,e.bottom+=a*o,e.left+=p*o,e.right+=p*o,e}function m(e,t){var r='x'===t?'Left':'Top',a='Left'===r?'Right':'Bottom';return parseFloat(e['border'+r+'Width'],10)+parseFloat(e['border'+a+'Width'],10)}function f(e,t,r,a){return Ze(t['offset'+e],t['scroll'+e],r['client'+e],r['offset'+e],r['scroll'+e],p(10)?parseInt(r['offset'+e])+parseInt(a['margin'+('Height'===e?'Top':'Left')])+parseInt(a['margin'+('Height'===e?'Bottom':'Right')]):0)}function h(e){var t=e.body,r=e.documentElement,a=p(10)&&getComputedStyle(r);return{height:f('Height',t,r,a),width:f('Width',t,r,a)}}function b(e){return wt({},e,{right:e.left+e.width,bottom:e.top+e.height})}function u(e){var r={};try{if(p(10)){r=e.getBoundingClientRect();var a=d(e,'top'),o=d(e,'left');r.top+=a,r.left+=o,r.bottom+=a,r.right+=o}else r=e.getBoundingClientRect()}catch(t){}var i={left:r.left,top:r.top,width:r.right-r.left,height:r.bottom-r.top},n='HTML'===e.nodeName?h(e.ownerDocument):{},s=n.width||e.clientWidth||i.right-i.left,l=n.height||e.clientHeight||i.bottom-i.top,c=e.offsetWidth-s,f=e.offsetHeight-l;if(c||f){var y=t(e);c-=m(y,'x'),f-=m(y,'y'),i.width-=c,i.height-=f}return b(i)}function y(e,r){var o=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],i=p(10),n='HTML'===r.nodeName,s=u(e),l=u(r),d=a(e),m=t(r),f=parseFloat(m.borderTopWidth,10),h=parseFloat(m.borderLeftWidth,10);o&&n&&(l.top=Ze(l.top,0),l.left=Ze(l.left,0));var y=b({top:s.top-l.top-f,left:s.left-l.left-h,width:s.width,height:s.height});if(y.marginTop=0,y.marginLeft=0,!i&&n){var g=parseFloat(m.marginTop,10),x=parseFloat(m.marginLeft,10);y.top-=f-g,y.bottom-=f-g,y.left-=h-x,y.right-=h-x,y.marginTop=g,y.marginLeft=x}return(i&&!o?r.contains(d):r===d&&'BODY'!==d.nodeName)&&(y=c(y,r)),y}function g(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],r=e.ownerDocument.documentElement,a=y(e,r),p=Ze(r.clientWidth,window.innerWidth||0),o=Ze(r.clientHeight,window.innerHeight||0),i=t?0:d(r),n=t?0:d(r,'left'),s={top:i-a.top+a.marginTop,left:n-a.left+a.marginLeft,width:p,height:o};return b(s)}function x(e){var a=e.nodeName;return'BODY'!==a&&'HTML'!==a&&('fixed'===t(e,'position')||x(r(e)))}function w(e){if(!e||!e.parentElement||p())return document.documentElement;for(var r=e.parentElement;r&&'none'===t(r,'transform');)r=r.parentElement;return r||document.documentElement}function v(e,t,p,o){var i=!!(4<arguments.length&&void 0!==arguments[4])&&arguments[4],n={top:0,left:0},s=i?w(e):l(e,t);if('viewport'===o)n=g(s,i);else{var d;'scrollParent'===o?(d=a(r(t)),'BODY'===d.nodeName&&(d=e.ownerDocument.documentElement)):'window'===o?d=e.ownerDocument.documentElement:d=o;var c=y(d,s,i);if('HTML'===d.nodeName&&!x(s)){var m=h(e.ownerDocument),f=m.height,b=m.width;n.top+=c.top-c.marginTop,n.bottom=f+c.top,n.left+=c.left-c.marginLeft,n.right=b+c.left}else n=c}p=p||0;var u='number'==typeof p;return n.left+=u?p:p.left||0,n.top+=u?p:p.top||0,n.right-=u?p:p.right||0,n.bottom-=u?p:p.bottom||0,n}function k(e){var t=e.width,r=e.height;return t*r}function E(e,t,r,a,p){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf('auto'))return e;var i=v(r,a,o,p),n={top:{width:i.width,height:t.top-i.top},right:{width:i.right-t.right,height:i.height},bottom:{width:i.width,height:i.bottom-t.bottom},left:{width:t.left-i.left,height:i.height}},s=Object.keys(n).map(function(e){return wt({key:e},n[e],{area:k(n[e])})}).sort(function(e,t){return t.area-e.area}),l=s.filter(function(e){var t=e.width,a=e.height;return t>=r.clientWidth&&a>=r.clientHeight}),d=0<l.length?l[0].key:s[0].key,c=e.split('-')[1];return d+(c?'-'+c:'')}function C(e,t,r){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,p=a?w(t):l(t,r);return y(r,p,a)}function L(e){var t=e.ownerDocument.defaultView,r=t.getComputedStyle(e),a=parseFloat(r.marginTop||0)+parseFloat(r.marginBottom||0),p=parseFloat(r.marginLeft||0)+parseFloat(r.marginRight||0),o={width:e.offsetWidth+p,height:e.offsetHeight+a};return o}function O(e){var t={left:'right',right:'left',bottom:'top',top:'bottom'};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function T(e,t,r){r=r.split('-')[0];var a=L(e),p={width:a.width,height:a.height},o=-1!==['right','left'].indexOf(r),i=o?'top':'left',n=o?'left':'top',s=o?'height':'width',l=o?'width':'height';return p[i]=t[i]+t[s]/2-a[s]/2,p[n]=r===n?t[n]-a[l]:t[O(n)],p}function S(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function A(e,t,r){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===r});var a=S(e,function(e){return e[t]===r});return e.indexOf(a)}function Y(t,r,a){var p=void 0===a?t:t.slice(0,A(t,'name',a));return p.forEach(function(t){t['function']&&console.warn('`modifier.function` is deprecated, use `modifier.fn`!');var a=t['function']||t.fn;t.enabled&&e(a)&&(r.offsets.popper=b(r.offsets.popper),r.offsets.reference=b(r.offsets.reference),r=a(r,t))}),r}function P(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=C(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=E(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=T(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?'fixed':'absolute',e=Y(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function D(e,t){return e.some(function(e){var r=e.name,a=e.enabled;return a&&r===t})}function X(e){for(var t=[!1,'ms','Webkit','Moz','O'],r=e.charAt(0).toUpperCase()+e.slice(1),a=0;a<t.length;a++){var p=t[a],o=p?''+p+r:e;if('undefined'!=typeof document.body.style[o])return o}return null}function I(){return this.state.isDestroyed=!0,D(this.modifiers,'applyStyle')&&(this.popper.removeAttribute('x-placement'),this.popper.style.position='',this.popper.style.top='',this.popper.style.left='',this.popper.style.right='',this.popper.style.bottom='',this.popper.style.willChange='',this.popper.style[X('transform')]=''),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function N(e){var t=e.ownerDocument;return t?t.defaultView:window}function H(e,t,r,p){var o='BODY'===e.nodeName,i=o?e.ownerDocument.defaultView:e;i.addEventListener(t,r,{passive:!0}),o||H(a(i.parentNode),t,r,p),p.push(i)}function W(e,t,r,p){r.updateBound=p,N(e).addEventListener('resize',r.updateBound,{passive:!0});var o=a(e);return H(o,'scroll',r.updateBound,r.scrollParents),r.scrollElement=o,r.eventsEnabled=!0,r}function M(){this.state.eventsEnabled||(this.state=W(this.reference,this.options,this.state,this.scheduleUpdate))}function B(e,t){return N(e).removeEventListener('resize',t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener('scroll',t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function R(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=B(this.reference,this.state))}function z(e){return''!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function F(e,t){Object.keys(t).forEach(function(r){var a='';-1!==['width','height','top','right','bottom','left'].indexOf(r)&&z(t[r])&&(a='px'),e.style[r]=t[r]+a})}function _(e,t){Object.keys(t).forEach(function(r){var a=t[r];!1===a?e.removeAttribute(r):e.setAttribute(r,t[r])})}function U(e,t){var r=e.offsets,a=r.popper,p=r.reference,o=Qe,i=function(e){return e},n=o(a.width),s=o(p.width),l=-1!==['left','right'].indexOf(e.placement),d=-1!==e.placement.indexOf('-'),c=t?l||d||s%2==n%2?o:Je:i,m=t?o:i;return{left:c(1==s%2&&1==n%2&&!d&&t?a.left-1:a.left),top:m(a.top),bottom:m(a.bottom),right:c(a.right)}}function V(e,t,r){var a=S(e,function(e){var r=e.name;return r===t}),p=!!a&&e.some(function(e){return e.name===r&&e.enabled&&e.order<a.order});if(!p){var o='`'+t+'`';console.warn('`'+r+'`'+' modifier is required by '+o+' modifier in order to work, be sure to include it before '+o+'!')}return p}function q(e){return'end'===e?'start':'start'===e?'end':e}function j(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],r=Et.indexOf(e),a=Et.slice(r+1).concat(Et.slice(0,r));return t?a.reverse():a}function K(e,t,r,a){var p=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+p[1],i=p[2];if(!o)return e;if(0===i.indexOf('%')){var n;switch(i){case'%p':n=r;break;case'%':case'%r':default:n=a;}var s=b(n);return s[t]/100*o}if('vh'===i||'vw'===i){var l;return l='vh'===i?Ze(document.documentElement.clientHeight,window.innerHeight||0):Ze(document.documentElement.clientWidth,window.innerWidth||0),l/100*o}return o}function G(e,t,r,a){var p=[0,0],o=-1!==['right','left'].indexOf(a),i=e.split(/(\+|\-)/).map(function(e){return e.trim()}),n=i.indexOf(S(i,function(e){return-1!==e.search(/,|\s/)}));i[n]&&-1===i[n].indexOf(',')&&console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');var s=/\s*,\s*|\s+/,l=-1===n?[i]:[i.slice(0,n).concat([i[n].split(s)[0]]),[i[n].split(s)[1]].concat(i.slice(n+1))];return l=l.map(function(e,a){var p=(1===a?!o:o)?'height':'width',i=!1;return e.reduce(function(e,t){return''===e[e.length-1]&&-1!==['+','-'].indexOf(t)?(e[e.length-1]=t,i=!0,e):i?(e[e.length-1]+=t,i=!1,e):e.concat(t)},[]).map(function(e){return K(e,p,t,r)})}),l.forEach(function(e,t){e.forEach(function(r,a){z(r)&&(p[t]+=r*('-'===e[a-1]?-1:1))})}),p}function J(e,t){var r=t.offset,a=e.placement,p=e.offsets,o=p.popper,i=p.reference,n=a.split('-')[0],s=void 0;return s=z(+r)?[+r,0]:G(r,o,i,n),'left'===n?(o.top+=s[0],o.left-=s[1]):'right'===n?(o.top+=s[0],o.left+=s[1]):'top'===n?(o.left+=s[0],o.top-=s[1]):'bottom'===n&&(o.left+=s[0],o.top+=s[1]),e.popper=o,e}function Q(e){return[].slice.call(e)}function Z(e,t){return(Tt.closest||function(e){for(var t=this;t;){if(St.call(t,e))return t;t=t.parentElement}}).call(e,t)}function $(e,t){for(;e;){if(t(e))return e;e=e.parentElement}}function ee(){return document.createElement('div')}function te(e,t){e[Yt.x&&'innerHTML']=t instanceof Element?t[Yt.x&&'innerHTML']:t}function re(e,t){t.content instanceof Element?(te(e,''),e.appendChild(t.content)):e[t.allowHTML?'innerHTML':'textContent']=t.content}function ae(e){return{tooltip:e.querySelector(Ot.TOOLTIP),backdrop:e.querySelector(Ot.BACKDROP),content:e.querySelector(Ot.CONTENT),arrow:e.querySelector(Ot.ARROW)||e.querySelector(Ot.ROUND_ARROW)}}function pe(e){e.setAttribute('data-inertia','')}function oe(e){e.removeAttribute('data-inertia')}function ie(e){var t=ee();return'round'===e?(t.className='tippy-roundarrow',te(t,'<svg viewBox="0 0 24 8" xmlns="http://www.w3.org/2000/svg"><path d="M3 8s2.021-.015 5.253-4.218C9.584 2.051 10.797 1.007 12 1c1.203-.007 2.416 1.035 3.761 2.782C19.012 8.005 21 8 21 8H3z"/></svg>')):t.className='tippy-arrow',t}function ne(){var e=ee();return e.className='tippy-backdrop',e.setAttribute('data-state','hidden'),e}function se(e,t){e.setAttribute('tabindex','-1'),t.setAttribute('data-interactive','')}function le(e,t){e.removeAttribute('tabindex'),t.removeAttribute('data-interactive')}function de(e,t){e.forEach(function(e){e&&(e.style.transitionDuration=t+'ms')})}function ce(e,t,r){e[t+'EventListener']('transitionend',r)}function me(e){var t=e.getAttribute('x-placement');return t?t.split('-')[0]:''}function fe(e,t){e.forEach(function(e){e&&e.setAttribute('data-state',t)})}function he(e){void e.offsetHeight}function be(e,t){var r=ee();r.className='tippy-popper',r.setAttribute('role','tooltip'),r.id='tippy-'+e,r.style.zIndex=t.zIndex;var a=ee();a.className='tippy-tooltip',a.style.maxWidth=t.maxWidth+('number'==typeof t.maxWidth?'px':''),a.setAttribute('data-size',t.size),a.setAttribute('data-animation',t.animation),a.setAttribute('data-state','hidden'),t.theme.split(' ').forEach(function(e){a.classList.add(e+'-theme')});var p=ee();return p.className='tippy-content',p.setAttribute('data-state','hidden'),t.interactive&&se(r,a),t.arrow&&a.appendChild(ie(t.arrowType)),t.animateFill&&(a.appendChild(ne()),a.setAttribute('data-animatefill','')),t.inertia&&pe(a),re(p,t),a.appendChild(p),r.appendChild(a),r.addEventListener('focusout',function(t){t.relatedTarget&&r._tippy&&!$(t.relatedTarget,function(e){return e===r})&&t.relatedTarget!==r._tippy.reference&&r._tippy.props.shouldPopperHideOnBlur(t)&&r._tippy.hide()}),r}function ye(e,t,r){var a=ae(e),p=a.tooltip,o=a.content,i=a.backdrop,n=a.arrow;e.style.zIndex=r.zIndex,p.setAttribute('data-size',r.size),p.setAttribute('data-animation',r.animation),p.style.maxWidth=r.maxWidth+('number'==typeof r.maxWidth?'px':''),t.content!==r.content&&re(o,r),!t.animateFill&&r.animateFill?(p.appendChild(ne()),p.setAttribute('data-animatefill','')):t.animateFill&&!r.animateFill&&(p.removeChild(i),p.removeAttribute('data-animatefill')),!t.arrow&&r.arrow?p.appendChild(ie(r.arrowType)):t.arrow&&!r.arrow&&p.removeChild(n),t.arrow&&r.arrow&&t.arrowType!==r.arrowType&&p.replaceChild(ie(r.arrowType),n),!t.interactive&&r.interactive?se(e,p):t.interactive&&!r.interactive&&le(e,p),!t.inertia&&r.inertia?pe(p):t.inertia&&!r.inertia&&oe(p),t.theme!==r.theme&&(t.theme.split(' ').forEach(function(e){p.classList.remove(e+'-theme')}),r.theme.split(' ').forEach(function(e){p.classList.add(e+'-theme')}))}function ue(e,t){var r=e.popper,a=e.options,p=a.onCreate,o=a.onUpdate;a.onCreate=a.onUpdate=function(){he(r),t(),o(),a.onCreate=p,a.onUpdate=o}}function ge(e){Q(document.querySelectorAll(Ot.POPPER)).forEach(function(t){var r=t._tippy;r&&!0===r.props.hideOnClick&&(!e||t!==e.popper)&&r.hide()})}function xe(e,t,r,a){if(!e)return!0;var p=r.clientX,o=r.clientY,i=a.interactiveBorder,n=a.distance,s=t.top-o>('top'===e?i+n:i),l=o-t.bottom>('bottom'===e?i+n:i),d=t.left-p>('left'===e?i+n:i),c=p-t.right>('right'===e?i+n:i);return s||l||d||c}function we(e,t){return-(e-t)+'px'}function ve(e){return'[object Object]'==={}.toString.call(e)}function ke(e,t){return{}.hasOwnProperty.call(e,t)}function Ee(e){return!isNaN(e)&&!isNaN(parseFloat(e))}function Ce(e){if(e instanceof Element||ve(e))return[e];if(e instanceof NodeList)return Q(e);if(Array.isArray(e))return e;try{return Q(document.querySelectorAll(e))}catch(t){return[]}}function Le(e,t,r){if(Array.isArray(e)){var a=e[t];return null==a?r:a}return e}function Oe(e){var t=window.scrollX||window.pageXOffset,r=window.scrollY||window.pageYOffset;e.focus(),scroll(t,r)}function Te(e){setTimeout(e,1)}function Se(e,t){var r;return function(){var a=this,p=arguments;clearTimeout(r),r=setTimeout(function(){return e.apply(a,p)},t)}}function Ae(e,t){return e&&e.modifiers&&e.modifiers[t]}function Ye(e,t){return-1<e.indexOf(t)}function Pe(){Pt||(Pt=!0,it&&document.body.classList.add('tippy-iOS'),window.performance&&document.addEventListener('mousemove',De))}function De(){var e=performance.now();20>e-Dt&&(Pt=!1,document.removeEventListener('mousemove',De),!it&&document.body.classList.remove('tippy-iOS')),Dt=e}function Xe(e){var t=e.target;if(!(t instanceof Element))return ge();var r=Z(t,Ot.POPPER);if(!(r&&r._tippy&&r._tippy.props.interactive)){var a=$(t,function(e){return e._tippy&&e._tippy.reference===e});if(a){var p=a._tippy,o=Ye(p.props.trigger,'click');if(Pt||o)return ge(p);if(!0!==p.props.hideOnClick||o)return;p.clearDelayTimeouts()}ge()}}function Ie(){var e=document,t=e.activeElement;t&&t.blur&&t._tippy&&t.blur()}function Ne(){Q(document.querySelectorAll(Ot.POPPER)).forEach(function(e){var t=e._tippy;t.props.livePlacement||t.popperInstance.scheduleUpdate()})}function He(){document.addEventListener('click',Xe,!0),document.addEventListener('touchstart',Pe,At),window.addEventListener('blur',Ie),window.addEventListener('resize',Ne),!nt&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints)&&document.addEventListener('pointerdown',Pe)}function We(e){return!(e instanceof Element)||St.call(e,'a[href],area[href],button,details,input,textarea,select,iframe,[tabindex]')&&!e.hasAttribute('disabled')}function Me(e){return Xt.reduce(function(t,r){var a=(e.getAttribute('data-tippy-'+r)||'').trim();return a?(t[r]='content'===r?a:'true'===a||'false'!==a&&(Ee(a)?+a:'['===a[0]||'{'===a[0]?JSON.parse(a):a),t):t},{})}function Be(e){var t={isVirtual:!0,attributes:e.attributes||{},setAttribute:function(t,r){e.attributes[t]=r},getAttribute:function(t){return e.attributes[t]},removeAttribute:function(t){delete e.attributes[t]},hasAttribute:function(t){return t in e.attributes},addEventListener:function(){},removeEventListener:function(){},classList:{classNames:{},add:function(t){e.classList.classNames[t]=!0},remove:function(t){delete e.classList.classNames[t]},contains:function(t){return t in e.classList.classNames}}};for(var r in t)e[r]=t[r]}function Re(e,t){var r=It({},t,t.performance?{}:Me(e));return r.arrow&&(r.animateFill=!1),'function'==typeof r.appendTo&&(r.appendTo=t.appendTo(e)),'function'==typeof r.content&&(r.content=t.content(e)),r}function ze(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];Object.keys(e).forEach(function(e){if(!ke(t,e))throw new Error('[tippy]: `'+e+'` is not a valid option')})}function Fe(e,t){return(t?e:{X:'Y',Y:'X'}[e])||''}function _e(e,t,r,p){var o=t[0],i=t[1];if(!o&&!i)return'';var n={scale:function(){return i?r?o+', '+i:i+', '+o:''+o}(),translate:function(){return i?r?p?o+'px, '+-i+'px':o+'px, '+i+'px':p?-i+'px, '+o+'px':i+'px, '+o+'px':p?-o+'px':o+'px'}()};return n[e]}function Ue(e,t){var r=e.match(new RegExp(t+'([XY])'));return r?r[1]:''}function Ve(e,t){var r=e.match(t);return r?r[1].split(',').map(function(e){return parseFloat(e,10)}):[]}function qe(e,t){var r=me(Z(e,Ot.POPPER)),a=Ye(['top','bottom'],r),p=Ye(['right','bottom'],r),o={translate:{axis:Ue(t,'translate'),numbers:Ve(t,Nt.translate)},scale:{axis:Ue(t,'scale'),numbers:Ve(t,Nt.scale)}},i=t.replace(Nt.translate,'translate'+Fe(o.translate.axis,a)+'('+_e('translate',o.translate.numbers,a,p)+')').replace(Nt.scale,'scale'+Fe(o.scale.axis,a)+'('+_e('scale',o.scale.numbers,a,p)+')');e.style['undefined'==typeof document.body.style.transform?'webkitTransform':'transform']=i}function je(e,t){function r(){Te(function(){z=!1})}function a(){X=new MutationObserver(function(){q.popperInstance.update()}),X.observe(U,{childList:!0,subtree:!0,characterData:!0})}function p(e){var t=N=e,r=t.clientX,a=t.clientY;if(q.popperInstance){var p=me(q.popper),o=q.popperChildren.arrow?20:5,i=Ye(['top','bottom'],p),n=Ye(['left','right'],p),l=i?Ze(o,r):r,d=n?Ze(o,a):a;i&&l>o&&(l=Ge(r,window.innerWidth-o)),n&&d>o&&(d=Ge(a,window.innerHeight-o));var c=q.reference.getBoundingClientRect(),m=q.props.followCursor,f='horizontal'===m,h='vertical'===m;q.popperInstance.reference={getBoundingClientRect:function(){return{width:0,height:0,top:f?c.top:d,bottom:f?c.bottom:d,left:h?c.left:l,right:h?c.right:l}},clientWidth:0,clientHeight:0},q.popperInstance.scheduleUpdate(),'initial'===m&&q.state.isVisible&&s()}}function o(e){var t=Z(e.target,q.props.target);t&&!t._tippy&&(je(t,It({},q.props,{target:'',showOnInit:!0})),i(e))}function i(e){if(T(),!q.state.isVisible){if(q.props.target)return o(e);if(M=!0,q.props.wait)return q.props.wait(q,e);x()&&!q.state.isMounted&&document.addEventListener('mousemove',p);var t=Le(q.props.delay,0,st.delay);t?H=setTimeout(function(){A()},t):A()}}function n(){if(T(),!q.state.isVisible)return s();M=!1;var e=Le(q.props.delay,1,st.delay);e?W=setTimeout(function(){q.state.isVisible&&Y()},e):Y()}function s(){document.removeEventListener('mousemove',p),N=null}function l(){document.body.removeEventListener('mouseleave',n),document.removeEventListener('mousemove',F)}function d(e){!q.state.isEnabled||y(e)||(!q.state.isVisible&&(I=e),'click'===e.type&&!1!==q.props.hideOnClick&&q.state.isVisible?n():i(e))}function c(e){var t=$(e.target,function(e){return e._tippy}),r=Z(e.target,Ot.POPPER)===q.popper,a=t===q.reference;r||a||xe(me(q.popper),q.popper.getBoundingClientRect(),e,q.props)&&(l(),n())}function m(e){return y(e)?void 0:q.props.interactive?(document.body.addEventListener('mouseleave',n),void document.addEventListener('mousemove',F)):void n()}function f(e){if(e.target===q.reference){if(q.props.interactive){if(!e.relatedTarget)return;if(Z(e.relatedTarget,Ot.POPPER))return}n()}}function h(e){Z(e.target,q.props.target)&&i(e)}function b(e){Z(e.target,q.props.target)&&n()}function y(e){var t=Ye(e.type,'touch'),r=nt&&Pt&&q.props.touchHold&&!t,a=Pt&&!q.props.touchHold&&t;return r||a}function u(){var e=q.props.popperOptions,t=q.popperChildren,r=t.tooltip,a=t.arrow;return new Lt(q.reference,q.popper,It({placement:q.props.placement},e,{modifiers:It({},e?e.modifiers:{},{preventOverflow:It({boundariesElement:q.props.boundary},Ae(e,'preventOverflow')),arrow:It({element:a,enabled:!!a},Ae(e,'arrow')),flip:It({enabled:q.props.flip,padding:q.props.distance+5,behavior:q.props.flipBehavior},Ae(e,'flip')),offset:It({offset:q.props.offset},Ae(e,'offset'))}),onCreate:function(){r.style[me(q.popper)]=we(q.props.distance,st.distance),a&&q.props.arrowTransform&&qe(a,q.props.arrowTransform)},onUpdate:function(){var e=r.style;e.top='',e.bottom='',e.left='',e.right='',e[me(q.popper)]=we(q.props.distance,st.distance),a&&q.props.arrowTransform&&qe(a,q.props.arrowTransform)}}))}function g(e){q.popperInstance?!x()&&(q.popperInstance.scheduleUpdate(),q.props.livePlacement&&q.popperInstance.enableEventListeners()):(q.popperInstance=u(),a(),(!q.props.livePlacement||x())&&q.popperInstance.disableEventListeners()),q.popperInstance.reference=q.reference;var t=q.popperChildren.arrow;if(x()){t&&(t.style.margin='0');var r=Le(q.props.delay,0,st.delay);I.type&&p(r&&N?N:I)}else t&&(t.style.margin='');ue(q.popperInstance,e),q.props.appendTo.contains(q.popper)||(q.props.appendTo.appendChild(q.popper),q.props.onMount(q),q.state.isMounted=!0)}function x(){return q.props.followCursor&&!Pt&&'focus'!==I.type}function w(){de([q.popper],ot?0:q.props.updateDuration);(function e(){q.popperInstance&&q.popperInstance.scheduleUpdate(),q.state.isMounted?requestAnimationFrame(e):de([q.popper],0)})()}function v(e,t){E(e,function(){!q.state.isVisible&&q.props.appendTo.contains(q.popper)&&t()})}function k(e,t){E(e,t)}function E(e,t){if(0===e)return t();var r=q.popperChildren.tooltip,a=function a(p){p.target===r&&(ce(r,'remove',a),t())};ce(r,'remove',B),ce(r,'add',a),B=a}function C(e,t){var r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];q.reference.addEventListener(e,t,r),R.push({eventType:e,handler:t,options:r})}function L(){q.props.touchHold&&!q.props.target&&(C('touchstart',d,At),C('touchend',m,At)),q.props.trigger.trim().split(' ').forEach(function(e){'manual'===e||(q.props.target?'mouseenter'===e?(C('mouseover',h),C('mouseout',b)):'focus'===e?(C('focusin',h),C('focusout',b)):'click'===e?C(e,h):void 0:(C(e,d),'mouseenter'===e?C('mouseleave',m):'focus'===e?C(ot?'focusout':'blur',f):void 0))})}function O(){R.forEach(function(e){var t=e.eventType,r=e.handler,a=e.options;q.reference.removeEventListener(t,r,a)}),R=[]}function T(){clearTimeout(H),clearTimeout(W)}function S(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};ze(e,st);var t=q.props,r=Re(q.reference,It({},q.props,e,{performance:!0}));r.performance=ke(e,'performance')?e.performance:t.performance,q.props=r,(ke(e,'trigger')||ke(e,'touchHold'))&&(O(),L()),ke(e,'interactiveDebounce')&&(l(),F=Se(c,e.interactiveDebounce)),ye(q.popper,t,r),q.popperChildren=ae(q.popper),q.popperInstance&&lt.some(function(t){return ke(e,t)})&&(q.popperInstance.destroy(),q.popperInstance=u(),!q.state.isVisible&&q.popperInstance.disableEventListeners(),q.props.followCursor&&N&&p(N))}function A(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Le(q.props.duration,0,st.duration[0]);return q.state.isDestroyed||!q.state.isEnabled||Pt&&!q.props.touch?void 0:q.reference.isVirtual||document.documentElement.contains(q.reference)?q.reference.hasAttribute('disabled')?void 0:z?void(z=!1):void(!1===q.props.onShow(q)||(q.popper.style.visibility='visible',q.state.isVisible=!0,de([q.popper,q.popperChildren.tooltip,q.popperChildren.backdrop],0),g(function(){q.state.isVisible&&(!x()&&q.popperInstance.update(),de([q.popperChildren.tooltip,q.popperChildren.backdrop,q.popperChildren.content],e),q.popperChildren.backdrop&&(q.popperChildren.content.style.transitionDelay=Qe(e/6)+'ms'),q.props.interactive&&q.reference.classList.add('tippy-active'),q.props.sticky&&w(),fe([q.popperChildren.tooltip,q.popperChildren.backdrop,q.popperChildren.content],'visible'),k(e,function(){0===q.props.updateDuration&&q.popperChildren.tooltip.classList.add('tippy-notransition'),q.props.autoFocus&&q.props.interactive&&Ye(['focus','click'],I.type)&&Oe(q.popper),q.props.aria&&q.reference.setAttribute('aria-'+q.props.aria,q.popper.id),q.props.onShown(q),q.state.isShown=!0}))}))):P()}function Y(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Le(q.props.duration,1,st.duration[1]);q.state.isDestroyed||!q.state.isEnabled||!1===q.props.onHide(q)||(0===q.props.updateDuration&&q.popperChildren.tooltip.classList.remove('tippy-notransition'),q.props.interactive&&q.reference.classList.remove('tippy-active'),q.popper.style.visibility='hidden',q.state.isVisible=!1,q.state.isShown=!1,de([q.popperChildren.tooltip,q.popperChildren.backdrop,q.popperChildren.content],e),fe([q.popperChildren.tooltip,q.popperChildren.backdrop,q.popperChildren.content],'hidden'),q.props.autoFocus&&q.props.interactive&&!z&&Ye(['focus','click'],I.type)&&('focus'===I.type&&(z=!0),Oe(q.reference)),v(e,function(){M||s(),q.props.aria&&q.reference.removeAttribute('aria-'+q.props.aria),q.popperInstance.disableEventListeners(),q.props.appendTo.removeChild(q.popper),q.state.isMounted=!1,q.props.onHidden(q)}))}function P(e){q.state.isDestroyed||(q.state.isMounted&&Y(0),O(),q.reference.removeEventListener('click',r),delete q.reference._tippy,q.props.target&&e&&Q(q.reference.querySelectorAll(q.props.target)).forEach(function(e){return e._tippy&&e._tippy.destroy()}),q.popperInstance&&q.popperInstance.destroy(),X&&X.disconnect(),q.state.isDestroyed=!0)}var D=Re(e,t);if(!D.multiple&&e._tippy)return null;var X=null,I={},N=null,H=0,W=0,M=!1,B=function(){},R=[],z=!1,F=0<D.interactiveDebounce?Se(c,D.interactiveDebounce):c,_=Ht++,U=be(_,D);U.addEventListener('mouseenter',function(e){q.props.interactive&&q.state.isVisible&&'mouseenter'===I.type&&i(e)}),U.addEventListener('mouseleave',function(e){q.props.interactive&&'mouseenter'===I.type&&0===q.props.interactiveDebounce&&xe(me(U),U.getBoundingClientRect(),e,q.props)&&n()});var V=ae(U),q={id:_,reference:e,popper:U,popperChildren:V,popperInstance:null,props:D,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},clearDelayTimeouts:T,set:S,setContent:function(e){S({content:e})},show:A,hide:Y,enable:function(){q.state.isEnabled=!0},disable:function(){q.state.isEnabled=!1},destroy:P};return L(),e.addEventListener('click',r),D.lazy||(q.popperInstance=u(),q.popperInstance.disableEventListeners()),D.showOnInit&&i(),!D.a11y||D.target||We(e)||e.setAttribute('tabindex','0'),e._tippy=q,U._tippy=q,q}function Ke(e,t,r){ze(t,st),Wt||(He(),Wt=!0);var a=It({},st,t);ve(e)&&Be(e);var p=Ce(e),o=p[0],i=(r&&o?[o]:p).reduce(function(e,t){var r=t&&je(t,a);return r&&e.push(r),e},[]),n={targets:e,props:a,instances:i,destroyAll:function(){n.instances.forEach(function(e){e.destroy()}),n.instances=[]}};return n}for(var Ge=Math.min,Je=Math.floor,Qe=Math.round,Ze=Math.max,$e='.tippy-iOS{cursor:pointer!important}.tippy-notransition{transition:none!important}.tippy-popper{-webkit-perspective:700px;perspective:700px;z-index:9999;outline:0;transition-timing-function:cubic-bezier(.165,.84,.44,1);pointer-events:none;line-height:1.4;max-width:calc(100% - 10px)}.tippy-popper[x-placement^=top] .tippy-backdrop{border-radius:40% 40% 0 0}.tippy-popper[x-placement^=top] .tippy-roundarrow{bottom:-8px;-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=top] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.tippy-popper[x-placement^=top] .tippy-arrow{border-top:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;bottom:-7px;margin:0 6px;-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=top] .tippy-backdrop{-webkit-transform-origin:0 25%;transform-origin:0 25%}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-55%);transform:scale(1) translate(-50%,-55%)}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%,-45%);transform:scale(.2) translate(-50%,-45%);opacity:0}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px)}.tippy-popper[x-placement^=top] [data-animation=perspective]{-webkit-transform-origin:bottom;transform-origin:bottom}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=visible]{-webkit-transform:translateY(-10px) rotateX(0);transform:translateY(-10px) rotateX(0)}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:translateY(0) rotateX(60deg);transform:translateY(0) rotateX(60deg)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=visible]{-webkit-transform:translateY(-10px) scale(1);transform:translateY(-10px) scale(1)}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(0) scale(.5);transform:translateY(0) scale(.5)}.tippy-popper[x-placement^=bottom] .tippy-backdrop{border-radius:0 0 30% 30%}.tippy-popper[x-placement^=bottom] .tippy-roundarrow{top:-8px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%}.tippy-popper[x-placement^=bottom] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(0);transform:rotate(0)}.tippy-popper[x-placement^=bottom] .tippy-arrow{border-bottom:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;top:-7px;margin:0 6px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%}.tippy-popper[x-placement^=bottom] .tippy-backdrop{-webkit-transform-origin:0 -50%;transform-origin:0 -50%}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-45%);transform:scale(1) translate(-50%,-45%)}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%);transform:scale(.2) translate(-50%);opacity:0}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(20px);transform:translateY(20px)}.tippy-popper[x-placement^=bottom] [data-animation=perspective]{-webkit-transform-origin:top;transform-origin:top}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=visible]{-webkit-transform:translateY(10px) rotateX(0);transform:translateY(10px) rotateX(0)}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:translateY(0) rotateX(-60deg);transform:translateY(0) rotateX(-60deg)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=visible]{-webkit-transform:translateY(10px) scale(1);transform:translateY(10px) scale(1)}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(0) scale(.5);transform:translateY(0) scale(.5)}.tippy-popper[x-placement^=left] .tippy-backdrop{border-radius:50% 0 0 50%}.tippy-popper[x-placement^=left] .tippy-roundarrow{right:-16px;-webkit-transform-origin:33.33333333% 50%;transform-origin:33.33333333% 50%}.tippy-popper[x-placement^=left] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.tippy-popper[x-placement^=left] .tippy-arrow{border-left:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;right:-7px;margin:3px 0;-webkit-transform-origin:0 50%;transform-origin:0 50%}.tippy-popper[x-placement^=left] .tippy-backdrop{-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%)}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-75%,-50%);transform:scale(.2) translate(-75%,-50%);opacity:0}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(-20px);transform:translateX(-20px)}.tippy-popper[x-placement^=left] [data-animation=perspective]{-webkit-transform-origin:right;transform-origin:right}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=visible]{-webkit-transform:translateX(-10px) rotateY(0);transform:translateX(-10px) rotateY(0)}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:translateX(0) rotateY(-60deg);transform:translateX(0) rotateY(-60deg)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateX(0);transform:translateX(0)}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=visible]{-webkit-transform:translateX(-10px) scale(1);transform:translateX(-10px) scale(1)}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(0) scale(.5);transform:translateX(0) scale(.5)}.tippy-popper[x-placement^=right] .tippy-backdrop{border-radius:0 50% 50% 0}.tippy-popper[x-placement^=right] .tippy-roundarrow{left:-16px;-webkit-transform-origin:66.66666666% 50%;transform-origin:66.66666666% 50%}.tippy-popper[x-placement^=right] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.tippy-popper[x-placement^=right] .tippy-arrow{border-right:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;left:-7px;margin:3px 0;-webkit-transform-origin:100% 50%;transform-origin:100% 50%}.tippy-popper[x-placement^=right] .tippy-backdrop{-webkit-transform-origin:-50% 0;transform-origin:-50% 0}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%)}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-25%,-50%);transform:scale(.2) translate(-25%,-50%);opacity:0}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(20px);transform:translateX(20px)}.tippy-popper[x-placement^=right] [data-animation=perspective]{-webkit-transform-origin:left;transform-origin:left}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=visible]{-webkit-transform:translateX(10px) rotateY(0);transform:translateX(10px) rotateY(0)}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:translateX(0) rotateY(60deg);transform:translateX(0) rotateY(60deg)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateX(0);transform:translateX(0)}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=visible]{-webkit-transform:translateX(10px) scale(1);transform:translateX(10px) scale(1)}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(0) scale(.5);transform:translateX(0) scale(.5)}.tippy-tooltip{position:relative;color:#fff;border-radius:4px;font-size:.9rem;padding:.3rem .6rem;max-width:350px;text-align:center;will-change:transform;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:#333}.tippy-tooltip[data-size=small]{padding:.2rem .4rem;font-size:.75rem}.tippy-tooltip[data-size=large]{padding:.4rem .8rem;font-size:1rem}.tippy-tooltip[data-animatefill]{overflow:hidden;background-color:transparent}.tippy-tooltip[data-interactive],.tippy-tooltip[data-interactive] path{pointer-events:auto}.tippy-tooltip[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-tooltip[data-inertia][data-state=hidden]{transition-timing-function:ease}.tippy-arrow,.tippy-roundarrow{position:absolute;width:0;height:0}.tippy-roundarrow{width:24px;height:8px;fill:#333;pointer-events:none}.tippy-backdrop{position:absolute;will-change:transform;background-color:#333;border-radius:50%;width:calc(110% + 2rem);left:50%;top:50%;z-index:-1;transition:all cubic-bezier(.46,.1,.52,.98);-webkit-backface-visibility:hidden;backface-visibility:hidden}.tippy-backdrop:after{content:"";float:left;padding-top:100%}.tippy-backdrop+.tippy-content{transition-property:opacity;will-change:opacity}.tippy-backdrop+.tippy-content[data-state=visible]{opacity:1}.tippy-backdrop+.tippy-content[data-state=hidden]{opacity:0}',et='3.4.1',tt='undefined'!=typeof window,rt=tt?navigator:{},at=tt?window:{},pt=('MutationObserver'in at),ot=/MSIE |Trident\//.test(rt.userAgent),it=/iPhone|iPad|iPod/.test(rt.platform)&&!at.MSStream,nt=('ontouchstart'in at),st={a11y:!0,allowHTML:!0,animateFill:!0,animation:'shift-away',appendTo:function(){return document.body},aria:'describedby',arrow:!1,arrowTransform:'',arrowType:'sharp',autoFocus:!0,boundary:'scrollParent',content:'',delay:[0,20],distance:10,duration:[325,275],flip:!0,flipBehavior:'flip',followCursor:!1,hideOnClick:!0,inertia:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,lazy:!0,livePlacement:!0,maxWidth:'',multiple:!1,offset:0,onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},performance:!1,placement:'top',popperOptions:{},shouldPopperHideOnBlur:function(){return!0},showOnInit:!1,size:'regular',sticky:!1,target:'',theme:'dark',touch:!0,touchHold:!1,trigger:'mouseenter focus',updateDuration:200,wait:null,zIndex:9999},lt=['arrow','arrowType','distance','flip','flipBehavior','offset','placement','popperOptions'],dt='undefined'!=typeof window&&'undefined'!=typeof document,ct=['Edge','Trident','Firefox'],mt=0,ft=0;ft<ct.length;ft+=1)if(dt&&0<=navigator.userAgent.indexOf(ct[ft])){mt=1;break}var i=dt&&window.Promise,ht=i?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},mt))}},bt=dt&&!!(window.MSInputMethodContext&&document.documentMode),yt=dt&&/MSIE 10/.test(navigator.userAgent),ut=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},gt=function(){function e(e,t){for(var r,a=0;a<t.length;a++)r=t[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),xt=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},wt=Object.assign||function(e){for(var t,r=1;r<arguments.length;r++)for(var a in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},vt=dt&&/Firefox/i.test(navigator.userAgent),kt=['auto-start','auto','auto-end','top-start','top','top-end','right-start','right','right-end','bottom-end','bottom','bottom-start','left-end','left','left-start'],Et=kt.slice(3),Ct={FLIP:'flip',CLOCKWISE:'clockwise',COUNTERCLOCKWISE:'counterclockwise'},Lt=function(){function t(r,a){var p=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};ut(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(p.update)},this.update=ht(this.update.bind(this)),this.options=wt({},t.Defaults,o),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=r&&r.jquery?r[0]:r,this.popper=a&&a.jquery?a[0]:a,this.options.modifiers={},Object.keys(wt({},t.Defaults.modifiers,o.modifiers)).forEach(function(e){p.options.modifiers[e]=wt({},t.Defaults.modifiers[e]||{},o.modifiers?o.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return wt({name:e},p.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(t){t.enabled&&e(t.onLoad)&&t.onLoad(p.reference,p.popper,p.options,t,p.state)}),this.update();var i=this.options.eventsEnabled;i&&this.enableEventListeners(),this.state.eventsEnabled=i}return gt(t,[{key:'update',value:function(){return P.call(this)}},{key:'destroy',value:function(){return I.call(this)}},{key:'enableEventListeners',value:function(){return M.call(this)}},{key:'disableEventListeners',value:function(){return R.call(this)}}]),t}();Lt.Utils=('undefined'==typeof window?global:window).PopperUtils,Lt.placements=kt,Lt.Defaults={placement:'bottom',positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,r=t.split('-')[0],a=t.split('-')[1];if(a){var p=e.offsets,o=p.reference,i=p.popper,n=-1!==['bottom','top'].indexOf(r),s=n?'left':'top',l=n?'width':'height',d={start:xt({},s,o[s]),end:xt({},s,o[s]+o[l]-i[l])};e.offsets.popper=wt({},i,d[a])}return e}},offset:{order:200,enabled:!0,fn:J,offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var r=t.boundariesElement||o(e.instance.popper);e.instance.reference===r&&(r=o(r));var a=X('transform'),p=e.instance.popper.style,i=p.top,n=p.left,s=p[a];p.top='',p.left='',p[a]='';var l=v(e.instance.popper,e.instance.reference,t.padding,r,e.positionFixed);p.top=i,p.left=n,p[a]=s,t.boundaries=l;var d=t.priority,c=e.offsets.popper,m={primary:function(e){var r=c[e];return c[e]<l[e]&&!t.escapeWithReference&&(r=Ze(c[e],l[e])),xt({},e,r)},secondary:function(e){var r='right'===e?'left':'top',a=c[r];return c[e]>l[e]&&!t.escapeWithReference&&(a=Ge(c[r],l[e]-('right'===e?c.width:c.height))),xt({},r,a)}};return d.forEach(function(e){var t=-1===['left','top'].indexOf(e)?'secondary':'primary';c=wt({},c,m[t](e))}),e.offsets.popper=c,e},priority:['left','right','top','bottom'],padding:5,boundariesElement:'scrollParent'},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,r=t.popper,a=t.reference,p=e.placement.split('-')[0],o=Je,i=-1!==['top','bottom'].indexOf(p),n=i?'right':'bottom',s=i?'left':'top',l=i?'width':'height';return r[n]<o(a[s])&&(e.offsets.popper[s]=o(a[s])-r[l]),r[s]>o(a[n])&&(e.offsets.popper[s]=o(a[n])),e}},arrow:{order:500,enabled:!0,fn:function(e,r){var a;if(!V(e.instance.modifiers,'arrow','keepTogether'))return e;var p=r.element;if('string'==typeof p){if(p=e.instance.popper.querySelector(p),!p)return e;}else if(!e.instance.popper.contains(p))return console.warn('WARNING: `arrow.element` must be child of its popper element!'),e;var o=e.placement.split('-')[0],i=e.offsets,n=i.popper,s=i.reference,l=-1!==['left','right'].indexOf(o),d=l?'height':'width',c=l?'Top':'Left',m=c.toLowerCase(),f=l?'left':'top',h=l?'bottom':'right',y=L(p)[d];s[h]-y<n[m]&&(e.offsets.popper[m]-=n[m]-(s[h]-y)),s[m]+y>n[h]&&(e.offsets.popper[m]+=s[m]+y-n[h]),e.offsets.popper=b(e.offsets.popper);var u=s[m]+s[d]/2-y/2,g=t(e.instance.popper),x=parseFloat(g['margin'+c],10),w=parseFloat(g['border'+c+'Width'],10),v=u-e.offsets.popper[m]-x-w;return v=Ze(Ge(n[d]-y,v),0),e.arrowElement=p,e.offsets.arrow=(a={},xt(a,m,Qe(v)),xt(a,f,''),a),e},element:'[x-arrow]'},flip:{order:600,enabled:!0,fn:function(e,t){if(D(e.instance.modifiers,'inner'))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var r=v(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),a=e.placement.split('-')[0],p=O(a),o=e.placement.split('-')[1]||'',i=[];switch(t.behavior){case Ct.FLIP:i=[a,p];break;case Ct.CLOCKWISE:i=j(a);break;case Ct.COUNTERCLOCKWISE:i=j(a,!0);break;default:i=t.behavior;}return i.forEach(function(n,s){if(a!==n||i.length===s+1)return e;a=e.placement.split('-')[0],p=O(a);var l=e.offsets.popper,d=e.offsets.reference,c=Je,m='left'===a&&c(l.right)>c(d.left)||'right'===a&&c(l.left)<c(d.right)||'top'===a&&c(l.bottom)>c(d.top)||'bottom'===a&&c(l.top)<c(d.bottom),f=c(l.left)<c(r.left),h=c(l.right)>c(r.right),b=c(l.top)<c(r.top),y=c(l.bottom)>c(r.bottom),u='left'===a&&f||'right'===a&&h||'top'===a&&b||'bottom'===a&&y,g=-1!==['top','bottom'].indexOf(a),x=!!t.flipVariations&&(g&&'start'===o&&f||g&&'end'===o&&h||!g&&'start'===o&&b||!g&&'end'===o&&y);(m||u||x)&&(e.flipped=!0,(m||u)&&(a=i[s+1]),x&&(o=q(o)),e.placement=a+(o?'-'+o:''),e.offsets.popper=wt({},e.offsets.popper,T(e.instance.popper,e.offsets.reference,e.placement)),e=Y(e.instance.modifiers,e,'flip'))}),e},behavior:'flip',padding:5,boundariesElement:'viewport'},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,r=t.split('-')[0],a=e.offsets,p=a.popper,o=a.reference,i=-1!==['left','right'].indexOf(r),n=-1===['top','left'].indexOf(r);return p[i?'left':'top']=o[r]-(n?p[i?'width':'height']:0),e.placement=O(t),e.offsets.popper=b(p),e}},hide:{order:800,enabled:!0,fn:function(e){if(!V(e.instance.modifiers,'hide','preventOverflow'))return e;var t=e.offsets.reference,r=S(e.instance.modifiers,function(e){return'preventOverflow'===e.name}).boundaries;if(t.bottom<r.top||t.left>r.right||t.top>r.bottom||t.right<r.left){if(!0===e.hide)return e;e.hide=!0,e.attributes['x-out-of-boundaries']=''}else{if(!1===e.hide)return e;e.hide=!1,e.attributes['x-out-of-boundaries']=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var r=t.x,a=t.y,p=e.offsets.popper,i=S(e.instance.modifiers,function(e){return'applyStyle'===e.name}).gpuAcceleration;void 0!==i&&console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');var n=void 0===i?t.gpuAcceleration:i,s=o(e.instance.popper),l=u(s),d={position:p.position},c=U(e,2>window.devicePixelRatio||!vt),m='bottom'===r?'top':'bottom',f='right'===a?'left':'right',h=X('transform'),b=void 0,y=void 0;if(y='bottom'==m?'HTML'===s.nodeName?-s.clientHeight+c.bottom:-l.height+c.bottom:c.top,b='right'==f?'HTML'===s.nodeName?-s.clientWidth+c.right:-l.width+c.right:c.left,n&&h)d[h]='translate3d('+b+'px, '+y+'px, 0)',d[m]=0,d[f]=0,d.willChange='transform';else{var g='bottom'==m?-1:1,x='right'==f?-1:1;d[m]=y*g,d[f]=b*x,d.willChange=m+', '+f}var w={"x-placement":e.placement};return e.attributes=wt({},w,e.attributes),e.styles=wt({},d,e.styles),e.arrowStyles=wt({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:'bottom',y:'right'},applyStyle:{order:900,enabled:!0,fn:function(e){return F(e.instance.popper,e.styles),_(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&F(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,r,a,p){var o=C(p,t,e,r.positionFixed),i=E(r.placement,o,t,e,r.modifiers.flip.boundariesElement,r.modifiers.flip.padding);return t.setAttribute('x-placement',i),F(t,{position:r.positionFixed?'fixed':'absolute'}),r},gpuAcceleration:void 0}}};var Ot={POPPER:'.tippy-popper',TOOLTIP:'.tippy-tooltip',CONTENT:'.tippy-content',BACKDROP:'.tippy-backdrop',ARROW:'.tippy-arrow',ROUND_ARROW:'.tippy-roundarrow'},Tt=tt?Element.prototype:{},St=Tt.matches||Tt.matchesSelector||Tt.webkitMatchesSelector||Tt.mozMatchesSelector||Tt.msMatchesSelector,At={passive:!0},Yt={x:!0},Pt=!1,Dt=0,Xt=Object.keys(st),It=Object.assign||function(e){for(var t,r=1;r<arguments.length;r++)for(var a in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Nt={translate:/translateX?Y?\(([^)]+)\)/,scale:/scaleX?Y?\(([^)]+)\)/},Ht=1,Wt=!1;Ke.version=et,Ke.defaults=st,Ke.one=function(e,t){return Ke(e,t,!0).instances[0]},Ke.setDefaults=function(e){Object.keys(e).forEach(function(t){st[t]=e[t]})},Ke.disableAnimations=function(){Ke.setDefaults({duration:0,updateDuration:0,animateFill:!1})},Ke.hideAllPoppers=ge,Ke.useCapture=function(){};return tt&&setTimeout(function(){Q(document.querySelectorAll('[data-tippy]')).forEach(function(e){var t=e.getAttribute('data-tippy');t&&Ke(e,{content:t})})}),function(e){if(pt){var t=document.createElement('style');t.type='text/css',t.textContent=e,document.head.insertBefore(t,document.head.firstChild)}}($e),Ke});
//# sourceMappingURL=tippy.all.min.js.map

var WLHost="http://arquivos.weblibras.com.br/auto";var WLHttpsHost="https://weblibras.blob.core.windows.net/auto";var WLPlayerVersion="2.1.1";var WLMaxTranslationSize=1500;(function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e)return t}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0));return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Ut.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e])return Wt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)fn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,i=1-r,s=0,o=f.tweens.length;for(;s<o;s++)f.tweens[s].run(i);return u.notifyWith(e,[f,i,n]),i<1&&o?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r)return r}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},m=[],g=e.nodeType&&Gt(e);n.queue||(l=v._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,v.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",v.support.shrinkWrapBlocks||h.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r],a=a||s==="toggle";if(s===(g?"hide":"show"))continue;m.push(r)}}o=m.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),"hidden"in u&&(g=u.hidden),a&&(u.hidden=!g),g?v(e).show():h.done(function(){v(e).hide()}),h.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in d)v.style(e,t,d[t])});for(r=0;r<o;r++)i=m[r],f=h.createTween(i,g?u[i]:0),d[i]=u[i]||v.style(e,i),i in u||(u[i]=f.start,g&&(f.end=f.start,f.start=i==="width"||i==="height"?1:0))}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d&&!d.call("\ufeff\u00a0")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete")setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||v.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")||(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(v.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!v.nodeName(n.parentNode,"optgroup"))){t=v(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=l.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1)return;if(m&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<m;r++)c=d[r],h=c.selector,u[h]===t&&(u[h]=c.needsContext?v(h,this).index(s)>=0:v.find(h,this,null,[s]).length),u[h]&&f.push(c);f.length&&w.push({elem:s,matches:f})}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){a=w[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){c=a.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,o=((v.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function nt(e,t,n,r){n=n||[],t=t||g;var i,s,a,f,l=t.nodeType;if(!e||typeof e!="string")return n;if(l!==1&&l!==9)return[];a=o(t);if(!a&&!r)if(i=R.exec(e))if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode)return n;if(s.id===f)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&u(t,s)&&s.id===f)return n.push(s),n}else{if(i[2])return S.apply(n,x.call(t.getElementsByTagName(e),0)),n;if((f=i[3])&&Z&&t.getElementsByClassName)return S.apply(n,x.call(t.getElementsByClassName(f),0)),n}return vt(e.replace(j,"$1"),t,n,r,a)}function rt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function it(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function st(e){return N(function(t){return t=+t,N(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ot(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function ut(e,t){var n,r,s,o,u,a,f,l=L[d][e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=F.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=I.exec(u))s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=r[0].replace(j," ");for(o in i.filter)(r=J[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?u.length:u?nt.error(e):L(e,a).slice(0)}function at(e,t,r){var i=t.dir,s=r&&t.dir==="parentNode",o=w++;return t.first?function(t,n,r){while(t=t[i])if(s||t.nodeType===1)return e(t,n,r)}:function(t,r,u){if(!u){var a,f=b+" "+o+" ",l=f+n;while(t=t[i])if(s||t.nodeType===1){if((a=t[d])===l)return t.sizset;if(typeof a=="string"&&a.indexOf(f)===0){if(t.sizset)return t}else{t[d]=l;if(e(t,r,u))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[i])if(s||t.nodeType===1)if(e(t,r,u))return t}}function ft(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function lt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function ct(e,t,n,r,i,s){return r&&!r[d]&&(r=ct(r)),i&&!i[d]&&(i=ct(i,s)),N(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||dt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?lt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=lt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?T.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=lt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):S.apply(o,g)})}function ht(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,f=at(function(e){return e===t},u,!0),l=at(function(e){return T.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[at(ft(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[d]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return ct(a>1&&ft(h),a>1&&e.slice(0,a-1).join("").replace(j,"$1"),n,a<r&&ht(e.slice(a,r)),r<s&&ht(e=e.slice(r)),r<s&&e.join(""))}h.push(n)}return ft(h)}function pt(e,t){var r=t.length>0,s=e.length>0,o=function(u,a,f,l,h){var p,d,v,m=[],y=0,w="0",x=u&&[],T=h!=null,N=c,C=u||s&&i.find.TAG("*",h&&a.parentNode||a),k=b+=N==null?1:Math.E;T&&(c=a!==g&&a,n=o.el);for(;(p=C[w])!=null;w++){if(s&&p){for(d=0;v=e[d];d++)if(v(p,a,f)){l.push(p);break}T&&(b=k,n=++o.el)}r&&((p=!v&&p)&&y--,u&&x.push(p))}y+=w;if(r&&w!==y){for(d=0;v=t[d];d++)v(x,m,a,f);if(u){if(y>0)while(w--)!x[w]&&!m[w]&&(m[w]=E.call(l));m=lt(m)}S.apply(l,m),T&&!u&&m.length>0&&y+t.length>1&&nt.uniqueSort(l)}return T&&(b=k,c=N),x};return o.el=0,r?N(o):o}function dt(e,t,n){var r=0,i=t.length;for(;r<i;r++)nt(e,t[r],n);return n}function vt(e,t,n,r,s){var o,u,f,l,c,h=ut(e),p=h.length;if(!r&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&t.nodeType===9&&!s&&i.relative[u[1].type]){t=i.find.ID(f.matches[0].replace($,""),t,s)[0];if(!t)return n;e=e.slice(u.shift().length)}for(o=J.POS.test(e)?-1:u.length-1;o>=0;o--){f=u[o];if(i.relative[l=f.type])break;if(c=i.find[l])if(r=c(f.matches[0].replace($,""),z.test(u[0].type)&&t.parentNode||t,s)){u.splice(o,1),e=r.length&&u.join("");if(!e)return S.apply(n,x.call(r,0)),n;break}}}return a(e,h)(r,t,s,n,z.test(e)),n}function mt(){}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=String,g=e.document,y=g.documentElement,b=0,w=0,E=[].pop,S=[].push,x=[].slice,T=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},N=function(e,t){return e[d]=t==null||t,e},C=function(){var e={},t=[];return N(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n+" "]=r},e)},k=C(),L=C(),A=C(),O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=M.replace("w","w#"),D="([*^$|!~]?=)",P="\\["+O+"*("+M+")"+O+"*(?:"+D+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+O+"*\\]",H=":("+M+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+P+")|[^:]|\\\\.)*|.*))\\)|)",B=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),I=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),q=new RegExp(H),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,W=/:not\($/,X=/h\d/i,V=/input|select|textarea|button/i,$=/\\(?!\\)/g,J={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),NAME:new RegExp("^\\[name=['\"]?("+M+")['\"]?\\]"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),POS:new RegExp(B,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+B,"i")},K=function(e){var t=g.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},Q=K(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),G=K(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),Y=K(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=K(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),et=K(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",y.insertBefore(e,y.firstChild);var t=g.getElementsByName&&g.getElementsByName(d).length===2+g.getElementsByName(d+0).length;return r=!g.getElementById(d),y.removeChild(e),t});try{x.call(y.childNodes,0)[0].nodeType}catch(tt){x=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}nt.matches=function(e,t){return nt(e,null,null,t)},nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0},s=nt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},o=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},u=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},nt.attr=function(e,t){var n,r=o(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||Y?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},i=nt.selectors={cacheLength:50,createPseudo:N,match:J,attrHandle:G?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:Q?function(e,t){if(typeof t.getElementsByTagName!==p)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p)return t.getElementsByName(name)},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,""),e[3]=(e[4]||e[5]||"").replace($,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||nt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&nt.error(e[0]),e},PSEUDO:function(e){var t,n;if(J.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])q.test(t)&&(n=ut(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:r?function(e){return e=e.replace($,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace($,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace($,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[d][e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r,i){var s=nt.attr(r,e);return s==null?t==="!=":t?(s+="",t==="="?s===n:t==="!="?s!==n:t==="^="?n&&s.indexOf(n)===0:t==="*="?n&&s.indexOf(n)>-1:t==="$="?n&&s.substr(s.length-n.length)===n:t==="~="?(" "+s+" ").indexOf(n)>-1:t==="|="?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);return r[d]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=T.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:N(function(e){var t=[],n=[],r=a(e.replace(j,"$1"));return r[d]?N(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:N(function(e){return function(t){return nt(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!i.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return X.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:rt("radio"),checkbox:rt("checkbox"),file:rt("file"),password:rt("password"),image:rt("image"),submit:it("submit"),reset:it("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return V.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:st(function(){return[0]}),last:st(function(e,t){return[t-1]}),eq:st(function(e,t,n){return[n<0?n+t:n]}),even:st(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:st(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:st(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:st(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},f=y.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return ot(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return ot(i[f],s[f]);return f===n?ot(e,s[f],-1):ot(i[f],t,1)},[0,0].sort(f),h=!l,nt.uniqueSort=function(e){var t,n=[],r=1,i=0;l=h,e.sort(f);if(l){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},a=nt.compile=function(e,t){var n,r=[],i=[],s=A[d][e+" "];if(!s){t||(t=ut(e)),n=t.length;while(n--)s=ht(t[n]),s[d]?r.push(s):i.push(s);s=A(e,pt(i,r))}return s},g.querySelectorAll&&function(){var e,t=vt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active"],u=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;K(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),K(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+O+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=new RegExp(i.join("|")),vt=function(e,r,s,o,u){if(!o&&!u&&!i.test(e)){var a,f,l=!0,c=d,h=r,p=r.nodeType===9&&e;if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){a=ut(e),(l=r.getAttribute("id"))?c=l.replace(n,"\\$&"):r.setAttribute("id",c),c="[id='"+c+"'] ",f=a.length;while(f--)a[f]=c+a[f].join("");h=z.test(e)&&r.parentNode||r,p=a.join(",")}if(p)try{return S.apply(s,x.call(h.querySelectorAll(p),0)),s}catch(v){}finally{l||r.removeAttribute("id")}}return t(e,r,s,o,u)},u&&(K(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),s.push("!=",H)}catch(n){}}),s=new RegExp(s.join("|")),nt.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!o(t)&&!s.test(n)&&!i.test(n))try{var a=u.call(t,n);if(a||e||t.document&&t.document.nodeType!==11)return a}catch(f){}return nt(n,null,null,[t]).length>0})}(),i.pseudos.nth=i.pseudos.eq,i.filters=mt.prototype=i.pseudos,i.setFilters=new mt,nt.attr=v.attr,v.find=nt,v.expr=nt.selectors,v.expr[":"]=v.expr.pseudos,v.unique=nt.uniqueSort,v.text=nt.getText,v.isXMLDoc=nt.isXML,v.contains=nt.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o)v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked)for(s=0;(u=b[s])!=null;s++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(s=0;(u=b[s])!=null;s++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={BODY:"block"},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u.getPropertyValue(n)||u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+$t[r]+t]=i[r]||i[r-2]||i[0];return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{cn=s.href}catch(Nn){cn=i.createElement("a"),cn.href="",cn=cn.href}ln=wn.exec(cn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En)return En.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:cn,isLocal:dn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===ln[1]&&a[2]===ln[2]&&(a[3]||(a[1]==="http:"?80:443))==(ln[3]||(ln[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=kn(xn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(p){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=zn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&u){u=v.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,v.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Wn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,n=v.timers,r=0;qn=v.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||v.fx.stop(),qn=t},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?v.offset.bodyOffset(l):(n=c.documentElement,v.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=tr(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})})(window);var jq18=jQuery.noConflict(!0);(function(jQuery){(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=parseFloat(t[1],10)===6}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})})(jQuery);(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})})(jQuery);(function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})})(jQuery);(function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,d,v,m,g=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=g[0],E=(t.collision||"flip").split(" "),S={};return w.nodeType===9?(l=g.width(),d=g.height(),v={top:0,left:0}):e.isWindow(w)?(l=g.width(),d=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(t.at="left top",l=d=0,v={top:w.pageY,left:w.pageX}):(l=g.outerWidth(),d=g.outerHeight(),v=g.offset()),m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=l:t.at[0]==="center"&&(m.left+=l/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),n=h(S.at,l,d),m.left+=n[0],m.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),w=p(this,"marginLeft"),x=p(this,"marginTop"),T=f+w+p(this,"marginRight")+b.width,N=c+x+p(this,"marginBottom")+b.height,C=e.extend({},m),k=h(S.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:w,marginTop:x},e.each(["left","top"],function(r,i){e.ui.position[E[r]]&&e.ui.position[E[r]][i](C,{targetWidth:l,targetHeight:d,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:y,elem:a})}),e.fn.bgiframe&&a.bgiframe(),t.using&&(u=function(e){var n=v.left-C.left,s=n+l-f,o=v.top-C.top,u=o+d-c,h={target:{element:g,left:v.left,top:v.top,width:l,height:d},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),d<c&&i(o+u)<d&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return n.call(this,r);var i=r.offset.split(" "),s=r.at.split(" ");return i.length===1&&(i[1]=i[0]),/^\d/.test(i[0])&&(i[0]="+"+i[0]),/^\d/.test(i[1])&&(i[1]="+"+i[1]),s.length===1&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:t}))}}(jQuery)})(jQuery);(function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){var o=!1,u=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!=u&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(u.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})})(jQuery)})(jq18);var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_*",encode:function(e){var t="";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)}return t},decode:function(e){var t="";var n,r,i;var s,o,u,a;var f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length){s=this._keyStr.indexOf(e.charAt(f++));o=this._keyStr.indexOf(e.charAt(f++));u=this._keyStr.indexOf(e.charAt(f++));a=this._keyStr.indexOf(e.charAt(f++));n=s<<2|o>>4;r=(o&15)<<4|u>>2;i=(u&3)<<6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=Base64._utf8_decode(t);return t},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t},_utf8_decode:function(e){var t="";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}}
var unityObject={javaInstallDone:function(d,a,b){var c=parseInt(d.substring(d.lastIndexOf("_")+1),10);if(!isNaN(c)){setTimeout(function(){UnityObject2.instances[c].javaInstallDoneCallback(d,a,b)},10)}}};var UnityObject2=function(J){var ac=[],i=window,Y=document,W=navigator,E=null,h=[],af=(document.location.protocol=="https:"),y=af?"https://ssl-webplayer.unity3d.com/":"http://webplayer.unity3d.com/",K="_unity_triedjava",G=a(K),r="_unity_triedclickonce",u=a(r),aa=!1,B=[],O=!1,w=null,f=null,P=null,l=[],T=null,q=[],V=!1,U="installed",L="missing",b="broken",v="unsupported",C="ready",z="start",F="error",Z="first",A="java",s="clickonce",M=!1,R=null,x={pluginName:"Unity Player",pluginMimeType:"application/vnd.unity",baseDownloadUrl:y+"download_webplayer-3.x/",fullInstall:!1,autoInstall:!1,enableJava:!0,enableJVMPreloading:!1,enableClickOnce:!0,enableUnityAnalytics:!1,enableGoogleAnalytics:!0,params:{},attributes:{},referrer:null,debugLevel:0};x=jq18.extend(!0,x,J);if(x.referrer===""){x.referrer=null}if(af){x.enableUnityAnalytics=!1}function a(ag){var ah=new RegExp(escape(ag)+"=([^;]+)");if(ah.test(Y.cookie+";")){ah.exec(Y.cookie+";");return RegExp.$1}return!1}function e(ag,ah){document.cookie=escape(ag)+"="+escape(ah)+"; path=/"}function N(am){var an=0,ai,al,aj,ag,ah;if(am){var ak=am.toLowerCase().match(/^(\d+)(?:\.(\d+)(?:\.(\d+)([dabfr])?(\d+)?)?)?$/);if(ak&&ak[1]){ai=ak[1];al=ak[2]?ak[2]:0;aj=ak[3]?ak[3]:0;ag=ak[4]?ak[4]:"r";ah=ak[5]?ak[5]:0;an|=((ai/10)%10)<<28;an|=(ai%10)<<24;an|=(al%10)<<20;an|=(aj%10)<<16;an|={d:2<<12,a:4<<12,b:6<<12,f:8<<12,r:8<<12}[ag];an|=((ah/100)%10)<<8;an|=((ah/10)%10)<<4;an|=(ah%10)}}return an}function ae(al,ag){var ai=Y.getElementsByTagName("body")[0];var ah=Y.createElement("object");var aj=0;if(ai&&ah){ah.setAttribute("type",x.pluginMimeType);ah.style.visibility="hidden";ai.appendChild(ah);var ak=0;(function(){if(typeof ah.GetPluginVersion==="undefined"){if(ak++<10){setTimeout(arguments.callee,10)}else{ai.removeChild(ah);al(null)}}else{var am={};if(ag){for(aj=0;aj<ag.length;++aj){am[ag[aj]]=ah.GetUnityVersion(ag[aj])}}am.plugin=ah.GetPluginVersion();ai.removeChild(ah);al(am)}})()}else{al(null)}}function c(){var ag=x.fullInstall?"UnityWebPlayerFull.exe":"UnityWebPlayer.exe";if(x.referrer!==null){ag+="?referrer="+x.referrer}return ag}function ab(){var ag="UnityPlayer.plugin.zip";if(x.referrer!=null){ag+="?referrer="+x.referrer}return ag}function m(){return x.baseDownloadUrl+(t.win?c():ab())}function D(ai,ah,aj,ag){if(ai===L){M=true}if(jq18.inArray(ai,q)===-1){if(M){j.send(ai,ah,aj,ag)}q.push(ai)}T=ai}var t=function(){var ai=W.userAgent,ak=W.platform;var am=/chrome/i.test(ai);var al=!1;if(/msie/i.test(ai)){al=parseFloat(ai.replace(/^.*msie ([0-9]+(\.[0-9]+)?).*$/i,"$1"))}else{if(/Trident/i.test(ai)){al=parseFloat(ai.replace(/^.*rv:([0-9]+(\.[0-9]+)?).*$/i,"$1"))}}var an={w3:typeof Y.getElementById!="undefined"&&typeof Y.getElementsByTagName!="undefined"&&typeof Y.createElement!="undefined",win:ak?/win/i.test(ak):/win/i.test(ai),mac:ak?/mac/i.test(ak):/mac/i.test(ai),ie:al,ff:/firefox/i.test(ai),op:/opera/i.test(ai),ch:am,ch_v:/chrome/i.test(ai)?parseFloat(ai.replace(/^.*chrome\/(\d+(\.\d+)?).*$/i,"$1")):!1,sf:/safari/i.test(ai)&&!am,wk:/webkit/i.test(ai)?parseFloat(ai.replace(/^.*webkit\/(\d+(\.\d+)?).*$/i,"$1")):!1,x64:/win64/i.test(ai)&&/x64/i.test(ai),moz:/mozilla/i.test(ai)?parseFloat(ai.replace(/^.*mozilla\/([0-9]+(\.[0-9]+)?).*$/i,"$1")):0,mobile:/ipad/i.test(ak)||/iphone/i.test(ak)||/ipod/i.test(ak)||/android/i.test(ai)||/windows phone/i.test(ai)};an.clientBrand=an.ch?"ch":an.ff?"ff":an.sf?"sf":an.ie?"ie":an.op?"op":"??";an.clientPlatform=an.win?"win":an.mac?"mac":"???";var ao=Y.getElementsByTagName("script");for(var ag=0;ag<ao.length;++ag){var aj=ao[ag].src.match(/^(.*)3\.0\/uo\/UnityObject2\.js$/i);if(aj){x.baseDownloadUrl=aj[1];break}}function ah(ar,aq){for(var at=0;at<Math.max(ar.length,aq.length);++at){var ap=(at<ar.length)&&ar[at]?new Number(ar[at]):0;var au=(at<aq.length)&&aq[at]?new Number(aq[at]):0;if(ap<au){return-1}if(ap>au){return 1}}return 0}an.java=function(){if(W.javaEnabled()){var at=(an.win&&an.ff);var aw=!1;if(at||aw){if(typeof W.mimeTypes!="undefined"){var av=at?[1,6,0,12]:[1,4,2,0];for(var ar=0;ar<W.mimeTypes.length;++ar){if(W.mimeTypes[ar].enabledPlugin){var ap=W.mimeTypes[ar].type.match(/^application\/x-java-applet;(?:jpi-)?version=(\d+)(?:\.(\d+)(?:\.(\d+)(?:_(\d+))?)?)?$/);if(ap!=null){if(ah(av,ap.slice(1))<=0){return!0}}}}}}else{if(an.win&&an.ie){if(typeof ActiveXObject!="undefined"){function aq(ax){try{return new ActiveXObject("JavaWebStart.isInstalled."+ax+".0")!=null}catch(ay){return!1}}function au(ax){try{return new ActiveXObject("JavaPlugin.160_"+ax)!=null}catch(ay){return!1}}if(aq("1.7.0")){return!0}if(an.ie>=8){if(aq("1.6.0")){for(var ar=12;ar<=50;++ar){if(au(ar)){if(an.ie==9&&an.moz==5&&ar<24){continue}else{return!0}}}return!1}}else{return aq("1.6.0")||aq("1.5.0")||aq("1.4.2")}}}}}return!1}();an.co=function(){if(an.win&&an.ie){var ap=ai.match(/(\.NET CLR [0-9.]+)|(\.NET[0-9.]+)/g);if(ap!=null){var at=[3,5,0];for(var ar=0;ar<ap.length;++ar){var aq=ap[ar].match(/[0-9.]{2,}/g)[0].split(".");if(ah(at,aq)<=0){return!0}}}}return!1}();return an}();var j=function(){var ag=function(){var ao=new Date();var an=Date.UTC(ao.getUTCFullYear(),ao.getUTCMonth(),ao.getUTCDay(),ao.getUTCHours(),ao.getUTCMinutes(),ao.getUTCSeconds(),ao.getUTCMilliseconds());return an.toString(16)+am().toString(16)}();var ai=0;var ah=window._gaq=(window._gaq||[]);ak();function am(){return Math.floor(Math.random()*2147483647)}function ak(){var at=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var ap=Y.getElementsByTagName("script");var au=!1;for(var ar=0;ar<ap.length;++ar){if(ap[ar].src&&ap[ar].src.toLowerCase()==at.toLowerCase()){au=!0;break}}if(!au){var aq=Y.createElement("script");aq.type="text/javascript";aq.async=!0;aq.src=at;var ao=document.getElementsByTagName("script")[0];ao.parentNode.insertBefore(aq,ao)}var an=(x.debugLevel===0)?"UA-16068464-16":"UA-16068464-17";ah.push(["unity._setDomainName","none"]);ah.push(["unity._setAllowLinker",!0]);ah.push(["unity._setReferrerOverride"," "+this.location.toString()]);ah.push(["unity._setAccount",an]);ah.push(["unity._setCustomVar",1,"Revision","e444f76e01cd",2])}function aj(ar,ap,at,ao){if(!x.enableUnityAnalytics){if(ao){ao()}return}var an="http://unityanalyticscapture.appspot.com/event?u="+encodeURIComponent(ag)+"&s="+encodeURIComponent(ai)+"&e="+encodeURIComponent(ar);an+="&v="+encodeURIComponent("e444f76e01cd");if(x.referrer!==null){an+="?r="+x.referrer}if(ap){an+="&t="+encodeURIComponent(ap)}if(at){an+="&d="+encodeURIComponent(at)}var aq=new Image();if(ao){aq.onload=aq.onerror=ao}aq.src=an}function al(ap,an,aq,ay){if(!x.enableGoogleAnalytics){if(ay){ay()}return}var av="/webplayer/install/"+ap;var aw="?";if(an){av+=aw+"t="+encodeURIComponent(an);aw="&"}if(aq){av+=aw+"d="+encodeURIComponent(aq);aw="&"}if(ay){ah.push(function(){setTimeout(ay,1000)})}var at=x.src;if(at.length>40){at=at.replace("http://","");var ao=at.split("/");var ax=ao.shift();var ar=ao.pop();at=ax+"/../"+ar;while(at.length<40&&ao.length>0){var au=ao.pop();if(at.length+au.length+5<40){ar=au+"/"+ar}else{ar="../"+ar}at=ax+"/../"+ar}}ah.push(["unity._setCustomVar",2,"GameURL",at,3]);ah.push(["unity._setCustomVar",1,"UnityObjectVersion","2",3]);if(an){ah.push(["unity._setCustomVar",3,"installMethod",an,3])}ah.push(["unity._trackPageview",av])}return{send:function(aq,ap,at,an){if(x.enableUnityAnalytics||x.enableGoogleAnalytics){n("Analytics SEND",aq,ap,at,an)}++ai;var ar=2;var ao=function(){if(0==--ar){w=null;window.location=an}};if(at===null||at===undefined){at=""}aj(aq,ap,at,an?ao:null);al(aq,ap,at,an?ao:null)}}}();function I(ai,aj,ak){var ag,an,al,am,ah;if(t.win&&t.ie){an="";for(ag in ai){an+=" "+ag+'="'+ai[ag]+'"'}al="";for(ag in aj){al+='<param name="'+ag+'" value="'+aj[ag]+'" />'}ak.outerHTML="<object"+an+">"+al+"</object>"}else{am=Y.createElement("object");for(ag in ai){am.setAttribute(ag,ai[ag])}for(ag in aj){ah=Y.createElement("param");ah.name=ag;ah.value=aj[ag];am.appendChild(ah)}ak.parentNode.replaceChild(am,ak)}}function o(ag){if(typeof ag=="undefined"){return!1}if(!ag.complete){return!1}if(typeof ag.naturalWidth!="undefined"&&ag.naturalWidth==0){return!1}return!0}function H(aj){var ah=!1;for(var ai=0;ai<l.length;ai++){if(!l[ai]){continue}var ag=Y.images[l[ai]];if(!o(ag)){ah=!0}else{l[ai]=null}}if(ah){setTimeout(arguments.callee,100)}else{setTimeout(function(){d(aj)},100)}}function d(aj){var al=Y.getElementById(aj);if(!al){al=Y.createElement("div");var ag=Y.body.lastChild;Y.body.insertBefore(al,ag.nextSibling)}var ak=x.baseDownloadUrl+"3.0/jws/";var ah={id:aj,type:"application/x-java-applet",code:"JVMPreloader",width:1,height:1,name:"JVM Preloader"};var ai={context:aj,codebase:ak,classloader_cache:!1,scriptable:!0,mayscript:!0};I(ah,ai,al);jq18("#"+aj).show()}function S(ah){G=!0;e(K,G);var aj=Y.getElementById(ah);var al=ah+"_applet_"+E;B[al]={attributes:x.attributes,params:x.params,callback:x.callback,broken:x.broken};var an=B[al];var ak={id:al,type:"application/x-java-applet",archive:x.baseDownloadUrl+"3.0/jws/UnityWebPlayer.jar",code:"UnityWebPlayer",width:1,height:1,name:"Unity Web Player"};if(t.win&&t.ff){ak.style="visibility: hidden;"}var am={context:al,jnlp_href:x.baseDownloadUrl+"3.0/jws/UnityWebPlayer.jnlp",classloader_cache:!1,installer:m(),image:y+"installation/unitylogo.png",centerimage:!0,boxborder:!1,scriptable:!0,mayscript:!0};for(var ag in an.params){if(ag=="src"){continue}if(an.params[ag]!=Object.prototype[ag]){am[ag]=an.params[ag];if(ag.toLowerCase()=="logoimage"){am.image=an.params[ag]}else{if(ag.toLowerCase()=="backgroundcolor"){am.boxbgcolor="#"+an.params[ag]}else{if(ag.toLowerCase()=="bordercolor"){am.boxborder=!0}else{if(ag.toLowerCase()=="textcolor"){am.boxfgcolor="#"+an.params[ag]}}}}}}var ai=Y.createElement("div");aj.appendChild(ai);I(ak,am,ai);jq18("#"+ah).show()}function X(ag){setTimeout(function(){var ah=Y.getElementById(ag);if(ah){ah.parentNode.removeChild(ah)}},0)}function g(ak){var al=B[ak],aj=Y.getElementById(ak),ai;if(!aj){return}aj.width=al.attributes.width||600;aj.height=al.attributes.height||450;var ah=aj.parentNode;var ag=ah.childNodes;for(var am=0;am<ag.length;am++){ai=ag[am];if(ai.nodeType==1&&ai!=aj){ah.removeChild(ai)}}}function k(ai,ag,ah){n("_javaInstallDoneCallback",ai,ag,ah);if(!ag){D(F,A,ah)}}function ad(){ac.push(arguments);if(x.debugLevel>0&&window.console&&window.console.log){console.log(Array.prototype.slice.call(arguments))}}function n(){ac.push(arguments);if(x.debugLevel>1&&window.console&&window.console.log){console.log(Array.prototype.slice.call(arguments))}}function p(ag){if(/^[-+]?[0-9]+$/.test(ag)){ag+="px"}return ag}var Q={getLogHistory:function(){return ac},getConfig:function(){return x},getPlatformInfo:function(){return t},initPlugin:function(ag,ah){x.targetEl=ag;x.src=ah;n("ua:",t);this.detectUnity(this.handlePluginStatus)},detectUnity:function(at,ah){var aq=this;var aj=L;var ak;W.plugins.refresh();if(t.clientBrand==="??"||t.clientPlatform==="???"||t.mobile){aj=v}else{if(t.op&&t.mac){aj=v;ak="OPERA-MAC"}else{if(typeof W.plugins!="undefined"&&W.plugins[x.pluginName]&&typeof W.mimeTypes!="undefined"&&W.mimeTypes[x.pluginMimeType]&&W.mimeTypes[x.pluginMimeType].enabledPlugin){aj=U;if(t.sf&&/Mac OS X 10_6/.test(W.appVersion)){ae(function(au){if(!au||!au.plugin){aj=b;ak="OSX10.6-SFx64"}D(aj,P,ak);at.call(aq,aj,au)},ah);return}else{if(t.mac&&t.ch){ae(function(au){if(au&&(N(au.plugin)<=N("2.6.1f3"))){aj=b;ak="OSX-CH-U<=2.6.1f3"}D(aj,P,ak);at.call(aq,aj,au)},ah);return}else{if(ah){ae(function(au){D(aj,P,ak);at.call(aq,aj,au)},ah);return}}}}else{if(t.ie){var ai=!1;try{if(ActiveXObject.prototype!=null){ai=!0}}catch(am){}if(!ai||t.x64){aj=v;if(t.x64){ak="WIN-IEx64"}else{ak="ActiveXFailed"}}else{aj=L;try{var ar=new ActiveXObject("UnityWebPlayer.UnityWebPlayer.1");var ag=ar.GetPluginVersion();if(ah){var an={};for(var ap=0;ap<ah.length;++ap){an[ah[ap]]=ar.GetUnityVersion(ah[ap])}an.plugin=ag}aj=U;if(ag=="2.5.0f5"){var ao=/Windows NT \d+\.\d+/.exec(W.userAgent);if(ao&&ao.length>0){var al=parseFloat(ao[0].split(" ")[2]);if(al>=6){aj=b;ak="WIN-U2.5.0f5"}}}}catch(am){}}}}}}D(aj,P,ak);at.call(aq,aj,an)},handlePluginStatus:function(ai,ag){var ah=x.targetEl;var ak=jq18(ah);switch(ai){case U:this.notifyProgress(ak);this.embedPlugin(ak,x.callback);break;case L:this.notifyProgress(ak);var aj=this;var al=(x.debugLevel===0)?1000:8000;setTimeout(function(){x.targetEl=ah;aj.detectUnity(aj.handlePluginStatus)},al);break;case b:this.notifyProgress(ak);break;case v:this.notifyProgress(ak);break}},getPluginURL:function(){var ag="http://unity3d.com/webplayer/";if(t.win){ag=x.baseDownloadUrl+c()}else{if(W.platform=="MacIntel"){ag=x.baseDownloadUrl+(x.fullInstall?"webplayer-i386.dmg":"webplayer-mini.dmg");if(x.referrer!==null){ag+="?referrer="+x.referrer}}else{if(W.platform=="MacPPC"){ag=x.baseDownloadUrl+(x.fullInstall?"webplayer-ppc.dmg":"webplayer-mini.dmg");if(x.referrer!==null){ag+="?referrer="+x.referrer}}}}return ag},getClickOnceURL:function(){return x.baseDownloadUrl+"3.0/co/UnityWebPlayer.application?installer="+encodeURIComponent(x.baseDownloadUrl+c())},embedPlugin:function(aj,ar){aj=jq18(aj).empty();var ap=x.src;var ah=x.width||"100%";var am=x.height||"100%";var aq=this;if(t.win&&t.ie){var ai="";for(var ag in x.attributes){if(x.attributes[ag]!=Object.prototype[ag]){if(ag.toLowerCase()=="styleclass"){ai+=' class="'+x.attributes[ag]+'"'}else{if(ag.toLowerCase()!="classid"){ai+=" "+ag+'="'+x.attributes[ag]+'"'}}}}var al="";al+='<param name="src" value="'+ap+'" />';al+='<param name="firstFrameCallback" value="UnityObject2.instances['+E+'].firstFrameCallback();" />';for(var ag in x.params){if(x.params[ag]!=Object.prototype[ag]){if(ag.toLowerCase()!="classid"){al+='<param name="'+ag+'" value="'+x.params[ag]+'" />'}}}var ao='<object classid="clsid:444785F1-DE89-4295-863A-D46C3A781394" style="display: block; width: '+p(ah)+"; height: "+p(am)+';"'+ai+">"+al+"</object>";var an=jq18(ao);aj.append(an);h.push(aj.attr("id"));R=an[0]}else{var ak=jq18("<embed/>").attr({src:ap,type:x.pluginMimeType,width:ah,height:am,firstFrameCallback:"UnityObject2.instances["+E+"].firstFrameCallback();"}).attr(x.attributes).attr(x.params).css({display:"block",width:p(ah),height:p(am)}).appendTo(aj);R=ak[0]}if(!t.sf||!t.mac){setTimeout(function(){R.focus()},100)}if(ar){ar()}},getBestInstallMethod:function(){var ag="Manual";if(x.enableJava&&t.java&&G===!1){ag="JavaInstall"}else{if(x.enableClickOnce&&t.co&&u===!1){ag="ClickOnceIE"}}return ag},installPlugin:function(ah){if(ah==null||ah==undefined){ah=this.getBestInstallMethod()}var ag=null;switch(ah){case"JavaInstall":this.doJavaInstall(x.targetEl.id);break;case"ClickOnceIE":u=!0;e(r,u);var ai=jq18("<iframe src='"+this.getClickOnceURL()+"' style='display:none;' />");jq18(x.targetEl).append(ai);break;default:case"Manual":var ai=jq18("<iframe src='"+this.getPluginURL()+"' style='display:none;' />");jq18(x.targetEl).append(ai);break}P=ah;j.send(z,ah,null,null)},trigger:function(ah,ag){if(ag){n('trigger("'+ah+'")',ag)}else{n('trigger("'+ah+'")')}jq18(document).trigger(ah,ag)},notifyProgress:function(ag){if(typeof aa!=="undefined"&&typeof aa==="function"){var ah={ua:t,pluginStatus:T,bestMethod:null,lastType:P,targetEl:x.targetEl,unityObj:this};if(T===L){ah.bestMethod=this.getBestInstallMethod()}if(f!==T){f=T;aa(ah)}}},observeProgress:function(ag){aa=ag},firstFrameCallback:function(){n("*** firstFrameCallback ("+E+") ***");T=Z;this.notifyProgress();if(M===!0){j.send(T,P)}},setPluginStatus:function(ai,ah,aj,ag){D(ai,ah,aj,ag)},doJavaInstall:function(ag){S(ag)},jvmPreloaded:function(ag){X(ag)},appletStarted:function(ag){g(ag)},javaInstallDoneCallback:function(ai,ag,ah){k(ai,ag,ah)},getUnity:function(){return R}};E=UnityObject2.instances.length;UnityObject2.instances.push(Q);return Q};UnityObject2.instances=[];if(typeof String.prototype.startsWith!='function'){String.prototype.startsWith=function(str){return this.indexOf(str)===0}}
var protocol=window.location.protocol+'//';(function(jq){jq.fn.tagHTML=function(){var cloning=jq(jq(this)[0].cloneNode(!1));return cloning.html("").wrap('<div></div>').parent().html()}
jq.fn.outerHTML=function(){var cloning=jq(jq(this)[0].cloneNode(!1));return cloning.clone().wrap('<div></div>').parent().html()}
jq.fn.linkPrompt=function(href,target,evt,params){jq(".linkPrompt-view").fadeOut("fast",function(){jq(this).remove()});if(evt&&evt.pageY&&evt.pageX){if(!params)params=new Object();if(!params.size)params.size=12;if(!params.width)params.width=80;if(!params.padding)params.padding="3px 18px 2px 2px";if(!params.text)params.text="Acessar link";if(!params.zIndex)params.zIndex=999;var offset=jq(this).offset();var width=jq(this).width();offset.left+=width*0.5;offset.top=evt.pageY-params.size;offset.left=evt.pageX;offset.top-=15;var margin=-params.width*0.5;var link=jq("<a />").attr("href",href).attr("target",target).css("display","block").html(params.text).css("font-size",params.size).css("width",params.width).css("padding",params.padding).css("position","absolute").css("top",offset.top+"px").css("left",offset.left+"px").css("margin-left",margin+"px").css("text-align","center").addClass("linkPrompt-view").css("z-index",params.zIndex).fadeIn();jq("body").append(link)}}
jq.fn.altLinkPrompt=function(attrs,evt,params){console.log("Not Link");jq(".linkPrompt-view").fadeOut("fast",function(){jq(this).remove()});console.log(evt&&evt.pageY&&evt.pageX);if(evt&&evt.pageY&&evt.pageX){if(!params)params=new Object();if(!params.size)params.size=12;if(!params.width)params.width=80;if(!params.padding)params.padding="3px 18px 2px 2px";if(!params.text)params.text="Acessar link";if(!params.zIndex)params.zIndex=999;var offset=jq(this).offset();var width=jq(this).width();offset.left+=width*0.5;offset.top=evt.pageY-params.size;offset.left=evt.pageX;offset.top-=15;var margin=-params.width*0.5;var link=jq("<a />");jq.each(attrs,function(){link.attr(this.name,this.value)});link.css("display","block").html(params.text).css("font-size",params.size).css("width",params.width).css("padding",params.padding).css("position","absolute").css("top",offset.top+"px").css("left",offset.left+"px").css("margin-left",margin+"px").css("text-align","center").addClass("linkPrompt-view").css("z-index",params.zIndex).fadeIn();jq("body").append(link)}}})(jq18);function WLUnity(wlauto){var wlautoObject=wlauto;var unityObj2;this.viewTime=0;this.loaded=0;this.playing=!1;this.currentGesture="";this.initialize=function(){window.WLUnity=this;var config={width:240,height:384,params:{enableDebugging:"0",backgroundcolor:"e7e7e7",bordercolor:"e7e7e7",textcolor:"666666",logoimage:wlautoObject.getWlAutoRoot()+"/load/prodeaf-weblibras-logo.png",progressbarimage:wlautoObject.getWlAutoRoot()+"/load/bar.png",progressframeimage:wlautoObject.getWlAutoRoot()+"/load/barFrame.png"}};config.params.disableContextMenu=!0;unityObj2=new UnityObject2(config);var $brokenScreen=jq18("#wlautoPlayer").find(".broken");$brokenScreen.hide();unityObj2.observeProgress(function(progress){switch(progress.pluginStatus){case "broken":$brokenScreen.find("a").click(function(e){e.stopPropagation();e.preventDefault();unityObj2.installPlugin();return!1});$brokenScreen.show();break;case "missing":WLUnity.setDeniedImage("missingUnity");break;case "installed":jq18("#body").show();break;case "unsupported":WLUnity.setDeniedImage("unsupportedUnity");break;case "first":break}});var version=WLPlayerVersion;var playerName="weblibras.unity3d?v="+version;playerName+="?t="+(new Date().getTime()).toString();var isOpera=!!window.opera||navigator.userAgent.indexOf(' OPR/')>=0;var isFirefox=typeof InstallTrigger!=='undefined';var isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor')>0;var isChrome=!!window.chrome&&!isOpera;var isIE=!1||!!document.documentMode;if(isChrome||isOpera||isSafari){jq18("#wlautoScreen").append("<script src='"+WLHost+"/webgl3.0/wlhtml5.js'></script>'")}else if(isFirefox){var db=window.indexedDB.open("WLDBTest");var obj=this;db.onsuccess=function(){jq18("#wlautoScreen").append("<script src='"+WLHost+"/webgl3.0/wlhtml5.js'></script>'")};db.onerror=function(){obj.FallBackToUnity()}}else{this.FallBackToUnity()}
this.idleTimeout()}
this.FallBackToUnity=function(){var isOpera=!!window.opera||navigator.userAgent.indexOf(' OPR/')>=0;var isChrome=!!window.chrome&&!isOpera;if(isChrome){WLUnity.setDeniedImage("WLER");return}
jq18("#wlautoScreen").html("<div class='no-wlauto' id='wlautoPlayer'></div>");var version=WLPlayerVersion;var playerName="weblibras.unity3d?v="+version;unityObj2.initPlugin(jq18("#wlautoPlayer")[0],wlautoObject.getWlAutoRoot()+"/"+playerName)}
this.idleTimeout=function(){var time=Math.floor(8000+Math.random()*8000)}
this.tryIDLE=function(tempo){if(wlAutoObject.objPlayer.currentGesture==""){var idleAmmount=5;var c=Math.floor(Math.random()*idleAmmount)+1;this.playGesture("_idle"+c,!0)}else{}}
this.playGesture=function(gestureName,hideControls){if(gestureName!=this.currentGesture){unityObj2.getUnity().SendMessage("WebLibras","OpenText",gestureName);this.currentGesture=gestureName;this.playing=!0;if(this.SetWLInteraction){this.SetWLInteraction()}}}
this.stopVideo=function(){if(this.wlLoaded){unityObj2.getUnity().SendMessage("WebLibras","Stop","")}}
this.videoDone=function(){jq18(".linkPrompt-view").fadeOut("fast",function(){jq18(this).remove()});var currentHash=this.currentGesture;this.currentGesture="";if(wlAutoObject.continuousReading){wlAutoObject.WlautoRequestNextTranslation(currentHash)}}
this.hideWlauto=function(){this.requestStop();this.currentGesture=""}
this.receiveInfo=function(){}
this.requestPlay=function(){if(!this.playing){}else{}
this.playing=!this.playing}
this.requestStop=function(){this.playing=!1;this.stopVideo()}
this.wlautoLoaded=function(){wlautoObject.WlautoLoaded()}
this.done=function(){this.playing=!1;this.currentGesture="";wlautoObject.WlautoRequestNextTranslation()}
this.executePreviousTranslation=function(){this.playing=!1;this.currentGesture="";wlautoObject.WlautoRequestPreviousTranslation()}
this.ready=function(){console.log("Unity ready")}
this.wlautoLoaded=function(){if(!this.wlLoaded){this.wlLoaded=!0;unityObj2.getUnity().SendMessage("WebLibras","SendLog",navigator.userAgent);unityObj2.getUnity().SendMessage("WebLibras","SetTranslationEngine",wlautoObject.params.language);if(wlautoObject.params.mode==ProDeafMode.Video){unityObj2.getUnity().SendMessage("WebLibras","HideUI","");unityObj2.getUnity().SendMessage("WebLibras","DisableSubtitles","")}
if(wlautoObject.params.greetingText!=""){setTimeout(function(){wlautoObject.OpenText(wlautoObject.params.greetingText)},2000)}
jq18("wlauto").addClass("wlautoHover")}}
this.removeWlAuto=function(){jq18("#startWlAuto").remove();jq18("#loadingWlAuto").remove();jq18("#imgAcessibilidadeWlAuto").remove();jq18("#wlautoContainer").remove();jq18('#balaoCliqueFrase').remove();jq18("#wlautoScreen").remove();jq18("wlauto").removeClass("wlautoHover").removeClass("wlautoPlaying")}
this.getUnity=function(){return unityObj2}
this.showAd=function(type,url,target,time){var img=jq18("<img />").attr("src",target).load(function(){jq18("#wlautoPlayer").css("top","-9999px").css("position","absolute");jq18("#wlautoad").remove();jq18("#wlautoScreen").append(jq18("<div id='wlautoad'></div>").append(jq18("<a target='_blank' />").attr("href",url).append(img).click(function(){q18("#wlautoPlayer").css("top","0");jq18("#wlautoad").remove();window.onfocus=function(){jq18("#wlautoPlayer").css("top","1");setTimeout(function(){jq18("#wlautoPlayer").css("top","0")},10)}}).css("position","relative").append(jq18("<div />").css("position","absolute").css("width","100%").css("background","rgba(0,0,0,0.63)").css("color","#9d9d9d").css("font-size","10px").css("font-family","arial").css("bottom","4px").css("padding","10px 0").append("Esse an&uacute;ncio fechar&aacute; automaticamente<br /> em ").append(jq18("<span />").attr("id","wlautoAdCounter").text(time).css("color","#FFF")).append(" segundos.")).css("height","384px").css("width","240px")));var countDown=function(func){var i=parseInt(jq18("#wlautoAdCounter").text())-1;if(i>0){jq18("#wlautoAdCounter").text(i);setTimeout(function(){func(func)},1000)}else{jq18("#wlautoad").remove();jq18("#wlautoPlayer").css("top","1")}}
setTimeout(function(){countDown(countDown)},1000)})}
this.setDeniedImage=function(type){jq18("#wlautoScreen").html("<div class='no-wlauto' id='wlautoPlayer'></div>");console.log("Denied Image: "+type);jq18.get(WLHost+"/html/"+type+".html",function(data){jq18("#wlautoPlayer").html(data.replace(/%0%/g,WLHost))})}
this.initialize(wlautoObject)}
var WebLibrasType={Default:"default",Wordpress:"wordpress",Blogger:"blogger",Webnode:"webnode"};var ProDeafType=WebLibrasType;var WebLibrasIconPosition={Top:"wl-element-top",Left:"wl-element-left",Bottom:"wl-element-bottom",Right:"wl-element-right",Content:"wl-element-content"};var ProDeafIconPosition=WebLibrasIconPosition;var WebLibrasMode={WebSite:"wl-mode-website",Video:"wl-mode-video"};var ProDeafMode=WebLibrasMode;var ProDeafLanguage={Libras:"libras",ASL:"asl"};function WebLibras(constructor,rootElementToApply,useCompatibilityMode){this.params={iconRoot:"body",translatedElement:"body",compatibilityMode:!1,position:ProDeafIconPosition.Right,mode:ProDeafMode.WebSite,type:ProDeafType.Default,avoid:"",loadingPage:WLHttpsHost+"/html/downloading.html",language:ProDeafLanguage.Libras,greetingText:"",translateAltImages:!0,onOpen:function(){},onClose:function(){}};if(typeof constructor==="string"||typeof constructor==="undefined"){var tmp={};if(typeof(constructor)!=="undefined"){tmp.iconRoot=constructor}
if(typeof(rootElementToApply)!=="undefined"){tmp.translatedElement=rootElementToApply}
if(typeof(useCompatibilityMode)!=="undefined"){tmp.compatibilityMode=useCompatibilityMode}
constructor=tmp}
jq18.extend(this.params,constructor);if(WLHost.startsWith("http://arquivos.weblibras")&&protocol.indexOf('https')==-1){jq18.post("http://logging.prodeaf.net/pageview/insert",{url:window.location.href})}
this.isWlAutoPlayerOnScreen=!1;this.processedByWlAuto=!1;this.objPlayer=!1;this.imagePlayOnHover=!1;this.continuousReading=!0;this.autoStart=!1;this.compatibility=this.params.compatibilityMode;window.WLCompatibilityModeActivated=this.compatibility;var wlAutoServiceHost=WLHost.substring(0,WLHost.lastIndexOf("/"));var wlAutoRoot=WLHost;if(protocol.indexOf('https')>-1){wlAutoRoot=WLHttpsHost;WLHost=WLHttpsHost}
var wlElementToAppendWL=this.params.iconRoot;var wlAutoIconMarginLeft=0;var wlAutoIconTop=0;var wlAutoIconWidth=30;var wlAutoIconHeight=30;var wlAutoIconTooltipMarginLeftRelative=45;var wlAutoIconTooltipMarginLeft=wlAutoIconMarginLeft-wlAutoIconTooltipMarginLeftRelative;var wlAutoIconTooltipTopRelative=31;var wlAutoIconTooltipTop=wlAutoIconTop+wlAutoIconTooltipTopRelative;var wlAutoIconsZIndex=9999;var wlAutoIconsPosition="fixed";var wlAutoContainerZIndex=9999;var parentTagToApply=this.params.translatedElement;var wlAutoPlayingColor="255,255,0";var wlAutoHoverColor="194,220,245";var isPageCentered=!0;var leftOrRight="left";var leftOrRightPos="50%";this.postInstructions=new Array();this.dockedSet=!1;this.getElementToAppendWL=function(){return wlElementToAppendWL}
this.getAlwaysDislpayHelp=function(){return alwaysDislpayHelp}
this.getWlAutoRoot=function(){return wlAutoRoot}
this.getParentTagToApply=function(){return parentTagToApply}
this.setSideDockedPosition=function(leftRight,delta){this.postInstructions.push(function(){leftOrRight=leftRight;leftOrRightPos=delta;isPageCentered=!1;var adjusted=leftOrRight=="right"?leftOrRightPos-45:leftOrRightPos;jq18("#startWlAuto").css("left","").css("right","").css(leftOrRight,leftOrRightPos+"px");jq18("#loadingWlAuto").css("left","").css("right","").css(leftOrRight,leftOrRightPos+"px");jq18("#imgAcessibilidadeWlAuto").css("left","").css("right","").css(leftOrRight,adjusted+"px")})}
this.getIconMarginHPosition=function(){return wlAutoIconMarginLeft}
this.setIconMarginHPosition=function(newValue){if(!this.dockedSet){this.setSideDockedPosition("right",0)}
this.postInstructions.push(function(){wlAutoIconMarginLeft=newValue;wlAutoIconTooltipMarginLeft=wlAutoIconMarginLeft-wlAutoIconTooltipMarginLeftRelative;jq18("#startWlAuto").css("margin-"+leftOrRight,wlAutoIconMarginLeft+"px");jq18("#loadingWlAuto").css("margin-"+leftOrRight,wlAutoIconMarginLeft+"px");jq18("#imgAcessibilidadeWlAuto").css("margin-"+leftOrRight,wlAutoIconTooltipMarginLeft+"px")})}
this.getIconMarginVPosition=function(){return wlAutoIconTop}
this.setIconMarginVPosition=function(newValue){if(!this.dockedSet){this.setSideDockedPosition("right",0)}
this.postInstructions.push(function(){wlAutoIconTop=newValue;wlAutoIconTooltipTop=wlAutoIconTop+wlAutoIconTooltipTopRelative;jq18("#startWlAuto").css("top",wlAutoIconTop+"px");jq18("#loadingWlAuto").css("top",wlAutoIconTop+"px");jq18("#imgAcessibilidadeWlAuto").css("top",wlAutoIconTooltipTop+"px")})}
this.getIconsPosition=function(){return wlAutoIconTop}
this.setIconsPosition=function(newValue){if(!this.dockedSet){this.setSideDockedPosition("right",0)}
this.postInstructions.push(function(){wlAutoIconsPosition=newValue;jq18("#startWlAuto").removeAttr("class").css("position",wlAutoIconsPosition);jq18("#loadingWlAuto").css("top",wlAutoIconsPosition);jq18("#imgAcessibilidadeWlAuto").css("top",wlAutoIconsPosition)})}
this.autoShowWlAuto=function(){jq18("#imgAcessibilidadeWlAuto").hide();jq18("#startWlAuto").hide();jq18("#loadingWlAuto").hide();this.autoStart=!0;this.showWlAutoPlayer()}
var pronouns=["V. Ex.Âª","V. Mag.Âª","V. Mag.Âª","V. S.a","V. S.","Pe.","DiÃ¡c.","Ac.","Ilmo.","Sr.","Sra.","V. S.Âª","Dr.","Arq.","Bib.","Eng.","Com.","Prof.","Des.","Pr.","Acad.","AcadÃªm.","Adm.","Adv.","Alm.","Al.","Bel.","Bpo.","Cad.","Cap.","Card.","Com.","Comte.","Cons.","Dep.","DiÃ¡c.","Dra.","Exa.","Gen.","Gal.","Ilma.","Maj.","MÃ©d.","Mons.","Pe.","Ph.D.","M.Sc.","Rev.","Srs.","Sras.","Srtas."];function InsertSpecialTags(receivedContent){var usedTags='div, p, li, td, th, dd, h1, h2, h3, h4, h5, h6, h7, br, dl';var avoid='script, noscript, style, link, .-js-expansivel dt';var destroy='script';var wlautoOpenTag='<wlauto>';var openTag=null;var tags=jq18(receivedContent).tagHTML().split("><");var returnStr=tags[0]+">";var contents=jq18(receivedContent).contents();var pronounDivisor="[~pr~]";var compatibility=window.WLCompatibilityModeActivated;jq18(contents).each(function(){if(this.nodeType==3){for(i=0;i<pronouns.length;i++){try{if(jq18(this).text().toLowerCase().indexOf(" "+pronouns[i].toLowerCase())>=0){var creu=jq18(this).parent().html().replace(pronouns[i],pronouns[i].replace('.','')+pronounDivisor);jq18(this).parent().html(creu)}}catch(err){}}}});contents=jq18(receivedContent).contents();jq18(contents).each(function(){var isComment=this.nodeType==8;if(!isComment&&!jq18(this).is(avoid)&&!jq18(this).hasClass('no-wlauto')&&(this.nodeType==3||(jq18(this).is(":visible")||compatibility))){if(this.nodeType!=3){if(jq18(this).is('img')){openTag=jq18(wlautoOpenTag).addClass('wlautoHover wlautoImage').insertBefore(jq18(this)).before(" ");jq18(this).appendTo(openTag);openTag=null}else if(jq18(this).is(usedTags)){if(openTag!=null){openTag=null}
InsertSpecialTags(this)}else{if(jq18(this).has(usedTags).length){if(openTag!=null){openTag=null}
InsertSpecialTags(this)}else{if(openTag==null){openTag=jq18(wlautoOpenTag).insertBefore(jq18(this)).before(" ");openTag.css('line-height',jq18(this).parent().css('line-height'))}
jq18(this).find(destroy).remove();jq18(this).appendTo(openTag)}}}else{var trimmedText=jq18.trim(jq18(this).text());if(trimmedText.length>0){if(openTag==null){openTag=jq18(wlautoOpenTag).insertBefore(jq18(this)).before(" ");openTag.css('line-height',jq18(this).parent().css('line-height'))}
var divisor="[~]";var newText=jq18(this).text().replace(/\. /g,"."+divisor).replace(/\! /g,"!"+divisor).replace(/\? /g,"?"+divisor).replace(/\.$/g,"."+divisor).replace(/\!$/g,"!"+divisor).replace(/\?$/g,"?"+divisor);newText=newText.replace(pronounDivisor,".");var phrases=newText.split(divisor);if(phrases.length>1){for(var i=0;i<phrases.length;i++){openTag.append(phrases[i]);if(i<phrases.length-1){openTag=jq18(wlautoOpenTag).insertBefore(jq18(this)).before(" ");openTag.css('line-height',jq18(this).parent().css('line-height'))}}}else{openTag.append(jq18(this).text())}
jq18(this).remove()}}}})}
function bindClickEvent(wlautoObject){jq18("wlauto").click(function(evt){if(jq18(this).hasClass("wlautoHover")){if(jq18(this).text().length>WLMaxTranslationSize){jq18(this).removeClass("wlautoHover");evt.preventDefault()}else{jq18(".linkPrompt-view").fadeOut("fast",function(){jq18(this).remove()});jq18("wlauto.wlautoPlaying").removeClass("wlautoPlaying");jq18(this).addClass("wlautoPlaying");try{var originalHref="";var originalTarget="";var attrs;if(jq18(this).parents('a').length!=0){originalHref=jq18(this).parents('a').first().attr('href');originalTarget=jq18(this).parents('a').first().attr('target');attrs=jq18(this).parents('a').first().prop('attributes')}else if(jq18(evt.target).parents('a').length!=0){originalHref=jq18(evt.target).parents('a').first().attr('href');originalTarget=jq18(evt.target).parents('a').first().attr('target');attrs=jq18(evt.target).parents('a').first().prop('attributes')}else if(jq18(evt.target).is('a')){originalHref=jq18(evt.target).attr('href');originalTarget=jq18(evt.target).attr('target');attrs=jq18(evt.target).prop('attributes')}
if(originalHref!=undefined&&originalHref!=null&&originalHref!=""&&originalHref[0]!="#"&&originalHref.indexOf('javascript')!=0){evt.preventDefault();jq18(this).linkPrompt(originalHref,originalTarget,evt)}else if(attrs!=undefined){evt.preventDefault();jq18(this).altLinkPrompt(attrs,evt)}}catch(err){jq18("wlauto.wlautoPlaying").removeClass("wlautoPlaying")}
var nodes=jq18(this).contents();var text="";jq18(nodes).each(function(){if(jq18(this).is("img")){if(jq18(this).attr("alt")!=undefined)
text+=jq18(this).attr("alt")+" "}else{text+=jq18(this).text()+" "}});if(text!="")
wlautoObject.objPlayer.playGesture(text.trim());else{wlautoObject.WlautoRequestNextTranslation()}
evt.stopPropagation()}}})}
this.InsertTags=function(newElement){InsertSpecialTags(newElement);jq18("wlauto").unbind();jq18(newElement).find("wlauto").addClass("wlautoHover");bindClickEvent(this)}
this.showWlAutoPlayer=function(){var wlautoObj=this;if(!wlautoObj.processedByWlAuto){jq18("#startWlAuto").hide();jq18("#loadingWlAuto").show();wlautoObj.objPlayer=new WLUnity(wlautoObj);InsertSpecialTags(wlautoObj.getParentTagToApply());jq18("wlauto").each(function(){var wlautotag=this;if(jq18(wlautotag).text().length>WLMaxTranslationSize){var elements=[];for(var i=0;i<wlautotag.childNodes.length;i++){elements.push(wlautotag.childNodes[i])}
for(var i=0;i<elements.length;i++){jq18(elements[i]).insertBefore(wlautotag)}
jq18(wlautotag).remove()}});bindClickEvent(wlautoObj);wlautoObj.processedByWlAuto=!0;wlautoObj.WlautoLoaded(!1)}else{jq18("wlauto").addClass("wlautoHover");wlautoObj.DelayedShow(!0)}
this.SetWLInteraction()}
this.WlautoLoaded=function(dontPlay,timeout){try{dontPlay=dontPlay?!0:!1}catch(err){}
this.DelayedShow(dontPlay,timeout)}
this.DelayedShow=function(dontPlay,timeout){var wlautoObj=this;if(typeof timeout=="number"){setTimeout(function(){if(!wlautoObj.isWlAutoPlayerOnScreen){WebLibras.showWindow(wlautoObj,dontPlay)}},timeout)}else if(!wlautoObj.isWlAutoPlayerOnScreen||!dontPlay){WebLibras.showWindow(wlautoObj,dontPlay)}}
WebLibras.showWindow=function(wlautoObj,dontPlay){removePlayingBackground();var animProperties={"top":"159px"};if(wlautoObj.autoStart){animProperties={"top":"159px","left":"50%","margin-left":"165px"}}
jq18("#wlautoContainer").animate(animProperties,"fast",function(){if(!dontPlay){jq18('#balaoCliqueFrase').show(600);wlautoObj.DelayedPlay.call(wlautoObj,250);jq18("#startWlAuto").show();jq18("#loadingWlAuto").hide()}});wlautoObj.isWlAutoPlayerOnScreen=!0}
this.DelayedPlay=function(delay){var wlautoObj=this;setTimeout(function(){try{if(!wlautoObj.autoStart){console.log("Delayed play")}else{jq18("wlauto[hash]").first().click()}}catch(err){}
if(jq18('#balaoCliqueFrase').is(':visible')){setTimeout("jq18('#balaoCliqueFrase').hide(600)",5000)}},delay)}
function removePlayingBackground(){var currentlyPlaying=jq18(".wlautoPlaying");currentlyPlaying.removeClass('wlautoPlaying')}
this.closeWlAutoPlayer=function(){removePlayingBackground();var i=0;var wlautoObj=this;if(this.wlLoaded){this.objPlayer.getUnity().getUnity().SendMessage("WebLibras","WindowClosed","")}
jq18("#wlautoContainer").animate({"top":"-800px"},"fast");this.isWlAutoPlayerOnScreen=!1;jq18("wlauto").removeClass("wlautoRealce");this.currentGesture="";jq18(".linkPrompt-view").fadeOut("fast",function(){jq18(this).remove()});this.objPlayer.hideWlauto();jq18("wlauto").removeClass("wlautoHover").removeClass("wlautoPlaying");this.ClearWLInteraction()}
this.hideHint=function(fast){var intensity=fast?"fast":"slow";try{jq18("#imgAcessibilidadeWlAuto").fadeOut(intensity)}catch(e){}}
this.showHint=function(fast){var intensity=fast?"fast":"slow";try{jq18("#imgAcessibilidadeWlAuto").fadeIn(intensity);if(!fast){setTimeout(pdo.hideHint,1000)}}catch(e){}}
this.InsertHTMLElements=function(){var wlautoObj=this;var parentStartTag=wlautoObj.getElementToAppendWL();if(parentStartTag!="body")
{wlAutoIconsPosition="relative";wlAutoIconTop=0;isPageCentered=!1;leftOrRightPos=0;wlAutoIconTooltipTop=0}
jq18("<link />").attr("rel","stylesheet").attr("href",wlAutoRoot+"/wlStyle.css").appendTo("head");jq18("<div />").attr("id","startWlAuto").addClass(wlautoObj.params.position).appendTo(parentStartTag).append(jq18("<div />").attr("id","startWlIcon")).append(jq18("<div />").attr("id","startWlDetails").append(jq18("<div />").html("Acess&iacute;vel em Libras").attr("id","startWlHeader")).append(jq18("<div />").html("&copy; ProDeaf").attr("id","startWlFooter"))).click(function(){wl.params.onOpen();wlautoObj.showWlAutoPlayer()});jq18("<input />").addClass("no-wlauto").attr("type","image").attr("src",wlAutoRoot+"/loading.gif").attr("id","loadingWlAuto").css("display","none").css("position",wlAutoIconsPosition).css("z-index",wlAutoIconsZIndex).css("top",wlAutoIconTop+"px").css(leftOrRight,isPageCentered?"50%":leftOrRightPos).css("margin-"+leftOrRight,wlAutoIconMarginLeft+"px").css("width",wlAutoIconWidth+"px").css("height",wlAutoIconHeight+"px").appendTo(parentStartTag);var wlautoContainer=jq18("<div />").addClass("no-wlauto").attr("id","wlautoContainer");wlautoContainer.appendTo("body");jq18("<div id='wlautoHandle'>").addClass("no-wlauto").css("position","absolute").css("left","9px").css("top","2px").css("width","210px").css("height","23px").css("cursor","move").appendTo(wlautoContainer);jq18("<img />").addClass("no-wlauto").attr("src",wlAutoRoot+"/close-wlauto.png").attr("id","closeWlAuto").attr("display","none").css("cursor","pointer").css("position","absolute").css("z-index",(wlAutoContainerZIndex+1)).css("top","5px").css("right","8px").css("width","16px").css("height","16px").css("background","url("+wlAutoRoot+"/close-wlauto.png) no-repeat top left").appendTo(wlautoContainer).click(function(){wl.params.onClose();wlautoObj.closeWlAutoPlayer()});var wlautoScreen=jq18("<div />").addClass("no-wlauto").attr("id","wlautoScreen").appendTo(wlautoContainer);jq18("<div />").addClass("no-wlauto").attr("id","wlautoPlayer").appendTo(wlautoScreen);var imageHoverIE7="border: 1px solid "+"rgb("+wlAutoHoverColor+")"+" !important;margin:-1px;";var imageHover="outline: 1px solid "+"rgb("+wlAutoHoverColor+")"+" !important;";var imagePlayingIE7="border: 1px solid "+"rgb("+wlAutoPlayingColor+")"+" !important;margin:-1px;";var imagePlaying="outline: 1px solid "+"rgb("+wlAutoPlayingColor+")"+" !important;";jq18(function(){jq18("#wlautoContainer").draggable({containment:"window"})});jq18("#wlautoScreen").hover(function(){jq18("#wlautoContainer").draggable("disable")},function(){jq18("#wlautoContainer").draggable("enable")})}
this.WlautoRequestNextTranslation=function(){var wlautoHashed=jq18("wlauto:parent");var lastPlayed=wlautoHashed.filter(".wlautoPlaying").removeClass("wlautoPlaying");var indexOfLastPlayedHash=wlautoHashed.index(lastPlayed.last());if(indexOfLastPlayedHash==-1){return}
if(indexOfLastPlayedHash<wlautoHashed.length&&wlautoHashed[indexOfLastPlayedHash+1]!=null){if(jq18.trim(jq18(wlautoHashed[indexOfLastPlayedHash+1]).text())!=""){wlautoHashed[indexOfLastPlayedHash+1].click()}else{jq18(wlautoHashed[indexOfLastPlayedHash+1]).addClass("wlautoPlaying");if(jq18(wlautoHashed[indexOfLastPlayedHash+1]).hasClass("wlautoImage"))
wlautoHashed[indexOfLastPlayedHash+1].click();else this.WlautoRequestNextTranslation()}}}
this.WlautoRequestPreviousTranslation=function(){var wlautoHashed=jq18("wlauto:parent");var lastPlayed=wlautoHashed.filter(".wlautoPlaying").removeClass("wlautoPlaying");var indexOfLastPlayedHash=wlautoHashed.index(lastPlayed.last());if(indexOfLastPlayedHash==-1){return}
if(indexOfLastPlayedHash>0&&wlautoHashed[indexOfLastPlayedHash-1]!=null){if(jq18.trim(jq18(wlautoHashed[indexOfLastPlayedHash-1]).text())!=""){wlautoHashed[indexOfLastPlayedHash-1].click()}else{jq18(wlautoHashed[indexOfLastPlayedHash-1]).addClass("wlautoPlaying");if(jq18(wlautoHashed[indexOfLastPlayedHash-1]).hasClass("wlautoImage"))
wlautoHashed[indexOfLastPlayedHash-1].click();else this.WlautoRequestPreviousTranslation()}}}
this.CheckWLInteraction=function(){var lastTime=this.GetWLInteractionValue();if(lastTime!=null){var now=new Date();lastTime.setMinutes(lastTime.getMinutes()+5);return lastTime>now}else{return!1}}
this.SetWLInteraction=function(){if(typeof(Storage)!=="undefined"){sessionStorage.WLInteractionTime=new Date()}else{document.cookie="WLInteractionTime="+(new Date())}}
this.ClearWLInteraction=function(){if(typeof(Storage)!=="undefined"){sessionStorage.WLInteractionTime=null}else{document.cookie='WLInteractionTime=; expires=Thu, 01 Jan 1970 00:00:01 GMT;'}}
this.GetWLInteractionValue=function(){if(typeof(Storage)!=="undefined"){if(sessionStorage.WLInteractionTime){return new Date(sessionStorage.WLInteractionTime)}else{return null}}else{var nameEQ="WLInteractionTime=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0){return new Date(c.substring(nameEQ.length,c.length))}}
return null}}
this.OpenText=function(text){WLUnity.playGesture(text)}
var pdo=this;jq18(document).ready(function(){if(!WebLibras.hideAcessibilityImage){setTimeout(pdo.showHint,500)}
pdo.InsertHTMLElements();if(WebLibras.hideAcessibilityImage){jq18("#imgAcessibilidadeWlAuto").hide()}
if(pdo.params.avoid.length>0){jq18(pdo.params.avoid).addClass('no-wlauto')}
if(pdo.CheckWLInteraction()){pdo.autoShowWlAuto()}
var offset=1;jq18(window).resize(function(){jq18("#wlautoContainer").css("marginTop",(offset)+"px");offset+=2;setTimeout(function(){jq18("#wlautoContainer").css("marginTop","0px")},1)});for(var i=0;i<pdo.postInstructions.length;i++){pdo.postInstructions[i].call()}})}
function ProDeaf(constructor,rootElementToApply,useCompatibilityMode){return new WebLibras(constructor,rootElementToApply,useCompatibilityMode)}

/**
 * Bs Input Validate (anchor)
 */
var BsActivationCodeValidate = (function () {
  // Elements
  var elements = {};
  var $ = elements;

  $.forms = document.querySelectorAll('.bs-js-validate');

  if (!$.forms.length) return;

  // Config
  var config = {
    validate: {
      token: function (input) {
        return input.value === input.getAttribute('data-test-validation');
      },
      cpf: function (input) {
        return input.value.replace(/[^0-9]/g, '') === input.getAttribute('data-test-validation');
      },
      success: function (form) {
        var inputs = form.querySelectorAll('input');
        var formSenha = document.querySelector('.bs-js-form-acesso-criar-senha');
        var formSenhaInputs = formSenha.querySelectorAll('input');
        var tokenErrorMessage = document.querySelector('.bs-js-form-acesso-token-message');

        form.classList.add('bs-is-valid');

        Array.prototype.forEach.call(inputs, function (input) {
          input.setAttribute('disabled', 'disabled');
          form.querySelector('button[type="submit"]').setAttribute('disabled', 'disabled');
        });

        tokenErrorMessage.classList.add('bs-is-hidden');
        formSenha.classList.remove('bs-is-hidden');
        formSenhaInputs[0].focus();
      },
      error: function (form) {
        var inputs = form.querySelectorAll('input');
        var formSenha = document.querySelector('.bs-js-form-acesso-criar-senha');
        var tokenErrorMessage = document.querySelector('.bs-js-form-acesso-token-message');

        tokenErrorMessage.classList.remove('bs-is-hidden');
        formSenha.classList.add('bs-is-hidden');

        inputs[0].focus();
      },
    },
    validateOnInput: true,
    cleanOnInput: true,
  };

  var init = function () {
    Array.prototype.forEach.call($.forms, function (form) {
      var inputs = form.querySelectorAll('input');
      if (inputs.length === 1) {
        inputs[0].addEventListener('input', validateForm.bind(null, form));
      }
      form.addEventListener('formIsValid', validateForm.bind(null, form));

      // if (config.validateOnInput) {
      //   input.addEventListener('input', validate.bind(null, input));
      // } else if (config.cleanOnInput) {
      //   input.addEventListener('input', cleanState.bind(null, input));
      // }

      // var teste = BsFormValidate.validateForm(form);

      // Como agora é um form/submit, não precisa do keyup
      // input.addEventListener('keyup', function (e) {
      //   if (e.keyCode === 13) validate(el);
      // });
    });
  };

  var validateForm = function (form) {
    var inputs = form.querySelectorAll('input');
    var isFormValid = false;

    isFormValid = validateInputs(inputs);

    if (isFormValid) {
      config.validate.success(form);
    } else {
      config.validate.error(form);
    }
  };

  var validateInputs = function (inputs) {
    var output = true;
    var inputConfig = config.validate;

    Array.prototype.forEach.call(inputs, function (input) {
      var inputName = input.name;
      var patternIsValid = BsFormValidate.validateInput(input);
      var valueIsValid = inputConfig[inputName];
      if (!patternIsValid || !valueIsValid(input)) output = false;
    });

    return output;
  };

  return {
    init: init,
  };
}());

/**
 * Init BsActivationCodeValidate Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-js-validate').length) {
    BsActivationCodeValidate.init();
  }
});

// https://codepen.io/Qbrid/pen/EgAYNg
document.addEventListener('DOMContentLoaded', function () {
  BackToTop.prototype.init();
});

/**
 * BackToTop
 * Return scroll to the top of the page
 * @constructor
 */
function BackToTop() {

}

var intervalId = 0; // Needed to cancel the scrolling when we're at the top of the page
const $scrollButton = document.querySelector('.js-back-to-top'); // Reference to our scroll button

BackToTop.prototype = {
  constructor: BackToTop,
  init: function () {
    var _ = this;
    if ($scrollButton) {
      $scrollButton.addEventListener('click', function () {
        intervalId = setInterval(_._scrollStep, 2);
      });
    }
  },

  _scrollStep: function () {
    // Check if we're at the top already. If so, stop scrolling by clearing the interval
    if (window.pageYOffset === 0) {
      clearInterval(intervalId);
    }
    window.scroll(0, window.pageYOffset - 50);
  },
};

var $buoop = {
  required:{e:-6,f:-6,o:-3,s:-2,c:-6},
  unsupported:true,
  insecure:true,
  url: null,
  newwindow: false,
  noclose:true,
  // test: true,
  text: 'Seu navegador da web ({brow_name}) está desatualizado. \<br\/> Atualize seu navegador para ter mais segurança e velocidade, além da melhor experiência neste site.',
  api:2018.12
};

function $buo_f(){
  var e = document.createElement("script");
  e.src = "https://www.browser-update.org/update.min.js";
  document.body.appendChild(e);
};
try {document.addEventListener("DOMContentLoaded", $buo_f,false)}
  catch(e){window.attachEvent("onload", $buo_f)}

/**
 * Wrap HTML element within another element
 * e.g. Wrap a table within div.bs-table to make it responsive
 *
 */
var BsFixPortalHTML = (function () {
  // Config
  var config = {
    elements: document.querySelectorAll('.bs-portal-content table'),
  };

  var init = function () {
    Array.prototype.forEach.call(config.elements, function (table) {
      var tableWrapper = document.createElement('div');
      tableWrapper.classList.add('bs-table');
      wrapElement(table, tableWrapper);
    });
  };

  return {
    init: init,
  };
}());

/**
 * Init BsFixPortalHTML Constructor
 * @return {void} BsFixPortalHTML.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-portal-content').length) {
    BsFixPortalHTML.init();
  }
});

var getParents = function (elem, parentClass, firstOcurrencyOnly) {
  var parents = [];

  for (; elem && elem !== document; elem = elem.parentNode) {
    if (elem.classList.contains(parentClass)) {
      parents.push(elem);

      if (firstOcurrencyOnly) break;
    }
  }
  return parents;
};

var getParent = function (elem, parentClass) {
  return getParents(elem, parentClass, true)[0];
};


/**
 * Click Outside
 *
 * Obs: não funciona ainda :(
 *
 */
var outside = function () {
  var notTargets = function (elements, eventTarget) {
    var result = false;
    elements.forEach(function (element) {
      result = !element.classList.contains(eventTarget);
    });
    return !result;
  };

  var clickOutside = function (elementActive, allowedTargets, callback) {
    document.querySelectorAll('body, html').forEach(function (el) {
      el.addEventListener('click', function (event) {
        event.stopPropagation();
        if (elementActive() && notTargets(allowedTargets, event.target)) {
          callback();
          return false;
        }
      });
    });
  };

  // Close search on click outside
  // Use:
  // clickOutside(searchActive, [config.search, config.searchToggle], closeSearch);
};

/**
 * Wrap HTML element within another element
 * e.g. Wrap a table within div.bs-table to make it responsive
 * @param {Element} toWrap element to be wrapped
 * @param {Element} wrapper dom element that'll wrap toWrap
 * @returns {Element}
 */
var wrapElement = function (toWrap, wrapper) {
  wrapper = wrapper || document.createElement('div');
  toWrap.parentNode.insertBefore(wrapper, toWrap);
  return wrapper.appendChild(toWrap);
};

/**
 * Checks all checkboxes with the given name
 * @param {Element} checkboxTarget the checkbox that'll select all the other checkboxes
 * @param {Element} name checkboxes name
 */
var selectAllCheckboxes = function (checkboxTarget, name) {
  checkboxes = document.getElementsByName(name);

  if (checkboxes) {
    checkboxes.forEach(function (checkbox) {
      checkbox.checked = checkboxTarget.checked;
    });
  }
}

/**
 * grayscaleImage
 * Generates and base64 url grayscale image from an image source
 *
 * Reference:
 * @link: https://www.majas-lapu-izstrade.lv/cross-browser-grayscale-image-example-using-css3-js/
 *
 * @param  {string}  src The src image
 * @return {boolean}     DataURL of the src image
 */
var grayscaleImage = function (src) {
  var canvas = document.createElement('canvas');
  var ctx = canvas.getContext('2d');
  var imgObj = new Image();
  imgObj.src = src;
  canvas.width = imgObj.width;
  canvas.height = imgObj.height;
  ctx.drawImage(imgObj, 0, 0);
  var imgPixels = ctx.getImageData(0, 0, canvas.width, canvas.height);
  for (var y = 0; y < imgPixels.height; y++) {
    for (var x = 0; x < imgPixels.width; x++) {
      // var i = (y * 4) * imgPixels.width + x * 4;
      var i = ((y * 4) * imgPixels.width) + (x * 4);
      var avg = (imgPixels.data[i] + imgPixels.data[i + 1] + imgPixels.data[i + 2]) / 3;
      imgPixels.data[i] = avg;
      imgPixels.data[i + 1] = avg;
      imgPixels.data[i + 2] = avg;
    }
  }
  ctx.putImageData(imgPixels, 0, 0, 0, 0, imgPixels.width, imgPixels.height);
  return canvas.toDataURL();
};

/**
 * Replace All
 * Replace all ocurrences of an string into another
 * @link https://stackoverflow.com/a/17606289
 *
 * Use: string.replaceAll(stringToSearch, stringToReplace)
 *
 * @param  {string} search      the term to search in string
 * @param  {string} replacement the value to replace term's by
 * @return {string}             a string updated by replaces
 */
String.prototype.replaceAll = function (search, replacement) {
  var target = this;
  return target.split(search).join(replacement);
};

/**
 * convertAccentedCharacters
 *  convert accented characters to non-accented
 * @param  {string} str some string
 * @return {string}     a string with non accented characters
 */
var convertAccentedCharacters = function (str) {
  var conversions = {
    'ae': 'ä|æ|ǽ',
    'oe': 'ö|œ',
    'ue': 'ü',
    'Ae': 'Ä',
    'Ue': 'Ü',
    'Oe': 'Ö',
    'A': 'À|Á|Â|Ã|Ä|Å|Ǻ|Ā|Ă|Ą|Ǎ',
    'a': 'à|á|â|ã|å|ǻ|ā|ă|ą|ǎ|ª',
    'C': 'Ç|Ć|Ĉ|Ċ|Č',
    'c': 'ç|ć|ĉ|ċ|č',
    'D': 'Ð|Ď|Đ',
    'd': 'ð|ď|đ',
    'E': 'È|É|Ê|Ë|Ē|Ĕ|Ė|Ę|Ě',
    'e': 'è|é|ê|ë|ē|ĕ|ė|ę|ě',
    'G': 'Ĝ|Ğ|Ġ|Ģ',
    'g': 'ĝ|ğ|ġ|ģ',
    'H': 'Ĥ|Ħ',
    'h': 'ĥ|ħ',
    'I': 'Ì|Í|Î|Ï|Ĩ|Ī|Ĭ|Ǐ|Į|İ',
    'i': 'ì|í|î|ï|ĩ|ī|ĭ|ǐ|į|ı',
    'J': 'Ĵ',
    'j': 'ĵ',
    'K': 'Ķ',
    'k': 'ķ',
    'L': 'Ĺ|Ļ|Ľ|Ŀ|Ł',
    'l': 'ĺ|ļ|ľ|ŀ|ł',
    'N': 'Ñ|Ń|Ņ|Ň',
    'n': 'ñ|ń|ņ|ň|ŉ',
    'O': 'Ò|Ó|Ô|Õ|Ō|Ŏ|Ǒ|Ő|Ơ|Ø|Ǿ',
    'o': 'ò|ó|ô|õ|ō|ŏ|ǒ|ő|ơ|ø|ǿ|º',
    'R': 'Ŕ|Ŗ|Ř',
    'r': 'ŕ|ŗ|ř',
    'S': 'Ś|Ŝ|Ş|Š',
    's': 'ś|ŝ|ş|š|ſ',
    'T': 'Ţ|Ť|Ŧ',
    't': 'ţ|ť|ŧ',
    'U': 'Ù|Ú|Û|Ũ|Ū|Ŭ|Ů|Ű|Ų|Ư|Ǔ|Ǖ|Ǘ|Ǚ|Ǜ',
    'u': 'ù|ú|û|ũ|ū|ŭ|ů|ű|ų|ư|ǔ|ǖ|ǘ|ǚ|ǜ',
    'Y': 'Ý|Ÿ|Ŷ',
    'y': 'ý|ÿ|ŷ',
    'W': 'Ŵ',
    'w': 'ŵ',
    'Z': 'Ź|Ż|Ž',
    'z': 'ź|ż|ž',
    'AE': 'Æ|Ǽ',
    'ss': 'ß',
    'IJ': 'Ĳ',
    'ij': 'ĳ',
    'OE': 'Œ',
    'f': 'ƒ',
  }

  for (var i in conversions) {
    if (i) {
      var re = new RegExp(conversions[i], 'g');
      str = str.replace(re, i);
    }
  }

  return str;
};

/**
 * indexOf Special
 * Like indexOf, but taking accented characters into account
 * @param  {string} str    string where search
 * @param  {string} search string to search
 * @param  {number} index  index to start
 * @return {string}        index of search in str
 */
var indexOfSpecial = function (str, search, index) {
  var compareString;
  var compareReplace;
  // Check required params
  if (typeof str === 'undefined' || typeof search === 'undefined') {
    // throw new Error('both str and search parameters are required');
    console.error('both str and search parameters are required');
  }
  // If strings are empty, there's no index
  if (!str.replace(/\s/g, '').length || !search.replace(/\s/g, '').length) return -1;
  if (typeof index === 'undefined') index = 0;

  // Remove special characters and case size
  compareString = convertAccentedCharacters(str.toLowerCase());
  compareReplace = convertAccentedCharacters(search.toLowerCase());

  // return index of compareReplace in compareString
  return compareString.indexOf(compareReplace, index);
};

/**
 * httpGet
 *
 * get data from url
 * URL example: https://swapi.co/api/people/?format=json
 *
 * @param  {string}   url      valid API url
 * @param  {Function} callback callback
 * @return {void}              return callback function
 */
var httpGet = function (url, callback, sync) {
  var xmlHttp = new XMLHttpRequest();
  if (sync !== true && sync !== 1) sync = 0;
  if (!sync) {
    xmlHttp.onreadystatechange = function () {
      if (xmlHttp.readyState === 4 && xmlHttp.status === 200) {
        callback(xmlHttp.responseText);
      }
    };
  }
  xmlHttp.open('GET', url, !sync); // true for asynchronous
  xmlHttp.send(null);
  if (sync) return xmlHttp.responseText;
};

/**
 * toggleBodyOverflowHidden
 * Add or remove overflow hidden to body and html tags
 *
 * @param {Boolean} hidden If should set overflow as hidden
 */
var toggleBodyOverflowHidden = function (hidden) {
  var html = document.querySelectorAll('body, html');
  var overflowIsHidden = false;

  // Check if hidden is passed and its typeof is boolean
  if (typeof hidden !== 'boolean') {
    // If not, check if body or html has overflow hidden
    Array.prototype.some.call(html, function (el) {
      var styles = window.getComputedStyle(el);
      var overflow = styles.getPropertyValue('overflow');

      // If html or body has overflow hidden
      if (overflow === 'hidden') {
        // set overflowIsHidden as true
        overflowIsHidden = true;
        return;
      }
    });
  } else {
    // if hidden is passed, set overflowIsHidden as opposite of hidden
    overflowIsHidden = !hidden;
  }

  // Toggle overflow hidden
  Array.prototype.forEach.call(html, function (el) {
    if (overflowIsHidden) el.style.overflow = '';
    else el.style.overflow = 'hidden';
  });
};

/**
 * Init Google Map
 * @param  {Function} cb        Callback Function
 * @param  {String}   customKey a custom maps api key
 */
initGoogleMap = function (cb, customKey) {
  var body = document.querySelector('body');
  var script = document.createElement('script');
  var mapKey = customKey || 'AIzaSyDJ6yS2YH19-sndShzPhG1O29LiU9JMof8';
  var baseSrc = 'https://maps.googleapis.com/maps/api/js?v=3.33&libraries=places&key=' + mapKey;
  var hasMapScript = document.querySelector('script[src="' + baseSrc + '"]');

  if (hasMapScript) return;

  // Insert script tag on document
  script.src = baseSrc;
  script.defer = true;
  body.appendChild(script);

  // call callback function
  if (typeof cb === 'function') {
    script.onload = function () {
      return cb();
    };
  }
}

/**
 * Obtém a hash a partir da URL da página
 * @return {String} Hash tratada (sem #)
*/
var getHash = function () {
  var containerId = window.location.hash;
  return (containerId) ? containerId.replace('#', '') : null;
};

/**
 * Obtém a hash como um seletor ID a partir de um URL como string
 * @param  {[type]} url a URL completa
 * @return {String}     Hash tratada como ID (sem # e demais caracteres especiais)
 */
var getHashAsIdFromUrlString = function (url) {
  var hash = url.substr(url.indexOf('#')).replace(/.*(?=#)|\?.*|[^a-zA-Z0-9-_#]/g, '');
  return (hash.length > 1) ? hash : '';
}

/**
 * Verifica se o elemento passado está dentro da viewport
 * https://gomakethings.com/how-to-test-if-an-element-is-in-the-viewport-with-vanilla-javascript/
 * @param {Element} elem elemento a ser verificado
 * @return {Boolean}
*/
var isInViewport = function (elem) {
  var bounding = elem.getBoundingClientRect();
  return (
    bounding.top >= 0 &&
    bounding.left >= 0 &&
    bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
    bounding.right <= (window.innerWidth || document.documentElement.clientWidth)
  );
};

/**
 * Retorna a versão do IE ou -1 caso seja outro navegador
 * https://stackoverflow.com/questions/19999388/check-if-user-is-using-ie-with-jquery/21712356#21712356
 * @return {Boolean}
*/
var detectIE = function () {
  var ua = window.navigator.userAgent;

  var msie = ua.indexOf('MSIE ');
  var trident = ua.indexOf('Trident/');
  var edge = ua.indexOf('Edge/');

  // IE
  if ((msie > 0) || (trident > 0) || (edge > 0)) {
    return true;
  }

  // Outro navegador
  return false;
};

/**
 * Get
 * Request XMLHttp from url
 *
 * @param  {String} url  URL where
 * @return {Promise}     response of request
 */
var get = function (url, progressCallback) {
  // Return a new promise.
  return new Promise(function (resolve, reject) {
    // Do the usual XHR stuff
    var req = new XMLHttpRequest();
    req.open('GET', url);

    req.addEventListener('progress', progressCallback, false);

    req.onload = function () {
      // This is called even on 404 etc
      // so check the status
      if (req.status == 200) {
        // Resolve the promise with the response text
        resolve(req.response);
      } else {
        // Otherwise reject with the status text
        // which will hopefully be a meaningful error
        reject(Error(req.statusText));
      }
    };

    // Handle network errors
    req.onerror = function () {
      reject(Error('Network Error'));
    };

    req.responseType = 'blob';

    // Make the request
    req.send();
  });
};

/**
 * forEach Promise
 * @param  {Array}     items  An array of items to return from promise
 * @param  {Function}  fn     A function that accepts an item from the array and returns a promise.
 * @returns {Promise}
 */
var forEachPromise = function (items, fn) {
  return items.reduce(function (promise, item) {
    // console.log('promise e item: ');
    // console.log(promise);
    // console.log(item);
    return promise.then(function () {
      return fn(item);
    });
  }, Promise.resolve());
};

/**
 * getFilenameFromPath
 *
 * Test:
   var array = [
     'filename.ext',
     'filename.ext?param',
     'filename.ext#hash',
     'path/to/filename.ext',
     'path/to/filename.ext?param',
     'path/to/filename.ext#hash?param',
     'path/to/filename.ext?param#hash',
   ]
   array.map(str => getFilenameFromPath(str))
 *
 * @param  {String} path the path's string
 * @return {String}      filename returned path
 */
var getFilenameFromPath = function (path) {
  return path.replace(/^.*[\\\/]|\?.*|\#.*/g, '');
}

/**
 * Extend
 * @use extend({}, defaultObject, newObject);
 * @param  {Object} target an object
 * @return {Object}        a new object with values of all argument objects
 */
var extend = function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];

    for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }

  return target;
};


/**
 * Debounce
 * @use debounce({}, func, wait, immediate);
 * @param  {Object} target an object
 * @return {Object}        a new object with values of all argument objects
 */
var debounce = function (func, wait) {
  var timeout;

  if (typeof wait === 'undefined') wait = 300;

  return function() {
    var context = this, args = arguments;
    var later = function() {
      timeout = null;
      // if (!immediate) func.apply(context, args);
    };
  // var callNow = immediate && !timeout;
  clearTimeout(timeout);
  timeout = setTimeout(later, wait);
  // if (callNow) func.apply(context, args);
  };
};

/**
 * identifyNotLoadedImages
 * @param  {String} customClass a custom valid className;
 */
var identifyNotLoadedImages = function (customClass) {
  var classname = typeof customClass === 'string' ? customClass : 'bs-not-loaded';

  document.addEventListener('DOMContentLoaded', function () {
    Array.prototype.forEach.call(document.querySelectorAll('img'), function (img) {
      var hasLoaded = img.naturalWidth;

      if (!hasLoaded) {
        // debugger;
        img.classList.add(classname);
      }

      img.onload = function () {
        // debugger;
        this.classList.remove(classname);
      };

      img.onerror = function () {
        // debugger;
        this.classList.add(classname);
      };
    });
  });
};

/**
 * Bs ContentChanger
 */
var BsContentChanger = (function () {
  // Elements
  var elements = {};
  var $ = elements;
  $.body = document.querySelector('body');
  $.selector = document.querySelector('.bs-js-content-changer--selector');
  $.wrapper = document.querySelector('.bs-js-content-changer--wrapper');

  if (!$.selector || !$.wrapper) return;

  $.contents = $.wrapper.children;

  // Config
  var config = {
    contentHiddenClass: 'bs-is-hidden',
    contentDataActive: 'data-content-changer-active',
    contentDataTitle: 'data-content-changer-title',
    contentDataId: 'data-content-changer-id',
  };

  var init = function () {
    buildSelectOptions();
    $.selector.addEventListener('change', function () {
      showContent(this.value);
    });
  };

  var buildSelectOptions = function () {
    var optionsStr = $.selector.innerHTML;
    var optionsArr = [];

    Array.prototype.forEach.call($.contents, function (el) {
      var title = el.getAttribute(config.contentDataTitle);
      var id = el.getAttribute(config.contentDataId);
      optionsArr.push('<option value="' + id + '">' + title + '</option>');
    });

    optionsStr += optionsArr.join('');
    $.selector.innerHTML = optionsStr;
  };

  var showContent = function (contentId) {
    var content = $.wrapper.querySelector('[' + config.contentDataId + '="' + contentId + '"]');
    var currentActive = $.wrapper.querySelector('[' + config.contentDataActive + ']');

    content.classList.remove(config.contentHiddenClass);
    content.setAttribute(config.contentDataActive, '');

    if (currentActive) {
      currentActive.classList.add(config.contentHiddenClass);
      currentActive.removeAttribute(config.contentDataActive);
    }
  };

  return {
    init: init,
  };
}());

/**
 * Init ContentChanger Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-js-content-changer--wrapper').length) {
    BsContentChanger.init();
  }
});

/**
 * Bs Dropdown
 * @return init function
 */
var BsDropdown = function () {
  // Elements
  var elements = {};
  var $ = elements;
  $.body = document.querySelector('body');
  $.toggle = null;
  $.dropdown = null;

  // Config
  var config = {
    dropdownType: null,
    dropdownElement: null,
    toggleActiveClass: 'bs-is-active',
    dropdownActiveClass: 'bs-is-open',
  };

  var init = function (toggle, options) {
    // Check if an element toggle was passed
    if (typeof toggle !== 'undefined') $.toggle = toggle;
    else return;

    // By default, dropdown element is next element sibling of toggle
    $.dropdown = $.toggle.nextElementSibling;

    // Check if options were passed
    if (typeof options !== 'undefined') {
      // config
      if (options.dropdownType) config.dropdownType = options.dropdownType;
      if (options.toggleActiveClass) config.toggleActiveClass = options.toggleActiveClass;
      if (options.dropdownActiveClass) config.dropdownActiveClass = options.dropdownActiveClass;
      // elements
      if (options.dropdownElement) $.dropdown = options.dropdownElement;
    }

    // Return if toggle or dropdown not exists
    if (!$.toggle) return;
    $.toggle.addEventListener('click', toggleDropdown);

    // Close dropdown on click outside
    Array.prototype.forEach.call(document.querySelectorAll('body, html'), function (el) {
      el.addEventListener('click', function (event) {
        if (
          dropdownActive() &&
          // (!$.dropdown.contains(event.target) && dropdownType !== 'filter') &&
          !$.toggle.contains(event.target)) {
          closeDropdown();
          return false;
        }
      });
    });
  };

  var toggleDropdown = function () {
    if (!dropdownActive()) openDropdown();
    else closeDropdown();
  };

  var openDropdown = function () {
    $.dropdown.classList.add(config.dropdownActiveClass);
    $.toggle.classList.add(config.toggleActiveClass);
  };

  var closeDropdown = function () {
    $.dropdown.classList.remove(config.dropdownActiveClass);
    $.toggle.classList.remove(config.toggleActiveClass);
  };

  var dropdownActive = function () {
    return $.dropdown.classList.contains(config.dropdownActiveClass);
  };

  return {
    init: init,
  };
};

/**
 * Init Dropdown Constructor
 * @return {void}
 */
document.addEventListener('DOMContentLoaded', function () {
  var dropdowns = document.querySelectorAll('.bs-js-dropdown--toggle');
  if (dropdowns.length) {
    var dropdown = null;
    Array.prototype.forEach.call(dropdowns, function (el) {
      dropdown = new BsDropdown();
      dropdown.init(el);
    });
  }
});

/**
 * Função para clicar em botões e exibir o conteúdo relacionado
*/
var BsExpandContent = (function () {
  var config = {
    el: null,
    button: null,
    collapseHeight: 300,
    maxHeight: 1000,
    contentHeight: 0,
    collapseClass: 'bs-is-collapsed',
    buttonClass: 'bs-portal-content__expand-button',
    buttonText: 'Ver tudo',
  };

  /**
   * Inicializa a função
   * @param {Object} el a DOM element
  */
  var init = function (el) {
    // check if element exist
    if (!el || typeof el !== 'object') return;
    // check if height is greater than config maxHeight
    if (el.offsetHeight < config.maxHeight) return;

    // set content and button elements to config
    config.el = el;
    config.button = createExpandButton();

    // set content and button elements to config
    el.classList.add(config.collapseClass);
    el.style.height = config.collapseHeight + 'px';
    config.contentHeight = el.height;

    // append button to element
    el.appendChild(config.button);
  };

  /**
   * Create expand Button
   * @return {[type]} [description]
   */
  var createExpandButton = function () {
    var button = document.createElement('button');

    // set button attributes
    button.type = 'button';
    button.innerHTML = config.buttonText;
    button.classList.add(config.buttonClass);

    // add listener to expand Content onClick
    button.addEventListener('click', expandContent);

    return button;
  };

  /**
   * Expand Content
   */
  var expandContent = function () {
    var height = config.el.scrollHeight;
    config.el.style.height = height + 'px';
    config.el.classList.remove(config.collapseClass);
    config.button.remove();
  };

  return {
    init: init,
  };
}());


document.addEventListener('DOMContentLoaded', function () {
  var elements = document.querySelectorAll('.bs-js-expandable-content');

  if (elements.length) {
    Array.prototype.forEach.call(elements, function (el) {
      BsExpandContent.init(el);
    });
  }
});

/**
 * Bs Forms
 * @return init function
 */
var BsForms = (function () {
  // Elements
  var elements = {};
  var $ = elements;
  $.body = document.querySelector('body');
  $.forms = document.querySelectorAll('form');
  $.togglePasswordValue = document.querySelectorAll('.bs-js-toggle-password-value');
  $.toggleInfoValue = document.querySelectorAll('.bs-js-toggle-info-value');
  $.toggleInfoContent = document.querySelector('.bs-info-value');
  $.overlay = document.querySelector('.bs-overlay');
  $.toggleTelMask = document.querySelectorAll('select[data-tel]');
  $.revealTelephone = document.querySelector('.bs-js-reveal-telephone');
  // $.focusCalendar = document.querySelectorAll('input[data-type="datepicker"]');
  $.adaptivePlaceholder = document.querySelectorAll('.bs-form__label--adaptive input, bs-form__label--adaptive textarea');
  $.inputFile = document.querySelectorAll('.bs-form__control--file');
  $.infoActive = 'bs-active';
  $.overlayActive = 'bs-is-visible';
  $.hasFile = 'bs-has-file';

  // Config
  var config = {
    passwordVisibleClass: 'bs-form__password--is-visible',
    adaptivePlaceholderValidClass: 'bs-form__field--not-empty',
    datepicker: {},
    datepickerOptions: {},
  };

  var init = function () {
    if ($.togglePasswordValue.length > 0) {
      Array.prototype.forEach.call($.togglePasswordValue, function (el) {
        el.addEventListener('click', toggleInputPasswordValue);
      });
    }

    if ($.toggleInfoValue.length > 0) {
      Array.prototype.forEach.call($.toggleInfoValue, function (el) {
        el.addEventListener('click', toggleTitleInfoValue);
      });
    }

    if ($.overlay) {
      $.overlay.addEventListener('click', closeTitleInfoValue);
    }

    if ($.revealTelephone) $.revealTelephone.addEventListener('click', revealTelephoneField);

    if ($.toggleTelMask.length > 0) {
      Array.prototype.forEach.call($.toggleTelMask, function (e) {
        e.addEventListener('change', function () {
          var dataTel = this.dataset.tel;
          var valueTel = e.value;
          var input = document.querySelector('input[data-tel=' + dataTel + ']');

          if (valueTel !== 55) {
            InputMasks.destroy(input);
          } else {
            InputMasks.update(input);
          }
        });
      });
    }

    // if ($.focusCalendar.length > 0) {
    //   Array.prototype.forEach.call($.focusCalendar, function (el) {
    //     var inputId = el.getAttribute('id');
    //     var toggleCalendar = el.parentNode.querySelector('.bs-js-toggle-datepicker');

    //     config.datepicker[inputId] = new Pikaday({
    //       bound: true,
    //       field: el,
    //       firstDay: 1,
    //       format: 'DD/MM/YYYY',
    //       i18n: {
    //         previousMonth: 'Mês Anterior',
    //         nextMonth: 'Próximo Mês',
    //         months: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
    //         weekdays: ['Domingo', 'Segunda-Feira', 'Terça-Feira', 'Quarta-Feira', 'Quinta-Feira', 'Sexta-Feira', 'Sábado'],
    //         weekdaysShort: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'],
    //       },
    //       position: 'bottom right',
    //       trigger: toggleCalendar,
    //       minDate: new Date(1900, 1, 1),
    //       maxDate: new Date(2020, 12, 31),
    //       yearRange: [1900, 2020],
    //     });
    //     // el.addEventListener('focus', toggleCalendar.bind(null, el));
    //   });
    // }

    if ($.adaptivePlaceholder.length > 0) {
      Array.prototype.forEach.call($.adaptivePlaceholder, function (el) {
        el.addEventListener('blur', function () {
          if (this.value) this.classList.add(config.adaptivePlaceholderValidClass);
          else this.classList.remove(config.adaptivePlaceholderValidClass);
        });
      });
    }

    if ($.forms.length > 0) {
      Array.prototype.forEach.call($.forms, function (form) {
        onFormReset(form);
      });
    }

    if ($.inputFile.length > 0) {
      Array.prototype.forEach.call($.inputFile, function (field) {
        var input = field.querySelector('input[type="file"]');
        var fake = field.querySelector('.bs-form__field');
        var form = getParent(field, 'bs-form');

        input.addEventListener('change', function (ev) {
          var filepath = ev.target.value;
          if (filepath) {
            fake.innerText = filepath.replace(/^.*\\/, '');
            fake.classList.add($.hasFile);
          } else {
            fake.innerText = fake.getAttribute('data-placeholder');
            fake.classList.remove($.hasFile);
          }
        });
      });
    }
  };

  var toggleTitleInfoValue = function (event) {
    var clickedElem = event.target;
    clickedElem.children[0].classList.toggle($.infoActive);
    $.overlay.classList.add($.overlayActive);
  }

  var closeTitleInfoValue = function () {
    if ($.toggleInfoContent) {
      $.toggleInfoContent.classList.remove($.infoActive);
      $.overlay.classList.remove($.overlayActive);
    }
  }

  var toggleInputPasswordValue = function () {
    var parent = this.parentNode;
    var input = parent.querySelector('input');

    if (input.getAttribute('type') === 'text') {
      parent.classList.remove(config.passwordVisibleClass);
      input.setAttribute('type', 'password');
    } else {
      parent.classList.add(config.passwordVisibleClass);
      input.setAttribute('type', 'text');
    }

    input.focus();
  };

  /* var toggleMaskDDI = function() {
    var dataTel = el.dataset.tel;
    var tel = document.querySelector('input[data-tel='+ dataTel +']');
    console.log('asd');

    if(dataTel != 55) {
      destroy mask
      console.log('DIFERENTE');
    }
  } */

  var revealTelephoneField = function () {
    var aditionalTelephones = document.querySelectorAll('.bs-form__telephone-aditional.bs-is-hidden');
    if (aditionalTelephones.length === 1) {
      aditionalTelephones[0].classList.remove('bs-is-hidden');
      $.revealTelephone.classList.add('bs-is-disabled');
    } else if (aditionalTelephones.length > 0) {
      aditionalTelephones[0].classList.remove('bs-is-hidden');
    }
  };

  var toggleMaskDDI = function () {
    // var dataTel = el.dataset.tel;
    // var tel = document.querySelector('input[data-tel='+ dataTel +']');
    console.log('asd');

    // if (dataTel != 55) {
    //   destroy mask
    //   console.log('DIFERENTE');
    // }
  };

  var toggleCalendar = function (input) {}

  var onFormReset = function (form) {
    form.addEventListener('reset', function () {
      var fakeFileInputs = form.querySelectorAll('span.bs-form__field');
      if (fakeFileInputs.length) {
        Array.prototype.forEach.call(fakeFileInputs, function (fake) {
          fake.innerText = fake.getAttribute('data-placeholder') || '';
          fake.classList.remove($.hasFile);
        });
      }
    });
  }

  return {
    init: init,
  };
}());

/**
 * Init Forms Constructor
 * @return {void}
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelector('form')) {
    BsForms.init();
  }
});

var BsformSteps = (function () {
  var config = {
    buttons: {
      next: document.querySelectorAll('.bs-form--steps .bs-js-form-next'),
      prev: document.querySelectorAll('.bs-form--steps .bs-js-form-prev'),
    },
    classes: {
      activeFieldset: 'bs-form__fieldset--active',
    },
    currentStep: document.querySelector('.bs-js-form-current-step'),
    currentStepInt: 0,
    fieldsets: document.querySelectorAll('.bs-form--steps .bs-form__fieldset'),
    form: document.querySelector('.bs-form--steps'),
    percentage: document.querySelector('.bs-js-form-percentage'),
    progressBar: document.querySelector('.bs-form--steps .bs-js-progress-bar'),
    totalSteps: document.querySelector('.bs-js-form-total-steps'),
    totalStepsInt: 0,
  };

  var init = function () {
    _setTotalSteps();
    _updateCurrentStep();

    Array.prototype.forEach.call(config.buttons.next, function (button) {
      button.addEventListener('click', function (e) {
        e.preventDefault();
        _nextStep(button);
      });
    });

    Array.prototype.forEach.call(config.buttons.prev, function (button) {
      button.addEventListener('click', function (e) {
        e.preventDefault();
        _prevStep(button);
      });
    });
  };

  /**
  * Atualiza o passo atual do formulário
  */
  var _updateCurrentStep = function () {
    var activeFieldset = config.form.querySelector('.' + config.classes.activeFieldset);

    // Transformo o NodeList em um Array
    var fieldsets = Array.prototype.slice.call(config.fieldsets);

    if (fieldsets) {
      // Obtenho a posição (index) do fieldset
      var currentStepInt = fieldsets.indexOf(activeFieldset) + 1;

      // Atualizo o passo do formulário
      config.currentStepInt = currentStepInt;
      config.currentStep.textContent = currentStepInt;
      _updatePercentage();
    }
  };

  /**
  * Define o total de passos do formulário
  */
  var _setTotalSteps = function () {
    var fieldsets = config.fieldsets;
    if (fieldsets && fieldsets.length > 0) {
      config.totalStepsInt = fieldsets.length;
      config.totalSteps.textContent = fieldsets.length;
      _updatePercentage();
    }
  };

  /**
   * Valida o formulário e avança para o próximo passo
   * @param  {Element} button Botão para avançar um passo
   */
  var _nextStep = function (button) {
    var currentFieldset = getParents(button, 'bs-form__fieldset', true)[0];
    var nextFieldset = currentFieldset.nextElementSibling;
    var isFormOk = BsFormValidate.validateForm(currentFieldset);
    if (isFormOk) _switchFieldset(nextFieldset);
  };

  /**
   * Volta um passo no formulário
   * @param  {Element} button Botão para voltar um passo
   */
  var _prevStep = function (button) {
    var currentFieldset = getParents(button, 'bs-form__fieldset', true)[0];
    var prevFieldset = currentFieldset.previousElementSibling;
    if (prevFieldset) _switchFieldset(prevFieldset);
  };

  /**
   * Esconde os fieldsets e exibe apenas o atual
   * @param  {Element} fieldset Fieldset que será exibido
   */
  var _switchFieldset = function (fieldset) {
    Array.prototype.forEach.call(config.fieldsets, function (fs) {
      fs.classList.remove(config.classes.activeFieldset);
    });
    fieldset.classList.add(config.classes.activeFieldset);
    _updateCurrentStep();
  };

  /**
   * Atualiza o percentual de progresso
   */
  var _updatePercentage = function () {
    if (config.totalStepsInt > 0) {
      // Calculo o percentual de progresso
      // Diminui 1 para iniciar com 0%
      var percentage = parseInt((((config.currentStepInt - 1) * 100) / config.totalStepsInt), 10);
      config.percentage.textContent = percentage;
      config.progressBar.value = percentage;
    }
  };

  return {
    init: init,
  };
}());

/**
 * Init BsformSteps constructor
 * @return {void} BsformSteps.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-form--steps').length) {
    BsformSteps.init();
  }
});

/**
 * Form Validate (anchor)
 */
var BsFormValidate = (function () {
  // Elements
  var elements = {};
  var $ = elements;

  $.forms = document.querySelectorAll('form');

  if (!$.forms.length) return;

  // Config
  var config = {
    errorMessageClass: 'bs-form-error__message',
    labelClass: 'bs-form__label',
    validate: {
      default: {
        pattern: /(?!^ +$)^.+$/g,
        error: 'Esse campo é de preenchimento obrigatório.',
      },
      nome: {
        pattern: /[\w\s]+/g,
        error: 'Você deve digitar seu nome completo.',
      },
      cpf: {
        pattern: /([0-9]{3}[.]?[0-9]{3}[.]?[0-9]{3}[-]?[0-9]{2})/g,
        error: 'O CPF é inválido',
      },
      cnpj: {
        pattern: /([0-9]{2}[.]?[0-9]{3}[.]?[0-9]{3}[/]?[0-9]{4}[-]?[0-9]{2})/g,
        error: 'O CNPJ é inválido',
      },
      tel: {
        // https://regexr.com/3m3s2
        pattern: /[(]?[1-9]{2}[)]?[\s]?[2-9][0-9]{3,4}[-\s]?[1-9]{4}/g,
        error: 'O telefone é inválido',
      },
      'activation-code': {
        pattern: /[0-9]{6}/g,
        error: 'O código é inválido',
      },
    },
    validatedCustomEvent: function () {
      return new Event('formIsValid')
    },
    validInputs: 'input, textarea',
    inputOptions: {
      // string
      error: null,
      // regex
      pattern: null,
      // string
      type: null,
      // function
      validation: null,
      // boolean
      noState: false,
      // // boolean
      // validateOnInput: false,
      // // boolean
      // cleanOnInput: false,
    },
  };

  /**
   * [description]
   */
  var init = function () {
    Array.prototype.forEach.call($.forms, function (form) {
      var validateCallback = form.getAttribute('data-validate-callback');
      form.addEventListener('submit', function (event) {
        // Se o formulário não for válido, previne o submit
        if (!validateForm(this)) {
          event.preventDefault();
          // debugger;
          // Se o formulário for válido e tiver um callback
          // customizado, também previne o submit
        } else if (validateCallback) {
          event.preventDefault();
          this.dispatchEvent(config.validatedCustomEvent);
          // debugger;
        }
      });
    });
  };

  /**
   * [description]
   * @param  {[type]} form [description]
   * @return {[type]}      [description]
   */
  var validateForm = function (form) {
    var inputs = form.querySelectorAll(config.validInputs);
    var output = true;

    Array.prototype.forEach.call(inputs, function (input) {
      cleanState(input);
      if (!validateInput(input)) output = false;
      input.addEventListener('blur', validateInput.bind(null, input));
    });

    return output;
  };

  /**
   * [description]
   * @param  {[type]} input   [description]
   * @param  {[type]} options [description]
   * @return {[type]}         [description]
   */
  var validateInput = function (input, options) {
    // custom settings
    var settings = {};
    var inlineSettings = input.getAttribute('data-validate-options') || null;

    // if exists, extend inline options in default settings
    if (inlineSettings) settings = extend(config.inputOptions, options);

    // check if options has an object
    if (typeof options !== 'object') options = {};
    // extend options object properties in settings
    else settings = extend(config.inputOptions, options);

    // set loading state if settings has custom validation function
    if (settings.validation === 'function') setState(input, 'loading');

    // Set error state if input is invalid
    if (!inputIsValid(input, settings) && !settings.noState) {
      // debugger;
      setState(input, 'invalid', settings.error);
      return false;
    }

    if (!settings.noState) {
      // debugger;
      // Set success state if input is valid
      setState(input, 'valid');
    }

    return true;
  };

  /**
   * [description]
   * @param  {[type]} input    [description]
   * @param  {[type]} settings [description]
   * @return {[type]}          [description]
   */
  var inputIsValid = function (input, settings) {
    // if input is required
    var isRequired =
      input.getAttribute('required') === '' ||
      input.getAttribute('required') === 'required';

    if (!isRequired) return true;

    // type of the validation
    var type = input.getAttribute('data-validate-type') || settings.type;

    // custom pattern (regex)
    var pattern =
      input.getAttribute('data-validate-pattern') ||
      input.getAttribute('pattern') ||
      settings.pattern;

    // input value
    var value = input.value;

    // default pattern by type
    var typeValidate = config.validate[type] || [];

    // if input is valid or not
    var output = false;

    // check if a string matches a regex pattern
    var checkRegex = function (string, regex) {
      return string.match(regex);
    };

    // if is not required, validation is not needed
    // if has not value, validation is not possible
    if (!isRequired || !value) return;

    // if input has custom data to validate
    if (settings.validation) {
      output = settings.validation(value);
      // if input has a type defined and that has a default pattern
    } else if (typeValidate.pattern) {
      output = checkRegex(value, typeValidate.pattern);
    // if input has not a type defined but a custom pattern
    } else if (pattern) {
      output = checkRegex(value, pattern);
    // if input is checkbox
    } else if (input.type === 'checkbox') {
      output = input.checked;
    // if input has not a type or a pattern, but even so is required
    } else {
      output = value.trim();
    }

    return output;
  };

  /**
   * [description]
   * @param  {[type]} input   [description]
   * @param  {[type]} state   [description]
   * @param  {[type]} message [description]
   */
  var setState = function (input, state, message) {
    // var label = getParents(input, config.labelClass);
    var inputType = input.getAttribute('data-validate-type');
    var errorMessage = document.createElement('span');

    if (typeof message !== 'string') message = null;

    cleanState(input);

    errorMessage.classList.add(config.errorMessageClass);
    errorMessage.innerHTML = (
      config.validate[inputType]) ?
      config.validate[inputType].error :
      config.validate.default.error;

    errorMessage.innerHTML = message || errorMessage.innerHTML;

    // debugger;
    input.setAttribute('data-validation-state', state);

    if (state === 'invalid') {
      if (input.type === 'checkbox' || input.type === 'radio') {
        input.nextElementSibling.appendChild(errorMessage);
      } else {
        insertAfter(errorMessage, input);
      }
      // debugger;
    }
  };

  /**
   * [description]
   * @param  {[type]} input [description]
   * @return {[type]}       [description]
   */
  var getState = function (input) {
    return input.getAttribute('data-validation-state');
  };

  /**
   * [description]
   * @param  {[type]} input [description]
   */
  var cleanState = function (input) {
    var parent = input.parentNode;
    var message = parent.querySelector('.bs-form-error__message');
    input.removeAttribute('data-validation-state');

    if (message) parent.removeChild(message);
  };

  /**
   * insertAfter
   * @param  {[type]} newNode       [description]
   * @param  {[type]} referenceNode [description]
   */
  var insertAfter = function (newNode, referenceNode) {
    referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
  };

  /**
   * Extend objects
   * @param  {Object} objA An object
   * @param  {Object} objB Another object
   * @return {Object}      A copy of objectA extended with the properties from objectB
   */
  var extend = function (objA, objB) {
    var objC = {};
    for (var keyA in objA) {
      if (objA.hasOwnProperty(keyA)) {
        objC[keyA] = objA[keyA];
      }
    }

    for (var keyB in objB) {
      if (objB.hasOwnProperty(keyB)) {
        objC[keyB] = objB[keyB];
      }
    }
    return objC;
  };

  return {
    init: init,
    validateInput: validateInput,
    validateForm: validateForm,
    getState: getState,
    setState: setState,
  };
}());

/**
 * Init BsFormValidate Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-js-validate').length) {
    BsFormValidate.init();
  }
});

/**
 * Bs Picture Parallax Effect
 * Parallax effect for full background images with html picture/img tag
 *
 * Use exemple:
 * <picture class="image-container-class">
 *   <img src="path/to/image.jpg">
 * </picture>
 *
 * TODO: jquery extend like function to merge default/options
 *
 */
var BsPictureParallax = (function (document) {
  // Elements
  var elements = {};
  var $ = elements;
  $.parallax = document.querySelectorAll('.bs-js-picture-parallax');
  if (!$.parallax.length) return;

  // Config
  var config = {
    speed: 1,
  };

  var init = function (options) {
    if (options && options.speed) config.speed = options.speed;

    Array.prototype.forEach.call($.parallax, function (el) {
      document.addEventListener('scroll', parallax.bind(null, el));
    });
  };
  var parallax = function (imageContainer) {
    var speed = (config.speed > 1 || config.speed <= 0) ? 1 : config.speed;
    var image = imageContainer.querySelector('img');
    var imageH = image.offsetHeight;
    var imageContainerY = imageContainer.getBoundingClientRect().top;
    var imageContainerH = imageContainer.offsetHeight;
    var winY = (
      window.pageYOffset !== undefined
    ) ?
      window.pageYOffset :
      (
        document.documentElement ||
        document.body.parentNode || document.body
      ).scrollTop;
    var winH = window.innerHeight;
    var scrollDistance = winH + imageContainerH;
    var imageSangria = imageH - imageContainerH;
    var topPxPerScrollPx = imageSangria / scrollDistance;
    var imageTopPosition = (topPxPerScrollPx * (imageContainerY - winH)) * speed;

    // console.log('---------------------');
    // console.log('imageContainerY: ' + imageContainerY);
    // console.log('winY: ' + winY);
    // console.log('winH: ' + winH);
    // console.log('imageContainerH: ' + imageContainerH);
    // console.log('scrollDistance: ' + scrollDistance);
    // console.log('---------------------');
    // console.log('speed: ' + speed);
    // console.log('imageSangria: ' + imageSangria);
    // console.log('topPxPerScrollPx: ' + topPxPerScrollPx);
    // console.log('imageTopPosition: ' + imageTopPosition);

    image.style.top = imageTopPosition + 'px';
  };

  var offset = function (el) {
    var rect = el.getBoundingClientRect();

    return {
      top: rect.top + document.body.scrollTop,
      left: rect.left + document.body.scrollLeft,
    };
  };

  return {
    init: init,
  };
}(document));

/**
 * Init Header Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelector('.bs-js-picture-parallax')) {
    BsPictureParallax.init();
  }
});

/**
 * Bs Input Masks (anchor)
 */
var InputMasks = (function () {
  // Elements
  var elements = {};
  var $ = elements;
  $.body = document.querySelector('body');
  $.input = document.querySelectorAll('.bs-js-inputmask, input');

  // Config
  var config = {
    masks: {
      cpf: {
        mask: '000.000.000-00',
      },
      cnpj: {
        mask: '00.000.000/0000-00',
      },
      'cpf-cnpj': {
        mask: [
          {
            mask: '000.000.000-00',
          },
          {
            mask: '00.000.000/0000-00',
          },
        ],
      },
      rg: {
        mask: '00.000.000-[*]',
      },
      bin: {
        mask: '0000 00',
      },
      'activation-code': {
        mask: '000000',
      },
      cartao: {
        mask: '0000 0000 0000 0000',
      },
      cep: {
        mask: '00.000-000',
      },
      tel: {
        mask: [
          {
            mask: '(00) 0000-0000',
          },
          {
            mask: '(00) [0]0000-0000',
          },
        ],
      },
      data: {
        mask: [
          {
            mask: '00/00/0000',
          },
          // {
          //   mask: Date,
          //   // não funciona com / ou -
          //   pattern: 'd.m.Y',
          //   groups: {
          //     d: new IMask.MaskedPattern.Group.Range([1, 31]),
          //     m: new IMask.MaskedPattern.Group.Range([1, 12]),
          //     Y: new IMask.MaskedPattern.Group.Range([1900, 9999]),
          //   },
          //   lazy: false,
          // },
        ],
      },
      datarange: {
        mask: [
          {
            mask: '00/00/0000 - 00/00/0000',
          },
          // {
          //   mask: Date,
          //   // não funciona com / ou -
          //   pattern: 'd.m.Y',
          //   groups: {
          //     d: new IMask.MaskedPattern.Group.Range([1, 31]),
          //     m: new IMask.MaskedPattern.Group.Range([1, 12]),
          //     Y: new IMask.MaskedPattern.Group.Range([1900, 9999]),
          //   },
          //   lazy: false,
          // },
        ],
      },
      dia: {
        mask: Number,
        min: 0,
        max: 31,
      },
      mes: {
        mask: Number,
        min: 0,
        max: 12,
      },
      ano: {
        mask: Number,
        min: 0,
        max: 9999,
      },
      /* Não utilizado, versão com campo de digitação errada
        dimdim: {
          mask: '[000.000.000.000.00]0,00',
        },
      */
      dinheiro: {
        preffix: '',
        suffix: '',
        fixed: true,
        fractionDigits: 2,
        decimalSeparator: ',',
        thousandsSeparator: '.',
        autoCompleteDecimal: false,
      },
      num: {
        mask: '0',
      },
      porcentagem: {
        mask: '0[00]%',
      },
      altura: {
        mask: '[000],`[00]',
      },
      peso: {
        mask: '[000],`[00]',
      },
      placacarro: {
        mask: 'aaa{-}0000',
      },
      ddd: {
        mask: '00',
      },
    },
    teste: {}
  };

  var init = function () {
    Array.prototype.forEach.call($.input, function (el) {
      maskPattern(el);
    });
  };

  var maskPattern = function (element) {
    var maskConfig = config.masks[element.dataset.mask];
    var cb;
    var mask;

    if (!maskConfig) return;

    cb = maskConfig.cb ? maskConfig.cb : null;

    if (element.dataset.mask === 'dinheiro') {
      element.value = SimpleMaskMoney.setMask(element, maskConfig);
    } else {
      if (!maskConfig.mask) return;
      mask = new IMask(element, maskConfig);
    }

    config.teste[element.getAttribute('id')] = mask;

    if (typeof cb === 'function') cb(element, mask, maskConfig);
  };

  var destroyMask = function(el) {
    var id = el.getAttribute('id');
    var unmasked =  config.teste[id].unmaskedValue;

    config.teste[id].destroy();
    el.value = unmasked;
  }

  var updateMask = function(el) {
    maskPattern(el);
  }

  var createMask = function(el) {
    maskPattern(el);
  }

  return {
    config: config,
    create: createMask,
    destroy: destroyMask,
    init: init,
    update: updateMask
  };
}());

/**
 * Init InputMasks Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-js-inputmask, input').length) {
    InputMasks.init();
  }
});

/**
 * Cria uma nova instância do Google Maps para ser exibido na página
 * @param {Element} mapElement Elemento que irá exibir o mapa.
 * @param {Object} options Objeto com as opções de configuração do mapa.
 * Contém locations e mapOptions
 */

/* var options = {
  // altura do mapa em pixels
  mapHeight: 500,
  locations: [
    {
      // id do elemento HTML relacionado à localidade exibida no mapa
      id: 0,
      // latitude da localidade
      lat: -25.428183,
      // longitude da localidade
      lng: -49.267073,
      // função usada ao clicar no marker no mapa
      fn: function () { return someFunction(); },
      // pequeno modal exibido ao clicar no marker no mapa
      infoWindow: {
        show: false,
        title: 'Título 1',
      },
    },
    {
      id: 1,
      lat: -25.430209,
      lng: -49.264646,
      fn: function () { return someFunction(0); },
      infoWindow: {
        show: false,
        title: 'Título 2',
      },
    },
    {
      id: 2,
      lat: -25.431762,
      lng: -49.270385,
      fn: function () { return someFunction(0); },
      infoWindow: {
        show: false,
        title: 'Título 3',
      },
    },
  ],
  // objeto com opções do Google Maps
  mapOptions: {
    zoom: 14,
    center: new google.maps.LatLng(-25.427702, -49.265159),
    mapTypeId: google.maps.MapTypeId.ROADMAP,
  },
};

BsMaps.init(mapElement, options); */

var BsMaps = (function () {
  var config = {
    // indica se o marker está selecionado
    selectedMarker: false,
    infoWindow: null,
    icons: {
      path: 'assets/img/icons/',
      marker: 'map-marker.svg',
      selectedMarker: 'map-marker-selected.svg',
      size: {
        height: 32,
        width: 20,
      },
    },
    map: null,
    options: null,
    bounds: null,
    geocoder: null,
  };

  var init = function (mapElement, options) {

    if (options) config.options = options;
    if (mapElement) {
      // Cria uma nova instância do Google Maps
      config.map = createMap(mapElement, options.mapOptions);
      config.bounds = new google.maps.LatLngBounds();
      config.geocoder = new google.maps.Geocoder();
      window.mapTeste = config.map;

      // Define a altura do mapa
      if (options.mapHeight) {
        mapElement.style.height = options.mapHeight + 'px';
      }

      // Insere os marcadores
      if (options.locations.length) {
        options.locations.forEach(function (location) {
          if (location.address) {
            config.geocoder.geocode({
              address: location.address + ', Brasil',
              region: 'BR',
            }, function (results, status) {
              if (status == google.maps.GeocoderStatus.OK) {
                if (results.length) {
                  var latitude = results[0].geometry.location.lat();
                  var longitude = results[0].geometry.location.lng();

                  location.lat = latitude;
                  location.lng = longitude;

                }
              }
              addMarker(config.map, location);
            });
          } else {
            addMarker(config.map, location);
          }
        });
      }
    }
  };

  var ajustCenterZoom = function () {
    var locations = config.options.locations;
    if (locations.length > 1) {
      if (config.bounds) {
        config.map.fitBounds(config.bounds); // auto-zoom
        config.map.panToBounds(config.bounds); // auto-center
      }
    } else {
      config.map.setCenter(new google.maps.LatLng(locations[0].lat, locations[0].lng));
    }
  };

  /**
   * Cria uma nova instância do mapa
   * @param {Element} mapElement DOM element do mapa
   * @param {Object} mapOptions Opções de inicialização do Google Maps
   * https://developers.google.com/maps/documentation/javascript/tutorial#MapOptions
   * @return {Object} Instância do Google Maps
  */
  var createMap = function (mapElement, mapOptions) {
    return new google.maps.Map(mapElement, mapOptions);
  };

  /**
   * Adiciona um marker (pin) no mapa
   * @param {Object} map      Instância do Google Maps
   * @param {Array}  location Título, latitude e longitude do marker
   * @param {String} icon     Imagem
  */
  var addMarker = function (map, location, icon) {
    var marker;
    var infoWindow = null;

    if (icon) config.icons.marker = icon;

    marker = new google.maps.Marker({
      position: new google.maps.LatLng(location.lat, location.lng),
      map: map,
      icon: {
        url: config.icons.path + config.icons.marker,
        // usar scaledSize em todo setIcon()
        scaledSize: new google.maps.Size(config.icons.size.width, config.icons.size.height),
      },
    });

    config.bounds.extend(new google.maps.LatLng(location.lat, location.lng));
    ajustCenterZoom();

    if (location.infoWindow) {
      infoWindow = new google.maps.InfoWindow({
        content: location.infoWindow.title,
      });
    }

    if (location.fn || infoWindow) {
      marker.addListener('click', function () {
        if (infoWindow) {
          updateActiveInfoWindow(infoWindow);
          infoWindow.close();
          infoWindow.open(map, marker);
        }

        if (location.fn) {
          location.fn();
        }

        _toggleSelectedMarkerIcon(this);
      });
    }
  };

  // Deixa ou retira o Marker como selecionado
  var _toggleSelectedMarkerIcon = function (marker) {
    if (config.selectedMarker) {
      config.selectedMarker.setIcon({
        url: config.icons.path + config.icons.marker,
        scaledSize: new google.maps.Size(config.icons.size.width, config.icons.size.height),
      });
    }

    marker.setIcon({
      url: config.icons.path + config.icons.selectedMarker,
      scaledSize: new google.maps.Size(config.icons.size.width, config.icons.size.height),
    });
    config.selectedMarker = marker;
  };

  // Cria uma nova InfoWindow
  var updateActiveInfoWindow = function (infoWindow) {
    if (config.infoWindow) config.infoWindow.close();
    config.infoWindow = infoWindow;
  };

  /**
   * Obtém a localização atual do usuário via HTML5
   * @param {Object} map Instância do Google Maps
   * @return {Array} Latitude e longitude
  */
  var getUserLocation = function (map) {
    if (navigator.geolocation) {
      return navigator.geolocation.getCurrentPosition(function (position) {
        return {
          lat: position.coords.latitude,
          lng: position.coords.longitude,
        };
      }, function () {
        // handleLocationError(map, true, map.getCenter());
        return 'Erro: O serviço de geolocalização falhou.';
      });
    } else {
      return 'Erro: O seu navegador não possui suporte à geolocalização.';
      // Browser doesn't support Geolocation
      // handleLocationError(map, false, map.getCenter());
    }
  };

  var getCoordinatesFromAddress = function (address) {
    var geocoder = new google.maps.Geocoder();

    geocoder.geocode({ address: address }, function (results, status) {
      if (status === google.maps.GeocoderStatus.OK) {
        var pos = {
          lat: results[0].geometry.location.lat(),
          lng: results[0].geometry.location.lng(),
        };
        return pos;
      }
    });
  };


  return {
    init: init,
    addMarker: addMarker,
    createMap: createMap,
    getCoordinatesFromAddress: getCoordinatesFromAddress,
  };
}());

if (!Object.values) {
  Object.values = function (o) {
    return Object.keys(o).map(function (k) {
      return o[k];
    });
  };
}

// Use in LightPick
if (!Object.assign) {
  Object.defineProperty(Object, 'assign', {
    enumerable: false,
    configurable: true,
    writable: true,
    value: function(target) {
      'use strict';
      if (target === undefined || target === null) {
        throw new TypeError('Cannot convert first argument to object');
      }

      var to = Object(target);
      for (var i = 1; i < arguments.length; i++) {
        var nextSource = arguments[i];
        if (nextSource === undefined || nextSource === null) {
          continue;
        }
        nextSource = Object(nextSource);

        var keysArray = Object.keys(Object(nextSource));
        for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {
          var nextKey = keysArray[nextIndex];
          var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);
          if (desc !== undefined && desc.enumerable) {
            to[nextKey] = nextSource[nextKey];
          }
        }
      }
      return to;
    }
  });
};

(function (arr) {
  arr.forEach(function (item) {
    if (item.hasOwnProperty('remove')) {
      return;
    }
    Object.defineProperty(item, 'remove', {
      configurable: true,
      enumerable: true,
      writable: true,
      value: function remove() {
        this.parentNode.removeChild(this);
      }
    });
  });
})([Element.prototype, CharacterData.prototype, DocumentType.prototype]);

if (!Array.prototype.includes) {
  Object.defineProperty(Array.prototype, 'includes', {
    value: function(searchElement, fromIndex) {

      // 1. Let O be ? ToObject(this value).
      if (this == null) {
        throw new TypeError('"this" is null or not defined');
      }

      var o = Object(this);

      // 2. Let len be ? ToLength(? Get(O, "length")).
      var len = o.length >>> 0;

      // 3. If len is 0, return false.
      if (len === 0) {
        return false;
      }

      // 4. Let n be ? ToInteger(fromIndex).
      //    (If fromIndex is undefined, this step produces the value 0.)
      var n = fromIndex | 0;

      // 5. If n ≥ 0, then
      //  a. Let k be n.
      // 6. Else n < 0,
      //  a. Let k be len + n.
      //  b. If k < 0, let k be 0.
      var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);

      // 7. Repeat, while k < len
      while (k < len) {
        // a. Let elementK be the result of ? Get(O, ! ToString(k)).
        // b. If SameValueZero(searchElement, elementK) is true, return true.
        // c. Increase k by 1.
        // NOTE: === provides the correct "SameValueZero" comparison needed here.
        if (o[k] === searchElement) {
          return true;
        }
        k++;
      }

      // 8. Return false
      return false;
    }
  });
}

// // Use in LightPick
// if (!String.prototype.startsWith) {
//   String.prototype.startsWith = function(searchString, position) {
//     position = position || 0;
//     return this.indexOf(searchString, position) === position;
//   };
// };
/**
 * Shift-select Multiple Items
 * Select all checkboxes between lastChecked and currentChecked if
 * shiftKey is pressed during click
 *
 * @Use the function receive an array of checkboxes
 * and active the shiftSelect only for this array
 *
 * @param {Array} checkboxes  an array of checkbox DOM elements
 */
var shiftSelectMultipleCheckboxes = function (checkboxes) {
  var config = {
    lastInputChecked: null,
  };

  /**
   * Init
   */
  var init = function () {
    if (checkboxes.length) {
      Array.prototype.forEach.call(checkboxes, function (checkbox) {
        checkbox.addEventListener('click', shiftSelect);
      });
    }
  };

  /**
   * shift Select on Change
   * @param  {Object} e  a click event in a checkbox
   */
  var shiftSelect = function (e) {
    var input = e.target;
    var start = null;
    var end = null;

    if ((input || {}).type !== 'checkbox') return;

    if (!config.lastInputChecked) {
      config.lastInputChecked = input;
      return;
    }

    if (e.shiftKey) {
      start = Array.prototype.indexOf.call(checkboxes, config.lastInputChecked);
      end = Array.prototype.indexOf.call(checkboxes, input);

      if (Math.abs(start - end) > 1) {
        Array.prototype.slice.apply(checkboxes, [
          Math.min(start, end),
          Math.max(start, end) + 1,
        ]).forEach(function (item) {
          item.checked = true;
        });
      }
    }

    config.lastInputChecked = input;
  };

  init();
};

/**
 * Init Modal Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  var selectors = document.querySelectorAll('.bs-js-shift-select');
  if (selectors.length) {
    Array.prototype.forEach.call(selectors, function (selection) {
      var checkboxes = selection.querySelectorAll('input[type="checkbox"]');
      if (checkboxes.length) {
        shiftSelectMultipleCheckboxes(checkboxes);
      }
    });
  }
});

/**
 * Sort table
 *
 * Reference:
 * https://github.com/tristen/tablesort
 */
var BsTableSort = (function () {
  var init = function (table) {
    if (table) Tablesort(table);
  };

  return {
    init: init,
  };
}());

/**
 * Multiline text Ellipsis (shave.js)
 *
 * Reference:
 * https://github.com/dollarshaveclub/shave
 */
var BsTextEllipsis = (function () {
  // Config
  var config = {
    element: '',
    maxHeight: null,
  };

  var init = function (options) {
    config.element = options.element;
    config.maxHeight = options.maxHeight;
    ellipsis();
  };

  var ellipsis = function () {
    shave(config.element, config.maxHeight);
  };

  return {
    init: init,
  };
}());

/**
 * Bs Text Typer
 *
 * Reference:
 * https://codepen.io/hi-im-si/pen/DHoup
 * [TODO] Improve: https://codepen.io/danielgroen/pen/VeRPOq
 * [TODO] Extend: https://github.com/nk-o/jarallax/blob/master/src/jarallax.js#L206
 */
var BsTextType = (function () {
  // Config
  var config = {
    textArr: null,
    el: null,
    loopNum: 0,
    pauseTime: 2000,
    writeTime: 100,
    delTime: 50,
    txt: '',
    tick: tick,
    isDeleting: false,
    fullTxt: '',
    tag: '',
    tagName: 'span',
    tagClass: '',
  };

  var init = function (options) {
    config.textArr = options.textArr;
    config.el = options.el;
    config.pauseTime = options.pauseTime;
    config.el.innerHTML = '<' + config.tagName + ' class="bs-texttype ' + config.tagClass + '"></' + config.tagName + '>';
    config.tag = config.el.querySelector('.bs-texttype');
    tick();
  };

  var tick = function () {
    var delta = config.writeTime;
    var i = config.loopNum % config.textArr.length;

    config.fullTxt = config.textArr[i];

    if (config.isDeleting) {
      config.txt = config.fullTxt.substring(0, config.txt.length - 1);
    } else {
      config.txt = config.fullTxt.substring(0, config.txt.length + 1);
    }

    config.tag.innerHTML = config.txt;

    if (config.isDeleting) { delta = config.delTime; }

    if (!config.isDeleting && config.txt === config.fullTxt) {
      delta = config.pauseTime;
      config.isDeleting = true;
    } else if (config.isDeleting && config.txt === '') {
      config.isDeleting = false;
      config.loopNum++;
      delta = config.writeTime;
    }

    setTimeout(function () {
      tick();
    }, delta);
  };

  return {
    init: init,
  };
}());

/**
 * Função para clicar em botões e exibir o conteúdo relacionado
*/
var BsToggleContent = function () {
  var config = {
    options: {
      // Botões que, ao serem clicados, exibirão o respectivo container de conteúdo
      buttons: [],
      // Containeres de conteúdo
      containers: [],
      // Classe CSS indicando que o botão está ativo
      activeButtonClass: '',
      // Classe CSS para exibir o container
      activeContainerClass: '',
      // Método de ativação da função: 'click' ou 'hashChange'
      method: '',
      // Se verdadeiro, a página irá dar scroll até o
      // conteúdo ao disparar o evento de showContainerContent
      scrollToContent: false,
    },
  };

  /**
   * Inicializa a função
   * @param {Object} options opções de configuração
  */
  var init = function (options) {
    if (options.buttons.length > 0 && options.containers.length > 0) {
      config = options;
      _showContentOnPageLoad();

      if (config.method === 'click') {
        Array.prototype.forEach.call(config.buttons, function (button) {
          button.addEventListener('click', function (e) {
            e.preventDefault();

            var containerId = button.dataset.contentButton;
            if (containerId) {
              _deactivateButtons();
              _activateButton(button);
              showContainerContent(containerId);
              if (config.scrollToContent) _scrollToContent();
            }
          });
        });
      } else if (config.method === 'hashChange') {
        window.addEventListener('hashchange', function () {
          var containerId = getHash();
          if (containerId) {
            showContainerContent(containerId);
            if (config.scrollToContent) _scrollToContent();
          }
        });
      }
    }
  };

  var _scrollToContent = function () {
    var scroll = new SmoothScroll();
    var hash = getHash();

    if (hash) {
      var containerContent = document.querySelector('[data-content-container="' + hash + '"]');
      if (containerContent) {
        scroll.animateScroll(containerContent, 0, {
          updateURL: false,
        });
      }
    }
  };

  /**
   * Exibe o conteúdo caso a hash da URL corresponda a um conteúdo existente na página
  */
  var _showContentOnPageLoad = function () {
    var containerId = getHash();
    if (containerId) {
      var content = document.querySelector('[data-content-container="' + containerId + '"]');
      if (content) {
        hideContainerContent(config.containers);
        showContainerContent(containerId);
      }
    }
  };

  /**
   * Ativa o botao clicado
   * @param {Element} button Botão que receberá a classe ativa
   * @param {String} activeButtonClass Classe CSS indicando que o botão está ativo
  */
  var _activateButton = function (button) {
    button.classList.add(config.activeButtonClass);
  };

  /**
   * Remove classe de ativa de todos os botões
   * @param {Array} buttons Botões que, ao serem clicados, exibirão o respectivo
   * container de conteúdo
   * @param {String} activeButtonClass Classe CSS indicando que o botão está ativo
  */
  var _deactivateButtons = function () {
    Array.prototype.forEach.call(config.buttons, function (button) {
      button.classList.remove(config.activeButtonClass);
    });
  };

  /**
   * Exibe o conteúdo do container
   * @param {String} containerId Id do container a ser exibido
  */
  var showContainerContent = function (containerId) {
    if (containerId) {
      hideContainerContent(config.containers, config.activeContainerClass);

      var content = document.querySelector('[data-content-container="' + containerId + '"]');
      if (content) content.classList.add(config.activeContainerClass);
    }
  };

  /**
   * Esconde todos os containeres de conteúdo
   * @param {Array} containers Containeres de conteúdo
   * @param {String} activeContainerClass Classe CSS utilizada para exibir o conteúdo
  */
  var hideContainerContent = function (containers) {
    Array.prototype.forEach.call(containers, function (container) {
      container.classList.remove(config.activeContainerClass);
    });
  };

  return {
    init: init,
    hideContainers: hideContainerContent,
    showContainer: showContainerContent,
  };
};


document.addEventListener('DOMContentLoaded', function () {
  var elem = document.querySelector('.bs-js-tab--default');

  if (elem) {
    var buttons = elem.querySelectorAll('[data-content-button]');
    var containers = elem.querySelectorAll('[data-content-container]');

    var options = {
      buttons: buttons,
      containers: containers,
      activeButtonClass: 'bs-is-active',
      activeContainerClass: 'bs-is-active',
      method: 'click',
    };

    var newToggleContent = new BsToggleContent();
    newToggleContent.init(options);
  }
});


/**
 * Youtube Player Iframe API
 */
var BsYTPlayers = (function () {
  // Elements
  var config = {
    videos: {},
  };

  var init = function (videos) {
    if (!videos.length) return;
    config.videos = Array.prototype.reduce.call(videos, function (obj, video) {
      var cryptoObj = window.crypto || window.msCrypto; // for IE 11
      video.id = cryptoObj.getRandomValues(new Uint32Array(1))[0];
      obj[video.id] = {
        el: video,
        player: null,
      };
      return obj;
    }, {});

    includeIframeAPI();
  };

  /**
   * Include Iframe API
   * Loads the IFrame Player API code asynchronously.
   */
  var includeIframeAPI = function () {
    var tag = document.createElement('script');
    tag.src = 'https://www.youtube.com/iframe_api';
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
  };

  window.onYouTubeIframeAPIReady = function () {
    BsYTPlayers.setPlayers();
  };

  var setPlayers = function () {
    Object.keys(config.videos).forEach(function (key) {
      var item = config.videos[key];
      item.player = new YT.Player(key, {
        // events: {
        //   onReady: function (event) {
        //     debugger;
        //   }
        // }
      });
    });
  };

  var getPlayer = function (videoId) {
    if (config.videos[videoId]) {
      return config.videos[videoId].player;
    }
  };

  return {
    init: init,
    setPlayers: setPlayers,
    getPlayer: getPlayer,
  };
}());

/**
 * Init BsFormValidate Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  var videos = document.querySelectorAll('.bs-video');
  if (videos.length) {
    BsYTPlayers.init(videos);
  }
});

/**
 * Bs Accessibility
 *
 * Reference:
 *
 *
 */
var BsAccessibility = (function () {
  // Config
  var config = {
    html: document.querySelector('html'),
    body: document.querySelector('body'),
    increaseButton: document.querySelectorAll('.bs-js-increase-font'),
    decreaseButton: document.querySelectorAll('.bs-js-decrease-font'),
    contrastButton: document.querySelectorAll('.bs-js-change-contrast'),
    librasButton: document.querySelectorAll('.bs-js-libras'),
    allImages: document.querySelectorAll('img'),
    fontSizeBase: 16,
    fontSizeMin: 14,
    fontSizeMax: 18,
    contrast: {
      // grayscale: 'bs-contrast--grayscale',
      highColor: 'bs-contrast--high',
    },
    grayscaleClass: 'bs-contrast__image',
  };

  var init = function () {
    var contrastArr = [];

    for (key in config.contrast) {
      if (config.contrast.hasOwnProperty(key)) {
        // Se não for IE, adiciona todos
        if (!detectIE()) {
          contrastArr.push(config.contrast[key]);
        } else if (key !== 'grayscale') {
          contrastArr.push(config.contrast[key]);
        }
      }
    }

    window.wl = new WebLibras({
      compatibilityMode: true,
    });

    // Have problems with cross origin images
    // if (getIEVersion() >= 10) {
    //   generateGrayscaleImages();
    // }

    click(config.increaseButton, increaseFontSize);
    click(config.decreaseButton, decreaseFontSize);
    click(config.contrastButton, toggleContrast.bind(null, contrastArr));
    click(config.librasButton, openLibras);
  };

  var increaseFontSize = function () {
    if (getCurrentFontSize() === config.fontSizeMax) return;
    config.html.style.fontSize = (getCurrentFontSize() + 1) + 'px';
  };

  var decreaseFontSize = function () {
    if (getCurrentFontSize() === config.fontSizeMin) return;
    config.html.style.fontSize = (getCurrentFontSize() - 1) + 'px';
  };

  var toggleContrast = function (contrastClasses) {
    if (contrastClasses[0] && config.body.classList.contains(contrastClasses[0])) {
      config.body.classList.remove(contrastClasses[0]);
      config.body.classList.add(contrastClasses[1]);
    } else if (contrastClasses[1] && config.body.classList.contains(contrastClasses[1])) {
      config.body.classList.remove(contrastClasses[1]);
    } else {
      config.body.classList.add(contrastClasses[0]);
    }
  };

  var generateGrayscaleImages = function () {
    Array.prototype.forEach.call(config.allImages, function (image) {
      var imgSrc = image.getAttribute('src');
      var grayscaleData = grayscaleImage(imgSrc);
      var newImage = image.cloneNode(true);
      newImage.setAttribute('src', grayscaleData);
      newImage.classList.add(config.grayscaleClass);
      image.parentNode.insertBefore(newImage, image);
    });
  };

  var openLibras = function () {
    document.querySelector('#startWlAuto').click();
  };

  var getCurrentFontSize = function () {
    return parseFloat(window.getComputedStyle(config.html, null).getPropertyValue('font-size'));
  };

  var click = function (elements, callback) {
    var i = 0;
    var l = elements.length;

    for (; i < l; i += 1) {
      elements[i].addEventListener('click', callback);
    }
  };

  return {
    init: init,
    currentFont: getCurrentFontSize,
    increaseFont: increaseFontSize,
    decreaseFont: decreaseFontSize,
    toggleContrast: toggleContrast,
    generateGrayscaleImages: generateGrayscaleImages,
  };
}());

/**
 * Init Accessibility Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  BsAccessibility.init();
});

var BsAccordion = (function () {

  var config = {
    accordionButton:    document.querySelectorAll('.bs-js-open-accordion'),
    accordion:          document.querySelectorAll('.bs-accordion'),
    accordionContent:   '.bs-js-accordion-content',
    body:               document.querySelector('body'),
    disabledOnDesktop:  'bs-js-accordion-disabled-desktop'
  }

  var modClass = {
    accordionOpenClass: 'bs-accordion__item--open'
  };

  var init = function () {

    // Check if accordion shoud be disabled on desktop
    disableAccordionOnDesktop();

    // Toggle accordion item on click
    for (var i = 0; i < config.accordionButton.length; i += 1) {
      config.accordionButton[i].addEventListener(
        'click',
        toggleAccordionItem.bind(null, config.accordionButton[i])
      );
    }

    window.addEventListener('resize', function () {
      updateContentHeight();
      disableAccordionOnDesktop();
    });
  };

  var toggleAccordionItem = function (element) {
    if (isAccordionOpen(element)) closeAccordionItem(element);
    else openAccordionItem(element);
  };

  var isAccordionOpen = function (element) {
    var item = getParent(element, 'bs-accordion__item');
    return item.classList.contains(modClass.accordionOpenClass);
  };

  var openAccordionItem = function (openElement) {
    var item = getParent(openElement, 'bs-accordion__item');
    var content = item.querySelector(config.accordionContent);
    var contentHeight = content.scrollHeight;

    item.classList.add(modClass.accordionOpenClass);
    content.style.height = contentHeight + 'px';
  };

  var closeAccordionItem = function (closeElement) {
    var item = getParent(closeElement, 'bs-accordion__item');
    var content = item.querySelector(config.accordionContent);
    var contentHeight = content.scrollHeight;

    item.classList.remove(modClass.accordionOpenClass);
    content.style.height = 0;
  };

  // Updates content height on window resize
  var updateContentHeight = function() {
    var items = document.querySelectorAll('.bs-accordion__item');

    Array.prototype.forEach.call(items, function(element, i){
      var content       = element.querySelector(config.accordionContent);
      var contentHeight = content.querySelector('.bs-accordion__box').scrollHeight + 'px';
      var accordion     = getParents(element, config.disabledOnDesktop)[0];

      // If the .bs-js-accordion-content height is different from its content, updates its height
      if( element.classList.contains(modClass.accordionOpenClass) && parseInt(content.style.height) != contentHeight ) {
        content.style.height = contentHeight;
      }


      // If accordion is set to be disabled on desktop, update items height
      if(accordion) {
        if(
          (element.classList.contains(modClass.accordionOpenClass) && parseInt(content.style.height) != contentHeight) ||
          (!element.classList.contains(modClass.accordionOpenClass) && window.innerWidth >= 1200)
        ) {
          content.style.height = contentHeight;
        } else if( !element.classList.contains(modClass.accordionOpenClass) && window.innerWidth < 1200 ) {
          content.style.height = 0;
        }
      }
    });
  }

  // Checks if the accordion should be disabled on desktop
  // and then disable its buttons
  var disableAccordionOnDesktop = function() {
    Array.prototype.forEach.call(config.accordion, function(element, i){
      if(element.classList.contains(config.disabledOnDesktop)) toggleButtons(element);
    });
  }

  // Disable the accordion buttons
  var toggleButtons = function(element) {
    var items = element.querySelectorAll('.bs-js-open-accordion');

    if(window.innerWidth >= 1200) {
      Array.prototype.forEach.call(items, function(el, i){
        el.disabled = true;
      });
    } else {
      Array.prototype.forEach.call(items, function(el, i){
        el.disabled = false;
      });
    }
  }

  return {
    init: init
  };
}());

/**
 * Init Modal Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-accordion').length) {
    BsAccordion.init();
  }
});

/**
 * Banner Topo
 * @return Module config
 */
var BsBannerTopo = (function () {
  /**
   * Init function
   * @return {Function} Module's scope functions
   */
  var init = function () {
    var el = document.querySelector('.js-banner-title-highlight');
    if (el) {
      var data = el.getAttribute('data-highlight');
      highlight(el, data);
    }

    setSlider();
  };

  var highlight = function (el, data) {
    // var textVelocity = 100;
    var pauseTime = 2000;
    // var dataArr = data.split(/[ ,]+/);
    var dataArr = data.split(',');
    // var dataLen = dataArr.length;
    // var i = 0;

    if (dataArr) {
      BsTextType.init({
        el: el,
        textArr: dataArr,
        pauseTime: pauseTime,
      });
      // new TxtType(el, dataArr, pauseTime);
    }
  };

  var setSlider = function () {
    var bannerList = document.querySelectorAll('.bs-banner__list');
    Array.prototype.forEach.call(bannerList, function (list) {
      var bannerItems = list.querySelectorAll('.bs-banner__item');
      var buttonPrev = list.parentNode.querySelector('.bs-banner__slider-button.prev');
      var buttonNext = list.parentNode.querySelector('.bs-banner__slider-button.next');
      var flkty = null;
      var setPrevNextThumbnail = function (index) {
        var slides = flkty.cells;
        var prevSlide = (
          (index - 1) > -1
        ) ? slides[index - 1].element
          : slides[slides.length - 1].element;
        var nextSlide = (
          (index + 1) < slides.length
        ) ? slides[index + 1].element
          : slides[0].element;
        var prevThumbSrc = prevSlide.getAttribute('data-thumbnail-src');
        var nextThumbSrc = nextSlide.getAttribute('data-thumbnail-src');
        var buttonPrevImg = buttonPrev.querySelector('img');
        var buttonNextImg = buttonNext.querySelector('img');
        var prevThumbLabel = prevSlide.getAttribute('data-thumbnail-label');
        var nextThumbLabel = nextSlide.getAttribute('data-thumbnail-label');
        var buttonPrevLabel = buttonPrev.querySelector('.bs-banner__slider-preview-label');
        var buttonNextLabel = buttonNext.querySelector('.bs-banner__slider-preview-label');

        buttonPrevImg.src = prevThumbSrc;
        buttonNextImg.src = nextThumbSrc;
        buttonPrevLabel.innerHTML = prevThumbLabel;
        buttonNextLabel.innerHTML = nextThumbLabel;
      };

      if (bannerItems && bannerItems.length > 1) {
        flkty = new Flickity(list, {
          wrapAround: true,
          pageDots: true,
          prevNextButtons: false,
          adaptiveHeight: true,
          autoPlay: 5000,
        });

        setPrevNextThumbnail(0);
        flkty.on('select', setPrevNextThumbnail);

        buttonPrev.addEventListener('click', function () {
          flkty.previous();
        });

        buttonNext.addEventListener('click', function () {
          flkty.next();
        });
      }
    });
  };

  return {
    init: init,
  };
}());

/**
 * Init Header Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelector('.bs-banner')) {
    BsBannerTopo.init();
  }
});

var BsBoxMenu = (function () {

  var config = {
    menuButton: document.querySelectorAll('.bs-js-box--menu'),
    menuButtonClass: 'bs-box__menu',
    activeContentClass: 'bs-box__content--active',
    activeMenuClass: 'bs-box__menu--active',
  };

  var init = function () {

    // var resizeMenu = debounce(todo, 500);
    // window.addEventListener('resize', resizeMenu);

    Array.prototype.forEach.call(config.menuButton, function (el) {
      var boxLinks = el.parentNode.querySelector('.bs-box__content');
      var boxLinksList = boxLinks.querySelector('.bs-box__list').offsetHeight;

      // debounce setTime offset elem and should remove elements actives when resize
      var resizeMenuBox = debounce(function () {
        boxLinksList = boxLinks.querySelector('.bs-box__list').offsetHeight;
        el.classList.remove(config.activeMenuClass);
        boxLinks.classList.remove(config.activeContentClass);
        boxLinks.style = '';
        // menu button active by breakpoint
        menuBoxActivated(el);
      });
      window.addEventListener('resize', resizeMenuBox);
      
      // menu button active by breakpoint
      menuBoxActivated(el);

      el.addEventListener('click', function () {

        var contentToggle = boxLinks.classList.contains(config.activeContentClass);

        if (!contentToggle) {
          el.classList.add(config.activeMenuClass);
          boxLinks.classList.add(config.activeContentClass);
          boxLinks.style.height = boxLinksList + 'px';
        } else {
          el.classList.remove(config.activeMenuClass);
          boxLinks.classList.remove(config.activeContentClass);
          boxLinks.style.height = '0';
        };
      });
    });
  };


  var menuBoxActivated = function (el) {
    var witdh = window.innerWidth;
    if (witdh > 768) {
      el.classList.remove(config.menuButtonClass);
      el.style.display = 'none';
    } else {
      el.classList.add(config.menuButtonClass);
      el.style.display = 'flex';
    }
  }

  return {
    init: init,
  };
}());

/**
* @return {void} Header.init();
*/
document.addEventListener('DOMContentLoaded', function() {
  if (document.querySelectorAll('.bs-js-box--menu').length) {
    BsBoxMenu.init();
  }
});

document.addEventListener('DOMContentLoaded', mainCardFlipReady);

/**
 * [mainCardFlipReady description]
 * @return {void} MainCard.init()
 */
function mainCardFlipReady() {
  var mainCard = new BsCardFlip();
  mainCard.init();
}

/**
 * BsCardFlip
 * @constructor
 */
function BsCardFlip() {
  this.cardServicesText = document.querySelector('.js-bs-card-services__text');
}

BsCardFlip.prototype = {
  constructor: BsCardFlip,
  init: function () {
    var i;
    var _ = this;
    var item = document.querySelectorAll('.js-bs-open-flip-card');
    // var card = document.querySelector('.js-flip-card');
    var closeFlipCard = document.querySelectorAll('.js-bs-close-flip-card');
    var body = document.querySelector('body');

    if (window.innerWidth < 768) body.classList.add('bs-is-mobile');
    window.addEventListener('resize', function () {
      if (window.innerWidth < 768) body.classList.add('bs-is-mobile');
      else body.classList.remove('bs-is-mobile');
    });

    if (item) {
      for (i = 0; i < item.length; i += 1) {
        item[i].addEventListener('click', function () {
          _._openFlipCard(this);
        });
      }

      for (i = 0; i < closeFlipCard.length; i += 1) {
        closeFlipCard[i].addEventListener('click', function (e) {
          e.stopPropagation();
          var _ = this;
          this.parentElement.classList.remove('bs-flip-card--is-open');
          this.parentElement.classList.add('bs-flip-card--is-removed');
          this.parentElement.parentElement.classList.remove('bs-card-services__item--no-hover');
          setTimeout(function () {
            _.parentElement.classList.remove('bs-flip-card--is-removed');
            _.parentElement.classList.remove('bs-flip-card--is-fixed');
          }, 300);
        });
      }
    }
  },

  _openFlipCard: function (el) {
    el.nextElementSibling.classList.add('bs-flip-card--is-fixed');
    el.nextElementSibling.classList.add('bs-flip-card--is-open');
    el.parentElement.classList.add('bs-card-services__item--no-hover');
  },
};

/**
 * Compare Selector
 * @return Module config
 */
var BsCompareSelector = (function () {
  /**
   * Init function
   * @return {Function} Module's scope functions
   */

   var config = {
    checkboxItems : document.querySelector('.bs-compare__select-cards'),
    listItem : document.querySelectorAll('.bs-compare__select-card'),
    resultListItem : document.querySelectorAll('.bs-compare__result .bs-media__item'),
    buttonCompare : document.querySelector('.bs-js-compare'),
    buttonNewCompare : document.querySelector('.bs-js-new-compare'),
    compareResult : document.querySelector('.bs-compare__result'),
    compareList : document.querySelector('.bs-compare__wrapper'),
    buttonItem : '',
    check : '',
    counter : 0,
    limit : 3,
    minSizeLimit : 2,
   };

   var results = {
    buttonAnchor : document.querySelector('.bs-js-new-compare'),
    smoothScrollSteps : 25,
    scrollAnchorGutter : 120,
    newCompareResult : document.querySelector('.bs-compare__select-cards'),
   };

   if (config.checkboxItems) {
    var selector = {
      checkItem : config.checkboxItems.querySelectorAll('input[type="checkbox"]'),
     };
   };

  var init = function () {
    Array.prototype.forEach.call(selector.checkItem, function (e) {
      config.buttonItem = e;
      config.buttonItem.addEventListener('click', function (el) {
        config.check = el.target;
        newChecker(config.check);
      });
    });

    results.buttonAnchor.addEventListener('click', function (e) {
      var scroll = new SmoothScroll();

      if (config.compareList) {
        scroll.animateScroll(config.compareList, 0, {
          updateURL: false,
          header: '.bs-header',
          offset: function () {
            return 100;
          },
        });
      }
    });

    // dispara ação do comparar
    config.buttonCompare.addEventListener('click', function(e) {
      config.compareResult.style.display = 'block';

      var filterItems = Object.values(selector.checkItem);

      var filtered = filterItems.filter(function (value) {
        return value.checked;
      });

      var contentResult = filtered.map(function (value) {
        return value.getAttribute('data-compare');
      });

      Array.prototype.forEach.call(config.resultListItem, function (el) {
        var scroll = new SmoothScroll();
        var itemCompared = el.getAttribute('data-compare');

        el.classList.remove('bs-compare__active');

        if (contentResult.includes(itemCompared)) {
          el.classList.add('bs-compare__active');
        }

        if (config.compareResult) {
          scroll.animateScroll(config.compareResult, 0, {
            updateURL: false,
          });
        }
      });
    });
  };

  var newChecker = function (e) {
    if (e.checked) config.counter++;
    else config.counter--;
    Array.prototype.forEach.call(selector.checkItem, function (el) {
      config.buttonItem = el;
      if (config.counter === config.limit) { //- 3 limit default
        if (!config.buttonItem.checked) {
          config.buttonItem.disabled = true; // and disable unchecked checkboxes
          config.buttonCompare.classList.remove('bs-button--disabled');
        };
      } else {
        if (config.counter === config.minSizeLimit) {
          config.buttonItem.disabled = false; // enable unchecked checkboxes
          config.buttonCompare.classList.remove('bs-button--disabled');
        } else {
          if (!config.buttonItem.checked) {
            config.buttonItem.disabled = false; // enable unchecked checkboxes
            config.buttonCompare.classList.add('bs-button--disabled');
          };
        };
      };
    });
  };

  return {
    init: init,
  };
}());

/**
 * Init Header Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelector('.bs-compare__select-cards')) {
    BsCompareSelector.init();
  }
});

/**
 * Context Menu
 */
var BsContextMenu = (function () {
  // Config
  var config = {
    buttons: {
      trigger: document.querySelectorAll('.bs-js-trigger-context-menu'),
    },
    classes: {
      open: 'bs-context-menu--open',
      contextMenu: 'bs-context-menu',
    },
  };

  var init = function () {
    // Abre/fecha o Context Menu
    if (config.buttons.trigger) {
      Array.prototype.forEach.call(config.buttons.trigger, function (button) {
        button.addEventListener('click', function (e) {
          e.stopPropagation();
          toggleContextMenu(button);
        });
      });
    }
  };

  var toggleContextMenu = function (button) {
    var isOpen = button.querySelector('.' + config.classes.contextMenu).classList.contains(config.classes.open);

    if (isOpen) closeContextMenu(button);
    else openContextMenu(button);
  };

  var openContextMenu = function (button) {
    closeAllContextMenu();
    button.querySelector('.' + config.classes.contextMenu).classList.add(config.classes.open);
  };

  var closeContextMenu = function (button) {
    button.querySelector('.' + config.classes.contextMenu).classList.remove(config.classes.open);
  };

  var closeAllContextMenu = function () {
    Array.prototype.forEach.call(document.querySelectorAll('.' + config.classes.open), function (contextMenu) {
      contextMenu.classList.remove(config.classes.open);
    });
  };

  // Close menu on click outside
  document.querySelector('html').addEventListener('click', function () {
    closeAllContextMenu();
  });

  return {
    init: init,
    closeAllContextMenu: closeAllContextMenu,
  };
}());

/**
 * Init BsContextMenu constructor
 * @return {void} BsContextMenu.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-context-menu').length) {
    BsContextMenu.init();
  }
});

var BsDatePicker = (function () {

  var config = {
    starInputDefault: document.querySelectorAll('input[data-type="datepicker"]'),
    starInputRange: document.querySelectorAll('input[data-type="datepicker--range"]'),
    selector: document.querySelectorAll('.bs-picker__item'),
    ul: document.querySelector('.bs-js-pickerList'),
    button: '',
    dataItem: '',
    objectAttribute: '',
    resetPicker: '',
    optFooter: '',
    lightpick: '',
    toggleCalendar: '',
  };

  var set = function (el) {

    var isRange = el.getAttribute('data-type') === 'datepicker--range';

    if (isRange) setPickerRange(el);
    else setPicker(el);
  };

  var setPicker = function (el) {
    var elParent = el.parentNode;
    var picker = null;
    var datePeriod = el.getAttribute('data-datepicker-period') || '';
    var options = {
      field: el,
      parentEl: elParent,
      startDate: el.value || null,
      lang: 'pt-BR',
      minDate: datePeriod === 'startToday' ? moment().endOf('day') : null,
      maxDate: !datePeriod || datePeriod === 'endToday' ? moment().endOf('day') : null,
    };

    picker = new Lightpick(options);

    // Close picker on keydown
    el.addEventListener('keydown', function () {
      picker.hide();
    });

    // Focus
    el.addEventListener('focus', function () {
      // Fix bug IE11 use setTimeout
      setTimeout( function() {
        // selectorDate();
        el.focus();
      }, 10);
    });
  };

  var setPickerRange = function (el) {
    var elParent = el.parentNode;
    var picker = new Lightpick({
      field: el,
      parentEl: elParent,
      startDate: el.value || null,
      separator: (el.dataset.separator) || ' - ',
      lang: 'pt-BR',
      singleDate: false,
      maxDate: moment().endOf('day'),
      footer: true,
      locale: {
        tooltip: {
          one: 'Dia',
          other: 'Dias',
        },
      },
      onSelect: function (date) {
        var str = date ? date.toString() : '';
        enableCleanButton(str);
      },
    });
    var resetPicker = picker.el.querySelector('.lightpick__reset-action');
    var optFooter = picker.el.querySelector('.lightpick__footer');
    var control = el.closest('.bs-form__control');
    var pickerList = control.querySelector('.bs-js-pickerList');
    var pickerItems = pickerList.querySelectorAll('.bs-picker__item');
    var rangePeriods = [
      { attribute: 'today', value: '' },
      { attribute: 'last-week', value: '7' },
      { attribute: 'last-month', value: '30' },
      { attribute: 'last-more', value: '90' },
    ];
    var enableCleanButton = function (value) {
      if (typeof value === 'string' && value.length) {
        resetPicker.removeAttribute('disabled');
      } else {
        resetPicker.setAttribute('disabled', 'disabled');
      }
    };

    if (optFooter) {
      // Append Footer + IE 11 suport
      optFooter.insertBefore(pickerList, optFooter.firstChild);

      // Cria  função para limpar as datas selcionadas
      resetPicker.innerHTML = 'Limpar';
      resetPicker.classList.add('bs-picker__item');
      resetPicker.setAttribute('disabled', 'disabled');

      // Enable resetPicker button if input has value
      el.addEventListener('change', enableCleanButton);
    }

    // Filter Selection last dates
    Array.prototype.forEach.call(pickerItems, function (elem) {
      var button = elem.querySelector('a');

      if (!button) return;

      // permite selecionar o dia, no filtro/ não é default do plugin
      button.addEventListener('click', function (e) {
        var dataItem = e.target.getAttribute('data-picker');

        Array.prototype.forEach.call(rangePeriods, function (event) {
          var objectAttribute = event.attribute;
          var subtractDays = moment().subtract(event.value, 'day');
          var currentDay = moment().endOf('day');

          // Get objects in list, to update last days
          if (objectAttribute === dataItem) {
            picker.setDateRange(subtractDays, currentDay);
            picker.hide();
          } else picker.hide();
        });
      });
    });
  };

  var init = function () {

    // Range + Filter Date
    if (config.starInputRange.length > 0) {
      Array.prototype.forEach.call(config.starInputRange, function (el) {
        setPickerRange(el);
      });
    }

    // SIMPLE date
    if (config.starInputDefault.length > 0) {
      Array.prototype.forEach.call(config.starInputDefault, function (el) {
        setPicker(el);
      });
    };
  };

  return {
    set: set,
    setPicker: setPicker,
    setRange: setPickerRange,
    init: init,
  };
}());

/**
* Init Modal Constructor
* @return {void} Header.init();
*/
document.addEventListener('DOMContentLoaded', function() {
  if (document.querySelectorAll('.bs-js-lightpick').length) {
    BsDatePicker.init();
  }
});

/**
 * Dropdown menu
 * e.g.: Notification and Switch User Menu
 */
var BsDropdownMenu = (function () {
  // Config
  var config = {
    buttons: {
      dropdownMenuTrigger: document.querySelectorAll('.bs-js-toggle-dropdown-menu'),
      markAllAsRead: document.querySelector('.bs-js-mark-all-unread'),
      markAsUnread: document.querySelectorAll('.bs-js-mark-unread'),
      openDropdownMenu: document.querySelectorAll('.bs-user-menu__dropdown .bs-js-open-modal'),
      removeNotification: document.querySelectorAll('.bs-js-remove-notification'),
    },
    classes: {
      dropdownHasNotification: 'bs-dropdown-notification--has-notification',
      dropdownMenuOpen: 'bs-dropdown-menu--open',
      hasNotification: 'bs-dropdown-notification__item--has-notification',
      inDown: 'bs-dropdown-notification__number--in-down-count',
      inUp: 'bs-dropdown-notification__number--in-up-count',
      outDown: 'bs-dropdown-notification__number--out-down-count',
      outUp: 'bs-dropdown-notification__number--out-up-count',
      notificationNumber: 'bs-dropdown-notification__number',
    },
    dropdownMenu: document.querySelector('.bs-dropdown-menu'),
    notificationMenu: document.querySelector('.bs-dropdown-notification'),
    notificationCount: document.querySelector('.bs-dropdown-notification__count'),
    notificationCountInt: null,
    notificationItems: document.querySelectorAll('.bs-js-dropdown-menu-item'),
  };

  var init = function () {
    // Inicializa o valor da notificação
    var hasNotification = document.querySelector('.' + config.classes.dropdownHasNotification);
    if (hasNotification) {
      config.notificationCountInt = parseInt(document.querySelector('.bs-dropdown-notification__count').textContent, 10);

      // Marca notificação como lida
      if (config.notificationItems) {
        Array.prototype.forEach.call(config.notificationItems, function (notification) {
          notification.addEventListener('click', function () {
            markNotificationAsRead(notification);
          });
        });
      }

      // Marca a notificação como não lida
      if (config.buttons.markAsUnread) {
        Array.prototype.forEach.call(config.buttons.markAsUnread, function (notification) {
          notification.addEventListener('click', function (e) {
            e.stopPropagation();
            markNotificationAsUnread(notification);
          });
        });
      }

      // Marca todas as notificações lidas
      if (config.buttons.markAllAsRead) {
        config.buttons.markAllAsRead.addEventListener('click', function () {
          var hasNotification = document.querySelectorAll('.' + config.classes.hasNotification);
          var dropdown = getParents(this, 'bs-dropdown-menu', true)[0];

          config.notificationCountInt = 0;
          document.querySelector('.' + config.classes.notificationNumber).textContent = config.notificationCountInt;
          dropdown.classList.remove(config.classes.dropdownHasNotification);

          Array.prototype.forEach.call(hasNotification, function (notification) {
            notification.classList.remove(config.classes.hasNotification);
          });
        });
      }

      // Remove notificação
      if (config.buttons.removeNotification) {
        Array.prototype.forEach.call(config.buttons.removeNotification, function (button) {
          button.addEventListener('click', function (e) {
            e.preventDefault();
            e.stopPropagation();
            removeNotification(button);
          });
        });
      }
    }

    // Abre/fecha o Dropdown Menu
    if (config.buttons.dropdownMenuTrigger) {
      Array.prototype.forEach.call(config.buttons.dropdownMenuTrigger, function (button) {
        button.addEventListener('click', function (e) {
          e.preventDefault();
          e.stopPropagation();
          toggleDropdownMenu(button);
        });
      });

      // Previne bug ao carregar o componente
      setTimeout(function () {
        BsTextEllipsis.init({
          element: '.bs-dropdown-menu__description',
          maxHeight: 42,
        });
      }, 100);
    }
  };

  var toggleDropdownMenu = function (button) {
    var isOpen = button.parentNode.classList.contains(config.classes.dropdownMenuOpen);

    if (isOpen) closeDropdownMenu();
    else openDropdownMenuButton(button);
  };

  var openDropdownMenuButton = function (button) {
    closeDropdownMenu();
    button.parentNode.classList.add(config.classes.dropdownMenuOpen);
  };

  var closeDropdownMenu = function () {
    BsContextMenu.closeAllContextMenu();

    Array.prototype.forEach.call(config.buttons.dropdownMenuTrigger, function (button) {
      button.parentNode.classList.remove(config.classes.dropdownMenuOpen);
    });
  };

  var markNotificationAsUnread = function (notification) {
    var notificationItem = getParents(notification, 'bs-dropdown-menu__item', true)[0];

    if (!notificationItem.classList.contains(config.classes.hasNotification)) {
      notificationItem.classList.add(config.classes.hasNotification);
      increaseNotificationCount();
    }
  };

  var markNotificationAsRead = function (notification) {
    if (notification.classList.contains(config.classes.hasNotification)) {
      notification.classList.remove(config.classes.hasNotification);
      decreaseNotificationCount();
    }
  };

  var removeNotification = function (button) {
    // Seleciona a notificação
    var notificationItem = getParents(button, 'bs-dropdown-menu__item', true)[0];

    // Remove a notificação da lista
    notificationItem.classList.add('bs-dropdown-menu__item--removing');
    setTimeout(function () {
      notificationItem.remove();
    }, 200);

    // Verifica se a notifição tem a classe para atualizar o contador
    if (notificationItem.classList.contains(config.classes.hasNotification)) {
      decreaseNotificationCount();
    }
  };

  // Aumenta o contador de notificações
  var increaseNotificationCount = function () {
    config.notificationCountInt++;

    // verifica se o contador está sendo exibido
    if (
      config.notificationCountInt > 0 &&
      !config.notificationMenu.classList.contains(config.classes.dropdownHasNotification)
    ) {
      config.notificationMenu.classList.add(config.classes.dropdownHasNotification);
    }

    document.querySelector('.' + config.classes.notificationNumber).classList.add(config.classes.outUp);
    updateNotification('increase');
  };

  // Diminui o contador de notificações
  var decreaseNotificationCount = function () {
    if (config.notificationCountInt > 0) {
      config.notificationCountInt--;

      // verifica se o contador está sendo exibido
      if (config.notificationCountInt === 0) {
        config.notificationMenu.classList.remove(config.classes.dropdownHasNotification);
      }

      document.querySelector('.' + config.classes.notificationNumber).classList.add(config.classes.outDown);
      updateNotification('decrease');
    }
  };

  // Atualiza o contador de notificações
  var updateNotification = function (increaseDecrease) {
    // debugger;
    var span = document.createElement('span');
    var animationClasses = getNotificationClass(increaseDecrease);

    // Inclui o novo contador no DOM
    // Como se estivesse empurrando o contador antigo para cima/baixo
    span.textContent = config.notificationCountInt;
    span.classList.add('bs-dropdown-notification__number', animationClasses[0]);
    config.notificationCount.appendChild(span);

    // Delay para que o contador seja empurrado
    // Então removemos o contador antigo e a classe de animação do novo contador
    setTimeout(function () {
      document.querySelector('.' + animationClasses[1]).remove();
      span.classList.remove(animationClasses[0]);
    }, 200);
  };

  // Obtém a classe de animação do contador de notificações
  var getNotificationClass = function (increaseDecrease) {
    var classIn = '';
    var classOut = '';

    // Atribui as classes CSS de animação
    if (increaseDecrease === 'increase') {
      classIn = config.classes.inUp;
      classOut = config.classes.outUp;
    } else {
      classIn = config.classes.inDown;
      classOut = config.classes.outDown;
    }

    return [classIn, classOut];
  };

  // Close menu on click outside
  document.querySelector('html').addEventListener('click', function (event) {
    Array.prototype.forEach.call(config.buttons.dropdownMenuTrigger, function (button) {
      if (
        button.parentNode.classList.contains(config.classes.dropdownMenuOpen) &&
        !button.nextElementSibling.contains(event.target)) {
        closeDropdownMenu();
        return false;
      }
    });
  });

  return {
    init: init,
  };
}());

/**
 * Init BsDropdownMenu constructor
 * @return {void} BsDropdownMenu.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-dropdown-menu').length) {
    BsDropdownMenu.init();
  }
});

/**
 * Bs Filter (anchor)
 */
var BsFilter = (function () {
  // Elements
  var elements = {};
  var $ = elements;
  $.body = document.querySelector('body');
  $.filter = document.querySelector('.bs-js-filter');

  if (!$.filter) return;

  $.nav = $.filter.querySelector('.bs-js-filter--nav');
  $.toggle = $.filter.querySelector('.bs-js-filter--toggle');
  // $.dropdown = new BsDropdown();
  $.list = $.filter.querySelector('.bs-js-filter--list');
  $.grid = $.filter.querySelector('.grid');
  $.items = $.list.querySelectorAll('.bs-js-filter--item');

  // Config
  var config = {
    filter: null,
    itemSelector: '.bs-js-filter--item',
    itemSizerSelector: '.bs-js-filter--sizer',
    buttonActiveClass: 'bs-filter-link--active',
    itemActiveClass: 'bs-filter__item--visible',
    itemSelectorList: document.querySelectorAll('.bs-js-filter--item'),
    buttons: document.querySelectorAll('.bs-js-filter--button'),
    selects : document.querySelectorAll('.bs-js-filter--nav select'),
    checkboxes : document.querySelectorAll('.bs-js-filter--nav input'),
    slider : document.querySelector('.bs-js-modal-carousel'),
    selectsNode : [],
    checkboxesNode : []
  };

  var init = function () {
    // Retorna itens filtrados
    filterMasonry()

    // - Percorre navegação de icones ou tabs superior se exsitir
    Array.prototype.forEach.call(config.buttons, function (el) {
      var tag = el.dataset.filter;
      el.addEventListener('click', function () {
        activeButton(el)
        filterItems(tag)
      })
    })
    //- percorre selects e retorna
    Array.prototype.forEach.call(config.selects, function(elem) {
      config.selectsNode.push(elem)
    })
    //- percorre checkbox pelo data filter, retorna e atualiza o componente se checked
    Array.prototype.forEach.call(config.checkboxes, function(elem) {
      config.checkboxesNode.push(elem);
      if (elem.checked) {
        var tag = elem.getAttribute('data-filter')
        filterItems(tag)
      }
    })

    // Contacatena os elemento de select e checkbox para realizar o filtro multiplo na sequencia
    var returnAllEvent = config.selectsNode.concat(config.checkboxesNode)

    // -Aplica condições para setar filtros e suas comparações a partir do evento change
    Array.prototype.forEach.call(returnAllEvent, function(elem){
      elem.addEventListener('change', run)
    })

    run();
  };

  var run = function () {
    // map input values to an array
    var exclusives = []
    var inclusives = []

    //- Atribui options de cada select
    Array.prototype.forEach.call(config.selects, function (el) {
      var attr = el.options[el.selectedIndex].getAttribute('data-filter')
      //var attrValue = el.options[el.selectedIndex].value
      if (attr)
        exclusives.push(attr);

      // Percorre Lista apos select change e remove a classe para o flickity, após change é adicionado no ON.arrange a classe no item seleciona
      Array.prototype.forEach.call(config.itemSelectorList,function(el) {
        el.classList.remove('bs-js-filter--modal');
      })
    })

    // Atribui ao Checkbox o item a ser verificado
    Array.prototype.forEach.call(config.checkboxes, function (el) {
      if (el.checked) {
        var attr = el.getAttribute('data-filter');
        inclusives.push(attr);
      }
    });

    // Armazena os options e os separa
    exclusives = exclusives.join('');

    var tag;
    // Verificação se houver checkebox
    if (inclusives.length){
      // Map para retornar os dois valores e os separa
      // debugger
      tag = inclusives.map( function( value ) {
        return value + exclusives
      })
      tag = tag.join(', ')
    } else {
      tag = exclusives;
    }
    filterItems(tag)
  }

  var filterMasonry = function () {
    config.filter = new Isotope($.list, {
      layoutMode: 'packery',
      itemSelector: config.itemSelector,
      columnWidth: config.itemSizerSelector,
      percentPosition: true,
      rowHeight: 320,
    });

    // Aplica função da classe modal a itens retornados
    config.filter.on('arrangeComplete', function (filteredItems) {
      var filteredItemsArray = filteredItems.map(function (item) {
        return item.element;
      });


      var filteredItemsIndex = Array.prototype.map.call(config.itemSelectorList, function (el, index) {
        // if (filteredItemsArray.indexOf(el))
        if (filteredItemsArray.includes(el))
          return index;
      });

      var itemsIndex = Array.prototype.filter.call(filteredItemsIndex, function (el, index) {
        return typeof el !== 'undefined'
      });

      //debugger
      if (config.slider) BsModalList.loadSlider(config.slider, itemsIndex);
    });
  };

  // - Aplica filter tag das configurações e condições
  var filterItems = function (tag) {
    if (typeof tag !== 'string') return
    if (tag !== '*' && tag.indexOf('.') !== 0 && tag !== '') {
      tag = '.' + tag;
    }
    config.filter.arrange({ filter: tag })
  }

  var activeButton = function (el) {
    var itemActive = $.nav.querySelector('.' + config.buttonActiveClass);
    if (itemActive) itemActive.classList.remove(config.buttonActiveClass);
    el.classList.add(config.buttonActiveClass);
    updateLabel(el.innerHTML);
  };

  var updateLabel = function (label) {
    var span = $.toggle.querySelector('span');
    span.innerHTML = label;
  };

  return {
    init: init,
    filter: function () {
      return config.filter
    },
    run: run,
  };
}());

/**
 * Init Filter Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-js-filter').length) {
    BsFilter.init();
  }
})

document.addEventListener('DOMContentLoaded', mainFooterReady);

/**
 * Init Footer
 */
function mainFooterReady() {
  var mainReady = new BsFooter();
  mainReady.init();
}

/**
 * Footer
 * @constructor
 */
function BsFooter() {
  this.defaultTitleHeight = 60;
  this.initialized = false;
  this.button = document.querySelectorAll('.js-item-list');
  this.menu = document.querySelectorAll('.js-item-menu');
  this.isMobile = function () {
    return window.innerWidth < 768;
  };
}

BsFooter.prototype = {
  constructor: BsFooter,
  init: function () {
    var _ = this;
    var i;

    if (this.isMobile() && !this.initialized) {
      this._build();
      for (i = 0; i < this.button.length; i += 1) {
        this.button[i].addEventListener('click', function () {
          if (!this.classList.contains('bs-footer-nav__group--is-open')) {
            _._close();
            _._open(this);
          } else {
            _._close();
          }
        });
      }

      for (i = 0; i < this.menu.length; i += 1) {
        this.menu[i].addEventListener('click', function (e) {
          e.stopImmediatePropagation();
        });
      }
    } else if (!this.isMobile() && this.initialized) {
      this._destroy();
    } else if (this.isMobile() && this.initialized) {
      // debugger;
    }

    window.onresize = function () {
      _._resize();
    };
  },

  _resize: function () {
    if (this.isMobile() && !this.initialized) {
      this._build();
    } else if (!this.isMobile() && this.initialized) {
      this._destroy();
    }
  },

  _build: function () {
    for (var i = 0; i < this.button.length; i += 1) {
      if (!this.button[i].classList.contains('bs-footer-nav__group--is-open')) {
        this.button[i].style.height = this.defaultTitleHeight + 'px';
      }
    }
    this.initialized = true;
  },

  _destroy: function () {
    for (var i = 0; i < this.button.length; i += 1) {
      this.button[i].removeAttribute('style');
    }
    this.initialized = false;
  },

  _open: function (el) {
    var i;
    var elemContainer = el.querySelector('.js-item-menu');
    var titleHeight = el.offsetHeight;
    var elemHeight = elemContainer.offsetHeight + titleHeight;

    if (this.isMobile()) {
      for (i = 0; i < this.button.length; i += 1) {
        this.button[i].style.height = titleHeight + 'px';
      }

      el.style.height = elemHeight + 'px';
      el.classList.add('bs-footer-nav__group--is-open');
    }
  },

  _close: function () {
    var i;
    var titleHeight = this.defaultTitleHeight;
    if (this.isMobile()) {
      for (i = 0; i < this.button.length; i += 1) {
        this.button[i].style.height = titleHeight + 'px';
        this.button[i].classList.remove('bs-footer-nav__group--is-open');
      }
    }
  },
};

/**
 * Gallery
 * @return Module config
 */
var BsGallery = function (element, options) {
  var elem = element;
  var config = {};

  var setConfig = function (el) {
    return {
      el: el,
      navItems: el.querySelectorAll('.bs-gallery__thumb'),
      images: el.querySelectorAll('.bs-gallery__item'),
      navItemActiveClass: 'bs-gallery__thumb--active',
      imageActiveClass: 'bs-gallery__item--active',
      pagTotal: document.querySelector('.bs-gallery__pagination--total'),
      pagCounter: document.querySelector('.bs-gallery__pagination--counter'),
      navIndex: 0,
      navMoment: 0,
    };
  };

  var init = function () {
    if (!elem || typeof elem !== 'object') return;
    config = setConfig(elem);

    Array.prototype.forEach.call(config.navItems, function (item, index) {

      // sum index, after each - print div
      config.navIndex = index + 1;

      item.addEventListener('click', setItem.bind(null, item));

    });

    config.pagTotal.innerHTML = config.navIndex;
  };

  var setItem = function (navItem) {
    var targetIndex = Array.prototype.indexOf.call(config.navItems, navItem);
    var currentNavItemActive = config.el.querySelector('.' + config.navItemActiveClass);
    var currentImageActive = config.el.querySelector('.' + config.imageActiveClass);

    currentNavItemActive.classList.remove(config.navItemActiveClass);
    currentImageActive.classList.remove(config.imageActiveClass);

    navItem.classList.add(config.navItemActiveClass);
    config.images[targetIndex].classList.add(config.imageActiveClass);

    // Pausa os vídeos que estejam rodando dentro do modal
    if (currentImageActive.querySelector('.bs-video')) {
      BsYTPlayers.getPlayer(currentImageActive.querySelector('.bs-video').id).stopVideo();
    }

    // sum index - print div
    config.navMoment = targetIndex + 1;
    config.pagCounter.innerHTML = config.navMoment;
  };

  return {
    init: init,
  };
};

/**
 * Init Header Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  var galleries = document.querySelectorAll('.bs-js-gallery');
  if (galleries.length) {
    Array.prototype.forEach.call(galleries, function (element) {
      var gallery = BsGallery(element, {});
      gallery.init();
    });
  }
});

/**
 * Grid
 */
document.addEventListener('DOMContentLoaded', function () {
  /* Grid Filter dropdown */
  var gridFormatToggle = document.querySelectorAll('.bs-js-grid-toggle-format');
  var dropdownToggle = document.querySelector('.bs-js-grid-toggle-dropdown');
  var gridList = document.querySelector('.bs-grid__list');
  var gridDropdown = new BsDropdown();
  var gridFormatClasses = {
    grid: 'bs-media--col3',
    list: 'bs-media--horizontal bs-media--image-prop-1-4 bs-media--hr',
  };

  if (dropdownToggle) {
    gridDropdown.init(dropdownToggle, {
      dropdownElement: dropdownToggle.parentNode,
      dropdownActiveClass: 'bs-is-expanded',
    });
  }

  if (gridList && gridFormatToggle) {
    Array.prototype.forEach.call(gridFormatToggle, function (input) {
      input.addEventListener('change', function (ev) {
        var type = ev.currentTarget.value;
        gridList.className = 'bs-media bs-grid__list ' + gridFormatClasses[type];
      });
    });
  }
});

// /**
//  * Header
//  * @return Module config
//  */
// var BsHeader = (function () {
//   // Class Modifiers
//   var modClass = {
//     headerFixed: 'bs-header--fixed',
//     headerFloating: 'bs-header--floating',
//     headerAccessActive: 'bs-header--access-open',
//     accessPanelActive: 'bs-header-access--open',
//     tabActive: 'bs-tabs__item--active',
//     tabPanelActive: 'bs-tabs__panel--active',
//   };

//   // DOM Elements
//   var el = {
//     header: document.querySelector('.bs-header'),
//     navLinks: document.querySelector('.bs-header-links'),
//     accessPanel: document.querySelector('.bs-header-access'),
//     accessModal: document.querySelector('.bs-header-access__modal'),
//     accessTabs: document.querySelector('.bs-tabs'),
//     accessTabsNav: document.querySelector('.bs-tabs__nav'),
//     accessTabsItem: document.querySelectorAll('.bs-js-toggle-tab'),
//     accessTabsContainer: document.querySelector('.bs-tabs__container'),
//     accessTabsPanel: document.querySelectorAll('.bs-tabs__panel'),
//     // Triggers
//     btnToggleAccessPanel: document.querySelector('.bs-js-toggle-access-panel'),
//     btnCloseAccessModal: document.querySelector('.bs-js-close-access-modal'),
//   };

//   /**
//    * Init function
//    * @return {Function} Module's scope functions
//    */
//   var init = function () {
//     // Toggle Access Panel
//     if (el.btnToggleAccessPanel) {
//       el.btnToggleAccessPanel.addEventListener('click', _toggleAccessPanel);
//     }

//     // Close Access Panel Mobile (Modal)
//     if (el.btnCloseAccessModal) {
//       el.btnCloseAccessModal.addEventListener('click', _closeAccessPanel);
//       document.querySelector('body').addEventListener('click', function (event) {
//         if (
//           !el.accessTabs.contains(event.target) &&
//           !el.btnToggleAccessPanel.contains(event.target)) {
//           _closeAccessPanel();
//           return false;
//         }
//       });
//     }

//     // Change Access Panel Tabs
//     for (var i = 0; i < el.accessTabsItem.length; i += 1) {
//       el.accessTabsItem[i].addEventListener(
//         'click',
//         _changeTab.bind(null, el.accessTabsItem[i])
//       );
//     }

//     // Set floating class to heaer
//     window.addEventListener('scroll', _setHeaderFloating);
//   };

//   var _toggleAccessPanel = function () {
//     var accessIsActive = (
//       !el.header.classList.contains(modClass.headerAccessActive) ||
//       !el.accessPanel.classList.contains(modClass.accessPanelActive)
//     );
//     if (accessIsActive) _openAccessPanel();
//     else _closeAccessPanel();
//   };

//   var _openAccessPanel = function () {
//     el.header.classList.add(modClass.headerAccessActive);
//     el.accessPanel.classList.add(modClass.accessPanelActive);
//   };

//   var _closeAccessPanel = function () {
//     el.header.classList.remove(modClass.headerAccessActive);
//     el.accessPanel.classList.remove(modClass.accessPanelActive);
//   };

//   var _changeTab = function (tabActive) {
//     var tabIndex = [].slice.call(tabActive.parentNode.children).indexOf(tabActive);

//     // Clean active tab class
//     el.accessTabsNav.querySelector('.' + modClass.tabActive)
//       .classList.remove(modClass.tabActive);

//     // Set active class to clicked tab
//     tabActive.classList.add(modClass.tabActive);

//     // Clean active tabs' panel class
//     el.accessTabsContainer.querySelector('.' + modClass.tabPanelActive)
//       .classList.remove(modClass.tabPanelActive);

//     // Set active class to panel that refers to tab clicked
//     el.accessTabsPanel[tabIndex].classList.add(modClass.tabPanelActive);
//   };

//   var _setHeaderFloating = function () {
//     if (_windowScrollDirection() === 'down') el.header.classList.add(modClass.headerFloating);
//     else el.header.classList.remove(modClass.headerFloating);
//   };

//   var _windowScrollDirection = function () {
//     var lastScrollTop = 0;
//     var currentPosition = window.pageYOffset || document.documentElement.scrollTop;
//     var direction = '';

//     // down
//     if (currentPosition > lastScrollTop) {
//       direction = 'down';
//     // up
//     } else {
//       direction = 'up';
//     }

//     lastScrollTop = currentPosition;

//     return direction;
//   };

//   return {
//     init: init,
//   };
// }());

// /**
//  * Init Header Constructor
//  * @return {void} Header.init();
//  */
// document.addEventListener('DOMContentLoaded', function () {
//   if (document.querySelector('.bs-header')) {
//     BsHeader.init();
//   }
// });

/**
 * Bs Header
 *
 * [TODO]: Refatorar para que os elementos do config referenciem um componente
 * header específico ao invés de pegar todos os existentes no documento.
 */
var BsHeader = (function () {
  // Config
  var config = {
    headerContainer: document.querySelector('.bs-header__container'),
    hasTransparencyClass: 'bs-header--has-transparency',
    header: document.querySelector('.bs-header'),
    headerTop: document.querySelector('.bs-header__top'),
    headerMain: document.querySelector('.bs-header__main'),
    headerFloatingClass: 'bs-header--floating',
    headerPinnedClass: 'bs-header--pinned',
    headerTopPositionToFloat: 0,
    headerTopPositionToPin: 110,
    headerTopPositionToTransparency: 0,
    headerTransparentClass: 'bs-header--transparent',
    headerUnpinnedClass: 'bs-header--unpinned',
    isFixedClass: 'bs-header--fixed',
    isStaticClass: 'bs-header--static',
    scrollTopPosition: function () {
      return window.pageYOffset || document.documentElement.scrollTop;
    },
    scrollDirection: 0,
    lastScrollTop: 0,
  };

  var init = function () {
    // Set header transparent on home page load
    setHeaderTransparent();

    if (config.header.classList.contains(config.isStaticClass)) return;

    window.addEventListener('scroll', function () {
      setHeaderPinned();
      setHeaderFloating();
      setHeaderTransparent();
    });
  };

  var setHeaderFloating = function (force) {
    if (typeof force === 'undefined') force = false;
    var headerHeight = config.headerMain.offsetHeight + config.headerTop.offsetHeight;
    if (config.scrollTopPosition() > config.headerTopPositionToFloat || force) {
      adjustBodyMargin(headerHeight);
      config.header.classList.add(config.headerFloatingClass);
    } else if (config.scrollTopPosition() < 1) {
      adjustBodyMargin(0);
      config.header.classList.remove(config.headerFloatingClass);
    }
  };

  var setHeaderPinned = function () {
    if (config.scrollTopPosition() > config.headerTopPositionToPin) {
      if (BsSearchForm.isOpen() || BsSearchForm.hasFocus()) return;
      if (getScrollDirection() === 'down') {
        config.header.classList.remove(config.headerPinnedClass);
        config.header.classList.add(config.headerUnpinnedClass);
        // BsSearchForm.close();
      } else {
        config.header.classList.add(config.headerPinnedClass);
        config.header.classList.remove(config.headerUnpinnedClass);
      }
    } else {
      config.header.classList.remove(config.headerUnpinnedClass);

      if (config.scrollTopPosition() > 0) {
        config.header.classList.add(config.headerPinnedClass);
      } else {
        config.header.classList.remove(config.headerPinnedClass);
      }
    }
  };

  var setHeaderTransparent = function () {
    if (!headerHasTransparency()) return;
    if (
      config.scrollTopPosition() === 0 ||
      config.scrollTopPosition() < config.headerTopPositionToTransparency) {
      config.header.classList.add(config.headerTransparentClass);
    } else {
      config.header.classList.remove(config.headerTransparentClass);
    }
  };

  var getScrollDirection = function () {
    // down
    if (config.scrollTopPosition() > config.lastScrollTop) {
      config.scrollDirection = 'down';
    // up
    } else if (config.scrollTopPosition() === config.lastScrollTop) {
      // config.scrollDirection = '';
    } else if (config.scrollTopPosition() < config.lastScrollTop) {
      config.scrollDirection = 'up';
    }

    config.lastScrollTop = config.scrollTopPosition();

    return config.scrollDirection;
  };

  var isHeaderFloating = function () {
    return config.header.classList.contains(config.headerFloatingClass);
  };

  var headerHasTransparency = function () {
    return config.header.classList.contains(config.hasTransparencyClass);
  };

  var headerIsFixed = function () {
    return config.header.classList.contains(config.isFixedClass);
  };

  var adjustBodyMargin = function (margin) {
    if (config.headerContainer) {
      if (!headerIsFixed() && margin) {
        config.headerContainer.style.height = margin + 'px';
      } else {
        config.headerContainer.style.height = 'auto';
      }
    } else if (!headerIsFixed()) {
      // deprecated
      // header must always have a container element
      document.body.style.marginTop = margin + 'px';
    }
  };

  return {
    init: init,
    el: config.header,
    isFloating: isHeaderFloating,
    setHeaderFloating: setHeaderFloating,
    headerPinned: config.headerPinnedClass,
  };
}());

/**
 * Init Header Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-header').length) {
    BsHeader.init();
  }
});

/**
 * BsListAccordion
 */
var BsListAccordion = (function () {
  var config = {};

  var setConfig = function (options) {
    var defaults = {
      list: '.bs-js-list-accordion',
      item: '.bs-js-list-accordion__item',
      toggleButton: '.bs-js-list-accordion__toggle',
      itemExpandedClass: 'bs-is-expanded',
    };

    if (typeof options !== 'object') options = {};
    return extend({}, defaults, options);
  };

  var init = function (options) {
    var listAccordion;

    config = setConfig(options);
    listAccordion = document.querySelectorAll(config.list);

    if (!listAccordion.length) return;

    Array.prototype.forEach.call(listAccordion, function (list) {
      var items = list.querySelectorAll(config.item);

      Array.prototype.forEach.call(items, function (item) {
        var button = item.querySelector(config.toggleButton);

        if (button) {
          button.addEventListener('click', function () {
            toggleItem(item);
          });
        }
      });
    });
  };

  var extend = function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  var expandItem = function (item) {
    item.classList.add(config.itemExpandedClass);
  };

  var collapseItem = function (item) {
    item.classList.remove(config.itemExpandedClass);
  };

  var toggleItem = function (item) {
    if (itemIsExpanded(item)) collapseItem(item);
    else expandItem(item);
  };

  var itemIsExpanded = function (item) {
    return item.classList.contains(config.itemExpandedClass);
  };

  return {
    init: init,
    expand: expandItem,
    collapse: collapseItem,
    toggle: toggleItem,
  };
}());

/**
 * Init ListAccordion constructor
 * @return {void} ListAccordion.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-list-description--accordion').length) {
    BsListAccordion.init({
      item: '.bs-list-description__item',
      toggleButton: '.bs-list-description__title',
    });
  }
});

var BsDownloadsList = function (element, options) {
  // Config List and Select
  var elem = element;
  var config = {};
  var setConfig = function (el) {
    return {
      el: el,
      body: document.querySelector('body'),
      items: el.querySelectorAll('.bs-download__item'),
      itemsInput: el.querySelectorAll('.bs-js-downloads-input'),
      filterForm: el.querySelector('.bs-js-downloads-filter'),
      filterInputs: el.querySelectorAll('.bs-js-downloads-filter .bs-form__field'),
      categories: el.querySelectorAll('.bs-download__list'),
      accordionButton: el.querySelectorAll('.bs-js-open-accordion'),
      accordion: el.querySelectorAll('.bs-download__content--accordion'),
      accordionList: el.querySelectorAll('.bs-download--accordion'),
      downloadButton: el.querySelector('.bs-js-downloads-button'),
      accordionContentClass: 'bs-js-download__content--accordion',
      itemActiveClass: 'bs-download__item--active',
      categoryActiveClass: 'bs-download__list--active',
      accordionOpenClass: 'bs-download__list--open',
      accordionResizer: null,
      lastInputChecked: null,
      zipOnClient: true,
      zipFileId: null,
      downloadProgress: new BsSnackProgress(),
      downloadIsActive: false,
    };
  };

  var init = function () {
    if (!elem || typeof elem !== 'object') return;
    config = setConfig(elem);

    // Init download progress
    config.downloadProgress.init();
    config.downloadProgress.onCancel(abortdownload);

    // Add event for filters
    Array.prototype.forEach.call(config.filterInputs, function (input) {
      if (input) {
        if (input.name === 'year') buildYearSelect(input);
        input.addEventListener('change', function (event) {
          handleFilters(event.target);
          adjustAccordionItemsHeight();
        });
      }
    });

    // Toggle accordion item on click
    Array.prototype.forEach.call(config.accordionButton, function (el) {
      el.addEventListener(
        'click',
        toggleAccordionItem.bind(null, el)
      );
    });

    // Check if there's an accordion item active and adjust its height
    Array.prototype.forEach.call(config.accordionList, function (el) {
      var accOpen = el.classList.contains(config.accordionOpenClass);

      if (accOpen) {
        var content = el.querySelector('.' + config.accordionContentClass);
        var contentHeight = content.scrollHeight;
        el.classList.add(config.accordionOpenClass);
        content.style.height = contentHeight + 'px';
      }
    });

    // Add event for all checkboxes
    Array.prototype.forEach.call(config.itemsInput, function (input) {
      input.addEventListener('click', handleItemsCheckbox);
    });

    window.addEventListener('resize', function () {
      clearTimeout(config.accordionResizer);
      config.accordionResizer = setTimeout(function () {
        adjustAccordionItemsHeight();
      }, 300);
    });

    if (config.downloadButton) {
      config.downloadButton.addEventListener('click', addDownloadListener);
    }
  };

  // --------------------------------
  // Accordion
  // --------------------------------

  /**
   * Check if accordion item's expanded
   * @param  {object}  el  an HTML element of the accordion item
   * @return {boolean}     true if accordion item is open
   */
  var isAccordionOpen = function (el) {
    var item = getParent(el, 'bs-download__list');
    // var item2 = closest(el, '.bs-download__list');
    // debugger;
    return item.classList.contains(config.accordionOpenClass);
  };

  /**
   * toggle Accordion Item
   * @param  {object} el HTML element of the accordion item
   * @return {void}
   */
  var toggleAccordionItem = function (el) {
    if (isAccordionOpen(el)) closeAccordionItem(el);
    else openAccordionItem(el);
  };

  /**
   * open Accordion Item
   * @param  {object} el HTML element of the accordion item
   * @return {void}
   */
  var openAccordionItem = function (el) {
    var item = getParent(el, 'bs-download__list');
    var content = item.querySelector('.' + config.accordionContentClass);
    var contentHeight = content.scrollHeight;

    item.classList.add(config.accordionOpenClass);
    content.style.height = contentHeight + 'px';
  };

  /**
   * close Accordion Item
   * @param  {object} el HTML element of the accordion item
   * @return {void}
   */
  var closeAccordionItem = function (el) {
    var item = getParent(el, 'bs-download__list');
    var content = item.querySelector('.' + config.accordionContentClass);

    item.classList.remove(config.accordionOpenClass);
    content.style.height = 0;
  };

  /**
   * Adjust Height of all Accordion Items
   * When items are filtered or the viewport changes, the height of each
   * accordion item must be adjusted according to its content height
   *
   * @return {void}
   */
  var adjustAccordionItemsHeight = function () {
    var activeItems = config.el.querySelectorAll('.bs-download--accordion.' + config.accordionOpenClass);

    // if has expanded items
    if (activeItems.length) {
      Array.prototype.forEach.call(activeItems, function (item) {
        var itemChildren = item.querySelectorAll('.bs-download__item');
        var content = item.querySelector('.' + config.accordionContentClass);
        // sum of each children height
        var childrenHeight = Array.prototype.reduce.call(itemChildren, function (total, subitem) {
          total += subitem.scrollHeight;
          return total;
        }, 0);
        // update accordion item height
        content.style.height = childrenHeight + 'px';
      });
    }
  };

  // --------------------------------
  // Downloads of multiple items
  // --------------------------------

  /**
   * handle Items Checkbox
   * @param  {object}  event  a change event
   * @return {void}
   */
  var handleItemsCheckbox = function (event) {
    var inputEl = event.target;
    var selectedInputs = null;
    var progressText = function (itemsAmount) {
      var text = '';
      text += itemsAmount + ' arquivo' + (itemsAmount > 1 ? 's ' : '');
      text += ' selecionado' + (itemsAmount > 1 ? 's' : '');
      return text;
    };

    // enable/disable download button
    toggleDownloadButton();
    // shift-select multiple items
    shiftSelectMultipleItems(event);
    // toggle item active style
    toggleItemCheckbox(inputEl);

    // get the updated list of checked
    selectedInputs = getCheckedItems();

    // if there's checked items, show snackbar
    if (selectedInputs.length) {
      config.downloadProgress.show();
      config.downloadProgress.setProgress('', progressText(selectedInputs.length));
      config.downloadProgress.activeButton('icon-nav-baixar', 'Fazer download', addDownloadListener);
    } else {
      config.downloadProgress.hide();
      config.downloadProgress.disableButton();
    }
  };

  var addDownloadListener = function () {
    var filename = config.downloadButton.dataset.zipFilename;
    generateZipFile(filename);
  };

  var abortdownload = function () {
    // Reset progress
    config.downloadProgress.elements.progress.classList.remove('bs-progress--is-loading');
    config.downloadProgress.setProgress();
    config.downloadProgress.hide();

    // Disable download button and uncheck items
    uncheckAllItems();
    toggleDownloadButton();

    // Abort if on downloading or zipping process
    config.downloadIsActive = false;

    return false;
  };

  /**
   * get checked items
   * @return {array} list of checked inputs
   */
  var getCheckedItems = function () {
    return config.el.querySelectorAll('.bs-js-downloads-input:checked');
  };

  /**
   * Check all items
   */
  var checkAllItems = function () {
    Array.prototype.forEach.call(config.itemsInput, function (el) {
      toggleItemCheckbox(el, true);
    });
  };

  /**
   * Uncheck all items
   */
  var uncheckAllItems = function () {
    var checkedInputs = getCheckedItems();
    Array.prototype.forEach.call(checkedInputs, function (el) {
      toggleItemCheckbox(el, false);
    });
  };

  /**
   * toggle Item Checkbox
   * @param  {object}  checkbox  the HTML element of the checkbox
   * @param  {boolean} check     force check true/false
   * @return {void}
   */
  var toggleItemCheckbox = function (checkbox, check) {
    // Get div parent to apply conditions
    var inputItem = checkbox.closest('.bs-download__item');
    var checked = (typeof check === 'boolean') ? check : checkbox.checked;

    // If checkbox is checked or should be forced to
    if (checked) {
      checkbox.checked = true;
      inputItem.classList.add(config.itemActiveClass);
    // If checkbox is unchecked or should be forced to
    } else {
      checkbox.checked = false;
      inputItem.classList.remove(config.itemActiveClass);
    }
  };

  /**
   * toggle Download Button
   * @return {void}
   */
  var toggleDownloadButton = function () {
    var downloadButton = config.downloadButton;
    var downloadButtonTitle = '';
    var hasInputChecked = getCheckedItems().length;

    if (downloadButton) {
      // enable download button if has some input checked
      if (!hasInputChecked) {
        downloadButtonTitle = downloadButton.getAttribute('data-disable-title') || '';
        downloadButton.title = downloadButtonTitle;
        downloadButton.classList.add('bs-button--disabled');
        downloadButton.disabled = true;
      // disable download button if hasn't any input checked
      } else {
        downloadButtonTitle = downloadButton.getAttribute('data-active-title') || '';
        downloadButton.title = downloadButtonTitle;
        downloadButton.classList.remove('bs-button--disabled');
        downloadButton.disabled = '';
      }
    }
  };

  /**
   * Shift-select Multiple Items
   * Select all checkboxes between lastChecked and currentChecked if
   * shiftKey is pressed during click
   *
   * @param  {Object} e  a click event in a checkbox
   * @return {void}
   */
  var shiftSelectMultipleItems = function (e) {
    var input = e.target;
    var start = null;
    var end = null;

    if ((input || {}).type !== 'checkbox') return;

    if (!config.lastInputChecked) {
      config.lastInputChecked = input;
      return;
    }

    if (e.shiftKey) {
      start = Array.prototype.indexOf.call(config.itemsInput, config.lastInputChecked);
      end = Array.prototype.indexOf.call(config.itemsInput, input);

      if (Math.abs(start - end) > 1) {
        Array.prototype.slice.apply(config.itemsInput, [
          Math.min(start, end),
          Math.max(start, end) + 1,
        ]).forEach(function (item) {
          toggleItemCheckbox(item, true);
        });
      }
    }

    config.lastInputChecked = input;
  };

  /**
   * Zip File Generate
   * @param  {String} zipName Name of the zip file
   */
  var generateZipFile = function (zipName) {
    var checkedInputs = config.el.querySelectorAll('.bs-js-downloads-input:checked');
    var zip = null;
    var progress = null;
    var percentage = -1;
    var partialPercentage = 0;
    var urls = [];

    // Check if all dependencies exists
    if (
      !config.zipOnClient ||
      typeof JSZip === 'undefined' ||
      typeof saveAs === 'undefined' ||
      typeof forEachPromise === 'undefined' ||
      typeof get === 'undefined'
    ) return;

    // Set default value for zipName
    if (typeof zipName !== 'string') zipName = 'download.zip';

    // If there's one or more inputs checked
    if (checkedInputs.length) {
      // create an array with the URL of the files
      // of each checked input to ZIP
      urls = Array.prototype.map.call(checkedInputs, function (item) {
        var downloadItem = item.closest('.bs-download__item');
        var href = downloadItem.querySelector('a').href;
        return href;
      });

      // Start JSZip and BsSnackProgress
      zip = new JSZip();
      progress = config.downloadProgress;
      progress.elements.progress.classList.add('bs-progress--is-loading');
      progress.disableButton();
      progress.show();
      // console.log('starting downloads');
      progress.setProgress(0, 'Baixando ' + urls.length + ' arquivo' + (urls.length > 1 ? 's' : ''));

      // Set true to downloadIsActive
      // It's used to cancel the process (zipping process just run when it's
      // true, so a cancel action just need to set it to false) since JSZip
      // have no abort method
      config.downloadIsActive = true;

      // loop for each URL as a promise
      forEachPromise(urls, function (filepath) {
        var filename = getFilenameFromPath(filepath);

        // console.log('starting ' + filename);
        // progress.setProgress(0);

        if (!config.downloadIsActive) return;

        // Request XMLHttp from url
        return get(filepath, function (event) {
          if (event.lengthComputable) {
            var filePercentage = parseInt((event.loaded / event.total) * 100, 10);
            var partialFilePercentage = parseInt(filePercentage / urls.length, 10);
            var newPercentage = partialPercentage + partialFilePercentage;
            var interval = setInterval(function () {
              if (newPercentage > percentage) {
                // Update total percentage
                // The total value is the higher number between the sum of the
                // last partial percentage with the current file partial percentage
                // and the current percentage
                percentage = newPercentage;

                // update progress
                // console.log('downloading ' + filename, percentage);
                progress.setProgress(percentage);
              }

              // when the single file is downloaded, update the partial
              // percentage with the current percentage value
              if (filePercentage >= 100) {
                clearInterval(interval);
                partialPercentage = percentage;
                progress.setProgress(percentage);
              }
            }, 10);

            if (!config.downloadIsActive) this.abort();

            if (filePercentage >= 100) {
              clearInterval(interval);
              percentage = newPercentage;
              partialPercentage = percentage;
              progress.setProgress(percentage);
            }
          } else {
            // Unable to compute progress information since the total size is unknown
            console.warn('Unable to compute progress information since the total size is unknown');
          }
        })
        // get then
          .then(function (response) {
            // console.log('adding to zip', percentage);
            zip.file(getFilenameFromPath(filepath), response);
          }, function (error) {
            console.error(error);
          });
      })
      // forEachPromise then
        .then(function () {
          var zipPercentage = 0;

          // console.log('all files downloaded');
          // console.log('starting zipping');

          progress.setProgress(0, 'Compactando');

          // If there's no "valid" (status 200) files to zip
          // Abort zipping and throw error
          if (Object.keys(zip.files).length === 0) {
            abortdownload();
            throw new Error('No files found to zip');
          }

          // Stop if zip is no active
          if (!config.downloadIsActive) return;

          // start zipping process
          zip.generateAsync({ type: 'blob' }, function updateCallback(metadata) {
            // https://github.com/Amin52J/Download-Progress/blob/master/dist/download-progress.js
            var currentZipPercentage = parseInt(metadata.percent, 10);
            var newPercentage = (
              currentZipPercentage > zipPercentage
            ) ? currentZipPercentage : zipPercentage;

            // console.log(metadata.percent);
            // progress.setProgress(metadata.percent);

            if (!config.downloadIsActive) {
              clearInterval(zipInterval);
              return false;
            }

            var zipInterval = setInterval(function () {
              if (currentZipPercentage >= 100) {
                clearInterval(zipInterval);
                progress.setProgress(currentZipPercentage);
                return;
              }

              // zipPercentage = newPercentage;;
              // console.log(zipPercentage + '%');
              progress.setProgress(currentZipPercentage);

              clearInterval(zipInterval);
            }, 100);

            if (currentZipPercentage >= 100) {
              // clearInterval(zipInterval);
              // progress.setProgress(currentZipPercentage, 'c');
            }
          }).then(function (content) {
            // console.log('finish zipping');
            // console.log('save file');
            // debugger;

            // Stop if zip is no active
            if (!config.downloadIsActive) return;
            // console.log('fim');

            setTimeout(function () {
              progress.setProgress('', 'Download concluído!');
              progress.elements.progress.classList.remove('bs-progress--is-loading');
              uncheckAllItems();
              setTimeout(function () {
                progress.hide();
              }, 5000);

              // Stop if zip is no active
              if (!config.downloadIsActive) return;

              // run saveAs on browser
              saveAs(content, zipName);
            }, 1000);
          });
        });
    }
  };

  var storeZipFile = function (content) {
    config.zipFileId = Date.now();
    // Salva os dados na sessionStorage
    sessionStorage.setItem(config.zipFileId, content);
  };

  var getZipFile = function () {
    // Obtém os dados da sessionStorage
    return sessionStorage.getItem(config.zipFileId);
  };

  // --------------------------------
  // Filter Items
  // --------------------------------

  /**
   * Retorna um array com todos os anos de acordo com os itens para download
   *
   * @param  {object} parentEl um elemento pai de todos os itens
   * @return {array}           array com os anos disponíveis
   */
  var getActiveYears = function () {
    var arrYears = [];
    var categories = config.el.querySelectorAll('.bs-download__list--active');

    arrYears = Array.prototype.reduce.call(categories, function (years, category) {
      var itemYears = getYearsByCategory(category);
      if (category.style.display !== 'none') {
        itemYears.forEach(function (year) {
          if (!years.includes(year)) years.push(year);
        });
      }
      return years;
    }, []);

    return arrYears.sort(function (a, b) { return a - b; }).reverse();
  };

  /**
   * Cria um array com todos os anos de acordo com os itens para download
   *
   * @param  {object}  category   um elemento pai de todos os itens
   * @param  {boolean} onlyActive ...
   * @return {array}              array com os anos disponíveis
   */
  var getYearsByCategory = function (category, onlyActive) {
    var arrYears = [];
    var items = null;

    if (!category || typeof category !== 'object') return arrYears;
    if (typeof onlyActive !== 'boolean') onlyActive = false;

    items = category.querySelectorAll('.bs-download__item[data-download-year]');

    arrYears = Array.prototype.reduce.call(items, function (years, item) {
      var itemYears = item.getAttribute('data-download-year').split(' ');
      if (onlyActive) {
        if (item.style.display !== 'none') {
          itemYears.forEach(function (year) {
            if (!years.includes(year)) years.push(year);
          });
        }
      } else {
        itemYears.forEach(function (year) {
          if (!years.includes(year)) years.push(year);
        });
      }
      return years;
    }, []);

    return arrYears.sort(function (a, b) { return a - b; }).reverse();
  };

  /**
   * Cria um array com todos os anos de acordo com os itens para download
   *
   * @param  {string} year um elemento pai de todos os itens
   * @return {array}       array com os anos disponíveis
   */
  var getCategoriesByYear = function (year) {
    var arrCategories = [];

    if (typeof year !== 'string' || year === '') return arrCategories;

    Array.prototype.forEach.call(config.categories, function (category) {
      var items = category.querySelectorAll('.bs-download__item[data-download-year]');

      Array.prototype.some.call(items, function (item) {
        var itemYears = item.getAttribute('data-download-year').split(' ');
        if (itemYears.includes(year)) return arrCategories.push(category);
      });
    });

    return arrCategories;
  };

  /**
   * Cria o filtro de ano
   * Popula o select de filtro de anos de acordo com os anos cadastrados nos itens
   *
   * @param  {object} select a tag select que vai receber os anos como options
   * @return {void}
   */
  var buildYearSelect = function (select) {
    var years = getActiveYears();

    years.forEach(function (year) {
      var option = document.createElement('option');
      option.value = year;
      option.textContent = year;
      select.appendChild(option);
    });
  };

  var handleFilters = function (select) {
    var categoryInput = config.filterForm.querySelector('.bs-form__field[name="category"]');
    var yearInput = config.filterForm.querySelector('.bs-form__field[name="year"]');
    var selectedCategoryId = (categoryInput && categoryInput.value) ? categoryInput.value : null;
    var selectedCategory = config.el.querySelector('[data-download-category="' + selectedCategoryId + '"]');
    var selectedYear = (yearInput && yearInput.value) ? yearInput.value : null;
    // var categoryOptions = (categoryInput) ? categoryInput.querySelectorAll('option') : null;
    var yearOptions = (yearInput) ? yearInput.querySelectorAll('option') : null;
    var categories = config.categories;
    var activeCategories = null;
    var activeYears = [];

    /**
     * Filtra a lista de downloads por categorias de downloads
     */
    Array.prototype.forEach.call(categories, function (category) {
      // ID da categoria atual
      var categoryId = category.getAttribute('data-download-category');
      // Itens para download da categoria atual
      var categoryItems = category.querySelectorAll('[data-download-year]');
      var hideGroup = true;

      // Se há uma categoria seleciona no filtro e não for essa, esconde
      if (selectedCategoryId) {
        if (selectedCategoryId === categoryId) hideGroup = false;
      } else {
        hideGroup = false;
      }

      // Se há um ano selecionado no filtro, reseta a hideGroup para o filtro
      // de ano tratar se esconde ou não o grupo
      if (selectedYear) {
        hideGroup = true;
      }

      // Se não há categorias selecionadas ou se a categoria selecionado
      // for a categoria atual no loop
      if (!selectedCategoryId || selectedCategoryId === categoryId) {
        // Se há itens dentro dessa categoria
        if (categoryItems && categoryItems.length) {
          /**
          * Filtra os itens da lista de downloads por ano
          */
          Array.prototype.forEach.call(categoryItems, function (item) {
            // Anos cadastrados para o item
            var itemYears = item.getAttribute('data-download-year').split(' ');

            // Se o filtro de anos existe, não está vazio e este item
            // NÃO possui o ano filtrado, esconde o item
            if (yearInput && yearInput.value) {
              if (!itemYears.includes(yearInput.value)) {
                item.style.display = 'none';
              } else {
                item.style.display = '';
                hideGroup = false;
              }
            } else {
              item.style.display = '';
              hideGroup = false;
            }
          });
        }
      }

      // Esconde a categoria
      if (hideGroup) {
        category.classList.remove(config.categoryActiveClass);
        category.style.display = 'none';
      } else {
        category.classList.add(config.categoryActiveClass);
        category.style.display = '';
      }
    });

    if (categoryInput && select === yearInput) {
      activeCategories = getCategoriesByYear(selectedYear);
      if (categories) {
        Array.prototype.forEach.call(categories, function (category) {
          var id = category.getAttribute('data-download-category');
          var option = categoryInput.querySelector('option[value="' + id + '"]');
          if (activeCategories.length && !activeCategories.includes(category)) {
            option.style.display = 'none';
            option.style.color = 'red';
            option.disabled = 'disabled';
          } else {
            option.style.display = '';
            option.style.color = '';
            option.disabled = '';
          }
        });
      }
    }

    if (yearInput && select === categoryInput) {
      activeYears = getYearsByCategory(selectedCategory);
      yearOptions = yearInput.querySelectorAll('option');
      if (yearOptions.length) {
        Array.prototype.forEach.call(yearOptions, function (option) {
          if (option.value && activeYears.length && !activeYears.includes(option.value)) {
            option.style.display = 'none';
            option.style.color = 'red';
            option.disabled = 'disabled';
          } else {
            option.style.color = '';
            option.style.display = '';
            option.disabled = '';
          }
        });
      }
    }
  };

  return {
    init: init,
    progress: function () {
      return config.downloadProgress
    },
    filter: handleFilters,
  };
};

/**
 * Init Modal Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  window.downloadsArr = [];
  var downloads = document.querySelectorAll('.bs-download');
  if (downloads.length) {
    var download = null;
    Array.prototype.forEach.call(downloads, function (el) {
      download = new BsDownloadsList(el);
      download.init();
      downloadsArr.push(download);
    });
  }
});

/**
 * Script mapa + card telefone
 */
var MultiMarkerMap = (function () {

  var mapElementAll = document.querySelectorAll('.pi-maps');

  var init = function (mapSelector) {
    var mapElement = document.querySelector(mapSelector);
    
    Array.prototype.forEach.call(mapElementAll, function (elem) {
      var config = {
        mapEl: elem,
        mapLocations: elem.querySelectorAll('.bs-map-info__location'),
        centerPointLat: elem.getAttribute('data-map-lat'),
        centerPointLng: elem.getAttribute('data-map-lng'),
        insideTitle: '',
        insideAddress: '',
        insideLat: '',
        insideLng: '',
        finalList: [],
      };
      
      Array.prototype.forEach.call(config.mapLocations, function (e, index) {
        config.insideTitle = e.getAttribute('data-title');
        config.insideAddress = e.getAttribute('data-address');
        config.insideLat = e.getAttribute('data-lat');
        config.insideLng = e.getAttribute('data-lng');
  
        var listInside = {
          id: index,
          address: config.insideAddress,
          lat: config.insideLat,
          lng: config.insideLng,
          fn: function () { return scrollTo(index); },
          infoWindow: {
            show: false,
            title: config.insideTitle,
          },
        };
  
        config.finalList.push(listInside);
  
      });
  
      if (config.mapEl && config.finalList.length) {
        var options = {
          mapHeight: 500,
          locations: config.finalList,
          mapOptions: {
            zoom: 14,
            center: new google.maps.LatLng(config.centerPointLat, config.centerPointLng),
            mapTypeId: google.maps.MapTypeId.ROADMAP,
          },
        };
  
        BsMaps.init(config.mapEl, options);
      } 
    });
  };

  var scrollTo = function (elementId) {
    var targetAnchor = document.querySelector('[data-scroll-anchor="' + elementId + '"]');

    if (targetAnchor) {
      var scroll = new SmoothScroll();
      var currentActive = targetAnchor.parentNode.querySelector('.bs-is-active');
      if (currentActive) currentActive.classList.remove('bs-is-active');
      targetAnchor.classList.add('bs-is-active');
      scroll.animateScroll(targetAnchor, 0, { speed: 300 });
    }
  };


  var mapAddress = function (add) {
    var geocoder;
    var map;
    var marker;

    var options = {
      zoom: 18,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.querySelector(".bs-js-map"), options);
    geocoder = new google.maps.Geocoder();
    marker = new google.maps.Marker({
      map: map,
      draggable: true,
    });

    geocoder.geocode({ 'address': add + ', Brasil', 'region': 'BR' }, function (results, status) {

      if (status == google.maps.GeocoderStatus.OK) {
        if (results[0]) {
          var latitude = results[0].geometry.location.lat();
          var longitude = results[0].geometry.location.lng();

          var location = new google.maps.LatLng(latitude, longitude);
          marker.setPosition(location);
          map.setCenter(location);
          map.setZoom(15);
        }
      }
    });
  };

  return {
    init: init,
  };
}());

/**
 * Init MultiMarkerMap constructor
 * @return {void} MultiMarkerMap.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.pi-maps').length) {
    initGoogleMap(function () {
      MultiMarkerMap.init('.bs-js-map');
    });
  }
});

/**
 * BsMediaSlider
 * @return Module config
 */
var BsMediaSlider = (function () {

  // Config
  var config = {
    containers: document.querySelectorAll('.bs-js-slider'),
  }

  var init = function () {

    Array.prototype.forEach.call(config.containers, function(e) {
      var container = e;
      setTimeout(function () {
        initCarouselContainer(container);
      }, 400);
    });
  };

  var initCarouselContainer = function ( container ) {

    var carousel = container.querySelector('.bs-media__list');
    var panel = container.querySelector('.bs-media__nav .bs-media__list');
    var loading = container.querySelector('.bs-loading');

    var flkty = new Flickity(carousel, {
      asNavFor: panel,
      groupCells: 'true',
      cellAlign: 'left',
      contain: true,
      prevNextButtons: false,
      on: {
        ready: function() {
          loading.parentNode.removeChild(loading);
        }
      }
    });

    // nav items content

   if (panel) {

      flktyA = new Flickity(panel, {
        pageDots: false,
        cellAlign: 'left',
        prevNextButtons: false,
        adaptiveHeight: true,
      });

      var navClose = container.querySelector('.bs-media__nav--close');
      var navContent = container.querySelector('.bs-media__nav');
      var navItem = container.querySelectorAll('.bs-media__item');

      Array.prototype.forEach.call(navItem, function(e) {

        e.addEventListener('click', function() {

          setTimeout( function() {
            navContent.classList.add('bs-media__nav--active');
          }, 400);
        });
      });


      navClose.addEventListener('click', function() {
        navContent.classList.remove('bs-media__nav--active');
      });

    }

    // buttons actions move - left
    var previousButton = container.querySelector('.bs-media__arrow-prev');
    previousButton.addEventListener('click', function() {
      flkty.previous();
    });

    // buttons actions move - right
    var nextButton = container.querySelector('.bs-media__arrow-next');
    nextButton.addEventListener('click', function() {
      flkty.next();
    });

    // flkty.on( 'scroll', function() {
    //   flkty.destroy()
    //   flkty = new Flickity(panel);
    // });

    nextButton.removeAttribute('disabled', 'disabled');
    carousel.classList.add('bs-media__list--linear-next');


    flkty.on('cellSelect', function () {

      // class add or remove effect over in position initial
      if (!flkty.cells[flkty.selectedIndex - 1]) {

        nextButton.removeAttribute('disabled', 'disabled');
        carousel.classList.add('bs-media__list--linear-next');

        previousButton.setAttribute('disabled', 'disabled');
        carousel.classList.remove('bs-media__list--linear-prev');

        // class add or remove effect over in position final
      } else if(!flkty.cells[flkty.cells.length]) {

        previousButton.removeAttribute( 'disabled', 'disabled' );
        carousel.classList.add('bs-media__list--linear-prev');

        // class add or remove effect over in middle position to items big than sides
        if (flkty.selectedIndex === (flkty.pageDots.dots.length - 1)) {

          nextButton.setAttribute('disabled', 'disabled');
          carousel.classList.remove('bs-media__list--linear-next');
        } else {

          previousButton.removeAttribute('disabled', 'disabled');
          nextButton.removeAttribute('disabled', 'disabled');

          carousel.classList.add('bs-media__list--linear-next');
          carousel.classList.add('bs-media__list--linear-prev');
        }
      }
    });


    if (!carousel.classList.contains('is-draggable')) {
      carousel.parentNode.querySelector('.bs-media__arrows').style.display = 'none';
    }
  }

  return {
    init: init,
  };
}());

/**
 * Init Menu Constructor
 * @return {void} Menu.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelector('.bs-media__slider')) {
    BsMediaSlider.init();
  }
});

/**
 * Menu
 * @return Module config
 */
var Menu = (function () {
  // Class Modifiers
  var modClass = {
    overflowHidden: 'bs-overflow--hidden',
    hamburgerActive: 'bs-header__nav-toggle--open',
    menuActive: 'bs-menu--open',
    menuItemHasChild: 'bs-menu__item--has-child',
    menuItemOpen: 'bs-menu__item--open',
    menuListOpen: 'bs-menu__sublist--open',
    overlayBg: 'bs-overlay--nav',
    visible: 'bs-is-visible',
  };

  // DOM Elements
  var el = {
    body: document.querySelector('body'),
    closeMenu: document.querySelector('.js-close-menu'),
    currentMenu: document.querySelector('.bs-menu__sublist--current'),
    sublist: document.querySelectorAll('.bs-menu__sublist'),
    // true = voltando
    // false = próximo menu
    direction: '',
    nextMenu: '',
    hamburger: document.querySelector('.bs-header__nav-toggle'),
    menu: document.querySelector('.bs-menu'),
    menuButtons: document.querySelectorAll('.js-menu-item'),
    overlay: document.querySelector('.bs-overlay'),
  };

  var init = function () {
    // Toggle menu
    if (el.hamburger) {
      el.hamburger.addEventListener('click', _openMenu);
    }

    // Expand sublists inside main Menu
    if (el.menuButtons) {
      Array.prototype.forEach.call(el.menuButtons, function (element) {
        element.addEventListener('click', function (event) {
          var currentMenu = getParents(element, 'js-menu', true)[0];
          var direction = element.classList.contains('bs-menu__back');
          var parent = element.closest('.bs-menu__item');
          var nextMenu;

          if (direction) {
            // get previous menu (parent menu)
            nextMenu = getParents(element, 'js-menu')[1];
          } else if (element.nextElementSibling) {
            // or get the submenu
            nextMenu = element.nextElementSibling;
          } else {
            // fix when weblibras is active
            nextMenu = parent.querySelector('.js-menu');
          }

          // check if there's a submenu for this item
          if (nextMenu) {
            event.preventDefault();
            currentMenu.scrollTop = 0;

            // open it
            _updatePositions(currentMenu, nextMenu, direction);
            _openSubMenu();
          } else {
            // add class current
          }
        });
      });
    }

    // Close menu on esc key press
    document.addEventListener('keyup', function (e) {
      if (el.menu.classList.contains(modClass.menuActive)) if (e.keyCode === 27) _closeMenu();
    });

    // Close menu
    el.closeMenu.addEventListener('click', function () {
      _closeMenu();
    });

    // Close menu on click outside
    Array.prototype.forEach.call(document.querySelectorAll('body, html'), function (element) {
      element.addEventListener('click', function (event) {
        if (
          el.menu.classList.contains(modClass.menuActive) &&
          !el.menu.contains(event.target) &&
          !el.hamburger.contains(event.target)) {
          _closeMenu();
          return false;
        }
      });
    });
  };

  var _openSubMenu = function () {
    _menuOut();
    _menuIn();
  };

  var _menuOut = function () {
    el.currentMenu.classList.remove(modClass.menuListOpen);
  };

  var _menuIn = function () {
    el.nextMenu.classList.add(modClass.menuListOpen);

    _updatePositions(el.nextMenu, '', el.direction);
  };

  var _updatePositions = function (currentMenu, nextMenu, direction) {
    el.currentMenu = currentMenu;
    el.nextMenu = nextMenu;
    el.direction = direction;
  };

  var _openMenu = function () {
    el.hamburger.classList.add(modClass.hamburgerActive);
    el.menu.classList.add(modClass.menuActive);
    el.body.classList.add(modClass.overflowHidden);
    el.overlay.classList.add(modClass.visible);
    el.overlay.classList.add(modClass.overlayBg);
  };

  var _closeMenu = function () {
    el.hamburger.classList.remove(modClass.hamburgerActive);
    el.menu.classList.remove(modClass.menuActive);
    el.body.classList.remove(modClass.overflowHidden);
    el.overlay.classList.remove(modClass.visible);
    el.overlay.classList.remove(modClass.overlayBg);

    Array.prototype.forEach.call(el.sublist, function (element) {
      if (element.classList.contains(modClass.menuListOpen)) {
        element.classList.remove(modClass.menuListOpen);
      }
    });
  };

  return {
    init: init,
  };
}());

/**
 * Init Menu Constructor
 * @return {void} Menu.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelector('.bs-menu')) {
    Menu.init();
  }
});

/**
 * Menu com Dropdown
 */
var BsQuickMenuDrop = (function () {
  // Config
  var config = {
    buttons: {
      back: document.querySelectorAll('.bs-quick-menu__back'),
      item: document.querySelectorAll('.bs-quick-menu__menu .bs-quick-menu__item'),
      triggerMenu: document.querySelectorAll('.bs-js-quick-trigger-menu'),
    },
    classes: {
      itemSubmenuOpen: 'bs-quick-menu__item--sub-open',
      menuOpen: 'bs-quick-menu__menu--open',
      sortable: 'bs-quick-menu__menu--sortable',
      subSubmenuOpen: 'bs-quick-menu__menu--sub-open',
      triggerMenuActive: 'bs-quick-menu__item--active',
    },
    container: document.querySelector('.bs-quick-menu'),
    menu: document.querySelectorAll('.bs-quick-menu__menu'),
    wrapper: document.querySelector('.bs-quick-menu__dropdown'),
    sortable: document.querySelectorAll('.bs-quick-menu__menu.bs-quick-menu__menu--sortable'),
  };

  var init = function () {

    // Recalcula o posicionamento do menu
    setTimeout(function () {
      _calcSubmenuPosition();
    }, 500);

    window.addEventListener('resize', function () {
      _calcSubmenuPosition();
    });

    window.addEventListener('scroll', function () {
      _closeAllMenus();
    });

    config.container.addEventListener('scroll', function () {
      _closeAllMenus();
    });

    _initShadow();

    if (config.buttons.triggerMenu) {
      Array.prototype.forEach.call(config.buttons.triggerMenu, function (button) {
        button.addEventListener('click', function (event) {
          event.preventDefault();
          _calcSubmenuPosition();

          var menu = button.querySelector('.bs-quick-menu__menu');
          var isMenuOpen = (menu.classList.contains(config.classes.menuOpen)) === true;

          if (isMenuOpen && menu) {
            _closeMenu(menu)
          } else {
            _closeAllMenus();
            _openMenu(menu);
          }
        });
      });
    }

    if (config.buttons.item) {
      Array.prototype.forEach.call(config.buttons.item, function (button) {
        var submenu = button.querySelector('.bs-quick-menu__submenu');
        console.log(submenu)

        if (submenu) {
          button.addEventListener('click', function (event) {
            event.stopPropagation();
            var parentMenu = button.parentNode;

            parentMenu.classList.add(config.classes.subSubmenuOpen);
            button.classList.add(config.classes.itemSubmenuOpen);
          });
        }
      });
    }

    if (config.buttons.back) {
      Array.prototype.forEach.call(config.buttons.back, function (button) {
        button.addEventListener('click', function (event) {
          event.stopPropagation();
          event.preventDefault();

          var menuItem = getParents(button, config.classes.itemSubmenuOpen, true)[0];
          var menu = getParents(button, config.classes.subSubmenuOpen, true)[0];

          if (menuItem) {
            menuItem.classList.remove(config.classes.itemSubmenuOpen);
            menu.classList.remove(config.classes.subSubmenuOpen);
          }
        });
      });
    }

    if (config.sortable) {
      Array.prototype.forEach.call(config.sortable, function (menu) {
        dragula([menu], {
          moves: function (el, source, handle, sibling) {
            return (!el.classList.contains('bs-quick-menu__favorite')) && true;
          },
        });
      });


    }

    // Fecha o menu quando clicar fora dele
    Array.prototype.forEach.call(document.querySelectorAll('body, html'), function (element) {
      element.addEventListener('click', function (event) {
        var parentMenu = getParent(event.target, 'bs-quick-menu__dropdown');
        if (!parentMenu) {
          _closeAllMenus();
          return false;
        }
      });
    });
  };

  // Calcula a posição em que o submenu deve abrir
  var _calcSubmenuPosition = function () {
    var menus = config.menu;

    Array.prototype.forEach.call(menus, function (menu) {
      var left = menu.parentNode.getBoundingClientRect().left;
      var top = menu.parentNode.getBoundingClientRect().bottom;

      if (window.innerWidth >= 576) {
        menu.style.left = left + 'px';
      } else {
        // No mobile o menu é 100%, então não deve ser setado a posição left
        menu.style.removeProperty('left');
      }
      menu.style.top = top + 'px';
    });
  };

  var _openMenu = function (menu) {
    menu.parentNode.classList.add(config.classes.triggerMenuActive);
    menu.classList.add(config.classes.menuOpen);
  };

  var _closeMenu = function (menu) {
    menu.parentNode.classList.remove(config.classes.triggerMenuActive);
    menu.classList.remove(config.classes.menuOpen);
  };

  var _closeAllMenus = function () {
    var openedMenus = document.querySelectorAll('.' + config.classes.menuOpen);
    var openedSubmenus = document.querySelectorAll('.' + config.classes.subSubmenuOpen);
    var openedItems = document.querySelectorAll('.' + config.classes.itemSubmenuOpen);

    Array.prototype.forEach.call(openedMenus, function (menu) {
      menu.classList.remove(config.classes.menuOpen);
      menu.parentNode.classList.remove(config.classes.triggerMenuActive);
    });

    Array.prototype.forEach.call(openedSubmenus, function (submenu) {
      submenu.classList.remove(config.classes.subSubmenuOpen);
    });

    Array.prototype.forEach.call(openedItems, function (item) {
      item.classList.remove(config.classes.itemSubmenuOpen);
    });
  };

  var _initShadow = function () {
    const shadowStart = document.querySelector('.bs-quick-menu__shadow--start');
    const shadowEnd = document.querySelector('.bs-quick-menu__shadow--end');

    /**
     * Define se as sombras devem estar visíveis
     * https://markus.oberlehner.net/blog/building-a-responsive-priority-plus-horizontal-scroll-navigation/
    */
    function handleShadowVisibility() {
      const maxScrollStartReached = config.wrapper.scrollLeft <= 0;
      const maxScrollEndReached =
        config.wrapper.scrollLeft >= config.wrapper.scrollWidth - config.wrapper.offsetWidth - 5;

      toggleShadow(shadowStart, maxScrollStartReached);
      toggleShadow(shadowEnd, maxScrollEndReached);
    }

    /**
     * Exibe/oculta as sombras
     * @param {Element} el sombra
     * @param {Boolean} maxScrollReached atingiu o limite do scroll (início ou fim)
    */
    function toggleShadow(el, maxScrollReached) {
      const shadowIsVisible = el.classList.contains('is-visible');
      const showShadow = !maxScrollReached && !shadowIsVisible;
      const hideShadow = maxScrollReached && shadowIsVisible;

      // Using requestAnimationFrame for optimal scroll performance.
      // https://stackoverflow.com/a/44779316
      if (showShadow) {
        window.requestAnimationFrame(function () { el.classList.add('is-visible'); });
      } else if (hideShadow) {
        window.requestAnimationFrame(function () { el.classList.remove('is-visible'); });
      }
    }

    config.wrapper.addEventListener('scroll', function () {
      handleShadowVisibility();
    });

    handleShadowVisibility();
  };

  return {
    init: init,
  };
}());

/**
 * Init Menu com Dropdown
 * @return {void} BsMd.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-quick-menu').length) {
    BsQuickMenuDrop.init();
  }
});

/**
 * Bs Modal
 *
 * Reference:
 *
 * [TODO]: Refatorar para que os elementos do config referenciem
 * um modal específico ao invés de pegar todos os existentes no documento.
 */
var BsModal = (function () {
  // Config
  var config = {
    allNodes: document.querySelectorAll('*'),
    body: document.querySelector('body'),
    anchors: document.querySelectorAll('a'),
    currentZIndex: 400,
    lastFocus: [],
    lastOpenedModals: [],
    modal: document.querySelectorAll('.bs-modal'),
    modalMain: document.querySelector('.bs-main'),
    modalActiveClass: 'bs-modal--open',
    modalClose: document.querySelectorAll('.bs-js-close-modal'),
    modalCloseAll: document.querySelectorAll('.bs-js-close-all-modals'),
    modalOpen: document.querySelectorAll('.bs-js-open-modal'),
    modalOpenAndClose: document.querySelectorAll('.bs-js-open-close-modal'),
    modalOpenedPage: document.querySelector('.bs-js-opened'),
    overflowHidden: 'bs-overflow--hidden',
  };

  var init = function () {
    // Close modal on click outside
    Array.prototype.forEach.call(document.querySelectorAll('body, html'), function (el) {
      el.addEventListener('click', function (event) {
        var modalActive = isModalActive();
        if (
          modalActive &&
          modalActive.contains(event.target) &&
          !modalActive.querySelector('.bs-modal__container').contains(event.target)
        ) {
          closeModal();
          return false;
        }
      });
    });

    // Open modal on click
    Array.prototype.forEach.call(config.modalOpen, function (opener) {
      if (opener.tagName === 'FORM') {
        openEvent = opener.getAttribute('data-validate-callback') ? 'formIsValid' : 'submit';
        opener.addEventListener(
          openEvent,
          openModal.bind(null, opener)
        );
      } else {
        opener.addEventListener(
          'click',
          openModal.bind(null, opener)
        );
      }
    });

    // Open modal from anchor href
    Array.prototype.forEach.call(config.anchors, function (anchor) {
      var hash = getHashAsIdFromUrlString(anchor.href);
      if (hash.length > 1) anchor.addEventListener('click', openModal.bind(null, hash));
    });

    // Open modal on page load
    window.addEventListener('DOMContentLoaded', function () {
      var hash = getHashAsIdFromUrlString(window.location.hash);
      if (hash.length > 1) openModal(hash);
    });

    // Open modal on hashchange
    // Deprecated:
    //   - not open when page loads
    //   - not fires when the hash is the same
    // window.addEventListener('hashchange', openModal.bind(null, window.location.hash));

    // Close modal on click
    Array.prototype.forEach.call(config.modalClose, function (element) {
      element.addEventListener('click', function () {
        closeModal(element);
      });
    });

    // Close the current modal and opens another
    Array.prototype.forEach.call(config.modalOpenAndClose, function (element) {
      element.addEventListener('click', function () {
        closeModal();
        openModal(element);
      });
    });

    // Close all modals
    Array.prototype.forEach.call(config.modalCloseAll, function (closeModal) {
      closeModal.addEventListener('click', function () {
        closeAllModals();
      });
    });

    // Restringe foco no elemento do modal
    Array.prototype.forEach.call(config.allNodes, function (nodeItem) {
      nodeItem.addEventListener('focus', focusRestrict);
    });

    // Close modal on esc key press
    document.addEventListener('keyup', function (event) {
      if (isModalActive()) if (event.keyCode === 27) closeModal();
    });
  };

  /**
   * Open Modal
   * @param  {Object} openElement  modal element
   * @return {void}
   */
  var openModal = function (openElement) {
    var modal = getModal(openElement);

    // Atualiza o último botão com foco
    config.lastFocus.push(document.activeElement);

    if (modal) {

      if (config.lastOpenedModals.includes(modal)) return;

      config.lastOpenedModals.push(modal);
      config.body.classList.add(config.overflowHidden);
      config.modalOpen = true;

      // Focável, mas que não deve ser localizado pela navegação sequencial do teclado
      modal.setAttribute('tabindex', '0');
      modal.classList.add(config.modalActiveClass);
      modal.focus();

      modal.setAttribute('aria-modal', 'true');
      config.modalMain.setAttribute('aria-hidden', 'true');

      // Incrementa o z-index do modal
      setZIndex(modal);

      return false;
    }
  };

  /**
   * Close Modal
   * @param  {Object} closeElement  modal element
   * @param  {Object} options       custom options
   */
  var closeModal = function (closeElement, options) {
    var modal = getModal(closeElement);

    if (typeof options !== 'object') options = {};

    if (modal) {
      if (modal.classList.contains('bs-modal--unclosable') && !options.forceClose) return;

      config.lastOpenedModals.pop();
      config.modalOpen = false;

      // Pausa os vídeos que estejam rodando dentro do modal
      stopAllModalVideos(modal);

      // Focável, mas que não deve ser localizado pela navegação sequencial do teclado
      modal.setAttribute('tabindex', '-1');
      modal.classList.remove(config.modalActiveClass);

      modal.setAttribute('aria-modal', 'false');
      config.modalMain.setAttribute('aria-hidden', 'false');

      // Adicionar o foco no elemento do botão assim que encerra o modal
      config.lastFocus[config.lastFocus.length - 1].focus();
      config.lastFocus.pop();

      // Se não houver mais modais ativos, remove o bloqueio do scroll do body
      if (!isModalActive()) {
        config.body.classList.remove(config.overflowHidden);
      }
    }
  };

  /**
   * Close All Active Modal
   */
  var closeAllModals = function () {
    var openModals = document.querySelectorAll('.' + config.modalActiveClass);

    Array.prototype.forEach.call(openModals, function (modal) {
      modal.classList.remove(config.modalActiveClass);
      // Focável, mas que não deve ser localizado pela navegação sequencial do teclado
      modal.setAttribute('tabindex', '-1');
      modal.setAttribute('aria-modal', 'false');
    });

    config.modalMain.setAttribute('aria-hidden', 'false');

    config.body.classList.remove(config.overflowHidden);
    // Adicionar o foto no elemento do botão assim que encerra o modal
    config.lastFocus[config.lastFocus.length - 1].focus();
    config.lastFocus = [];
    config.modalOpen = false;
  };

  // Foco restrito ao modal
  var focusRestrict = function (event) {
    // var currentModal = getParents(event.target, config.modalActiveClass)[0];
    var currentModal = document.querySelector('.' + config.modalActiveClass);

    if (currentModal) {
      if (config.modalOpen && !currentModal.contains(event.target)) {
        event.stopPropagation();
        currentModal.focus();
      }
    }
  };

  /**
   Get Modal
   * @param  {String|Object} element  the id of a modal as string or a HTMLElement
   *                                  with data-modal-target or data-modal-id
   *                                  attributes
   * @return {Object}                 the modal HTMLElement
   */
  var getModal = function (element) {
    var modal;
    var modalId;

    // the function accept a string with the ID or
    // the HTMLElement object of the modal
    if (element) {
      // if it's a string, get it as modalId
      if (typeof element === 'string') {
        modalId = element;
      // if it's not a string, assume it's an element
      // if the element have a modal's ID in its dataset, set it to modalId
      } else {
        modalId = (element.dataset.modalTarget) || element.dataset.modalId;
      }

      // if an ID was found in the previous step
      if (modalId) {
        // remove all "special characters" (including #)
        modalId = modalId.replace(/[^a-zA-Z0-9-_]/g, '');
        // search for a modal element with data-modal-id or id attributes
        // with that matches the modalId
        modal = (
          document.querySelector('.bs-modal[data-modal-id="' + modalId + '"]') ||
          document.querySelector('.bs-modal#' + modalId)
        );

      // if an ID was not found and assuming element is an valid HTMLElement,
      // check if element is inside a modal and, if true, return that modal
      } else {
        modal = getParents(element, 'bs-modal')[0];
      }

    // if element parameter is not passed, try to get the last opened modal
    } else {
      modal = config.lastOpenedModals[config.lastOpenedModals.length - 1];
    }

    return modal;
  };

  /**
   * Is Modal Active
   * Check if there's a modal active
   * @return {Boolean|Object} true if there's at least one modal active
   */
  var isModalActive = function () {
    var modals = config.lastOpenedModals;
    return modals.length && modals[modals.length - 1];
  };

  /**
   * Stop all videos inside modal
   * Remove the video element from node and insert it again. It stops the video!
   * @param  {Object} modal the parent element of video elements
   */
  var stopAllModalVideos = function (modal) {
    var videos = modal.querySelectorAll('.bs-video');

    if (videos.length) {
      Array.prototype.forEach.call(videos, function (video) {
        var player = BsYTPlayers.getPlayer(video.id);
        player.stopVideo();
      });
    }
  };

  // Faz com que o último modal tenha o z-index maior
  var setZIndex = function (modal) {
    config.currentZIndex = ++config.currentZIndex;
    modal.style.zIndex = config.currentZIndex;
  };

  return {
    init: init,
    open: openModal,
    close: closeModal,
    restrict: focusRestrict,
  };
}());

/**
 * Init Modal Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-modal').length) {
    BsModal.init();
  }
  if (document.querySelector('.bs-js-opened')) {
    BsModal.open(document.querySelector('.bs-js-opened'));
  }
});

/**
 * Bs Alert
 * A variation of modal for alertdialog
 *
 * @use
 *   BsAlert({
 *     id: 'uniqueID',
 *     type: 'success/error/warning/info/question/loading',
 *     title: 'Title of alert',
 *     content: 'Description or HTML for the content',
 *     buttonLabel: 'text of the button',
 *   })
 *
 */
var BsAlert = (function () {
  /**
   * General config
   * @type {Object}
   */
  var config = {};

  /**
   * Set Config
   * @param  {Object} options Custom options
   * @return {Object}         Default options extend by custom
   */
  var setConfig = function (options) {
    return extend({
      id: '',
      type: '',
      title: '',
      content: '',
      footer: '',
      buttonLabel: '',
      showCloseButton: false,
      unclosable: false,
    }, options, {
      modalActive: config.modalActive || {},
    });
  };

  /**
   * Crypto Value
   * Gerador criptográfico de números aleatórios
   *
   * @info https://developer.mozilla.org/pt-BR/docs/Web/API/Window/crypto
   * @return {String} a random value
   */
  var cryptoValue = function () {
    var cryptoObj = window.crypto || window.msCrypto; // for IE 11
    return (cryptoObj.getRandomValues(new Uint32Array(1))[0]).toString();
  };

  /**
   * Show Alert
   * @param  {Object} options object of options
   */
  var show = function (options) {
    var modalConfig = setConfig(options);
    var modalExist = modalConfig.id === modalConfig.modalActive.id;
    config = modalConfig;

    if (modalExist) {
      updateModalContent();
    } else {
      // append alert modal to body
      document.body.appendChild(buildModal());
    }

    // the timeout is necessary to avoid problems with modal's default
    // animation that don't run on first call of BsAlert() on chrome
    setTimeout(function () {
      // open alert modal
      BsModal.open(config.id);
    }, 100);
  };

  /**
   * Build Modal
   * Create the modal element with full structure, config and content
   * @return {HTMLElement} the modal element
   */
  var buildModal = function () {
    var modalRealId = (config.id || cryptoValue());
    var modalId = 'alertmodal--' + modalRealId;
    var modal = document.createElement('div');
    var modalContainer = document.createElement('div');
    var header = document.createElement('header');
    var body = document.createElement('div');
    var footer = document.createElement('footer');
    var title = document.createElement('strong');
    var closeButton = document.createElement('button');
    var alertButton = document.createElement('button');
    var content = document.createElement('div');

    // Set the ID of modal on config
    config.id = modalId;

    // Remove active modal and set current as active
    if (config.modalActive.modal) config.modalActive.modal.remove();
    config.modalActive.modal = modal;

    // Set modal element config
    modal.id = modalId;
    modal.role = 'alertdialog';
    modal.classList.add('bs-modal');
    modal.classList.add('bs-modal--overlay-dark');
    modal.classList.add('bs-modal--alert');
    modal.classList.add('bs-alert');
    modal.setAttribute('data-modal-id', modalRealId);
    modal.setAttribute('data-alert-type', config.type);
    modal.setAttribute('aria-labelledby', 'alertmodal-heading--' + modalId);
    modal.setAttribute('aria-describedby', 'alertmodal-text--' + modalId);
    config.modalActive.modal = modal;
    config.modalActive.id = modalRealId;

    // add modal's unclosable class
    if (config.unclosable) modal.classList.add('bs-modal--unclosable');

    // Set modal's container config
    modalContainer.classList.add('bs-modal__container');

    // Set modal's header config
    header.classList.add('bs-modal__header');
    header.innerHTML = '<span class="bs-alert__icon"></span>';

    // Set modal's footer config and content
    footer.classList.add('bs-modal__footer');
    footer.innerHTML = config.footer;
    config.modalActive.footer = footer;

    // Set modal's body config
    body.tabIndex = 0;
    body.classList.add('bs-modal__body');

    // Set alert's title config and content
    title.id = 'alertmodal-heading--' + modalId;
    title.classList.add('bs-alert__title');
    title.innerHTML = config.title;
    config.modalActive.title = title;

    // Set alert's title config and content
    content.id = 'alertmodal-text--' + modalId;
    content.classList.add('bs-alert__content');
    content.innerHTML = config.content;
    config.modalActive.content = content;

    closeButton.title = 'Fechar';
    closeButton.type = 'button';
    closeButton.classList.add('bs-modal__close-btn');
    closeButton.innerHTML = '<i class="icon-nav-fechar" aria-hidden="true"></i>';
    closeButton.addEventListener('click', BsModal.close(config.id));

    alertButton.type = 'button';
    alertButton.classList.add('bs-button', 'bs-alert__button');
    alertButton.innerHTML = config.buttonLabel;
    alertButton.addEventListener('click', function () {
      BsModal.close(config.id);
    });
    config.modalActive.button = alertButton;

    // append modal elements
    modal.appendChild(modalContainer);
    modalContainer.appendChild(header);
    modalContainer.appendChild(body);
    modalContainer.appendChild(footer);
    if (config.showCloseButton) modalContainer.appendChild(closeButton);

    // append alert elements
    body.appendChild(title);
    body.appendChild(content);
    body.appendChild(alertButton);

    return modal;
  };

  /**
   * Update Modal
   * Update the content of an existent modal
   * @return {HTMLElement} the updated modal element
   */
  var updateModalContent = function () {
    var modal = config.modalActive.modal;
    var footer = config.modalActive.footer;
    var title = config.modalActive.title;
    var content = config.modalActive.content;
    var button = config.modalActive.button;

    // remove modal's unclosable class
    if (!config.unclosable) modal.classList.remove('bs-modal--unclosable');

    footer.innerHTML = config.footer;
    title.innerHTML = config.title;
    content.innerHTML = config.content;
    button.innerHTML = config.buttonLabel;

    modal.setAttribute('data-alert-type', config.type);

    return modal;
  };

  return {
    show: show,
  };
}());

/**
 * Bs Modal List (anchor)
 */
var BsModalList = (function () {

  // config
  var config = {
    carousel: document.querySelector('.bs-js-modal-carousel'),
    previousButton: document.querySelector('.bs-modal--previous'),
    nextButton: document.querySelector('.bs-modal--next'),
    modalActiveClass: 'bs-modal--open',
    // selects: document.querySelector('.bs-js-filter select'),
    item: document.querySelectorAll('.bs-js-filter--modal'),
    slider: '',
  };
  var flkty = '';

  var init = function () {

    // - Percorre Carosels existentes na Pagina par amontar o flickity
    // - Ativa modal correto conforme o index de cada elemento clicado
    Array.prototype.forEach.call(config.item, function (el) {
      var button = el.querySelector('a');
      button.addEventListener('click', function () {
        var filterTeste = BsFilter.filter();
        var filterItens = filterTeste.getFilteredItemElements();

        openModal(filterItens.indexOf(el));
      });
    });

    // - Aplica mudanças para abrir modal no elemento
    var openModal = function (index) {
      // index = [value] selected,
      // isWrapped = [ true => último slide será selecionado se no primeiro slide.], 
      // isInstant = [true  => remove animation open index] fgf
      flkty.select(index, false, true);
      BsModal.open('#newModal');

      // vars out, get moment height and modal open
      var height = document.querySelector('.bs-modal--open');
      var itemSlide = document.querySelectorAll('.bs-modal__item');
      var heightWindow = 100;
      Array.prototype.forEach.call(itemSlide, function (elem) {

        // construct after slider mount
        var modalClose = elem.querySelector('.bs-js-close-modal');
        var modal = document.querySelector('.bs-modal');
        // close custom to modal + slider
        modalClose.addEventListener('click', function () {
          modal.setAttribute('tabindex', '-1');
          modal.classList.remove(config.modalActiveClass);
        });

        var modalBody = elem.querySelector('.bs-modal__body');
        modalBody.style.overflow = 'hidden';

        var heightModal = height.clientHeight - heightWindow;
        elem.style.height = heightModal + 'px';
        elem.style.overflow = 'auto';
      });
      // resize height to appply render height box
      window.addEventListener('resize', function () {
        var heightInner = document.querySelector('.bs-modal--open');
        Array.prototype.forEach.call(itemSlide, function (elem) {
          var heightModal = heightInner.clientHeight - heightWindow;
          elem.style.height = heightModal + 'px';
        });
      });
    }
  };

  var loadFlickity = function (carousel, items) {
    var flickityOptions = {
      adaptiveHeight: true,
      watchCSS: false,
    };
    var carouselItems;

    // receber index dos itens conforme o filtro
    if (items) {
      if (config.slider) config.slider.remove();
      config.slider = document.createElement('div');
      carouselItems = carousel.querySelectorAll('.bs-modal__item');
      carousel.parentNode.appendChild(config.slider);
    }
    Array.prototype.forEach.call(carouselItems, function (child) {
      var childIndex = Array.prototype.indexOf.call(carouselItems, child);
      if (items.includes(childIndex)) {
        config.slider.appendChild(child.cloneNode(true));
      }
    })
    // debugger;

    flkty = new Flickity(config.slider, flickityOptions);
    window.flkty = flkty;

    // Set Link to social media
    flkty.on('change', function () {
      var selected = document.querySelector('.is-selected');
      var id = selected.getAttribute('data-hash');
      window.location = '#preview' + id;
    });
  };

  return {
    init: init,
    loadSlider: loadFlickity,
  };
}());

/**
 * Init Filter Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-js-modal--list').length) {
    BsModalList.init();
  }
})

/**
 * Banner Topo
 * @return Module config
 */
var BsMosaico = (function () {
  /**
   * Init function
   * @return {Function} Module's scope functions
   */
  var init = function () {
    var elements = document.querySelectorAll('.js-mosaico-reveal');
    var link = document.querySelector('.bs-mosaico__link');

    reveal(elements, link);
  };

  var reveal = function (elements, link) {
    // https://scrollrevealjs.org/
    window.sr = ScrollReveal();

    sr.reveal(
      elements,
      {
        duration: 1337,
        origin: 'bottom',
        scale: 1,
        distance: '40px',
        reveal: reveal,
      },
      100
    );
  };


  return {
    init: init,
  };
}());

/**
 * Init Header Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelector('.js-mosaico-reveal')) {
    BsMosaico.init();
  }
});

/**
 * Bs Mural (isotope/masonry)
 */
var BsMural = (function () {
  // Config
  var config = {
    mural: null,
  };

  var init = function (el) {
    el = typeof el === 'string' ? querySelector(el) : el;
    filterMasonry(el);
  };

  var filterMasonry = function (el) {
    config.list = new Isotope(el, {
      layoutMode: 'packery',
      itemSelector: config.itemSelector,
      columnWidth: config.itemSizerSelector,
      percentPosition: true,
      rowHeight: 320,
    });
  };

  return {
    init: init,
    list: function () {
      return config.list;
    },
  };
}());

/**
 * Init Mural Constructor
 */
document.addEventListener('DOMContentLoaded', function () {
  var murals = document.querySelectorAll('.bs-js-mural');
  if (murals.length) {
    Array.prototype.forEach.call(murals, function (el) {
      BsMural.init(el);
    })
  }
});

var BsSnackProgress = function () {
  // Config List and Select
  var config = {
    el: {
      snack: null,
      progress: null,
      progressText: null,
      progressBar: null,
      progressValue: null,
      progressLink: null,
      progressCancel: null,
      progressButtons: null,
    },
    classes: {
      snack: 'bs-snackbar--progress',
      progress: 'bs-progress',
      progressText: 'bs-progress__text',
      progressBar: 'bs-progress__bar',
      progressValue: 'bs-progress__value',
      progressLink: 'bs-progress__link',
      progressCancel: 'bs-progress__cancel',
      progressButtons: 'bs-progress__actions',
      visible: 'bs-snackbar--visible',
    },
    state: {
      progress: '0%',
      message: 'Baixando',
    },
    events: {
      link: function () {},
      cancel: function () {},
    },
  };

  var init = function () {
    buildSnack();
    buildProgress();
    config.el.snack.appendChild(config.el.progress);
    document.body.appendChild(config.el.snack);
  };

  var buildProgress = function () {
    config.el.progress = document.createElement('div');
    config.el.progressText = document.createElement('span');
    config.el.progressBar = document.createElement('span');
    config.el.progressValue = document.createElement('span');
    config.el.progressButtons = document.createElement('span');
    config.el.progressLink = document.createElement('button');
    config.el.progressCancel = document.createElement('button');

    config.el.progress.classList.add(config.classes.progress);
    config.el.progressText.classList.add(config.classes.progressText);
    config.el.progressBar.classList.add(config.classes.progressBar);
    config.el.progressValue.classList.add(config.classes.progressValue);
    config.el.progressButtons.classList.add(config.classes.progressButtons);
    config.el.progressLink.classList.add(config.classes.progressLink);
    config.el.progressCancel.classList.add(config.classes.progressCancel);

    config.el.progressText.innerHTML = config.state.message;
    config.el.progressValue.innerHTML = config.state.progress;

    config.el.progressLink.type = 'button';

    config.el.progressCancel.type = 'button';
    config.el.progressCancel.title = 'Cancelar';
    config.el.progressCancel.innerHTML = '<i class="icon-nav-fechar"></i>';
    config.el.progressCancel.addEventListener('click', function () {
      setProgress();
      hide(0);
    });

    config.el.progressButtons.appendChild(config.el.progressLink);
    config.el.progressButtons.appendChild(config.el.progressCancel);

    config.el.progress.appendChild(config.el.progressText);
    config.el.progress.appendChild(config.el.progressBar);
    config.el.progress.appendChild(config.el.progressValue);
    config.el.progress.appendChild(config.el.progressButtons);
  };

  var buildSnack = function () {
    config.el.snack = document.createElement('div');
    config.el.snack.className = 'bs-snackbar bs-snackbar--progress bs-snackbar--align-left bs-snackbar--alert';
    config.el.snack.setAttribute('role', 'alert');
    config.el.snack.setAttribute('data-snackbar-id', 'bs-downloads-progress');
  };

  var show = function () {
    config.el.snack.classList.add(config.classes.visible);
  };

  var hide = function () {
    config.el.snack.classList.remove(config.classes.visible);
  };

  /**
   * Set a new progress to snackbar
   * @param  {Number|String} progress  a numeric value for progress or a string
   * @param  {String}        message   a text to describe the state of progress
   * @return {Void}
   */
  var setProgress = function (progress, message) {
    // Update if progress is a different number of current in state
    if (typeof progress === 'number' && config.state.progress !== progress) {
      config.state.progress = progress + '%';
      config.el.progressValue.innerHTML = config.state.progress;
      config.el.progressBar.style.width = config.state.progress;
    } else if (!progress) {
      config.el.progressBar.style.width = 0;
      config.el.progressValue.innerHTML = '';
    }

    // Update innerHTML of progressValue if progress is a string
    // It's useful to add a loadings component or custom links in lieu of a
    // numeric value on the right of the snackbar
    if (progress instanceof Element) {
      config.el.progressValue.innerHTML = '';
      config.el.progressValue.appendChild(progress);
      config.el.progressBar.style.width = 0;
    }

    // Update if message is a different string of current in state
    if (typeof message === 'string' && config.state.message !== message) {
      config.state.message = message;
      config.el.progressText.innerHTML = message;
    }
  };

  var addButton = function (iconClass, message, cb) {
    if (
      typeof iconClass !== 'undefined' &&
      typeof message !== 'undefined' &&
      typeof cb === 'function') {
      config.events.link = cb;
      config.el.progressLink.innerHTML = '<i class="' + iconClass + '"></i>';
      config.el.progressLink.title = message;
      config.el.progressLink.addEventListener('click', config.events.link);
      return config.el.progressLink;
    }

    // throw new Error('all arguments are required.');
  };

  var removeButton = function () {
    config.el.progressLink.innerHTML = '';
    config.el.progressLink.removeEventListener('click', config.events.link);
  };

  var onCancel = function (cb) {
    if (typeof cb !== 'function') cb = function () {};
    config.el.progressCancel.addEventListener('click', cb);
  };

  return {
    init: init,
    show: show,
    hide: hide,
    setProgress: setProgress,
    activeButton: addButton,
    disableButton: removeButton,
    onCancel: onCancel,
    elements: config.el,
  };
};


/**
 * Init BsSnackbar constructor
 * @return {void} BsSnackbar.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  // window.progress = new BsSnackProgress()
  // progress.init();
  // progress.show();
});

/**
 * Bs Carousel
 */
var BsCarousel = (function () {

  var config = {
    carouselDefault: document.querySelectorAll('.bs-quick-menu:not(.bs-quick-menu--icon) .bs-js-carousel'),
    carouselBox: document.querySelector('.bs-quick-menu__box'),
    overPrev: 'bs-quick-menu--over-prev',
    overNext: 'bs-quick-menu--over-next',
  }

  var init = function () {

    // evita bug de renderização
    debounce(buildMenu());

  };

  var buildMenu = function() {
    Array.prototype.forEach.call(config.carouselDefault, function (el) {

      // !!- SET DE CONFIGURAÇÃO PADRÃO
      var flickityOptionsDefaults = {
        contain: true,
        prevNextButtons: false,
        cellAlign: 'left',
        groupCells: true,
        watchCSS: true,
        adaptiveHeight: true,
      };

      // - Executa e Aplica Set de configurações
      var flkty = new Flickity( el, flickityOptionsDefaults );
      // debugger
      // class active over effect more items right side

      var carouselBox = el.parentNode.closest('.bs-quick-menu__box');

      var flickityView = el.querySelector('.flickity-viewport');
      // only apply class relative INIT navitgation
      if (flickityView) {
        var carouselBoxParent = flickityView.parentNode.parentNode;
        carouselBoxParent.classList.add(config.overNext);
      }

      flkty.on('select', function () {

        // class add or remove effect over in position initial
        if (!flkty.cells[flkty.selectedIndex - 1]) {

          carouselBox.classList.remove(config.overPrev);
          carouselBox.classList.add(config.overNext);

          // class add or remove effect over in position final
        } else if(!flkty.cells[flkty.cells.length]) {

          carouselBox.classList.add(config.overPrev);

          // class add or remove effect over in middle position to items big than sides
          if (flkty.selectedIndex === (flkty.pageDots.dots.length - 1)) {
            carouselBox.classList.remove(config.overNext);
          } else {
            carouselBox.classList.add(config.overNext);
          }
        }
      });

    });
  }

  return {
    init: init,
  };
}());

/**
 * Init
 */
document.addEventListener('DOMContentLoaded', function () {
  var carouselDefault = document.querySelectorAll('.bs-quick-menu:not(.bs-quick-menu--icon) .bs-js-carousel');
  if (carouselDefault.length) {
    Array.prototype.forEach.call(carouselDefault, function (el) {
      BsCarousel.init(el);
    })
  }
});

/**
 * Bs Carousel Icons
 */
var BsCarouselIcons = (function () {

  var config = {
    carouselIcons: document.querySelectorAll('.bs-quick-menu--icon .bs-js-carousel'),
    carouselBox: document.querySelector('.bs-quick-menu__box'),
    overPrev: 'bs-quick-menu--over-prev',
    overNext: 'bs-quick-menu--over-next',
    boxSlider: '',
    boxViewport: '',
    boxViewportItem: '',
    boxNew: '',
    boxSliderClone: '',
    offSet: '',
    boxItem: '',
    totalReduce: '',
    boxSize: '',
    totalIndex: '',
    calcPerc: '',
    parent: '',
    viewMod: '',
  };


  var init = function () {

    // evita bug de renderização
    setTimeout (function () {

      window.addEventListener("resize", function() {
        getMenu();
      });

      // return menu default configuration
      getMenu();

    }, 400);


  };

  var getMenu = function () {

    Array.prototype.forEach.call(config.carouselIcons, function (elem) {

      // !!- SET DE CONFIGURAÇÃO PADRÃO
      var flickityOptions = {
        contain: true,
        prevNextButtons: false,
        cellAlign: 'left',
        draggable: true,
      };
      flickityOptionsFalse = {
        contain: true,
        prevNextButtons: false,
        cellAlign: 'left',
        draggable: false,
      };

      var carouselBox = elem.parentNode.closest('.bs-quick-menu__box');

      // the new selector parent
      config.boxNew = elem;
      config.offSet = config.boxNew.offsetWidth;

      // parent items
      config.boxItem = config.boxNew.querySelectorAll('.bs-quick-menu__item');

      config.totalReduce = Array.prototype.reduce.call(config.boxItem, function (i, el) {
        var i = i + el.offsetWidth;
        return i;
      }, 0);

      // init flickty
      var flkty = new Flickity( elem, flickityOptions );

      // if flickity get box slider
      config.boxSlider = elem.querySelector('.flickity-slider');

      config.boxSize = config.offSet;

      Array.prototype.forEach.call(config.boxItem, function (el) {

        // if total items less max box
        if (config.totalReduce < config.boxSize) {
          // debugger
          // calculate width real
          el.style.width = '100%';
          el.style.position = 'initial';

          // apply to parent modifiers
          config.parent = el.parentNode;
          config.parent.style.display = 'flex';
          config.parent.style.transform = '';

          // reinitiate flickity, to resize items with bug
          flkty.destroy();
          // flkty = new Flickity( config.carouselIcons, flickityOptionsFalse);
        } else {
          // debugger
          el.style.width = '';
          el.style.position = 'absolute';
          // apply to parent modifiers
          config.parent = el.parentNode;
          config.parent.style.display = '';
          // class active over effect more items right side
          carouselBox.classList.add(config.overNext);

          // reinitiate flickity, to resize items with bug
          flkty.destroy();
          // debugger
          flkty = new Flickity( elem, flickityOptions);
        }
      });

      flkty.on('select', function () {

        // class add or remove effect over in position initial
        if (!flkty.cells[flkty.selectedIndex - 1]) {

          carouselBox.classList.remove(config.overPrev);
          carouselBox.classList.add(config.overNext);

          // class add or remove effect over in position final
        } else if(!flkty.cells[flkty.cells.length]) {

          carouselBox.classList.add(config.overPrev);

          // class add or remove effect over in middle position to items big than sides
          if (flkty.selectedIndex === (flkty.pageDots.dots.length - 1)) {
            carouselBox.classList.remove(config.overNext);
          } else {
            carouselBox.classList.add(config.overNext);
          }
        }
      });
    });
  };

  return {
    init: init,
  };
}());

/**
 * Init Mural Constructor
 */
document.addEventListener('DOMContentLoaded', function () {
  var carouselIcons = document.querySelectorAll('.bs-quick-menu--icon .bs-js-carousel');
  if (carouselIcons.length) {
    Array.prototype.forEach.call(carouselIcons, function (el) {
      BsCarouselIcons.init(el);
    })
  }
});

/**
 * Bs QuickMenu (anchor)
 *
 * TODO:
 * 1. Esconder (translate:-100%) menu fixo quando passar
 * da última seção da página (geralmente, sobre o footer) e
 * voltar a mostrar quando subir a página novamente;
 *
 * 2. Calcular a velocidade do smooth scroll relativo à posição
 * da seção, para que a animação do scroll leve sempre o
 * mesmo tempo. Ex: levar o mesmo tempo para scrollar da
 * seção 1 para 2 e da 1 para a última.
 *
 * 3. Quando o scroll vai de baixo para cima, por conta do Header
 * ficar visível, o menu acaba ficando sobre o título. Precisa
 * descontar o tamanho do header da posição alvo da âncora.
 */
var BsQuickMenu = (function() {
    // Elements
    var elements = {};
    var $ = elements;
    $.body = document.querySelector('body');
    $.quickMenu = document.querySelector('.bs-js-quick-menu-anchor');

    if (!$.quickMenu) return;

    $.floater = $.quickMenu.querySelector('.bs-quick-menu__wrapper');
    $.list = $.quickMenu.querySelector('.bs-quick-menu__list');
    $.toggle = $.quickMenu.querySelector('.bs-quick-menu__toggle');
    $.items = $.list.querySelectorAll('.bs-quick-menu__link');


    // Config
    var config = {
        quickMenuActive: false,
        quickMenuActiveClass: 'bs-quick-menu--open',
        quickMenuPinedClass: 'bs-quick-menu--pined',
        itemActiveClass: 'bs-quick-menu__link--active',
        scrollTopPosition: function() {
            return window.pageYOffset || document.documentElement.scrollTop;
        },
        topPositionToFloat: 0,
        scrollDirection: 0,
        lastScrollTop: 0,
        smoothScrollSteps: 25,
        scrollAnchorGutter: 80,
        anchorSelector: 'section',
        lastSelectedAnchor: null
    };

    var init = function() {
        // Toggle quickMenu
        if ($.toggle) $.toggle.addEventListener('click', toggleQuickMenu);

        // Close quickMenu on click outside
        Array.prototype.forEach.call(document.querySelectorAll('body, html'), function(el) {
            el.addEventListener('click', function(event) {
                if (
                    quickMenuActive() &&
                    !$.quickMenu.contains(event.target) &&
                    !$.toggle.contains(event.target)) {
                    closeQuickMenu();
                    return false;
                }
            });
        });

        // Close header on click outside
        window.addEventListener('scroll', function() {
            // Fixa o menu no topo da viewport
            setPined();

            // Exibe o menu abaixo do header quando este está visível
            if (!BsHeader.isFloating() || BsHeader.el.classList.contains(BsHeader.headerPinned)) {
                $.floater.style.top = BsHeader.el.offsetHeight + 'px';
            } else {
                $.floater.style.top = 0;
            }

            // Ativa o item de acordo com o scroll
            setActiveItem(getActiveItem());
        });

        // Click menu anchors
        Array.prototype.forEach.call($.items, function(el) {
            var hash = el.getAttribute('href');
            el.addEventListener('click', function(event) {
                // Previne o clique se o hash for uma âncora válida
                if (validAnchor(hash)) event.preventDefault();
                // Retorna se for inválida (mantém o clique padrão)
                else return;

                // Retorna se não existe uma âncora na página (ID) referente ao hash do item
                if (!document.querySelector(hash)) return;

                // Chama a função para rolar a página até a âncora
                gotoAnchor(el);
            });
        });
    };

    var toggleQuickMenu = function() {
        if (!quickMenuActive()) openQuickMenu();
        else closeQuickMenu();
    };

    var openQuickMenu = function() {
        $.quickMenu.classList.add(config.quickMenuActiveClass);
    };

    var closeQuickMenu = function() {
        $.quickMenu.classList.remove(config.quickMenuActiveClass);
    };

    var quickMenuActive = function() {
        return $.quickMenu.classList.contains(config.quickMenuActiveClass);
    };

    var gotoAnchor = function(el) {
        var anchor = el.getAttribute('href');
        var anchorElement = document.querySelector(anchor);
        var anchorPosition = anchorElement.offsetTop;
        var interval = 0;
        var scrollDown = function() {
            window.scrollTo(0, config.scrollTopPosition() + config.smoothScrollSteps);
            if (config.scrollTopPosition() > (anchorPosition - config.scrollAnchorGutter)) {
                clearInterval(interval);
            }
        };
        var scrollUp = function() {
            window.scrollTo(0, config.scrollTopPosition() - config.smoothScrollSteps);
            if (config.scrollTopPosition() < (anchorPosition - config.scrollAnchorGutter)) {
                clearInterval(interval);
            }
        };

        // Fecha a lista do menu
        closeQuickMenu();

        // Scrolla até a âncora do item clicado
        // Se a âncora está abaixo da posição atual da página
        if (config.scrollTopPosition() < anchorPosition) {
            interval = window.setInterval(scrollDown, 2);
            // Se a âncora está acima da posição atual da página
        } else if (config.scrollTopPosition() > anchorPosition) {
            interval = window.setInterval(scrollUp, 2);
        }
    };

    var setActiveItem = function(anchor) {
        // console.log(anchor);

        if (anchor === config.lastSelectedAnchor) return;
        else config.lastSelectedAnchor = anchor;

        var anchorHash = '#' + anchor.getAttribute('id');
        var menuItem = $.list.querySelector('[href="' + anchorHash + '"]');
        var title = menuItem.textContent;

        // debugger;


        // Desativa item ativo atualmente
        if ($.list.querySelector('.' + config.itemActiveClass)) {
            $.list.querySelector('.' + config.itemActiveClass).classList.remove(config.itemActiveClass);
        }

        // Ativa o item de acordo com a posição atual
        menuItem.classList.add(config.itemActiveClass);

        // Altera o texto do botão de toggle com o título do item clicado
        $.toggle.innerText = title.toString();

        // Altera o hash da URL com o hash da âncora clicada
        history.replaceState(undefined, undefined, anchorHash);
    };

    var getActiveItem = function() {
        var positions = getAnchorsPosition();
        var scroll = config.scrollTopPosition();
        var i = 0;
        var length = positions.length;
        var output = 0;

        // Return active element by offsetTop position
        for (; i < length; i += 1) {
            if (scroll >= (positions[i].targetPos - config.scrollAnchorGutter)) {
                output = positions[i].target;
            }
        }

        // Return first item if any is returned from looping above
        if (!output) output = positions[0].target;

        return output;
    };

    var getAnchorsPosition = function() {
        var positions = [];

        // Gera um array com as âncoras e suas respectivas posições
        Array.prototype.forEach.call($.items, function(el, index) {
            var anchor = el.getAttribute('href');
            var anchorElement;
            var anchorPosition;

            if (!validAnchor(anchor)) return;

            anchorElement = document.querySelector(anchor);
            anchorPosition = anchorElement.offsetTop;

            positions[index] = {
                target: anchorElement,
                targetPos: anchorPosition - config.scrollAnchorGutter,
            };
        });

        return positions;
    };

    var setPined = function() {
        config.topPositionToFloat = $.quickMenu.offsetTop - parseFloat($.floater.style.top);
        if (config.scrollTopPosition() > config.topPositionToFloat) {
            $.quickMenu.classList.add(config.quickMenuPinedClass);
        } else {
            $.quickMenu.classList.remove(config.quickMenuPinedClass);
        }
    };

    // https://stackoverflow.com/questions/388996/regex-for-javascript-to-allow-only-alphanumeric/389022#389022
    var validAnchor = function(str) {
        var regex = new RegExp(/^[a-z0-9-_]+/);
        var id = str.substring(1);
        // 1: has # in first position (is an internal anchor)
        return str.indexOf('#') === 0 &&
            // 2: has more than 2 characters (is not an empty # link)
            str.length > 1 &&
            // 3: has an alphanumeric (with dashes or underscores) id
            regex.test(id);
    };

    return {
        init: init,
        getActiveItem: getActiveItem,
        setActiveItem: setActiveItem,
        getAnchorsPosition: getAnchorsPosition,
        validAnchor: validAnchor,
    };
}());

/**
 * Init QuickMenu Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function() {
    if (document.querySelectorAll('.bs-js-quick-menu-anchor').length) {
        BsQuickMenu.init();
    }
});
/**
 * Menu com Dropdown
 */
var BsMd = (function () {
  // Config
  var config = {
    buttons: {
      back: document.querySelectorAll('.bs-md__back'),
      item: document.querySelectorAll('.bs-md__menu .bs-md__item'),
      triggerMenu: document.querySelectorAll('.bs-js-md-trigger-menu'),
    },
    classes: {
      itemSubmenuOpen: 'bs-md__item--sub-open',
      menuOpen: 'bs-md__menu--open',
      sortable: 'bs-md__menu--sortable',
      subSubmenuOpen: 'bs-md__menu--sub-open',
      triggerMenuActive: 'bs-md__item--active',
    },
    container: document.querySelector('.bs-md'),
    menu: document.querySelectorAll('.bs-md__menu'),
    wrapper: document.querySelector('.bs-md__wrapper'),
    sortable: document.querySelectorAll('.bs-md__menu.bs-md__menu--sortable'),
  };

  var init = function () {
    // var flickityOptionsDefaults = {
    //   contain: true,
    //   prevNextButtons: false,
    //   pageDots: false,
    //   cellAlign: 'left',
    //   groupCells: true,
    //   watchCSS: false,
    // };
    // // - Executa e Aplica Set de configurações
    // var flkty = new Flickity( config.wrapper, flickityOptionsDefaults );

    // Recalcula o posicionamento do menu
    setTimeout(function () {
      _calcSubmenuPosition();
    }, 500);

    window.addEventListener('resize', function () {
      _calcSubmenuPosition();
    });

    window.addEventListener('scroll', function () {
      _closeAllMenus();
    });

    config.container.addEventListener('scroll', function () {
      _closeAllMenus();
    });

    _initShadow();

    if (config.buttons.triggerMenu) {
      Array.prototype.forEach.call(config.buttons.triggerMenu, function (button) {
        button.addEventListener('click', function (event) {
          event.preventDefault();
          _calcSubmenuPosition();

          var menu = button.querySelector('.bs-md__menu');
          var isMenuOpen = (menu.classList.contains(config.classes.menuOpen)) === true;

          if (isMenuOpen && menu) {
            _closeMenu(menu);
          } else {
            _closeAllMenus();
            _openMenu(menu);
          }
        });
      });
    }

    if (config.buttons.item) {
      Array.prototype.forEach.call(config.buttons.item, function (button) {
        var submenu = button.querySelector('.bs-md__submenu');

        if (submenu) {
          button.addEventListener('click', function (event) {
            event.stopPropagation();
            var parentMenu = button.parentNode;

            parentMenu.classList.add(config.classes.subSubmenuOpen);
            button.classList.add(config.classes.itemSubmenuOpen);
          });
        }
      });
    }

    if (config.buttons.back) {
      Array.prototype.forEach.call(config.buttons.back, function (button) {
        button.addEventListener('click', function (event) {
          event.stopPropagation();
          event.preventDefault();

          var menuItem = getParents(button, config.classes.itemSubmenuOpen, true)[0];
          var menu = getParents(button, config.classes.subSubmenuOpen, true)[0];

          if (menuItem) {
            menuItem.classList.remove(config.classes.itemSubmenuOpen);
            menu.classList.remove(config.classes.subSubmenuOpen);
          }
        });
      });
    }

    if (config.sortable) {
      Array.prototype.forEach.call(config.sortable, function (menu) {
        dragula([menu], {
          moves: function (el, source, handle, sibling) {
            return (!el.classList.contains('bs-md__favorite')) && true;
          },
        });
      });


    }

    // Fecha o menu quando clicar fora dele
    Array.prototype.forEach.call(document.querySelectorAll('body, html'), function (element) {
      element.addEventListener('click', function (event) {
        var parentMenu = getParent(event.target, 'bs-md__wrapper');
        if (!parentMenu) {
          _closeAllMenus();
          return false;
        }
      });
    });
  };

  // Calcula a posição em que o submenu deve abrir
  var _calcSubmenuPosition = function () {
    var menus = config.menu;

    Array.prototype.forEach.call(menus, function (menu) {
      var left = menu.parentNode.getBoundingClientRect().left;
      var top = menu.parentNode.getBoundingClientRect().bottom;

      if (window.innerWidth >= 576) {
        menu.style.left = left + 'px';
      } else {
        // No mobile o menu é 100%, então não deve ser setado a posição left
        menu.style.removeProperty('left');
      }
      menu.style.top = top + 'px';
    });
  };

  var _openMenu = function (menu) {
    menu.parentNode.classList.add(config.classes.triggerMenuActive);
    menu.classList.add(config.classes.menuOpen);
  };

  var _closeMenu = function (menu) {
    menu.parentNode.classList.remove(config.classes.triggerMenuActive);
    menu.classList.remove(config.classes.menuOpen);
  };

  var _closeAllMenus = function () {
    var openedMenus = document.querySelectorAll('.' + config.classes.menuOpen);
    var openedSubmenus = document.querySelectorAll('.' + config.classes.subSubmenuOpen);
    var openedItems = document.querySelectorAll('.' + config.classes.itemSubmenuOpen);

    Array.prototype.forEach.call(openedMenus, function (menu) {
      menu.classList.remove(config.classes.menuOpen);
      menu.parentNode.classList.remove(config.classes.triggerMenuActive);
    });

    Array.prototype.forEach.call(openedSubmenus, function (submenu) {
      submenu.classList.remove(config.classes.subSubmenuOpen);
    });

    Array.prototype.forEach.call(openedItems, function (item) {
      item.classList.remove(config.classes.itemSubmenuOpen);
    });
  };

  var _initShadow = function () {
    const shadowStart = document.querySelector('.bs-md__shadow--start');
    const shadowEnd = document.querySelector('.bs-md__shadow--end');

    /**
     * Define se as sombras devem estar visíveis
     * https://markus.oberlehner.net/blog/building-a-responsive-priority-plus-horizontal-scroll-navigation/
    */
    function handleShadowVisibility() {
      const maxScrollStartReached = config.wrapper.scrollLeft <= 0;
      const maxScrollEndReached =
        config.wrapper.scrollLeft >= config.wrapper.scrollWidth - config.wrapper.offsetWidth - 5;

      toggleShadow(shadowStart, maxScrollStartReached);
      toggleShadow(shadowEnd, maxScrollEndReached);
    }

    /**
     * Exibe/oculta as sombras
     * @param {Element} el sombra
     * @param {Boolean} maxScrollReached atingiu o limite do scroll (início ou fim)
    */
    function toggleShadow(el, maxScrollReached) {
      const shadowIsVisible = el.classList.contains('is-visible');
      const showShadow = !maxScrollReached && !shadowIsVisible;
      const hideShadow = maxScrollReached && shadowIsVisible;

      // Using requestAnimationFrame for optimal scroll performance.
      // https://stackoverflow.com/a/44779316
      if (showShadow) {
        window.requestAnimationFrame(function () { el.classList.add('is-visible'); });
      } else if (hideShadow) {
        window.requestAnimationFrame(function () { el.classList.remove('is-visible'); });
      }
    }

    config.wrapper.addEventListener('scroll', function () {
      handleShadowVisibility();
    });

    handleShadowVisibility();
  };

  return {
    init: init,
  };
}());

/**
 * Init Menu com Dropdown
 * @return {void} BsMd.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-md').length) {
    BsMd.init();
  }
});


/**
 * Bs Search Empty 404
 *
 */

var BsSearchEmpty = (function () {
  // Config
  var config = {
    tag: document.querySelectorAll('.bs-search-empty__tag'),
    items: [],
    randomItem: '',
  };

  var init = function () {

    Array.prototype.forEach.call(config.tag, function (el) {
      config.items.push(el.textContent);
    });
    random();
  };

  var random = function () {
    randomItem = config.items[Math.floor(Math.random() * config.items.length )]; 

    Array.prototype.forEach.call(config.tag, function (el) {
      var tagContent = el.textContent;

      if (randomItem !== tagContent) {
        el.remove();
      };
    });
  };

  return {
    init: init
  };
}());

/**
 * Init Search Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-search-empty__tag').length) {
    BsSearchEmpty.init();
  }
});

/**
 * Bs Search
 *
 * [TODO]: Refatorar para que os elementos do config referenciem um componente
 * search específico ao invés de pegar todos os existentes no documento.
 */
var BsSearchForm = (function () {
  // Config
  var config = {
    html: document.querySelectorAll('body, html'),
    header: document.querySelector('.bs-header'),
    search: document.querySelector('.bs-search'),
    searchInput: document.querySelector('.bs-js-search-input'),
    searchOpen: document.querySelector('.bs-js-open-search'),
    searchClose: document.querySelector('.bs-js-close-search'),
    searchToggle: document.querySelector('.bs-js-toggle-search'),
    searchIsOpen: false,
    searchIsOpenClass: 'bs-search--open',
    headerSearchOpenClass: 'bs-header--search-is-open',
  };

  // var $ = config;

  var init = function () {
    // Return if not exists search component
    if (!config.search) return;

    // Open suggestions on search input focus
    if (config.searchInput) {
      config.searchInput.addEventListener('focus', function () {
        // BsSearchSuggestions.open();
      });
    }

    loadSearchSuggestions();

    // Toggle search
    if (config.searchToggle) config.searchToggle.addEventListener('click', toggleSearch);

    // Open search
    if (config.searchOpen) config.searchOpen.addEventListener('click', openSearch);

    // Close search
    if (config.searchClose) config.searchClose.addEventListener('click', closeSearch);

    // Close search on click outside
    Array.prototype.forEach.call(config.html, function (el) {
    // document.querySelectorAll('body, html').forEach(function (el) {
      el.addEventListener('click', function (event) {
        if (
          searchIsOpen() &&
          !config.search.contains(event.target) &&
          !config.searchToggle.contains(event.target)) {
          closeSearch();
          return false;
        }
      });
    });
  };

  var toggleSearch = function () {
    if (!searchIsOpen()) openSearch();
    else closeSearch();
  };

  var openSearch = function () {
    if (config.search) {
      config.search.classList.add(config.searchIsOpenClass);
      config.header.classList.add(config.headerSearchOpenClass);
      BsHeader.setHeaderFloating(true);
      toggleBodyOverflowHidden();
    }
  };

  var closeSearch = function () {
    if (config.search) {
      config.search.classList.remove(config.searchIsOpenClass);
      config.header.classList.remove(config.headerSearchOpenClass);
      toggleBodyOverflowHidden();
    }
  };

  var searchIsOpen = function () {
    if (!config.search) return false;
    return config.search.classList.contains(config.searchIsOpenClass);
  };

  var searchHasFocus = function () {
    return document.activeElement === config.searchInput;
  };

  var loadSearchSuggestions = function () {
    var suggestions = document.querySelectorAll('.bs-js-search-suggestions');
    config.suggestions = [];

    if (suggestions && suggestions.length) {
      Array.prototype.forEach.call(suggestions, function (el) {
        var suggestion = new BsSearchSuggestions(el, {
          contentClasses: [
            'bs-search-suggestions__term',
            'bs-search-suggestions__location',
          ],
          maxItems: 8,
          defaultTitle: 'Mais Buscados',
          defaultList: [
            {
              link: '#!',
              content: [
                'Lorem ipsum dolor sit amet',
                'irure dolor',
              ],
            },
            {
              link: '#!',
              content: [
                'consectetur adipisicing elit',
                'in reprehenderit',
              ],
            },
            {
              link: '#!',
              content: [
                'sed do eiusmod tempor incididunt',
                'voluptate velit',
              ],
            },
            {
              link: '#!',
              content: [
                'ut labore et dolore magna aliqua',
                'esse cillum dolore',
              ],
            },
            {
              link: '#!',
              content: [
                'Ut enim ad minim veniam',
                'eu fugiat nulla',
              ],
            },
            {
              link: '#!',
              content: [
                'quis nostrud exercitation ullamco',
                'excepteur sint occaecat',
              ],
            },
            {
              link: '#!',
              content: [
                'laboris nisi ut aliquip ex ea',
                'cupidatat non proident',
              ],
            },
            {
              link: '#!',
              content: [
                'commodo consequat. Duis aute',
                'qui officia deserunt',
              ],
            },
          ],
          suggestionsList: [
            {
              link: '#!',
              content: [
                'Lorem ipsum dolor sit amet',
                'irure dolor',
              ],
            },
            {
              link: '#!',
              content: [
                'consectetur adipisicing elit',
                'in reprehenderit',
              ],
            },
            {
              link: '#!',
              content: [
                'sed do eiusmod tempor incididunt',
                'voluptate velit',
              ],
            },
            {
              link: '#!',
              content: [
                'ut labore et dolore magna aliqua',
                'esse cillum dolore',
              ],
            },
            {
              link: '#!',
              content: [
                'Ut enim ad minim veniam',
                'eu fugiat nulla',
              ],
            },
            {
              link: '#!',
              content: [
                'quis nostrud exercitation ullamco',
                'excepteur sint occaecat',
              ],
            },
            {
              link: '#!',
              content: [
                'laboris nisi ut aliquip ex ea',
                'cupidatat non proident',
              ],
            },
            {
              link: '#!',
              content: [
                'commodo consequat. Duis aute',
                'qui officia deserunt',
              ],
            },
          ],
        });
        suggestion.init();
        config.suggestions.push(suggestion);
      });
    }
  }

  return {
    init: init,
    toggle: toggleSearch,
    open: openSearch,
    close: closeSearch,
    isOpen: searchIsOpen,
    hasFocus: searchHasFocus,
    isActive: searchIsOpen, // deprecated
  };
}());

/**
 * Init Search Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-search').length) {
    BsSearchForm.init();
  }
});

/**
 * ATIVAR o SEARCH aplicar na section a classe
 * --- bs-help-search -----
 * ADICIONAR MENSAGEM VAZIO dentro de section
 * ---- bs-help-search__search-empty ----
 * ORGANIZAR CÓD caso utilize
*/

var BsSerachHelp = (function() {

  var init = function() {
    /* Select the input where the keywords will be retrieved */
    var searchbox = document.getElementsByClassName('bs-help-search__input')[0];

    /* To every key pressed and released */
    searchbox.onkeyup = function () {
      /**
      * This will fix a simple problem: When the search input is empty after
      * trying to find a keyword, it selects all the elements and highlight
      */
      var keywords = searchbox.value.trim().length > 0 ? new RegExp(searchbox.value.trim(), "gi") : '';

      /* Define the postTitles where the search will run */
      //- var postTitles = document.getElementsByClassName('post__title');

      var selectList= document.querySelectorAll('.bs-media__item,.bs-accordion__item, bs-media__item');

      Array.prototype.forEach.call(selectList, function (el) {
        var valList = el //- Easier to read
        var attrText = valList.textContent;
        //- var attrTag = valList.getAttribute('data-filter-tag');
        //- var key = attrText.concat(attrTag)
        
        //-  If val atribute data-filter-tag equal key query
        if ((attrText.match(keywords)) && keywords !== '') {
          //- If the element don't have the active class, it will add one
          if (!valList.classList.contains('bs-help-search__highlight')) {
            valList.classList.remove('bs-help-search__remove-highlight');
            valList.classList.add('bs-help-search__highlight');
          }
        }
        //- Remove active and add remove from list 
        else {
          valList.classList.remove('bs-help-search__highlight');
          valList.classList.add('bs-help-search__remove-highlight');

          if (keywords === '') {
            valList.classList.remove('bs-help-search__remove-highlight');
          }
        }
      });

      // Capture all sections on the page
      var searchList = document.querySelectorAll('.bs-help-search');

      Array.prototype.forEach.call(searchList, function (e) {

        // if section belongs search for elements
        var activeFalse = e.getElementsByClassName('bs-help-search__highlight');
        var message = e.querySelector('.bs-help-search__search-empty');

        // if there is no active return while search returns active
        if (activeFalse.length < 1 && keywords !== '') {
          message.classList.add('bs-active');
          //- debugger 
        } else {
          message.classList.remove('bs-active');
        };

      });
    };
  };

  return {
    init: init
  };

})();

/**
 * Init QuickMenu Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function() {
  if (document.querySelectorAll('.bs-help-search').length) {
    BsSerachHelp.init();
  }
});
/**
 * Bs Search Suggestions
 * A list of suggestions terms to show when search input has focus
 *
 * @param  {string} element query of a DOM element
 * @param  {Object} options overwrite default config
 * @return {Function}
 */

var BsSearchSuggestions = function (element, options) {
  // Config
  var elem = element;
  var opt = (typeof options === 'object') ? options : {};
  var defaults = {
    // search input
    search: '.bs-js-search-input',
    // suggestions box
    suggestions: '.bs-js-search-suggestions',
    // suggestions list
    list: '.bs-search-suggestions__list',
    // class to set open suggestions
    suggestionsActiveClass: 'bs-search-suggestions--open',
    // class to add loading gif in list
    suggestionsLoadingClass: 'bs-search-suggestions--loading',
    // class of item
    listTitleClass: 'bs-search-suggestions__title',
    // class of item
    itemClass: 'bs-search-suggestions__item',
    // class to set an item as active, when selected by keyboard arrows up/down
    itemsActiveClass: 'bs-search-suggestions__item--active',
    // class of link
    itemLinkClass: 'bs-search-suggestions__link',
    // class of term
    itemTermClass: 'bs-search-suggestions__term',
    // class of term typed
    itemTermTypedClass: 'bs-search-suggestions__term-typed',
    // class of location
    itemLocationClass: 'bs-search-suggestions__location',
    // contentClasses
    contentClasses: [],
    // maximum limit of items in the list
    maxItems: 0,
    // stores the current active item
    currentActiveItem: '',
    // stores the search input value typed
    // the input value's change during keyboard arrows navigation, but need to
    // back to the value typed previously
    searchTerm: '',
    // set the update function that rebuild list on type
    // by default, uses the updateList() function
    updateList: function (list) {
      return updateList(list);
    },
    // default title
    // displayed when search input has focus but no value
    defaultTitle: '',
    // default list
    // displayed when search input has focus but no value
    defaultList: [],
    // title displayed within dinamic suggestion list
    suggestionsTitle: '',
    // list filtered and displayed during type on search input
    suggestionsList: [],
    onBuildList: function () {
      // console.log('list has builded');
    },
  };
  var config = {};

  var extend = function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  /**
   * Init the component
   * @param  {Object} options options for the content
   */
  var init = function () {
    // Define options
    config = extend({}, defaults, opt);

    window.addEventListener('scroll', function () {
      closeSuggestions();
    });

    // Previne que ao recarregar a página traga o valor do input preenchido
    if (detectIE()) {
      var searchInput = document.querySelector(config.search);
      if (searchInput) searchInput.value = '';
    }

    config.body = document.querySelectorAll('body, html');
    config.search = (typeof config.search === 'string') ? document.querySelector(config.search) : config.search;
    config.suggestions = (typeof elem === 'string') ? document.querySelector(elem) : elem;
    config.list = config.suggestions.querySelector(config.list);

    // Return if not exists search component
    if (!config.suggestions || !config.search) return;

    // set function to update list
    setCustomUpdate(config.suggestionsList);

    // Open suggestions
    if (config.search) config.search.addEventListener('focus', openSuggestions);

    // Close suggestions
    // Should close only in click outside
    // if (config.search) config.search.addEventListener('blur', closeSuggestions);

    // Build default list
    buildList();

    // Unselect items on search input blur
    if (config.search) config.search.addEventListener('blur', disableItemActive);

    // Close search on click outside
    Array.prototype.forEach.call(config.body, function (el) {
      el.addEventListener('click', function (event) {
        if (
          suggestionsIsOpen() &&
          !config.suggestions.contains(event.target) &&
          !config.search.contains(event.target)) {
          closeSuggestions();
          return false;
        }
      });
    });

    // On search input keyboard events
    document.addEventListener('keydown', function (event) {
      var keyUp = event.keyCode === 38;
      var keyDown = event.keyCode === 40;
      var keyTab = event.keyCode === 9;
      // var keyEnter = event.keyCode === 13;
      // var keyEsc = event.keyCode === 27;
      var items = config.list.querySelectorAll('.' + config.itemClass);
      var itemActive = getItemActive();
      var itemActiveIndex = (itemActive) ?
        Array.prototype.indexOf.call(items, itemActive) : -1;

      // Run only if search suggestions is open
      if (!suggestionsIsOpen() || !items.length) return;

      // If tab is pressed, Close suggestions on search input blur if focus's not
      // in suggestions's links
      if (keyTab && !searchHasFocus()) closeSuggestions();

      //
      // Select item on keyboard arrow up/down move
      //
      // If arrow up key is pressed
      if (keyUp) {
        event.preventDefault();
        // If has not an item active
        if (itemActiveIndex < 0) {
          // select the last item
          items[items.length - 1].classList.add(config.itemsActiveClass);
          config.search.value = getItemContent(items[items.length - 1]);
        // If has an item active and it's not the first item
        } else if (itemActiveIndex > 0) {
          // select the previous item
          itemActive.classList.remove(config.itemsActiveClass);
          items[itemActiveIndex - 1].classList.add(config.itemsActiveClass);
          config.search.value = getItemContent(items[itemActiveIndex - 1]);
        // If item active is the first item
        } else {
          // unselect item active
          itemActive.classList.remove(config.itemsActiveClass);
          config.search.value = config.searchTerm;
        }

        // Move the caret to the end of input's value
        // By default, browsers usually move the caret to start when arrow up is
        // pressed in a focused input
        config.search.setSelectionRange(config.search.value.length, config.search.value.length);
      // If arrow down key is pressed
      } else if (keyDown) {
        event.preventDefault();
        // If has not an item active
        if (itemActiveIndex < 0) {
          // select the first item
          items[0].classList.add(config.itemsActiveClass);
          config.search.value = getItemContent(items[0]);
        // If has an item active and it's not the last item
        } else if (itemActiveIndex >= 0 && itemActiveIndex < (items.length - 1)) {
          // select the next item
          itemActive.classList.remove(config.itemsActiveClass);
          items[itemActiveIndex + 1].classList.add(config.itemsActiveClass);
          config.search.value = getItemContent(items[itemActiveIndex + 1]);
        // If item active is the last item
        } else {
          // unselect item active
          itemActive.classList.remove(config.itemsActiveClass);
          config.search.value = config.searchTerm;
        }
      }
    });

    // On search input type
    config.search.addEventListener('input', function () {
      // update searchTerm
      config.searchTerm = config.search.value;

      if (!suggestionsIsOpen()) openSuggestions();

      // run custom function to update list
      if (config.searchTerm) {
        config.updateList();
      // run custom function to update list
      } else {
        buildList();
      }
    });
  };

  /**
   * Open Suggestions Box
   */
  var openSuggestions = function () {
    // Previne bug no IE ao carregar a página
    if ((config.search === document.activeElement) && (config.suggestions)) {
      config.suggestions.classList.add(config.suggestionsActiveClass);
    }
  };

  /**
   * Close Suggestions Box
   */
  var closeSuggestions = function () {
    if (config.suggestions) config.suggestions.classList.remove(config.suggestionsActiveClass);
  };

  /**
   * Toggle Suggestions Box
   */
  var toggleSuggestions = function () {
    if (!suggestionsIsOpen()) openSuggestions();
    else closeSuggestions();
  };

  /**
   * Check if Suggestions Box is open
   * @return {Boolean} true if open
   */
  var suggestionsIsOpen = function () {
    return config.suggestions.classList.contains(config.suggestionsActiveClass);
  };

  /**
   * Build List
   * Build the list (<ul>/<li>) of suggestions
   *
   * @param  {Array}    list  list of suggestions
   * @param  {String}   title title of the list
   * @param  {Number}   limit limit of suggestions
   * @param  {Function} cb    callback called after list's builded
   */
  var buildList = function (list, title, limit, cb) {
    // Check if list exists and if it's an array
    if (typeof list === 'undefined' || !Array.isArray(list)) {
      // If no list is passed and a default list exists, use default instead
      if (config.defaultList && Array.isArray(config.defaultList)) list = config.defaultList;
      // If no list is passed and there's no default list, throw error
      else list = null;
      // else throw new Error('An array of items is required');
    }

    // Set default limit
    if (typeof limit === 'undefined') limit = config.maxItems;

    // destroy current list to avoid multiple instances
    destroyList();

    // Change title
    setTitle(title);

    // Build list
    if (list) {
      list.some(function (item, index) {
        config.list.appendChild(addItem(item));
        return ++index === limit;
      });
    }

    // Callback
    if (typeof cb === 'function') cb();
    else config.onBuildList(config.suggestions);
  };

  /**
   * Destroy List
   * Remove all child nodes (<li>) from the list (<ul>)
   */
  var destroyList = function () {
    setTitle('');
    if (config.list.firstChild) while (config.list.firstChild) config.list.removeChild(config.list.firstChild);
  };

  /**
   * Update List
   * Destroy, filter and rebuild the suggestions list
   *
   * @param  {Array} list list of suggestions
   */
  var updateList = function (list) {
    // Update suggestions list
    if (Array.isArray(list)) config.suggestionsList = list;

    // destroy current list to avoid multiple instances
    destroyList();

    // add loading
    setLoadingState(true);

    // build
    buildList(filterList(config.suggestionsList, config.searchTerm), '');

    // remove loading
    setLoadingState(false);
  };

  /**
   * Filter List
   * Filter an array of objects to return only those who have the search term
   * in its key value.
   *
   * @param  {Array}  list   list of objects
   * @param  {String} search text to search in list
   * @return {Array}         list of objects who have search string in
   */
  var filterList = function (list, search) {
    return list.filter(function (item) {
      if (typeof item.content === 'string') {
        return indexOfSpecial(item.content, search) > -1;
      } else if (Array.isArray(item.content)) {
        return item.content.some(function (content) {
          return typeof content === 'string' && indexOfSpecial(content, search) > -1;
        });
      }
    });
  };

  /**
   * Set Title
   * @param  {String} title a title to suggestions list
   */
  var setTitle = function (title) {
    var elTitle = config.suggestions.querySelector('.' + config.listTitleClass);
    // Check if title exists and if it's an array
    if (typeof title === 'undefined') {
      // If no title is passed and a default title exists, use default instead
      if (typeof config.defaultTitle === 'string') title = config.defaultTitle;
      // If no title is passed and there's no default title, set title as empty
      else title = '';
    }
    // set title in HTML
    if (elTitle) elTitle.innerText = title;
  };

  /**
   * Custom Update
   * Set a custom function to run on input typing
   *
   * @param  {Function} fn custom function
   */
  var setCustomUpdate = function (fn) {
    if (typeof fn === 'function') {
      // update from dinamic function
      config.updateList = fn;
    }
  };

  /**
   * Default List
   * Set default list of suggestions and title, defined by config.defaultList
   * and config.defaultTitle, respectively.
   *
   * @param  {Array}  list  list of suggestions
   * @param  {String} title a title to suggestions list
   */
  var setDefaultList = function (list, title) {
    if (Array.isArray(list)) config.defaultList = list;
    if (typeof title === 'string') config.defaultTitle = title;
    buildList(config.defaultList, config.defaultTitle);
  };

  /**
   * Add Item
   * Add an item <li> to suggestions list
   *
   * Object:
   *   term: string - the part of text that has the search term
   *   link: string - url to the page of the item
   *   location: string - name of the page of the item
   *
   * @param  {Object} item object with the content of item
   * @return {String} HTML string of the item
   */
  var addItem = function (item) {
    var li = document.createElement('li');
    var anchor;
    var contents;

    if (!item || !item.content.length) return;

    if (typeof item.content === 'string') contents = [item.content];
    else if (Array.isArray(item.content)) contents = item.content;
    else console.error('item content should be a string or an array of strings');

    li.classList.add(config.itemClass);

    if (item.link) {
      anchor = document.createElement('a');
      anchor.href = item.link;
    } else {
      anchor = document.createElement('button');
      anchor.type = 'button';
    }

    anchor.classList.add(config.itemLinkClass);
    li.appendChild(anchor);

    contents.forEach(function (content, index) {
      var span = document.createElement('span');
      var contentHighlighted = replaceTerms(content, config.searchTerm) || '';
      span.innerHTML = contentHighlighted || content;
      span.setAttribute('data-value', content);
      if (config.contentClasses.length) span.classList.add(config.contentClasses[index]);
      if (anchor) anchor.appendChild(span);
      else li.appendChild(span);
    });

    if (!item.link) {
      anchor.addEventListener('click', function () {
        config.search.value = getItemContent(li);
      });
    }

    return li;
  };

  /**
   * Get All Items
   * Get the nodelist with all list item elements
   *
   * @return {NodeList} array with all item elements
   */
  var getAllItems = function () {
    return config.list.querySelectorAll('.' + config.itemClass);
  }

  /**
   * Get ItemContent
   * Get the text content of an list item element
   *
   * @param  {Object} item item element with the content of item
   * @return {String}      the item textContent
   */
  var getItemContent = function (item) {
    var itemTerm;
    if (!item) return;
    itemTerm = item.querySelectorAll('span');
    return itemTerm[0].textContent;
  };

  /**
   * Get current active item
   * Get the current item marked as active during keyboard arrows navigation.
   *
   * @return {Object} DOM Object of the item
   */
  var getItemActive = function () {
    return config.suggestions.querySelector('.' + config.itemsActiveClass);
  };

  /**
   * Disable current active item
   * Disable the current item marked as active during keyboard arrows navigation.
   */
  var disableItemActive = function () {
    var active = getItemActive();
    // unselect item active
    if (active) active.classList.remove(config.itemsActiveClass);
  };

  /**
   * Replace Terms
   * Replace the searchTerm in the term string with custom HTML to make it bold
   *
   * @param  {String} strWhereSearch item term
   * @param  {String} strToFind      search term to replace in item term
   * @return {String}                item term replaced with bold search term
   */
  var replaceTerms = function (strWhereSearch, strToFind) {
    // Array to store strings before join
    var occurrencesString = [];

    // Check if both parameters was passed
    if (typeof strWhereSearch === 'undefined' ||
      typeof strToFind === 'undefined') return;

    /**
     * Loop through parts of strWhereSearch to check if it has strToFind in
     * @param {String} strPart some string where to find out strToFind
     */
    var allIndex = function (strPart) {
      var realString = '';
      var newString = '';
      var idx;
      // check if strPart has strToFind,
      idx = indexOfSpecial(strPart, strToFind);
      if (idx > -1) {
        // store the realString
        realString = strPart.substring(idx, idx + strToFind.length);
        newString = '<b class="' + config.itemTermTypedClass + '">' + realString + '</b>';
        // store the part of the strPart before realString and realString replaced
        // with bold HTML tags
        strBefore = strPart.substring(0, idx + realString.length).replace(realString, newString);
        // store the part of the strPart after realString
        strAfter = strPart.substring(idx + realString.length);
        // push strBefore to the occurrencesString
        occurrencesString.push(strBefore);
        // if strAfter not empty, pass it to allIndex function
        if (strAfter) allIndex(strAfter);
      } else {
        // if strPart has not strToFind in, push it to the end of occurrencesString
        occurrencesString.push(strPart);
      }
    };

    // run allIndex
    allIndex(strWhereSearch);

    // return strWhereSearch replaced strToFind bold
    return occurrencesString.join('');
  };

  /**
   * Set loading state
   * @param  {Boolean} state true to add loading, false to remove loading
   */
  var setLoadingState = function (state) {
    // check parameters
    // if state empty, toogle loading instead set
    if (typeof state === 'undefined') {
      state = !config.suggestions.classList.contains(config.suggestionsLoadingClass);
    }

    // Set state
    if (state === true) {
      config.suggestions.classList.add(config.suggestionsLoadingClass);
    } else if (state === false) {
      config.suggestions.classList.remove(config.suggestionsLoadingClass);
    }
  };

  /**
   * Check if Search Input or any item of suggestions list has focus
   * @return {Boolean} true if search has focus
   */
  var searchHasFocus = function () {
    // all links (<a>) inside list
    var links = config.list.querySelectorAll('a');
    // Check if search Input has focus
    var searchInputHasFocus = config.search === document.activeElement;
    // Check if any item of suggestions list has focus
    var anyLinkHasFocus = Array.prototype.some.call(links, function (link) {
      return link === document.activeElement;
    });
    // return if any of those are true
    return (searchInputHasFocus || anyLinkHasFocus);
  };

  return {
    init: init,
    toggle: toggleSuggestions,
    open: openSuggestions,
    close: closeSuggestions,
    isOpen: suggestionsIsOpen,
    filter: filterList,
    build: buildList,
    destroy: destroyList,
    update: config.updateList,
    custom: setCustomUpdate,
    setLoading: setLoadingState,
    defaultList: config.defaultList,
    setDefaultList: setDefaultList,
    getSerchTerm: config.searchTerm,
    config: config,
  };
};

/**
 * Examples
 */
//
// // Init Search Constructor with default and suggestions lists
// var defaultExample = function () {
//   // document.addEventListener('DOMContentLoaded', function () {
//
//   var sugestoes = document.querySelectorAll('.bs-js-search-suggestions');
//   var instances = [];
//   if (sugestoes && sugestoes.length) {
//     Array.prototype.forEach.call(sugestoes, function (el) {
//       var instance = new BsSearchSuggestions(el, {
//         contentClasses: [
//           'bs-search-suggestions__term',
//           'bs-search-suggestions__location',
//         ],
//         maxItems: 8,
//         defaultTitle: 'Mais Buscados',
//         defaultList: [
//           {
//             content: 'Sem link e sem location',
//           },
//           {
//             link: '#!',
//             content: [
//               'Lorem ipsum dolor sit amet',
//               'irure dolor',
//             ],
//           },
//           {
//             link: '#!',
//             content: [
//               'Lorem ipsum dolor sit amet',
//               'irure dolor',
//             ],
//           },
//           {
//             link: '#!',
//             content: [
//               'consectetur adipisicing elit',
//               'in reprehenderit',
//             ],
//           },
//           {
//             link: '#!',
//             content: [
//               'sed do eiusmod tempor incididunt',
//               'voluptate velit',
//             ],
//           },
//           {
//             link: '#!',
//             content: [
//               'ut labore et dolore magna aliqua',
//               'esse cillum dolore',
//             ],
//           },
//           {
//             link: '#!',
//             content: [
//               'Ut enim ad minim veniam',
//               'eu fugiat nulla',
//             ],
//           },
//           {
//             link: '#!',
//             content: [
//               'quis nostrud exercitation ullamco',
//               'excepteur sint occaecat',
//             ],
//           },
//           {
//             link: '#!',
//             content: [
//               'laboris nisi ut aliquip ex ea',
//               'cupidatat non proident',
//             ],
//           },
//           {
//             link: '#!',
//             content: [
//               'commodo consequat. Duis aute',
//               'qui officia deserunt',
//             ],
//           },
//         ],
//         suggestionsList: [
//           {
//             content: 'Sem link e sem location',
//           },
//           {
//             link: '#!',
//             content: [
//               'Lorem ipsum dolor sit amet',
//               'irure dolor',
//             ],
//           },
//           {
//             link: '#!',
//             content: [
//               'consectetur adipisicing elit',
//               'in reprehenderit',
//             ],
//           },
//           {
//             link: '#!',
//             content: [
//               'sed do eiusmod tempor incididunt',
//               'voluptate velit',
//             ],
//           },
//           {
//             link: '#!',
//             content: [
//               'ut labore et dolore magna aliqua',
//               'esse cillum dolore',
//             ],
//           },
//           {
//             link: '#!',
//             content: [
//               'Ut enim ad minim veniam',
//               'eu fugiat nulla',
//             ],
//           },
//           {
//             link: '#!',
//             content: [
//               'quis nostrud exercitation ullamco',
//               'excepteur sint occaecat',
//             ],
//           },
//           {
//             link: '#!',
//             content: [
//               'laboris nisi ut aliquip ex ea',
//               'cupidatat non proident',
//             ],
//           },
//           {
//             link: '#!',
//             content: [
//               'commodo consequat. Duis aute',
//               'qui officia deserunt',
//             ],
//           },
//         ],
//       });
//       instance.init();
//       instances.push(instance);
//     });
//   }
// };
// defaultExample();
//
// if (document.querySelector('.busca')) {
//   var differentClassesExample = new BsSearchSuggestions('.bs-autocomplete', {
//     search: '.busca',
//     // suggestions: '.bs-autocomplete',
//     // list: '.bs-search-suggestions__list',
//     list: '.bs-search-suggestions__list',
//     suggestionsActiveClass: 'bs-is-open',
//     suggestionsLoadingClass: 'bs-is-loading',
//     itemClass: 'li',
//     itemsActiveClass: 'li--active',
//     itemLinkClass: 'link',
//     itemTermClass: 'term',
//     itemTermTypedClass: 'term-typed',
//     itemLocationClass: 'location',
//     defaultTitle: '',
//     defaultList: [
//       {
//         term: 'Lorem ipsum dolor sit amet',
//         link: '#!',
//         location: 'irure dolor',
//       },
//       {
//         term: 'consectetur adipisicing elit',
//         link: '#!',
//         location: 'in reprehenderit',
//       },
//       {
//         term: 'sed do eiusmod tempor incididunt',
//         link: '#!',
//         location: 'voluptate velit',
//       },
//       {
//         term: 'ut labore et dolore magna aliqua',
//         link: '#!',
//         location: 'esse cillum dolore',
//       },
//       {
//         term: 'Ut enim ad minim veniam',
//         link: '#!',
//         location: 'eu fugiat nulla',
//       },
//       {
//         term: 'quis nostrud exercitation ullamco',
//         link: '#!',
//         location: 'excepteur sint occaecat',
//       },
//       {
//         term: 'laboris nisi ut aliquip ex ea',
//         link: '#!',
//         location: 'cupidatat non proident',
//       },
//       {
//         term: 'commodo consequat. Duis aute',
//         link: '#!',
//         location: 'qui officia deserunt',
//       },
//     ],
//     suggestionsList: [
//       {
//         term: 'Lorem ipsum dolor sit amet',
//         link: '#!',
//         location: 'irure dolor',
//       },
//       {
//         term: 'consectetur adipisicing elit',
//         link: '#!',
//         location: 'in reprehenderit',
//       },
//       {
//         term: 'sed do eiusmod tempor incididunt',
//         link: '#!',
//         location: 'voluptate velit',
//       },
//       {
//         term: 'ut labore et dolore magna aliqua',
//         link: '#!',
//         location: 'esse cillum dolore',
//       },
//       {
//         term: 'Ut enim ad minim veniam',
//         link: '#!',
//         location: 'eu fugiat nulla',
//       },
//       {
//         term: 'quis nostrud exercitation ullamco',
//         link: '#!',
//         location: 'excepteur sint occaecat',
//       },
//       {
//         term: 'laboris nisi ut aliquip ex ea',
//         link: '#!',
//         location: 'cupidatat non proident',
//       },
//       {
//         term: 'commodo consequat. Duis aute',
//         link: '#!',
//         location: 'qui officia deserunt',
//       },
//     ],
//   });
//   differentClassesExample.init();
//   // console.log(differentClassesExample);
// }
//
// // Get external list and update the static list of suggestions
// var ajaxStaticExample = function () {
//   var swPeople = function (people) {
//     people = JSON.parse(people);
//     var list = people.results.map(function (person) {
//       return {
//         term: person.name,
//         url: person.url,
//         location: '',
//       };
//     });
//
//     // rebuild
//     BsSearchSuggestions.update(list);
//     BsSearchSuggestions.setLoading(false);
//   };
//
//   // destroy
//   BsSearchSuggestions.destroy();
//   BsSearchSuggestions.setLoading(true);
//
//   httpGet('https://swapi.co/api/people/?format=json', swPeople.bind());
// };
//
// // updates the default updateList function to call ajax request during input typing
// var ajaxOnTypeExample = function () {
//   BsSearchSuggestions.custom(function () {
//     ajaxStaticExample();
//   });
// };

/**
 * Snackbar
 * https://github.com/material-components/material-components-web/tree/master/packages/mdc-snackbar
 */
var BsSnackbar = (function () {
  // Config
  var config = {
    buttons: {
      trigger: document.querySelectorAll('.bs-js-trigger-snackbar'),
      close: document.querySelector('.bs-js-close-snackbar'),
    },
    classes: {
      alert: 'bs-snackbar--alert',
      visible: 'bs-snackbar--visible',
    },
    snackbars: document.querySelectorAll('.bs-snackbar'),
    timeoutFn: null,
    timeoutTime: 2750,
  };

  var init = function () {
    if (config.buttons.trigger) {
      Array.prototype.forEach.call(config.buttons.trigger, function (button) {
        button.addEventListener('click', function () {
          var snackbarId = button.dataset.snackbarId;
          if (snackbarId) showSnackbar(snackbarId);
        });
      });
    }

    if (config.snackbars) {
      Array.prototype.forEach.call(config.snackbars, function (snackbar) {
        snackbar.addEventListener('mouseover', function () {
          clearTimeout(config.timeoutFn);
        });

        snackbar.addEventListener('mouseleave', function () {
          timeout(snackbar);
        });
      });
    }
  };

  var showSnackbar = function (snackbarId) {
    var snackbar = document.querySelector('.bs-snackbar[data-snackbar-id="' + snackbarId + '"]');
    var isVisible = snackbar.classList.contains(config.classes.visible);

    if (!isVisible && snackbar) {
      snackbar.classList.add(config.classes.visible);
      timeout(snackbar);
    }
  };

  var timeout = function (snackbar) {
    config.timeoutFn = setTimeout(function () {
      hideSnackbar(snackbar);
    }, config.timeoutTime);
  };

  var hideSnackbar = function (snackbar) {
    snackbar.classList.remove(config.classes.visible);
  };

  return {
    init: init,
    show: showSnackbar,
    hide: hideSnackbar,
  };
}());

/**
 * Init BsSnackbar constructor
 * @return {void} BsSnackbar.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-snackbar').length) {
    BsSnackbar.init();
  }
});

var BsShare = (function() {

  // Config List and Select
  var config = {
    shareSocial: document.querySelectorAll('.bs-js-social-share')
  }

  // Start Functions Download
  var init = function() {

    Array.prototype.forEach.call(config.shareSocial, function (el) {
      var buttonSocial = el.querySelector('a');
    
      buttonSocial.addEventListener('click', function (e) {
        e.preventDefault(); 
        
        var socialFacebook = buttonSocial.classList.contains('bs-js-facebook') ? 'https://www.facebook.com/sharer/sharer.php?u=' : '';
        var socialTwitter = buttonSocial.classList.contains('bs-js-twitter') ? 'https://twitter.com/intent/tweet?url=' : '';
        var socialGplus = buttonSocial.classList.contains('bs-js-gplus') ? 'https://plus.google.com/share?app=110&url=' : '';
        var socialLinkdin = buttonSocial.classList.contains('bs-js-linkdin') ? 'https://www.linkedin.com/shareArticle?mini=true&url=' : '';
    
        var url = socialFacebook.concat(socialTwitter, socialGplus, socialLinkdin);
        var openWindow = window.open(url + document.URL  , 'popup', 'height=450,width=350');

        if (openWindow.focus) { 
            openWindow.focus(); 
          } else {
            return false;
          }
        });
      });
  };

  return {
      init: init
  };
}());

/**
* Init Modal Constructor
* @return {void} Header.init();
*/
document.addEventListener('DOMContentLoaded', function() {
  if (document.querySelectorAll('.bs-js-social-share').length) {
    BsShare.init();
  }
});
var BsSticky = (function() {

  var referenceNode = null;
  var cfgNav = {};
  var cfgSize = {};

  // Start Functions Nav
  var init = function(options) {
    var newNodeContainer = document.createElement('div');
    var newNodeChild = document.createElement('div');
    var parentNode = null;

    // Config nav and sizes
    cfgSize = {
      setSizeWindow : 768,
      setMarginTop : 30,
      setParentClass: 'bs-js-aside',
    }
    if (typeof options === 'object') {
      if (options.setSizeWindow) cfgSize.setSizeWindow = options.setSizeWindow
      if (options.setMarginTop) cfgSize.setMarginTop = options.setMarginTop
      if (options.setParentClass) cfgSize.setParentClass = options.setParentClass
    }

    // Get the parent node
    referenceNode = document.querySelector('.bs-js-sticky')
    newNodeContainer.classList.add('bs-sticky')
    if (referenceNode) {
      parentNode = referenceNode.parentNode;
      if (cfgSize.setParentClass && getParent(referenceNode, cfgSize.setParentClass)) {
        parentNode = getParent(referenceNode, cfgSize.setParentClass);
        newNodeChild = parentNode.children[0];
      } else {
        newNodeChild = referenceNode;
      }
      parentNode.insertBefore(newNodeContainer, newNodeChild);
      newNodeContainer.appendChild(newNodeChild);
    }

    if (referenceNode && newNodeContainer) {
      cfgNav = {
        navFix : newNodeChild,
        navFixContainer : newNodeContainer,
      };
      cfgSize.navFixSticky = cfgNav.navFix.offsetTop;
      cfgSize.navFixStickyContainer = cfgNav.navFixContainer.offsetTop;
      cfgSize.navParent = cfgNav.navFix.parentNode;
    }

    resizeHeaderOnScroll();

    // Executa Verificação de tela e retorna função inicial
    viewportWidth();
    navSizeView();

    // Evento para resize de verificação da viewport ate tamanho preciso
    window.addEventListener('resize', function () {
      viewportWidth();
      navSizeView();
    });
  };

  var viewportWidth = function () {
    cfgSize.viewportWidth = window.innerWidth || document.documentElement.clientWidth;
  }

  var navSizeView = function () {
    viewportWidth();
    if (cfgSize.viewportWidth < cfgSize.setSizeWindow) {
      window.removeEventListener('scroll', resizeHeaderOnScroll);
      cfgNav.navFix.style.cssText = '';
    } else {
      window.addEventListener('scroll', resizeHeaderOnScroll);
      cfgNav.navFix.style.width = cfgSize.navParent.getBoundingClientRect().width + 'px'
      resizeHeaderOnScroll();
    }
  }

  var resizeHeaderOnScroll = function() {

    // Config nav Inside With Scroll
    var cfgInside = {
      // Captura a distancia do topo até o elemento incial da div
      distanceOrigin : (window.pageYOffset ),
      // Captura distancias selecionadas pela função
      topRectInside : cfgSize.navParent.getBoundingClientRect().top,
      bottomRectInside : cfgSize.navParent.getBoundingClientRect().bottom,
      //  Captura altura do elemento interno no scroll
      navHeightInside : cfgNav.navFix.offsetHeight,
      widthRectInside : cfgSize.navParent.getBoundingClientRect().width,
      // Recebe valor da altura da navegação e diminui por Tamanho da navegação
      setHeader : document.querySelector('.bs-header'),
      setHeaderPin : document.querySelector('.bs-header--pinned')
    };

    // Altura do stick pai
    var cfgRect = {
      heightRectOut : cfgSize.navParent.getBoundingClientRect().height
    }

    // Calculos para dimensionar posição da nav em relação a pagina e ao menu fixo
    var cfgCalc = {
      // Adiciona margem a posição para ficar fixa no rodapé do elemento pai
      navHeightContent : cfgRect.heightRectOut - cfgInside.navHeightInside,
      // desconta tamanho do box para iniciar acima do header pin se existir
      navHeightInside : cfgInside.bottomRectInside - cfgInside.navHeightInside,
      distanceRelativeOrigin : (cfgInside.distanceOrigin)
    };

    var downStatic = function() {
      cfgNav.navFix.style.transition = '0s';
      cfgNav.navFix.style.position = 'static';
      cfgNav.navFix.style.top = '30px';
    }
    var downFixed = function() {
      cfgNav.navFix.style.position = 'fixed';
      cfgNav.navFix.style.transition = '.3s';
      cfgNav.navFix.style.top = cfgSize.setMarginTop + 'px';
    }
    var downRelative = function() {
      cfgNav.navFix.style.transition = '0s';
      cfgNav.navFix.style.position = 'relative';
      cfgNav.navFix.style.top = cfgCalc.navHeightContent + 'px';
      cfgNav.navFix.style.transition = null;
    }

    var upStatic = function() {
      cfgNav.navFix.style.transition = '0s';
      cfgNav.navFix.style.position = 'static';
      cfgNav.navFix.style.top = '30px';
    }
    var upFixed = function() {
      cfgNav.navFix.style.position = 'fixed';
      cfgNav.navFix.style.top = cfgSetHeader.headerOrigin + 30 +'px';
    }
    var upRelative = function() {
      cfgNav.navFix.style.transition = '0s';
      cfgNav.navFix.style.position = 'relative';
      cfgNav.navFix.style.top = cfgCalc.navHeightContent + 'px';
    }


    if (cfgInside.setHeader) {
      // Calculos para dimensionar posição da nav em relação a pagina e ao menu fixo
      cfgSetHeader = {
        headerOrigin : (cfgInside.setHeader.offsetHeight)
      }
      // cfgInside.distanceOrigin -= cfgSetHeader.headerOrigin;
      console.log('distanceOrigin: ', cfgInside.distanceOrigin);
    }

    // recalcula offsetTop bs-js-stick
    cfgSize.navFixSticky = cfgNav.navFix.offsetTop;
    // recalcula offsetTop do filho
    cfgSize.navFixStickyContainer = cfgNav.navFixContainer.offsetTop;
    // Adiciona Tamanho Original da div Pai
    cfgNav.navFix.style.width = cfgInside.widthRectInside + 'px'
    // Atualiza margem a posição para ficar fixa no rodapé do elemento pai

    // Se tiver header com pin
    if (cfgInside.setHeaderPin) {
      // Navegação Se final do elemento fixa relativo
      // Enquanto sobe o estatico no topo
      console.log('cfgCalc.navHeightInside: ', cfgCalc.navHeightInside);
      console.log('cfgSetHeader.headerOrigin: ', cfgSetHeader.headerOrigin);
      console.log('cfgCalc.distanceRelativeOrigin: ', cfgCalc.distanceRelativeOrigin);
      console.log('cfgSize.navFixStickyContainer: ', cfgSize.navFixStickyContainer);
      if (cfgCalc.navHeightInside - 30 < (cfgSetHeader.headerOrigin)) {
        console.log('upRelative()');
        upRelative()
      } else if(((cfgCalc.distanceRelativeOrigin + 30) + cfgSetHeader.headerOrigin) < (cfgSize.navFixStickyContainer )) {
        console.log('upStatic()');
        upStatic()
      } else {
        console.log('upFixed()');
        upFixed()
      }

    // Se tiver header sem pin
    } else {
      // Navegação Se final do elemento fixa relativo
      // Quando para no bottom do pai
      if (cfgCalc.navHeightInside < cfgSize.setMarginTop) {
        downRelative()
      }
      //- Altura Relativa do Nav 'se' Maior que 'Altura do Menu'
      // Fixa no top a navegação
      else if(((cfgInside.distanceOrigin + 30) > (cfgSize.navFixStickyContainer))) {
        downFixed()
      }
      // Distancia ate a altura do scroll relativo ao altura fixa do margin top
      // - Enquanto estatico na pagina antes de fixar no topo
      else if(cfgCalc.distanceRelativeOrigin < cfgSize.navFixStickyContainer) {
        downStatic()
      }
    }
  }

  return {
      init: init,
      load: resizeHeaderOnScroll,
  };
}());

/**
* Init Modal Constructor
* @return {void} Header.init();
*/
document.addEventListener('DOMContentLoaded', function() {
  if (document.querySelectorAll('.bs-js-sticky').length) {
    BsSticky.init();

    window.addEventListener('load', function() {
      BsSticky.load();
    });
  }
});

/**
 * Tabela de Resultado de Sorteios
 * Pode expandir linhas para exibir um conteúdo maior
 *
 */
var BsTableCollapsible = (function () {
  // Config
  var config = {
    table: document.querySelector('.bs-table--collapsible'),
    buttons: {
      trigger: document.querySelectorAll('.bs-js-trigger-collapsible'),
      sort: document.querySelectorAll('.bs-js-sort-collapsible'),
    },
    tableFilterSelect: document.querySelector('.bs-js-filter-table-collapsible-items'),
    tableRows: document.querySelectorAll('.bs-table__row'),
    tableItems: document.querySelectorAll('.bs-js-table-collapsible-item'),
    classes: {
      rowCollapsed: 'bs-table__row--collapsed',
      tableRow: 'bs-table__row',
      rowActive: 'bs-table__row--active',
      tableHasFilter: 'bs-has-filter',
    },
  };

  var init = function () {
    if (config.buttons.trigger) {
      Array.prototype.forEach.call(config.buttons.trigger, function (button) {
        button.addEventListener('click', function () {
          toggleRow(button);
        });
      });
    }

    if (config.table) {
      BsTableSort.init(config.table.querySelector('table'));
    }

    if (config.tableFilterSelect) {
      config.tableFilterSelect.addEventListener('change', function (ev) {
        var id = ev.target.value;
        filterItems(id);
      });
    }
  };

  var filterItems = function (filterId) {
    var activeItem;
    var activeItemRow = '';
    var currentActiveRow = config.table.querySelector('.' + config.classes.rowActive);

    if (typeof filterId !== 'string') return;

    activeItem = config.table.querySelector('.bs-js-table-collapsible-item[data-item-id="' + filterId + '"]');
    activeItemRow = getParent(activeItem, 'bs-table__row');

    if (currentActiveRow) currentActiveRow.classList.remove(config.classes.rowActive);

    if (filterId === '') {
      config.table.classList.remove(config.classes.tableHasFilter);
    } else {
      config.table.classList.add(config.classes.tableHasFilter);
      activeItemRow.classList.add(config.classes.rowActive);
    }
  };


  var toggleRow = function (element) {
    var row = getRow(element);

    if (row && row.classList.contains(config.classes.rowCollapsed)) {
      row.classList.remove(config.classes.rowCollapsed);
    } else if (!row.classList.contains(config.classes.rowCollapsed)) {
      row.classList.add(config.classes.rowCollapsed);
    }
  };

  var getRow = function (element) {
    return getParents(element, config.classes.tableRow)[0];
  };

  return {
    init: init,
  };
}());

/**
 * Init BsTableCollapsible constructor
 * @return {void} BsTableCollapsible.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelector('.bs-table--collapsible')) {
    BsTableCollapsible.init();
  }
});

/**
 * Tabs
 * Guias (tabs) organizam e permitem a navegação entre grupos de conteúdo
 * que estão relacionados e possuem o mesmo nível de hierarquia.
 *
 * References:
 * - https://www.w3.org/TR/wai-aria-practices/examples/tabs/tabs-1/tabs.html
 * - https://gist.github.com/jonathantneal/435478e415bfe4f54d06
 * - https://codyhouse.co/gem/responsive-tabbed-navigation/
 * - https://uxplanet.org/tabs-for-mobile-ux-design-d4cc4d9410d1
 * - https://www.nngroup.com/articles/tabs-used-right/
 * - https://material.io/design/components/tabs.html#states
 *
 * @return {Object} the module methods
 */
var BsTabs = function () {
  /**
   * Config object
   * @type {Object}
   */
  var config = {};

  /**
   * Set Config
   * @param  {Object} el a DOM element
   * @return {Object}    module's config object
   */
  var setConfig = function (el) {
    return {
      tabs: el,
      list: el.querySelector('.bs-tabs__list'),
      items: el.querySelectorAll('.bs-tabs__link'),
      panel: el.querySelector('.bs-tabs__panel-items'),
      panelContent: el.querySelectorAll('.bs-tabs__content'),
      panelSlider: el.querySelector('.bs-js-panel-slider'),
      arrows: el.querySelector('.bs-tabs__arrows'),
      buttonPrev: el.querySelector('.bs-tabs__arrow-prev'),
      buttonNext: el.querySelector('.bs-tabs__arrow-next'),
      classes: {
        contentActive: 'bs-tabs__content--active',
        tabActive: 'bs-is-active',
      },
      flktyTabs: null,
      flktyPanel: null,
      selectTabOnReady: true,
    };
  };

  /**
   * Init module
   * @param  {Object} elem a DOM element
   */
  var init = function (elem) {
    // return if there's not an element
    if (!elem || typeof elem !== 'object') return;
    // pass elem to set config
    config = setConfig(elem);

    // Remove tab if there's only one
    if (config.items.length < 2) {
      config.tabs.classList.add('bs-tabs--remove-tab');
    }

    debounce(buildSlider());
  };

  /**
   * Build Slider
   * Sliders for tabs and content
   */
  var buildSlider = function () {
    // Init a toggleContent
    var contentToggler = new BsToggleContent();

    // Set the tabs slider
    config.flktyTabs = new Flickity(config.list, {
      // add panel asNavFor if it's defined as slider
      asNavFor: config.panelSlider || false,
      cellAlign: 'left',
      adaptiveHeight: true,
      pageDots: false,
      prevNextButtons: false,
      contain: true,
      groupCells: true,
      on: {
        ready: onTabsReady,
      },
    });

    // if panel's defined as slider
    if (config.panelSlider) {
      // Set the panel slider
      config.flktyPanel = new Flickity(config.panelSlider, {
        pageDots: false,
        cellAlign: 'left',
        adaptiveHeight: true,
        prevNextButtons: false,
        on: {
          ready: onTabsReady,
        },
      });
    } else if (config.items && config.panelContent) {
      // set content toggler
      options = {
        buttons: config.items,
        containers: config.panelContent,
        activeButtonClass: config.classes.tabActive,
        activeContainerClass: config.classes.contentActive,
        method: 'click',
      };
      contentToggler.init(options);
    }

    // On Tabs select
    config.flktyTabs.on('select', function () {
      // viewport's width of the tabs container
      var offSet = config.tabs.offsetWidth;

      // sum of the each tab's width
      var totalReduce = Array.prototype.reduce.call(config.items, function (width, el) {
        width += el.offsetWidth;
        return width;
      }, 0);

      var cells = config.flktyTabs.cells;
      var selectedIndex = config.flktyTabs.selectedIndex;

      // if the first group of tabs is selected
      if (!cells[selectedIndex - 1]) {
        // disable previous button on hover
        config.buttonPrev.setAttribute('disabled', 'disabled');
        config.tabs.classList.remove('bs-tabs--over-prev');

        // if viewport offset is less than the sum of each tab's width
        if (offSet < totalReduce) {
          // show arrows
          config.arrows.style.display = 'block';
          // enable next button on hover
          config.buttonNext.removeAttribute('disabled', 'disabled');
          config.tabs.classList.add('bs-tabs--over-next');
        } else {
          // hide arrows
          config.arrows.style.display = 'none';
        }

      // if the group of tabs selected is not the first
      } else if (!cells[cells.length]) {
        // show arrows
        config.arrows.style.display = 'block';
        // enable previous button
        config.buttonPrev.removeAttribute('disabled', 'disabled');
        config.tabs.classList.add('bs-tabs--over-prev');

        // if the last group of tabs is selected
        if (selectedIndex === (config.flktyTabs.pageDots.dots.length - 1)) {
          // disable previous button
          config.buttonNext.setAttribute('disabled', 'disabled');
          config.tabs.classList.remove('bs-tabs--over-next');
        } else {
          // enable next button
          config.buttonNext.removeAttribute('disabled', 'disabled');
          config.tabs.classList.add('bs-tabs--over-next');
        }
      } else {
        // config.arrows.style.display = 'none';
      }
    });

    config.flktyTabs.resize();

    config.buttonPrev.addEventListener('click', function () {
      config.flktyTabs.previous();
    });
    config.buttonNext.addEventListener('click', function () {
      config.flktyTabs.next();
    });

    // remove pré style default
    config.list.style.display = 'block';
  };

  /**
   * On Tabs Slider's Ready
   * To run when tab slider (flickity) is ready
   */
  var onTabsReady = function () {
    if (config.selectTabOnReady) setTimeout(selectTabOnReady, 100);
  };

  /**
   * Select Tab OnReady
   * Check if there's a hash on URL and if it match an tab ID
   */
  var selectTabOnReady = function () {
    var index = -1;
    var tab = null;
    var hash = getHashAsIdFromUrlString(window.location.hash);
    // check if hash match an element
    if (hash) tab = config.tabs.querySelector(hash);
    // if there's an element, check if it's a tab
    if (tab) index = Array.prototype.indexOf.call(config.items, tab);
    // if it's a tab, select it
    if (index > -1) selectTab(index);
  };

  /**
   * Select Tab
   * @param  {Number} index the index of the tab
   */
  var selectTab = function (index) {
    // if panel is a slider
    if (config.flktyPanel) {
      // select the slide index
      config.flktyPanel.select(index);
    } else {
      // trigger a click on the index tab
      // the click is necessary here to run other events atached to the
      // element, related to BsToggleContent
      config.items[index].click();
    }
  };

  /**
   * Get the Tab Slider Object
   * @return {Object} the flickity object of the tabs
   */
  var getFlktyTabs = function () {
    return config.flktyTabs;
  };

  /**
   * Get the Tabs module
   * @return {Object} the module instance
   */
  var getTabs = function () {
    return bsModule;
  };

  return {
    init: init,
    get: getTabs,
    ready: onTabsReady,
    select: selectTab,
    flktyTabs: getFlktyTabs,
  };
};

/**
 * Init BsTabs constructor
 * @return {void} BsTabs.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  var tabs = document.querySelectorAll('.bs-js-tab--slider');
  if (tabs.length) {
    Array.prototype.forEach.call(tabs, function (el) {
      var tab = new BsTabs();
      tab.init(el);
    });
  }
});

var BsTelecordion = (function () {

  var config = {
    els: document.querySelectorAll('.bs-telecordion'),
    item: document.querySelectorAll('.bs-telecordion__item'),
    box: document.querySelectorAll('.bs-telecordion__box'),
    trigger: document.querySelectorAll('.bs-js-open-telecordion'),
    itemClass: 'bs-telecordion__item',
    boxClass: 'bs-telecordion__box',
    headerClass: 'bs-telecordion__header',
    activeClass: 'is-expanded',
  };

  var init = function () {
    var resizeTimer;

    // Add expand/collapse event
    Array.prototype.forEach.call(config.trigger, function (trigger) {
      var parent = trigger.closest('.' + config.itemClass);
      trigger.addEventListener('click', toggle.bind(null, parent));
      adjustHeight(parent);
    });

    window.addEventListener('resize', function () {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(function () {
        Array.prototype.forEach.call(config.item, function (item) {
          adjustHeight(item);
        });
      }, 250);
    });
  };

  var toggle = function (item) {
    if (isExpanded(item)) collapse(item);
    else expand(item);
  };

  var expand = function (item) {
    item.classList.add(config.activeClass);
    adjustHeight(item);
  };

  var collapse = function (item) {
    item.classList.remove(config.activeClass);
    adjustHeight(item);
  };

  var isExpanded = function (item) {
    return item.classList.contains(config.activeClass);
  };

  var adjustHeight = function (item) {
    var box = item.querySelector('.' + config.boxClass);
    var height = isExpanded(item) ? getItemHeight(item) : getHeaderHeight(item);
    box.style.height = (height > 60 ? height : 60) + 'px';
  };

  var getItemHeight = function (item) {
    var box = item.querySelector('.' + config.boxClass);
    return box.scrollHeight;
  };

  var getHeaderHeight = function (item) {
    var header = item.querySelector('.' + config.headerClass);
    return header.scrollHeight;
  };

  return {
    init: init,
  };
}());

/**
 * Init Modal Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelectorAll('.bs-telecordion').length) {
    BsTelecordion.init();
  }
});

/**
 * BsTimeLine
 * @return Module config
 */
var BsTimeLine = (function () {

  // Config
  var config = {
    navSelect: document.querySelector('.bs-time-line__nav'),
    navContent: document.querySelector('.bs-time-line__content'),
    previousButton: document.querySelector('.bs-time-line--prev'),
    nextButton: document.querySelector('.bs-time-line--next')
  }

  var init = function () {

    setTimeout (function () {

      // nav items select AND content in as nav for
      var flkty = new Flickity(config.navSelect, {
        asNavFor: config.navContent,
        cellAlign: 'center',
        adaptiveHeight: true,
        initialIndex: 2,
        prevNextButtons: false,
        // resize: true,
        imagesLoaded: true,
        contain: true
      });
      // nav items content
      flkty = new Flickity(config.navContent, {
        pageDots: false,
        cellAlign: 'center',
        adaptiveHeight: true,
        prevNextButtons: false,
        initialIndex: 2
      });

      flkty.on( 'cellSelect', function() {
        if(!flkty.cells[flkty.selectedIndex - 1]) {
          config.previousButton.setAttribute( 'disabled', 'disabled' );
          config.nextButton.removeAttribute('disabled', 'disabled')
        } else if(!flkty.cells[flkty.selectedIndex + 1]) {
          config.previousButton.removeAttribute('disabled', 'disabled')
          config.nextButton.setAttribute('disabled', 'disabled')
          debugger
        } else {
          config.previousButton.removeAttribute('disabled', 'disabled')
          config.nextButton.removeAttribute('disabled', 'disabled')
        }
      });

      config.previousButton.addEventListener('click', function() {
        flkty.previous();
      });
      config.nextButton.addEventListener('click', function() {
        flkty.next();
      });
    }, 200);
  };

  return {
    init: init,
  };
}());

/**
 * Init Menu Constructor
 * @return {void} Menu.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  if (document.querySelector('.bs-time-line')) {
    BsTimeLine.init();
  }
});

/**
 * Bs Tooltip
 * A custom implementation of tippy.js
 * @link https://atomiks.github.io/tippyjs/themes/
 *
 * @param  {DOMList} elements elements to receive the tooltip
 */
var BsTooltip = function (elements, options) {
  var tippySettings = extend({}, {
    arrow: true,
    theme: 'bs',
    distance: 20,
  }, (options || {}));
  Array.prototype.forEach.call(elements, function (tooltip) {
    tooltip.setAttribute('data-tippy-content', tooltip.title);
    tooltip.title = '';
    tippy(tooltip, tippySettings);
  });
};

/**
 * Init Header Constructor
 * @return {void} Header.init();
 */
document.addEventListener('DOMContentLoaded', function () {
  var tooltips = document.querySelectorAll('.bs-js--over-tooltip, .bs-js-tooltip');
  if (tooltips.length) BsTooltip(tooltips);
});

// /**
//  * Bs TopMenu
//  *
//  * Reference:
//  *
//  * [TODO]: Refatorar para que os elementos do config referenciem
//  * um topMenu específico ao invés de pegar todos os existentes no documento.
//  */
// var BsTopMenu = (function () {
//   // Config
//   var config = {
//     dropdown: document.querySelectorAll('.bs-js-top-menu'),
//     dropdownActiveClass: 'bs-js-has-focus',
//   };
//
//   // var $ = config;
//
//   var init = function () {
//     var i = 0;
//
//     // // Blur topMenu dropdown on click outside
//     // document.querySelectorAll('body, html').forEach(function (el) {
//     //   el.addEventListener('click', function (event) {
//     //     if (
//     //       dropdownHasFocus &&
//     //       !config.dropdown.contains(event.target)) {
//     //       blurDropdown();
//     //       return false;
//     //     }
//     //   });
//     // });
//
//     // keep dropdown open on child focus
//     for (; i < config.dropdown.length; i += 1) {
//       config.dropdown[i].addEventListener('focusout', blurDropdown);
//       config.dropdown[i].addEventListener('focusin', focusDropdown);
//     }
//
//     // Close topMenu on click
//     // i = 0;
//     // for (; i < config.topMenuClose.length; i += 1) {
//     //   config.topMenuClose[i].addEventListener('click', closeTopMenu);
//     // }
//   };
//
//   var focusDropdown = function (event) {
//     event.currentTarget.classList.add(config.dropdownActiveClass);
//   };
//
//   var blurDropdown = function (event) {
//     // debugger;
//     if (
//       event.currentTarget !== event.target &&
//       event.currentTarget !== event.target.parentNode &&
//       event.currentTarget !== event.target.parentNode.parentNode
//     ) {
//       event.currentTarget.classList.remove(config.dropdownActiveClass);
//     }
//   };
//
//   var dropdownHasFocus = function () {
//     return config.dropdown.classList.contains(config.dropdownActiveClass);
//   };
//
//   return {
//     init: init,
//   };
// }());
//
// /**
//  * Init TopMenu Constructor
//  * @return {void} Header.init();
//  */
// document.addEventListener('DOMContentLoaded', function () {
//   if (document.querySelectorAll('.bs-js-top-menu').length) {
//     BsTopMenu.init();
//   }
// });

identifyNotLoadedImages();
objectFitImages();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY29yZGlvbmpzLm1pbi5qcyIsIkNoYXJ0Lm1pbi5qcyIsImNsb3Nlc3QucG9seWZpbGwuanMiLCJkcmFndWxhLm1pbi5qcyIsImVzNi1wcm9taXNlLmF1dG8ubWluLmpzIiwiZXM2LXByb21pc2UubWluLmpzIiwiRmlsZVNhdmVyLm1pbi5qcyIsImZsaWNraXR5LnBrZ2QubWluLmpzIiwiaW1hc2suanMiLCJpc290b3BlLnBrZ2QubWluLmpzIiwianN6aXAubWluLmpzIiwibGlnaHRwaWNrLmpzIiwibW9tZW50Lm1pbi5qcyIsIm9maS5taW4uanMiLCJwYWNrZXJ5LW1vZGUucGtnZC5taW4uanMiLCJwaWN0dXJlZmlsbC5taW4uanMiLCJwaWthZGF5LmpzIiwic2Nyb2xscmV2ZWFsLm1pbi5qcyIsInNoYXZlLm1pbi5qcyIsInNpbXBsZS1tYXNrLW1vbmV5LS1lZGl0ZWQuanMiLCJzbW9vdGgtc2Nyb2xsLm1pbi5qcyIsInRhYmxlc29ydC5taW4uanMiLCJ0aXBweS5hbGwubWluLmpzIiwid2ViLWxpYnJhcy5taW4uanMiLCJhY3RpdmF0aW9uQ29kZVZhbGlkYXRlLmpzIiwiYmFja1RvVG9wLmpzIiwiQnJvd3NlclVwZGF0ZS5qcyIsIkJzRml4UG9ydGFsSFRNTC5qcyIsImJzSGVscGVycy5qcyIsIkNvbnRlbnRDaGFuZ2VyLmpzIiwiRHJvcGRvd24uanMiLCJleHBhbmRDb250ZW50LmpzIiwiRm9ybXMuanMiLCJmb3JtU3RlcHMuanMiLCJmb3JtVmFsaWRhdGUuanMiLCJpbWFnZVBhcmFsbGF4LmpzIiwiSW5wdXRNYXNrcy5qcyIsIm1hcHMuanMiLCJvYmplY3QtdmFsdWVzLnBvbHlmaWxsLmpzIiwicG9seWZpbGwuanMiLCJzaGlmdFNlbGVjdE11bHRpcGxlQ2hlY2tib3hlcy5qcyIsIlRhYmxlU29ydC5qcyIsIlRleHRFbGxpcHNpcy5qcyIsInRleHRUeXBlLmpzIiwidG9nZ2xlQ29udGVudC5qcyIsIlRvZ2dsZUlucHV0UGFzc3dvcmRWYWx1ZS5qcyIsIllUUGxheWVycy5qcyIsIkFjY2Vzc2liaWxpdHkuanMiLCJBY2NvcmRpb24uanMiLCJiYW5uZXJUb3BvLmpzIiwiQm94TGlua3MuanMiLCJDYXJkRmxpcC5qcyIsIkNvbXBhcmUuanMiLCJDb250ZXh0TWVudS5qcyIsIkRhdGVQaWNrLmpzIiwiRHJvcGRvd25NZW51LmpzIiwiRmlsdGVyLmpzIiwiRm9vdGVyLmpzIiwiR2FsbGVyeS5qcyIsIkdyaWQuanMiLCJIZWFkZXItb2xkLmpzIiwiSGVhZGVyLmpzIiwibGlzdEFjY29yZGlvbi5qcyIsImxpc3REb3dubG9hZC5qcyIsIk1hcC5qcyIsIk1lZGlhLmpzIiwiTWVudS5qcyIsIk1lbnVEcm9wZG93bi5qcyIsIk1vZGFsLmpzIiwiTW9kYWxBbGVydC5qcyIsIk1vZGFsRmlsdGVyTGlzdC5qcyIsIk1vc2FpY28uanMiLCJNdXJhbC5qcyIsIlByb2dyZXNzLmpzIiwiUXVpY2tBY2Vzcy5qcyIsIlF1aWNrQWNlc3NJY29uLmpzIiwicXVpY2tNZW51LmpzIiwiUXVpY2tNZW51RHJvcERvd24tZGVwcmVjYXRlZC5qcyIsIlNlYXJjaEVtcHR5LmpzIiwic2VhcmNoRm9ybS5qcyIsIlNlYXJjaEhlbHAuanMiLCJzZWFyY2hTdWdnZXN0aW9ucy5qcyIsIlNuYWNrYmFyLmpzIiwiU29jaWFsU2hhcmUuanMiLCJTdGlja3lOYXYuanMiLCJUYWJsZUNvbGxhcHNpYmxlLmpzIiwiVGFicy5qcyIsIlRlbGVjb3JkaW9uLmpzIiwiVGltZUxpbmUuanMiLCJUb29sdGlwLmpzIiwiVG9wTWVudS5qcyIsInNjcmlwdHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUNBQTtBQUNBO0FDREE7QUFDQTtBQ0RBO0FBQ0E7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzd3R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzF1Q0E7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDMXNDQTtBQUNBO0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsUEE7QUFDQTtBQUNBO0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDWEE7QUFDQTtBQUNBO0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3ZHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3BDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDakNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDMWdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzlGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN0VEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM3RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN0pBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMzRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDMUhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3BJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2S0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzFQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDOUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM1SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3BKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM1RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6d0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMzSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM3VEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM1T0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2UEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzUzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy9FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzlGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzNFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDOUVBO0FBQ0E7QUFDQSIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIpe2lmKGVbcl0pcmV0dXJuIGVbcl0uZXhwb3J0czt2YXIgbz1lW3JdPXtpOnIsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gbltyXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyx0KSxvLmw9ITAsby5leHBvcnRzfXZhciBlPXt9O3QubT1uLHQuYz1lLHQuaT1mdW5jdGlvbihuKXtyZXR1cm4gbn0sdC5kPWZ1bmN0aW9uKG4sZSxyKXt0Lm8obixlKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sZSx7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0OnJ9KX0sdC5uPWZ1bmN0aW9uKG4pe3ZhciBlPW4mJm4uX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBuLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIG59O3JldHVybiB0LmQoZSxcImFcIixlKSxlfSx0Lm89ZnVuY3Rpb24obix0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4sdCl9LHQucD1cIlwiLHQodC5zPTQpfShbZnVuY3Rpb24obix0LGUpe1widXNlIHN0cmljdFwiOyFmdW5jdGlvbihuKXtmdW5jdGlvbiB0KG4pe3ZhciB0PW58fFwidGhlLWFjY29yZGlvblwiO251bGwhPT0oaT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI1wiK3QpKSYmKGE9aS5xdWVyeVNlbGVjdG9yQWxsKFwiLmFjY29yZGlvbi1wYW5lbFwiKSxhLmxlbmd0aD4wJiZlKCkpfWZ1bmN0aW9uIGUoKXtmPXUoKSxhLmZvckVhY2goZnVuY3Rpb24obil7bi5xdWVyeVNlbGVjdG9yKFwiYVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixyKX0pfWZ1bmN0aW9uIHIobil7bi5wcmV2ZW50RGVmYXVsdCgpO3ZhciB0PW4uY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7ZiE9PXQmJihjKCksbyh0KSl9ZnVuY3Rpb24gbyhuKXtuLmNsYXNzTGlzdC5hZGQobCksZj1ufWZ1bmN0aW9uIGMoKXtpZih2b2lkIDA9PT1mKXJldHVybiB0aGlzO2YuY2xhc3NMaXN0LnJlbW92ZShsKX1mdW5jdGlvbiB1KCl7Zm9yKHZhciBuPTA7bjxhLmxlbmd0aDtuKyspaWYoYVtuXS5jbGFzc0xpc3QuY29udGFpbnMobCkpcmV0dXJuIGFbbl19dmFyIGk9bnVsbCxsPVwiaXMtYWN0aXZlXCIsYT1udWxsLGY9bnVsbDtuLkFjY29yZGlvbkpTPXR9KHdpbmRvdyl9LCwsLGZ1bmN0aW9uKG4sdCxlKXtuLmV4cG9ydHM9ZSgwKX1dKTsiLCIvKiFcbiAqIENoYXJ0LmpzXG4gKiBodHRwOi8vY2hhcnRqcy5vcmcvXG4gKiBWZXJzaW9uOiAyLjcuM1xuICpcbiAqIENvcHlyaWdodCAyMDE4IENoYXJ0LmpzIENvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwczovL2dpdGh1Yi5jb20vY2hhcnRqcy9DaGFydC5qcy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kXG4gKi9cbiFmdW5jdGlvbih0KXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz10KCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLHQpO2Vsc2V7KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcykuQ2hhcnQ9dCgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gbyhyLHMsbCl7ZnVuY3Rpb24gdShlLHQpe2lmKCFzW2VdKXtpZighcltlXSl7dmFyIGk9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighdCYmaSlyZXR1cm4gaShlLCEwKTtpZihkKXJldHVybiBkKGUsITApO3ZhciBuPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrZStcIidcIik7dGhyb3cgbi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLG59dmFyIGE9c1tlXT17ZXhwb3J0czp7fX07cltlXVswXS5jYWxsKGEuZXhwb3J0cyxmdW5jdGlvbih0KXtyZXR1cm4gdShyW2VdWzFdW3RdfHx0KX0sYSxhLmV4cG9ydHMsbyxyLHMsbCl9cmV0dXJuIHNbZV0uZXhwb3J0c31mb3IodmFyIGQ9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSx0PTA7dDxsLmxlbmd0aDt0KyspdShsW3RdKTtyZXR1cm4gdX0oezE6W2Z1bmN0aW9uKHQsZSxpKXt9LHt9XSwyOltmdW5jdGlvbih0LGUsaSl7dmFyIG89dCg2KTtmdW5jdGlvbiBuKHQpe2lmKHQpe3ZhciBlPVswLDAsMF0saT0xLG49dC5tYXRjaCgvXiMoW2EtZkEtRjAtOV17M30pJC9pKTtpZihuKXtuPW5bMV07Zm9yKHZhciBhPTA7YTxlLmxlbmd0aDthKyspZVthXT1wYXJzZUludChuW2FdK25bYV0sMTYpfWVsc2UgaWYobj10Lm1hdGNoKC9eIyhbYS1mQS1GMC05XXs2fSkkL2kpKXtuPW5bMV07Zm9yKGE9MDthPGUubGVuZ3RoO2ErKyllW2FdPXBhcnNlSW50KG4uc2xpY2UoMiphLDIqYSsyKSwxNil9ZWxzZSBpZihuPXQubWF0Y2goL15yZ2JhP1xcKFxccyooWystXT9cXGQrKVxccyosXFxzKihbKy1dP1xcZCspXFxzKixcXHMqKFsrLV0/XFxkKylcXHMqKD86LFxccyooWystXT9bXFxkXFwuXSspXFxzKik/XFwpJC9pKSl7Zm9yKGE9MDthPGUubGVuZ3RoO2ErKyllW2FdPXBhcnNlSW50KG5bYSsxXSk7aT1wYXJzZUZsb2F0KG5bNF0pfWVsc2UgaWYobj10Lm1hdGNoKC9ecmdiYT9cXChcXHMqKFsrLV0/W1xcZFxcLl0rKVxcJVxccyosXFxzKihbKy1dP1tcXGRcXC5dKylcXCVcXHMqLFxccyooWystXT9bXFxkXFwuXSspXFwlXFxzKig/OixcXHMqKFsrLV0/W1xcZFxcLl0rKVxccyopP1xcKSQvaSkpe2ZvcihhPTA7YTxlLmxlbmd0aDthKyspZVthXT1NYXRoLnJvdW5kKDIuNTUqcGFyc2VGbG9hdChuW2ErMV0pKTtpPXBhcnNlRmxvYXQobls0XSl9ZWxzZSBpZihuPXQubWF0Y2goLyhcXHcrKS8pKXtpZihcInRyYW5zcGFyZW50XCI9PW5bMV0pcmV0dXJuWzAsMCwwLDBdO2lmKCEoZT1vW25bMV1dKSlyZXR1cm59Zm9yKGE9MDthPGUubGVuZ3RoO2ErKyllW2FdPWQoZVthXSwwLDI1NSk7cmV0dXJuIGk9aXx8MD09aT9kKGksMCwxKToxLGVbM109aSxlfX1mdW5jdGlvbiBhKHQpe2lmKHQpe3ZhciBlPXQubWF0Y2goL15oc2xhP1xcKFxccyooWystXT9cXGQrKSg/OmRlZyk/XFxzKixcXHMqKFsrLV0/W1xcZFxcLl0rKSVcXHMqLFxccyooWystXT9bXFxkXFwuXSspJVxccyooPzosXFxzKihbKy1dP1tcXGRcXC5dKylcXHMqKT9cXCkvKTtpZihlKXt2YXIgaT1wYXJzZUZsb2F0KGVbNF0pO3JldHVybltkKHBhcnNlSW50KGVbMV0pLDAsMzYwKSxkKHBhcnNlRmxvYXQoZVsyXSksMCwxMDApLGQocGFyc2VGbG9hdChlWzNdKSwwLDEwMCksZChpc05hTihpKT8xOmksMCwxKV19fX1mdW5jdGlvbiByKHQpe2lmKHQpe3ZhciBlPXQubWF0Y2goL15od2JcXChcXHMqKFsrLV0/XFxkKykoPzpkZWcpP1xccyosXFxzKihbKy1dP1tcXGRcXC5dKyklXFxzKixcXHMqKFsrLV0/W1xcZFxcLl0rKSVcXHMqKD86LFxccyooWystXT9bXFxkXFwuXSspXFxzKik/XFwpLyk7aWYoZSl7dmFyIGk9cGFyc2VGbG9hdChlWzRdKTtyZXR1cm5bZChwYXJzZUludChlWzFdKSwwLDM2MCksZChwYXJzZUZsb2F0KGVbMl0pLDAsMTAwKSxkKHBhcnNlRmxvYXQoZVszXSksMCwxMDApLGQoaXNOYU4oaSk/MTppLDAsMSldfX19ZnVuY3Rpb24gcyh0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT12b2lkIDAhPT10WzNdP3RbM106MSksXCJyZ2JhKFwiK3RbMF0rXCIsIFwiK3RbMV0rXCIsIFwiK3RbMl0rXCIsIFwiK2UrXCIpXCJ9ZnVuY3Rpb24gbCh0LGUpe3JldHVyblwicmdiYShcIitNYXRoLnJvdW5kKHRbMF0vMjU1KjEwMCkrXCIlLCBcIitNYXRoLnJvdW5kKHRbMV0vMjU1KjEwMCkrXCIlLCBcIitNYXRoLnJvdW5kKHRbMl0vMjU1KjEwMCkrXCIlLCBcIisoZXx8dFszXXx8MSkrXCIpXCJ9ZnVuY3Rpb24gdSh0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT12b2lkIDAhPT10WzNdP3RbM106MSksXCJoc2xhKFwiK3RbMF0rXCIsIFwiK3RbMV0rXCIlLCBcIit0WzJdK1wiJSwgXCIrZStcIilcIn1mdW5jdGlvbiBkKHQsZSxpKXtyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgoZSx0KSxpKX1mdW5jdGlvbiBjKHQpe3ZhciBlPXQudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7cmV0dXJuIGUubGVuZ3RoPDI/XCIwXCIrZTplfWUuZXhwb3J0cz17Z2V0UmdiYTpuLGdldEhzbGE6YSxnZXRSZ2I6ZnVuY3Rpb24odCl7dmFyIGU9bih0KTtyZXR1cm4gZSYmZS5zbGljZSgwLDMpfSxnZXRIc2w6ZnVuY3Rpb24odCl7dmFyIGU9YSh0KTtyZXR1cm4gZSYmZS5zbGljZSgwLDMpfSxnZXRId2I6cixnZXRBbHBoYTpmdW5jdGlvbih0KXt2YXIgZT1uKHQpO3tpZihlKXJldHVybiBlWzNdO2lmKGU9YSh0KSlyZXR1cm4gZVszXTtpZihlPXIodCkpcmV0dXJuIGVbM119fSxoZXhTdHJpbmc6ZnVuY3Rpb24odCl7cmV0dXJuXCIjXCIrYyh0WzBdKStjKHRbMV0pK2ModFsyXSl9LHJnYlN0cmluZzpmdW5jdGlvbih0LGUpe2lmKGU8MXx8dFszXSYmdFszXTwxKXJldHVybiBzKHQsZSk7cmV0dXJuXCJyZ2IoXCIrdFswXStcIiwgXCIrdFsxXStcIiwgXCIrdFsyXStcIilcIn0scmdiYVN0cmluZzpzLHBlcmNlbnRTdHJpbmc6ZnVuY3Rpb24odCxlKXtpZihlPDF8fHRbM10mJnRbM108MSlyZXR1cm4gbCh0LGUpO3ZhciBpPU1hdGgucm91bmQodFswXS8yNTUqMTAwKSxuPU1hdGgucm91bmQodFsxXS8yNTUqMTAwKSxhPU1hdGgucm91bmQodFsyXS8yNTUqMTAwKTtyZXR1cm5cInJnYihcIitpK1wiJSwgXCIrbitcIiUsIFwiK2ErXCIlKVwifSxwZXJjZW50YVN0cmluZzpsLGhzbFN0cmluZzpmdW5jdGlvbih0LGUpe2lmKGU8MXx8dFszXSYmdFszXTwxKXJldHVybiB1KHQsZSk7cmV0dXJuXCJoc2woXCIrdFswXStcIiwgXCIrdFsxXStcIiUsIFwiK3RbMl0rXCIlKVwifSxoc2xhU3RyaW5nOnUsaHdiU3RyaW5nOmZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9dm9pZCAwIT09dFszXT90WzNdOjEpO3JldHVyblwiaHdiKFwiK3RbMF0rXCIsIFwiK3RbMV0rXCIlLCBcIit0WzJdK1wiJVwiKyh2b2lkIDAhPT1lJiYxIT09ZT9cIiwgXCIrZTpcIlwiKStcIilcIn0sa2V5d29yZDpmdW5jdGlvbih0KXtyZXR1cm4gaFt0LnNsaWNlKDAsMyldfX07dmFyIGg9e307Zm9yKHZhciBmIGluIG8paFtvW2ZdXT1mfSx7Njo2fV0sMzpbZnVuY3Rpb24odCxlLGkpe3ZhciBkPXQoNSksbj10KDIpLHI9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiByP3Q6dGhpcyBpbnN0YW5jZW9mIHI/KHRoaXMudmFsaWQ9ITEsdGhpcy52YWx1ZXM9e3JnYjpbMCwwLDBdLGhzbDpbMCwwLDBdLGhzdjpbMCwwLDBdLGh3YjpbMCwwLDBdLGNteWs6WzAsMCwwLDBdLGFscGhhOjF9LHZvaWQoXCJzdHJpbmdcIj09dHlwZW9mIHQ/KGU9bi5nZXRSZ2JhKHQpKT90aGlzLnNldFZhbHVlcyhcInJnYlwiLGUpOihlPW4uZ2V0SHNsYSh0KSk/dGhpcy5zZXRWYWx1ZXMoXCJoc2xcIixlKTooZT1uLmdldEh3Yih0KSkmJnRoaXMuc2V0VmFsdWVzKFwiaHdiXCIsZSk6XCJvYmplY3RcIj09dHlwZW9mIHQmJih2b2lkIDAhPT0oZT10KS5yfHx2b2lkIDAhPT1lLnJlZD90aGlzLnNldFZhbHVlcyhcInJnYlwiLGUpOnZvaWQgMCE9PWUubHx8dm9pZCAwIT09ZS5saWdodG5lc3M/dGhpcy5zZXRWYWx1ZXMoXCJoc2xcIixlKTp2b2lkIDAhPT1lLnZ8fHZvaWQgMCE9PWUudmFsdWU/dGhpcy5zZXRWYWx1ZXMoXCJoc3ZcIixlKTp2b2lkIDAhPT1lLnd8fHZvaWQgMCE9PWUud2hpdGVuZXNzP3RoaXMuc2V0VmFsdWVzKFwiaHdiXCIsZSk6dm9pZCAwPT09ZS5jJiZ2b2lkIDA9PT1lLmN5YW58fHRoaXMuc2V0VmFsdWVzKFwiY215a1wiLGUpKSkpOm5ldyByKHQpO3ZhciBlfTtyLnByb3RvdHlwZT17aXNWYWxpZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbGlkfSxyZ2I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRTcGFjZShcInJnYlwiLGFyZ3VtZW50cyl9LGhzbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldFNwYWNlKFwiaHNsXCIsYXJndW1lbnRzKX0saHN2OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0U3BhY2UoXCJoc3ZcIixhcmd1bWVudHMpfSxod2I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRTcGFjZShcImh3YlwiLGFyZ3VtZW50cyl9LGNteWs6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRTcGFjZShcImNteWtcIixhcmd1bWVudHMpfSxyZ2JBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlcy5yZ2J9LGhzbEFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzLmhzbH0saHN2QXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZXMuaHN2fSxod2JBcnJheTpmdW5jdGlvbigpe3ZhciB0PXRoaXMudmFsdWVzO3JldHVybiAxIT09dC5hbHBoYT90Lmh3Yi5jb25jYXQoW3QuYWxwaGFdKTp0Lmh3Yn0sY215a0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzLmNteWt9LHJnYmFBcnJheTpmdW5jdGlvbigpe3ZhciB0PXRoaXMudmFsdWVzO3JldHVybiB0LnJnYi5jb25jYXQoW3QuYWxwaGFdKX0saHNsYUFycmF5OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy52YWx1ZXM7cmV0dXJuIHQuaHNsLmNvbmNhdChbdC5hbHBoYV0pfSxhbHBoYTpmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dD90aGlzLnZhbHVlcy5hbHBoYToodGhpcy5zZXRWYWx1ZXMoXCJhbHBoYVwiLHQpLHRoaXMpfSxyZWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2V0Q2hhbm5lbChcInJnYlwiLDAsdCl9LGdyZWVuOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNldENoYW5uZWwoXCJyZ2JcIiwxLHQpfSxibHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNldENoYW5uZWwoXCJyZ2JcIiwyLHQpfSxodWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJih0PSh0JT0zNjApPDA/MzYwK3Q6dCksdGhpcy5zZXRDaGFubmVsKFwiaHNsXCIsMCx0KX0sc2F0dXJhdGlvbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXRDaGFubmVsKFwiaHNsXCIsMSx0KX0sbGlnaHRuZXNzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNldENoYW5uZWwoXCJoc2xcIiwyLHQpfSxzYXR1cmF0aW9udjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXRDaGFubmVsKFwiaHN2XCIsMSx0KX0sd2hpdGVuZXNzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNldENoYW5uZWwoXCJod2JcIiwxLHQpfSxibGFja25lc3M6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2V0Q2hhbm5lbChcImh3YlwiLDIsdCl9LHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNldENoYW5uZWwoXCJoc3ZcIiwyLHQpfSxjeWFuOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNldENoYW5uZWwoXCJjbXlrXCIsMCx0KX0sbWFnZW50YTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXRDaGFubmVsKFwiY215a1wiLDEsdCl9LHllbGxvdzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXRDaGFubmVsKFwiY215a1wiLDIsdCl9LGJsYWNrOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNldENoYW5uZWwoXCJjbXlrXCIsMyx0KX0saGV4U3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIG4uaGV4U3RyaW5nKHRoaXMudmFsdWVzLnJnYil9LHJnYlN0cmluZzpmdW5jdGlvbigpe3JldHVybiBuLnJnYlN0cmluZyh0aGlzLnZhbHVlcy5yZ2IsdGhpcy52YWx1ZXMuYWxwaGEpfSxyZ2JhU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIG4ucmdiYVN0cmluZyh0aGlzLnZhbHVlcy5yZ2IsdGhpcy52YWx1ZXMuYWxwaGEpfSxwZXJjZW50U3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIG4ucGVyY2VudFN0cmluZyh0aGlzLnZhbHVlcy5yZ2IsdGhpcy52YWx1ZXMuYWxwaGEpfSxoc2xTdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gbi5oc2xTdHJpbmcodGhpcy52YWx1ZXMuaHNsLHRoaXMudmFsdWVzLmFscGhhKX0saHNsYVN0cmluZzpmdW5jdGlvbigpe3JldHVybiBuLmhzbGFTdHJpbmcodGhpcy52YWx1ZXMuaHNsLHRoaXMudmFsdWVzLmFscGhhKX0saHdiU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIG4uaHdiU3RyaW5nKHRoaXMudmFsdWVzLmh3Yix0aGlzLnZhbHVlcy5hbHBoYSl9LGtleXdvcmQ6ZnVuY3Rpb24oKXtyZXR1cm4gbi5rZXl3b3JkKHRoaXMudmFsdWVzLnJnYix0aGlzLnZhbHVlcy5hbHBoYSl9LHJnYk51bWJlcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMudmFsdWVzLnJnYjtyZXR1cm4gdFswXTw8MTZ8dFsxXTw8OHx0WzJdfSxsdW1pbm9zaXR5OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMudmFsdWVzLnJnYixlPVtdLGk9MDtpPHQubGVuZ3RoO2krKyl7dmFyIG49dFtpXS8yNTU7ZVtpXT1uPD0uMDM5Mjg/bi8xMi45MjpNYXRoLnBvdygobisuMDU1KS8xLjA1NSwyLjQpfXJldHVybi4yMTI2KmVbMF0rLjcxNTIqZVsxXSsuMDcyMiplWzJdfSxjb250cmFzdDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmx1bWlub3NpdHkoKSxpPXQubHVtaW5vc2l0eSgpO3JldHVybiBpPGU/KGUrLjA1KS8oaSsuMDUpOihpKy4wNSkvKGUrLjA1KX0sbGV2ZWw6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250cmFzdCh0KTtyZXR1cm4gNy4xPD1lP1wiQUFBXCI6NC41PD1lP1wiQUFcIjpcIlwifSxkYXJrOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy52YWx1ZXMucmdiO3JldHVybigyOTkqdFswXSs1ODcqdFsxXSsxMTQqdFsyXSkvMWUzPDEyOH0sbGlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5kYXJrKCl9LG5lZ2F0ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTwzO2UrKyl0W2VdPTI1NS10aGlzLnZhbHVlcy5yZ2JbZV07cmV0dXJuIHRoaXMuc2V0VmFsdWVzKFwicmdiXCIsdCksdGhpc30sbGlnaHRlbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnZhbHVlcy5oc2w7cmV0dXJuIGVbMl0rPWVbMl0qdCx0aGlzLnNldFZhbHVlcyhcImhzbFwiLGUpLHRoaXN9LGRhcmtlbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnZhbHVlcy5oc2w7cmV0dXJuIGVbMl0tPWVbMl0qdCx0aGlzLnNldFZhbHVlcyhcImhzbFwiLGUpLHRoaXN9LHNhdHVyYXRlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudmFsdWVzLmhzbDtyZXR1cm4gZVsxXSs9ZVsxXSp0LHRoaXMuc2V0VmFsdWVzKFwiaHNsXCIsZSksdGhpc30sZGVzYXR1cmF0ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnZhbHVlcy5oc2w7cmV0dXJuIGVbMV0tPWVbMV0qdCx0aGlzLnNldFZhbHVlcyhcImhzbFwiLGUpLHRoaXN9LHdoaXRlbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnZhbHVlcy5od2I7cmV0dXJuIGVbMV0rPWVbMV0qdCx0aGlzLnNldFZhbHVlcyhcImh3YlwiLGUpLHRoaXN9LGJsYWNrZW46ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy52YWx1ZXMuaHdiO3JldHVybiBlWzJdKz1lWzJdKnQsdGhpcy5zZXRWYWx1ZXMoXCJod2JcIixlKSx0aGlzfSxncmV5c2NhbGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnZhbHVlcy5yZ2IsZT0uMyp0WzBdKy41OSp0WzFdKy4xMSp0WzJdO3JldHVybiB0aGlzLnNldFZhbHVlcyhcInJnYlwiLFtlLGUsZV0pLHRoaXN9LGNsZWFyZXI6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy52YWx1ZXMuYWxwaGE7cmV0dXJuIHRoaXMuc2V0VmFsdWVzKFwiYWxwaGFcIixlLWUqdCksdGhpc30sb3BhcXVlcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnZhbHVlcy5hbHBoYTtyZXR1cm4gdGhpcy5zZXRWYWx1ZXMoXCJhbHBoYVwiLGUrZSp0KSx0aGlzfSxyb3RhdGU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy52YWx1ZXMuaHNsLGk9KGVbMF0rdCklMzYwO3JldHVybiBlWzBdPWk8MD8zNjAraTppLHRoaXMuc2V0VmFsdWVzKFwiaHNsXCIsZSksdGhpc30sbWl4OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcyxuPXQsYT12b2lkIDA9PT1lPy41OmUsbz0yKmEtMSxyPWkuYWxwaGEoKS1uLmFscGhhKCkscz0oKG8qcj09LTE/bzoobytyKS8oMStvKnIpKSsxKS8yLGw9MS1zO3JldHVybiB0aGlzLnJnYihzKmkucmVkKCkrbCpuLnJlZCgpLHMqaS5ncmVlbigpK2wqbi5ncmVlbigpLHMqaS5ibHVlKCkrbCpuLmJsdWUoKSkuYWxwaGEoaS5hbHBoYSgpKmErbi5hbHBoYSgpKigxLWEpKX0sdG9KU09OOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmdiKCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQsZSxpPW5ldyByLG49dGhpcy52YWx1ZXMsYT1pLnZhbHVlcztmb3IodmFyIG8gaW4gbiluLmhhc093blByb3BlcnR5KG8pJiYodD1uW29dLFwiW29iamVjdCBBcnJheV1cIj09PShlPXt9LnRvU3RyaW5nLmNhbGwodCkpP2Fbb109dC5zbGljZSgwKTpcIltvYmplY3QgTnVtYmVyXVwiPT09ZT9hW29dPXQ6Y29uc29sZS5lcnJvcihcInVuZXhwZWN0ZWQgY29sb3IgdmFsdWU6XCIsdCkpO3JldHVybiBpfX0sci5wcm90b3R5cGUuc3BhY2VzPXtyZ2I6W1wicmVkXCIsXCJncmVlblwiLFwiYmx1ZVwiXSxoc2w6W1wiaHVlXCIsXCJzYXR1cmF0aW9uXCIsXCJsaWdodG5lc3NcIl0saHN2OltcImh1ZVwiLFwic2F0dXJhdGlvblwiLFwidmFsdWVcIl0saHdiOltcImh1ZVwiLFwid2hpdGVuZXNzXCIsXCJibGFja25lc3NcIl0sY215azpbXCJjeWFuXCIsXCJtYWdlbnRhXCIsXCJ5ZWxsb3dcIixcImJsYWNrXCJdfSxyLnByb3RvdHlwZS5tYXhlcz17cmdiOlsyNTUsMjU1LDI1NV0saHNsOlszNjAsMTAwLDEwMF0saHN2OlszNjAsMTAwLDEwMF0saHdiOlszNjAsMTAwLDEwMF0sY215azpbMTAwLDEwMCwxMDAsMTAwXX0sci5wcm90b3R5cGUuZ2V0VmFsdWVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLnZhbHVlcyxpPXt9LG49MDtuPHQubGVuZ3RoO24rKylpW3QuY2hhckF0KG4pXT1lW3RdW25dO3JldHVybiAxIT09ZS5hbHBoYSYmKGkuYT1lLmFscGhhKSxpfSxyLnByb3RvdHlwZS5zZXRWYWx1ZXM9ZnVuY3Rpb24odCxlKXt2YXIgaSxuLGE9dGhpcy52YWx1ZXMsbz10aGlzLnNwYWNlcyxyPXRoaXMubWF4ZXMscz0xO2lmKHRoaXMudmFsaWQ9ITAsXCJhbHBoYVwiPT09dClzPWU7ZWxzZSBpZihlLmxlbmd0aClhW3RdPWUuc2xpY2UoMCx0Lmxlbmd0aCkscz1lW3QubGVuZ3RoXTtlbHNlIGlmKHZvaWQgMCE9PWVbdC5jaGFyQXQoMCldKXtmb3IoaT0wO2k8dC5sZW5ndGg7aSsrKWFbdF1baV09ZVt0LmNoYXJBdChpKV07cz1lLmF9ZWxzZSBpZih2b2lkIDAhPT1lW29bdF1bMF1dKXt2YXIgbD1vW3RdO2ZvcihpPTA7aTx0Lmxlbmd0aDtpKyspYVt0XVtpXT1lW2xbaV1dO3M9ZS5hbHBoYX1pZihhLmFscGhhPU1hdGgubWF4KDAsTWF0aC5taW4oMSx2b2lkIDA9PT1zP2EuYWxwaGE6cykpLFwiYWxwaGFcIj09PXQpcmV0dXJuITE7Zm9yKGk9MDtpPHQubGVuZ3RoO2krKyluPU1hdGgubWF4KDAsTWF0aC5taW4oclt0XVtpXSxhW3RdW2ldKSksYVt0XVtpXT1NYXRoLnJvdW5kKG4pO2Zvcih2YXIgdSBpbiBvKXUhPT10JiYoYVt1XT1kW3RdW3VdKGFbdF0pKTtyZXR1cm4hMH0sci5wcm90b3R5cGUuc2V0U3BhY2U9ZnVuY3Rpb24odCxlKXt2YXIgaT1lWzBdO3JldHVybiB2b2lkIDA9PT1pP3RoaXMuZ2V0VmFsdWVzKHQpOihcIm51bWJlclwiPT10eXBlb2YgaSYmKGk9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSkpLHRoaXMuc2V0VmFsdWVzKHQsaSksdGhpcyl9LHIucHJvdG90eXBlLnNldENoYW5uZWw9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMudmFsdWVzW3RdO3JldHVybiB2b2lkIDA9PT1pP25bZV06KGk9PT1uW2VdfHwobltlXT1pLHRoaXMuc2V0VmFsdWVzKHQsbikpLHRoaXMpfSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYod2luZG93LkNvbG9yPXIpLGUuZXhwb3J0cz1yfSx7MjoyLDU6NX1dLDQ6W2Z1bmN0aW9uKHQsZSxpKXtmdW5jdGlvbiBhKHQpe3ZhciBlLGksbj10WzBdLzI1NSxhPXRbMV0vMjU1LG89dFsyXS8yNTUscj1NYXRoLm1pbihuLGEsbykscz1NYXRoLm1heChuLGEsbyksbD1zLXI7cmV0dXJuIHM9PXI/ZT0wOm49PXM/ZT0oYS1vKS9sOmE9PXM/ZT0yKyhvLW4pL2w6bz09cyYmKGU9NCsobi1hKS9sKSwoZT1NYXRoLm1pbig2MCplLDM2MCkpPDAmJihlKz0zNjApLGk9KHIrcykvMixbZSwxMDAqKHM9PXI/MDppPD0uNT9sLyhzK3IpOmwvKDItcy1yKSksMTAwKmldfWZ1bmN0aW9uIG4odCl7dmFyIGUsaSxuPXRbMF0sYT10WzFdLG89dFsyXSxyPU1hdGgubWluKG4sYSxvKSxzPU1hdGgubWF4KG4sYSxvKSxsPXMtcjtyZXR1cm4gaT0wPT1zPzA6bC9zKjFlMy8xMCxzPT1yP2U9MDpuPT1zP2U9KGEtbykvbDphPT1zP2U9Misoby1uKS9sOm89PXMmJihlPTQrKG4tYSkvbCksKGU9TWF0aC5taW4oNjAqZSwzNjApKTwwJiYoZSs9MzYwKSxbZSxpLHMvMjU1KjFlMy8xMF19ZnVuY3Rpb24gbyh0KXt2YXIgZT10WzBdLGk9dFsxXSxuPXRbMl07cmV0dXJuW2EodClbMF0sMTAwKigxLzI1NSpNYXRoLm1pbihlLE1hdGgubWluKGksbikpKSwxMDAqKG49MS0xLzI1NSpNYXRoLm1heChlLE1hdGgubWF4KGksbikpKV19ZnVuY3Rpb24gcyh0KXt2YXIgZSxpPXRbMF0vMjU1LG49dFsxXS8yNTUsYT10WzJdLzI1NTtyZXR1cm5bMTAwKigoMS1pLShlPU1hdGgubWluKDEtaSwxLW4sMS1hKSkpLygxLWUpfHwwKSwxMDAqKCgxLW4tZSkvKDEtZSl8fDApLDEwMCooKDEtYS1lKS8oMS1lKXx8MCksMTAwKmVdfWZ1bmN0aW9uIGwodCl7cmV0dXJuIFNbSlNPTi5zdHJpbmdpZnkodCldfWZ1bmN0aW9uIHUodCl7dmFyIGU9dFswXS8yNTUsaT10WzFdLzI1NSxuPXRbMl0vMjU1O3JldHVyblsxMDAqKC40MTI0KihlPS4wNDA0NTxlP01hdGgucG93KChlKy4wNTUpLzEuMDU1LDIuNCk6ZS8xMi45MikrLjM1NzYqKGk9LjA0MDQ1PGk/TWF0aC5wb3coKGkrLjA1NSkvMS4wNTUsMi40KTppLzEyLjkyKSsuMTgwNSoobj0uMDQwNDU8bj9NYXRoLnBvdygobisuMDU1KS8xLjA1NSwyLjQpOm4vMTIuOTIpKSwxMDAqKC4yMTI2KmUrLjcxNTIqaSsuMDcyMipuKSwxMDAqKC4wMTkzKmUrLjExOTIqaSsuOTUwNSpuKV19ZnVuY3Rpb24gZCh0KXt2YXIgZT11KHQpLGk9ZVswXSxuPWVbMV0sYT1lWzJdO3JldHVybiBuLz0xMDAsYS89MTA4Ljg4MyxpPS4wMDg4NTY8KGkvPTk1LjA0Nyk/TWF0aC5wb3coaSwxLzMpOjcuNzg3KmkrMTYvMTE2LFsxMTYqKG49LjAwODg1NjxuP01hdGgucG93KG4sMS8zKTo3Ljc4NypuKzE2LzExNiktMTYsNTAwKihpLW4pLDIwMCoobi0oYT0uMDA4ODU2PGE/TWF0aC5wb3coYSwxLzMpOjcuNzg3KmErMTYvMTE2KSldfWZ1bmN0aW9uIGModCl7dmFyIGUsaSxuLGEsbyxyPXRbMF0vMzYwLHM9dFsxXS8xMDAsbD10WzJdLzEwMDtpZigwPT1zKXJldHVybltvPTI1NSpsLG8sb107ZT0yKmwtKGk9bDwuNT9sKigxK3MpOmwrcy1sKnMpLGE9WzAsMCwwXTtmb3IodmFyIHU9MDt1PDM7dSsrKShuPXIrMS8zKi0odS0xKSk8MCYmbisrLDE8biYmbi0tLG89NipuPDE/ZSs2KihpLWUpKm46MipuPDE/aTozKm48Mj9lKyhpLWUpKigyLzMtbikqNjplLGFbdV09MjU1Km87cmV0dXJuIGF9ZnVuY3Rpb24gaCh0KXt2YXIgZT10WzBdLzYwLGk9dFsxXS8xMDAsbj10WzJdLzEwMCxhPU1hdGguZmxvb3IoZSklNixvPWUtTWF0aC5mbG9vcihlKSxyPTI1NSpuKigxLWkpLHM9MjU1Km4qKDEtaSpvKSxsPTI1NSpuKigxLWkqKDEtbykpO24qPTI1NTtzd2l0Y2goYSl7Y2FzZSAwOnJldHVybltuLGwscl07Y2FzZSAxOnJldHVybltzLG4scl07Y2FzZSAyOnJldHVybltyLG4sbF07Y2FzZSAzOnJldHVybltyLHMsbl07Y2FzZSA0OnJldHVybltsLHIsbl07Y2FzZSA1OnJldHVybltuLHIsc119fWZ1bmN0aW9uIGYodCl7dmFyIGUsaSxuLGEsbz10WzBdLzM2MCxzPXRbMV0vMTAwLGw9dFsyXS8xMDAsdT1zK2w7c3dpdGNoKDE8dSYmKHMvPXUsbC89dSksbj02Km8tKGU9TWF0aC5mbG9vcig2Km8pKSwwIT0oMSZlKSYmKG49MS1uKSxhPXMrbiooKGk9MS1sKS1zKSxlKXtkZWZhdWx0OmNhc2UgNjpjYXNlIDA6cj1pLGc9YSxiPXM7YnJlYWs7Y2FzZSAxOnI9YSxnPWksYj1zO2JyZWFrO2Nhc2UgMjpyPXMsZz1pLGI9YTticmVhaztjYXNlIDM6cj1zLGc9YSxiPWk7YnJlYWs7Y2FzZSA0OnI9YSxnPXMsYj1pO2JyZWFrO2Nhc2UgNTpyPWksZz1zLGI9YX1yZXR1cm5bMjU1KnIsMjU1KmcsMjU1KmJdfWZ1bmN0aW9uIHAodCl7dmFyIGU9dFswXS8xMDAsaT10WzFdLzEwMCxuPXRbMl0vMTAwLGE9dFszXS8xMDA7cmV0dXJuWzI1NSooMS1NYXRoLm1pbigxLGUqKDEtYSkrYSkpLDI1NSooMS1NYXRoLm1pbigxLGkqKDEtYSkrYSkpLDI1NSooMS1NYXRoLm1pbigxLG4qKDEtYSkrYSkpXX1mdW5jdGlvbiBtKHQpe3ZhciBlLGksbixhPXRbMF0vMTAwLG89dFsxXS8xMDAscj10WzJdLzEwMDtyZXR1cm4gaT0tLjk2ODkqYSsxLjg3NTgqbysuMDQxNSpyLG49LjA1NTcqYSstLjIwNCpvKzEuMDU3KnIsZT0uMDAzMTMwODwoZT0zLjI0MDYqYSstMS41MzcyKm8rLS40OTg2KnIpPzEuMDU1Kk1hdGgucG93KGUsMS8yLjQpLS4wNTU6ZSo9MTIuOTIsaT0uMDAzMTMwODxpPzEuMDU1Kk1hdGgucG93KGksMS8yLjQpLS4wNTU6aSo9MTIuOTIsbj0uMDAzMTMwODxuPzEuMDU1Kk1hdGgucG93KG4sMS8yLjQpLS4wNTU6bio9MTIuOTIsWzI1NSooZT1NYXRoLm1pbihNYXRoLm1heCgwLGUpLDEpKSwyNTUqKGk9TWF0aC5taW4oTWF0aC5tYXgoMCxpKSwxKSksMjU1KihuPU1hdGgubWluKE1hdGgubWF4KDAsbiksMSkpXX1mdW5jdGlvbiB2KHQpe3ZhciBlPXRbMF0saT10WzFdLG49dFsyXTtyZXR1cm4gaS89MTAwLG4vPTEwOC44ODMsZT0uMDA4ODU2PChlLz05NS4wNDcpP01hdGgucG93KGUsMS8zKTo3Ljc4NyplKzE2LzExNixbMTE2KihpPS4wMDg4NTY8aT9NYXRoLnBvdyhpLDEvMyk6Ny43ODcqaSsxNi8xMTYpLTE2LDUwMCooZS1pKSwyMDAqKGktKG49LjAwODg1NjxuP01hdGgucG93KG4sMS8zKTo3Ljc4NypuKzE2LzExNikpXX1mdW5jdGlvbiB4KHQpe3ZhciBlLGksbixhLG89dFswXSxyPXRbMV0scz10WzJdO3JldHVybiBhPW88PTg/KGk9MTAwKm8vOTAzLjMpLzEwMCo3Ljc4NysxNi8xMTY6KGk9MTAwKk1hdGgucG93KChvKzE2KS8xMTYsMyksTWF0aC5wb3coaS8xMDAsMS8zKSksW2U9ZS85NS4wNDc8PS4wMDg4NTY/ZT05NS4wNDcqKHIvNTAwK2EtMTYvMTE2KS83Ljc4Nzo5NS4wNDcqTWF0aC5wb3coci81MDArYSwzKSxpLG49bi8xMDguODgzPD0uMDA4ODU5P249MTA4Ljg4MyooYS1zLzIwMC0xNi8xMTYpLzcuNzg3OjEwOC44ODMqTWF0aC5wb3coYS1zLzIwMCwzKV19ZnVuY3Rpb24geSh0KXt2YXIgZSxpPXRbMF0sbj10WzFdLGE9dFsyXTtyZXR1cm4oZT0zNjAqTWF0aC5hdGFuMihhLG4pLzIvTWF0aC5QSSk8MCYmKGUrPTM2MCksW2ksTWF0aC5zcXJ0KG4qbithKmEpLGVdfWZ1bmN0aW9uIGsodCl7cmV0dXJuIG0oeCh0KSl9ZnVuY3Rpb24gTSh0KXt2YXIgZSxpPXRbMF0sbj10WzFdO3JldHVybiBlPXRbMl0vMzYwKjIqTWF0aC5QSSxbaSxuKk1hdGguY29zKGUpLG4qTWF0aC5zaW4oZSldfWZ1bmN0aW9uIHcodCl7cmV0dXJuIENbdF19ZS5leHBvcnRzPXtyZ2IyaHNsOmEscmdiMmhzdjpuLHJnYjJod2I6byxyZ2IyY215azpzLHJnYjJrZXl3b3JkOmwscmdiMnh5ejp1LHJnYjJsYWI6ZCxyZ2IybGNoOmZ1bmN0aW9uKHQpe3JldHVybiB5KGQodCkpfSxoc2wycmdiOmMsaHNsMmhzdjpmdW5jdGlvbih0KXt2YXIgZT10WzBdLGk9dFsxXS8xMDAsbj10WzJdLzEwMDtyZXR1cm4gMCE9PW4/W2UsMTAwKigyKihpKj0obio9Mik8PTE/bjoyLW4pLyhuK2kpKSwxMDAqKChuK2kpLzIpXTpbMCwwLDBdfSxoc2wyaHdiOmZ1bmN0aW9uKHQpe3JldHVybiBvKGModCkpfSxoc2wyY215azpmdW5jdGlvbih0KXtyZXR1cm4gcyhjKHQpKX0saHNsMmtleXdvcmQ6ZnVuY3Rpb24odCl7cmV0dXJuIGwoYyh0KSl9LGhzdjJyZ2I6aCxoc3YyaHNsOmZ1bmN0aW9uKHQpe3ZhciBlLGksbj10WzBdLGE9dFsxXS8xMDAsbz10WzJdLzEwMDtyZXR1cm4gZT1hKm8sW24sMTAwKihlPShlLz0oaT0oMi1hKSpvKTw9MT9pOjItaSl8fDApLDEwMCooaS89MildfSxoc3YyaHdiOmZ1bmN0aW9uKHQpe3JldHVybiBvKGgodCkpfSxoc3YyY215azpmdW5jdGlvbih0KXtyZXR1cm4gcyhoKHQpKX0saHN2MmtleXdvcmQ6ZnVuY3Rpb24odCl7cmV0dXJuIGwoaCh0KSl9LGh3YjJyZ2I6Zixod2IyaHNsOmZ1bmN0aW9uKHQpe3JldHVybiBhKGYodCkpfSxod2IyaHN2OmZ1bmN0aW9uKHQpe3JldHVybiBuKGYodCkpfSxod2IyY215azpmdW5jdGlvbih0KXtyZXR1cm4gcyhmKHQpKX0saHdiMmtleXdvcmQ6ZnVuY3Rpb24odCl7cmV0dXJuIGwoZih0KSl9LGNteWsycmdiOnAsY215azJoc2w6ZnVuY3Rpb24odCl7cmV0dXJuIGEocCh0KSl9LGNteWsyaHN2OmZ1bmN0aW9uKHQpe3JldHVybiBuKHAodCkpfSxjbXlrMmh3YjpmdW5jdGlvbih0KXtyZXR1cm4gbyhwKHQpKX0sY215azJrZXl3b3JkOmZ1bmN0aW9uKHQpe3JldHVybiBsKHAodCkpfSxrZXl3b3JkMnJnYjp3LGtleXdvcmQyaHNsOmZ1bmN0aW9uKHQpe3JldHVybiBhKHcodCkpfSxrZXl3b3JkMmhzdjpmdW5jdGlvbih0KXtyZXR1cm4gbih3KHQpKX0sa2V5d29yZDJod2I6ZnVuY3Rpb24odCl7cmV0dXJuIG8odyh0KSl9LGtleXdvcmQyY215azpmdW5jdGlvbih0KXtyZXR1cm4gcyh3KHQpKX0sa2V5d29yZDJsYWI6ZnVuY3Rpb24odCl7cmV0dXJuIGQodyh0KSl9LGtleXdvcmQyeHl6OmZ1bmN0aW9uKHQpe3JldHVybiB1KHcodCkpfSx4eXoycmdiOm0seHl6MmxhYjp2LHh5ejJsY2g6ZnVuY3Rpb24odCl7cmV0dXJuIHkodih0KSl9LGxhYjJ4eXo6eCxsYWIycmdiOmssbGFiMmxjaDp5LGxjaDJsYWI6TSxsY2gyeHl6OmZ1bmN0aW9uKHQpe3JldHVybiB4KE0odCkpfSxsY2gycmdiOmZ1bmN0aW9uKHQpe3JldHVybiBrKE0odCkpfX07dmFyIEM9e2FsaWNlYmx1ZTpbMjQwLDI0OCwyNTVdLGFudGlxdWV3aGl0ZTpbMjUwLDIzNSwyMTVdLGFxdWE6WzAsMjU1LDI1NV0sYXF1YW1hcmluZTpbMTI3LDI1NSwyMTJdLGF6dXJlOlsyNDAsMjU1LDI1NV0sYmVpZ2U6WzI0NSwyNDUsMjIwXSxiaXNxdWU6WzI1NSwyMjgsMTk2XSxibGFjazpbMCwwLDBdLGJsYW5jaGVkYWxtb25kOlsyNTUsMjM1LDIwNV0sYmx1ZTpbMCwwLDI1NV0sYmx1ZXZpb2xldDpbMTM4LDQzLDIyNl0sYnJvd246WzE2NSw0Miw0Ml0sYnVybHl3b29kOlsyMjIsMTg0LDEzNV0sY2FkZXRibHVlOls5NSwxNTgsMTYwXSxjaGFydHJldXNlOlsxMjcsMjU1LDBdLGNob2NvbGF0ZTpbMjEwLDEwNSwzMF0sY29yYWw6WzI1NSwxMjcsODBdLGNvcm5mbG93ZXJibHVlOlsxMDAsMTQ5LDIzN10sY29ybnNpbGs6WzI1NSwyNDgsMjIwXSxjcmltc29uOlsyMjAsMjAsNjBdLGN5YW46WzAsMjU1LDI1NV0sZGFya2JsdWU6WzAsMCwxMzldLGRhcmtjeWFuOlswLDEzOSwxMzldLGRhcmtnb2xkZW5yb2Q6WzE4NCwxMzQsMTFdLGRhcmtncmF5OlsxNjksMTY5LDE2OV0sZGFya2dyZWVuOlswLDEwMCwwXSxkYXJrZ3JleTpbMTY5LDE2OSwxNjldLGRhcmtraGFraTpbMTg5LDE4MywxMDddLGRhcmttYWdlbnRhOlsxMzksMCwxMzldLGRhcmtvbGl2ZWdyZWVuOls4NSwxMDcsNDddLGRhcmtvcmFuZ2U6WzI1NSwxNDAsMF0sZGFya29yY2hpZDpbMTUzLDUwLDIwNF0sZGFya3JlZDpbMTM5LDAsMF0sZGFya3NhbG1vbjpbMjMzLDE1MCwxMjJdLGRhcmtzZWFncmVlbjpbMTQzLDE4OCwxNDNdLGRhcmtzbGF0ZWJsdWU6WzcyLDYxLDEzOV0sZGFya3NsYXRlZ3JheTpbNDcsNzksNzldLGRhcmtzbGF0ZWdyZXk6WzQ3LDc5LDc5XSxkYXJrdHVycXVvaXNlOlswLDIwNiwyMDldLGRhcmt2aW9sZXQ6WzE0OCwwLDIxMV0sZGVlcHBpbms6WzI1NSwyMCwxNDddLGRlZXBza3libHVlOlswLDE5MSwyNTVdLGRpbWdyYXk6WzEwNSwxMDUsMTA1XSxkaW1ncmV5OlsxMDUsMTA1LDEwNV0sZG9kZ2VyYmx1ZTpbMzAsMTQ0LDI1NV0sZmlyZWJyaWNrOlsxNzgsMzQsMzRdLGZsb3JhbHdoaXRlOlsyNTUsMjUwLDI0MF0sZm9yZXN0Z3JlZW46WzM0LDEzOSwzNF0sZnVjaHNpYTpbMjU1LDAsMjU1XSxnYWluc2Jvcm86WzIyMCwyMjAsMjIwXSxnaG9zdHdoaXRlOlsyNDgsMjQ4LDI1NV0sZ29sZDpbMjU1LDIxNSwwXSxnb2xkZW5yb2Q6WzIxOCwxNjUsMzJdLGdyYXk6WzEyOCwxMjgsMTI4XSxncmVlbjpbMCwxMjgsMF0sZ3JlZW55ZWxsb3c6WzE3MywyNTUsNDddLGdyZXk6WzEyOCwxMjgsMTI4XSxob25leWRldzpbMjQwLDI1NSwyNDBdLGhvdHBpbms6WzI1NSwxMDUsMTgwXSxpbmRpYW5yZWQ6WzIwNSw5Miw5Ml0saW5kaWdvOls3NSwwLDEzMF0saXZvcnk6WzI1NSwyNTUsMjQwXSxraGFraTpbMjQwLDIzMCwxNDBdLGxhdmVuZGVyOlsyMzAsMjMwLDI1MF0sbGF2ZW5kZXJibHVzaDpbMjU1LDI0MCwyNDVdLGxhd25ncmVlbjpbMTI0LDI1MiwwXSxsZW1vbmNoaWZmb246WzI1NSwyNTAsMjA1XSxsaWdodGJsdWU6WzE3MywyMTYsMjMwXSxsaWdodGNvcmFsOlsyNDAsMTI4LDEyOF0sbGlnaHRjeWFuOlsyMjQsMjU1LDI1NV0sbGlnaHRnb2xkZW5yb2R5ZWxsb3c6WzI1MCwyNTAsMjEwXSxsaWdodGdyYXk6WzIxMSwyMTEsMjExXSxsaWdodGdyZWVuOlsxNDQsMjM4LDE0NF0sbGlnaHRncmV5OlsyMTEsMjExLDIxMV0sbGlnaHRwaW5rOlsyNTUsMTgyLDE5M10sbGlnaHRzYWxtb246WzI1NSwxNjAsMTIyXSxsaWdodHNlYWdyZWVuOlszMiwxNzgsMTcwXSxsaWdodHNreWJsdWU6WzEzNSwyMDYsMjUwXSxsaWdodHNsYXRlZ3JheTpbMTE5LDEzNiwxNTNdLGxpZ2h0c2xhdGVncmV5OlsxMTksMTM2LDE1M10sbGlnaHRzdGVlbGJsdWU6WzE3NiwxOTYsMjIyXSxsaWdodHllbGxvdzpbMjU1LDI1NSwyMjRdLGxpbWU6WzAsMjU1LDBdLGxpbWVncmVlbjpbNTAsMjA1LDUwXSxsaW5lbjpbMjUwLDI0MCwyMzBdLG1hZ2VudGE6WzI1NSwwLDI1NV0sbWFyb29uOlsxMjgsMCwwXSxtZWRpdW1hcXVhbWFyaW5lOlsxMDIsMjA1LDE3MF0sbWVkaXVtYmx1ZTpbMCwwLDIwNV0sbWVkaXVtb3JjaGlkOlsxODYsODUsMjExXSxtZWRpdW1wdXJwbGU6WzE0NywxMTIsMjE5XSxtZWRpdW1zZWFncmVlbjpbNjAsMTc5LDExM10sbWVkaXVtc2xhdGVibHVlOlsxMjMsMTA0LDIzOF0sbWVkaXVtc3ByaW5nZ3JlZW46WzAsMjUwLDE1NF0sbWVkaXVtdHVycXVvaXNlOls3MiwyMDksMjA0XSxtZWRpdW12aW9sZXRyZWQ6WzE5OSwyMSwxMzNdLG1pZG5pZ2h0Ymx1ZTpbMjUsMjUsMTEyXSxtaW50Y3JlYW06WzI0NSwyNTUsMjUwXSxtaXN0eXJvc2U6WzI1NSwyMjgsMjI1XSxtb2NjYXNpbjpbMjU1LDIyOCwxODFdLG5hdmFqb3doaXRlOlsyNTUsMjIyLDE3M10sbmF2eTpbMCwwLDEyOF0sb2xkbGFjZTpbMjUzLDI0NSwyMzBdLG9saXZlOlsxMjgsMTI4LDBdLG9saXZlZHJhYjpbMTA3LDE0MiwzNV0sb3JhbmdlOlsyNTUsMTY1LDBdLG9yYW5nZXJlZDpbMjU1LDY5LDBdLG9yY2hpZDpbMjE4LDExMiwyMTRdLHBhbGVnb2xkZW5yb2Q6WzIzOCwyMzIsMTcwXSxwYWxlZ3JlZW46WzE1MiwyNTEsMTUyXSxwYWxldHVycXVvaXNlOlsxNzUsMjM4LDIzOF0scGFsZXZpb2xldHJlZDpbMjE5LDExMiwxNDddLHBhcGF5YXdoaXA6WzI1NSwyMzksMjEzXSxwZWFjaHB1ZmY6WzI1NSwyMTgsMTg1XSxwZXJ1OlsyMDUsMTMzLDYzXSxwaW5rOlsyNTUsMTkyLDIwM10scGx1bTpbMjIxLDE2MCwyMjFdLHBvd2RlcmJsdWU6WzE3NiwyMjQsMjMwXSxwdXJwbGU6WzEyOCwwLDEyOF0scmViZWNjYXB1cnBsZTpbMTAyLDUxLDE1M10scmVkOlsyNTUsMCwwXSxyb3N5YnJvd246WzE4OCwxNDMsMTQzXSxyb3lhbGJsdWU6WzY1LDEwNSwyMjVdLHNhZGRsZWJyb3duOlsxMzksNjksMTldLHNhbG1vbjpbMjUwLDEyOCwxMTRdLHNhbmR5YnJvd246WzI0NCwxNjQsOTZdLHNlYWdyZWVuOls0NiwxMzksODddLHNlYXNoZWxsOlsyNTUsMjQ1LDIzOF0sc2llbm5hOlsxNjAsODIsNDVdLHNpbHZlcjpbMTkyLDE5MiwxOTJdLHNreWJsdWU6WzEzNSwyMDYsMjM1XSxzbGF0ZWJsdWU6WzEwNiw5MCwyMDVdLHNsYXRlZ3JheTpbMTEyLDEyOCwxNDRdLHNsYXRlZ3JleTpbMTEyLDEyOCwxNDRdLHNub3c6WzI1NSwyNTAsMjUwXSxzcHJpbmdncmVlbjpbMCwyNTUsMTI3XSxzdGVlbGJsdWU6WzcwLDEzMCwxODBdLHRhbjpbMjEwLDE4MCwxNDBdLHRlYWw6WzAsMTI4LDEyOF0sdGhpc3RsZTpbMjE2LDE5MSwyMTZdLHRvbWF0bzpbMjU1LDk5LDcxXSx0dXJxdW9pc2U6WzY0LDIyNCwyMDhdLHZpb2xldDpbMjM4LDEzMCwyMzhdLHdoZWF0OlsyNDUsMjIyLDE3OV0sd2hpdGU6WzI1NSwyNTUsMjU1XSx3aGl0ZXNtb2tlOlsyNDUsMjQ1LDI0NV0seWVsbG93OlsyNTUsMjU1LDBdLHllbGxvd2dyZWVuOlsxNTQsMjA1LDUwXX0sUz17fTtmb3IodmFyIF8gaW4gQylTW0pTT04uc3RyaW5naWZ5KENbX10pXT1ffSx7fV0sNTpbZnVuY3Rpb24odCxlLGkpe3ZhciBhPXQoNCksbz1mdW5jdGlvbigpe3JldHVybiBuZXcgdX07Zm9yKHZhciBuIGluIGEpe29bbitcIlJhd1wiXT1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJih0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpLGFbZV0odCl9fShuKTt2YXIgcj0vKFxcdyspMihcXHcrKS8uZXhlYyhuKSxzPXJbMV0sbD1yWzJdOyhvW3NdPW9bc118fHt9KVtsXT1vW25dPWZ1bmN0aW9uKG4pe3JldHVybiBmdW5jdGlvbih0KXtcIm51bWJlclwiPT10eXBlb2YgdCYmKHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSk7dmFyIGU9YVtuXSh0KTtpZihcInN0cmluZ1wiPT10eXBlb2YgZXx8dm9pZCAwPT09ZSlyZXR1cm4gZTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyllW2ldPU1hdGgucm91bmQoZVtpXSk7cmV0dXJuIGV9fShuKX12YXIgdT1mdW5jdGlvbigpe3RoaXMuY29udnM9e319O3UucHJvdG90eXBlLnJvdXRlU3BhY2U9ZnVuY3Rpb24odCxlKXt2YXIgaT1lWzBdO3JldHVybiB2b2lkIDA9PT1pP3RoaXMuZ2V0VmFsdWVzKHQpOihcIm51bWJlclwiPT10eXBlb2YgaSYmKGk9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSkpLHRoaXMuc2V0VmFsdWVzKHQsaSkpfSx1LnByb3RvdHlwZS5zZXRWYWx1ZXM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zcGFjZT10LHRoaXMuY29udnM9e30sdGhpcy5jb252c1t0XT1lLHRoaXN9LHUucHJvdG90eXBlLmdldFZhbHVlcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnZzW3RdO2lmKCFlKXt2YXIgaT10aGlzLnNwYWNlLG49dGhpcy5jb252c1tpXTtlPW9baV1bdF0obiksdGhpcy5jb252c1t0XT1lfXJldHVybiBlfSxbXCJyZ2JcIixcImhzbFwiLFwiaHN2XCIsXCJjbXlrXCIsXCJrZXl3b3JkXCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dS5wcm90b3R5cGVbZV09ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucm91dGVTcGFjZShlLGFyZ3VtZW50cyl9fSksZS5leHBvcnRzPW99LHs0OjR9XSw2OltmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPXthbGljZWJsdWU6WzI0MCwyNDgsMjU1XSxhbnRpcXVld2hpdGU6WzI1MCwyMzUsMjE1XSxhcXVhOlswLDI1NSwyNTVdLGFxdWFtYXJpbmU6WzEyNywyNTUsMjEyXSxhenVyZTpbMjQwLDI1NSwyNTVdLGJlaWdlOlsyNDUsMjQ1LDIyMF0sYmlzcXVlOlsyNTUsMjI4LDE5Nl0sYmxhY2s6WzAsMCwwXSxibGFuY2hlZGFsbW9uZDpbMjU1LDIzNSwyMDVdLGJsdWU6WzAsMCwyNTVdLGJsdWV2aW9sZXQ6WzEzOCw0MywyMjZdLGJyb3duOlsxNjUsNDIsNDJdLGJ1cmx5d29vZDpbMjIyLDE4NCwxMzVdLGNhZGV0Ymx1ZTpbOTUsMTU4LDE2MF0sY2hhcnRyZXVzZTpbMTI3LDI1NSwwXSxjaG9jb2xhdGU6WzIxMCwxMDUsMzBdLGNvcmFsOlsyNTUsMTI3LDgwXSxjb3JuZmxvd2VyYmx1ZTpbMTAwLDE0OSwyMzddLGNvcm5zaWxrOlsyNTUsMjQ4LDIyMF0sY3JpbXNvbjpbMjIwLDIwLDYwXSxjeWFuOlswLDI1NSwyNTVdLGRhcmtibHVlOlswLDAsMTM5XSxkYXJrY3lhbjpbMCwxMzksMTM5XSxkYXJrZ29sZGVucm9kOlsxODQsMTM0LDExXSxkYXJrZ3JheTpbMTY5LDE2OSwxNjldLGRhcmtncmVlbjpbMCwxMDAsMF0sZGFya2dyZXk6WzE2OSwxNjksMTY5XSxkYXJra2hha2k6WzE4OSwxODMsMTA3XSxkYXJrbWFnZW50YTpbMTM5LDAsMTM5XSxkYXJrb2xpdmVncmVlbjpbODUsMTA3LDQ3XSxkYXJrb3JhbmdlOlsyNTUsMTQwLDBdLGRhcmtvcmNoaWQ6WzE1Myw1MCwyMDRdLGRhcmtyZWQ6WzEzOSwwLDBdLGRhcmtzYWxtb246WzIzMywxNTAsMTIyXSxkYXJrc2VhZ3JlZW46WzE0MywxODgsMTQzXSxkYXJrc2xhdGVibHVlOls3Miw2MSwxMzldLGRhcmtzbGF0ZWdyYXk6WzQ3LDc5LDc5XSxkYXJrc2xhdGVncmV5Ols0Nyw3OSw3OV0sZGFya3R1cnF1b2lzZTpbMCwyMDYsMjA5XSxkYXJrdmlvbGV0OlsxNDgsMCwyMTFdLGRlZXBwaW5rOlsyNTUsMjAsMTQ3XSxkZWVwc2t5Ymx1ZTpbMCwxOTEsMjU1XSxkaW1ncmF5OlsxMDUsMTA1LDEwNV0sZGltZ3JleTpbMTA1LDEwNSwxMDVdLGRvZGdlcmJsdWU6WzMwLDE0NCwyNTVdLGZpcmVicmljazpbMTc4LDM0LDM0XSxmbG9yYWx3aGl0ZTpbMjU1LDI1MCwyNDBdLGZvcmVzdGdyZWVuOlszNCwxMzksMzRdLGZ1Y2hzaWE6WzI1NSwwLDI1NV0sZ2FpbnNib3JvOlsyMjAsMjIwLDIyMF0sZ2hvc3R3aGl0ZTpbMjQ4LDI0OCwyNTVdLGdvbGQ6WzI1NSwyMTUsMF0sZ29sZGVucm9kOlsyMTgsMTY1LDMyXSxncmF5OlsxMjgsMTI4LDEyOF0sZ3JlZW46WzAsMTI4LDBdLGdyZWVueWVsbG93OlsxNzMsMjU1LDQ3XSxncmV5OlsxMjgsMTI4LDEyOF0saG9uZXlkZXc6WzI0MCwyNTUsMjQwXSxob3RwaW5rOlsyNTUsMTA1LDE4MF0saW5kaWFucmVkOlsyMDUsOTIsOTJdLGluZGlnbzpbNzUsMCwxMzBdLGl2b3J5OlsyNTUsMjU1LDI0MF0sa2hha2k6WzI0MCwyMzAsMTQwXSxsYXZlbmRlcjpbMjMwLDIzMCwyNTBdLGxhdmVuZGVyYmx1c2g6WzI1NSwyNDAsMjQ1XSxsYXduZ3JlZW46WzEyNCwyNTIsMF0sbGVtb25jaGlmZm9uOlsyNTUsMjUwLDIwNV0sbGlnaHRibHVlOlsxNzMsMjE2LDIzMF0sbGlnaHRjb3JhbDpbMjQwLDEyOCwxMjhdLGxpZ2h0Y3lhbjpbMjI0LDI1NSwyNTVdLGxpZ2h0Z29sZGVucm9keWVsbG93OlsyNTAsMjUwLDIxMF0sbGlnaHRncmF5OlsyMTEsMjExLDIxMV0sbGlnaHRncmVlbjpbMTQ0LDIzOCwxNDRdLGxpZ2h0Z3JleTpbMjExLDIxMSwyMTFdLGxpZ2h0cGluazpbMjU1LDE4MiwxOTNdLGxpZ2h0c2FsbW9uOlsyNTUsMTYwLDEyMl0sbGlnaHRzZWFncmVlbjpbMzIsMTc4LDE3MF0sbGlnaHRza3libHVlOlsxMzUsMjA2LDI1MF0sbGlnaHRzbGF0ZWdyYXk6WzExOSwxMzYsMTUzXSxsaWdodHNsYXRlZ3JleTpbMTE5LDEzNiwxNTNdLGxpZ2h0c3RlZWxibHVlOlsxNzYsMTk2LDIyMl0sbGlnaHR5ZWxsb3c6WzI1NSwyNTUsMjI0XSxsaW1lOlswLDI1NSwwXSxsaW1lZ3JlZW46WzUwLDIwNSw1MF0sbGluZW46WzI1MCwyNDAsMjMwXSxtYWdlbnRhOlsyNTUsMCwyNTVdLG1hcm9vbjpbMTI4LDAsMF0sbWVkaXVtYXF1YW1hcmluZTpbMTAyLDIwNSwxNzBdLG1lZGl1bWJsdWU6WzAsMCwyMDVdLG1lZGl1bW9yY2hpZDpbMTg2LDg1LDIxMV0sbWVkaXVtcHVycGxlOlsxNDcsMTEyLDIxOV0sbWVkaXVtc2VhZ3JlZW46WzYwLDE3OSwxMTNdLG1lZGl1bXNsYXRlYmx1ZTpbMTIzLDEwNCwyMzhdLG1lZGl1bXNwcmluZ2dyZWVuOlswLDI1MCwxNTRdLG1lZGl1bXR1cnF1b2lzZTpbNzIsMjA5LDIwNF0sbWVkaXVtdmlvbGV0cmVkOlsxOTksMjEsMTMzXSxtaWRuaWdodGJsdWU6WzI1LDI1LDExMl0sbWludGNyZWFtOlsyNDUsMjU1LDI1MF0sbWlzdHlyb3NlOlsyNTUsMjI4LDIyNV0sbW9jY2FzaW46WzI1NSwyMjgsMTgxXSxuYXZham93aGl0ZTpbMjU1LDIyMiwxNzNdLG5hdnk6WzAsMCwxMjhdLG9sZGxhY2U6WzI1MywyNDUsMjMwXSxvbGl2ZTpbMTI4LDEyOCwwXSxvbGl2ZWRyYWI6WzEwNywxNDIsMzVdLG9yYW5nZTpbMjU1LDE2NSwwXSxvcmFuZ2VyZWQ6WzI1NSw2OSwwXSxvcmNoaWQ6WzIxOCwxMTIsMjE0XSxwYWxlZ29sZGVucm9kOlsyMzgsMjMyLDE3MF0scGFsZWdyZWVuOlsxNTIsMjUxLDE1Ml0scGFsZXR1cnF1b2lzZTpbMTc1LDIzOCwyMzhdLHBhbGV2aW9sZXRyZWQ6WzIxOSwxMTIsMTQ3XSxwYXBheWF3aGlwOlsyNTUsMjM5LDIxM10scGVhY2hwdWZmOlsyNTUsMjE4LDE4NV0scGVydTpbMjA1LDEzMyw2M10scGluazpbMjU1LDE5MiwyMDNdLHBsdW06WzIyMSwxNjAsMjIxXSxwb3dkZXJibHVlOlsxNzYsMjI0LDIzMF0scHVycGxlOlsxMjgsMCwxMjhdLHJlYmVjY2FwdXJwbGU6WzEwMiw1MSwxNTNdLHJlZDpbMjU1LDAsMF0scm9zeWJyb3duOlsxODgsMTQzLDE0M10scm95YWxibHVlOls2NSwxMDUsMjI1XSxzYWRkbGVicm93bjpbMTM5LDY5LDE5XSxzYWxtb246WzI1MCwxMjgsMTE0XSxzYW5keWJyb3duOlsyNDQsMTY0LDk2XSxzZWFncmVlbjpbNDYsMTM5LDg3XSxzZWFzaGVsbDpbMjU1LDI0NSwyMzhdLHNpZW5uYTpbMTYwLDgyLDQ1XSxzaWx2ZXI6WzE5MiwxOTIsMTkyXSxza3libHVlOlsxMzUsMjA2LDIzNV0sc2xhdGVibHVlOlsxMDYsOTAsMjA1XSxzbGF0ZWdyYXk6WzExMiwxMjgsMTQ0XSxzbGF0ZWdyZXk6WzExMiwxMjgsMTQ0XSxzbm93OlsyNTUsMjUwLDI1MF0sc3ByaW5nZ3JlZW46WzAsMjU1LDEyN10sc3RlZWxibHVlOls3MCwxMzAsMTgwXSx0YW46WzIxMCwxODAsMTQwXSx0ZWFsOlswLDEyOCwxMjhdLHRoaXN0bGU6WzIxNiwxOTEsMjE2XSx0b21hdG86WzI1NSw5OSw3MV0sdHVycXVvaXNlOls2NCwyMjQsMjA4XSx2aW9sZXQ6WzIzOCwxMzAsMjM4XSx3aGVhdDpbMjQ1LDIyMiwxNzldLHdoaXRlOlsyNTUsMjU1LDI1NV0sd2hpdGVzbW9rZTpbMjQ1LDI0NSwyNDVdLHllbGxvdzpbMjU1LDI1NSwwXSx5ZWxsb3dncmVlbjpbMTU0LDIwNSw1MF19fSx7fV0sNzpbZnVuY3Rpb24odCxlLGkpe3ZhciBuPXQoMzApKCk7bi5oZWxwZXJzPXQoNDYpLHQoMjgpKG4pLG4uQW5pbWF0aW9uPXQoMjIpLG4uYW5pbWF0aW9uU2VydmljZT10KDIzKSxuLmRlZmF1bHRzPXQoMjYpLG4uRWxlbWVudD10KDI3KSxuLmVsZW1lbnRzPXQoNDEpLG4uSW50ZXJhY3Rpb249dCgyOSksbi5sYXlvdXRzPXQoMzEpLG4ucGxhdGZvcm09dCg0OSksbi5wbHVnaW5zPXQoMzIpLG4uU2NhbGU9dCgzMyksbi5zY2FsZVNlcnZpY2U9dCgzNCksbi5UaWNrcz10KDM1KSxuLlRvb2x0aXA9dCgzNiksdCgyNCkobiksdCgyNSkobiksdCg1NikobiksdCg1NCkobiksdCg1NSkobiksdCg1NykobiksdCg1OCkobiksdCg1OSkobiksdCgxNSkobiksdCgxNikobiksdCgxNykobiksdCgxOCkobiksdCgxOSkobiksdCgyMCkobiksdCgyMSkobiksdCg4KShuKSx0KDkpKG4pLHQoMTApKG4pLHQoMTEpKG4pLHQoMTIpKG4pLHQoMTMpKG4pLHQoMTQpKG4pO3ZhciBhPXQoNTApO2Zvcih2YXIgbyBpbiBhKWEuaGFzT3duUHJvcGVydHkobykmJm4ucGx1Z2lucy5yZWdpc3RlcihhW29dKTtuLnBsYXRmb3JtLmluaXRpYWxpemUoKSxlLmV4cG9ydHM9bixcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYod2luZG93LkNoYXJ0PW4pLG4uTGVnZW5kPWEubGVnZW5kLl9lbGVtZW50LG4uVGl0bGU9YS50aXRsZS5fZWxlbWVudCxuLnBsdWdpblNlcnZpY2U9bi5wbHVnaW5zLG4uUGx1Z2luQmFzZT1uLkVsZW1lbnQuZXh0ZW5kKHt9KSxuLmNhbnZhc0hlbHBlcnM9bi5oZWxwZXJzLmNhbnZhcyxuLmxheW91dFNlcnZpY2U9bi5sYXlvdXRzfSx7MTA6MTAsMTE6MTEsMTI6MTIsMTM6MTMsMTQ6MTQsMTU6MTUsMTY6MTYsMTc6MTcsMTg6MTgsMTk6MTksMjA6MjAsMjE6MjEsMjI6MjIsMjM6MjMsMjQ6MjQsMjU6MjUsMjY6MjYsMjc6MjcsMjg6MjgsMjk6MjksMzA6MzAsMzE6MzEsMzI6MzIsMzM6MzMsMzQ6MzQsMzU6MzUsMzY6MzYsNDE6NDEsNDY6NDYsNDk6NDksNTA6NTAsNTQ6NTQsNTU6NTUsNTY6NTYsNTc6NTcsNTg6NTgsNTk6NTksODo4LDk6OX1dLDg6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oaSl7aS5CYXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS50eXBlPVwiYmFyXCIsbmV3IGkodCxlKX19fSx7fV0sOTpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1mdW5jdGlvbihpKXtpLkJ1YmJsZT1mdW5jdGlvbih0LGUpe3JldHVybiBlLnR5cGU9XCJidWJibGVcIixuZXcgaSh0LGUpfX19LHt9XSwxMDpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1mdW5jdGlvbihpKXtpLkRvdWdobnV0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUudHlwZT1cImRvdWdobnV0XCIsbmV3IGkodCxlKX19fSx7fV0sMTE6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oaSl7aS5MaW5lPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUudHlwZT1cImxpbmVcIixuZXcgaSh0LGUpfX19LHt9XSwxMjpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1mdW5jdGlvbihpKXtpLlBvbGFyQXJlYT1mdW5jdGlvbih0LGUpe3JldHVybiBlLnR5cGU9XCJwb2xhckFyZWFcIixuZXcgaSh0LGUpfX19LHt9XSwxMzpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1mdW5jdGlvbihpKXtpLlJhZGFyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUudHlwZT1cInJhZGFyXCIsbmV3IGkodCxlKX19fSx7fV0sMTQ6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oaSl7aS5TY2F0dGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUudHlwZT1cInNjYXR0ZXJcIixuZXcgaSh0LGUpfX19LHt9XSwxNTpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciBuPXQoMjYpLGE9dCg0MSksUz10KDQ2KTtuLl9zZXQoXCJiYXJcIix7aG92ZXI6e21vZGU6XCJsYWJlbFwifSxzY2FsZXM6e3hBeGVzOlt7dHlwZTpcImNhdGVnb3J5XCIsY2F0ZWdvcnlQZXJjZW50YWdlOi44LGJhclBlcmNlbnRhZ2U6Ljksb2Zmc2V0OiEwLGdyaWRMaW5lczp7b2Zmc2V0R3JpZExpbmVzOiEwfX1dLHlBeGVzOlt7dHlwZTpcImxpbmVhclwifV19fSksbi5fc2V0KFwiaG9yaXpvbnRhbEJhclwiLHtob3Zlcjp7bW9kZTpcImluZGV4XCIsYXhpczpcInlcIn0sc2NhbGVzOnt4QXhlczpbe3R5cGU6XCJsaW5lYXJcIixwb3NpdGlvbjpcImJvdHRvbVwifV0seUF4ZXM6W3twb3NpdGlvbjpcImxlZnRcIix0eXBlOlwiY2F0ZWdvcnlcIixjYXRlZ29yeVBlcmNlbnRhZ2U6LjgsYmFyUGVyY2VudGFnZTouOSxvZmZzZXQ6ITAsZ3JpZExpbmVzOntvZmZzZXRHcmlkTGluZXM6ITB9fV19LGVsZW1lbnRzOntyZWN0YW5nbGU6e2JvcmRlclNraXBwZWQ6XCJsZWZ0XCJ9fSx0b29sdGlwczp7Y2FsbGJhY2tzOnt0aXRsZTpmdW5jdGlvbih0LGUpe3ZhciBpPVwiXCI7cmV0dXJuIDA8dC5sZW5ndGgmJih0WzBdLnlMYWJlbD9pPXRbMF0ueUxhYmVsOjA8ZS5sYWJlbHMubGVuZ3RoJiZ0WzBdLmluZGV4PGUubGFiZWxzLmxlbmd0aCYmKGk9ZS5sYWJlbHNbdFswXS5pbmRleF0pKSxpfSxsYWJlbDpmdW5jdGlvbih0LGUpe3JldHVybihlLmRhdGFzZXRzW3QuZGF0YXNldEluZGV4XS5sYWJlbHx8XCJcIikrXCI6IFwiK3QueExhYmVsfX0sbW9kZTpcImluZGV4XCIsYXhpczpcInlcIn19KSxlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7ZS5jb250cm9sbGVycy5iYXI9ZS5EYXRhc2V0Q29udHJvbGxlci5leHRlbmQoe2RhdGFFbGVtZW50VHlwZTphLlJlY3RhbmdsZSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dmFyIHQ7ZS5EYXRhc2V0Q29udHJvbGxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksKHQ9dGhpcy5nZXRNZXRhKCkpLnN0YWNrPXRoaXMuZ2V0RGF0YXNldCgpLnN0YWNrLHQuYmFyPSEwfSx1cGRhdGU6ZnVuY3Rpb24odCl7dmFyIGUsaSxuPXRoaXMuZ2V0TWV0YSgpLmRhdGE7Zm9yKHRoaXMuX3J1bGVyPXRoaXMuZ2V0UnVsZXIoKSxlPTAsaT1uLmxlbmd0aDtlPGk7KytlKXRoaXMudXBkYXRlRWxlbWVudChuW2VdLGUsdCl9LHVwZGF0ZUVsZW1lbnQ6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMsYT1uLmNoYXJ0LG89bi5nZXRNZXRhKCkscj1uLmdldERhdGFzZXQoKSxzPXQuY3VzdG9tfHx7fSxsPWEub3B0aW9ucy5lbGVtZW50cy5yZWN0YW5nbGU7dC5feFNjYWxlPW4uZ2V0U2NhbGVGb3JJZChvLnhBeGlzSUQpLHQuX3lTY2FsZT1uLmdldFNjYWxlRm9ySWQoby55QXhpc0lEKSx0Ll9kYXRhc2V0SW5kZXg9bi5pbmRleCx0Ll9pbmRleD1lLHQuX21vZGVsPXtkYXRhc2V0TGFiZWw6ci5sYWJlbCxsYWJlbDphLmRhdGEubGFiZWxzW2VdLGJvcmRlclNraXBwZWQ6cy5ib3JkZXJTa2lwcGVkP3MuYm9yZGVyU2tpcHBlZDpsLmJvcmRlclNraXBwZWQsYmFja2dyb3VuZENvbG9yOnMuYmFja2dyb3VuZENvbG9yP3MuYmFja2dyb3VuZENvbG9yOlMudmFsdWVBdEluZGV4T3JEZWZhdWx0KHIuYmFja2dyb3VuZENvbG9yLGUsbC5iYWNrZ3JvdW5kQ29sb3IpLGJvcmRlckNvbG9yOnMuYm9yZGVyQ29sb3I/cy5ib3JkZXJDb2xvcjpTLnZhbHVlQXRJbmRleE9yRGVmYXVsdChyLmJvcmRlckNvbG9yLGUsbC5ib3JkZXJDb2xvciksYm9yZGVyV2lkdGg6cy5ib3JkZXJXaWR0aD9zLmJvcmRlcldpZHRoOlMudmFsdWVBdEluZGV4T3JEZWZhdWx0KHIuYm9yZGVyV2lkdGgsZSxsLmJvcmRlcldpZHRoKX0sbi51cGRhdGVFbGVtZW50R2VvbWV0cnkodCxlLGkpLHQucGl2b3QoKX0sdXBkYXRlRWxlbWVudEdlb21ldHJ5OmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10aGlzLGE9dC5fbW9kZWwsbz1uLmdldFZhbHVlU2NhbGUoKSxyPW8uZ2V0QmFzZVBpeGVsKCkscz1vLmlzSG9yaXpvbnRhbCgpLGw9bi5fcnVsZXJ8fG4uZ2V0UnVsZXIoKSx1PW4uY2FsY3VsYXRlQmFyVmFsdWVQaXhlbHMobi5pbmRleCxlKSxkPW4uY2FsY3VsYXRlQmFySW5kZXhQaXhlbHMobi5pbmRleCxlLGwpO2EuaG9yaXpvbnRhbD1zLGEuYmFzZT1pP3I6dS5iYXNlLGEueD1zP2k/cjp1LmhlYWQ6ZC5jZW50ZXIsYS55PXM/ZC5jZW50ZXI6aT9yOnUuaGVhZCxhLmhlaWdodD1zP2Quc2l6ZTp2b2lkIDAsYS53aWR0aD1zP3ZvaWQgMDpkLnNpemV9LGdldFZhbHVlU2NhbGVJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldE1ldGEoKS55QXhpc0lEfSxnZXRJbmRleFNjYWxlSWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRNZXRhKCkueEF4aXNJRH0sZ2V0VmFsdWVTY2FsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjYWxlRm9ySWQodGhpcy5nZXRWYWx1ZVNjYWxlSWQoKSl9LGdldEluZGV4U2NhbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY2FsZUZvcklkKHRoaXMuZ2V0SW5kZXhTY2FsZUlkKCkpfSxfZ2V0U3RhY2tzOmZ1bmN0aW9uKHQpe3ZhciBlLGksbj10aGlzLmNoYXJ0LGE9dGhpcy5nZXRJbmRleFNjYWxlKCkub3B0aW9ucy5zdGFja2VkLG89dm9pZCAwPT09dD9uLmRhdGEuZGF0YXNldHMubGVuZ3RoOnQrMSxyPVtdO2ZvcihlPTA7ZTxvOysrZSkoaT1uLmdldERhdGFzZXRNZXRhKGUpKS5iYXImJm4uaXNEYXRhc2V0VmlzaWJsZShlKSYmKCExPT09YXx8ITA9PT1hJiYtMT09PXIuaW5kZXhPZihpLnN0YWNrKXx8dm9pZCAwPT09YSYmKHZvaWQgMD09PWkuc3RhY2t8fC0xPT09ci5pbmRleE9mKGkuc3RhY2spKSkmJnIucHVzaChpLnN0YWNrKTtyZXR1cm4gcn0sZ2V0U3RhY2tDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRTdGFja3MoKS5sZW5ndGh9LGdldFN0YWNrSW5kZXg6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9nZXRTdGFja3ModCksbj12b2lkIDAhPT1lP2kuaW5kZXhPZihlKTotMTtyZXR1cm4tMT09PW4/aS5sZW5ndGgtMTpufSxnZXRSdWxlcjpmdW5jdGlvbigpe3ZhciB0LGUsaT10aGlzLmdldEluZGV4U2NhbGUoKSxuPXRoaXMuZ2V0U3RhY2tDb3VudCgpLGE9dGhpcy5pbmRleCxvPWkuaXNIb3Jpem9udGFsKCkscj1vP2kubGVmdDppLnRvcCxzPXIrKG8/aS53aWR0aDppLmhlaWdodCksbD1bXTtmb3IodD0wLGU9dGhpcy5nZXRNZXRhKCkuZGF0YS5sZW5ndGg7dDxlOysrdClsLnB1c2goaS5nZXRQaXhlbEZvclZhbHVlKG51bGwsdCxhKSk7cmV0dXJue21pbjpTLmlzTnVsbE9yVW5kZWYoaS5vcHRpb25zLmJhclRoaWNrbmVzcyk/ZnVuY3Rpb24odCxlKXt2YXIgaSxuLGEsbyxyPXQuaXNIb3Jpem9udGFsKCk/dC53aWR0aDp0LmhlaWdodCxzPXQuZ2V0VGlja3MoKTtmb3IoYT0xLG89ZS5sZW5ndGg7YTxvOysrYSlyPU1hdGgubWluKHIsZVthXS1lW2EtMV0pO2ZvcihhPTAsbz1zLmxlbmd0aDthPG87KythKW49dC5nZXRQaXhlbEZvclRpY2soYSkscj0wPGE/TWF0aC5taW4ocixuLWkpOnIsaT1uO3JldHVybiByfShpLGwpOi0xLHBpeGVsczpsLHN0YXJ0OnIsZW5kOnMsc3RhY2tDb3VudDpuLHNjYWxlOml9fSxjYWxjdWxhdGVCYXJWYWx1ZVBpeGVsczpmdW5jdGlvbih0LGUpe3ZhciBpLG4sYSxvLHIscyxsPXRoaXMuY2hhcnQsdT10aGlzLmdldE1ldGEoKSxkPXRoaXMuZ2V0VmFsdWVTY2FsZSgpLGM9bC5kYXRhLmRhdGFzZXRzLGg9ZC5nZXRSaWdodFZhbHVlKGNbdF0uZGF0YVtlXSksZj1kLm9wdGlvbnMuc3RhY2tlZCxnPXUuc3RhY2sscD0wO2lmKGZ8fHZvaWQgMD09PWYmJnZvaWQgMCE9PWcpZm9yKGk9MDtpPHQ7KytpKShuPWwuZ2V0RGF0YXNldE1ldGEoaSkpLmJhciYmbi5zdGFjaz09PWcmJm4uY29udHJvbGxlci5nZXRWYWx1ZVNjYWxlSWQoKT09PWQuaWQmJmwuaXNEYXRhc2V0VmlzaWJsZShpKSYmKGE9ZC5nZXRSaWdodFZhbHVlKGNbaV0uZGF0YVtlXSksKGg8MCYmYTwwfHwwPD1oJiYwPGEpJiYocCs9YSkpO3JldHVybiBvPWQuZ2V0UGl4ZWxGb3JWYWx1ZShwKSx7c2l6ZTpzPSgocj1kLmdldFBpeGVsRm9yVmFsdWUocCtoKSktbykvMixiYXNlOm8saGVhZDpyLGNlbnRlcjpyK3MvMn19LGNhbGN1bGF0ZUJhckluZGV4UGl4ZWxzOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbixhLG8scixzLGwsdSxkLGMsaCxmLGcscCxtLHYsYix4LHk9aS5zY2FsZS5vcHRpb25zLGs9XCJmbGV4XCI9PT15LmJhclRoaWNrbmVzcz8oYz1lLGY9eSxwPShoPWkpLnBpeGVscyxtPXBbY10sdj0wPGM/cFtjLTFdOm51bGwsYj1jPHAubGVuZ3RoLTE/cFtjKzFdOm51bGwseD1mLmNhdGVnb3J5UGVyY2VudGFnZSxudWxsPT09diYmKHY9bS0obnVsbD09PWI/aC5lbmQtbTpiLW0pKSxudWxsPT09YiYmKGI9bSttLXYpLGc9bS0obS12KS8yKngse2NodW5rOihiLXYpLzIqeC9oLnN0YWNrQ291bnQscmF0aW86Zi5iYXJQZXJjZW50YWdlLHN0YXJ0Omd9KToobj1lLGE9aSxsPShvPXkpLmJhclRoaWNrbmVzcyx1PWEuc3RhY2tDb3VudCxkPWEucGl4ZWxzW25dLHM9Uy5pc051bGxPclVuZGVmKGwpPyhyPWEubWluKm8uY2F0ZWdvcnlQZXJjZW50YWdlLG8uYmFyUGVyY2VudGFnZSk6KHI9bCp1LDEpLHtjaHVuazpyL3UscmF0aW86cyxzdGFydDpkLXIvMn0pLE09dGhpcy5nZXRTdGFja0luZGV4KHQsdGhpcy5nZXRNZXRhKCkuc3RhY2spLHc9ay5zdGFydCtrLmNodW5rKk0ray5jaHVuay8yLEM9TWF0aC5taW4oUy52YWx1ZU9yRGVmYXVsdCh5Lm1heEJhclRoaWNrbmVzcywxLzApLGsuY2h1bmsqay5yYXRpbyk7cmV0dXJue2Jhc2U6dy1DLzIsaGVhZDp3K0MvMixjZW50ZXI6dyxzaXplOkN9fSxkcmF3OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jaGFydCxlPXRoaXMuZ2V0VmFsdWVTY2FsZSgpLGk9dGhpcy5nZXRNZXRhKCkuZGF0YSxuPXRoaXMuZ2V0RGF0YXNldCgpLGE9aS5sZW5ndGgsbz0wO2ZvcihTLmNhbnZhcy5jbGlwQXJlYSh0LmN0eCx0LmNoYXJ0QXJlYSk7bzxhOysrbylpc05hTihlLmdldFJpZ2h0VmFsdWUobi5kYXRhW29dKSl8fGlbb10uZHJhdygpO1MuY2FudmFzLnVuY2xpcEFyZWEodC5jdHgpfX0pLGUuY29udHJvbGxlcnMuaG9yaXpvbnRhbEJhcj1lLmNvbnRyb2xsZXJzLmJhci5leHRlbmQoe2dldFZhbHVlU2NhbGVJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldE1ldGEoKS54QXhpc0lEfSxnZXRJbmRleFNjYWxlSWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRNZXRhKCkueUF4aXNJRH19KX19LHsyNjoyNiw0MTo0MSw0Njo0Nn1dLDE2OltmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dCgyNiksYT10KDQxKSxnPXQoNDYpO24uX3NldChcImJ1YmJsZVwiLHtob3Zlcjp7bW9kZTpcInNpbmdsZVwifSxzY2FsZXM6e3hBeGVzOlt7dHlwZTpcImxpbmVhclwiLHBvc2l0aW9uOlwiYm90dG9tXCIsaWQ6XCJ4LWF4aXMtMFwifV0seUF4ZXM6W3t0eXBlOlwibGluZWFyXCIscG9zaXRpb246XCJsZWZ0XCIsaWQ6XCJ5LWF4aXMtMFwifV19LHRvb2x0aXBzOntjYWxsYmFja3M6e3RpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuXCJcIn0sbGFiZWw6ZnVuY3Rpb24odCxlKXt2YXIgaT1lLmRhdGFzZXRzW3QuZGF0YXNldEluZGV4XS5sYWJlbHx8XCJcIixuPWUuZGF0YXNldHNbdC5kYXRhc2V0SW5kZXhdLmRhdGFbdC5pbmRleF07cmV0dXJuIGkrXCI6IChcIit0LnhMYWJlbCtcIiwgXCIrdC55TGFiZWwrXCIsIFwiK24ucitcIilcIn19fX0pLGUuZXhwb3J0cz1mdW5jdGlvbih0KXt0LmNvbnRyb2xsZXJzLmJ1YmJsZT10LkRhdGFzZXRDb250cm9sbGVyLmV4dGVuZCh7ZGF0YUVsZW1lbnRUeXBlOmEuUG9pbnQsdXBkYXRlOmZ1bmN0aW9uKGkpe3ZhciBuPXRoaXMsdD1uLmdldE1ldGEoKS5kYXRhO2cuZWFjaCh0LGZ1bmN0aW9uKHQsZSl7bi51cGRhdGVFbGVtZW50KHQsZSxpKX0pfSx1cGRhdGVFbGVtZW50OmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10aGlzLGE9bi5nZXRNZXRhKCksbz10LmN1c3RvbXx8e30scj1uLmdldFNjYWxlRm9ySWQoYS54QXhpc0lEKSxzPW4uZ2V0U2NhbGVGb3JJZChhLnlBeGlzSUQpLGw9bi5fcmVzb2x2ZUVsZW1lbnRPcHRpb25zKHQsZSksdT1uLmdldERhdGFzZXQoKS5kYXRhW2VdLGQ9bi5pbmRleCxjPWk/ci5nZXRQaXhlbEZvckRlY2ltYWwoLjUpOnIuZ2V0UGl4ZWxGb3JWYWx1ZShcIm9iamVjdFwiPT10eXBlb2YgdT91Ok5hTixlLGQpLGg9aT9zLmdldEJhc2VQaXhlbCgpOnMuZ2V0UGl4ZWxGb3JWYWx1ZSh1LGUsZCk7dC5feFNjYWxlPXIsdC5feVNjYWxlPXMsdC5fb3B0aW9ucz1sLHQuX2RhdGFzZXRJbmRleD1kLHQuX2luZGV4PWUsdC5fbW9kZWw9e2JhY2tncm91bmRDb2xvcjpsLmJhY2tncm91bmRDb2xvcixib3JkZXJDb2xvcjpsLmJvcmRlckNvbG9yLGJvcmRlcldpZHRoOmwuYm9yZGVyV2lkdGgsaGl0UmFkaXVzOmwuaGl0UmFkaXVzLHBvaW50U3R5bGU6bC5wb2ludFN0eWxlLHJvdGF0aW9uOmwucm90YXRpb24scmFkaXVzOmk/MDpsLnJhZGl1cyxza2lwOm8uc2tpcHx8aXNOYU4oYyl8fGlzTmFOKGgpLHg6Yyx5Omh9LHQucGl2b3QoKX0sc2V0SG92ZXJTdHlsZTpmdW5jdGlvbih0KXt2YXIgZT10Ll9tb2RlbCxpPXQuX29wdGlvbnM7dC4kcHJldmlvdXNTdHlsZT17YmFja2dyb3VuZENvbG9yOmUuYmFja2dyb3VuZENvbG9yLGJvcmRlckNvbG9yOmUuYm9yZGVyQ29sb3IsYm9yZGVyV2lkdGg6ZS5ib3JkZXJXaWR0aCxyYWRpdXM6ZS5yYWRpdXN9LGUuYmFja2dyb3VuZENvbG9yPWcudmFsdWVPckRlZmF1bHQoaS5ob3ZlckJhY2tncm91bmRDb2xvcixnLmdldEhvdmVyQ29sb3IoaS5iYWNrZ3JvdW5kQ29sb3IpKSxlLmJvcmRlckNvbG9yPWcudmFsdWVPckRlZmF1bHQoaS5ob3ZlckJvcmRlckNvbG9yLGcuZ2V0SG92ZXJDb2xvcihpLmJvcmRlckNvbG9yKSksZS5ib3JkZXJXaWR0aD1nLnZhbHVlT3JEZWZhdWx0KGkuaG92ZXJCb3JkZXJXaWR0aCxpLmJvcmRlcldpZHRoKSxlLnJhZGl1cz1pLnJhZGl1cytpLmhvdmVyUmFkaXVzfSxfcmVzb2x2ZUVsZW1lbnRPcHRpb25zOmZ1bmN0aW9uKHQsZSl7dmFyIGksbixhLG89dGhpcy5jaGFydCxyPW8uZGF0YS5kYXRhc2V0c1t0aGlzLmluZGV4XSxzPXQuY3VzdG9tfHx7fSxsPW8ub3B0aW9ucy5lbGVtZW50cy5wb2ludCx1PWcub3B0aW9ucy5yZXNvbHZlLGQ9ci5kYXRhW2VdLGM9e30saD17Y2hhcnQ6byxkYXRhSW5kZXg6ZSxkYXRhc2V0OnIsZGF0YXNldEluZGV4OnRoaXMuaW5kZXh9LGY9W1wiYmFja2dyb3VuZENvbG9yXCIsXCJib3JkZXJDb2xvclwiLFwiYm9yZGVyV2lkdGhcIixcImhvdmVyQmFja2dyb3VuZENvbG9yXCIsXCJob3ZlckJvcmRlckNvbG9yXCIsXCJob3ZlckJvcmRlcldpZHRoXCIsXCJob3ZlclJhZGl1c1wiLFwiaGl0UmFkaXVzXCIsXCJwb2ludFN0eWxlXCIsXCJyb3RhdGlvblwiXTtmb3IoaT0wLG49Zi5sZW5ndGg7aTxuOysraSljW2E9ZltpXV09dShbc1thXSxyW2FdLGxbYV1dLGgsZSk7cmV0dXJuIGMucmFkaXVzPXUoW3MucmFkaXVzLGQ/ZC5yOnZvaWQgMCxyLnJhZGl1cyxsLnJhZGl1c10saCxlKSxjfX0pfX0sezI2OjI2LDQxOjQxLDQ2OjQ2fV0sMTc6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10KDI2KSxhPXQoNDEpLEE9dCg0Nik7bi5fc2V0KFwiZG91Z2hudXRcIix7YW5pbWF0aW9uOnthbmltYXRlUm90YXRlOiEwLGFuaW1hdGVTY2FsZTohMX0saG92ZXI6e21vZGU6XCJzaW5nbGVcIn0sbGVnZW5kQ2FsbGJhY2s6ZnVuY3Rpb24odCl7dmFyIGU9W107ZS5wdXNoKCc8dWwgY2xhc3M9XCInK3QuaWQrJy1sZWdlbmRcIj4nKTt2YXIgaT10LmRhdGEsbj1pLmRhdGFzZXRzLGE9aS5sYWJlbHM7aWYobi5sZW5ndGgpZm9yKHZhciBvPTA7bzxuWzBdLmRhdGEubGVuZ3RoOysrbyllLnB1c2goJzxsaT48c3BhbiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6JytuWzBdLmJhY2tncm91bmRDb2xvcltvXSsnXCI+PC9zcGFuPicpLGFbb10mJmUucHVzaChhW29dKSxlLnB1c2goXCI8L2xpPlwiKTtyZXR1cm4gZS5wdXNoKFwiPC91bD5cIiksZS5qb2luKFwiXCIpfSxsZWdlbmQ6e2xhYmVsczp7Z2VuZXJhdGVMYWJlbHM6ZnVuY3Rpb24obCl7dmFyIHU9bC5kYXRhO3JldHVybiB1LmxhYmVscy5sZW5ndGgmJnUuZGF0YXNldHMubGVuZ3RoP3UubGFiZWxzLm1hcChmdW5jdGlvbih0LGUpe3ZhciBpPWwuZ2V0RGF0YXNldE1ldGEoMCksbj11LmRhdGFzZXRzWzBdLGE9aS5kYXRhW2VdLG89YSYmYS5jdXN0b218fHt9LHI9QS52YWx1ZUF0SW5kZXhPckRlZmF1bHQscz1sLm9wdGlvbnMuZWxlbWVudHMuYXJjO3JldHVybnt0ZXh0OnQsZmlsbFN0eWxlOm8uYmFja2dyb3VuZENvbG9yP28uYmFja2dyb3VuZENvbG9yOnIobi5iYWNrZ3JvdW5kQ29sb3IsZSxzLmJhY2tncm91bmRDb2xvciksc3Ryb2tlU3R5bGU6by5ib3JkZXJDb2xvcj9vLmJvcmRlckNvbG9yOnIobi5ib3JkZXJDb2xvcixlLHMuYm9yZGVyQ29sb3IpLGxpbmVXaWR0aDpvLmJvcmRlcldpZHRoP28uYm9yZGVyV2lkdGg6cihuLmJvcmRlcldpZHRoLGUscy5ib3JkZXJXaWR0aCksaGlkZGVuOmlzTmFOKG4uZGF0YVtlXSl8fGkuZGF0YVtlXS5oaWRkZW4saW5kZXg6ZX19KTpbXX19LG9uQ2xpY2s6ZnVuY3Rpb24odCxlKXt2YXIgaSxuLGEsbz1lLmluZGV4LHI9dGhpcy5jaGFydDtmb3IoaT0wLG49KHIuZGF0YS5kYXRhc2V0c3x8W10pLmxlbmd0aDtpPG47KytpKShhPXIuZ2V0RGF0YXNldE1ldGEoaSkpLmRhdGFbb10mJihhLmRhdGFbb10uaGlkZGVuPSFhLmRhdGFbb10uaGlkZGVuKTtyLnVwZGF0ZSgpfX0sY3V0b3V0UGVyY2VudGFnZTo1MCxyb3RhdGlvbjotLjUqTWF0aC5QSSxjaXJjdW1mZXJlbmNlOjIqTWF0aC5QSSx0b29sdGlwczp7Y2FsbGJhY2tzOnt0aXRsZTpmdW5jdGlvbigpe3JldHVyblwiXCJ9LGxhYmVsOmZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS5sYWJlbHNbdC5pbmRleF0sbj1cIjogXCIrZS5kYXRhc2V0c1t0LmRhdGFzZXRJbmRleF0uZGF0YVt0LmluZGV4XTtyZXR1cm4gQS5pc0FycmF5KGkpPyhpPWkuc2xpY2UoKSlbMF0rPW46aSs9bixpfX19fSksbi5fc2V0KFwicGllXCIsQS5jbG9uZShuLmRvdWdobnV0KSksbi5fc2V0KFwicGllXCIse2N1dG91dFBlcmNlbnRhZ2U6MH0pLGUuZXhwb3J0cz1mdW5jdGlvbih0KXt0LmNvbnRyb2xsZXJzLmRvdWdobnV0PXQuY29udHJvbGxlcnMucGllPXQuRGF0YXNldENvbnRyb2xsZXIuZXh0ZW5kKHtkYXRhRWxlbWVudFR5cGU6YS5BcmMsbGlua1NjYWxlczpBLm5vb3AsZ2V0UmluZ0luZGV4OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLGk9MDtpPHQ7KytpKXRoaXMuY2hhcnQuaXNEYXRhc2V0VmlzaWJsZShpKSYmKytlO3JldHVybiBlfSx1cGRhdGU6ZnVuY3Rpb24oaSl7dmFyIG49dGhpcyx0PW4uY2hhcnQsZT10LmNoYXJ0QXJlYSxhPXQub3B0aW9ucyxvPWEuZWxlbWVudHMuYXJjLHI9ZS5yaWdodC1lLmxlZnQtby5ib3JkZXJXaWR0aCxzPWUuYm90dG9tLWUudG9wLW8uYm9yZGVyV2lkdGgsbD1NYXRoLm1pbihyLHMpLHU9e3g6MCx5OjB9LGQ9bi5nZXRNZXRhKCksYz1hLmN1dG91dFBlcmNlbnRhZ2UsaD1hLmNpcmN1bWZlcmVuY2U7aWYoaDwyKk1hdGguUEkpe3ZhciBmPWEucm90YXRpb24lKDIqTWF0aC5QSSksZz0oZis9MipNYXRoLlBJKihmPj1NYXRoLlBJPy0xOmY8LU1hdGguUEk/MTowKSkraCxwPU1hdGguY29zKGYpLG09TWF0aC5zaW4oZiksdj1NYXRoLmNvcyhnKSxiPU1hdGguc2luKGcpLHg9Zjw9MCYmMDw9Z3x8Zjw9MipNYXRoLlBJJiYyKk1hdGguUEk8PWcseT1mPD0uNSpNYXRoLlBJJiYuNSpNYXRoLlBJPD1nfHxmPD0yLjUqTWF0aC5QSSYmMi41Kk1hdGguUEk8PWcsaz1mPD0tTWF0aC5QSSYmLU1hdGguUEk8PWd8fGY8PU1hdGguUEkmJk1hdGguUEk8PWcsTT1mPD0uNSotTWF0aC5QSSYmLjUqLU1hdGguUEk8PWd8fGY8PTEuNSpNYXRoLlBJJiYxLjUqTWF0aC5QSTw9Zyx3PWMvMTAwLEM9az8tMTpNYXRoLm1pbihwKihwPDA/MTp3KSx2Kih2PDA/MTp3KSksUz1NPy0xOk1hdGgubWluKG0qKG08MD8xOncpLGIqKGI8MD8xOncpKSxfPXg/MTpNYXRoLm1heChwKigwPHA/MTp3KSx2KigwPHY/MTp3KSksRD15PzE6TWF0aC5tYXgobSooMDxtPzE6dyksYiooMDxiPzE6dykpLFA9LjUqKF8tQyksST0uNSooRC1TKTtsPU1hdGgubWluKHIvUCxzL0kpLHU9e3g6LS41KihfK0MpLHk6LS41KihEK1MpfX10LmJvcmRlcldpZHRoPW4uZ2V0TWF4Qm9yZGVyV2lkdGgoZC5kYXRhKSx0Lm91dGVyUmFkaXVzPU1hdGgubWF4KChsLXQuYm9yZGVyV2lkdGgpLzIsMCksdC5pbm5lclJhZGl1cz1NYXRoLm1heChjP3Qub3V0ZXJSYWRpdXMvMTAwKmM6MCwwKSx0LnJhZGl1c0xlbmd0aD0odC5vdXRlclJhZGl1cy10LmlubmVyUmFkaXVzKS90LmdldFZpc2libGVEYXRhc2V0Q291bnQoKSx0Lm9mZnNldFg9dS54KnQub3V0ZXJSYWRpdXMsdC5vZmZzZXRZPXUueSp0Lm91dGVyUmFkaXVzLGQudG90YWw9bi5jYWxjdWxhdGVUb3RhbCgpLG4ub3V0ZXJSYWRpdXM9dC5vdXRlclJhZGl1cy10LnJhZGl1c0xlbmd0aCpuLmdldFJpbmdJbmRleChuLmluZGV4KSxuLmlubmVyUmFkaXVzPU1hdGgubWF4KG4ub3V0ZXJSYWRpdXMtdC5yYWRpdXNMZW5ndGgsMCksQS5lYWNoKGQuZGF0YSxmdW5jdGlvbih0LGUpe24udXBkYXRlRWxlbWVudCh0LGUsaSl9KX0sdXBkYXRlRWxlbWVudDpmdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcyxhPW4uY2hhcnQsbz1hLmNoYXJ0QXJlYSxyPWEub3B0aW9ucyxzPXIuYW5pbWF0aW9uLGw9KG8ubGVmdCtvLnJpZ2h0KS8yLHU9KG8udG9wK28uYm90dG9tKS8yLGQ9ci5yb3RhdGlvbixjPXIucm90YXRpb24saD1uLmdldERhdGFzZXQoKSxmPWkmJnMuYW5pbWF0ZVJvdGF0ZT8wOnQuaGlkZGVuPzA6bi5jYWxjdWxhdGVDaXJjdW1mZXJlbmNlKGguZGF0YVtlXSkqKHIuY2lyY3VtZmVyZW5jZS8oMipNYXRoLlBJKSksZz1pJiZzLmFuaW1hdGVTY2FsZT8wOm4uaW5uZXJSYWRpdXMscD1pJiZzLmFuaW1hdGVTY2FsZT8wOm4ub3V0ZXJSYWRpdXMsbT1BLnZhbHVlQXRJbmRleE9yRGVmYXVsdDtBLmV4dGVuZCh0LHtfZGF0YXNldEluZGV4Om4uaW5kZXgsX2luZGV4OmUsX21vZGVsOnt4OmwrYS5vZmZzZXRYLHk6dSthLm9mZnNldFksc3RhcnRBbmdsZTpkLGVuZEFuZ2xlOmMsY2lyY3VtZmVyZW5jZTpmLG91dGVyUmFkaXVzOnAsaW5uZXJSYWRpdXM6ZyxsYWJlbDptKGgubGFiZWwsZSxhLmRhdGEubGFiZWxzW2VdKX19KTt2YXIgdj10Ll9tb2RlbCxiPXQuY3VzdG9tfHx7fSx4PUEudmFsdWVBdEluZGV4T3JEZWZhdWx0LHk9dGhpcy5jaGFydC5vcHRpb25zLmVsZW1lbnRzLmFyYzt2LmJhY2tncm91bmRDb2xvcj1iLmJhY2tncm91bmRDb2xvcj9iLmJhY2tncm91bmRDb2xvcjp4KGguYmFja2dyb3VuZENvbG9yLGUseS5iYWNrZ3JvdW5kQ29sb3IpLHYuYm9yZGVyQ29sb3I9Yi5ib3JkZXJDb2xvcj9iLmJvcmRlckNvbG9yOngoaC5ib3JkZXJDb2xvcixlLHkuYm9yZGVyQ29sb3IpLHYuYm9yZGVyV2lkdGg9Yi5ib3JkZXJXaWR0aD9iLmJvcmRlcldpZHRoOngoaC5ib3JkZXJXaWR0aCxlLHkuYm9yZGVyV2lkdGgpLGkmJnMuYW5pbWF0ZVJvdGF0ZXx8KHYuc3RhcnRBbmdsZT0wPT09ZT9yLnJvdGF0aW9uOm4uZ2V0TWV0YSgpLmRhdGFbZS0xXS5fbW9kZWwuZW5kQW5nbGUsdi5lbmRBbmdsZT12LnN0YXJ0QW5nbGUrdi5jaXJjdW1mZXJlbmNlKSx0LnBpdm90KCl9LGNhbGN1bGF0ZVRvdGFsOmZ1bmN0aW9uKCl7dmFyIGksbj10aGlzLmdldERhdGFzZXQoKSx0PXRoaXMuZ2V0TWV0YSgpLGE9MDtyZXR1cm4gQS5lYWNoKHQuZGF0YSxmdW5jdGlvbih0LGUpe2k9bi5kYXRhW2VdLGlzTmFOKGkpfHx0LmhpZGRlbnx8KGErPU1hdGguYWJzKGkpKX0pLGF9LGNhbGN1bGF0ZUNpcmN1bWZlcmVuY2U6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRNZXRhKCkudG90YWw7cmV0dXJuIDA8ZSYmIWlzTmFOKHQpPzIqTWF0aC5QSSooTWF0aC5hYnModCkvZSk6MH0sZ2V0TWF4Qm9yZGVyV2lkdGg6ZnVuY3Rpb24odCl7Zm9yKHZhciBlLGksbj0wLGE9dGhpcy5pbmRleCxvPXQubGVuZ3RoLHI9MDtyPG87cisrKW49KG49bjwoZT10W3JdLl9tb2RlbD90W3JdLl9tb2RlbC5ib3JkZXJXaWR0aDowKT9lOm4pPChpPXRbcl0uX2NoYXJ0P3Rbcl0uX2NoYXJ0LmNvbmZpZy5kYXRhLmRhdGFzZXRzW2FdLmhvdmVyQm9yZGVyV2lkdGg6MCk/aTpuO3JldHVybiBufX0pfX0sezI2OjI2LDQxOjQxLDQ2OjQ2fV0sMTg6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10KDI2KSxhPXQoNDEpLGc9dCg0Nik7bi5fc2V0KFwibGluZVwiLHtzaG93TGluZXM6ITAsc3BhbkdhcHM6ITEsaG92ZXI6e21vZGU6XCJsYWJlbFwifSxzY2FsZXM6e3hBeGVzOlt7dHlwZTpcImNhdGVnb3J5XCIsaWQ6XCJ4LWF4aXMtMFwifV0seUF4ZXM6W3t0eXBlOlwibGluZWFyXCIsaWQ6XCJ5LWF4aXMtMFwifV19fSksZS5leHBvcnRzPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGYodCxlKXtyZXR1cm4gZy52YWx1ZU9yRGVmYXVsdCh0LnNob3dMaW5lLGUuc2hvd0xpbmVzKX10LmNvbnRyb2xsZXJzLmxpbmU9dC5EYXRhc2V0Q29udHJvbGxlci5leHRlbmQoe2RhdGFzZXRFbGVtZW50VHlwZTphLkxpbmUsZGF0YUVsZW1lbnRUeXBlOmEuUG9pbnQsdXBkYXRlOmZ1bmN0aW9uKHQpe3ZhciBlLGksbixhPXRoaXMsbz1hLmdldE1ldGEoKSxyPW8uZGF0YXNldCxzPW8uZGF0YXx8W10sbD1hLmNoYXJ0Lm9wdGlvbnMsdT1sLmVsZW1lbnRzLmxpbmUsZD1hLmdldFNjYWxlRm9ySWQoby55QXhpc0lEKSxjPWEuZ2V0RGF0YXNldCgpLGg9ZihjLGwpO2ZvcihoJiYobj1yLmN1c3RvbXx8e30sdm9pZCAwIT09Yy50ZW5zaW9uJiZ2b2lkIDA9PT1jLmxpbmVUZW5zaW9uJiYoYy5saW5lVGVuc2lvbj1jLnRlbnNpb24pLHIuX3NjYWxlPWQsci5fZGF0YXNldEluZGV4PWEuaW5kZXgsci5fY2hpbGRyZW49cyxyLl9tb2RlbD17c3BhbkdhcHM6Yy5zcGFuR2Fwcz9jLnNwYW5HYXBzOmwuc3BhbkdhcHMsdGVuc2lvbjpuLnRlbnNpb24/bi50ZW5zaW9uOmcudmFsdWVPckRlZmF1bHQoYy5saW5lVGVuc2lvbix1LnRlbnNpb24pLGJhY2tncm91bmRDb2xvcjpuLmJhY2tncm91bmRDb2xvcj9uLmJhY2tncm91bmRDb2xvcjpjLmJhY2tncm91bmRDb2xvcnx8dS5iYWNrZ3JvdW5kQ29sb3IsYm9yZGVyV2lkdGg6bi5ib3JkZXJXaWR0aD9uLmJvcmRlcldpZHRoOmMuYm9yZGVyV2lkdGh8fHUuYm9yZGVyV2lkdGgsYm9yZGVyQ29sb3I6bi5ib3JkZXJDb2xvcj9uLmJvcmRlckNvbG9yOmMuYm9yZGVyQ29sb3J8fHUuYm9yZGVyQ29sb3IsYm9yZGVyQ2FwU3R5bGU6bi5ib3JkZXJDYXBTdHlsZT9uLmJvcmRlckNhcFN0eWxlOmMuYm9yZGVyQ2FwU3R5bGV8fHUuYm9yZGVyQ2FwU3R5bGUsYm9yZGVyRGFzaDpuLmJvcmRlckRhc2g/bi5ib3JkZXJEYXNoOmMuYm9yZGVyRGFzaHx8dS5ib3JkZXJEYXNoLGJvcmRlckRhc2hPZmZzZXQ6bi5ib3JkZXJEYXNoT2Zmc2V0P24uYm9yZGVyRGFzaE9mZnNldDpjLmJvcmRlckRhc2hPZmZzZXR8fHUuYm9yZGVyRGFzaE9mZnNldCxib3JkZXJKb2luU3R5bGU6bi5ib3JkZXJKb2luU3R5bGU/bi5ib3JkZXJKb2luU3R5bGU6Yy5ib3JkZXJKb2luU3R5bGV8fHUuYm9yZGVySm9pblN0eWxlLGZpbGw6bi5maWxsP24uZmlsbDp2b2lkIDAhPT1jLmZpbGw/Yy5maWxsOnUuZmlsbCxzdGVwcGVkTGluZTpuLnN0ZXBwZWRMaW5lP24uc3RlcHBlZExpbmU6Zy52YWx1ZU9yRGVmYXVsdChjLnN0ZXBwZWRMaW5lLHUuc3RlcHBlZCksY3ViaWNJbnRlcnBvbGF0aW9uTW9kZTpuLmN1YmljSW50ZXJwb2xhdGlvbk1vZGU/bi5jdWJpY0ludGVycG9sYXRpb25Nb2RlOmcudmFsdWVPckRlZmF1bHQoYy5jdWJpY0ludGVycG9sYXRpb25Nb2RlLHUuY3ViaWNJbnRlcnBvbGF0aW9uTW9kZSl9LHIucGl2b3QoKSksZT0wLGk9cy5sZW5ndGg7ZTxpOysrZSlhLnVwZGF0ZUVsZW1lbnQoc1tlXSxlLHQpO2ZvcihoJiYwIT09ci5fbW9kZWwudGVuc2lvbiYmYS51cGRhdGVCZXppZXJDb250cm9sUG9pbnRzKCksZT0wLGk9cy5sZW5ndGg7ZTxpOysrZSlzW2VdLnBpdm90KCl9LGdldFBvaW50QmFja2dyb3VuZENvbG9yOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5jaGFydC5vcHRpb25zLmVsZW1lbnRzLnBvaW50LmJhY2tncm91bmRDb2xvcixuPXRoaXMuZ2V0RGF0YXNldCgpLGE9dC5jdXN0b218fHt9O3JldHVybiBhLmJhY2tncm91bmRDb2xvcj9pPWEuYmFja2dyb3VuZENvbG9yOm4ucG9pbnRCYWNrZ3JvdW5kQ29sb3I/aT1nLnZhbHVlQXRJbmRleE9yRGVmYXVsdChuLnBvaW50QmFja2dyb3VuZENvbG9yLGUsaSk6bi5iYWNrZ3JvdW5kQ29sb3ImJihpPW4uYmFja2dyb3VuZENvbG9yKSxpfSxnZXRQb2ludEJvcmRlckNvbG9yOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5jaGFydC5vcHRpb25zLmVsZW1lbnRzLnBvaW50LmJvcmRlckNvbG9yLG49dGhpcy5nZXREYXRhc2V0KCksYT10LmN1c3RvbXx8e307cmV0dXJuIGEuYm9yZGVyQ29sb3I/aT1hLmJvcmRlckNvbG9yOm4ucG9pbnRCb3JkZXJDb2xvcj9pPWcudmFsdWVBdEluZGV4T3JEZWZhdWx0KG4ucG9pbnRCb3JkZXJDb2xvcixlLGkpOm4uYm9yZGVyQ29sb3ImJihpPW4uYm9yZGVyQ29sb3IpLGl9LGdldFBvaW50Qm9yZGVyV2lkdGg6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmNoYXJ0Lm9wdGlvbnMuZWxlbWVudHMucG9pbnQuYm9yZGVyV2lkdGgsbj10aGlzLmdldERhdGFzZXQoKSxhPXQuY3VzdG9tfHx7fTtyZXR1cm4gaXNOYU4oYS5ib3JkZXJXaWR0aCk/IWlzTmFOKG4ucG9pbnRCb3JkZXJXaWR0aCl8fGcuaXNBcnJheShuLnBvaW50Qm9yZGVyV2lkdGgpP2k9Zy52YWx1ZUF0SW5kZXhPckRlZmF1bHQobi5wb2ludEJvcmRlcldpZHRoLGUsaSk6aXNOYU4obi5ib3JkZXJXaWR0aCl8fChpPW4uYm9yZGVyV2lkdGgpOmk9YS5ib3JkZXJXaWR0aCxpfSxnZXRQb2ludFJvdGF0aW9uOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5jaGFydC5vcHRpb25zLmVsZW1lbnRzLnBvaW50LnJvdGF0aW9uLG49dGhpcy5nZXREYXRhc2V0KCksYT10LmN1c3RvbXx8e307cmV0dXJuIGlzTmFOKGEucm90YXRpb24pP2lzTmFOKG4ucG9pbnRSb3RhdGlvbikmJiFnLmlzQXJyYXkobi5wb2ludFJvdGF0aW9uKXx8KGk9Zy52YWx1ZUF0SW5kZXhPckRlZmF1bHQobi5wb2ludFJvdGF0aW9uLGUsaSkpOmk9YS5yb3RhdGlvbixpfSx1cGRhdGVFbGVtZW50OmZ1bmN0aW9uKHQsZSxpKXt2YXIgbixhLG89dGhpcyxyPW8uZ2V0TWV0YSgpLHM9dC5jdXN0b218fHt9LGw9by5nZXREYXRhc2V0KCksdT1vLmluZGV4LGQ9bC5kYXRhW2VdLGM9by5nZXRTY2FsZUZvcklkKHIueUF4aXNJRCksaD1vLmdldFNjYWxlRm9ySWQoci54QXhpc0lEKSxmPW8uY2hhcnQub3B0aW9ucy5lbGVtZW50cy5wb2ludDt2b2lkIDAhPT1sLnJhZGl1cyYmdm9pZCAwPT09bC5wb2ludFJhZGl1cyYmKGwucG9pbnRSYWRpdXM9bC5yYWRpdXMpLHZvaWQgMCE9PWwuaGl0UmFkaXVzJiZ2b2lkIDA9PT1sLnBvaW50SGl0UmFkaXVzJiYobC5wb2ludEhpdFJhZGl1cz1sLmhpdFJhZGl1cyksbj1oLmdldFBpeGVsRm9yVmFsdWUoXCJvYmplY3RcIj09dHlwZW9mIGQ/ZDpOYU4sZSx1KSxhPWk/Yy5nZXRCYXNlUGl4ZWwoKTpvLmNhbGN1bGF0ZVBvaW50WShkLGUsdSksdC5feFNjYWxlPWgsdC5feVNjYWxlPWMsdC5fZGF0YXNldEluZGV4PXUsdC5faW5kZXg9ZSx0Ll9tb2RlbD17eDpuLHk6YSxza2lwOnMuc2tpcHx8aXNOYU4obil8fGlzTmFOKGEpLHJhZGl1czpzLnJhZGl1c3x8Zy52YWx1ZUF0SW5kZXhPckRlZmF1bHQobC5wb2ludFJhZGl1cyxlLGYucmFkaXVzKSxwb2ludFN0eWxlOnMucG9pbnRTdHlsZXx8Zy52YWx1ZUF0SW5kZXhPckRlZmF1bHQobC5wb2ludFN0eWxlLGUsZi5wb2ludFN0eWxlKSxyb3RhdGlvbjpvLmdldFBvaW50Um90YXRpb24odCxlKSxiYWNrZ3JvdW5kQ29sb3I6by5nZXRQb2ludEJhY2tncm91bmRDb2xvcih0LGUpLGJvcmRlckNvbG9yOm8uZ2V0UG9pbnRCb3JkZXJDb2xvcih0LGUpLGJvcmRlcldpZHRoOm8uZ2V0UG9pbnRCb3JkZXJXaWR0aCh0LGUpLHRlbnNpb246ci5kYXRhc2V0Ll9tb2RlbD9yLmRhdGFzZXQuX21vZGVsLnRlbnNpb246MCxzdGVwcGVkTGluZTohIXIuZGF0YXNldC5fbW9kZWwmJnIuZGF0YXNldC5fbW9kZWwuc3RlcHBlZExpbmUsaGl0UmFkaXVzOnMuaGl0UmFkaXVzfHxnLnZhbHVlQXRJbmRleE9yRGVmYXVsdChsLnBvaW50SGl0UmFkaXVzLGUsZi5oaXRSYWRpdXMpfX0sY2FsY3VsYXRlUG9pbnRZOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbixhLG8scj10aGlzLmNoYXJ0LHM9dGhpcy5nZXRNZXRhKCksbD10aGlzLmdldFNjYWxlRm9ySWQocy55QXhpc0lEKSx1PTAsZD0wO2lmKGwub3B0aW9ucy5zdGFja2VkKXtmb3Iobj0wO248aTtuKyspaWYoYT1yLmRhdGEuZGF0YXNldHNbbl0sXCJsaW5lXCI9PT0obz1yLmdldERhdGFzZXRNZXRhKG4pKS50eXBlJiZvLnlBeGlzSUQ9PT1sLmlkJiZyLmlzRGF0YXNldFZpc2libGUobikpe3ZhciBjPU51bWJlcihsLmdldFJpZ2h0VmFsdWUoYS5kYXRhW2VdKSk7YzwwP2QrPWN8fDA6dSs9Y3x8MH12YXIgaD1OdW1iZXIobC5nZXRSaWdodFZhbHVlKHQpKTtyZXR1cm4gaDwwP2wuZ2V0UGl4ZWxGb3JWYWx1ZShkK2gpOmwuZ2V0UGl4ZWxGb3JWYWx1ZSh1K2gpfXJldHVybiBsLmdldFBpeGVsRm9yVmFsdWUodCl9LHVwZGF0ZUJlemllckNvbnRyb2xQb2ludHM6ZnVuY3Rpb24oKXt2YXIgdCxlLGksbixhPXRoaXMuZ2V0TWV0YSgpLG89dGhpcy5jaGFydC5jaGFydEFyZWEscj1hLmRhdGF8fFtdO2Z1bmN0aW9uIHModCxlLGkpe3JldHVybiBNYXRoLm1heChNYXRoLm1pbih0LGkpLGUpfWlmKGEuZGF0YXNldC5fbW9kZWwuc3BhbkdhcHMmJihyPXIuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiF0Ll9tb2RlbC5za2lwfSkpLFwibW9ub3RvbmVcIj09PWEuZGF0YXNldC5fbW9kZWwuY3ViaWNJbnRlcnBvbGF0aW9uTW9kZSlnLnNwbGluZUN1cnZlTW9ub3RvbmUocik7ZWxzZSBmb3IodD0wLGU9ci5sZW5ndGg7dDxlOysrdClpPXJbdF0uX21vZGVsLG49Zy5zcGxpbmVDdXJ2ZShnLnByZXZpb3VzSXRlbShyLHQpLl9tb2RlbCxpLGcubmV4dEl0ZW0ocix0KS5fbW9kZWwsYS5kYXRhc2V0Ll9tb2RlbC50ZW5zaW9uKSxpLmNvbnRyb2xQb2ludFByZXZpb3VzWD1uLnByZXZpb3VzLngsaS5jb250cm9sUG9pbnRQcmV2aW91c1k9bi5wcmV2aW91cy55LGkuY29udHJvbFBvaW50TmV4dFg9bi5uZXh0LngsaS5jb250cm9sUG9pbnROZXh0WT1uLm5leHQueTtpZih0aGlzLmNoYXJ0Lm9wdGlvbnMuZWxlbWVudHMubGluZS5jYXBCZXppZXJQb2ludHMpZm9yKHQ9MCxlPXIubGVuZ3RoO3Q8ZTsrK3QpKGk9clt0XS5fbW9kZWwpLmNvbnRyb2xQb2ludFByZXZpb3VzWD1zKGkuY29udHJvbFBvaW50UHJldmlvdXNYLG8ubGVmdCxvLnJpZ2h0KSxpLmNvbnRyb2xQb2ludFByZXZpb3VzWT1zKGkuY29udHJvbFBvaW50UHJldmlvdXNZLG8udG9wLG8uYm90dG9tKSxpLmNvbnRyb2xQb2ludE5leHRYPXMoaS5jb250cm9sUG9pbnROZXh0WCxvLmxlZnQsby5yaWdodCksaS5jb250cm9sUG9pbnROZXh0WT1zKGkuY29udHJvbFBvaW50TmV4dFksby50b3Asby5ib3R0b20pfSxkcmF3OmZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLmNoYXJ0LGk9dGhpcy5nZXRNZXRhKCksbj1pLmRhdGF8fFtdLGE9ZS5jaGFydEFyZWEsbz1uLmxlbmd0aCxyPTA7Zm9yKGYodGhpcy5nZXREYXRhc2V0KCksZS5vcHRpb25zKSYmKHQ9KGkuZGF0YXNldC5fbW9kZWwuYm9yZGVyV2lkdGh8fDApLzIsZy5jYW52YXMuY2xpcEFyZWEoZS5jdHgse2xlZnQ6YS5sZWZ0LHJpZ2h0OmEucmlnaHQsdG9wOmEudG9wLXQsYm90dG9tOmEuYm90dG9tK3R9KSxpLmRhdGFzZXQuZHJhdygpLGcuY2FudmFzLnVuY2xpcEFyZWEoZS5jdHgpKTtyPG87KytyKW5bcl0uZHJhdyhhKX0sc2V0SG92ZXJTdHlsZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmNoYXJ0LmRhdGEuZGF0YXNldHNbdC5fZGF0YXNldEluZGV4XSxpPXQuX2luZGV4LG49dC5jdXN0b218fHt9LGE9dC5fbW9kZWw7dC4kcHJldmlvdXNTdHlsZT17YmFja2dyb3VuZENvbG9yOmEuYmFja2dyb3VuZENvbG9yLGJvcmRlckNvbG9yOmEuYm9yZGVyQ29sb3IsYm9yZGVyV2lkdGg6YS5ib3JkZXJXaWR0aCxyYWRpdXM6YS5yYWRpdXN9LGEuYmFja2dyb3VuZENvbG9yPW4uaG92ZXJCYWNrZ3JvdW5kQ29sb3J8fGcudmFsdWVBdEluZGV4T3JEZWZhdWx0KGUucG9pbnRIb3ZlckJhY2tncm91bmRDb2xvcixpLGcuZ2V0SG92ZXJDb2xvcihhLmJhY2tncm91bmRDb2xvcikpLGEuYm9yZGVyQ29sb3I9bi5ob3ZlckJvcmRlckNvbG9yfHxnLnZhbHVlQXRJbmRleE9yRGVmYXVsdChlLnBvaW50SG92ZXJCb3JkZXJDb2xvcixpLGcuZ2V0SG92ZXJDb2xvcihhLmJvcmRlckNvbG9yKSksYS5ib3JkZXJXaWR0aD1uLmhvdmVyQm9yZGVyV2lkdGh8fGcudmFsdWVBdEluZGV4T3JEZWZhdWx0KGUucG9pbnRIb3ZlckJvcmRlcldpZHRoLGksYS5ib3JkZXJXaWR0aCksYS5yYWRpdXM9bi5ob3ZlclJhZGl1c3x8Zy52YWx1ZUF0SW5kZXhPckRlZmF1bHQoZS5wb2ludEhvdmVyUmFkaXVzLGksdGhpcy5jaGFydC5vcHRpb25zLmVsZW1lbnRzLnBvaW50LmhvdmVyUmFkaXVzKX19KX19LHsyNjoyNiw0MTo0MSw0Njo0Nn1dLDE5OltmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dCgyNiksYT10KDQxKSxrPXQoNDYpO24uX3NldChcInBvbGFyQXJlYVwiLHtzY2FsZTp7dHlwZTpcInJhZGlhbExpbmVhclwiLGFuZ2xlTGluZXM6e2Rpc3BsYXk6ITF9LGdyaWRMaW5lczp7Y2lyY3VsYXI6ITB9LHBvaW50TGFiZWxzOntkaXNwbGF5OiExfSx0aWNrczp7YmVnaW5BdFplcm86ITB9fSxhbmltYXRpb246e2FuaW1hdGVSb3RhdGU6ITAsYW5pbWF0ZVNjYWxlOiEwfSxzdGFydEFuZ2xlOi0uNSpNYXRoLlBJLGxlZ2VuZENhbGxiYWNrOmZ1bmN0aW9uKHQpe3ZhciBlPVtdO2UucHVzaCgnPHVsIGNsYXNzPVwiJyt0LmlkKyctbGVnZW5kXCI+Jyk7dmFyIGk9dC5kYXRhLG49aS5kYXRhc2V0cyxhPWkubGFiZWxzO2lmKG4ubGVuZ3RoKWZvcih2YXIgbz0wO288blswXS5kYXRhLmxlbmd0aDsrK28pZS5wdXNoKCc8bGk+PHNwYW4gc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOicrblswXS5iYWNrZ3JvdW5kQ29sb3Jbb10rJ1wiPjwvc3Bhbj4nKSxhW29dJiZlLnB1c2goYVtvXSksZS5wdXNoKFwiPC9saT5cIik7cmV0dXJuIGUucHVzaChcIjwvdWw+XCIpLGUuam9pbihcIlwiKX0sbGVnZW5kOntsYWJlbHM6e2dlbmVyYXRlTGFiZWxzOmZ1bmN0aW9uKHMpe3ZhciBsPXMuZGF0YTtyZXR1cm4gbC5sYWJlbHMubGVuZ3RoJiZsLmRhdGFzZXRzLmxlbmd0aD9sLmxhYmVscy5tYXAoZnVuY3Rpb24odCxlKXt2YXIgaT1zLmdldERhdGFzZXRNZXRhKDApLG49bC5kYXRhc2V0c1swXSxhPWkuZGF0YVtlXS5jdXN0b218fHt9LG89ay52YWx1ZUF0SW5kZXhPckRlZmF1bHQscj1zLm9wdGlvbnMuZWxlbWVudHMuYXJjO3JldHVybnt0ZXh0OnQsZmlsbFN0eWxlOmEuYmFja2dyb3VuZENvbG9yP2EuYmFja2dyb3VuZENvbG9yOm8obi5iYWNrZ3JvdW5kQ29sb3IsZSxyLmJhY2tncm91bmRDb2xvciksc3Ryb2tlU3R5bGU6YS5ib3JkZXJDb2xvcj9hLmJvcmRlckNvbG9yOm8obi5ib3JkZXJDb2xvcixlLHIuYm9yZGVyQ29sb3IpLGxpbmVXaWR0aDphLmJvcmRlcldpZHRoP2EuYm9yZGVyV2lkdGg6byhuLmJvcmRlcldpZHRoLGUsci5ib3JkZXJXaWR0aCksaGlkZGVuOmlzTmFOKG4uZGF0YVtlXSl8fGkuZGF0YVtlXS5oaWRkZW4saW5kZXg6ZX19KTpbXX19LG9uQ2xpY2s6ZnVuY3Rpb24odCxlKXt2YXIgaSxuLGEsbz1lLmluZGV4LHI9dGhpcy5jaGFydDtmb3IoaT0wLG49KHIuZGF0YS5kYXRhc2V0c3x8W10pLmxlbmd0aDtpPG47KytpKShhPXIuZ2V0RGF0YXNldE1ldGEoaSkpLmRhdGFbb10uaGlkZGVuPSFhLmRhdGFbb10uaGlkZGVuO3IudXBkYXRlKCl9fSx0b29sdGlwczp7Y2FsbGJhY2tzOnt0aXRsZTpmdW5jdGlvbigpe3JldHVyblwiXCJ9LGxhYmVsOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUubGFiZWxzW3QuaW5kZXhdK1wiOiBcIit0LnlMYWJlbH19fX0pLGUuZXhwb3J0cz1mdW5jdGlvbih0KXt0LmNvbnRyb2xsZXJzLnBvbGFyQXJlYT10LkRhdGFzZXRDb250cm9sbGVyLmV4dGVuZCh7ZGF0YUVsZW1lbnRUeXBlOmEuQXJjLGxpbmtTY2FsZXM6ay5ub29wLHVwZGF0ZTpmdW5jdGlvbihpKXt2YXIgdCxlLG4sYT10aGlzLG89YS5nZXREYXRhc2V0KCkscj1hLmdldE1ldGEoKSxzPWEuY2hhcnQub3B0aW9ucy5zdGFydEFuZ2xlfHwwLGw9YS5fc3RhcnRzPVtdLHU9YS5fYW5nbGVzPVtdO2ZvcihhLl91cGRhdGVSYWRpdXMoKSxyLmNvdW50PWEuY291bnRWaXNpYmxlRWxlbWVudHMoKSx0PTAsZT1vLmRhdGEubGVuZ3RoO3Q8ZTt0KyspbFt0XT1zLG49YS5fY29tcHV0ZUFuZ2xlKHQpLHMrPXVbdF09bjtrLmVhY2goci5kYXRhLGZ1bmN0aW9uKHQsZSl7YS51cGRhdGVFbGVtZW50KHQsZSxpKX0pfSxfdXBkYXRlUmFkaXVzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXQuY2hhcnQsaT1lLmNoYXJ0QXJlYSxuPWUub3B0aW9ucyxhPW4uZWxlbWVudHMuYXJjLG89TWF0aC5taW4oaS5yaWdodC1pLmxlZnQsaS5ib3R0b20taS50b3ApO2Uub3V0ZXJSYWRpdXM9TWF0aC5tYXgoKG8tYS5ib3JkZXJXaWR0aC8yKS8yLDApLGUuaW5uZXJSYWRpdXM9TWF0aC5tYXgobi5jdXRvdXRQZXJjZW50YWdlP2Uub3V0ZXJSYWRpdXMvMTAwKm4uY3V0b3V0UGVyY2VudGFnZToxLDApLGUucmFkaXVzTGVuZ3RoPShlLm91dGVyUmFkaXVzLWUuaW5uZXJSYWRpdXMpL2UuZ2V0VmlzaWJsZURhdGFzZXRDb3VudCgpLHQub3V0ZXJSYWRpdXM9ZS5vdXRlclJhZGl1cy1lLnJhZGl1c0xlbmd0aCp0LmluZGV4LHQuaW5uZXJSYWRpdXM9dC5vdXRlclJhZGl1cy1lLnJhZGl1c0xlbmd0aH0sdXBkYXRlRWxlbWVudDpmdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcyxhPW4uY2hhcnQsbz1uLmdldERhdGFzZXQoKSxyPWEub3B0aW9ucyxzPXIuYW5pbWF0aW9uLGw9YS5zY2FsZSx1PWEuZGF0YS5sYWJlbHMsZD1sLnhDZW50ZXIsYz1sLnlDZW50ZXIsaD1yLnN0YXJ0QW5nbGUsZj10LmhpZGRlbj8wOmwuZ2V0RGlzdGFuY2VGcm9tQ2VudGVyRm9yVmFsdWUoby5kYXRhW2VdKSxnPW4uX3N0YXJ0c1tlXSxwPWcrKHQuaGlkZGVuPzA6bi5fYW5nbGVzW2VdKSxtPXMuYW5pbWF0ZVNjYWxlPzA6bC5nZXREaXN0YW5jZUZyb21DZW50ZXJGb3JWYWx1ZShvLmRhdGFbZV0pO2suZXh0ZW5kKHQse19kYXRhc2V0SW5kZXg6bi5pbmRleCxfaW5kZXg6ZSxfc2NhbGU6bCxfbW9kZWw6e3g6ZCx5OmMsaW5uZXJSYWRpdXM6MCxvdXRlclJhZGl1czppP206ZixzdGFydEFuZ2xlOmkmJnMuYW5pbWF0ZVJvdGF0ZT9oOmcsZW5kQW5nbGU6aSYmcy5hbmltYXRlUm90YXRlP2g6cCxsYWJlbDprLnZhbHVlQXRJbmRleE9yRGVmYXVsdCh1LGUsdVtlXSl9fSk7dmFyIHY9dGhpcy5jaGFydC5vcHRpb25zLmVsZW1lbnRzLmFyYyxiPXQuY3VzdG9tfHx7fSx4PWsudmFsdWVBdEluZGV4T3JEZWZhdWx0LHk9dC5fbW9kZWw7eS5iYWNrZ3JvdW5kQ29sb3I9Yi5iYWNrZ3JvdW5kQ29sb3I/Yi5iYWNrZ3JvdW5kQ29sb3I6eChvLmJhY2tncm91bmRDb2xvcixlLHYuYmFja2dyb3VuZENvbG9yKSx5LmJvcmRlckNvbG9yPWIuYm9yZGVyQ29sb3I/Yi5ib3JkZXJDb2xvcjp4KG8uYm9yZGVyQ29sb3IsZSx2LmJvcmRlckNvbG9yKSx5LmJvcmRlcldpZHRoPWIuYm9yZGVyV2lkdGg/Yi5ib3JkZXJXaWR0aDp4KG8uYm9yZGVyV2lkdGgsZSx2LmJvcmRlcldpZHRoKSx0LnBpdm90KCl9LGNvdW50VmlzaWJsZUVsZW1lbnRzOmZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5nZXREYXRhc2V0KCksdD10aGlzLmdldE1ldGEoKSxuPTA7cmV0dXJuIGsuZWFjaCh0LmRhdGEsZnVuY3Rpb24odCxlKXtpc05hTihpLmRhdGFbZV0pfHx0LmhpZGRlbnx8bisrfSksbn0sX2NvbXB1dGVBbmdsZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLGk9dGhpcy5nZXRNZXRhKCkuY291bnQsbj1lLmdldERhdGFzZXQoKSxhPWUuZ2V0TWV0YSgpO2lmKGlzTmFOKG4uZGF0YVt0XSl8fGEuZGF0YVt0XS5oaWRkZW4pcmV0dXJuIDA7dmFyIG89e2NoYXJ0OmUuY2hhcnQsZGF0YUluZGV4OnQsZGF0YXNldDpuLGRhdGFzZXRJbmRleDplLmluZGV4fTtyZXR1cm4gay5vcHRpb25zLnJlc29sdmUoW2UuY2hhcnQub3B0aW9ucy5lbGVtZW50cy5hcmMuYW5nbGUsMipNYXRoLlBJL2ldLG8sdCl9fSl9fSx7MjY6MjYsNDE6NDEsNDY6NDZ9XSwyMDpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciBuPXQoMjYpLGE9dCg0MSksdT10KDQ2KTtuLl9zZXQoXCJyYWRhclwiLHtzY2FsZTp7dHlwZTpcInJhZGlhbExpbmVhclwifSxlbGVtZW50czp7bGluZTp7dGVuc2lvbjowfX19KSxlLmV4cG9ydHM9ZnVuY3Rpb24odCl7dC5jb250cm9sbGVycy5yYWRhcj10LkRhdGFzZXRDb250cm9sbGVyLmV4dGVuZCh7ZGF0YXNldEVsZW1lbnRUeXBlOmEuTGluZSxkYXRhRWxlbWVudFR5cGU6YS5Qb2ludCxsaW5rU2NhbGVzOnUubm9vcCx1cGRhdGU6ZnVuY3Rpb24oaSl7dmFyIG49dGhpcyx0PW4uZ2V0TWV0YSgpLGU9dC5kYXRhc2V0LGE9dC5kYXRhLG89ZS5jdXN0b218fHt9LHI9bi5nZXREYXRhc2V0KCkscz1uLmNoYXJ0Lm9wdGlvbnMuZWxlbWVudHMubGluZSxsPW4uY2hhcnQuc2NhbGU7dm9pZCAwIT09ci50ZW5zaW9uJiZ2b2lkIDA9PT1yLmxpbmVUZW5zaW9uJiYoci5saW5lVGVuc2lvbj1yLnRlbnNpb24pLHUuZXh0ZW5kKHQuZGF0YXNldCx7X2RhdGFzZXRJbmRleDpuLmluZGV4LF9zY2FsZTpsLF9jaGlsZHJlbjphLF9sb29wOiEwLF9tb2RlbDp7dGVuc2lvbjpvLnRlbnNpb24/by50ZW5zaW9uOnUudmFsdWVPckRlZmF1bHQoci5saW5lVGVuc2lvbixzLnRlbnNpb24pLGJhY2tncm91bmRDb2xvcjpvLmJhY2tncm91bmRDb2xvcj9vLmJhY2tncm91bmRDb2xvcjpyLmJhY2tncm91bmRDb2xvcnx8cy5iYWNrZ3JvdW5kQ29sb3IsYm9yZGVyV2lkdGg6by5ib3JkZXJXaWR0aD9vLmJvcmRlcldpZHRoOnIuYm9yZGVyV2lkdGh8fHMuYm9yZGVyV2lkdGgsYm9yZGVyQ29sb3I6by5ib3JkZXJDb2xvcj9vLmJvcmRlckNvbG9yOnIuYm9yZGVyQ29sb3J8fHMuYm9yZGVyQ29sb3IsZmlsbDpvLmZpbGw/by5maWxsOnZvaWQgMCE9PXIuZmlsbD9yLmZpbGw6cy5maWxsLGJvcmRlckNhcFN0eWxlOm8uYm9yZGVyQ2FwU3R5bGU/by5ib3JkZXJDYXBTdHlsZTpyLmJvcmRlckNhcFN0eWxlfHxzLmJvcmRlckNhcFN0eWxlLGJvcmRlckRhc2g6by5ib3JkZXJEYXNoP28uYm9yZGVyRGFzaDpyLmJvcmRlckRhc2h8fHMuYm9yZGVyRGFzaCxib3JkZXJEYXNoT2Zmc2V0Om8uYm9yZGVyRGFzaE9mZnNldD9vLmJvcmRlckRhc2hPZmZzZXQ6ci5ib3JkZXJEYXNoT2Zmc2V0fHxzLmJvcmRlckRhc2hPZmZzZXQsYm9yZGVySm9pblN0eWxlOm8uYm9yZGVySm9pblN0eWxlP28uYm9yZGVySm9pblN0eWxlOnIuYm9yZGVySm9pblN0eWxlfHxzLmJvcmRlckpvaW5TdHlsZX19KSx0LmRhdGFzZXQucGl2b3QoKSx1LmVhY2goYSxmdW5jdGlvbih0LGUpe24udXBkYXRlRWxlbWVudCh0LGUsaSl9LG4pLG4udXBkYXRlQmV6aWVyQ29udHJvbFBvaW50cygpfSx1cGRhdGVFbGVtZW50OmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10aGlzLGE9dC5jdXN0b218fHt9LG89bi5nZXREYXRhc2V0KCkscj1uLmNoYXJ0LnNjYWxlLHM9bi5jaGFydC5vcHRpb25zLmVsZW1lbnRzLnBvaW50LGw9ci5nZXRQb2ludFBvc2l0aW9uRm9yVmFsdWUoZSxvLmRhdGFbZV0pO3ZvaWQgMCE9PW8ucmFkaXVzJiZ2b2lkIDA9PT1vLnBvaW50UmFkaXVzJiYoby5wb2ludFJhZGl1cz1vLnJhZGl1cyksdm9pZCAwIT09by5oaXRSYWRpdXMmJnZvaWQgMD09PW8ucG9pbnRIaXRSYWRpdXMmJihvLnBvaW50SGl0UmFkaXVzPW8uaGl0UmFkaXVzKSx1LmV4dGVuZCh0LHtfZGF0YXNldEluZGV4Om4uaW5kZXgsX2luZGV4OmUsX3NjYWxlOnIsX21vZGVsOnt4Omk/ci54Q2VudGVyOmwueCx5Omk/ci55Q2VudGVyOmwueSx0ZW5zaW9uOmEudGVuc2lvbj9hLnRlbnNpb246dS52YWx1ZU9yRGVmYXVsdChvLmxpbmVUZW5zaW9uLG4uY2hhcnQub3B0aW9ucy5lbGVtZW50cy5saW5lLnRlbnNpb24pLHJhZGl1czphLnJhZGl1cz9hLnJhZGl1czp1LnZhbHVlQXRJbmRleE9yRGVmYXVsdChvLnBvaW50UmFkaXVzLGUscy5yYWRpdXMpLGJhY2tncm91bmRDb2xvcjphLmJhY2tncm91bmRDb2xvcj9hLmJhY2tncm91bmRDb2xvcjp1LnZhbHVlQXRJbmRleE9yRGVmYXVsdChvLnBvaW50QmFja2dyb3VuZENvbG9yLGUscy5iYWNrZ3JvdW5kQ29sb3IpLGJvcmRlckNvbG9yOmEuYm9yZGVyQ29sb3I/YS5ib3JkZXJDb2xvcjp1LnZhbHVlQXRJbmRleE9yRGVmYXVsdChvLnBvaW50Qm9yZGVyQ29sb3IsZSxzLmJvcmRlckNvbG9yKSxib3JkZXJXaWR0aDphLmJvcmRlcldpZHRoP2EuYm9yZGVyV2lkdGg6dS52YWx1ZUF0SW5kZXhPckRlZmF1bHQoby5wb2ludEJvcmRlcldpZHRoLGUscy5ib3JkZXJXaWR0aCkscG9pbnRTdHlsZTphLnBvaW50U3R5bGU/YS5wb2ludFN0eWxlOnUudmFsdWVBdEluZGV4T3JEZWZhdWx0KG8ucG9pbnRTdHlsZSxlLHMucG9pbnRTdHlsZSkscm90YXRpb246YS5yb3RhdGlvbj9hLnJvdGF0aW9uOnUudmFsdWVBdEluZGV4T3JEZWZhdWx0KG8ucG9pbnRSb3RhdGlvbixlLHMucm90YXRpb24pLGhpdFJhZGl1czphLmhpdFJhZGl1cz9hLmhpdFJhZGl1czp1LnZhbHVlQXRJbmRleE9yRGVmYXVsdChvLnBvaW50SGl0UmFkaXVzLGUscy5oaXRSYWRpdXMpfX0pLHQuX21vZGVsLnNraXA9YS5za2lwP2Euc2tpcDppc05hTih0Ll9tb2RlbC54KXx8aXNOYU4odC5fbW9kZWwueSl9LHVwZGF0ZUJlemllckNvbnRyb2xQb2ludHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNoYXJ0LmNoYXJ0QXJlYSxvPXRoaXMuZ2V0TWV0YSgpO3UuZWFjaChvLmRhdGEsZnVuY3Rpb24odCxlKXt2YXIgaT10Ll9tb2RlbCxuPXUuc3BsaW5lQ3VydmUodS5wcmV2aW91c0l0ZW0oby5kYXRhLGUsITApLl9tb2RlbCxpLHUubmV4dEl0ZW0oby5kYXRhLGUsITApLl9tb2RlbCxpLnRlbnNpb24pO2kuY29udHJvbFBvaW50UHJldmlvdXNYPU1hdGgubWF4KE1hdGgubWluKG4ucHJldmlvdXMueCxhLnJpZ2h0KSxhLmxlZnQpLGkuY29udHJvbFBvaW50UHJldmlvdXNZPU1hdGgubWF4KE1hdGgubWluKG4ucHJldmlvdXMueSxhLmJvdHRvbSksYS50b3ApLGkuY29udHJvbFBvaW50TmV4dFg9TWF0aC5tYXgoTWF0aC5taW4obi5uZXh0LngsYS5yaWdodCksYS5sZWZ0KSxpLmNvbnRyb2xQb2ludE5leHRZPU1hdGgubWF4KE1hdGgubWluKG4ubmV4dC55LGEuYm90dG9tKSxhLnRvcCksdC5waXZvdCgpfSl9LHNldEhvdmVyU3R5bGU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzW3QuX2RhdGFzZXRJbmRleF0saT10LmN1c3RvbXx8e30sbj10Ll9pbmRleCxhPXQuX21vZGVsO3QuJHByZXZpb3VzU3R5bGU9e2JhY2tncm91bmRDb2xvcjphLmJhY2tncm91bmRDb2xvcixib3JkZXJDb2xvcjphLmJvcmRlckNvbG9yLGJvcmRlcldpZHRoOmEuYm9yZGVyV2lkdGgscmFkaXVzOmEucmFkaXVzfSxhLnJhZGl1cz1pLmhvdmVyUmFkaXVzP2kuaG92ZXJSYWRpdXM6dS52YWx1ZUF0SW5kZXhPckRlZmF1bHQoZS5wb2ludEhvdmVyUmFkaXVzLG4sdGhpcy5jaGFydC5vcHRpb25zLmVsZW1lbnRzLnBvaW50LmhvdmVyUmFkaXVzKSxhLmJhY2tncm91bmRDb2xvcj1pLmhvdmVyQmFja2dyb3VuZENvbG9yP2kuaG92ZXJCYWNrZ3JvdW5kQ29sb3I6dS52YWx1ZUF0SW5kZXhPckRlZmF1bHQoZS5wb2ludEhvdmVyQmFja2dyb3VuZENvbG9yLG4sdS5nZXRIb3ZlckNvbG9yKGEuYmFja2dyb3VuZENvbG9yKSksYS5ib3JkZXJDb2xvcj1pLmhvdmVyQm9yZGVyQ29sb3I/aS5ob3ZlckJvcmRlckNvbG9yOnUudmFsdWVBdEluZGV4T3JEZWZhdWx0KGUucG9pbnRIb3ZlckJvcmRlckNvbG9yLG4sdS5nZXRIb3ZlckNvbG9yKGEuYm9yZGVyQ29sb3IpKSxhLmJvcmRlcldpZHRoPWkuaG92ZXJCb3JkZXJXaWR0aD9pLmhvdmVyQm9yZGVyV2lkdGg6dS52YWx1ZUF0SW5kZXhPckRlZmF1bHQoZS5wb2ludEhvdmVyQm9yZGVyV2lkdGgsbixhLmJvcmRlcldpZHRoKX19KX19LHsyNjoyNiw0MTo0MSw0Njo0Nn1dLDIxOltmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dCgyNikuX3NldChcInNjYXR0ZXJcIix7aG92ZXI6e21vZGU6XCJzaW5nbGVcIn0sc2NhbGVzOnt4QXhlczpbe2lkOlwieC1heGlzLTFcIix0eXBlOlwibGluZWFyXCIscG9zaXRpb246XCJib3R0b21cIn1dLHlBeGVzOlt7aWQ6XCJ5LWF4aXMtMVwiLHR5cGU6XCJsaW5lYXJcIixwb3NpdGlvbjpcImxlZnRcIn1dfSxzaG93TGluZXM6ITEsdG9vbHRpcHM6e2NhbGxiYWNrczp7dGl0bGU6ZnVuY3Rpb24oKXtyZXR1cm5cIlwifSxsYWJlbDpmdW5jdGlvbih0KXtyZXR1cm5cIihcIit0LnhMYWJlbCtcIiwgXCIrdC55TGFiZWwrXCIpXCJ9fX19KSxlLmV4cG9ydHM9ZnVuY3Rpb24odCl7dC5jb250cm9sbGVycy5zY2F0dGVyPXQuY29udHJvbGxlcnMubGluZX19LHsyNjoyNn1dLDIyOltmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dCgyNyk7aT1lLmV4cG9ydHM9bi5leHRlbmQoe2NoYXJ0Om51bGwsY3VycmVudFN0ZXA6MCxudW1TdGVwczo2MCxlYXNpbmc6XCJcIixyZW5kZXI6bnVsbCxvbkFuaW1hdGlvblByb2dyZXNzOm51bGwsb25BbmltYXRpb25Db21wbGV0ZTpudWxsfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiYW5pbWF0aW9uT2JqZWN0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcImNoYXJ0SW5zdGFuY2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hhcnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLmNoYXJ0PXR9fSl9LHsyNzoyN31dLDIzOltmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dCgyNiksbz10KDQ2KTtuLl9zZXQoXCJnbG9iYWxcIix7YW5pbWF0aW9uOntkdXJhdGlvbjoxZTMsZWFzaW5nOlwiZWFzZU91dFF1YXJ0XCIsb25Qcm9ncmVzczpvLm5vb3Asb25Db21wbGV0ZTpvLm5vb3B9fSksZS5leHBvcnRzPXtmcmFtZUR1cmF0aW9uOjE3LGFuaW1hdGlvbnM6W10sZHJvcEZyYW1lczowLHJlcXVlc3Q6bnVsbCxhZGRBbmltYXRpb246ZnVuY3Rpb24odCxlLGksbil7dmFyIGEsbyxyPXRoaXMuYW5pbWF0aW9ucztmb3IoZS5jaGFydD10LG58fCh0LmFuaW1hdGluZz0hMCksYT0wLG89ci5sZW5ndGg7YTxvOysrYSlpZihyW2FdLmNoYXJ0PT09dClyZXR1cm4gdm9pZChyW2FdPWUpO3IucHVzaChlKSwxPT09ci5sZW5ndGgmJnRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCl9LGNhbmNlbEFuaW1hdGlvbjpmdW5jdGlvbihlKXt2YXIgdD1vLmZpbmRJbmRleCh0aGlzLmFuaW1hdGlvbnMsZnVuY3Rpb24odCl7cmV0dXJuIHQuY2hhcnQ9PT1lfSk7LTEhPT10JiYodGhpcy5hbmltYXRpb25zLnNwbGljZSh0LDEpLGUuYW5pbWF0aW5nPSExKX0scmVxdWVzdEFuaW1hdGlvbkZyYW1lOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztudWxsPT09dC5yZXF1ZXN0JiYodC5yZXF1ZXN0PW8ucmVxdWVzdEFuaW1GcmFtZS5jYWxsKHdpbmRvdyxmdW5jdGlvbigpe3QucmVxdWVzdD1udWxsLHQuc3RhcnREaWdlc3QoKX0pKX0sc3RhcnREaWdlc3Q6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9RGF0ZS5ub3coKSxpPTA7MTx0LmRyb3BGcmFtZXMmJihpPU1hdGguZmxvb3IodC5kcm9wRnJhbWVzKSx0LmRyb3BGcmFtZXM9dC5kcm9wRnJhbWVzJTEpLHQuYWR2YW5jZSgxK2kpO3ZhciBuPURhdGUubm93KCk7dC5kcm9wRnJhbWVzKz0obi1lKS90LmZyYW1lRHVyYXRpb24sMDx0LmFuaW1hdGlvbnMubGVuZ3RoJiZ0LnJlcXVlc3RBbmltYXRpb25GcmFtZSgpfSxhZHZhbmNlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxpLG49dGhpcy5hbmltYXRpb25zLGE9MDthPG4ubGVuZ3RoOylpPShlPW5bYV0pLmNoYXJ0LGUuY3VycmVudFN0ZXA9KGUuY3VycmVudFN0ZXB8fDApK3QsZS5jdXJyZW50U3RlcD1NYXRoLm1pbihlLmN1cnJlbnRTdGVwLGUubnVtU3RlcHMpLG8uY2FsbGJhY2soZS5yZW5kZXIsW2ksZV0saSksby5jYWxsYmFjayhlLm9uQW5pbWF0aW9uUHJvZ3Jlc3MsW2VdLGkpLGUuY3VycmVudFN0ZXA+PWUubnVtU3RlcHM/KG8uY2FsbGJhY2soZS5vbkFuaW1hdGlvbkNvbXBsZXRlLFtlXSxpKSxpLmFuaW1hdGluZz0hMSxuLnNwbGljZShhLDEpKTorK2F9fX0sezI2OjI2LDQ2OjQ2fV0sMjQ6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgcz10KDIyKSxsPXQoMjMpLGM9dCgyNiksaD10KDQ2KSxhPXQoMjkpLG89dCgzMSksZj10KDQ5KSxnPXQoMzIpLHA9dCgzNCksbj10KDM2KTtlLmV4cG9ydHM9ZnVuY3Rpb24odSl7ZnVuY3Rpb24gZCh0KXtyZXR1cm5cInRvcFwiPT09dHx8XCJib3R0b21cIj09PXR9dS50eXBlcz17fSx1Lmluc3RhbmNlcz17fSx1LmNvbnRyb2xsZXJzPXt9LGguZXh0ZW5kKHUucHJvdG90eXBlLHtjb25zdHJ1Y3Q6ZnVuY3Rpb24odCxlKXt2YXIgaSxuLGE9dGhpczsobj0oaT0oaT1lKXx8e30pLmRhdGE9aS5kYXRhfHx7fSkuZGF0YXNldHM9bi5kYXRhc2V0c3x8W10sbi5sYWJlbHM9bi5sYWJlbHN8fFtdLGkub3B0aW9ucz1oLmNvbmZpZ01lcmdlKGMuZ2xvYmFsLGNbaS50eXBlXSxpLm9wdGlvbnN8fHt9KSxlPWk7dmFyIG89Zi5hY3F1aXJlQ29udGV4dCh0LGUpLHI9byYmby5jYW52YXMscz1yJiZyLmhlaWdodCxsPXImJnIud2lkdGg7YS5pZD1oLnVpZCgpLGEuY3R4PW8sYS5jYW52YXM9cixhLmNvbmZpZz1lLGEud2lkdGg9bCxhLmhlaWdodD1zLGEuYXNwZWN0UmF0aW89cz9sL3M6bnVsbCxhLm9wdGlvbnM9ZS5vcHRpb25zLGEuX2J1ZmZlcmVkUmVuZGVyPSExLChhLmNoYXJ0PWEpLmNvbnRyb2xsZXI9YSx1Lmluc3RhbmNlc1thLmlkXT1hLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLFwiZGF0YVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYS5jb25maWcuZGF0YX0sc2V0OmZ1bmN0aW9uKHQpe2EuY29uZmlnLmRhdGE9dH19KSxvJiZyPyhhLmluaXRpYWxpemUoKSxhLnVwZGF0ZSgpKTpjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBjaGFydDogY2FuJ3QgYWNxdWlyZSBjb250ZXh0IGZyb20gdGhlIGdpdmVuIGl0ZW1cIil9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiBnLm5vdGlmeSh0LFwiYmVmb3JlSW5pdFwiKSxoLnJldGluYVNjYWxlKHQsdC5vcHRpb25zLmRldmljZVBpeGVsUmF0aW8pLHQuYmluZEV2ZW50cygpLHQub3B0aW9ucy5yZXNwb25zaXZlJiZ0LnJlc2l6ZSghMCksdC5lbnN1cmVTY2FsZXNIYXZlSURzKCksdC5idWlsZE9yVXBkYXRlU2NhbGVzKCksdC5pbml0VG9vbFRpcCgpLGcubm90aWZ5KHQsXCJhZnRlckluaXRcIiksdH0sY2xlYXI6ZnVuY3Rpb24oKXtyZXR1cm4gaC5jYW52YXMuY2xlYXIodGhpcyksdGhpc30sc3RvcDpmdW5jdGlvbigpe3JldHVybiBsLmNhbmNlbEFuaW1hdGlvbih0aGlzKSx0aGlzfSxyZXNpemU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxpPWUub3B0aW9ucyxuPWUuY2FudmFzLGE9aS5tYWludGFpbkFzcGVjdFJhdGlvJiZlLmFzcGVjdFJhdGlvfHxudWxsLG89TWF0aC5tYXgoMCxNYXRoLmZsb29yKGguZ2V0TWF4aW11bVdpZHRoKG4pKSkscj1NYXRoLm1heCgwLE1hdGguZmxvb3IoYT9vL2E6aC5nZXRNYXhpbXVtSGVpZ2h0KG4pKSk7aWYoKGUud2lkdGghPT1vfHxlLmhlaWdodCE9PXIpJiYobi53aWR0aD1lLndpZHRoPW8sbi5oZWlnaHQ9ZS5oZWlnaHQ9cixuLnN0eWxlLndpZHRoPW8rXCJweFwiLG4uc3R5bGUuaGVpZ2h0PXIrXCJweFwiLGgucmV0aW5hU2NhbGUoZSxpLmRldmljZVBpeGVsUmF0aW8pLCF0KSl7dmFyIHM9e3dpZHRoOm8saGVpZ2h0OnJ9O2cubm90aWZ5KGUsXCJyZXNpemVcIixbc10pLGUub3B0aW9ucy5vblJlc2l6ZSYmZS5vcHRpb25zLm9uUmVzaXplKGUscyksZS5zdG9wKCksZS51cGRhdGUoe2R1cmF0aW9uOmUub3B0aW9ucy5yZXNwb25zaXZlQW5pbWF0aW9uRHVyYXRpb259KX19LGVuc3VyZVNjYWxlc0hhdmVJRHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMsZT10LnNjYWxlc3x8e30saT10LnNjYWxlO2guZWFjaChlLnhBeGVzLGZ1bmN0aW9uKHQsZSl7dC5pZD10LmlkfHxcIngtYXhpcy1cIitlfSksaC5lYWNoKGUueUF4ZXMsZnVuY3Rpb24odCxlKXt0LmlkPXQuaWR8fFwieS1heGlzLVwiK2V9KSxpJiYoaS5pZD1pLmlkfHxcInNjYWxlXCIpfSxidWlsZE9yVXBkYXRlU2NhbGVzOmZ1bmN0aW9uKCl7dmFyIHI9dGhpcyx0PXIub3B0aW9ucyxzPXIuc2NhbGVzfHx7fSxlPVtdLGw9T2JqZWN0LmtleXMocykucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRbZV09ITEsdH0se30pO3Quc2NhbGVzJiYoZT1lLmNvbmNhdCgodC5zY2FsZXMueEF4ZXN8fFtdKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJue29wdGlvbnM6dCxkdHlwZTpcImNhdGVnb3J5XCIsZHBvc2l0aW9uOlwiYm90dG9tXCJ9fSksKHQuc2NhbGVzLnlBeGVzfHxbXSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybntvcHRpb25zOnQsZHR5cGU6XCJsaW5lYXJcIixkcG9zaXRpb246XCJsZWZ0XCJ9fSkpKSx0LnNjYWxlJiZlLnB1c2goe29wdGlvbnM6dC5zY2FsZSxkdHlwZTpcInJhZGlhbExpbmVhclwiLGlzRGVmYXVsdDohMCxkcG9zaXRpb246XCJjaGFydEFyZWFcIn0pLGguZWFjaChlLGZ1bmN0aW9uKHQpe3ZhciBlPXQub3B0aW9ucyxpPWUuaWQsbj1oLnZhbHVlT3JEZWZhdWx0KGUudHlwZSx0LmR0eXBlKTtkKGUucG9zaXRpb24pIT09ZCh0LmRwb3NpdGlvbikmJihlLnBvc2l0aW9uPXQuZHBvc2l0aW9uKSxsW2ldPSEwO3ZhciBhPW51bGw7aWYoaSBpbiBzJiZzW2ldLnR5cGU9PT1uKShhPXNbaV0pLm9wdGlvbnM9ZSxhLmN0eD1yLmN0eCxhLmNoYXJ0PXI7ZWxzZXt2YXIgbz1wLmdldFNjYWxlQ29uc3RydWN0b3Iobik7aWYoIW8pcmV0dXJuO2E9bmV3IG8oe2lkOmksdHlwZTpuLG9wdGlvbnM6ZSxjdHg6ci5jdHgsY2hhcnQ6cn0pLHNbYS5pZF09YX1hLm1lcmdlVGlja3NPcHRpb25zKCksdC5pc0RlZmF1bHQmJihyLnNjYWxlPWEpfSksaC5lYWNoKGwsZnVuY3Rpb24odCxlKXt0fHxkZWxldGUgc1tlXX0pLHIuc2NhbGVzPXMscC5hZGRTY2FsZXNUb0xheW91dCh0aGlzKX0sYnVpbGRPclVwZGF0ZUNvbnRyb2xsZXJzOmZ1bmN0aW9uKCl7dmFyIG89dGhpcyxyPVtdLHM9W107cmV0dXJuIGguZWFjaChvLmRhdGEuZGF0YXNldHMsZnVuY3Rpb24odCxlKXt2YXIgaT1vLmdldERhdGFzZXRNZXRhKGUpLG49dC50eXBlfHxvLmNvbmZpZy50eXBlO2lmKGkudHlwZSYmaS50eXBlIT09biYmKG8uZGVzdHJveURhdGFzZXRNZXRhKGUpLGk9by5nZXREYXRhc2V0TWV0YShlKSksaS50eXBlPW4sci5wdXNoKGkudHlwZSksaS5jb250cm9sbGVyKWkuY29udHJvbGxlci51cGRhdGVJbmRleChlKSxpLmNvbnRyb2xsZXIubGlua1NjYWxlcygpO2Vsc2V7dmFyIGE9dS5jb250cm9sbGVyc1tpLnR5cGVdO2lmKHZvaWQgMD09PWEpdGhyb3cgbmV3IEVycm9yKCdcIicraS50eXBlKydcIiBpcyBub3QgYSBjaGFydCB0eXBlLicpO2kuY29udHJvbGxlcj1uZXcgYShvLGUpLHMucHVzaChpLmNvbnRyb2xsZXIpfX0sbyksc30scmVzZXRFbGVtZW50czpmdW5jdGlvbigpe3ZhciBpPXRoaXM7aC5lYWNoKGkuZGF0YS5kYXRhc2V0cyxmdW5jdGlvbih0LGUpe2kuZ2V0RGF0YXNldE1ldGEoZSkuY29udHJvbGxlci5yZXNldCgpfSxpKX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLnJlc2V0RWxlbWVudHMoKSx0aGlzLnRvb2x0aXAuaW5pdGlhbGl6ZSgpfSx1cGRhdGU6ZnVuY3Rpb24odCl7dmFyIGUsaSxuPXRoaXM7aWYodCYmXCJvYmplY3RcIj09dHlwZW9mIHR8fCh0PXtkdXJhdGlvbjp0LGxhenk6YXJndW1lbnRzWzFdfSksaT0oZT1uKS5vcHRpb25zLGguZWFjaChlLnNjYWxlcyxmdW5jdGlvbih0KXtvLnJlbW92ZUJveChlLHQpfSksaT1oLmNvbmZpZ01lcmdlKHUuZGVmYXVsdHMuZ2xvYmFsLHUuZGVmYXVsdHNbZS5jb25maWcudHlwZV0saSksZS5vcHRpb25zPWUuY29uZmlnLm9wdGlvbnM9aSxlLmVuc3VyZVNjYWxlc0hhdmVJRHMoKSxlLmJ1aWxkT3JVcGRhdGVTY2FsZXMoKSxlLnRvb2x0aXAuX29wdGlvbnM9aS50b29sdGlwcyxlLnRvb2x0aXAuaW5pdGlhbGl6ZSgpLGcuX2ludmFsaWRhdGUobiksITEhPT1nLm5vdGlmeShuLFwiYmVmb3JlVXBkYXRlXCIpKXtuLnRvb2x0aXAuX2RhdGE9bi5kYXRhO3ZhciBhPW4uYnVpbGRPclVwZGF0ZUNvbnRyb2xsZXJzKCk7aC5lYWNoKG4uZGF0YS5kYXRhc2V0cyxmdW5jdGlvbih0LGUpe24uZ2V0RGF0YXNldE1ldGEoZSkuY29udHJvbGxlci5idWlsZE9yVXBkYXRlRWxlbWVudHMoKX0sbiksbi51cGRhdGVMYXlvdXQoKSxuLm9wdGlvbnMuYW5pbWF0aW9uJiZuLm9wdGlvbnMuYW5pbWF0aW9uLmR1cmF0aW9uJiZoLmVhY2goYSxmdW5jdGlvbih0KXt0LnJlc2V0KCl9KSxuLnVwZGF0ZURhdGFzZXRzKCksbi50b29sdGlwLmluaXRpYWxpemUoKSxuLmxhc3RBY3RpdmU9W10sZy5ub3RpZnkobixcImFmdGVyVXBkYXRlXCIpLG4uX2J1ZmZlcmVkUmVuZGVyP24uX2J1ZmZlcmVkUmVxdWVzdD17ZHVyYXRpb246dC5kdXJhdGlvbixlYXNpbmc6dC5lYXNpbmcsbGF6eTp0Lmxhenl9Om4ucmVuZGVyKHQpfX0sdXBkYXRlTGF5b3V0OmZ1bmN0aW9uKCl7ITEhPT1nLm5vdGlmeSh0aGlzLFwiYmVmb3JlTGF5b3V0XCIpJiYoby51cGRhdGUodGhpcyx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KSxnLm5vdGlmeSh0aGlzLFwiYWZ0ZXJTY2FsZVVwZGF0ZVwiKSxnLm5vdGlmeSh0aGlzLFwiYWZ0ZXJMYXlvdXRcIikpfSx1cGRhdGVEYXRhc2V0czpmdW5jdGlvbigpe2lmKCExIT09Zy5ub3RpZnkodGhpcyxcImJlZm9yZURhdGFzZXRzVXBkYXRlXCIpKXtmb3IodmFyIHQ9MCxlPXRoaXMuZGF0YS5kYXRhc2V0cy5sZW5ndGg7dDxlOysrdCl0aGlzLnVwZGF0ZURhdGFzZXQodCk7Zy5ub3RpZnkodGhpcyxcImFmdGVyRGF0YXNldHNVcGRhdGVcIil9fSx1cGRhdGVEYXRhc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0RGF0YXNldE1ldGEodCksaT17bWV0YTplLGluZGV4OnR9OyExIT09Zy5ub3RpZnkodGhpcyxcImJlZm9yZURhdGFzZXRVcGRhdGVcIixbaV0pJiYoZS5jb250cm9sbGVyLnVwZGF0ZSgpLGcubm90aWZ5KHRoaXMsXCJhZnRlckRhdGFzZXRVcGRhdGVcIixbaV0pKX0scmVuZGVyOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dCYmXCJvYmplY3RcIj09dHlwZW9mIHR8fCh0PXtkdXJhdGlvbjp0LGxhenk6YXJndW1lbnRzWzFdfSk7dmFyIGk9dC5kdXJhdGlvbixuPXQubGF6eTtpZighMSE9PWcubm90aWZ5KGUsXCJiZWZvcmVSZW5kZXJcIikpe3ZhciBhPWUub3B0aW9ucy5hbmltYXRpb24sbz1mdW5jdGlvbih0KXtnLm5vdGlmeShlLFwiYWZ0ZXJSZW5kZXJcIiksaC5jYWxsYmFjayhhJiZhLm9uQ29tcGxldGUsW3RdLGUpfTtpZihhJiYodm9pZCAwIT09aSYmMCE9PWl8fHZvaWQgMD09PWkmJjAhPT1hLmR1cmF0aW9uKSl7dmFyIHI9bmV3IHMoe251bVN0ZXBzOihpfHxhLmR1cmF0aW9uKS8xNi42NixlYXNpbmc6dC5lYXNpbmd8fGEuZWFzaW5nLHJlbmRlcjpmdW5jdGlvbih0LGUpe3ZhciBpPWguZWFzaW5nLmVmZmVjdHNbZS5lYXNpbmddLG49ZS5jdXJyZW50U3RlcCxhPW4vZS5udW1TdGVwczt0LmRyYXcoaShhKSxhLG4pfSxvbkFuaW1hdGlvblByb2dyZXNzOmEub25Qcm9ncmVzcyxvbkFuaW1hdGlvbkNvbXBsZXRlOm99KTtsLmFkZEFuaW1hdGlvbihlLHIsaSxuKX1lbHNlIGUuZHJhdygpLG8obmV3IHMoe251bVN0ZXBzOjAsY2hhcnQ6ZX0pKTtyZXR1cm4gZX19LGRyYXc6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztlLmNsZWFyKCksaC5pc051bGxPclVuZGVmKHQpJiYodD0xKSxlLnRyYW5zaXRpb24odCksZS53aWR0aDw9MHx8ZS5oZWlnaHQ8PTB8fCExIT09Zy5ub3RpZnkoZSxcImJlZm9yZURyYXdcIixbdF0pJiYoaC5lYWNoKGUuYm94ZXMsZnVuY3Rpb24odCl7dC5kcmF3KGUuY2hhcnRBcmVhKX0sZSksZS5zY2FsZSYmZS5zY2FsZS5kcmF3KCksZS5kcmF3RGF0YXNldHModCksZS5fZHJhd1Rvb2x0aXAodCksZy5ub3RpZnkoZSxcImFmdGVyRHJhd1wiLFt0XSkpfSx0cmFuc2l0aW9uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLGk9KHRoaXMuZGF0YS5kYXRhc2V0c3x8W10pLmxlbmd0aDtlPGk7KytlKXRoaXMuaXNEYXRhc2V0VmlzaWJsZShlKSYmdGhpcy5nZXREYXRhc2V0TWV0YShlKS5jb250cm9sbGVyLnRyYW5zaXRpb24odCk7dGhpcy50b29sdGlwLnRyYW5zaXRpb24odCl9LGRyYXdEYXRhc2V0czpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKCExIT09Zy5ub3RpZnkoZSxcImJlZm9yZURhdGFzZXRzRHJhd1wiLFt0XSkpe2Zvcih2YXIgaT0oZS5kYXRhLmRhdGFzZXRzfHxbXSkubGVuZ3RoLTE7MDw9aTstLWkpZS5pc0RhdGFzZXRWaXNpYmxlKGkpJiZlLmRyYXdEYXRhc2V0KGksdCk7Zy5ub3RpZnkoZSxcImFmdGVyRGF0YXNldHNEcmF3XCIsW3RdKX19LGRyYXdEYXRhc2V0OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5nZXREYXRhc2V0TWV0YSh0KSxuPXttZXRhOmksaW5kZXg6dCxlYXNpbmdWYWx1ZTplfTshMSE9PWcubm90aWZ5KHRoaXMsXCJiZWZvcmVEYXRhc2V0RHJhd1wiLFtuXSkmJihpLmNvbnRyb2xsZXIuZHJhdyhlKSxnLm5vdGlmeSh0aGlzLFwiYWZ0ZXJEYXRhc2V0RHJhd1wiLFtuXSkpfSxfZHJhd1Rvb2x0aXA6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50b29sdGlwLGk9e3Rvb2x0aXA6ZSxlYXNpbmdWYWx1ZTp0fTshMSE9PWcubm90aWZ5KHRoaXMsXCJiZWZvcmVUb29sdGlwRHJhd1wiLFtpXSkmJihlLmRyYXcoKSxnLm5vdGlmeSh0aGlzLFwiYWZ0ZXJUb29sdGlwRHJhd1wiLFtpXSkpfSxnZXRFbGVtZW50QXRFdmVudDpmdW5jdGlvbih0KXtyZXR1cm4gYS5tb2Rlcy5zaW5nbGUodGhpcyx0KX0sZ2V0RWxlbWVudHNBdEV2ZW50OmZ1bmN0aW9uKHQpe3JldHVybiBhLm1vZGVzLmxhYmVsKHRoaXMsdCx7aW50ZXJzZWN0OiEwfSl9LGdldEVsZW1lbnRzQXRYQXhpczpmdW5jdGlvbih0KXtyZXR1cm4gYS5tb2Rlc1tcIngtYXhpc1wiXSh0aGlzLHQse2ludGVyc2VjdDohMH0pfSxnZXRFbGVtZW50c0F0RXZlbnRGb3JNb2RlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1hLm1vZGVzW2VdO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIG4/bih0aGlzLHQsaSk6W119LGdldERhdGFzZXRBdEV2ZW50OmZ1bmN0aW9uKHQpe3JldHVybiBhLm1vZGVzLmRhdGFzZXQodGhpcyx0LHtpbnRlcnNlY3Q6ITB9KX0sZ2V0RGF0YXNldE1ldGE6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5kYXRhLmRhdGFzZXRzW3RdO2UuX21ldGF8fChlLl9tZXRhPXt9KTt2YXIgaT1lLl9tZXRhW3RoaXMuaWRdO3JldHVybiBpfHwoaT1lLl9tZXRhW3RoaXMuaWRdPXt0eXBlOm51bGwsZGF0YTpbXSxkYXRhc2V0Om51bGwsY29udHJvbGxlcjpudWxsLGhpZGRlbjpudWxsLHhBeGlzSUQ6bnVsbCx5QXhpc0lEOm51bGx9KSxpfSxnZXRWaXNpYmxlRGF0YXNldENvdW50OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wLGk9dGhpcy5kYXRhLmRhdGFzZXRzLmxlbmd0aDtlPGk7KytlKXRoaXMuaXNEYXRhc2V0VmlzaWJsZShlKSYmdCsrO3JldHVybiB0fSxpc0RhdGFzZXRWaXNpYmxlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0RGF0YXNldE1ldGEodCk7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBlLmhpZGRlbj8hZS5oaWRkZW46IXRoaXMuZGF0YS5kYXRhc2V0c1t0XS5oaWRkZW59LGdlbmVyYXRlTGVnZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5sZWdlbmRDYWxsYmFjayh0aGlzKX0sZGVzdHJveURhdGFzZXRNZXRhOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaWQsaT10aGlzLmRhdGEuZGF0YXNldHNbdF0sbj1pLl9tZXRhJiZpLl9tZXRhW2VdO24mJihuLmNvbnRyb2xsZXIuZGVzdHJveSgpLGRlbGV0ZSBpLl9tZXRhW2VdKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0LGUsaT10aGlzLG49aS5jYW52YXM7Zm9yKGkuc3RvcCgpLHQ9MCxlPWkuZGF0YS5kYXRhc2V0cy5sZW5ndGg7dDxlOysrdClpLmRlc3Ryb3lEYXRhc2V0TWV0YSh0KTtuJiYoaS51bmJpbmRFdmVudHMoKSxoLmNhbnZhcy5jbGVhcihpKSxmLnJlbGVhc2VDb250ZXh0KGkuY3R4KSxpLmNhbnZhcz1udWxsLGkuY3R4PW51bGwpLGcubm90aWZ5KGksXCJkZXN0cm95XCIpLGRlbGV0ZSB1Lmluc3RhbmNlc1tpLmlkXX0sdG9CYXNlNjRJbWFnZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbnZhcy50b0RhdGFVUkwuYXBwbHkodGhpcy5jYW52YXMsYXJndW1lbnRzKX0saW5pdFRvb2xUaXA6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QudG9vbHRpcD1uZXcgbih7X2NoYXJ0OnQsX2NoYXJ0SW5zdGFuY2U6dCxfZGF0YTp0LmRhdGEsX29wdGlvbnM6dC5vcHRpb25zLnRvb2x0aXBzfSx0KX0sYmluZEV2ZW50czpmdW5jdGlvbigpe3ZhciBlPXRoaXMsaT1lLl9saXN0ZW5lcnM9e30sbj1mdW5jdGlvbigpe2UuZXZlbnRIYW5kbGVyLmFwcGx5KGUsYXJndW1lbnRzKX07aC5lYWNoKGUub3B0aW9ucy5ldmVudHMsZnVuY3Rpb24odCl7Zi5hZGRFdmVudExpc3RlbmVyKGUsdCxuKSxpW3RdPW59KSxlLm9wdGlvbnMucmVzcG9uc2l2ZSYmKG49ZnVuY3Rpb24oKXtlLnJlc2l6ZSgpfSxmLmFkZEV2ZW50TGlzdGVuZXIoZSxcInJlc2l6ZVwiLG4pLGkucmVzaXplPW4pfSx1bmJpbmRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgaT10aGlzLHQ9aS5fbGlzdGVuZXJzO3QmJihkZWxldGUgaS5fbGlzdGVuZXJzLGguZWFjaCh0LGZ1bmN0aW9uKHQsZSl7Zi5yZW1vdmVFdmVudExpc3RlbmVyKGksZSx0KX0pKX0sdXBkYXRlSG92ZXJTdHlsZTpmdW5jdGlvbih0LGUsaSl7dmFyIG4sYSxvLHI9aT9cInNldEhvdmVyU3R5bGVcIjpcInJlbW92ZUhvdmVyU3R5bGVcIjtmb3IoYT0wLG89dC5sZW5ndGg7YTxvOysrYSkobj10W2FdKSYmdGhpcy5nZXREYXRhc2V0TWV0YShuLl9kYXRhc2V0SW5kZXgpLmNvbnRyb2xsZXJbcl0obil9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLGk9ZS50b29sdGlwO2lmKCExIT09Zy5ub3RpZnkoZSxcImJlZm9yZUV2ZW50XCIsW3RdKSl7ZS5fYnVmZmVyZWRSZW5kZXI9ITAsZS5fYnVmZmVyZWRSZXF1ZXN0PW51bGw7dmFyIG49ZS5oYW5kbGVFdmVudCh0KTtpJiYobj1pLl9zdGFydD9pLmhhbmRsZUV2ZW50KHQpOm58aS5oYW5kbGVFdmVudCh0KSksZy5ub3RpZnkoZSxcImFmdGVyRXZlbnRcIixbdF0pO3ZhciBhPWUuX2J1ZmZlcmVkUmVxdWVzdDtyZXR1cm4gYT9lLnJlbmRlcihhKTpuJiYhZS5hbmltYXRpbmcmJihlLnN0b3AoKSxlLnJlbmRlcih7ZHVyYXRpb246ZS5vcHRpb25zLmhvdmVyLmFuaW1hdGlvbkR1cmF0aW9uLGxhenk6ITB9KSksZS5fYnVmZmVyZWRSZW5kZXI9ITEsZS5fYnVmZmVyZWRSZXF1ZXN0PW51bGwsZX19LGhhbmRsZUV2ZW50OmZ1bmN0aW9uKHQpe3ZhciBlLGk9dGhpcyxuPWkub3B0aW9uc3x8e30sYT1uLmhvdmVyO3JldHVybiBpLmxhc3RBY3RpdmU9aS5sYXN0QWN0aXZlfHxbXSxcIm1vdXNlb3V0XCI9PT10LnR5cGU/aS5hY3RpdmU9W106aS5hY3RpdmU9aS5nZXRFbGVtZW50c0F0RXZlbnRGb3JNb2RlKHQsYS5tb2RlLGEpLGguY2FsbGJhY2sobi5vbkhvdmVyfHxuLmhvdmVyLm9uSG92ZXIsW3QubmF0aXZlLGkuYWN0aXZlXSxpKSxcIm1vdXNldXBcIiE9PXQudHlwZSYmXCJjbGlja1wiIT09dC50eXBlfHxuLm9uQ2xpY2smJm4ub25DbGljay5jYWxsKGksdC5uYXRpdmUsaS5hY3RpdmUpLGkubGFzdEFjdGl2ZS5sZW5ndGgmJmkudXBkYXRlSG92ZXJTdHlsZShpLmxhc3RBY3RpdmUsYS5tb2RlLCExKSxpLmFjdGl2ZS5sZW5ndGgmJmEubW9kZSYmaS51cGRhdGVIb3ZlclN0eWxlKGkuYWN0aXZlLGEubW9kZSwhMCksZT0haC5hcnJheUVxdWFscyhpLmFjdGl2ZSxpLmxhc3RBY3RpdmUpLGkubGFzdEFjdGl2ZT1pLmFjdGl2ZSxlfX0pLHUuQ29udHJvbGxlcj11fX0sezIyOjIyLDIzOjIzLDI2OjI2LDI5OjI5LDMxOjMxLDMyOjMyLDM0OjM0LDM2OjM2LDQ2OjQ2LDQ5OjQ5fV0sMjU6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgcz10KDQ2KTtlLmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIG89W1wicHVzaFwiLFwicG9wXCIsXCJzaGlmdFwiLFwic3BsaWNlXCIsXCJ1bnNoaWZ0XCJdO2Z1bmN0aW9uIHIoZSx0KXt2YXIgaT1lLl9jaGFydGpzO2lmKGkpe3ZhciBuPWkubGlzdGVuZXJzLGE9bi5pbmRleE9mKHQpOy0xIT09YSYmbi5zcGxpY2UoYSwxKSwwPG4ubGVuZ3RofHwoby5mb3JFYWNoKGZ1bmN0aW9uKHQpe2RlbGV0ZSBlW3RdfSksZGVsZXRlIGUuX2NoYXJ0anMpfX10LkRhdGFzZXRDb250cm9sbGVyPWZ1bmN0aW9uKHQsZSl7dGhpcy5pbml0aWFsaXplKHQsZSl9LHMuZXh0ZW5kKHQuRGF0YXNldENvbnRyb2xsZXIucHJvdG90eXBlLHtkYXRhc2V0RWxlbWVudFR5cGU6bnVsbCxkYXRhRWxlbWVudFR5cGU6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKHQsZSl7dGhpcy5jaGFydD10LHRoaXMuaW5kZXg9ZSx0aGlzLmxpbmtTY2FsZXMoKSx0aGlzLmFkZEVsZW1lbnRzKCl9LHVwZGF0ZUluZGV4OmZ1bmN0aW9uKHQpe3RoaXMuaW5kZXg9dH0sbGlua1NjYWxlczpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10LmdldE1ldGEoKSxpPXQuZ2V0RGF0YXNldCgpO251bGwhPT1lLnhBeGlzSUQmJmUueEF4aXNJRCBpbiB0LmNoYXJ0LnNjYWxlc3x8KGUueEF4aXNJRD1pLnhBeGlzSUR8fHQuY2hhcnQub3B0aW9ucy5zY2FsZXMueEF4ZXNbMF0uaWQpLG51bGwhPT1lLnlBeGlzSUQmJmUueUF4aXNJRCBpbiB0LmNoYXJ0LnNjYWxlc3x8KGUueUF4aXNJRD1pLnlBeGlzSUR8fHQuY2hhcnQub3B0aW9ucy5zY2FsZXMueUF4ZXNbMF0uaWQpfSxnZXREYXRhc2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hhcnQuZGF0YS5kYXRhc2V0c1t0aGlzLmluZGV4XX0sZ2V0TWV0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoYXJ0LmdldERhdGFzZXRNZXRhKHRoaXMuaW5kZXgpfSxnZXRTY2FsZUZvcklkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNoYXJ0LnNjYWxlc1t0XX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZSghMCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhJiZyKHRoaXMuX2RhdGEsdGhpcyl9LGNyZWF0ZU1ldGFEYXRhc2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5kYXRhc2V0RWxlbWVudFR5cGU7cmV0dXJuIHQmJm5ldyB0KHtfY2hhcnQ6dGhpcy5jaGFydCxfZGF0YXNldEluZGV4OnRoaXMuaW5kZXh9KX0sY3JlYXRlTWV0YURhdGE6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5kYXRhRWxlbWVudFR5cGU7cmV0dXJuIGUmJm5ldyBlKHtfY2hhcnQ6dGhpcy5jaGFydCxfZGF0YXNldEluZGV4OnRoaXMuaW5kZXgsX2luZGV4OnR9KX0sYWRkRWxlbWVudHM6ZnVuY3Rpb24oKXt2YXIgdCxlLGk9dGhpcy5nZXRNZXRhKCksbj10aGlzLmdldERhdGFzZXQoKS5kYXRhfHxbXSxhPWkuZGF0YTtmb3IodD0wLGU9bi5sZW5ndGg7dDxlOysrdClhW3RdPWFbdF18fHRoaXMuY3JlYXRlTWV0YURhdGEodCk7aS5kYXRhc2V0PWkuZGF0YXNldHx8dGhpcy5jcmVhdGVNZXRhRGF0YXNldCgpfSxhZGRFbGVtZW50QW5kUmVzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jcmVhdGVNZXRhRGF0YSh0KTt0aGlzLmdldE1ldGEoKS5kYXRhLnNwbGljZSh0LDAsZSksdGhpcy51cGRhdGVFbGVtZW50KGUsdCwhMCl9LGJ1aWxkT3JVcGRhdGVFbGVtZW50czpmdW5jdGlvbigpe3ZhciBhLHQsZT10aGlzLGk9ZS5nZXREYXRhc2V0KCksbj1pLmRhdGF8fChpLmRhdGE9W10pO2UuX2RhdGEhPT1uJiYoZS5fZGF0YSYmcihlLl9kYXRhLGUpLHQ9ZSwoYT1uKS5fY2hhcnRqcz9hLl9jaGFydGpzLmxpc3RlbmVycy5wdXNoKHQpOihPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxcIl9jaGFydGpzXCIse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiExLHZhbHVlOntsaXN0ZW5lcnM6W3RdfX0pLG8uZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgaT1cIm9uRGF0YVwiK3QuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKSxuPWFbdF07T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsdCx7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITEsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLHQ9bi5hcHBseSh0aGlzLGUpO3JldHVybiBzLmVhY2goYS5fY2hhcnRqcy5saXN0ZW5lcnMsZnVuY3Rpb24odCl7XCJmdW5jdGlvblwiPT10eXBlb2YgdFtpXSYmdFtpXS5hcHBseSh0LGUpfSksdH19KX0pKSxlLl9kYXRhPW4pLGUucmVzeW5jRWxlbWVudHMoKX0sdXBkYXRlOnMubm9vcCx0cmFuc2l0aW9uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmdldE1ldGEoKSxpPWUuZGF0YXx8W10sbj1pLmxlbmd0aCxhPTA7YTxuOysrYSlpW2FdLnRyYW5zaXRpb24odCk7ZS5kYXRhc2V0JiZlLmRhdGFzZXQudHJhbnNpdGlvbih0KX0sZHJhdzpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0TWV0YSgpLGU9dC5kYXRhfHxbXSxpPWUubGVuZ3RoLG49MDtmb3IodC5kYXRhc2V0JiZ0LmRhdGFzZXQuZHJhdygpO248aTsrK24pZVtuXS5kcmF3KCl9LHJlbW92ZUhvdmVyU3R5bGU6ZnVuY3Rpb24odCl7cy5tZXJnZSh0Ll9tb2RlbCx0LiRwcmV2aW91c1N0eWxlfHx7fSksZGVsZXRlIHQuJHByZXZpb3VzU3R5bGV9LHNldEhvdmVyU3R5bGU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzW3QuX2RhdGFzZXRJbmRleF0saT10Ll9pbmRleCxuPXQuY3VzdG9tfHx7fSxhPXMudmFsdWVBdEluZGV4T3JEZWZhdWx0LG89cy5nZXRIb3ZlckNvbG9yLHI9dC5fbW9kZWw7dC4kcHJldmlvdXNTdHlsZT17YmFja2dyb3VuZENvbG9yOnIuYmFja2dyb3VuZENvbG9yLGJvcmRlckNvbG9yOnIuYm9yZGVyQ29sb3IsYm9yZGVyV2lkdGg6ci5ib3JkZXJXaWR0aH0sci5iYWNrZ3JvdW5kQ29sb3I9bi5ob3ZlckJhY2tncm91bmRDb2xvcj9uLmhvdmVyQmFja2dyb3VuZENvbG9yOmEoZS5ob3ZlckJhY2tncm91bmRDb2xvcixpLG8oci5iYWNrZ3JvdW5kQ29sb3IpKSxyLmJvcmRlckNvbG9yPW4uaG92ZXJCb3JkZXJDb2xvcj9uLmhvdmVyQm9yZGVyQ29sb3I6YShlLmhvdmVyQm9yZGVyQ29sb3IsaSxvKHIuYm9yZGVyQ29sb3IpKSxyLmJvcmRlcldpZHRoPW4uaG92ZXJCb3JkZXJXaWR0aD9uLmhvdmVyQm9yZGVyV2lkdGg6YShlLmhvdmVyQm9yZGVyV2lkdGgsaSxyLmJvcmRlcldpZHRoKX0scmVzeW5jRWxlbWVudHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldE1ldGEoKSxlPXRoaXMuZ2V0RGF0YXNldCgpLmRhdGEsaT10LmRhdGEubGVuZ3RoLG49ZS5sZW5ndGg7bjxpP3QuZGF0YS5zcGxpY2UobixpLW4pOmk8biYmdGhpcy5pbnNlcnRFbGVtZW50cyhpLG4taSl9LGluc2VydEVsZW1lbnRzOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPTA7aTxlOysraSl0aGlzLmFkZEVsZW1lbnRBbmRSZXNldCh0K2kpfSxvbkRhdGFQdXNoOmZ1bmN0aW9uKCl7dGhpcy5pbnNlcnRFbGVtZW50cyh0aGlzLmdldERhdGFzZXQoKS5kYXRhLmxlbmd0aC0xLGFyZ3VtZW50cy5sZW5ndGgpfSxvbkRhdGFQb3A6ZnVuY3Rpb24oKXt0aGlzLmdldE1ldGEoKS5kYXRhLnBvcCgpfSxvbkRhdGFTaGlmdDpmdW5jdGlvbigpe3RoaXMuZ2V0TWV0YSgpLmRhdGEuc2hpZnQoKX0sb25EYXRhU3BsaWNlOmZ1bmN0aW9uKHQsZSl7dGhpcy5nZXRNZXRhKCkuZGF0YS5zcGxpY2UodCxlKSx0aGlzLmluc2VydEVsZW1lbnRzKHQsYXJndW1lbnRzLmxlbmd0aC0yKX0sb25EYXRhVW5zaGlmdDpmdW5jdGlvbigpe3RoaXMuaW5zZXJ0RWxlbWVudHMoMCxhcmd1bWVudHMubGVuZ3RoKX19KSx0LkRhdGFzZXRDb250cm9sbGVyLmV4dGVuZD1zLmluaGVyaXRzfX0sezQ2OjQ2fV0sMjY6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10KDQ2KTtlLmV4cG9ydHM9e19zZXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbi5tZXJnZSh0aGlzW3RdfHwodGhpc1t0XT17fSksZSl9fX0sezQ2OjQ2fV0sMjc6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgZz10KDMpLG49dCg0Nik7dmFyIGE9ZnVuY3Rpb24odCl7bi5leHRlbmQodGhpcyx0KSx0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtuLmV4dGVuZChhLnByb3RvdHlwZSx7aW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMuaGlkZGVuPSExfSxwaXZvdDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHQuX3ZpZXd8fCh0Ll92aWV3PW4uY2xvbmUodC5fbW9kZWwpKSx0Ll9zdGFydD17fSx0fSx0cmFuc2l0aW9uOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsaT1lLl9tb2RlbCxuPWUuX3N0YXJ0LGE9ZS5fdmlldztyZXR1cm4gaSYmMSE9PXQ/KGF8fChhPWUuX3ZpZXc9e30pLG58fChuPWUuX3N0YXJ0PXt9KSxmdW5jdGlvbih0LGUsaSxuKXt2YXIgYSxvLHIscyxsLHUsZCxjLGgsZj1PYmplY3Qua2V5cyhpKTtmb3IoYT0wLG89Zi5sZW5ndGg7YTxvOysrYSlpZih1PWlbcj1mW2FdXSxlLmhhc093blByb3BlcnR5KHIpfHwoZVtyXT11KSwocz1lW3JdKSE9PXUmJlwiX1wiIT09clswXSl7aWYodC5oYXNPd25Qcm9wZXJ0eShyKXx8KHRbcl09cyksKGQ9dHlwZW9mIHUpPT10eXBlb2YobD10W3JdKSlpZihcInN0cmluZ1wiPT09ZCl7aWYoKGM9ZyhsKSkudmFsaWQmJihoPWcodSkpLnZhbGlkKXtlW3JdPWgubWl4KGMsbikucmdiU3RyaW5nKCk7Y29udGludWV9fWVsc2UgaWYoXCJudW1iZXJcIj09PWQmJmlzRmluaXRlKGwpJiZpc0Zpbml0ZSh1KSl7ZVtyXT1sKyh1LWwpKm47Y29udGludWV9ZVtyXT11fX0obixhLGksdCkpOihlLl92aWV3PWksZS5fc3RhcnQ9bnVsbCksZX0sdG9vbHRpcFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJue3g6dGhpcy5fbW9kZWwueCx5OnRoaXMuX21vZGVsLnl9fSxoYXNWYWx1ZTpmdW5jdGlvbigpe3JldHVybiBuLmlzTnVtYmVyKHRoaXMuX21vZGVsLngpJiZuLmlzTnVtYmVyKHRoaXMuX21vZGVsLnkpfX0pLGEuZXh0ZW5kPW4uaW5oZXJpdHMsZS5leHBvcnRzPWF9LHszOjMsNDY6NDZ9XSwyODpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciBuPXQoMyksYT10KDI2KSxnPXQoNDYpLGw9dCgzNCk7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZCh0LGUsaSl7dmFyIG47cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/KG49cGFyc2VJbnQodCwxMCksLTEhPT10LmluZGV4T2YoXCIlXCIpJiYobj1uLzEwMCplLnBhcmVudE5vZGVbaV0pKTpuPXQsbn1mdW5jdGlvbiBjKHQpe3JldHVybiBudWxsIT10JiZcIm5vbmVcIiE9PXR9ZnVuY3Rpb24gZSh0LGUsaSl7dmFyIG49ZG9jdW1lbnQuZGVmYXVsdFZpZXcsYT1nLl9nZXRQYXJlbnROb2RlKHQpLG89bi5nZXRDb21wdXRlZFN0eWxlKHQpW2VdLHI9bi5nZXRDb21wdXRlZFN0eWxlKGEpW2VdLHM9YyhvKSxsPWMociksdT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7cmV0dXJuIHN8fGw/TWF0aC5taW4ocz9kKG8sdCxpKTp1LGw/ZChyLGEsaSk6dSk6XCJub25lXCJ9Zy5jb25maWdNZXJnZT1mdW5jdGlvbigpe3JldHVybiBnLm1lcmdlKGcuY2xvbmUoYXJndW1lbnRzWzBdKSxbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSx7bWVyZ2VyOmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBhPWVbdF18fHt9LG89aVt0XTtcInNjYWxlc1wiPT09dD9lW3RdPWcuc2NhbGVNZXJnZShhLG8pOlwic2NhbGVcIj09PXQ/ZVt0XT1nLm1lcmdlKGEsW2wuZ2V0U2NhbGVEZWZhdWx0cyhvLnR5cGUpLG9dKTpnLl9tZXJnZXIodCxlLGksbil9fSl9LGcuc2NhbGVNZXJnZT1mdW5jdGlvbigpe3JldHVybiBnLm1lcmdlKGcuY2xvbmUoYXJndW1lbnRzWzBdKSxbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSx7bWVyZ2VyOmZ1bmN0aW9uKHQsZSxpLG4pe2lmKFwieEF4ZXNcIj09PXR8fFwieUF4ZXNcIj09PXQpe3ZhciBhLG8scixzPWlbdF0ubGVuZ3RoO2ZvcihlW3RdfHwoZVt0XT1bXSksYT0wO2E8czsrK2Epcj1pW3RdW2FdLG89Zy52YWx1ZU9yRGVmYXVsdChyLnR5cGUsXCJ4QXhlc1wiPT09dD9cImNhdGVnb3J5XCI6XCJsaW5lYXJcIiksYT49ZVt0XS5sZW5ndGgmJmVbdF0ucHVzaCh7fSksIWVbdF1bYV0udHlwZXx8ci50eXBlJiZyLnR5cGUhPT1lW3RdW2FdLnR5cGU/Zy5tZXJnZShlW3RdW2FdLFtsLmdldFNjYWxlRGVmYXVsdHMobykscl0pOmcubWVyZ2UoZVt0XVthXSxyKX1lbHNlIGcuX21lcmdlcih0LGUsaSxuKX19KX0sZy53aGVyZT1mdW5jdGlvbih0LGUpe2lmKGcuaXNBcnJheSh0KSYmQXJyYXkucHJvdG90eXBlLmZpbHRlcilyZXR1cm4gdC5maWx0ZXIoZSk7dmFyIGk9W107cmV0dXJuIGcuZWFjaCh0LGZ1bmN0aW9uKHQpe2UodCkmJmkucHVzaCh0KX0pLGl9LGcuZmluZEluZGV4PUFycmF5LnByb3RvdHlwZS5maW5kSW5kZXg/ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0LmZpbmRJbmRleChlLGkpfTpmdW5jdGlvbih0LGUsaSl7aT12b2lkIDA9PT1pP3Q6aTtmb3IodmFyIG49MCxhPXQubGVuZ3RoO248YTsrK24paWYoZS5jYWxsKGksdFtuXSxuLHQpKXJldHVybiBuO3JldHVybi0xfSxnLmZpbmROZXh0V2hlcmU9ZnVuY3Rpb24odCxlLGkpe2cuaXNOdWxsT3JVbmRlZihpKSYmKGk9LTEpO2Zvcih2YXIgbj1pKzE7bjx0Lmxlbmd0aDtuKyspe3ZhciBhPXRbbl07aWYoZShhKSlyZXR1cm4gYX19LGcuZmluZFByZXZpb3VzV2hlcmU9ZnVuY3Rpb24odCxlLGkpe2cuaXNOdWxsT3JVbmRlZihpKSYmKGk9dC5sZW5ndGgpO2Zvcih2YXIgbj1pLTE7MDw9bjtuLS0pe3ZhciBhPXRbbl07aWYoZShhKSlyZXR1cm4gYX19LGcuaXNOdW1iZXI9ZnVuY3Rpb24odCl7cmV0dXJuIWlzTmFOKHBhcnNlRmxvYXQodCkpJiZpc0Zpbml0ZSh0KX0sZy5hbG1vc3RFcXVhbHM9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBNYXRoLmFicyh0LWUpPGl9LGcuYWxtb3N0V2hvbGU9ZnVuY3Rpb24odCxlKXt2YXIgaT1NYXRoLnJvdW5kKHQpO3JldHVybiBpLWU8dCYmdDxpK2V9LGcubWF4PWZ1bmN0aW9uKHQpe3JldHVybiB0LnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiBpc05hTihlKT90Ok1hdGgubWF4KHQsZSl9LE51bWJlci5ORUdBVElWRV9JTkZJTklUWSl9LGcubWluPWZ1bmN0aW9uKHQpe3JldHVybiB0LnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiBpc05hTihlKT90Ok1hdGgubWluKHQsZSl9LE51bWJlci5QT1NJVElWRV9JTkZJTklUWSl9LGcuc2lnbj1NYXRoLnNpZ24/ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguc2lnbih0KX06ZnVuY3Rpb24odCl7cmV0dXJuIDA9PT0odD0rdCl8fGlzTmFOKHQpP3Q6MDx0PzE6LTF9LGcubG9nMTA9TWF0aC5sb2cxMD9mdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5sb2cxMCh0KX06ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5sb2codCkqTWF0aC5MT0cxMEUsaT1NYXRoLnJvdW5kKGUpO3JldHVybiB0PT09TWF0aC5wb3coMTAsaSk/aTplfSxnLnRvUmFkaWFucz1mdW5jdGlvbih0KXtyZXR1cm4gdCooTWF0aC5QSS8xODApfSxnLnRvRGVncmVlcz1mdW5jdGlvbih0KXtyZXR1cm4gdCooMTgwL01hdGguUEkpfSxnLmdldEFuZ2xlRnJvbVBvaW50PWZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS54LXQueCxuPWUueS10LnksYT1NYXRoLnNxcnQoaSppK24qbiksbz1NYXRoLmF0YW4yKG4saSk7cmV0dXJuIG88LS41Kk1hdGguUEkmJihvKz0yKk1hdGguUEkpLHthbmdsZTpvLGRpc3RhbmNlOmF9fSxnLmRpc3RhbmNlQmV0d2VlblBvaW50cz1mdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coZS54LXQueCwyKStNYXRoLnBvdyhlLnktdC55LDIpKX0sZy5hbGlhc1BpeGVsPWZ1bmN0aW9uKHQpe3JldHVybiB0JTI9PTA/MDouNX0sZy5zcGxpbmVDdXJ2ZT1mdW5jdGlvbih0LGUsaSxuKXt2YXIgYT10LnNraXA/ZTp0LG89ZSxyPWkuc2tpcD9lOmkscz1NYXRoLnNxcnQoTWF0aC5wb3coby54LWEueCwyKStNYXRoLnBvdyhvLnktYS55LDIpKSxsPU1hdGguc3FydChNYXRoLnBvdyhyLngtby54LDIpK01hdGgucG93KHIueS1vLnksMikpLHU9cy8ocytsKSxkPWwvKHMrbCksYz1uKih1PWlzTmFOKHUpPzA6dSksaD1uKihkPWlzTmFOKGQpPzA6ZCk7cmV0dXJue3ByZXZpb3VzOnt4Om8ueC1jKihyLngtYS54KSx5Om8ueS1jKihyLnktYS55KX0sbmV4dDp7eDpvLngraCooci54LWEueCkseTpvLnkraCooci55LWEueSl9fX0sZy5FUFNJTE9OPU51bWJlci5FUFNJTE9OfHwxZS0xNCxnLnNwbGluZUN1cnZlTW9ub3RvbmU9ZnVuY3Rpb24odCl7dmFyIGUsaSxuLGEsbyxyLHMsbCx1LGQ9KHR8fFtdKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJue21vZGVsOnQuX21vZGVsLGRlbHRhSzowLG1LOjB9fSksYz1kLmxlbmd0aDtmb3IoZT0wO2U8YzsrK2UpaWYoIShuPWRbZV0pLm1vZGVsLnNraXApe2lmKGk9MDxlP2RbZS0xXTpudWxsLChhPWU8Yy0xP2RbZSsxXTpudWxsKSYmIWEubW9kZWwuc2tpcCl7dmFyIGg9YS5tb2RlbC54LW4ubW9kZWwueDtuLmRlbHRhSz0wIT09aD8oYS5tb2RlbC55LW4ubW9kZWwueSkvaDowfSFpfHxpLm1vZGVsLnNraXA/bi5tSz1uLmRlbHRhSzohYXx8YS5tb2RlbC5za2lwP24ubUs9aS5kZWx0YUs6dGhpcy5zaWduKGkuZGVsdGFLKSE9PXRoaXMuc2lnbihuLmRlbHRhSyk/bi5tSz0wOm4ubUs9KGkuZGVsdGFLK24uZGVsdGFLKS8yfWZvcihlPTA7ZTxjLTE7KytlKW49ZFtlXSxhPWRbZSsxXSxuLm1vZGVsLnNraXB8fGEubW9kZWwuc2tpcHx8KGcuYWxtb3N0RXF1YWxzKG4uZGVsdGFLLDAsdGhpcy5FUFNJTE9OKT9uLm1LPWEubUs9MDoobz1uLm1LL24uZGVsdGFLLHI9YS5tSy9uLmRlbHRhSywobD1NYXRoLnBvdyhvLDIpK01hdGgucG93KHIsMikpPD05fHwocz0zL01hdGguc3FydChsKSxuLm1LPW8qcypuLmRlbHRhSyxhLm1LPXIqcypuLmRlbHRhSykpKTtmb3IoZT0wO2U8YzsrK2UpKG49ZFtlXSkubW9kZWwuc2tpcHx8KGk9MDxlP2RbZS0xXTpudWxsLGE9ZTxjLTE/ZFtlKzFdOm51bGwsaSYmIWkubW9kZWwuc2tpcCYmKHU9KG4ubW9kZWwueC1pLm1vZGVsLngpLzMsbi5tb2RlbC5jb250cm9sUG9pbnRQcmV2aW91c1g9bi5tb2RlbC54LXUsbi5tb2RlbC5jb250cm9sUG9pbnRQcmV2aW91c1k9bi5tb2RlbC55LXUqbi5tSyksYSYmIWEubW9kZWwuc2tpcCYmKHU9KGEubW9kZWwueC1uLm1vZGVsLngpLzMsbi5tb2RlbC5jb250cm9sUG9pbnROZXh0WD1uLm1vZGVsLngrdSxuLm1vZGVsLmNvbnRyb2xQb2ludE5leHRZPW4ubW9kZWwueSt1Km4ubUspKX0sZy5uZXh0SXRlbT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIGk/ZT49dC5sZW5ndGgtMT90WzBdOnRbZSsxXTplPj10Lmxlbmd0aC0xP3RbdC5sZW5ndGgtMV06dFtlKzFdfSxnLnByZXZpb3VzSXRlbT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIGk/ZTw9MD90W3QubGVuZ3RoLTFdOnRbZS0xXTplPD0wP3RbMF06dFtlLTFdfSxnLm5pY2VOdW09ZnVuY3Rpb24odCxlKXt2YXIgaT1NYXRoLmZsb29yKGcubG9nMTAodCkpLG49dC9NYXRoLnBvdygxMCxpKTtyZXR1cm4oZT9uPDEuNT8xOm48Mz8yOm48Nz81OjEwOm48PTE/MTpuPD0yPzI6bjw9NT81OjEwKSpNYXRoLnBvdygxMCxpKX0sZy5yZXF1ZXN0QW5pbUZyYW1lPVwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3c/ZnVuY3Rpb24odCl7dCgpfTp3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbih0KXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQodCwxZTMvNjApfSxnLmdldFJlbGF0aXZlUG9zaXRpb249ZnVuY3Rpb24odCxlKXt2YXIgaSxuLGE9dC5vcmlnaW5hbEV2ZW50fHx0LG89dC50YXJnZXR8fHQuc3JjRWxlbWVudCxyPW8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscz1hLnRvdWNoZXM7bj1zJiYwPHMubGVuZ3RoPyhpPXNbMF0uY2xpZW50WCxzWzBdLmNsaWVudFkpOihpPWEuY2xpZW50WCxhLmNsaWVudFkpO3ZhciBsPXBhcnNlRmxvYXQoZy5nZXRTdHlsZShvLFwicGFkZGluZy1sZWZ0XCIpKSx1PXBhcnNlRmxvYXQoZy5nZXRTdHlsZShvLFwicGFkZGluZy10b3BcIikpLGQ9cGFyc2VGbG9hdChnLmdldFN0eWxlKG8sXCJwYWRkaW5nLXJpZ2h0XCIpKSxjPXBhcnNlRmxvYXQoZy5nZXRTdHlsZShvLFwicGFkZGluZy1ib3R0b21cIikpLGg9ci5yaWdodC1yLmxlZnQtbC1kLGY9ci5ib3R0b20tci50b3AtdS1jO3JldHVybnt4Omk9TWF0aC5yb3VuZCgoaS1yLmxlZnQtbCkvaCpvLndpZHRoL2UuY3VycmVudERldmljZVBpeGVsUmF0aW8pLHk6bj1NYXRoLnJvdW5kKChuLXIudG9wLXUpL2Yqby5oZWlnaHQvZS5jdXJyZW50RGV2aWNlUGl4ZWxSYXRpbyl9fSxnLmdldENvbnN0cmFpbnRXaWR0aD1mdW5jdGlvbih0KXtyZXR1cm4gZSh0LFwibWF4LXdpZHRoXCIsXCJjbGllbnRXaWR0aFwiKX0sZy5nZXRDb25zdHJhaW50SGVpZ2h0PWZ1bmN0aW9uKHQpe3JldHVybiBlKHQsXCJtYXgtaGVpZ2h0XCIsXCJjbGllbnRIZWlnaHRcIil9LGcuX2NhbGN1bGF0ZVBhZGRpbmc9ZnVuY3Rpb24odCxlLGkpe3JldHVybi0xPChlPWcuZ2V0U3R5bGUodCxlKSkuaW5kZXhPZihcIiVcIik/aS9wYXJzZUludChlLDEwKTpwYXJzZUludChlLDEwKX0sZy5fZ2V0UGFyZW50Tm9kZT1mdW5jdGlvbih0KXt2YXIgZT10LnBhcmVudE5vZGU7cmV0dXJuIGUmJmUuaG9zdCYmKGU9ZS5ob3N0KSxlfSxnLmdldE1heGltdW1XaWR0aD1mdW5jdGlvbih0KXt2YXIgZT1nLl9nZXRQYXJlbnROb2RlKHQpO2lmKCFlKXJldHVybiB0LmNsaWVudFdpZHRoO3ZhciBpPWUuY2xpZW50V2lkdGgsbj1pLWcuX2NhbGN1bGF0ZVBhZGRpbmcoZSxcInBhZGRpbmctbGVmdFwiLGkpLWcuX2NhbGN1bGF0ZVBhZGRpbmcoZSxcInBhZGRpbmctcmlnaHRcIixpKSxhPWcuZ2V0Q29uc3RyYWludFdpZHRoKHQpO3JldHVybiBpc05hTihhKT9uOk1hdGgubWluKG4sYSl9LGcuZ2V0TWF4aW11bUhlaWdodD1mdW5jdGlvbih0KXt2YXIgZT1nLl9nZXRQYXJlbnROb2RlKHQpO2lmKCFlKXJldHVybiB0LmNsaWVudEhlaWdodDt2YXIgaT1lLmNsaWVudEhlaWdodCxuPWktZy5fY2FsY3VsYXRlUGFkZGluZyhlLFwicGFkZGluZy10b3BcIixpKS1nLl9jYWxjdWxhdGVQYWRkaW5nKGUsXCJwYWRkaW5nLWJvdHRvbVwiLGkpLGE9Zy5nZXRDb25zdHJhaW50SGVpZ2h0KHQpO3JldHVybiBpc05hTihhKT9uOk1hdGgubWluKG4sYSl9LGcuZ2V0U3R5bGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5jdXJyZW50U3R5bGU/dC5jdXJyZW50U3R5bGVbZV06ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0LG51bGwpLmdldFByb3BlcnR5VmFsdWUoZSl9LGcucmV0aW5hU2NhbGU9ZnVuY3Rpb24odCxlKXt2YXIgaT10LmN1cnJlbnREZXZpY2VQaXhlbFJhdGlvPWV8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfHwxO2lmKDEhPT1pKXt2YXIgbj10LmNhbnZhcyxhPXQuaGVpZ2h0LG89dC53aWR0aDtuLmhlaWdodD1hKmksbi53aWR0aD1vKmksdC5jdHguc2NhbGUoaSxpKSxuLnN0eWxlLmhlaWdodHx8bi5zdHlsZS53aWR0aHx8KG4uc3R5bGUuaGVpZ2h0PWErXCJweFwiLG4uc3R5bGUud2lkdGg9bytcInB4XCIpfX0sZy5mb250U3RyaW5nPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gZStcIiBcIit0K1wicHggXCIraX0sZy5sb25nZXN0VGV4dD1mdW5jdGlvbihlLHQsaSxuKXt2YXIgYT0obj1ufHx7fSkuZGF0YT1uLmRhdGF8fHt9LG89bi5nYXJiYWdlQ29sbGVjdD1uLmdhcmJhZ2VDb2xsZWN0fHxbXTtuLmZvbnQhPT10JiYoYT1uLmRhdGE9e30sbz1uLmdhcmJhZ2VDb2xsZWN0PVtdLG4uZm9udD10KSxlLmZvbnQ9dDt2YXIgcj0wO2cuZWFjaChpLGZ1bmN0aW9uKHQpe251bGwhPXQmJiEwIT09Zy5pc0FycmF5KHQpP3I9Zy5tZWFzdXJlVGV4dChlLGEsbyxyLHQpOmcuaXNBcnJheSh0KSYmZy5lYWNoKHQsZnVuY3Rpb24odCl7bnVsbD09dHx8Zy5pc0FycmF5KHQpfHwocj1nLm1lYXN1cmVUZXh0KGUsYSxvLHIsdCkpfSl9KTt2YXIgcz1vLmxlbmd0aC8yO2lmKHM+aS5sZW5ndGgpe2Zvcih2YXIgbD0wO2w8cztsKyspZGVsZXRlIGFbb1tsXV07by5zcGxpY2UoMCxzKX1yZXR1cm4gcn0sZy5tZWFzdXJlVGV4dD1mdW5jdGlvbih0LGUsaSxuLGEpe3ZhciBvPWVbYV07cmV0dXJuIG98fChvPWVbYV09dC5tZWFzdXJlVGV4dChhKS53aWR0aCxpLnB1c2goYSkpLG48byYmKG49byksbn0sZy5udW1iZXJPZkxhYmVsTGluZXM9ZnVuY3Rpb24odCl7dmFyIGU9MTtyZXR1cm4gZy5lYWNoKHQsZnVuY3Rpb24odCl7Zy5pc0FycmF5KHQpJiZ0Lmxlbmd0aD5lJiYoZT10Lmxlbmd0aCl9KSxlfSxnLmNvbG9yPW4/ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBDYW52YXNHcmFkaWVudCYmKHQ9YS5nbG9iYWwuZGVmYXVsdENvbG9yKSxuKHQpfTpmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS5lcnJvcihcIkNvbG9yLmpzIG5vdCBmb3VuZCFcIiksdH0sZy5nZXRIb3ZlckNvbG9yPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgQ2FudmFzUGF0dGVybj90OmcuY29sb3IodCkuc2F0dXJhdGUoLjUpLmRhcmtlbiguMSkucmdiU3RyaW5nKCl9fX0sezI2OjI2LDM6MywzNDozNCw0Njo0Nn1dLDI5OltmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dCg0Nik7ZnVuY3Rpb24gcyh0LGUpe3JldHVybiB0Lm5hdGl2ZT97eDp0LngseTp0Lnl9Om4uZ2V0UmVsYXRpdmVQb3NpdGlvbih0LGUpfWZ1bmN0aW9uIGwodCxlKXt2YXIgaSxuLGEsbyxyO2ZvcihuPTAsbz10LmRhdGEuZGF0YXNldHMubGVuZ3RoO248bzsrK24paWYodC5pc0RhdGFzZXRWaXNpYmxlKG4pKWZvcihhPTAscj0oaT10LmdldERhdGFzZXRNZXRhKG4pKS5kYXRhLmxlbmd0aDthPHI7KythKXt2YXIgcz1pLmRhdGFbYV07cy5fdmlldy5za2lwfHxlKHMpfX1mdW5jdGlvbiB1KHQsZSl7dmFyIGk9W107cmV0dXJuIGwodCxmdW5jdGlvbih0KXt0LmluUmFuZ2UoZS54LGUueSkmJmkucHVzaCh0KX0pLGl9ZnVuY3Rpb24gZCh0LG4sYSxvKXt2YXIgcj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkscz1bXTtyZXR1cm4gbCh0LGZ1bmN0aW9uKHQpe2lmKCFhfHx0LmluUmFuZ2Uobi54LG4ueSkpe3ZhciBlPXQuZ2V0Q2VudGVyUG9pbnQoKSxpPW8obixlKTtpPHI/KHM9W3RdLHI9aSk6aT09PXImJnMucHVzaCh0KX19KSxzfWZ1bmN0aW9uIGModCl7dmFyIGE9LTEhPT10LmluZGV4T2YoXCJ4XCIpLG89LTEhPT10LmluZGV4T2YoXCJ5XCIpO3JldHVybiBmdW5jdGlvbih0LGUpe3ZhciBpPWE/TWF0aC5hYnModC54LWUueCk6MCxuPW8/TWF0aC5hYnModC55LWUueSk6MDtyZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGksMikrTWF0aC5wb3cobiwyKSl9fWZ1bmN0aW9uIGEobix0LGUpe3ZhciBpPXModCxuKTtlLmF4aXM9ZS5heGlzfHxcInhcIjt2YXIgYT1jKGUuYXhpcyksbz1lLmludGVyc2VjdD91KG4saSk6ZChuLGksITEsYSkscj1bXTtyZXR1cm4gby5sZW5ndGg/KG4uZGF0YS5kYXRhc2V0cy5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7aWYobi5pc0RhdGFzZXRWaXNpYmxlKGUpKXt2YXIgaT1uLmdldERhdGFzZXRNZXRhKGUpLmRhdGFbb1swXS5faW5kZXhdO2kmJiFpLl92aWV3LnNraXAmJnIucHVzaChpKX19KSxyKTpbXX1lLmV4cG9ydHM9e21vZGVzOntzaW5nbGU6ZnVuY3Rpb24odCxlKXt2YXIgaT1zKGUsdCksbj1bXTtyZXR1cm4gbCh0LGZ1bmN0aW9uKHQpe2lmKHQuaW5SYW5nZShpLngsaS55KSlyZXR1cm4gbi5wdXNoKHQpLG59KSxuLnNsaWNlKDAsMSl9LGxhYmVsOmEsaW5kZXg6YSxkYXRhc2V0OmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1zKGUsdCk7aS5heGlzPWkuYXhpc3x8XCJ4eVwiO3ZhciBhPWMoaS5heGlzKSxvPWkuaW50ZXJzZWN0P3UodCxuKTpkKHQsbiwhMSxhKTtyZXR1cm4gMDxvLmxlbmd0aCYmKG89dC5nZXREYXRhc2V0TWV0YShvWzBdLl9kYXRhc2V0SW5kZXgpLmRhdGEpLG99LFwieC1heGlzXCI6ZnVuY3Rpb24odCxlKXtyZXR1cm4gYSh0LGUse2ludGVyc2VjdDohMX0pfSxwb2ludDpmdW5jdGlvbih0LGUpe3JldHVybiB1KHQscyhlLHQpKX0sbmVhcmVzdDpmdW5jdGlvbih0LGUsaSl7dmFyIG49cyhlLHQpO2kuYXhpcz1pLmF4aXN8fFwieHlcIjt2YXIgYT1jKGkuYXhpcyksbz1kKHQsbixpLmludGVyc2VjdCxhKTtyZXR1cm4gMTxvLmxlbmd0aCYmby5zb3J0KGZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5nZXRBcmVhKCktZS5nZXRBcmVhKCk7cmV0dXJuIDA9PT1pJiYoaT10Ll9kYXRhc2V0SW5kZXgtZS5fZGF0YXNldEluZGV4KSxpfSksby5zbGljZSgwLDEpfSx4OmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1zKGUsdCksYT1bXSxvPSExO3JldHVybiBsKHQsZnVuY3Rpb24odCl7dC5pblhSYW5nZShuLngpJiZhLnB1c2godCksdC5pblJhbmdlKG4ueCxuLnkpJiYobz0hMCl9KSxpLmludGVyc2VjdCYmIW8mJihhPVtdKSxhfSx5OmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1zKGUsdCksYT1bXSxvPSExO3JldHVybiBsKHQsZnVuY3Rpb24odCl7dC5pbllSYW5nZShuLnkpJiZhLnB1c2godCksdC5pblJhbmdlKG4ueCxuLnkpJiYobz0hMCl9KSxpLmludGVyc2VjdCYmIW8mJihhPVtdKSxhfX19fSx7NDY6NDZ9XSwzMDpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3QoMjYpLl9zZXQoXCJnbG9iYWxcIix7cmVzcG9uc2l2ZTohMCxyZXNwb25zaXZlQW5pbWF0aW9uRHVyYXRpb246MCxtYWludGFpbkFzcGVjdFJhdGlvOiEwLGV2ZW50czpbXCJtb3VzZW1vdmVcIixcIm1vdXNlb3V0XCIsXCJjbGlja1wiLFwidG91Y2hzdGFydFwiLFwidG91Y2htb3ZlXCJdLGhvdmVyOntvbkhvdmVyOm51bGwsbW9kZTpcIm5lYXJlc3RcIixpbnRlcnNlY3Q6ITAsYW5pbWF0aW9uRHVyYXRpb246NDAwfSxvbkNsaWNrOm51bGwsZGVmYXVsdENvbG9yOlwicmdiYSgwLDAsMCwwLjEpXCIsZGVmYXVsdEZvbnRDb2xvcjpcIiM2NjZcIixkZWZhdWx0Rm9udEZhbWlseTpcIidIZWx2ZXRpY2EgTmV1ZScsICdIZWx2ZXRpY2EnLCAnQXJpYWwnLCBzYW5zLXNlcmlmXCIsZGVmYXVsdEZvbnRTaXplOjEyLGRlZmF1bHRGb250U3R5bGU6XCJub3JtYWxcIixzaG93TGluZXM6ITAsZWxlbWVudHM6e30sbGF5b3V0OntwYWRkaW5nOnt0b3A6MCxyaWdodDowLGJvdHRvbTowLGxlZnQ6MH19fSksZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3QodCxlKSx0aGlzfTtyZXR1cm4gdC5DaGFydD10fX0sezI2OjI2fV0sMzE6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgQj10KDQ2KTtmdW5jdGlvbiBXKHQsZSl7cmV0dXJuIEIud2hlcmUodCxmdW5jdGlvbih0KXtyZXR1cm4gdC5wb3NpdGlvbj09PWV9KX1mdW5jdGlvbiBWKHQsYSl7dC5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuX3RtcEluZGV4Xz1lLHR9KSx0LnNvcnQoZnVuY3Rpb24odCxlKXt2YXIgaT1hP2U6dCxuPWE/dDplO3JldHVybiBpLndlaWdodD09PW4ud2VpZ2h0P2kuX3RtcEluZGV4Xy1uLl90bXBJbmRleF86aS53ZWlnaHQtbi53ZWlnaHR9KSx0LmZvckVhY2goZnVuY3Rpb24odCl7ZGVsZXRlIHQuX3RtcEluZGV4X30pfWUuZXhwb3J0cz17ZGVmYXVsdHM6e30sYWRkQm94OmZ1bmN0aW9uKHQsZSl7dC5ib3hlc3x8KHQuYm94ZXM9W10pLGUuZnVsbFdpZHRoPWUuZnVsbFdpZHRofHwhMSxlLnBvc2l0aW9uPWUucG9zaXRpb258fFwidG9wXCIsZS53ZWlnaHQ9ZS53ZWlnaHR8fDAsdC5ib3hlcy5wdXNoKGUpfSxyZW1vdmVCb3g6ZnVuY3Rpb24odCxlKXt2YXIgaT10LmJveGVzP3QuYm94ZXMuaW5kZXhPZihlKTotMTstMSE9PWkmJnQuYm94ZXMuc3BsaWNlKGksMSl9LGNvbmZpZ3VyZTpmdW5jdGlvbih0LGUsaSl7Zm9yKHZhciBuLGE9W1wiZnVsbFdpZHRoXCIsXCJwb3NpdGlvblwiLFwid2VpZ2h0XCJdLG89YS5sZW5ndGgscj0wO3I8bzsrK3Ipbj1hW3JdLGkuaGFzT3duUHJvcGVydHkobikmJihlW25dPWlbbl0pfSx1cGRhdGU6ZnVuY3Rpb24oZSxpLHQpe2lmKGUpe3ZhciBuPWUub3B0aW9ucy5sYXlvdXR8fHt9LGE9Qi5vcHRpb25zLnRvUGFkZGluZyhuLnBhZGRpbmcpLG89YS5sZWZ0LHI9YS5yaWdodCxzPWEudG9wLGw9YS5ib3R0b20sdT1XKGUuYm94ZXMsXCJsZWZ0XCIpLGQ9VyhlLmJveGVzLFwicmlnaHRcIiksYz1XKGUuYm94ZXMsXCJ0b3BcIiksaD1XKGUuYm94ZXMsXCJib3R0b21cIiksZj1XKGUuYm94ZXMsXCJjaGFydEFyZWFcIik7Vih1LCEwKSxWKGQsITEpLFYoYywhMCksVihoLCExKTt2YXIgZz1pLW8tcixwPXQtcy1sLG09cC8yLHY9KGktZy8yKS8odS5sZW5ndGgrZC5sZW5ndGgpLGI9KHQtbSkvKGMubGVuZ3RoK2gubGVuZ3RoKSx4PWcseT1wLGs9W107Qi5lYWNoKHUuY29uY2F0KGQsYyxoKSxmdW5jdGlvbih0KXt2YXIgZSxpPXQuaXNIb3Jpem9udGFsKCk7aT8oZT10LnVwZGF0ZSh0LmZ1bGxXaWR0aD9nOngsYikseS09ZS5oZWlnaHQpOihlPXQudXBkYXRlKHYseSkseC09ZS53aWR0aCksay5wdXNoKHtob3Jpem9udGFsOmksbWluU2l6ZTplLGJveDp0fSl9KTt2YXIgTT0wLHc9MCxDPTAsUz0wO0IuZWFjaChjLmNvbmNhdChoKSxmdW5jdGlvbih0KXtpZih0LmdldFBhZGRpbmcpe3ZhciBlPXQuZ2V0UGFkZGluZygpO009TWF0aC5tYXgoTSxlLmxlZnQpLHc9TWF0aC5tYXgodyxlLnJpZ2h0KX19KSxCLmVhY2godS5jb25jYXQoZCksZnVuY3Rpb24odCl7aWYodC5nZXRQYWRkaW5nKXt2YXIgZT10LmdldFBhZGRpbmcoKTtDPU1hdGgubWF4KEMsZS50b3ApLFM9TWF0aC5tYXgoUyxlLmJvdHRvbSl9fSk7dmFyIF89byxEPXIsUD1zLEk9bDtCLmVhY2godS5jb25jYXQoZCkseiksQi5lYWNoKHUsZnVuY3Rpb24odCl7Xys9dC53aWR0aH0pLEIuZWFjaChkLGZ1bmN0aW9uKHQpe0QrPXQud2lkdGh9KSxCLmVhY2goYy5jb25jYXQoaCkseiksQi5lYWNoKGMsZnVuY3Rpb24odCl7UCs9dC5oZWlnaHR9KSxCLmVhY2goaCxmdW5jdGlvbih0KXtJKz10LmhlaWdodH0pLEIuZWFjaCh1LmNvbmNhdChkKSxmdW5jdGlvbihlKXt2YXIgdD1CLmZpbmROZXh0V2hlcmUoayxmdW5jdGlvbih0KXtyZXR1cm4gdC5ib3g9PT1lfSksaT17bGVmdDowLHJpZ2h0OjAsdG9wOlAsYm90dG9tOkl9O3QmJmUudXBkYXRlKHQubWluU2l6ZS53aWR0aCx5LGkpfSksXz1vLEQ9cixQPXMsST1sLEIuZWFjaCh1LGZ1bmN0aW9uKHQpe18rPXQud2lkdGh9KSxCLmVhY2goZCxmdW5jdGlvbih0KXtEKz10LndpZHRofSksQi5lYWNoKGMsZnVuY3Rpb24odCl7UCs9dC5oZWlnaHR9KSxCLmVhY2goaCxmdW5jdGlvbih0KXtJKz10LmhlaWdodH0pO3ZhciBBPU1hdGgubWF4KE0tXywwKTtfKz1BLEQrPU1hdGgubWF4KHctRCwwKTt2YXIgVD1NYXRoLm1heChDLVAsMCk7UCs9VCxJKz1NYXRoLm1heChTLUksMCk7dmFyIEY9dC1QLUksTz1pLV8tRDtPPT09eCYmRj09PXl8fChCLmVhY2godSxmdW5jdGlvbih0KXt0LmhlaWdodD1GfSksQi5lYWNoKGQsZnVuY3Rpb24odCl7dC5oZWlnaHQ9Rn0pLEIuZWFjaChjLGZ1bmN0aW9uKHQpe3QuZnVsbFdpZHRofHwodC53aWR0aD1PKX0pLEIuZWFjaChoLGZ1bmN0aW9uKHQpe3QuZnVsbFdpZHRofHwodC53aWR0aD1PKX0pLHk9Rix4PU8pO3ZhciBSPW8rQSxMPXMrVDtCLmVhY2godS5jb25jYXQoYyksTiksUis9eCxMKz15LEIuZWFjaChkLE4pLEIuZWFjaChoLE4pLGUuY2hhcnRBcmVhPXtsZWZ0Ol8sdG9wOlAscmlnaHQ6Xyt4LGJvdHRvbTpQK3l9LEIuZWFjaChmLGZ1bmN0aW9uKHQpe3QubGVmdD1lLmNoYXJ0QXJlYS5sZWZ0LHQudG9wPWUuY2hhcnRBcmVhLnRvcCx0LnJpZ2h0PWUuY2hhcnRBcmVhLnJpZ2h0LHQuYm90dG9tPWUuY2hhcnRBcmVhLmJvdHRvbSx0LnVwZGF0ZSh4LHkpfSl9ZnVuY3Rpb24geihlKXt2YXIgdD1CLmZpbmROZXh0V2hlcmUoayxmdW5jdGlvbih0KXtyZXR1cm4gdC5ib3g9PT1lfSk7aWYodClpZihlLmlzSG9yaXpvbnRhbCgpKXt2YXIgaT17bGVmdDpNYXRoLm1heChfLE0pLHJpZ2h0Ok1hdGgubWF4KEQsdyksdG9wOjAsYm90dG9tOjB9O2UudXBkYXRlKGUuZnVsbFdpZHRoP2c6eCxwLzIsaSl9ZWxzZSBlLnVwZGF0ZSh0Lm1pblNpemUud2lkdGgseSl9ZnVuY3Rpb24gTih0KXt0LmlzSG9yaXpvbnRhbCgpPyh0LmxlZnQ9dC5mdWxsV2lkdGg/bzpfLHQucmlnaHQ9dC5mdWxsV2lkdGg/aS1yOl8reCx0LnRvcD1MLHQuYm90dG9tPUwrdC5oZWlnaHQsTD10LmJvdHRvbSk6KHQubGVmdD1SLHQucmlnaHQ9Uit0LndpZHRoLHQudG9wPVAsdC5ib3R0b209UCt5LFI9dC5yaWdodCl9fX19LHs0Njo0Nn1dLDMyOltmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9dCgyNikscz10KDQ2KTtyLl9zZXQoXCJnbG9iYWxcIix7cGx1Z2luczp7fX0pLGUuZXhwb3J0cz17X3BsdWdpbnM6W10sX2NhY2hlSWQ6MCxyZWdpc3RlcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9wbHVnaW5zO1tdLmNvbmNhdCh0KS5mb3JFYWNoKGZ1bmN0aW9uKHQpey0xPT09ZS5pbmRleE9mKHQpJiZlLnB1c2godCl9KSx0aGlzLl9jYWNoZUlkKyt9LHVucmVnaXN0ZXI6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5fcGx1Z2lucztbXS5jb25jYXQodCkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT1pLmluZGV4T2YodCk7LTEhPT1lJiZpLnNwbGljZShlLDEpfSksdGhpcy5fY2FjaGVJZCsrfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuX3BsdWdpbnM9W10sdGhpcy5fY2FjaGVJZCsrfSxjb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbHVnaW5zLmxlbmd0aH0sZ2V0QWxsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BsdWdpbnN9LG5vdGlmeTpmdW5jdGlvbih0LGUsaSl7dmFyIG4sYSxvLHIscyxsPXRoaXMuZGVzY3JpcHRvcnModCksdT1sLmxlbmd0aDtmb3Iobj0wO248dTsrK24paWYoXCJmdW5jdGlvblwiPT10eXBlb2Yocz0obz0oYT1sW25dKS5wbHVnaW4pW2VdKSYmKChyPVt0XS5jb25jYXQoaXx8W10pKS5wdXNoKGEub3B0aW9ucyksITE9PT1zLmFwcGx5KG8scikpKXJldHVybiExO3JldHVybiEwfSxkZXNjcmlwdG9yczpmdW5jdGlvbih0KXt2YXIgZT10LiRwbHVnaW5zfHwodC4kcGx1Z2lucz17fSk7aWYoZS5pZD09PXRoaXMuX2NhY2hlSWQpcmV0dXJuIGUuZGVzY3JpcHRvcnM7dmFyIG49W10sYT1bXSxpPXQmJnQuY29uZmlnfHx7fSxvPWkub3B0aW9ucyYmaS5vcHRpb25zLnBsdWdpbnN8fHt9O3JldHVybiB0aGlzLl9wbHVnaW5zLmNvbmNhdChpLnBsdWdpbnN8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKC0xPT09bi5pbmRleE9mKHQpKXt2YXIgZT10LmlkLGk9b1tlXTshMSE9PWkmJighMD09PWkmJihpPXMuY2xvbmUoci5nbG9iYWwucGx1Z2luc1tlXSkpLG4ucHVzaCh0KSxhLnB1c2goe3BsdWdpbjp0LG9wdGlvbnM6aXx8e319KSl9fSksZS5kZXNjcmlwdG9ycz1hLGUuaWQ9dGhpcy5fY2FjaGVJZCxhfSxfaW52YWxpZGF0ZTpmdW5jdGlvbih0KXtkZWxldGUgdC4kcGx1Z2luc319fSx7MjY6MjYsNDY6NDZ9XSwzMzpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciB5PXQoMjYpLG49dCgyNyksSD10KDQ2KSxhPXQoMzUpO2Z1bmN0aW9uIGsodCl7dmFyIGUsaSxuPVtdO2ZvcihlPTAsaT10Lmxlbmd0aDtlPGk7KytlKW4ucHVzaCh0W2VdLmxhYmVsKTtyZXR1cm4gbn1mdW5jdGlvbiBqKHQsZSxpKXt2YXIgbj10LmdldFBpeGVsRm9yVGljayhlKTtyZXR1cm4gaSYmKG4tPTA9PT1lPyh0LmdldFBpeGVsRm9yVGljaygxKS1uKS8yOihuLXQuZ2V0UGl4ZWxGb3JUaWNrKGUtMSkpLzIpLG59ZnVuY3Rpb24gTSh0LGUsaSl7cmV0dXJuIEguaXNBcnJheShlKT9ILmxvbmdlc3RUZXh0KHQsaSxlKTp0Lm1lYXN1cmVUZXh0KGUpLndpZHRofWZ1bmN0aW9uIHcodCl7dmFyIGU9SC52YWx1ZU9yRGVmYXVsdCxpPXkuZ2xvYmFsLG49ZSh0LmZvbnRTaXplLGkuZGVmYXVsdEZvbnRTaXplKSxhPWUodC5mb250U3R5bGUsaS5kZWZhdWx0Rm9udFN0eWxlKSxvPWUodC5mb250RmFtaWx5LGkuZGVmYXVsdEZvbnRGYW1pbHkpO3JldHVybntzaXplOm4sc3R5bGU6YSxmYW1pbHk6byxmb250OkguZm9udFN0cmluZyhuLGEsbyl9fWZ1bmN0aW9uIEModCl7cmV0dXJuIEgub3B0aW9ucy50b0xpbmVIZWlnaHQoSC52YWx1ZU9yRGVmYXVsdCh0LmxpbmVIZWlnaHQsMS4yKSxILnZhbHVlT3JEZWZhdWx0KHQuZm9udFNpemUseS5nbG9iYWwuZGVmYXVsdEZvbnRTaXplKSl9eS5fc2V0KFwic2NhbGVcIix7ZGlzcGxheTohMCxwb3NpdGlvbjpcImxlZnRcIixvZmZzZXQ6ITEsZ3JpZExpbmVzOntkaXNwbGF5OiEwLGNvbG9yOlwicmdiYSgwLCAwLCAwLCAwLjEpXCIsbGluZVdpZHRoOjEsZHJhd0JvcmRlcjohMCxkcmF3T25DaGFydEFyZWE6ITAsZHJhd1RpY2tzOiEwLHRpY2tNYXJrTGVuZ3RoOjEwLHplcm9MaW5lV2lkdGg6MSx6ZXJvTGluZUNvbG9yOlwicmdiYSgwLDAsMCwwLjI1KVwiLHplcm9MaW5lQm9yZGVyRGFzaDpbXSx6ZXJvTGluZUJvcmRlckRhc2hPZmZzZXQ6MCxvZmZzZXRHcmlkTGluZXM6ITEsYm9yZGVyRGFzaDpbXSxib3JkZXJEYXNoT2Zmc2V0OjB9LHNjYWxlTGFiZWw6e2Rpc3BsYXk6ITEsbGFiZWxTdHJpbmc6XCJcIixsaW5lSGVpZ2h0OjEuMixwYWRkaW5nOnt0b3A6NCxib3R0b206NH19LHRpY2tzOntiZWdpbkF0WmVybzohMSxtaW5Sb3RhdGlvbjowLG1heFJvdGF0aW9uOjUwLG1pcnJvcjohMSxwYWRkaW5nOjAscmV2ZXJzZTohMSxkaXNwbGF5OiEwLGF1dG9Ta2lwOiEwLGF1dG9Ta2lwUGFkZGluZzowLGxhYmVsT2Zmc2V0OjAsY2FsbGJhY2s6YS5mb3JtYXR0ZXJzLnZhbHVlcyxtaW5vcjp7fSxtYWpvcjp7fX19KSxlLmV4cG9ydHM9bi5leHRlbmQoe2dldFBhZGRpbmc6ZnVuY3Rpb24oKXtyZXR1cm57bGVmdDp0aGlzLnBhZGRpbmdMZWZ0fHwwLHRvcDp0aGlzLnBhZGRpbmdUb3B8fDAscmlnaHQ6dGhpcy5wYWRkaW5nUmlnaHR8fDAsYm90dG9tOnRoaXMucGFkZGluZ0JvdHRvbXx8MH19LGdldFRpY2tzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RpY2tzfSxtZXJnZVRpY2tzT3B0aW9uczpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy50aWNrcztmb3IodmFyIGUgaW4hMT09PXQubWlub3ImJih0Lm1pbm9yPXtkaXNwbGF5OiExfSksITE9PT10Lm1ham9yJiYodC5tYWpvcj17ZGlzcGxheTohMX0pLHQpXCJtYWpvclwiIT09ZSYmXCJtaW5vclwiIT09ZSYmKHZvaWQgMD09PXQubWlub3JbZV0mJih0Lm1pbm9yW2VdPXRbZV0pLHZvaWQgMD09PXQubWFqb3JbZV0mJih0Lm1ham9yW2VdPXRbZV0pKX0sYmVmb3JlVXBkYXRlOmZ1bmN0aW9uKCl7SC5jYWxsYmFjayh0aGlzLm9wdGlvbnMuYmVmb3JlVXBkYXRlLFt0aGlzXSl9LHVwZGF0ZTpmdW5jdGlvbih0LGUsaSl7dmFyIG4sYSxvLHIscyxsLHU9dGhpcztmb3IodS5iZWZvcmVVcGRhdGUoKSx1Lm1heFdpZHRoPXQsdS5tYXhIZWlnaHQ9ZSx1Lm1hcmdpbnM9SC5leHRlbmQoe2xlZnQ6MCxyaWdodDowLHRvcDowLGJvdHRvbTowfSxpKSx1Lmxvbmdlc3RUZXh0Q2FjaGU9dS5sb25nZXN0VGV4dENhY2hlfHx7fSx1LmJlZm9yZVNldERpbWVuc2lvbnMoKSx1LnNldERpbWVuc2lvbnMoKSx1LmFmdGVyU2V0RGltZW5zaW9ucygpLHUuYmVmb3JlRGF0YUxpbWl0cygpLHUuZGV0ZXJtaW5lRGF0YUxpbWl0cygpLHUuYWZ0ZXJEYXRhTGltaXRzKCksdS5iZWZvcmVCdWlsZFRpY2tzKCkscz11LmJ1aWxkVGlja3MoKXx8W10sdS5hZnRlckJ1aWxkVGlja3MoKSx1LmJlZm9yZVRpY2tUb0xhYmVsQ29udmVyc2lvbigpLG89dS5jb252ZXJ0VGlja3NUb0xhYmVscyhzKXx8dS50aWNrcyx1LmFmdGVyVGlja1RvTGFiZWxDb252ZXJzaW9uKCksbj0wLGE9KHUudGlja3M9bykubGVuZ3RoO248YTsrK24pcj1vW25dLChsPXNbbl0pP2wubGFiZWw9cjpzLnB1c2gobD17bGFiZWw6cixtYWpvcjohMX0pO3JldHVybiB1Ll90aWNrcz1zLHUuYmVmb3JlQ2FsY3VsYXRlVGlja1JvdGF0aW9uKCksdS5jYWxjdWxhdGVUaWNrUm90YXRpb24oKSx1LmFmdGVyQ2FsY3VsYXRlVGlja1JvdGF0aW9uKCksdS5iZWZvcmVGaXQoKSx1LmZpdCgpLHUuYWZ0ZXJGaXQoKSx1LmFmdGVyVXBkYXRlKCksdS5taW5TaXplfSxhZnRlclVwZGF0ZTpmdW5jdGlvbigpe0guY2FsbGJhY2sodGhpcy5vcHRpb25zLmFmdGVyVXBkYXRlLFt0aGlzXSl9LGJlZm9yZVNldERpbWVuc2lvbnM6ZnVuY3Rpb24oKXtILmNhbGxiYWNrKHRoaXMub3B0aW9ucy5iZWZvcmVTZXREaW1lbnNpb25zLFt0aGlzXSl9LHNldERpbWVuc2lvbnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuaXNIb3Jpem9udGFsKCk/KHQud2lkdGg9dC5tYXhXaWR0aCx0LmxlZnQ9MCx0LnJpZ2h0PXQud2lkdGgpOih0LmhlaWdodD10Lm1heEhlaWdodCx0LnRvcD0wLHQuYm90dG9tPXQuaGVpZ2h0KSx0LnBhZGRpbmdMZWZ0PTAsdC5wYWRkaW5nVG9wPTAsdC5wYWRkaW5nUmlnaHQ9MCx0LnBhZGRpbmdCb3R0b209MH0sYWZ0ZXJTZXREaW1lbnNpb25zOmZ1bmN0aW9uKCl7SC5jYWxsYmFjayh0aGlzLm9wdGlvbnMuYWZ0ZXJTZXREaW1lbnNpb25zLFt0aGlzXSl9LGJlZm9yZURhdGFMaW1pdHM6ZnVuY3Rpb24oKXtILmNhbGxiYWNrKHRoaXMub3B0aW9ucy5iZWZvcmVEYXRhTGltaXRzLFt0aGlzXSl9LGRldGVybWluZURhdGFMaW1pdHM6SC5ub29wLGFmdGVyRGF0YUxpbWl0czpmdW5jdGlvbigpe0guY2FsbGJhY2sodGhpcy5vcHRpb25zLmFmdGVyRGF0YUxpbWl0cyxbdGhpc10pfSxiZWZvcmVCdWlsZFRpY2tzOmZ1bmN0aW9uKCl7SC5jYWxsYmFjayh0aGlzLm9wdGlvbnMuYmVmb3JlQnVpbGRUaWNrcyxbdGhpc10pfSxidWlsZFRpY2tzOkgubm9vcCxhZnRlckJ1aWxkVGlja3M6ZnVuY3Rpb24oKXtILmNhbGxiYWNrKHRoaXMub3B0aW9ucy5hZnRlckJ1aWxkVGlja3MsW3RoaXNdKX0sYmVmb3JlVGlja1RvTGFiZWxDb252ZXJzaW9uOmZ1bmN0aW9uKCl7SC5jYWxsYmFjayh0aGlzLm9wdGlvbnMuYmVmb3JlVGlja1RvTGFiZWxDb252ZXJzaW9uLFt0aGlzXSl9LGNvbnZlcnRUaWNrc1RvTGFiZWxzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLnRpY2tzO3RoaXMudGlja3M9dGhpcy50aWNrcy5tYXAodC51c2VyQ2FsbGJhY2t8fHQuY2FsbGJhY2ssdGhpcyl9LGFmdGVyVGlja1RvTGFiZWxDb252ZXJzaW9uOmZ1bmN0aW9uKCl7SC5jYWxsYmFjayh0aGlzLm9wdGlvbnMuYWZ0ZXJUaWNrVG9MYWJlbENvbnZlcnNpb24sW3RoaXNdKX0sYmVmb3JlQ2FsY3VsYXRlVGlja1JvdGF0aW9uOmZ1bmN0aW9uKCl7SC5jYWxsYmFjayh0aGlzLm9wdGlvbnMuYmVmb3JlQ2FsY3VsYXRlVGlja1JvdGF0aW9uLFt0aGlzXSl9LGNhbGN1bGF0ZVRpY2tSb3RhdGlvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10LmN0eCxpPXQub3B0aW9ucy50aWNrcyxuPWsodC5fdGlja3MpLGE9dyhpKTtlLmZvbnQ9YS5mb250O3ZhciBvPWkubWluUm90YXRpb258fDA7aWYobi5sZW5ndGgmJnQub3B0aW9ucy5kaXNwbGF5JiZ0LmlzSG9yaXpvbnRhbCgpKWZvcih2YXIgcixzPUgubG9uZ2VzdFRleHQoZSxhLmZvbnQsbix0Lmxvbmdlc3RUZXh0Q2FjaGUpLGw9cyx1PXQuZ2V0UGl4ZWxGb3JUaWNrKDEpLXQuZ2V0UGl4ZWxGb3JUaWNrKDApLTY7dTxsJiZvPGkubWF4Um90YXRpb247KXt2YXIgZD1ILnRvUmFkaWFucyhvKTtpZihyPU1hdGguY29zKGQpLE1hdGguc2luKGQpKnM+dC5tYXhIZWlnaHQpe28tLTticmVha31vKyssbD1yKnN9dC5sYWJlbFJvdGF0aW9uPW99LGFmdGVyQ2FsY3VsYXRlVGlja1JvdGF0aW9uOmZ1bmN0aW9uKCl7SC5jYWxsYmFjayh0aGlzLm9wdGlvbnMuYWZ0ZXJDYWxjdWxhdGVUaWNrUm90YXRpb24sW3RoaXNdKX0sYmVmb3JlRml0OmZ1bmN0aW9uKCl7SC5jYWxsYmFjayh0aGlzLm9wdGlvbnMuYmVmb3JlRml0LFt0aGlzXSl9LGZpdDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10Lm1pblNpemU9e3dpZHRoOjAsaGVpZ2h0OjB9LGk9ayh0Ll90aWNrcyksbj10Lm9wdGlvbnMsYT1uLnRpY2tzLG89bi5zY2FsZUxhYmVsLHI9bi5ncmlkTGluZXMscz1uLmRpc3BsYXksbD10LmlzSG9yaXpvbnRhbCgpLHU9dyhhKSxkPW4uZ3JpZExpbmVzLnRpY2tNYXJrTGVuZ3RoO2lmKGUud2lkdGg9bD90LmlzRnVsbFdpZHRoKCk/dC5tYXhXaWR0aC10Lm1hcmdpbnMubGVmdC10Lm1hcmdpbnMucmlnaHQ6dC5tYXhXaWR0aDpzJiZyLmRyYXdUaWNrcz9kOjAsZS5oZWlnaHQ9bD9zJiZyLmRyYXdUaWNrcz9kOjA6dC5tYXhIZWlnaHQsby5kaXNwbGF5JiZzKXt2YXIgYz1DKG8pK0gub3B0aW9ucy50b1BhZGRpbmcoby5wYWRkaW5nKS5oZWlnaHQ7bD9lLmhlaWdodCs9YzplLndpZHRoKz1jfWlmKGEuZGlzcGxheSYmcyl7dmFyIGg9SC5sb25nZXN0VGV4dCh0LmN0eCx1LmZvbnQsaSx0Lmxvbmdlc3RUZXh0Q2FjaGUpLGY9SC5udW1iZXJPZkxhYmVsTGluZXMoaSksZz0uNSp1LnNpemUscD10Lm9wdGlvbnMudGlja3MucGFkZGluZztpZihsKXt0Lmxvbmdlc3RMYWJlbFdpZHRoPWg7dmFyIG09SC50b1JhZGlhbnModC5sYWJlbFJvdGF0aW9uKSx2PU1hdGguY29zKG0pLGI9TWF0aC5zaW4obSkqaCt1LnNpemUqZitnKihmLTEpK2c7ZS5oZWlnaHQ9TWF0aC5taW4odC5tYXhIZWlnaHQsZS5oZWlnaHQrYitwKSx0LmN0eC5mb250PXUuZm9udDt2YXIgeD1NKHQuY3R4LGlbMF0sdS5mb250KSx5PU0odC5jdHgsaVtpLmxlbmd0aC0xXSx1LmZvbnQpOzAhPT10LmxhYmVsUm90YXRpb24/KHQucGFkZGluZ0xlZnQ9XCJib3R0b21cIj09PW4ucG9zaXRpb24/dip4KzM6dipnKzMsdC5wYWRkaW5nUmlnaHQ9XCJib3R0b21cIj09PW4ucG9zaXRpb24/dipnKzM6dip5KzMpOih0LnBhZGRpbmdMZWZ0PXgvMiszLHQucGFkZGluZ1JpZ2h0PXkvMiszKX1lbHNlIGEubWlycm9yP2g9MDpoKz1wK2csZS53aWR0aD1NYXRoLm1pbih0Lm1heFdpZHRoLGUud2lkdGgraCksdC5wYWRkaW5nVG9wPXUuc2l6ZS8yLHQucGFkZGluZ0JvdHRvbT11LnNpemUvMn10LmhhbmRsZU1hcmdpbnMoKSx0LndpZHRoPWUud2lkdGgsdC5oZWlnaHQ9ZS5oZWlnaHR9LGhhbmRsZU1hcmdpbnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QubWFyZ2lucyYmKHQucGFkZGluZ0xlZnQ9TWF0aC5tYXgodC5wYWRkaW5nTGVmdC10Lm1hcmdpbnMubGVmdCwwKSx0LnBhZGRpbmdUb3A9TWF0aC5tYXgodC5wYWRkaW5nVG9wLXQubWFyZ2lucy50b3AsMCksdC5wYWRkaW5nUmlnaHQ9TWF0aC5tYXgodC5wYWRkaW5nUmlnaHQtdC5tYXJnaW5zLnJpZ2h0LDApLHQucGFkZGluZ0JvdHRvbT1NYXRoLm1heCh0LnBhZGRpbmdCb3R0b20tdC5tYXJnaW5zLmJvdHRvbSwwKSl9LGFmdGVyRml0OmZ1bmN0aW9uKCl7SC5jYWxsYmFjayh0aGlzLm9wdGlvbnMuYWZ0ZXJGaXQsW3RoaXNdKX0saXNIb3Jpem9udGFsOmZ1bmN0aW9uKCl7cmV0dXJuXCJ0b3BcIj09PXRoaXMub3B0aW9ucy5wb3NpdGlvbnx8XCJib3R0b21cIj09PXRoaXMub3B0aW9ucy5wb3NpdGlvbn0saXNGdWxsV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmZ1bGxXaWR0aH0sZ2V0UmlnaHRWYWx1ZTpmdW5jdGlvbih0KXtpZihILmlzTnVsbE9yVW5kZWYodCkpcmV0dXJuIE5hTjtpZihcIm51bWJlclwiPT10eXBlb2YgdCYmIWlzRmluaXRlKHQpKXJldHVybiBOYU47aWYodClpZih0aGlzLmlzSG9yaXpvbnRhbCgpKXtpZih2b2lkIDAhPT10LngpcmV0dXJuIHRoaXMuZ2V0UmlnaHRWYWx1ZSh0LngpfWVsc2UgaWYodm9pZCAwIT09dC55KXJldHVybiB0aGlzLmdldFJpZ2h0VmFsdWUodC55KTtyZXR1cm4gdH0sZ2V0TGFiZWxGb3JJbmRleDpILm5vb3AsZ2V0UGl4ZWxGb3JWYWx1ZTpILm5vb3AsZ2V0VmFsdWVGb3JQaXhlbDpILm5vb3AsZ2V0UGl4ZWxGb3JUaWNrOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsaT1lLm9wdGlvbnMub2Zmc2V0O2lmKGUuaXNIb3Jpem9udGFsKCkpe3ZhciBuPShlLndpZHRoLShlLnBhZGRpbmdMZWZ0K2UucGFkZGluZ1JpZ2h0KSkvTWF0aC5tYXgoZS5fdGlja3MubGVuZ3RoLShpPzA6MSksMSksYT1uKnQrZS5wYWRkaW5nTGVmdDtpJiYoYSs9bi8yKTt2YXIgbz1lLmxlZnQrTWF0aC5yb3VuZChhKTtyZXR1cm4gbys9ZS5pc0Z1bGxXaWR0aCgpP2UubWFyZ2lucy5sZWZ0OjB9dmFyIHI9ZS5oZWlnaHQtKGUucGFkZGluZ1RvcCtlLnBhZGRpbmdCb3R0b20pO3JldHVybiBlLnRvcCt0KihyLyhlLl90aWNrcy5sZW5ndGgtMSkpfSxnZXRQaXhlbEZvckRlY2ltYWw6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZihlLmlzSG9yaXpvbnRhbCgpKXt2YXIgaT0oZS53aWR0aC0oZS5wYWRkaW5nTGVmdCtlLnBhZGRpbmdSaWdodCkpKnQrZS5wYWRkaW5nTGVmdCxuPWUubGVmdCtNYXRoLnJvdW5kKGkpO3JldHVybiBuKz1lLmlzRnVsbFdpZHRoKCk/ZS5tYXJnaW5zLmxlZnQ6MH1yZXR1cm4gZS50b3ArdCplLmhlaWdodH0sZ2V0QmFzZVBpeGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UGl4ZWxGb3JWYWx1ZSh0aGlzLmdldEJhc2VWYWx1ZSgpKX0sZ2V0QmFzZVZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5taW4sZT10aGlzLm1heDtyZXR1cm4gdGhpcy5iZWdpbkF0WmVybz8wOnQ8MCYmZTwwP2U6MDx0JiYwPGU/dDowfSxfYXV0b1NraXA6ZnVuY3Rpb24odCl7dmFyIGUsaSxuLGEsbz10aGlzLHI9by5pc0hvcml6b250YWwoKSxzPW8ub3B0aW9ucy50aWNrcy5taW5vcixsPXQubGVuZ3RoLHU9SC50b1JhZGlhbnMoby5sYWJlbFJvdGF0aW9uKSxkPU1hdGguY29zKHUpLGM9by5sb25nZXN0TGFiZWxXaWR0aCpkLGg9W107Zm9yKHMubWF4VGlja3NMaW1pdCYmKGE9cy5tYXhUaWNrc0xpbWl0KSxyJiYoZT0hMSwoYytzLmF1dG9Ta2lwUGFkZGluZykqbD5vLndpZHRoLShvLnBhZGRpbmdMZWZ0K28ucGFkZGluZ1JpZ2h0KSYmKGU9MStNYXRoLmZsb29yKChjK3MuYXV0b1NraXBQYWRkaW5nKSpsLyhvLndpZHRoLShvLnBhZGRpbmdMZWZ0K28ucGFkZGluZ1JpZ2h0KSkpKSxhJiZhPGwmJihlPU1hdGgubWF4KGUsTWF0aC5mbG9vcihsL2EpKSkpLGk9MDtpPGw7aSsrKW49dFtpXSwoMTxlJiYwPGklZXx8aSVlPT0wJiZsPD1pK2UpJiZpIT09bC0xJiZkZWxldGUgbi5sYWJlbCxoLnB1c2gobik7cmV0dXJuIGh9LGRyYXc6ZnVuY3Rpb24oUyl7dmFyIF89dGhpcyxEPV8ub3B0aW9ucztpZihELmRpc3BsYXkpe3ZhciByPV8uY3R4LFA9eS5nbG9iYWwsST1ELnRpY2tzLm1pbm9yLHQ9RC50aWNrcy5tYWpvcnx8SSxBPUQuZ3JpZExpbmVzLGU9RC5zY2FsZUxhYmVsLFQ9MCE9PV8ubGFiZWxSb3RhdGlvbixGPV8uaXNIb3Jpem9udGFsKCksTz1JLmF1dG9Ta2lwP18uX2F1dG9Ta2lwKF8uZ2V0VGlja3MoKSk6Xy5nZXRUaWNrcygpLHM9SC52YWx1ZU9yRGVmYXVsdChJLmZvbnRDb2xvcixQLmRlZmF1bHRGb250Q29sb3IpLGw9dyhJKSx1PUgudmFsdWVPckRlZmF1bHQodC5mb250Q29sb3IsUC5kZWZhdWx0Rm9udENvbG9yKSxkPXcodCksUj1BLmRyYXdUaWNrcz9BLnRpY2tNYXJrTGVuZ3RoOjAsaT1ILnZhbHVlT3JEZWZhdWx0KGUuZm9udENvbG9yLFAuZGVmYXVsdEZvbnRDb2xvciksbj13KGUpLGE9SC5vcHRpb25zLnRvUGFkZGluZyhlLnBhZGRpbmcpLEw9SC50b1JhZGlhbnMoXy5sYWJlbFJvdGF0aW9uKSx6PVtdLE49Xy5vcHRpb25zLmdyaWRMaW5lcy5saW5lV2lkdGgsQj1cInJpZ2h0XCI9PT1ELnBvc2l0aW9uP18ubGVmdDpfLnJpZ2h0LU4tUixXPVwicmlnaHRcIj09PUQucG9zaXRpb24/Xy5sZWZ0K1I6Xy5yaWdodCxWPVwiYm90dG9tXCI9PT1ELnBvc2l0aW9uP18udG9wK046Xy5ib3R0b20tUi1OLEU9XCJib3R0b21cIj09PUQucG9zaXRpb24/Xy50b3ArTitSOl8uYm90dG9tK047aWYoSC5lYWNoKE8sZnVuY3Rpb24odCxlKXtpZighSC5pc051bGxPclVuZGVmKHQubGFiZWwpKXt2YXIgaSxuLGEsbyxyLHMsbCx1LGQsYyxoLGYsZyxwLG09dC5sYWJlbDtvPWU9PT1fLnplcm9MaW5lSW5kZXgmJkQub2Zmc2V0PT09QS5vZmZzZXRHcmlkTGluZXM/KGk9QS56ZXJvTGluZVdpZHRoLG49QS56ZXJvTGluZUNvbG9yLGE9QS56ZXJvTGluZUJvcmRlckRhc2gsQS56ZXJvTGluZUJvcmRlckRhc2hPZmZzZXQpOihpPUgudmFsdWVBdEluZGV4T3JEZWZhdWx0KEEubGluZVdpZHRoLGUpLG49SC52YWx1ZUF0SW5kZXhPckRlZmF1bHQoQS5jb2xvcixlKSxhPUgudmFsdWVPckRlZmF1bHQoQS5ib3JkZXJEYXNoLFAuYm9yZGVyRGFzaCksSC52YWx1ZU9yRGVmYXVsdChBLmJvcmRlckRhc2hPZmZzZXQsUC5ib3JkZXJEYXNoT2Zmc2V0KSk7dmFyIHY9XCJtaWRkbGVcIixiPVwibWlkZGxlXCIseD1JLnBhZGRpbmc7aWYoRil7dmFyIHk9Uit4O3A9XCJib3R0b21cIj09PUQucG9zaXRpb24/KGI9VD9cIm1pZGRsZVwiOlwidG9wXCIsdj1UP1wicmlnaHRcIjpcImNlbnRlclwiLF8udG9wK3kpOihiPVQ/XCJtaWRkbGVcIjpcImJvdHRvbVwiLHY9VD9cImxlZnRcIjpcImNlbnRlclwiLF8uYm90dG9tLXkpO3ZhciBrPWooXyxlLEEub2Zmc2V0R3JpZExpbmVzJiYxPE8ubGVuZ3RoKTtrPF8ubGVmdCYmKG49XCJyZ2JhKDAsMCwwLDApXCIpLGsrPUguYWxpYXNQaXhlbChpKSxnPV8uZ2V0UGl4ZWxGb3JUaWNrKGUpK0kubGFiZWxPZmZzZXQscj1sPWQ9aD1rLHM9Vix1PUUsYz1TLnRvcCxmPVMuYm90dG9tK059ZWxzZXt2YXIgTSx3PVwibGVmdFwiPT09RC5wb3NpdGlvbjtNPUkubWlycm9yPyh2PXc/XCJsZWZ0XCI6XCJyaWdodFwiLHgpOih2PXc/XCJyaWdodFwiOlwibGVmdFwiLFIreCksZz13P18ucmlnaHQtTTpfLmxlZnQrTTt2YXIgQz1qKF8sZSxBLm9mZnNldEdyaWRMaW5lcyYmMTxPLmxlbmd0aCk7QzxfLnRvcCYmKG49XCJyZ2JhKDAsMCwwLDApXCIpLEMrPUguYWxpYXNQaXhlbChpKSxwPV8uZ2V0UGl4ZWxGb3JUaWNrKGUpK0kubGFiZWxPZmZzZXQscj1CLGw9VyxkPVMubGVmdCxoPVMucmlnaHQrTixzPXU9Yz1mPUN9ei5wdXNoKHt0eDE6cix0eTE6cyx0eDI6bCx0eTI6dSx4MTpkLHkxOmMseDI6aCx5MjpmLGxhYmVsWDpnLGxhYmVsWTpwLGdsV2lkdGg6aSxnbENvbG9yOm4sZ2xCb3JkZXJEYXNoOmEsZ2xCb3JkZXJEYXNoT2Zmc2V0Om8scm90YXRpb246LTEqTCxsYWJlbDptLG1ham9yOnQubWFqb3IsdGV4dEJhc2VsaW5lOmIsdGV4dEFsaWduOnZ9KX19KSxILmVhY2goeixmdW5jdGlvbih0KXtpZihBLmRpc3BsYXkmJihyLnNhdmUoKSxyLmxpbmVXaWR0aD10LmdsV2lkdGgsci5zdHJva2VTdHlsZT10LmdsQ29sb3Isci5zZXRMaW5lRGFzaCYmKHIuc2V0TGluZURhc2godC5nbEJvcmRlckRhc2gpLHIubGluZURhc2hPZmZzZXQ9dC5nbEJvcmRlckRhc2hPZmZzZXQpLHIuYmVnaW5QYXRoKCksQS5kcmF3VGlja3MmJihyLm1vdmVUbyh0LnR4MSx0LnR5MSksci5saW5lVG8odC50eDIsdC50eTIpKSxBLmRyYXdPbkNoYXJ0QXJlYSYmKHIubW92ZVRvKHQueDEsdC55MSksci5saW5lVG8odC54Mix0LnkyKSksci5zdHJva2UoKSxyLnJlc3RvcmUoKSksSS5kaXNwbGF5KXtyLnNhdmUoKSxyLnRyYW5zbGF0ZSh0LmxhYmVsWCx0LmxhYmVsWSksci5yb3RhdGUodC5yb3RhdGlvbiksci5mb250PXQubWFqb3I/ZC5mb250OmwuZm9udCxyLmZpbGxTdHlsZT10Lm1ham9yP3U6cyxyLnRleHRCYXNlbGluZT10LnRleHRCYXNlbGluZSxyLnRleHRBbGlnbj10LnRleHRBbGlnbjt2YXIgZT10LmxhYmVsO2lmKEguaXNBcnJheShlKSlmb3IodmFyIGk9ZS5sZW5ndGgsbj0xLjUqbC5zaXplLGE9Xy5pc0hvcml6b250YWwoKT8wOi1uKihpLTEpLzIsbz0wO288aTsrK28pci5maWxsVGV4dChcIlwiK2Vbb10sMCxhKSxhKz1uO2Vsc2Ugci5maWxsVGV4dChlLDAsMCk7ci5yZXN0b3JlKCl9fSksZS5kaXNwbGF5KXt2YXIgbyxjLGg9MCxmPUMoZSkvMjtpZihGKW89Xy5sZWZ0KyhfLnJpZ2h0LV8ubGVmdCkvMixjPVwiYm90dG9tXCI9PT1ELnBvc2l0aW9uP18uYm90dG9tLWYtYS5ib3R0b206Xy50b3ArZithLnRvcDtlbHNle3ZhciBnPVwibGVmdFwiPT09RC5wb3NpdGlvbjtvPWc/Xy5sZWZ0K2YrYS50b3A6Xy5yaWdodC1mLWEudG9wLGM9Xy50b3ArKF8uYm90dG9tLV8udG9wKS8yLGg9Zz8tLjUqTWF0aC5QSTouNSpNYXRoLlBJfXIuc2F2ZSgpLHIudHJhbnNsYXRlKG8sYyksci5yb3RhdGUoaCksci50ZXh0QWxpZ249XCJjZW50ZXJcIixyLnRleHRCYXNlbGluZT1cIm1pZGRsZVwiLHIuZmlsbFN0eWxlPWksci5mb250PW4uZm9udCxyLmZpbGxUZXh0KGUubGFiZWxTdHJpbmcsMCwwKSxyLnJlc3RvcmUoKX1pZihBLmRyYXdCb3JkZXIpe3IubGluZVdpZHRoPUgudmFsdWVBdEluZGV4T3JEZWZhdWx0KEEubGluZVdpZHRoLDApLHIuc3Ryb2tlU3R5bGU9SC52YWx1ZUF0SW5kZXhPckRlZmF1bHQoQS5jb2xvciwwKTt2YXIgcD1fLmxlZnQsbT1fLnJpZ2h0K04sdj1fLnRvcCxiPV8uYm90dG9tK04seD1ILmFsaWFzUGl4ZWwoci5saW5lV2lkdGgpO0Y/KHY9Yj1cInRvcFwiPT09RC5wb3NpdGlvbj9fLmJvdHRvbTpfLnRvcCx2Kz14LGIrPXgpOihwPW09XCJsZWZ0XCI9PT1ELnBvc2l0aW9uP18ucmlnaHQ6Xy5sZWZ0LHArPXgsbSs9eCksci5iZWdpblBhdGgoKSxyLm1vdmVUbyhwLHYpLHIubGluZVRvKG0sYiksci5zdHJva2UoKX19fX0pfSx7MjY6MjYsMjc6MjcsMzU6MzUsNDY6NDZ9XSwzNDpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciBuPXQoMjYpLGE9dCg0Niksbz10KDMxKTtlLmV4cG9ydHM9e2NvbnN0cnVjdG9yczp7fSxkZWZhdWx0czp7fSxyZWdpc3RlclNjYWxlVHlwZTpmdW5jdGlvbih0LGUsaSl7dGhpcy5jb25zdHJ1Y3RvcnNbdF09ZSx0aGlzLmRlZmF1bHRzW3RdPWEuY2xvbmUoaSl9LGdldFNjYWxlQ29uc3RydWN0b3I6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3JzLmhhc093blByb3BlcnR5KHQpP3RoaXMuY29uc3RydWN0b3JzW3RdOnZvaWQgMH0sZ2V0U2NhbGVEZWZhdWx0czpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kZWZhdWx0cy5oYXNPd25Qcm9wZXJ0eSh0KT9hLm1lcmdlKHt9LFtuLnNjYWxlLHRoaXMuZGVmYXVsdHNbdF1dKTp7fX0sdXBkYXRlU2NhbGVEZWZhdWx0czpmdW5jdGlvbih0LGUpe3RoaXMuZGVmYXVsdHMuaGFzT3duUHJvcGVydHkodCkmJih0aGlzLmRlZmF1bHRzW3RdPWEuZXh0ZW5kKHRoaXMuZGVmYXVsdHNbdF0sZSkpfSxhZGRTY2FsZXNUb0xheW91dDpmdW5jdGlvbihlKXthLmVhY2goZS5zY2FsZXMsZnVuY3Rpb24odCl7dC5mdWxsV2lkdGg9dC5vcHRpb25zLmZ1bGxXaWR0aCx0LnBvc2l0aW9uPXQub3B0aW9ucy5wb3NpdGlvbix0LndlaWdodD10Lm9wdGlvbnMud2VpZ2h0LG8uYWRkQm94KGUsdCl9KX19fSx7MjY6MjYsMzE6MzEsNDY6NDZ9XSwzNTpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciBsPXQoNDYpO2UuZXhwb3J0cz17Zm9ybWF0dGVyczp7dmFsdWVzOmZ1bmN0aW9uKHQpe3JldHVybiBsLmlzQXJyYXkodCk/dDpcIlwiK3R9LGxpbmVhcjpmdW5jdGlvbih0LGUsaSl7dmFyIG49MzxpLmxlbmd0aD9pWzJdLWlbMV06aVsxXS1pWzBdOzE8TWF0aC5hYnMobikmJnQhPT1NYXRoLmZsb29yKHQpJiYobj10LU1hdGguZmxvb3IodCkpO3ZhciBhPWwubG9nMTAoTWF0aC5hYnMobikpLG89XCJcIjtpZigwIT09dClpZihNYXRoLm1heChNYXRoLmFicyhpWzBdKSxNYXRoLmFicyhpW2kubGVuZ3RoLTFdKSk8MWUtNCl7dmFyIHI9bC5sb2cxMChNYXRoLmFicyh0KSk7bz10LnRvRXhwb25lbnRpYWwoTWF0aC5mbG9vcihyKS1NYXRoLmZsb29yKGEpKX1lbHNle3ZhciBzPS0xKk1hdGguZmxvb3IoYSk7cz1NYXRoLm1heChNYXRoLm1pbihzLDIwKSwwKSxvPXQudG9GaXhlZChzKX1lbHNlIG89XCIwXCI7cmV0dXJuIG99LGxvZ2FyaXRobWljOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10L01hdGgucG93KDEwLE1hdGguZmxvb3IobC5sb2cxMCh0KSkpO3JldHVybiAwPT09dD9cIjBcIjoxPT09bnx8Mj09PW58fDU9PT1ufHwwPT09ZXx8ZT09PWkubGVuZ3RoLTE/dC50b0V4cG9uZW50aWFsKCk6XCJcIn19fX0sezQ2OjQ2fV0sMzY6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10KDI2KSxhPXQoMjcpLFI9dCg0Nik7bi5fc2V0KFwiZ2xvYmFsXCIse3Rvb2x0aXBzOntlbmFibGVkOiEwLGN1c3RvbTpudWxsLG1vZGU6XCJuZWFyZXN0XCIscG9zaXRpb246XCJhdmVyYWdlXCIsaW50ZXJzZWN0OiEwLGJhY2tncm91bmRDb2xvcjpcInJnYmEoMCwwLDAsMC44KVwiLHRpdGxlRm9udFN0eWxlOlwiYm9sZFwiLHRpdGxlU3BhY2luZzoyLHRpdGxlTWFyZ2luQm90dG9tOjYsdGl0bGVGb250Q29sb3I6XCIjZmZmXCIsdGl0bGVBbGlnbjpcImxlZnRcIixib2R5U3BhY2luZzoyLGJvZHlGb250Q29sb3I6XCIjZmZmXCIsYm9keUFsaWduOlwibGVmdFwiLGZvb3RlckZvbnRTdHlsZTpcImJvbGRcIixmb290ZXJTcGFjaW5nOjIsZm9vdGVyTWFyZ2luVG9wOjYsZm9vdGVyRm9udENvbG9yOlwiI2ZmZlwiLGZvb3RlckFsaWduOlwibGVmdFwiLHlQYWRkaW5nOjYseFBhZGRpbmc6NixjYXJldFBhZGRpbmc6MixjYXJldFNpemU6NSxjb3JuZXJSYWRpdXM6NixtdWx0aUtleUJhY2tncm91bmQ6XCIjZmZmXCIsZGlzcGxheUNvbG9yczohMCxib3JkZXJDb2xvcjpcInJnYmEoMCwwLDAsMClcIixib3JkZXJXaWR0aDowLGNhbGxiYWNrczp7YmVmb3JlVGl0bGU6Ui5ub29wLHRpdGxlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9XCJcIixuPWUubGFiZWxzLGE9bj9uLmxlbmd0aDowO2lmKDA8dC5sZW5ndGgpe3ZhciBvPXRbMF07by54TGFiZWw/aT1vLnhMYWJlbDowPGEmJm8uaW5kZXg8YSYmKGk9bltvLmluZGV4XSl9cmV0dXJuIGl9LGFmdGVyVGl0bGU6Ui5ub29wLGJlZm9yZUJvZHk6Ui5ub29wLGJlZm9yZUxhYmVsOlIubm9vcCxsYWJlbDpmdW5jdGlvbih0LGUpe3ZhciBpPWUuZGF0YXNldHNbdC5kYXRhc2V0SW5kZXhdLmxhYmVsfHxcIlwiO3JldHVybiBpJiYoaSs9XCI6IFwiKSxpKz10LnlMYWJlbH0sbGFiZWxDb2xvcjpmdW5jdGlvbih0LGUpe3ZhciBpPWUuZ2V0RGF0YXNldE1ldGEodC5kYXRhc2V0SW5kZXgpLmRhdGFbdC5pbmRleF0uX3ZpZXc7cmV0dXJue2JvcmRlckNvbG9yOmkuYm9yZGVyQ29sb3IsYmFja2dyb3VuZENvbG9yOmkuYmFja2dyb3VuZENvbG9yfX0sbGFiZWxUZXh0Q29sb3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5ib2R5Rm9udENvbG9yfSxhZnRlckxhYmVsOlIubm9vcCxhZnRlckJvZHk6Ui5ub29wLGJlZm9yZUZvb3RlcjpSLm5vb3AsZm9vdGVyOlIubm9vcCxhZnRlckZvb3RlcjpSLm5vb3B9fX0pO3ZhciBMPXthdmVyYWdlOmZ1bmN0aW9uKHQpe2lmKCF0Lmxlbmd0aClyZXR1cm4hMTt2YXIgZSxpLG49MCxhPTAsbz0wO2ZvcihlPTAsaT10Lmxlbmd0aDtlPGk7KytlKXt2YXIgcj10W2VdO2lmKHImJnIuaGFzVmFsdWUoKSl7dmFyIHM9ci50b29sdGlwUG9zaXRpb24oKTtuKz1zLngsYSs9cy55LCsrb319cmV0dXJue3g6TWF0aC5yb3VuZChuL28pLHk6TWF0aC5yb3VuZChhL28pfX0sbmVhcmVzdDpmdW5jdGlvbih0LGUpe3ZhciBpLG4sYSxvPWUueCxyPWUueSxzPU51bWJlci5QT1NJVElWRV9JTkZJTklUWTtmb3IoaT0wLG49dC5sZW5ndGg7aTxuOysraSl7dmFyIGw9dFtpXTtpZihsJiZsLmhhc1ZhbHVlKCkpe3ZhciB1PWwuZ2V0Q2VudGVyUG9pbnQoKSxkPVIuZGlzdGFuY2VCZXR3ZWVuUG9pbnRzKGUsdSk7ZDxzJiYocz1kLGE9bCl9fWlmKGEpe3ZhciBjPWEudG9vbHRpcFBvc2l0aW9uKCk7bz1jLngscj1jLnl9cmV0dXJue3g6byx5OnJ9fX07ZnVuY3Rpb24gaCh0LGUpe3ZhciBpPVIuY29sb3IodCk7cmV0dXJuIGkuYWxwaGEoZSppLmFscGhhKCkpLnJnYmFTdHJpbmcoKX1mdW5jdGlvbiByKHQsZSl7cmV0dXJuIGUmJihSLmlzQXJyYXkoZSk/QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodCxlKTp0LnB1c2goZSkpLHR9ZnVuY3Rpb24gcyh0KXtyZXR1cm4oXCJzdHJpbmdcIj09dHlwZW9mIHR8fHQgaW5zdGFuY2VvZiBTdHJpbmcpJiYtMTx0LmluZGV4T2YoXCJcXG5cIik/dC5zcGxpdChcIlxcblwiKTp0fWZ1bmN0aW9uIHoodCl7dmFyIGU9bi5nbG9iYWwsaT1SLnZhbHVlT3JEZWZhdWx0O3JldHVybnt4UGFkZGluZzp0LnhQYWRkaW5nLHlQYWRkaW5nOnQueVBhZGRpbmcseEFsaWduOnQueEFsaWduLHlBbGlnbjp0LnlBbGlnbixib2R5Rm9udENvbG9yOnQuYm9keUZvbnRDb2xvcixfYm9keUZvbnRGYW1pbHk6aSh0LmJvZHlGb250RmFtaWx5LGUuZGVmYXVsdEZvbnRGYW1pbHkpLF9ib2R5Rm9udFN0eWxlOmkodC5ib2R5Rm9udFN0eWxlLGUuZGVmYXVsdEZvbnRTdHlsZSksX2JvZHlBbGlnbjp0LmJvZHlBbGlnbixib2R5Rm9udFNpemU6aSh0LmJvZHlGb250U2l6ZSxlLmRlZmF1bHRGb250U2l6ZSksYm9keVNwYWNpbmc6dC5ib2R5U3BhY2luZyx0aXRsZUZvbnRDb2xvcjp0LnRpdGxlRm9udENvbG9yLF90aXRsZUZvbnRGYW1pbHk6aSh0LnRpdGxlRm9udEZhbWlseSxlLmRlZmF1bHRGb250RmFtaWx5KSxfdGl0bGVGb250U3R5bGU6aSh0LnRpdGxlRm9udFN0eWxlLGUuZGVmYXVsdEZvbnRTdHlsZSksdGl0bGVGb250U2l6ZTppKHQudGl0bGVGb250U2l6ZSxlLmRlZmF1bHRGb250U2l6ZSksX3RpdGxlQWxpZ246dC50aXRsZUFsaWduLHRpdGxlU3BhY2luZzp0LnRpdGxlU3BhY2luZyx0aXRsZU1hcmdpbkJvdHRvbTp0LnRpdGxlTWFyZ2luQm90dG9tLGZvb3RlckZvbnRDb2xvcjp0LmZvb3RlckZvbnRDb2xvcixfZm9vdGVyRm9udEZhbWlseTppKHQuZm9vdGVyRm9udEZhbWlseSxlLmRlZmF1bHRGb250RmFtaWx5KSxfZm9vdGVyRm9udFN0eWxlOmkodC5mb290ZXJGb250U3R5bGUsZS5kZWZhdWx0Rm9udFN0eWxlKSxmb290ZXJGb250U2l6ZTppKHQuZm9vdGVyRm9udFNpemUsZS5kZWZhdWx0Rm9udFNpemUpLF9mb290ZXJBbGlnbjp0LmZvb3RlckFsaWduLGZvb3RlclNwYWNpbmc6dC5mb290ZXJTcGFjaW5nLGZvb3Rlck1hcmdpblRvcDp0LmZvb3Rlck1hcmdpblRvcCxjYXJldFNpemU6dC5jYXJldFNpemUsY29ybmVyUmFkaXVzOnQuY29ybmVyUmFkaXVzLGJhY2tncm91bmRDb2xvcjp0LmJhY2tncm91bmRDb2xvcixvcGFjaXR5OjAsbGVnZW5kQ29sb3JCYWNrZ3JvdW5kOnQubXVsdGlLZXlCYWNrZ3JvdW5kLGRpc3BsYXlDb2xvcnM6dC5kaXNwbGF5Q29sb3JzLGJvcmRlckNvbG9yOnQuYm9yZGVyQ29sb3IsYm9yZGVyV2lkdGg6dC5ib3JkZXJXaWR0aH19ZnVuY3Rpb24gbyh0KXtyZXR1cm4gcihbXSxzKHQpKX0oZS5leHBvcnRzPWEuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5fbW9kZWw9eih0aGlzLl9vcHRpb25zKSx0aGlzLl9sYXN0QWN0aXZlPVtdfSxnZXRUaXRsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX29wdGlvbnMuY2FsbGJhY2tzLGU9dC5iZWZvcmVUaXRsZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksaT10LnRpdGxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxuPXQuYWZ0ZXJUaXRsZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksYT1bXTtyZXR1cm4gYT1yKGE9cihhPXIoYSxzKGUpKSxzKGkpKSxzKG4pKX0sZ2V0QmVmb3JlQm9keTpmdW5jdGlvbigpe3JldHVybiBvKHRoaXMuX29wdGlvbnMuY2FsbGJhY2tzLmJlZm9yZUJvZHkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZ2V0Qm9keTpmdW5jdGlvbih0LGkpe3ZhciBuPXRoaXMsYT1uLl9vcHRpb25zLmNhbGxiYWNrcyxvPVtdO3JldHVybiBSLmVhY2godCxmdW5jdGlvbih0KXt2YXIgZT17YmVmb3JlOltdLGxpbmVzOltdLGFmdGVyOltdfTtyKGUuYmVmb3JlLHMoYS5iZWZvcmVMYWJlbC5jYWxsKG4sdCxpKSkpLHIoZS5saW5lcyxhLmxhYmVsLmNhbGwobix0LGkpKSxyKGUuYWZ0ZXIscyhhLmFmdGVyTGFiZWwuY2FsbChuLHQsaSkpKSxvLnB1c2goZSl9KSxvfSxnZXRBZnRlckJvZHk6ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzLl9vcHRpb25zLmNhbGxiYWNrcy5hZnRlckJvZHkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZ2V0Rm9vdGVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fb3B0aW9ucy5jYWxsYmFja3MsZT10LmJlZm9yZUZvb3Rlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksaT10LmZvb3Rlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksbj10LmFmdGVyRm9vdGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhPVtdO3JldHVybiBhPXIoYT1yKGE9cihhLHMoZSkpLHMoaSkpLHMobikpfSx1cGRhdGU6ZnVuY3Rpb24odCl7dmFyIGUsaSxuLGEsbyxyLHMsbCx1LGQsYyxoLGYsZyxwLG0sdixiLHgseSxrPXRoaXMsTT1rLl9vcHRpb25zLHc9ay5fbW9kZWwsQz1rLl9tb2RlbD16KE0pLFM9ay5fYWN0aXZlLF89ay5fZGF0YSxEPXt4QWxpZ246dy54QWxpZ24seUFsaWduOncueUFsaWdufSxQPXt4OncueCx5OncueX0sST17d2lkdGg6dy53aWR0aCxoZWlnaHQ6dy5oZWlnaHR9LEE9e3g6dy5jYXJldFgseTp3LmNhcmV0WX07aWYoUy5sZW5ndGgpe0Mub3BhY2l0eT0xO3ZhciBUPVtdLEY9W107QT1MW00ucG9zaXRpb25dLmNhbGwoayxTLGsuX2V2ZW50UG9zaXRpb24pO3ZhciBPPVtdO2ZvcihlPTAsaT1TLmxlbmd0aDtlPGk7KytlKU8ucHVzaCgobT1TW2VdLGI9dj12b2lkIDAsdj1tLl94U2NhbGUsYj1tLl95U2NhbGV8fG0uX3NjYWxlLHg9bS5faW5kZXgseT1tLl9kYXRhc2V0SW5kZXgse3hMYWJlbDp2P3YuZ2V0TGFiZWxGb3JJbmRleCh4LHkpOlwiXCIseUxhYmVsOmI/Yi5nZXRMYWJlbEZvckluZGV4KHgseSk6XCJcIixpbmRleDp4LGRhdGFzZXRJbmRleDp5LHg6bS5fbW9kZWwueCx5Om0uX21vZGVsLnl9KSk7TS5maWx0ZXImJihPPU8uZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiBNLmZpbHRlcih0LF8pfSkpLE0uaXRlbVNvcnQmJihPPU8uc29ydChmdW5jdGlvbih0LGUpe3JldHVybiBNLml0ZW1Tb3J0KHQsZSxfKX0pKSxSLmVhY2goTyxmdW5jdGlvbih0KXtULnB1c2goTS5jYWxsYmFja3MubGFiZWxDb2xvci5jYWxsKGssdCxrLl9jaGFydCkpLEYucHVzaChNLmNhbGxiYWNrcy5sYWJlbFRleHRDb2xvci5jYWxsKGssdCxrLl9jaGFydCkpfSksQy50aXRsZT1rLmdldFRpdGxlKE8sXyksQy5iZWZvcmVCb2R5PWsuZ2V0QmVmb3JlQm9keShPLF8pLEMuYm9keT1rLmdldEJvZHkoTyxfKSxDLmFmdGVyQm9keT1rLmdldEFmdGVyQm9keShPLF8pLEMuZm9vdGVyPWsuZ2V0Rm9vdGVyKE8sXyksQy54PU1hdGgucm91bmQoQS54KSxDLnk9TWF0aC5yb3VuZChBLnkpLEMuY2FyZXRQYWRkaW5nPU0uY2FyZXRQYWRkaW5nLEMubGFiZWxDb2xvcnM9VCxDLmxhYmVsVGV4dENvbG9ycz1GLEMuZGF0YVBvaW50cz1PLEQ9ZnVuY3Rpb24odCxlKXt2YXIgaSxuLGEsbyxyLHM9dC5fbW9kZWwsbD10Ll9jaGFydCx1PXQuX2NoYXJ0LmNoYXJ0QXJlYSxkPVwiY2VudGVyXCIsYz1cImNlbnRlclwiO3MueTxlLmhlaWdodD9jPVwidG9wXCI6cy55PmwuaGVpZ2h0LWUuaGVpZ2h0JiYoYz1cImJvdHRvbVwiKTt2YXIgaD0odS5sZWZ0K3UucmlnaHQpLzIsZj0odS50b3ArdS5ib3R0b20pLzI7bj1cImNlbnRlclwiPT09Yz8oaT1mdW5jdGlvbih0KXtyZXR1cm4gdDw9aH0sZnVuY3Rpb24odCl7cmV0dXJuIGg8dH0pOihpPWZ1bmN0aW9uKHQpe3JldHVybiB0PD1lLndpZHRoLzJ9LGZ1bmN0aW9uKHQpe3JldHVybiB0Pj1sLndpZHRoLWUud2lkdGgvMn0pLGE9ZnVuY3Rpb24odCl7cmV0dXJuIHQrZS53aWR0aCtzLmNhcmV0U2l6ZStzLmNhcmV0UGFkZGluZz5sLndpZHRofSxvPWZ1bmN0aW9uKHQpe3JldHVybiB0LWUud2lkdGgtcy5jYXJldFNpemUtcy5jYXJldFBhZGRpbmc8MH0scj1mdW5jdGlvbih0KXtyZXR1cm4gdDw9Zj9cInRvcFwiOlwiYm90dG9tXCJ9LGkocy54KT8oZD1cImxlZnRcIixhKHMueCkmJihkPVwiY2VudGVyXCIsYz1yKHMueSkpKTpuKHMueCkmJihkPVwicmlnaHRcIixvKHMueCkmJihkPVwiY2VudGVyXCIsYz1yKHMueSkpKTt2YXIgZz10Ll9vcHRpb25zO3JldHVybnt4QWxpZ246Zy54QWxpZ24/Zy54QWxpZ246ZCx5QWxpZ246Zy55QWxpZ24/Zy55QWxpZ246Y319KHRoaXMsST1mdW5jdGlvbih0LGUpe3ZhciBpPXQuX2NoYXJ0LmN0eCxuPTIqZS55UGFkZGluZyxhPTAsbz1lLmJvZHkscj1vLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiB0K2UuYmVmb3JlLmxlbmd0aCtlLmxpbmVzLmxlbmd0aCtlLmFmdGVyLmxlbmd0aH0sMCk7cis9ZS5iZWZvcmVCb2R5Lmxlbmd0aCtlLmFmdGVyQm9keS5sZW5ndGg7dmFyIHM9ZS50aXRsZS5sZW5ndGgsbD1lLmZvb3Rlci5sZW5ndGgsdT1lLnRpdGxlRm9udFNpemUsZD1lLmJvZHlGb250U2l6ZSxjPWUuZm9vdGVyRm9udFNpemU7bis9cyp1LG4rPXM/KHMtMSkqZS50aXRsZVNwYWNpbmc6MCxuKz1zP2UudGl0bGVNYXJnaW5Cb3R0b206MCxuKz1yKmQsbis9cj8oci0xKSplLmJvZHlTcGFjaW5nOjAsbis9bD9lLmZvb3Rlck1hcmdpblRvcDowLG4rPWwqYyxuKz1sPyhsLTEpKmUuZm9vdGVyU3BhY2luZzowO3ZhciBoPTAsZj1mdW5jdGlvbih0KXthPU1hdGgubWF4KGEsaS5tZWFzdXJlVGV4dCh0KS53aWR0aCtoKX07cmV0dXJuIGkuZm9udD1SLmZvbnRTdHJpbmcodSxlLl90aXRsZUZvbnRTdHlsZSxlLl90aXRsZUZvbnRGYW1pbHkpLFIuZWFjaChlLnRpdGxlLGYpLGkuZm9udD1SLmZvbnRTdHJpbmcoZCxlLl9ib2R5Rm9udFN0eWxlLGUuX2JvZHlGb250RmFtaWx5KSxSLmVhY2goZS5iZWZvcmVCb2R5LmNvbmNhdChlLmFmdGVyQm9keSksZiksaD1lLmRpc3BsYXlDb2xvcnM/ZCsyOjAsUi5lYWNoKG8sZnVuY3Rpb24odCl7Ui5lYWNoKHQuYmVmb3JlLGYpLFIuZWFjaCh0LmxpbmVzLGYpLFIuZWFjaCh0LmFmdGVyLGYpfSksaD0wLGkuZm9udD1SLmZvbnRTdHJpbmcoYyxlLl9mb290ZXJGb250U3R5bGUsZS5fZm9vdGVyRm9udEZhbWlseSksUi5lYWNoKGUuZm9vdGVyLGYpLHt3aWR0aDphKz0yKmUueFBhZGRpbmcsaGVpZ2h0Om59fSh0aGlzLEMpKSxuPUMsYT1JLG89RCxyPWsuX2NoYXJ0LHM9bi54LGw9bi55LHU9bi5jYXJldFNpemUsZD1uLmNhcmV0UGFkZGluZyxjPW4uY29ybmVyUmFkaXVzLGg9by54QWxpZ24sZj1vLnlBbGlnbixnPXUrZCxwPWMrZCxcInJpZ2h0XCI9PT1oP3MtPWEud2lkdGg6XCJjZW50ZXJcIj09PWgmJigocy09YS53aWR0aC8yKSthLndpZHRoPnIud2lkdGgmJihzPXIud2lkdGgtYS53aWR0aCksczwwJiYocz0wKSksXCJ0b3BcIj09PWY/bCs9ZzpsLT1cImJvdHRvbVwiPT09Zj9hLmhlaWdodCtnOmEuaGVpZ2h0LzIsXCJjZW50ZXJcIj09PWY/XCJsZWZ0XCI9PT1oP3MrPWc6XCJyaWdodFwiPT09aCYmKHMtPWcpOlwibGVmdFwiPT09aD9zLT1wOlwicmlnaHRcIj09PWgmJihzKz1wKSxQPXt4OnMseTpsfX1lbHNlIEMub3BhY2l0eT0wO3JldHVybiBDLnhBbGlnbj1ELnhBbGlnbixDLnlBbGlnbj1ELnlBbGlnbixDLng9UC54LEMueT1QLnksQy53aWR0aD1JLndpZHRoLEMuaGVpZ2h0PUkuaGVpZ2h0LEMuY2FyZXRYPUEueCxDLmNhcmV0WT1BLnksay5fbW9kZWw9Qyx0JiZNLmN1c3RvbSYmTS5jdXN0b20uY2FsbChrLEMpLGt9LGRyYXdDYXJldDpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2NoYXJ0LmN0eCxuPXRoaXMuX3ZpZXcsYT10aGlzLmdldENhcmV0UG9zaXRpb24odCxlLG4pO2kubGluZVRvKGEueDEsYS55MSksaS5saW5lVG8oYS54MixhLnkyKSxpLmxpbmVUbyhhLngzLGEueTMpfSxnZXRDYXJldFBvc2l0aW9uOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbixhLG8scixzLGwsdT1pLmNhcmV0U2l6ZSxkPWkuY29ybmVyUmFkaXVzLGM9aS54QWxpZ24saD1pLnlBbGlnbixmPXQueCxnPXQueSxwPWUud2lkdGgsbT1lLmhlaWdodDtpZihcImNlbnRlclwiPT09aClzPWcrbS8yLGw9XCJsZWZ0XCI9PT1jPyhhPShuPWYpLXUsbz1uLHI9cyt1LHMtdSk6KGE9KG49ZitwKSt1LG89bixyPXMtdSxzK3UpO2Vsc2UgaWYobz0obj1cImxlZnRcIj09PWM/KGE9ZitkK3UpLXU6XCJyaWdodFwiPT09Yz8oYT1mK3AtZC11KS11OihhPWkuY2FyZXRYKS11LGErdSksXCJ0b3BcIj09PWgpcz0ocj1nKS11LGw9cjtlbHNle3M9KHI9ZyttKSt1LGw9cjt2YXIgdj1vO289bixuPXZ9cmV0dXJue3gxOm4seDI6YSx4MzpvLHkxOnIseTI6cyx5MzpsfX0sZHJhd1RpdGxlOmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBhPWUudGl0bGU7aWYoYS5sZW5ndGgpe2kudGV4dEFsaWduPWUuX3RpdGxlQWxpZ24saS50ZXh0QmFzZWxpbmU9XCJ0b3BcIjt2YXIgbyxyLHM9ZS50aXRsZUZvbnRTaXplLGw9ZS50aXRsZVNwYWNpbmc7Zm9yKGkuZmlsbFN0eWxlPWgoZS50aXRsZUZvbnRDb2xvcixuKSxpLmZvbnQ9Ui5mb250U3RyaW5nKHMsZS5fdGl0bGVGb250U3R5bGUsZS5fdGl0bGVGb250RmFtaWx5KSxvPTAscj1hLmxlbmd0aDtvPHI7KytvKWkuZmlsbFRleHQoYVtvXSx0LngsdC55KSx0LnkrPXMrbCxvKzE9PT1hLmxlbmd0aCYmKHQueSs9ZS50aXRsZU1hcmdpbkJvdHRvbS1sKX19LGRyYXdCb2R5OmZ1bmN0aW9uKG4sYSxvLHIpe3ZhciBzPWEuYm9keUZvbnRTaXplLGU9YS5ib2R5U3BhY2luZyx0PWEuYm9keTtvLnRleHRBbGlnbj1hLl9ib2R5QWxpZ24sby50ZXh0QmFzZWxpbmU9XCJ0b3BcIixvLmZvbnQ9Ui5mb250U3RyaW5nKHMsYS5fYm9keUZvbnRTdHlsZSxhLl9ib2R5Rm9udEZhbWlseSk7dmFyIGk9MCxsPWZ1bmN0aW9uKHQpe28uZmlsbFRleHQodCxuLngraSxuLnkpLG4ueSs9cytlfTtvLmZpbGxTdHlsZT1oKGEuYm9keUZvbnRDb2xvcixyKSxSLmVhY2goYS5iZWZvcmVCb2R5LGwpO3ZhciB1PWEuZGlzcGxheUNvbG9ycztpPXU/cysyOjAsUi5lYWNoKHQsZnVuY3Rpb24odCxlKXt2YXIgaT1oKGEubGFiZWxUZXh0Q29sb3JzW2VdLHIpO28uZmlsbFN0eWxlPWksUi5lYWNoKHQuYmVmb3JlLGwpLFIuZWFjaCh0LmxpbmVzLGZ1bmN0aW9uKHQpe3UmJihvLmZpbGxTdHlsZT1oKGEubGVnZW5kQ29sb3JCYWNrZ3JvdW5kLHIpLG8uZmlsbFJlY3Qobi54LG4ueSxzLHMpLG8ubGluZVdpZHRoPTEsby5zdHJva2VTdHlsZT1oKGEubGFiZWxDb2xvcnNbZV0uYm9yZGVyQ29sb3Isciksby5zdHJva2VSZWN0KG4ueCxuLnkscyxzKSxvLmZpbGxTdHlsZT1oKGEubGFiZWxDb2xvcnNbZV0uYmFja2dyb3VuZENvbG9yLHIpLG8uZmlsbFJlY3Qobi54KzEsbi55KzEscy0yLHMtMiksby5maWxsU3R5bGU9aSksbCh0KX0pLFIuZWFjaCh0LmFmdGVyLGwpfSksaT0wLFIuZWFjaChhLmFmdGVyQm9keSxsKSxuLnktPWV9LGRyYXdGb290ZXI6ZnVuY3Rpb24oZSxpLG4sdCl7dmFyIGE9aS5mb290ZXI7YS5sZW5ndGgmJihlLnkrPWkuZm9vdGVyTWFyZ2luVG9wLG4udGV4dEFsaWduPWkuX2Zvb3RlckFsaWduLG4udGV4dEJhc2VsaW5lPVwidG9wXCIsbi5maWxsU3R5bGU9aChpLmZvb3RlckZvbnRDb2xvcix0KSxuLmZvbnQ9Ui5mb250U3RyaW5nKGkuZm9vdGVyRm9udFNpemUsaS5fZm9vdGVyRm9udFN0eWxlLGkuX2Zvb3RlckZvbnRGYW1pbHkpLFIuZWFjaChhLGZ1bmN0aW9uKHQpe24uZmlsbFRleHQodCxlLngsZS55KSxlLnkrPWkuZm9vdGVyRm9udFNpemUraS5mb290ZXJTcGFjaW5nfSkpfSxkcmF3QmFja2dyb3VuZDpmdW5jdGlvbih0LGUsaSxuLGEpe2kuZmlsbFN0eWxlPWgoZS5iYWNrZ3JvdW5kQ29sb3IsYSksaS5zdHJva2VTdHlsZT1oKGUuYm9yZGVyQ29sb3IsYSksaS5saW5lV2lkdGg9ZS5ib3JkZXJXaWR0aDt2YXIgbz1lLnhBbGlnbixyPWUueUFsaWduLHM9dC54LGw9dC55LHU9bi53aWR0aCxkPW4uaGVpZ2h0LGM9ZS5jb3JuZXJSYWRpdXM7aS5iZWdpblBhdGgoKSxpLm1vdmVUbyhzK2MsbCksXCJ0b3BcIj09PXImJnRoaXMuZHJhd0NhcmV0KHQsbiksaS5saW5lVG8ocyt1LWMsbCksaS5xdWFkcmF0aWNDdXJ2ZVRvKHMrdSxsLHMrdSxsK2MpLFwiY2VudGVyXCI9PT1yJiZcInJpZ2h0XCI9PT1vJiZ0aGlzLmRyYXdDYXJldCh0LG4pLGkubGluZVRvKHMrdSxsK2QtYyksaS5xdWFkcmF0aWNDdXJ2ZVRvKHMrdSxsK2Qscyt1LWMsbCtkKSxcImJvdHRvbVwiPT09ciYmdGhpcy5kcmF3Q2FyZXQodCxuKSxpLmxpbmVUbyhzK2MsbCtkKSxpLnF1YWRyYXRpY0N1cnZlVG8ocyxsK2QscyxsK2QtYyksXCJjZW50ZXJcIj09PXImJlwibGVmdFwiPT09byYmdGhpcy5kcmF3Q2FyZXQodCxuKSxpLmxpbmVUbyhzLGwrYyksaS5xdWFkcmF0aWNDdXJ2ZVRvKHMsbCxzK2MsbCksaS5jbG9zZVBhdGgoKSxpLmZpbGwoKSwwPGUuYm9yZGVyV2lkdGgmJmkuc3Ryb2tlKCl9LGRyYXc6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9jaGFydC5jdHgsZT10aGlzLl92aWV3O2lmKDAhPT1lLm9wYWNpdHkpe3ZhciBpPXt3aWR0aDplLndpZHRoLGhlaWdodDplLmhlaWdodH0sbj17eDplLngseTplLnl9LGE9TWF0aC5hYnMoZS5vcGFjaXR5PC4wMDEpPzA6ZS5vcGFjaXR5LG89ZS50aXRsZS5sZW5ndGh8fGUuYmVmb3JlQm9keS5sZW5ndGh8fGUuYm9keS5sZW5ndGh8fGUuYWZ0ZXJCb2R5Lmxlbmd0aHx8ZS5mb290ZXIubGVuZ3RoO3RoaXMuX29wdGlvbnMuZW5hYmxlZCYmbyYmKHRoaXMuZHJhd0JhY2tncm91bmQobixlLHQsaSxhKSxuLngrPWUueFBhZGRpbmcsbi55Kz1lLnlQYWRkaW5nLHRoaXMuZHJhd1RpdGxlKG4sZSx0LGEpLHRoaXMuZHJhd0JvZHkobixlLHQsYSksdGhpcy5kcmF3Rm9vdGVyKG4sZSx0LGEpKX19LGhhbmRsZUV2ZW50OmZ1bmN0aW9uKHQpe3ZhciBlLGk9dGhpcyxuPWkuX29wdGlvbnM7cmV0dXJuIGkuX2xhc3RBY3RpdmU9aS5fbGFzdEFjdGl2ZXx8W10sXCJtb3VzZW91dFwiPT09dC50eXBlP2kuX2FjdGl2ZT1bXTppLl9hY3RpdmU9aS5fY2hhcnQuZ2V0RWxlbWVudHNBdEV2ZW50Rm9yTW9kZSh0LG4ubW9kZSxuKSwoZT0hUi5hcnJheUVxdWFscyhpLl9hY3RpdmUsaS5fbGFzdEFjdGl2ZSkpJiYoaS5fbGFzdEFjdGl2ZT1pLl9hY3RpdmUsKG4uZW5hYmxlZHx8bi5jdXN0b20pJiYoaS5fZXZlbnRQb3NpdGlvbj17eDp0LngseTp0Lnl9LGkudXBkYXRlKCEwKSxpLnBpdm90KCkpKSxlfX0pKS5wb3NpdGlvbmVycz1MfSx7MjY6MjYsMjc6MjcsNDY6NDZ9XSwzNzpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciBuPXQoMjYpLGE9dCgyNyksZD10KDQ2KTtuLl9zZXQoXCJnbG9iYWxcIix7ZWxlbWVudHM6e2FyYzp7YmFja2dyb3VuZENvbG9yOm4uZ2xvYmFsLmRlZmF1bHRDb2xvcixib3JkZXJDb2xvcjpcIiNmZmZcIixib3JkZXJXaWR0aDoyfX19KSxlLmV4cG9ydHM9YS5leHRlbmQoe2luTGFiZWxSYW5nZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl92aWV3O3JldHVybiEhZSYmTWF0aC5wb3codC1lLngsMik8TWF0aC5wb3coZS5yYWRpdXMrZS5ob3ZlclJhZGl1cywyKX0saW5SYW5nZTpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX3ZpZXc7aWYoaSl7Zm9yKHZhciBuPWQuZ2V0QW5nbGVGcm9tUG9pbnQoaSx7eDp0LHk6ZX0pLGE9bi5hbmdsZSxvPW4uZGlzdGFuY2Uscj1pLnN0YXJ0QW5nbGUscz1pLmVuZEFuZ2xlO3M8cjspcys9MipNYXRoLlBJO2Zvcig7czxhOylhLT0yKk1hdGguUEk7Zm9yKDthPHI7KWErPTIqTWF0aC5QSTt2YXIgbD1yPD1hJiZhPD1zLHU9bz49aS5pbm5lclJhZGl1cyYmbzw9aS5vdXRlclJhZGl1cztyZXR1cm4gbCYmdX1yZXR1cm4hMX0sZ2V0Q2VudGVyUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl92aWV3LGU9KHQuc3RhcnRBbmdsZSt0LmVuZEFuZ2xlKS8yLGk9KHQuaW5uZXJSYWRpdXMrdC5vdXRlclJhZGl1cykvMjtyZXR1cm57eDp0LngrTWF0aC5jb3MoZSkqaSx5OnQueStNYXRoLnNpbihlKSppfX0sZ2V0QXJlYTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3ZpZXc7cmV0dXJuIE1hdGguUEkqKCh0LmVuZEFuZ2xlLXQuc3RhcnRBbmdsZSkvKDIqTWF0aC5QSSkpKihNYXRoLnBvdyh0Lm91dGVyUmFkaXVzLDIpLU1hdGgucG93KHQuaW5uZXJSYWRpdXMsMikpfSx0b29sdGlwUG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl92aWV3LGU9dC5zdGFydEFuZ2xlKyh0LmVuZEFuZ2xlLXQuc3RhcnRBbmdsZSkvMixpPSh0Lm91dGVyUmFkaXVzLXQuaW5uZXJSYWRpdXMpLzIrdC5pbm5lclJhZGl1cztyZXR1cm57eDp0LngrTWF0aC5jb3MoZSkqaSx5OnQueStNYXRoLnNpbihlKSppfX0sZHJhdzpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2NoYXJ0LmN0eCxlPXRoaXMuX3ZpZXcsaT1lLnN0YXJ0QW5nbGUsbj1lLmVuZEFuZ2xlO3QuYmVnaW5QYXRoKCksdC5hcmMoZS54LGUueSxlLm91dGVyUmFkaXVzLGksbiksdC5hcmMoZS54LGUueSxlLmlubmVyUmFkaXVzLG4saSwhMCksdC5jbG9zZVBhdGgoKSx0LnN0cm9rZVN0eWxlPWUuYm9yZGVyQ29sb3IsdC5saW5lV2lkdGg9ZS5ib3JkZXJXaWR0aCx0LmZpbGxTdHlsZT1lLmJhY2tncm91bmRDb2xvcix0LmZpbGwoKSx0LmxpbmVKb2luPVwiYmV2ZWxcIixlLmJvcmRlcldpZHRoJiZ0LnN0cm9rZSgpfX0pfSx7MjY6MjYsMjc6MjcsNDY6NDZ9XSwzODpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciBuPXQoMjYpLGE9dCgyNyksZD10KDQ2KSxjPW4uZ2xvYmFsO24uX3NldChcImdsb2JhbFwiLHtlbGVtZW50czp7bGluZTp7dGVuc2lvbjouNCxiYWNrZ3JvdW5kQ29sb3I6Yy5kZWZhdWx0Q29sb3IsYm9yZGVyV2lkdGg6Myxib3JkZXJDb2xvcjpjLmRlZmF1bHRDb2xvcixib3JkZXJDYXBTdHlsZTpcImJ1dHRcIixib3JkZXJEYXNoOltdLGJvcmRlckRhc2hPZmZzZXQ6MCxib3JkZXJKb2luU3R5bGU6XCJtaXRlclwiLGNhcEJlemllclBvaW50czohMCxmaWxsOiEwfX19KSxlLmV4cG9ydHM9YS5leHRlbmQoe2RyYXc6ZnVuY3Rpb24oKXt2YXIgdCxlLGksbixhPXRoaXMuX3ZpZXcsbz10aGlzLl9jaGFydC5jdHgscj1hLnNwYW5HYXBzLHM9dGhpcy5fY2hpbGRyZW4uc2xpY2UoKSxsPWMuZWxlbWVudHMubGluZSx1PS0xO2Zvcih0aGlzLl9sb29wJiZzLmxlbmd0aCYmcy5wdXNoKHNbMF0pLG8uc2F2ZSgpLG8ubGluZUNhcD1hLmJvcmRlckNhcFN0eWxlfHxsLmJvcmRlckNhcFN0eWxlLG8uc2V0TGluZURhc2gmJm8uc2V0TGluZURhc2goYS5ib3JkZXJEYXNofHxsLmJvcmRlckRhc2gpLG8ubGluZURhc2hPZmZzZXQ9YS5ib3JkZXJEYXNoT2Zmc2V0fHxsLmJvcmRlckRhc2hPZmZzZXQsby5saW5lSm9pbj1hLmJvcmRlckpvaW5TdHlsZXx8bC5ib3JkZXJKb2luU3R5bGUsby5saW5lV2lkdGg9YS5ib3JkZXJXaWR0aHx8bC5ib3JkZXJXaWR0aCxvLnN0cm9rZVN0eWxlPWEuYm9yZGVyQ29sb3J8fGMuZGVmYXVsdENvbG9yLG8uYmVnaW5QYXRoKCksdT0tMSx0PTA7dDxzLmxlbmd0aDsrK3QpZT1zW3RdLGk9ZC5wcmV2aW91c0l0ZW0ocyx0KSxuPWUuX3ZpZXcsMD09PXQ/bi5za2lwfHwoby5tb3ZlVG8obi54LG4ueSksdT10KTooaT0tMT09PXU/aTpzW3VdLG4uc2tpcHx8KHUhPT10LTEmJiFyfHwtMT09PXU/by5tb3ZlVG8obi54LG4ueSk6ZC5jYW52YXMubGluZVRvKG8saS5fdmlldyxlLl92aWV3KSx1PXQpKTtvLnN0cm9rZSgpLG8ucmVzdG9yZSgpfX0pfSx7MjY6MjYsMjc6MjcsNDY6NDZ9XSwzOTpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciB1PXQoMjYpLG49dCgyNyksZD10KDQ2KSxjPXUuZ2xvYmFsLmRlZmF1bHRDb2xvcjtmdW5jdGlvbiBhKHQpe3ZhciBlPXRoaXMuX3ZpZXc7cmV0dXJuISFlJiZNYXRoLmFicyh0LWUueCk8ZS5yYWRpdXMrZS5oaXRSYWRpdXN9dS5fc2V0KFwiZ2xvYmFsXCIse2VsZW1lbnRzOntwb2ludDp7cmFkaXVzOjMscG9pbnRTdHlsZTpcImNpcmNsZVwiLGJhY2tncm91bmRDb2xvcjpjLGJvcmRlckNvbG9yOmMsYm9yZGVyV2lkdGg6MSxoaXRSYWRpdXM6MSxob3ZlclJhZGl1czo0LGhvdmVyQm9yZGVyV2lkdGg6MX19fSksZS5leHBvcnRzPW4uZXh0ZW5kKHtpblJhbmdlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fdmlldztyZXR1cm4hIWkmJk1hdGgucG93KHQtaS54LDIpK01hdGgucG93KGUtaS55LDIpPE1hdGgucG93KGkuaGl0UmFkaXVzK2kucmFkaXVzLDIpfSxpbkxhYmVsUmFuZ2U6YSxpblhSYW5nZTphLGluWVJhbmdlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3ZpZXc7cmV0dXJuISFlJiZNYXRoLmFicyh0LWUueSk8ZS5yYWRpdXMrZS5oaXRSYWRpdXN9LGdldENlbnRlclBvaW50OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fdmlldztyZXR1cm57eDp0LngseTp0Lnl9fSxnZXRBcmVhOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguUEkqTWF0aC5wb3codGhpcy5fdmlldy5yYWRpdXMsMil9LHRvb2x0aXBQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3ZpZXc7cmV0dXJue3g6dC54LHk6dC55LHBhZGRpbmc6dC5yYWRpdXMrdC5ib3JkZXJXaWR0aH19LGRyYXc6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fdmlldyxpPXRoaXMuX21vZGVsLG49dGhpcy5fY2hhcnQuY3R4LGE9ZS5wb2ludFN0eWxlLG89ZS5yb3RhdGlvbixyPWUucmFkaXVzLHM9ZS54LGw9ZS55O2Uuc2tpcHx8KHZvaWQgMD09PXR8fGkueD49dC5sZWZ0JiYxLjAxKnQucmlnaHQ+PWkueCYmaS55Pj10LnRvcCYmMS4wMSp0LmJvdHRvbT49aS55KSYmKG4uc3Ryb2tlU3R5bGU9ZS5ib3JkZXJDb2xvcnx8YyxuLmxpbmVXaWR0aD1kLnZhbHVlT3JEZWZhdWx0KGUuYm9yZGVyV2lkdGgsdS5nbG9iYWwuZWxlbWVudHMucG9pbnQuYm9yZGVyV2lkdGgpLG4uZmlsbFN0eWxlPWUuYmFja2dyb3VuZENvbG9yfHxjLGQuY2FudmFzLmRyYXdQb2ludChuLGEscixzLGwsbykpfX0pfSx7MjY6MjYsMjc6MjcsNDY6NDZ9XSw0MDpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciBuPXQoMjYpLGE9dCgyNyk7ZnVuY3Rpb24gbCh0KXtyZXR1cm4gdm9pZCAwIT09dC5fdmlldy53aWR0aH1mdW5jdGlvbiBvKHQpe3ZhciBlLGksbixhLG89dC5fdmlldztpZihsKHQpKXt2YXIgcj1vLndpZHRoLzI7ZT1vLngtcixpPW8ueCtyLG49TWF0aC5taW4oby55LG8uYmFzZSksYT1NYXRoLm1heChvLnksby5iYXNlKX1lbHNle3ZhciBzPW8uaGVpZ2h0LzI7ZT1NYXRoLm1pbihvLngsby5iYXNlKSxpPU1hdGgubWF4KG8ueCxvLmJhc2UpLG49by55LXMsYT1vLnkrc31yZXR1cm57bGVmdDplLHRvcDpuLHJpZ2h0OmksYm90dG9tOmF9fW4uX3NldChcImdsb2JhbFwiLHtlbGVtZW50czp7cmVjdGFuZ2xlOntiYWNrZ3JvdW5kQ29sb3I6bi5nbG9iYWwuZGVmYXVsdENvbG9yLGJvcmRlckNvbG9yOm4uZ2xvYmFsLmRlZmF1bHRDb2xvcixib3JkZXJTa2lwcGVkOlwiYm90dG9tXCIsYm9yZGVyV2lkdGg6MH19fSksZS5leHBvcnRzPWEuZXh0ZW5kKHtkcmF3OmZ1bmN0aW9uKCl7dmFyIHQsZSxpLG4sYSxvLHIscz10aGlzLl9jaGFydC5jdHgsbD10aGlzLl92aWV3LHU9bC5ib3JkZXJXaWR0aDtpZihyPWwuaG9yaXpvbnRhbD8odD1sLmJhc2UsZT1sLngsaT1sLnktbC5oZWlnaHQvMixuPWwueStsLmhlaWdodC8yLGE9dDxlPzE6LTEsbz0xLGwuYm9yZGVyU2tpcHBlZHx8XCJsZWZ0XCIpOih0PWwueC1sLndpZHRoLzIsZT1sLngrbC53aWR0aC8yLGE9MSxvPShpPWwueSk8KG49bC5iYXNlKT8xOi0xLGwuYm9yZGVyU2tpcHBlZHx8XCJib3R0b21cIiksdSl7dmFyIGQ9TWF0aC5taW4oTWF0aC5hYnModC1lKSxNYXRoLmFicyhpLW4pKSxjPSh1PWQ8dT9kOnUpLzIsaD10KyhcImxlZnRcIiE9PXI/YyphOjApLGY9ZSsoXCJyaWdodFwiIT09cj8tYyphOjApLGc9aSsoXCJ0b3BcIiE9PXI/YypvOjApLHA9bisoXCJib3R0b21cIiE9PXI/LWMqbzowKTtoIT09ZiYmKGk9ZyxuPXApLGchPT1wJiYodD1oLGU9Zil9cy5iZWdpblBhdGgoKSxzLmZpbGxTdHlsZT1sLmJhY2tncm91bmRDb2xvcixzLnN0cm9rZVN0eWxlPWwuYm9yZGVyQ29sb3Iscy5saW5lV2lkdGg9dTt2YXIgbT1bW3Qsbl0sW3QsaV0sW2UsaV0sW2Usbl1dLHY9W1wiYm90dG9tXCIsXCJsZWZ0XCIsXCJ0b3BcIixcInJpZ2h0XCJdLmluZGV4T2YociwwKTtmdW5jdGlvbiBiKHQpe3JldHVybiBtWyh2K3QpJTRdfS0xPT09diYmKHY9MCk7dmFyIHg9YigwKTtzLm1vdmVUbyh4WzBdLHhbMV0pO2Zvcih2YXIgeT0xO3k8NDt5KyspeD1iKHkpLHMubGluZVRvKHhbMF0seFsxXSk7cy5maWxsKCksdSYmcy5zdHJva2UoKX0saGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fdmlldztyZXR1cm4gdC5iYXNlLXQueX0saW5SYW5nZTpmdW5jdGlvbih0LGUpe3ZhciBpPSExO2lmKHRoaXMuX3ZpZXcpe3ZhciBuPW8odGhpcyk7aT10Pj1uLmxlZnQmJnQ8PW4ucmlnaHQmJmU+PW4udG9wJiZlPD1uLmJvdHRvbX1yZXR1cm4gaX0saW5MYWJlbFJhbmdlOmZ1bmN0aW9uKHQsZSl7aWYoIXRoaXMuX3ZpZXcpcmV0dXJuITE7dmFyIGk9byh0aGlzKTtyZXR1cm4gbCh0aGlzKT90Pj1pLmxlZnQmJnQ8PWkucmlnaHQ6ZT49aS50b3AmJmU8PWkuYm90dG9tfSxpblhSYW5nZTpmdW5jdGlvbih0KXt2YXIgZT1vKHRoaXMpO3JldHVybiB0Pj1lLmxlZnQmJnQ8PWUucmlnaHR9LGluWVJhbmdlOmZ1bmN0aW9uKHQpe3ZhciBlPW8odGhpcyk7cmV0dXJuIHQ+PWUudG9wJiZ0PD1lLmJvdHRvbX0sZ2V0Q2VudGVyUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgdCxlLGk9dGhpcy5fdmlldztyZXR1cm4gZT1sKHRoaXMpPyh0PWkueCwoaS55K2kuYmFzZSkvMik6KHQ9KGkueCtpLmJhc2UpLzIsaS55KSx7eDp0LHk6ZX19LGdldEFyZWE6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl92aWV3O3JldHVybiB0LndpZHRoKk1hdGguYWJzKHQueS10LmJhc2UpfSx0b29sdGlwUG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl92aWV3O3JldHVybnt4OnQueCx5OnQueX19fSl9LHsyNjoyNiwyNzoyN31dLDQxOltmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPXt9LGUuZXhwb3J0cy5BcmM9dCgzNyksZS5leHBvcnRzLkxpbmU9dCgzOCksZS5leHBvcnRzLlBvaW50PXQoMzkpLGUuZXhwb3J0cy5SZWN0YW5nbGU9dCg0MCl9LHszNzozNywzODozOCwzOTozOSw0MDo0MH1dLDQyOltmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dCg0Myk7aT1lLmV4cG9ydHM9e2NsZWFyOmZ1bmN0aW9uKHQpe3QuY3R4LmNsZWFyUmVjdCgwLDAsdC53aWR0aCx0LmhlaWdodCl9LHJvdW5kZWRSZWN0OmZ1bmN0aW9uKHQsZSxpLG4sYSxvKXtpZihvKXt2YXIgcj1NYXRoLm1pbihvLGEvMi0xZS03LG4vMi0xZS03KTt0Lm1vdmVUbyhlK3IsaSksdC5saW5lVG8oZStuLXIsaSksdC5hcmNUbyhlK24saSxlK24saStyLHIpLHQubGluZVRvKGUrbixpK2EtciksdC5hcmNUbyhlK24saSthLGUrbi1yLGkrYSxyKSx0LmxpbmVUbyhlK3IsaSthKSx0LmFyY1RvKGUsaSthLGUsaSthLXIsciksdC5saW5lVG8oZSxpK3IpLHQuYXJjVG8oZSxpLGUrcixpLHIpLHQuY2xvc2VQYXRoKCksdC5tb3ZlVG8oZSxpKX1lbHNlIHQucmVjdChlLGksbixhKX0sZHJhd1BvaW50OmZ1bmN0aW9uKHQsZSxpLG4sYSxvKXt2YXIgcixzLGwsdSxkLGM7aWYobz1vfHwwLCFlfHxcIm9iamVjdFwiIT10eXBlb2YgZXx8XCJbb2JqZWN0IEhUTUxJbWFnZUVsZW1lbnRdXCIhPT0ocj1lLnRvU3RyaW5nKCkpJiZcIltvYmplY3QgSFRNTENhbnZhc0VsZW1lbnRdXCIhPT1yKXtpZighKGlzTmFOKGkpfHxpPD0wKSl7c3dpdGNoKHQuc2F2ZSgpLHQudHJhbnNsYXRlKG4sYSksdC5yb3RhdGUobypNYXRoLlBJLzE4MCksdC5iZWdpblBhdGgoKSxlKXtkZWZhdWx0OnQuYXJjKDAsMCxpLDAsMipNYXRoLlBJKSx0LmNsb3NlUGF0aCgpO2JyZWFrO2Nhc2VcInRyaWFuZ2xlXCI6ZD0ocz0zKmkvTWF0aC5zcXJ0KDMpKSpNYXRoLnNxcnQoMykvMix0Lm1vdmVUbygtcy8yLGQvMyksdC5saW5lVG8ocy8yLGQvMyksdC5saW5lVG8oMCwtMipkLzMpLHQuY2xvc2VQYXRoKCk7YnJlYWs7Y2FzZVwicmVjdFwiOmM9MS9NYXRoLlNRUlQyKmksdC5yZWN0KC1jLC1jLDIqYywyKmMpO2JyZWFrO2Nhc2VcInJlY3RSb3VuZGVkXCI6dmFyIGg9aS9NYXRoLlNRUlQyLGY9LWgsZz0taCxwPU1hdGguU1FSVDIqaTt0aGlzLnJvdW5kZWRSZWN0KHQsZixnLHAscCwuNDI1KmkpO2JyZWFrO2Nhc2VcInJlY3RSb3RcIjpjPTEvTWF0aC5TUVJUMippLHQubW92ZVRvKC1jLDApLHQubGluZVRvKDAsYyksdC5saW5lVG8oYywwKSx0LmxpbmVUbygwLC1jKSx0LmNsb3NlUGF0aCgpO2JyZWFrO2Nhc2VcImNyb3NzXCI6dC5tb3ZlVG8oMCxpKSx0LmxpbmVUbygwLC1pKSx0Lm1vdmVUbygtaSwwKSx0LmxpbmVUbyhpLDApO2JyZWFrO2Nhc2VcImNyb3NzUm90XCI6bD1NYXRoLmNvcyhNYXRoLlBJLzQpKmksdT1NYXRoLnNpbihNYXRoLlBJLzQpKmksdC5tb3ZlVG8oLWwsLXUpLHQubGluZVRvKGwsdSksdC5tb3ZlVG8oLWwsdSksdC5saW5lVG8obCwtdSk7YnJlYWs7Y2FzZVwic3RhclwiOnQubW92ZVRvKDAsaSksdC5saW5lVG8oMCwtaSksdC5tb3ZlVG8oLWksMCksdC5saW5lVG8oaSwwKSxsPU1hdGguY29zKE1hdGguUEkvNCkqaSx1PU1hdGguc2luKE1hdGguUEkvNCkqaSx0Lm1vdmVUbygtbCwtdSksdC5saW5lVG8obCx1KSx0Lm1vdmVUbygtbCx1KSx0LmxpbmVUbyhsLC11KTticmVhaztjYXNlXCJsaW5lXCI6dC5tb3ZlVG8oLWksMCksdC5saW5lVG8oaSwwKTticmVhaztjYXNlXCJkYXNoXCI6dC5tb3ZlVG8oMCwwKSx0LmxpbmVUbyhpLDApfXQuZmlsbCgpLHQuc3Ryb2tlKCksdC5yZXN0b3JlKCl9fWVsc2UgdC5kcmF3SW1hZ2UoZSxuLWUud2lkdGgvMixhLWUuaGVpZ2h0LzIsZS53aWR0aCxlLmhlaWdodCl9LGNsaXBBcmVhOmZ1bmN0aW9uKHQsZSl7dC5zYXZlKCksdC5iZWdpblBhdGgoKSx0LnJlY3QoZS5sZWZ0LGUudG9wLGUucmlnaHQtZS5sZWZ0LGUuYm90dG9tLWUudG9wKSx0LmNsaXAoKX0sdW5jbGlwQXJlYTpmdW5jdGlvbih0KXt0LnJlc3RvcmUoKX0sbGluZVRvOmZ1bmN0aW9uKHQsZSxpLG4pe2lmKGkuc3RlcHBlZExpbmUpcmV0dXJuXCJhZnRlclwiPT09aS5zdGVwcGVkTGluZSYmIW58fFwiYWZ0ZXJcIiE9PWkuc3RlcHBlZExpbmUmJm4/dC5saW5lVG8oZS54LGkueSk6dC5saW5lVG8oaS54LGUueSksdm9pZCB0LmxpbmVUbyhpLngsaS55KTtpLnRlbnNpb24/dC5iZXppZXJDdXJ2ZVRvKG4/ZS5jb250cm9sUG9pbnRQcmV2aW91c1g6ZS5jb250cm9sUG9pbnROZXh0WCxuP2UuY29udHJvbFBvaW50UHJldmlvdXNZOmUuY29udHJvbFBvaW50TmV4dFksbj9pLmNvbnRyb2xQb2ludE5leHRYOmkuY29udHJvbFBvaW50UHJldmlvdXNYLG4/aS5jb250cm9sUG9pbnROZXh0WTppLmNvbnRyb2xQb2ludFByZXZpb3VzWSxpLngsaS55KTp0LmxpbmVUbyhpLngsaS55KX19O24uY2xlYXI9aS5jbGVhcixuLmRyYXdSb3VuZGVkUmVjdGFuZ2xlPWZ1bmN0aW9uKHQpe3QuYmVnaW5QYXRoKCksaS5yb3VuZGVkUmVjdC5hcHBseShpLGFyZ3VtZW50cyl9fSx7NDM6NDN9XSw0MzpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciBuLGQ9e25vb3A6ZnVuY3Rpb24oKXt9LHVpZDoobj0wLGZ1bmN0aW9uKCl7cmV0dXJuIG4rK30pLGlzTnVsbE9yVW5kZWY6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXR9LGlzQXJyYXk6QXJyYXkuaXNBcnJheT9BcnJheS5pc0FycmF5OmZ1bmN0aW9uKHQpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX0saXNPYmplY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPT10JiZcIltvYmplY3QgT2JqZWN0XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfSx2YWx1ZU9yRGVmYXVsdDpmdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10P2U6dH0sdmFsdWVBdEluZGV4T3JEZWZhdWx0OmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gZC52YWx1ZU9yRGVmYXVsdChkLmlzQXJyYXkodCk/dFtlXTp0LGkpfSxjYWxsYmFjazpmdW5jdGlvbih0LGUsaSl7aWYodCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5jYWxsKXJldHVybiB0LmFwcGx5KGksZSl9LGVhY2g6ZnVuY3Rpb24odCxlLGksbil7dmFyIGEsbyxyO2lmKGQuaXNBcnJheSh0KSlpZihvPXQubGVuZ3RoLG4pZm9yKGE9by0xOzA8PWE7YS0tKWUuY2FsbChpLHRbYV0sYSk7ZWxzZSBmb3IoYT0wO2E8bzthKyspZS5jYWxsKGksdFthXSxhKTtlbHNlIGlmKGQuaXNPYmplY3QodCkpZm9yKG89KHI9T2JqZWN0LmtleXModCkpLmxlbmd0aCxhPTA7YTxvO2ErKyllLmNhbGwoaSx0W3JbYV1dLHJbYV0pfSxhcnJheUVxdWFsczpmdW5jdGlvbih0LGUpe3ZhciBpLG4sYSxvO2lmKCF0fHwhZXx8dC5sZW5ndGghPT1lLmxlbmd0aClyZXR1cm4hMTtmb3IoaT0wLG49dC5sZW5ndGg7aTxuOysraSlpZihhPXRbaV0sbz1lW2ldLGEgaW5zdGFuY2VvZiBBcnJheSYmbyBpbnN0YW5jZW9mIEFycmF5KXtpZighZC5hcnJheUVxdWFscyhhLG8pKXJldHVybiExfWVsc2UgaWYoYSE9PW8pcmV0dXJuITE7cmV0dXJuITB9LGNsb25lOmZ1bmN0aW9uKHQpe2lmKGQuaXNBcnJheSh0KSlyZXR1cm4gdC5tYXAoZC5jbG9uZSk7aWYoZC5pc09iamVjdCh0KSl7Zm9yKHZhciBlPXt9LGk9T2JqZWN0LmtleXModCksbj1pLmxlbmd0aCxhPTA7YTxuOysrYSllW2lbYV1dPWQuY2xvbmUodFtpW2FdXSk7cmV0dXJuIGV9cmV0dXJuIHR9LF9tZXJnZXI6ZnVuY3Rpb24odCxlLGksbil7dmFyIGE9ZVt0XSxvPWlbdF07ZC5pc09iamVjdChhKSYmZC5pc09iamVjdChvKT9kLm1lcmdlKGEsbyxuKTplW3RdPWQuY2xvbmUobyl9LF9tZXJnZXJJZjpmdW5jdGlvbih0LGUsaSl7dmFyIG49ZVt0XSxhPWlbdF07ZC5pc09iamVjdChuKSYmZC5pc09iamVjdChhKT9kLm1lcmdlSWYobixhKTplLmhhc093blByb3BlcnR5KHQpfHwoZVt0XT1kLmNsb25lKGEpKX0sbWVyZ2U6ZnVuY3Rpb24odCxlLGkpe3ZhciBuLGEsbyxyLHMsbD1kLmlzQXJyYXkoZSk/ZTpbZV0sdT1sLmxlbmd0aDtpZighZC5pc09iamVjdCh0KSlyZXR1cm4gdDtmb3Iobj0oaT1pfHx7fSkubWVyZ2VyfHxkLl9tZXJnZXIsYT0wO2E8dTsrK2EpaWYoZT1sW2FdLGQuaXNPYmplY3QoZSkpZm9yKHM9MCxyPShvPU9iamVjdC5rZXlzKGUpKS5sZW5ndGg7czxyOysrcyluKG9bc10sdCxlLGkpO3JldHVybiB0fSxtZXJnZUlmOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGQubWVyZ2UodCxlLHttZXJnZXI6ZC5fbWVyZ2VySWZ9KX0sZXh0ZW5kOmZ1bmN0aW9uKGkpe2Zvcih2YXIgdD1mdW5jdGlvbih0LGUpe2lbZV09dH0sZT0xLG49YXJndW1lbnRzLmxlbmd0aDtlPG47KytlKWQuZWFjaChhcmd1bWVudHNbZV0sdCk7cmV0dXJuIGl9LGluaGVyaXRzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsaT10JiZ0Lmhhc093blByb3BlcnR5KFwiY29uc3RydWN0b3JcIik/dC5jb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbj1mdW5jdGlvbigpe3RoaXMuY29uc3RydWN0b3I9aX07cmV0dXJuIG4ucHJvdG90eXBlPWUucHJvdG90eXBlLGkucHJvdG90eXBlPW5ldyBuLGkuZXh0ZW5kPWQuaW5oZXJpdHMsdCYmZC5leHRlbmQoaS5wcm90b3R5cGUsdCksaS5fX3N1cGVyX189ZS5wcm90b3R5cGUsaX19OyhlLmV4cG9ydHM9ZCkuY2FsbENhbGxiYWNrPWQuY2FsbGJhY2ssZC5pbmRleE9mPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0LGUsaSl9LGQuZ2V0VmFsdWVPckRlZmF1bHQ9ZC52YWx1ZU9yRGVmYXVsdCxkLmdldFZhbHVlQXRJbmRleE9yRGVmYXVsdD1kLnZhbHVlQXRJbmRleE9yRGVmYXVsdH0se31dLDQ0OltmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dCg0MyksYT17bGluZWFyOmZ1bmN0aW9uKHQpe3JldHVybiB0fSxlYXNlSW5RdWFkOmZ1bmN0aW9uKHQpe3JldHVybiB0KnR9LGVhc2VPdXRRdWFkOmZ1bmN0aW9uKHQpe3JldHVybi10Kih0LTIpfSxlYXNlSW5PdXRRdWFkOmZ1bmN0aW9uKHQpe3JldHVybih0Lz0uNSk8MT8uNSp0KnQ6LS41KigtLXQqKHQtMiktMSl9LGVhc2VJbkN1YmljOmZ1bmN0aW9uKHQpe3JldHVybiB0KnQqdH0sZWFzZU91dEN1YmljOmZ1bmN0aW9uKHQpe3JldHVybih0LT0xKSp0KnQrMX0sZWFzZUluT3V0Q3ViaWM6ZnVuY3Rpb24odCl7cmV0dXJuKHQvPS41KTwxPy41KnQqdCp0Oi41KigodC09MikqdCp0KzIpfSxlYXNlSW5RdWFydDpmdW5jdGlvbih0KXtyZXR1cm4gdCp0KnQqdH0sZWFzZU91dFF1YXJ0OmZ1bmN0aW9uKHQpe3JldHVybi0oKHQtPTEpKnQqdCp0LTEpfSxlYXNlSW5PdXRRdWFydDpmdW5jdGlvbih0KXtyZXR1cm4odC89LjUpPDE/LjUqdCp0KnQqdDotLjUqKCh0LT0yKSp0KnQqdC0yKX0sZWFzZUluUXVpbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQqdCp0KnQqdH0sZWFzZU91dFF1aW50OmZ1bmN0aW9uKHQpe3JldHVybih0LT0xKSp0KnQqdCp0KzF9LGVhc2VJbk91dFF1aW50OmZ1bmN0aW9uKHQpe3JldHVybih0Lz0uNSk8MT8uNSp0KnQqdCp0KnQ6LjUqKCh0LT0yKSp0KnQqdCp0KzIpfSxlYXNlSW5TaW5lOmZ1bmN0aW9uKHQpe3JldHVybiAxLU1hdGguY29zKHQqKE1hdGguUEkvMikpfSxlYXNlT3V0U2luZTpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5zaW4odCooTWF0aC5QSS8yKSl9LGVhc2VJbk91dFNpbmU6ZnVuY3Rpb24odCl7cmV0dXJuLS41KihNYXRoLmNvcyhNYXRoLlBJKnQpLTEpfSxlYXNlSW5FeHBvOmZ1bmN0aW9uKHQpe3JldHVybiAwPT09dD8wOk1hdGgucG93KDIsMTAqKHQtMSkpfSxlYXNlT3V0RXhwbzpmdW5jdGlvbih0KXtyZXR1cm4gMT09PXQ/MToxLU1hdGgucG93KDIsLTEwKnQpfSxlYXNlSW5PdXRFeHBvOmZ1bmN0aW9uKHQpe3JldHVybiAwPT09dD8wOjE9PT10PzE6KHQvPS41KTwxPy41Kk1hdGgucG93KDIsMTAqKHQtMSkpOi41KigyLU1hdGgucG93KDIsLTEwKi0tdCkpfSxlYXNlSW5DaXJjOmZ1bmN0aW9uKHQpe3JldHVybiAxPD10P3Q6LShNYXRoLnNxcnQoMS10KnQpLTEpfSxlYXNlT3V0Q2lyYzpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5zcXJ0KDEtKHQtPTEpKnQpfSxlYXNlSW5PdXRDaXJjOmZ1bmN0aW9uKHQpe3JldHVybih0Lz0uNSk8MT8tLjUqKE1hdGguc3FydCgxLXQqdCktMSk6LjUqKE1hdGguc3FydCgxLSh0LT0yKSp0KSsxKX0sZWFzZUluRWxhc3RpYzpmdW5jdGlvbih0KXt2YXIgZT0xLjcwMTU4LGk9MCxuPTE7cmV0dXJuIDA9PT10PzA6MT09PXQ/MTooaXx8KGk9LjMpLGU9bjwxPyhuPTEsaS80KTppLygyKk1hdGguUEkpKk1hdGguYXNpbigxL24pLC1uKk1hdGgucG93KDIsMTAqKHQtPTEpKSpNYXRoLnNpbigodC1lKSooMipNYXRoLlBJKS9pKSl9LGVhc2VPdXRFbGFzdGljOmZ1bmN0aW9uKHQpe3ZhciBlPTEuNzAxNTgsaT0wLG49MTtyZXR1cm4gMD09PXQ/MDoxPT09dD8xOihpfHwoaT0uMyksZT1uPDE/KG49MSxpLzQpOmkvKDIqTWF0aC5QSSkqTWF0aC5hc2luKDEvbiksbipNYXRoLnBvdygyLC0xMCp0KSpNYXRoLnNpbigodC1lKSooMipNYXRoLlBJKS9pKSsxKX0sZWFzZUluT3V0RWxhc3RpYzpmdW5jdGlvbih0KXt2YXIgZT0xLjcwMTU4LGk9MCxuPTE7cmV0dXJuIDA9PT10PzA6Mj09KHQvPS41KT8xOihpfHwoaT0uNDUpLGU9bjwxPyhuPTEsaS80KTppLygyKk1hdGguUEkpKk1hdGguYXNpbigxL24pLHQ8MT9uKk1hdGgucG93KDIsMTAqKHQtPTEpKSpNYXRoLnNpbigodC1lKSooMipNYXRoLlBJKS9pKSotLjU6bipNYXRoLnBvdygyLC0xMCoodC09MSkpKk1hdGguc2luKCh0LWUpKigyKk1hdGguUEkpL2kpKi41KzEpfSxlYXNlSW5CYWNrOmZ1bmN0aW9uKHQpe3JldHVybiB0KnQqKDIuNzAxNTgqdC0xLjcwMTU4KX0sZWFzZU91dEJhY2s6ZnVuY3Rpb24odCl7cmV0dXJuKHQtPTEpKnQqKDIuNzAxNTgqdCsxLjcwMTU4KSsxfSxlYXNlSW5PdXRCYWNrOmZ1bmN0aW9uKHQpe3ZhciBlPTEuNzAxNTg7cmV0dXJuKHQvPS41KTwxP3QqdCooKDErKGUqPTEuNTI1KSkqdC1lKSouNTouNSooKHQtPTIpKnQqKCgxKyhlKj0xLjUyNSkpKnQrZSkrMil9LGVhc2VJbkJvdW5jZTpmdW5jdGlvbih0KXtyZXR1cm4gMS1hLmVhc2VPdXRCb3VuY2UoMS10KX0sZWFzZU91dEJvdW5jZTpmdW5jdGlvbih0KXtyZXR1cm4gdDwxLzIuNzU/Ny41NjI1KnQqdDp0PDIvMi43NT83LjU2MjUqKHQtPTEuNS8yLjc1KSp0Ky43NTp0PDIuNS8yLjc1PzcuNTYyNSoodC09Mi4yNS8yLjc1KSp0Ky45Mzc1OjcuNTYyNSoodC09Mi42MjUvMi43NSkqdCsuOTg0Mzc1fSxlYXNlSW5PdXRCb3VuY2U6ZnVuY3Rpb24odCl7cmV0dXJuIHQ8LjU/LjUqYS5lYXNlSW5Cb3VuY2UoMip0KTouNSphLmVhc2VPdXRCb3VuY2UoMip0LTEpKy41fX07ZS5leHBvcnRzPXtlZmZlY3RzOmF9LG4uZWFzaW5nRWZmZWN0cz1hfSx7NDM6NDN9XSw0NTpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciByPXQoNDMpO2UuZXhwb3J0cz17dG9MaW5lSGVpZ2h0OmZ1bmN0aW9uKHQsZSl7dmFyIGk9KFwiXCIrdCkubWF0Y2goL14obm9ybWFsfChcXGQrKD86XFwuXFxkKyk/KShweHxlbXwlKT8pJC8pO2lmKCFpfHxcIm5vcm1hbFwiPT09aVsxXSlyZXR1cm4gMS4yKmU7c3dpdGNoKHQ9K2lbMl0saVszXSl7Y2FzZVwicHhcIjpyZXR1cm4gdDtjYXNlXCIlXCI6dC89MTAwfXJldHVybiBlKnR9LHRvUGFkZGluZzpmdW5jdGlvbih0KXt2YXIgZSxpLG4sYTtyZXR1cm4gci5pc09iamVjdCh0KT8oZT0rdC50b3B8fDAsaT0rdC5yaWdodHx8MCxuPSt0LmJvdHRvbXx8MCxhPSt0LmxlZnR8fDApOmU9aT1uPWE9K3R8fDAse3RvcDplLHJpZ2h0OmksYm90dG9tOm4sbGVmdDphLGhlaWdodDplK24sd2lkdGg6YStpfX0scmVzb2x2ZTpmdW5jdGlvbih0LGUsaSl7dmFyIG4sYSxvO2ZvcihuPTAsYT10Lmxlbmd0aDtuPGE7KytuKWlmKHZvaWQgMCE9PShvPXRbbl0pJiYodm9pZCAwIT09ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgbyYmKG89byhlKSksdm9pZCAwIT09aSYmci5pc0FycmF5KG8pJiYobz1vW2ldKSx2b2lkIDAhPT1vKSlyZXR1cm4gb319fSx7NDM6NDN9XSw0NjpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz10KDQzKSxlLmV4cG9ydHMuZWFzaW5nPXQoNDQpLGUuZXhwb3J0cy5jYW52YXM9dCg0MiksZS5leHBvcnRzLm9wdGlvbnM9dCg0NSl9LHs0Mjo0Miw0Mzo0Myw0NDo0NCw0NTo0NX1dLDQ3OltmdW5jdGlvbih0LGUsaSl7ZS5leHBvcnRzPXthY3F1aXJlQ29udGV4dDpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5jYW52YXMmJih0PXQuY2FudmFzKSx0JiZ0LmdldENvbnRleHQoXCIyZFwiKXx8bnVsbH19fSx7fV0sNDg6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgZj10KDQ2KSxnPVwiJGNoYXJ0anNcIixwPVwiY2hhcnRqcy1cIixtPXArXCJyZW5kZXItbW9uaXRvclwiLHY9cCtcInJlbmRlci1hbmltYXRpb25cIixiPVtcImFuaW1hdGlvbnN0YXJ0XCIsXCJ3ZWJraXRBbmltYXRpb25TdGFydFwiXSxzPXt0b3VjaHN0YXJ0OlwibW91c2Vkb3duXCIsdG91Y2htb3ZlOlwibW91c2Vtb3ZlXCIsdG91Y2hlbmQ6XCJtb3VzZXVwXCIscG9pbnRlcmVudGVyOlwibW91c2VlbnRlclwiLHBvaW50ZXJkb3duOlwibW91c2Vkb3duXCIscG9pbnRlcm1vdmU6XCJtb3VzZW1vdmVcIixwb2ludGVydXA6XCJtb3VzZXVwXCIscG9pbnRlcmxlYXZlOlwibW91c2VvdXRcIixwb2ludGVyb3V0OlwibW91c2VvdXRcIn07ZnVuY3Rpb24gbCh0LGUpe3ZhciBpPWYuZ2V0U3R5bGUodCxlKSxuPWkmJmkubWF0Y2goL14oXFxkKykoXFwuXFxkKyk/cHgkLyk7cmV0dXJuIG4/TnVtYmVyKG5bMV0pOnZvaWQgMH12YXIgbj0hIWZ1bmN0aW9uKCl7dmFyIHQ9ITE7dHJ5e3ZhciBlPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInBhc3NpdmVcIix7Z2V0OmZ1bmN0aW9uKCl7dD0hMH19KTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImVcIixudWxsLGUpfWNhdGNoKHQpe31yZXR1cm4gdH0oKSYme3Bhc3NpdmU6ITB9O2Z1bmN0aW9uIHgodCxlLGkpe3QuYWRkRXZlbnRMaXN0ZW5lcihlLGksbil9ZnVuY3Rpb24gcih0LGUsaSl7dC5yZW1vdmVFdmVudExpc3RlbmVyKGUsaSxuKX1mdW5jdGlvbiB5KHQsZSxpLG4sYSl7cmV0dXJue3R5cGU6dCxjaGFydDplLG5hdGl2ZTphfHxudWxsLHg6dm9pZCAwIT09aT9pOm51bGwseTp2b2lkIDAhPT1uP246bnVsbH19ZnVuY3Rpb24gYShlLHQsaSl7dmFyIG4sYSxvLHIscyxsLHUsZCxjPWVbZ118fChlW2ddPXt9KSxoPWMucmVzaXplcj1mdW5jdGlvbih0KXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGk9cCtcInNpemUtbW9uaXRvclwiLG49XCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOjA7cmlnaHQ6MDtib3R0b206MDtvdmVyZmxvdzpoaWRkZW47cG9pbnRlci1ldmVudHM6bm9uZTt2aXNpYmlsaXR5OmhpZGRlbjt6LWluZGV4Oi0xO1wiO2Uuc3R5bGUuY3NzVGV4dD1uLGUuY2xhc3NOYW1lPWksZS5pbm5lckhUTUw9JzxkaXYgY2xhc3M9XCInK2krJy1leHBhbmRcIiBzdHlsZT1cIicrbisnXCI+PGRpdiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMDAwMDBweDtoZWlnaHQ6MTAwMDAwMHB4O2xlZnQ6MDt0b3A6MFwiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCInK2krJy1zaHJpbmtcIiBzdHlsZT1cIicrbisnXCI+PGRpdiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlO3dpZHRoOjIwMCU7aGVpZ2h0OjIwMCU7bGVmdDowOyB0b3A6MFwiPjwvZGl2PjwvZGl2Pic7dmFyIGE9ZS5jaGlsZE5vZGVzWzBdLG89ZS5jaGlsZE5vZGVzWzFdO2UuX3Jlc2V0PWZ1bmN0aW9uKCl7YS5zY3JvbGxMZWZ0PTFlNixhLnNjcm9sbFRvcD0xZTYsby5zY3JvbGxMZWZ0PTFlNixvLnNjcm9sbFRvcD0xZTZ9O3ZhciByPWZ1bmN0aW9uKCl7ZS5fcmVzZXQoKSx0KCl9O3JldHVybiB4KGEsXCJzY3JvbGxcIixyLmJpbmQoYSxcImV4cGFuZFwiKSkseChvLFwic2Nyb2xsXCIsci5iaW5kKG8sXCJzaHJpbmtcIikpLGV9KChvPSEobj1mdW5jdGlvbigpe2lmKGMucmVzaXplcilyZXR1cm4gdCh5KFwicmVzaXplXCIsaSkpfSkscj1bXSxmdW5jdGlvbigpe3I9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxhPWF8fHRoaXMsb3x8KG89ITAsZi5yZXF1ZXN0QW5pbUZyYW1lLmNhbGwod2luZG93LGZ1bmN0aW9uKCl7bz0hMSxuLmFwcGx5KGEscil9KSl9KSk7bD1mdW5jdGlvbigpe2lmKGMucmVzaXplcil7dmFyIHQ9ZS5wYXJlbnROb2RlO3QmJnQhPT1oLnBhcmVudE5vZGUmJnQuaW5zZXJ0QmVmb3JlKGgsdC5maXJzdENoaWxkKSxoLl9yZXNldCgpfX0sdT0ocz1lKVtnXXx8KHNbZ109e30pLGQ9dS5yZW5kZXJQcm94eT1mdW5jdGlvbih0KXt0LmFuaW1hdGlvbk5hbWU9PT12JiZsKCl9LGYuZWFjaChiLGZ1bmN0aW9uKHQpe3gocyx0LGQpfSksdS5yZWZsb3c9ISFzLm9mZnNldFBhcmVudCxzLmNsYXNzTGlzdC5hZGQobSl9ZnVuY3Rpb24gbyh0KXt2YXIgZSxpLG4sYT10W2ddfHx7fSxvPWEucmVzaXplcjtkZWxldGUgYS5yZXNpemVyLGk9KGU9dClbZ118fHt9LChuPWkucmVuZGVyUHJveHkpJiYoZi5lYWNoKGIsZnVuY3Rpb24odCl7cihlLHQsbil9KSxkZWxldGUgaS5yZW5kZXJQcm94eSksZS5jbGFzc0xpc3QucmVtb3ZlKG0pLG8mJm8ucGFyZW50Tm9kZSYmby5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG8pfWUuZXhwb3J0cz17X2VuYWJsZWQ6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50LGluaXRpYWxpemU6ZnVuY3Rpb24oKXt2YXIgdCxlLGksbj1cImZyb217b3BhY2l0eTowLjk5fXRve29wYWNpdHk6MX1cIjtlPVwiQC13ZWJraXQta2V5ZnJhbWVzIFwiK3YrXCJ7XCIrbitcIn1Aa2V5ZnJhbWVzIFwiK3YrXCJ7XCIrbitcIn0uXCIrbStcInstd2Via2l0LWFuaW1hdGlvbjpcIit2K1wiIDAuMDAxczthbmltYXRpb246XCIrditcIiAwLjAwMXM7fVwiLGk9KHQ9dGhpcykuX3N0eWxlfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIiksdC5fc3R5bGV8fChlPVwiLyogQ2hhcnQuanMgKi9cXG5cIitlLCh0Ll9zdHlsZT1pKS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJ0ZXh0L2Nzc1wiKSxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQoaSkpLGkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZSkpfSxhY3F1aXJlQ29udGV4dDpmdW5jdGlvbih0LGUpe1wic3RyaW5nXCI9PXR5cGVvZiB0P3Q9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodCk6dC5sZW5ndGgmJih0PXRbMF0pLHQmJnQuY2FudmFzJiYodD10LmNhbnZhcyk7dmFyIGk9dCYmdC5nZXRDb250ZXh0JiZ0LmdldENvbnRleHQoXCIyZFwiKTtyZXR1cm4gaSYmaS5jYW52YXM9PT10PyhmdW5jdGlvbih0LGUpe3ZhciBpPXQuc3R5bGUsbj10LmdldEF0dHJpYnV0ZShcImhlaWdodFwiKSxhPXQuZ2V0QXR0cmlidXRlKFwid2lkdGhcIik7aWYodFtnXT17aW5pdGlhbDp7aGVpZ2h0Om4sd2lkdGg6YSxzdHlsZTp7ZGlzcGxheTppLmRpc3BsYXksaGVpZ2h0OmkuaGVpZ2h0LHdpZHRoOmkud2lkdGh9fX0saS5kaXNwbGF5PWkuZGlzcGxheXx8XCJibG9ja1wiLG51bGw9PT1hfHxcIlwiPT09YSl7dmFyIG89bCh0LFwid2lkdGhcIik7dm9pZCAwIT09byYmKHQud2lkdGg9byl9aWYobnVsbD09PW58fFwiXCI9PT1uKWlmKFwiXCI9PT10LnN0eWxlLmhlaWdodCl0LmhlaWdodD10LndpZHRoLyhlLm9wdGlvbnMuYXNwZWN0UmF0aW98fDIpO2Vsc2V7dmFyIHI9bCh0LFwiaGVpZ2h0XCIpO3ZvaWQgMCE9PW8mJih0LmhlaWdodD1yKX19KHQsZSksaSk6bnVsbH0scmVsZWFzZUNvbnRleHQ6ZnVuY3Rpb24odCl7dmFyIGk9dC5jYW52YXM7aWYoaVtnXSl7dmFyIG49aVtnXS5pbml0aWFsO1tcImhlaWdodFwiLFwid2lkdGhcIl0uZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT1uW3RdO2YuaXNOdWxsT3JVbmRlZihlKT9pLnJlbW92ZUF0dHJpYnV0ZSh0KTppLnNldEF0dHJpYnV0ZSh0LGUpfSksZi5lYWNoKG4uc3R5bGV8fHt9LGZ1bmN0aW9uKHQsZSl7aS5zdHlsZVtlXT10fSksaS53aWR0aD1pLndpZHRoLGRlbGV0ZSBpW2ddfX0sYWRkRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihvLHQscil7dmFyIGU9by5jYW52YXM7aWYoXCJyZXNpemVcIiE9PXQpe3ZhciBpPXJbZ118fChyW2ddPXt9KTt4KGUsdCwoaS5wcm94aWVzfHwoaS5wcm94aWVzPXt9KSlbby5pZCtcIl9cIit0XT1mdW5jdGlvbih0KXt2YXIgZSxpLG4sYTtyKChpPW8sbj1zWyhlPXQpLnR5cGVdfHxlLnR5cGUsYT1mLmdldFJlbGF0aXZlUG9zaXRpb24oZSxpKSx5KG4saSxhLngsYS55LGUpKSl9KX1lbHNlIGEoZSxyLG8pfSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10LmNhbnZhcztpZihcInJlc2l6ZVwiIT09ZSl7dmFyIGE9KChpW2ddfHx7fSkucHJveGllc3x8e30pW3QuaWQrXCJfXCIrZV07YSYmcihuLGUsYSl9ZWxzZSBvKG4pfX0sZi5hZGRFdmVudD14LGYucmVtb3ZlRXZlbnQ9cn0sezQ2OjQ2fV0sNDk6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10KDQ2KSxhPXQoNDcpLG89dCg0OCkscj1vLl9lbmFibGVkP286YTtlLmV4cG9ydHM9bi5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24oKXt9LGFjcXVpcmVDb250ZXh0OmZ1bmN0aW9uKCl7fSxyZWxlYXNlQ29udGV4dDpmdW5jdGlvbigpe30sYWRkRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbigpe30scmVtb3ZlRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbigpe319LHIpfSx7NDY6NDYsNDc6NDcsNDg6NDh9XSw1MDpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz17fSxlLmV4cG9ydHMuZmlsbGVyPXQoNTEpLGUuZXhwb3J0cy5sZWdlbmQ9dCg1MiksZS5leHBvcnRzLnRpdGxlPXQoNTMpfSx7NTE6NTEsNTI6NTIsNTM6NTN9XSw1MTpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciB1PXQoMjYpLGg9dCg0MSksZD10KDQ2KTt1Ll9zZXQoXCJnbG9iYWxcIix7cGx1Z2luczp7ZmlsbGVyOntwcm9wYWdhdGU6ITB9fX0pO3ZhciBmPXtkYXRhc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXQuZmlsbCxpPXQuY2hhcnQsbj1pLmdldERhdGFzZXRNZXRhKGUpLGE9biYmaS5pc0RhdGFzZXRWaXNpYmxlKGUpJiZuLmRhdGFzZXQuX2NoaWxkcmVufHxbXSxvPWEubGVuZ3RofHwwO3JldHVybiBvP2Z1bmN0aW9uKHQsZSl7cmV0dXJuIGU8byYmYVtlXS5fdmlld3x8bnVsbH06bnVsbH0sYm91bmRhcnk6ZnVuY3Rpb24odCl7dmFyIGU9dC5ib3VuZGFyeSxpPWU/ZS54Om51bGwsbj1lP2UueTpudWxsO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm57eDpudWxsPT09aT90Lng6aSx5Om51bGw9PT1uP3QueTpufX19fTtmdW5jdGlvbiBnKHQsZSxpKXt2YXIgbixhPXQuX21vZGVsfHx7fSxvPWEuZmlsbDtpZih2b2lkIDA9PT1vJiYobz0hIWEuYmFja2dyb3VuZENvbG9yKSwhMT09PW98fG51bGw9PT1vKXJldHVybiExO2lmKCEwPT09bylyZXR1cm5cIm9yaWdpblwiO2lmKG49cGFyc2VGbG9hdChvLDEwKSxpc0Zpbml0ZShuKSYmTWF0aC5mbG9vcihuKT09PW4pcmV0dXJuXCItXCIhPT1vWzBdJiZcIitcIiE9PW9bMF18fChuPWUrbiksIShuPT09ZXx8bjwwfHxpPD1uKSYmbjtzd2l0Y2gobyl7Y2FzZVwiYm90dG9tXCI6cmV0dXJuXCJzdGFydFwiO2Nhc2VcInRvcFwiOnJldHVyblwiZW5kXCI7Y2FzZVwiemVyb1wiOnJldHVyblwib3JpZ2luXCI7Y2FzZVwib3JpZ2luXCI6Y2FzZVwic3RhcnRcIjpjYXNlXCJlbmRcIjpyZXR1cm4gbztkZWZhdWx0OnJldHVybiExfX1mdW5jdGlvbiBwKHQpe3ZhciBlLGk9dC5lbC5fbW9kZWx8fHt9LG49dC5lbC5fc2NhbGV8fHt9LGE9dC5maWxsLG89bnVsbDtpZihpc0Zpbml0ZShhKSlyZXR1cm4gbnVsbDtpZihcInN0YXJ0XCI9PT1hP289dm9pZCAwPT09aS5zY2FsZUJvdHRvbT9uLmJvdHRvbTppLnNjYWxlQm90dG9tOlwiZW5kXCI9PT1hP289dm9pZCAwPT09aS5zY2FsZVRvcD9uLnRvcDppLnNjYWxlVG9wOnZvaWQgMCE9PWkuc2NhbGVaZXJvP289aS5zY2FsZVplcm86bi5nZXRCYXNlUG9zaXRpb24/bz1uLmdldEJhc2VQb3NpdGlvbigpOm4uZ2V0QmFzZVBpeGVsJiYobz1uLmdldEJhc2VQaXhlbCgpKSxudWxsIT1vKXtpZih2b2lkIDAhPT1vLngmJnZvaWQgMCE9PW8ueSlyZXR1cm4gbztpZihcIm51bWJlclwiPT10eXBlb2YgbyYmaXNGaW5pdGUobykpcmV0dXJue3g6KGU9bi5pc0hvcml6b250YWwoKSk/bzpudWxsLHk6ZT9udWxsOm99fXJldHVybiBudWxsfWZ1bmN0aW9uIG0odCxlLGkpe3ZhciBuLGE9dFtlXS5maWxsLG89W2VdO2lmKCFpKXJldHVybiBhO2Zvcig7ITEhPT1hJiYtMT09PW8uaW5kZXhPZihhKTspe2lmKCFpc0Zpbml0ZShhKSlyZXR1cm4gYTtpZighKG49dFthXSkpcmV0dXJuITE7aWYobi52aXNpYmxlKXJldHVybiBhO28ucHVzaChhKSxhPW4uZmlsbH1yZXR1cm4hMX1mdW5jdGlvbiB4KHQpe3JldHVybiB0JiYhdC5za2lwfWZ1bmN0aW9uIHkodCxlLGksbixhKXt2YXIgbztpZihuJiZhKXtmb3IodC5tb3ZlVG8oZVswXS54LGVbMF0ueSksbz0xO288bjsrK28pZC5jYW52YXMubGluZVRvKHQsZVtvLTFdLGVbb10pO2Zvcih0LmxpbmVUbyhpW2EtMV0ueCxpW2EtMV0ueSksbz1hLTE7MDxvOy0tbylkLmNhbnZhcy5saW5lVG8odCxpW29dLGlbby0xXSwhMCl9fWUuZXhwb3J0cz17aWQ6XCJmaWxsZXJcIixhZnRlckRhdGFzZXRzVXBkYXRlOmZ1bmN0aW9uKHQsZSl7dmFyIGksbixhLG8scixzLGwsdT0odC5kYXRhLmRhdGFzZXRzfHxbXSkubGVuZ3RoLGQ9ZS5wcm9wYWdhdGUsYz1bXTtmb3Iobj0wO248dTsrK24pbz1udWxsLChhPShpPXQuZ2V0RGF0YXNldE1ldGEobikpLmRhdGFzZXQpJiZhLl9tb2RlbCYmYSBpbnN0YW5jZW9mIGguTGluZSYmKG89e3Zpc2libGU6dC5pc0RhdGFzZXRWaXNpYmxlKG4pLGZpbGw6ZyhhLG4sdSksY2hhcnQ6dCxlbDphfSksaS4kZmlsbGVyPW8sYy5wdXNoKG8pO2ZvcihuPTA7bjx1Oysrbikobz1jW25dKSYmKG8uZmlsbD1tKGMsbixkKSxvLmJvdW5kYXJ5PXAobyksby5tYXBwZXI9KGw9dm9pZCAwLHM9KHI9bykuZmlsbCwhKGw9XCJkYXRhc2V0XCIpPT09cz9udWxsOihpc0Zpbml0ZShzKXx8KGw9XCJib3VuZGFyeVwiKSxmW2xdKHIpKSkpfSxiZWZvcmVEYXRhc2V0RHJhdzpmdW5jdGlvbih0LGUpe3ZhciBpPWUubWV0YS4kZmlsbGVyO2lmKGkpe3ZhciBuPXQuY3R4LGE9aS5lbCxvPWEuX3ZpZXcscj1hLl9jaGlsZHJlbnx8W10scz1pLm1hcHBlcixsPW8uYmFja2dyb3VuZENvbG9yfHx1Lmdsb2JhbC5kZWZhdWx0Q29sb3I7cyYmbCYmci5sZW5ndGgmJihkLmNhbnZhcy5jbGlwQXJlYShuLHQuY2hhcnRBcmVhKSxmdW5jdGlvbih0LGUsaSxuLGEsbyl7dmFyIHIscyxsLHUsZCxjLGgsZj1lLmxlbmd0aCxnPW4uc3BhbkdhcHMscD1bXSxtPVtdLHY9MCxiPTA7Zm9yKHQuYmVnaW5QYXRoKCkscj0wLHM9ZishIW87cjxzOysrcilkPWkodT1lW2w9ciVmXS5fdmlldyxsLG4pLGM9eCh1KSxoPXgoZCksYyYmaD8odj1wLnB1c2godSksYj1tLnB1c2goZCkpOnYmJmImJihnPyhjJiZwLnB1c2godSksaCYmbS5wdXNoKGQpKTooeSh0LHAsbSx2LGIpLHY9Yj0wLHA9W10sbT1bXSkpO3kodCxwLG0sdixiKSx0LmNsb3NlUGF0aCgpLHQuZmlsbFN0eWxlPWEsdC5maWxsKCl9KG4scixzLG8sbCxhLl9sb29wKSxkLmNhbnZhcy51bmNsaXBBcmVhKG4pKX19fX0sezI2OjI2LDQxOjQxLDQ2OjQ2fV0sNTI6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgXz10KDI2KSxuPXQoMjcpLEQ9dCg0NiksYT10KDMxKSxvPUQubm9vcDtmdW5jdGlvbiBQKHQsZSl7cmV0dXJuIHQudXNlUG9pbnRTdHlsZT9lKk1hdGguU1FSVDI6dC5ib3hXaWR0aH1fLl9zZXQoXCJnbG9iYWxcIix7bGVnZW5kOntkaXNwbGF5OiEwLHBvc2l0aW9uOlwidG9wXCIsZnVsbFdpZHRoOiEwLHJldmVyc2U6ITEsd2VpZ2h0OjFlMyxvbkNsaWNrOmZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS5kYXRhc2V0SW5kZXgsbj10aGlzLmNoYXJ0LGE9bi5nZXREYXRhc2V0TWV0YShpKTthLmhpZGRlbj1udWxsPT09YS5oaWRkZW4/IW4uZGF0YS5kYXRhc2V0c1tpXS5oaWRkZW46bnVsbCxuLnVwZGF0ZSgpfSxvbkhvdmVyOm51bGwsbGFiZWxzOntib3hXaWR0aDo0MCxwYWRkaW5nOjEwLGdlbmVyYXRlTGFiZWxzOmZ1bmN0aW9uKGkpe3ZhciB0PWkuZGF0YTtyZXR1cm4gRC5pc0FycmF5KHQuZGF0YXNldHMpP3QuZGF0YXNldHMubWFwKGZ1bmN0aW9uKHQsZSl7cmV0dXJue3RleHQ6dC5sYWJlbCxmaWxsU3R5bGU6RC5pc0FycmF5KHQuYmFja2dyb3VuZENvbG9yKT90LmJhY2tncm91bmRDb2xvclswXTp0LmJhY2tncm91bmRDb2xvcixoaWRkZW46IWkuaXNEYXRhc2V0VmlzaWJsZShlKSxsaW5lQ2FwOnQuYm9yZGVyQ2FwU3R5bGUsbGluZURhc2g6dC5ib3JkZXJEYXNoLGxpbmVEYXNoT2Zmc2V0OnQuYm9yZGVyRGFzaE9mZnNldCxsaW5lSm9pbjp0LmJvcmRlckpvaW5TdHlsZSxsaW5lV2lkdGg6dC5ib3JkZXJXaWR0aCxzdHJva2VTdHlsZTp0LmJvcmRlckNvbG9yLHBvaW50U3R5bGU6dC5wb2ludFN0eWxlLGRhdGFzZXRJbmRleDplfX0sdGhpcyk6W119fX0sbGVnZW5kQ2FsbGJhY2s6ZnVuY3Rpb24odCl7dmFyIGU9W107ZS5wdXNoKCc8dWwgY2xhc3M9XCInK3QuaWQrJy1sZWdlbmRcIj4nKTtmb3IodmFyIGk9MDtpPHQuZGF0YS5kYXRhc2V0cy5sZW5ndGg7aSsrKWUucHVzaCgnPGxpPjxzcGFuIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjonK3QuZGF0YS5kYXRhc2V0c1tpXS5iYWNrZ3JvdW5kQ29sb3IrJ1wiPjwvc3Bhbj4nKSx0LmRhdGEuZGF0YXNldHNbaV0ubGFiZWwmJmUucHVzaCh0LmRhdGEuZGF0YXNldHNbaV0ubGFiZWwpLGUucHVzaChcIjwvbGk+XCIpO3JldHVybiBlLnB1c2goXCI8L3VsPlwiKSxlLmpvaW4oXCJcIil9fSk7dmFyIHI9bi5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24odCl7RC5leHRlbmQodGhpcyx0KSx0aGlzLmxlZ2VuZEhpdEJveGVzPVtdLHRoaXMuZG91Z2hudXRNb2RlPSExfSxiZWZvcmVVcGRhdGU6byx1cGRhdGU6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXM7cmV0dXJuIG4uYmVmb3JlVXBkYXRlKCksbi5tYXhXaWR0aD10LG4ubWF4SGVpZ2h0PWUsbi5tYXJnaW5zPWksbi5iZWZvcmVTZXREaW1lbnNpb25zKCksbi5zZXREaW1lbnNpb25zKCksbi5hZnRlclNldERpbWVuc2lvbnMoKSxuLmJlZm9yZUJ1aWxkTGFiZWxzKCksbi5idWlsZExhYmVscygpLG4uYWZ0ZXJCdWlsZExhYmVscygpLG4uYmVmb3JlRml0KCksbi5maXQoKSxuLmFmdGVyRml0KCksbi5hZnRlclVwZGF0ZSgpLG4ubWluU2l6ZX0sYWZ0ZXJVcGRhdGU6byxiZWZvcmVTZXREaW1lbnNpb25zOm8sc2V0RGltZW5zaW9uczpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5pc0hvcml6b250YWwoKT8odC53aWR0aD10Lm1heFdpZHRoLHQubGVmdD0wLHQucmlnaHQ9dC53aWR0aCk6KHQuaGVpZ2h0PXQubWF4SGVpZ2h0LHQudG9wPTAsdC5ib3R0b209dC5oZWlnaHQpLHQucGFkZGluZ0xlZnQ9MCx0LnBhZGRpbmdUb3A9MCx0LnBhZGRpbmdSaWdodD0wLHQucGFkZGluZ0JvdHRvbT0wLHQubWluU2l6ZT17d2lkdGg6MCxoZWlnaHQ6MH19LGFmdGVyU2V0RGltZW5zaW9uczpvLGJlZm9yZUJ1aWxkTGFiZWxzOm8sYnVpbGRMYWJlbHM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGk9ZS5vcHRpb25zLmxhYmVsc3x8e30sdD1ELmNhbGxiYWNrKGkuZ2VuZXJhdGVMYWJlbHMsW2UuY2hhcnRdLGUpfHxbXTtpLmZpbHRlciYmKHQ9dC5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIGkuZmlsdGVyKHQsZS5jaGFydC5kYXRhKX0pKSxlLm9wdGlvbnMucmV2ZXJzZSYmdC5yZXZlcnNlKCksZS5sZWdlbmRJdGVtcz10fSxhZnRlckJ1aWxkTGFiZWxzOm8sYmVmb3JlRml0Om8sZml0OmZ1bmN0aW9uKCl7dmFyIG49dGhpcyx0PW4ub3B0aW9ucyxhPXQubGFiZWxzLGU9dC5kaXNwbGF5LG89bi5jdHgsaT1fLmdsb2JhbCxyPUQudmFsdWVPckRlZmF1bHQscz1yKGEuZm9udFNpemUsaS5kZWZhdWx0Rm9udFNpemUpLGw9cihhLmZvbnRTdHlsZSxpLmRlZmF1bHRGb250U3R5bGUpLHU9cihhLmZvbnRGYW1pbHksaS5kZWZhdWx0Rm9udEZhbWlseSksZD1ELmZvbnRTdHJpbmcocyxsLHUpLGM9bi5sZWdlbmRIaXRCb3hlcz1bXSxoPW4ubWluU2l6ZSxmPW4uaXNIb3Jpem9udGFsKCk7aWYoaC5oZWlnaHQ9Zj8oaC53aWR0aD1uLm1heFdpZHRoLGU/MTA6MCk6KGgud2lkdGg9ZT8xMDowLG4ubWF4SGVpZ2h0KSxlKWlmKG8uZm9udD1kLGYpe3ZhciBnPW4ubGluZVdpZHRocz1bMF0scD1uLmxlZ2VuZEl0ZW1zLmxlbmd0aD9zK2EucGFkZGluZzowO28udGV4dEFsaWduPVwibGVmdFwiLG8udGV4dEJhc2VsaW5lPVwidG9wXCIsRC5lYWNoKG4ubGVnZW5kSXRlbXMsZnVuY3Rpb24odCxlKXt2YXIgaT1QKGEscykrcy8yK28ubWVhc3VyZVRleHQodC50ZXh0KS53aWR0aDtnW2cubGVuZ3RoLTFdK2krYS5wYWRkaW5nPj1uLndpZHRoJiYocCs9cythLnBhZGRpbmcsZ1tnLmxlbmd0aF09bi5sZWZ0KSxjW2VdPXtsZWZ0OjAsdG9wOjAsd2lkdGg6aSxoZWlnaHQ6c30sZ1tnLmxlbmd0aC0xXSs9aSthLnBhZGRpbmd9KSxoLmhlaWdodCs9cH1lbHNle3ZhciBtPWEucGFkZGluZyx2PW4uY29sdW1uV2lkdGhzPVtdLGI9YS5wYWRkaW5nLHg9MCx5PTAsaz1zK207RC5lYWNoKG4ubGVnZW5kSXRlbXMsZnVuY3Rpb24odCxlKXt2YXIgaT1QKGEscykrcy8yK28ubWVhc3VyZVRleHQodC50ZXh0KS53aWR0aDt5K2s+aC5oZWlnaHQmJihiKz14K2EucGFkZGluZyx2LnB1c2goeCkseT14PTApLHg9TWF0aC5tYXgoeCxpKSx5Kz1rLGNbZV09e2xlZnQ6MCx0b3A6MCx3aWR0aDppLGhlaWdodDpzfX0pLGIrPXgsdi5wdXNoKHgpLGgud2lkdGgrPWJ9bi53aWR0aD1oLndpZHRoLG4uaGVpZ2h0PWguaGVpZ2h0fSxhZnRlckZpdDpvLGlzSG9yaXpvbnRhbDpmdW5jdGlvbigpe3JldHVyblwidG9wXCI9PT10aGlzLm9wdGlvbnMucG9zaXRpb258fFwiYm90dG9tXCI9PT10aGlzLm9wdGlvbnMucG9zaXRpb259LGRyYXc6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGg9Yy5vcHRpb25zLGY9aC5sYWJlbHMsZz1fLmdsb2JhbCxwPWcuZWxlbWVudHMubGluZSxtPWMud2lkdGgsdj1jLmxpbmVXaWR0aHM7aWYoaC5kaXNwbGF5KXt2YXIgYix4PWMuY3R4LHk9RC52YWx1ZU9yRGVmYXVsdCx0PXkoZi5mb250Q29sb3IsZy5kZWZhdWx0Rm9udENvbG9yKSxrPXkoZi5mb250U2l6ZSxnLmRlZmF1bHRGb250U2l6ZSksZT15KGYuZm9udFN0eWxlLGcuZGVmYXVsdEZvbnRTdHlsZSksaT15KGYuZm9udEZhbWlseSxnLmRlZmF1bHRGb250RmFtaWx5KSxuPUQuZm9udFN0cmluZyhrLGUsaSk7eC50ZXh0QWxpZ249XCJsZWZ0XCIseC50ZXh0QmFzZWxpbmU9XCJtaWRkbGVcIix4LmxpbmVXaWR0aD0uNSx4LnN0cm9rZVN0eWxlPXQseC5maWxsU3R5bGU9dCx4LmZvbnQ9bjt2YXIgTT1QKGYsayksdz1jLmxlZ2VuZEhpdEJveGVzLEM9Yy5pc0hvcml6b250YWwoKTtiPUM/e3g6Yy5sZWZ0KyhtLXZbMF0pLzIseTpjLnRvcCtmLnBhZGRpbmcsbGluZTowfTp7eDpjLmxlZnQrZi5wYWRkaW5nLHk6Yy50b3ArZi5wYWRkaW5nLGxpbmU6MH07dmFyIFM9aytmLnBhZGRpbmc7RC5lYWNoKGMubGVnZW5kSXRlbXMsZnVuY3Rpb24odCxlKXt2YXIgaSxuLGEsbyxyLHM9eC5tZWFzdXJlVGV4dCh0LnRleHQpLndpZHRoLGw9TStrLzIrcyx1PWIueCxkPWIueTtDP208PXUrbCYmKGQ9Yi55Kz1TLGIubGluZSsrLHU9Yi54PWMubGVmdCsobS12W2IubGluZV0pLzIpOmQrUz5jLmJvdHRvbSYmKHU9Yi54PXUrYy5jb2x1bW5XaWR0aHNbYi5saW5lXStmLnBhZGRpbmcsZD1iLnk9Yy50b3ArZi5wYWRkaW5nLGIubGluZSsrKSxmdW5jdGlvbih0LGUsaSl7aWYoIShpc05hTihNKXx8TTw9MCkpe3guc2F2ZSgpLHguZmlsbFN0eWxlPXkoaS5maWxsU3R5bGUsZy5kZWZhdWx0Q29sb3IpLHgubGluZUNhcD15KGkubGluZUNhcCxwLmJvcmRlckNhcFN0eWxlKSx4LmxpbmVEYXNoT2Zmc2V0PXkoaS5saW5lRGFzaE9mZnNldCxwLmJvcmRlckRhc2hPZmZzZXQpLHgubGluZUpvaW49eShpLmxpbmVKb2luLHAuYm9yZGVySm9pblN0eWxlKSx4LmxpbmVXaWR0aD15KGkubGluZVdpZHRoLHAuYm9yZGVyV2lkdGgpLHguc3Ryb2tlU3R5bGU9eShpLnN0cm9rZVN0eWxlLGcuZGVmYXVsdENvbG9yKTt2YXIgbj0wPT09eShpLmxpbmVXaWR0aCxwLmJvcmRlcldpZHRoKTtpZih4LnNldExpbmVEYXNoJiZ4LnNldExpbmVEYXNoKHkoaS5saW5lRGFzaCxwLmJvcmRlckRhc2gpKSxoLmxhYmVscyYmaC5sYWJlbHMudXNlUG9pbnRTdHlsZSl7dmFyIGE9aypNYXRoLlNRUlQyLzIsbz1hL01hdGguU1FSVDIscj10K28scz1lK287RC5jYW52YXMuZHJhd1BvaW50KHgsaS5wb2ludFN0eWxlLGEscixzKX1lbHNlIG58fHguc3Ryb2tlUmVjdCh0LGUsTSxrKSx4LmZpbGxSZWN0KHQsZSxNLGspO3gucmVzdG9yZSgpfX0odSxkLHQpLHdbZV0ubGVmdD11LHdbZV0udG9wPWQsaT10LG49cyxvPU0rKGE9ay8yKSt1LHI9ZCthLHguZmlsbFRleHQoaS50ZXh0LG8sciksaS5oaWRkZW4mJih4LmJlZ2luUGF0aCgpLHgubGluZVdpZHRoPTIseC5tb3ZlVG8obyxyKSx4LmxpbmVUbyhvK24scikseC5zdHJva2UoKSksQz9iLngrPWwrZi5wYWRkaW5nOmIueSs9U30pfX0saGFuZGxlRXZlbnQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxpPWUub3B0aW9ucyxuPVwibW91c2V1cFwiPT09dC50eXBlP1wiY2xpY2tcIjp0LnR5cGUsYT0hMTtpZihcIm1vdXNlbW92ZVwiPT09bil7aWYoIWkub25Ib3ZlcilyZXR1cm59ZWxzZXtpZihcImNsaWNrXCIhPT1uKXJldHVybjtpZighaS5vbkNsaWNrKXJldHVybn12YXIgbz10Lngscj10Lnk7aWYobz49ZS5sZWZ0JiZvPD1lLnJpZ2h0JiZyPj1lLnRvcCYmcjw9ZS5ib3R0b20pZm9yKHZhciBzPWUubGVnZW5kSGl0Qm94ZXMsbD0wO2w8cy5sZW5ndGg7KytsKXt2YXIgdT1zW2xdO2lmKG8+PXUubGVmdCYmbzw9dS5sZWZ0K3Uud2lkdGgmJnI+PXUudG9wJiZyPD11LnRvcCt1LmhlaWdodCl7aWYoXCJjbGlja1wiPT09bil7aS5vbkNsaWNrLmNhbGwoZSx0Lm5hdGl2ZSxlLmxlZ2VuZEl0ZW1zW2xdKSxhPSEwO2JyZWFrfWlmKFwibW91c2Vtb3ZlXCI9PT1uKXtpLm9uSG92ZXIuY2FsbChlLHQubmF0aXZlLGUubGVnZW5kSXRlbXNbbF0pLGE9ITA7YnJlYWt9fX1yZXR1cm4gYX19KTtmdW5jdGlvbiBzKHQsZSl7dmFyIGk9bmV3IHIoe2N0eDp0LmN0eCxvcHRpb25zOmUsY2hhcnQ6dH0pO2EuY29uZmlndXJlKHQsaSxlKSxhLmFkZEJveCh0LGkpLHQubGVnZW5kPWl9ZS5leHBvcnRzPXtpZDpcImxlZ2VuZFwiLF9lbGVtZW50OnIsYmVmb3JlSW5pdDpmdW5jdGlvbih0KXt2YXIgZT10Lm9wdGlvbnMubGVnZW5kO2UmJnModCxlKX0sYmVmb3JlVXBkYXRlOmZ1bmN0aW9uKHQpe3ZhciBlPXQub3B0aW9ucy5sZWdlbmQsaT10LmxlZ2VuZDtlPyhELm1lcmdlSWYoZSxfLmdsb2JhbC5sZWdlbmQpLGk/KGEuY29uZmlndXJlKHQsaSxlKSxpLm9wdGlvbnM9ZSk6cyh0LGUpKTppJiYoYS5yZW1vdmVCb3godCxpKSxkZWxldGUgdC5sZWdlbmQpfSxhZnRlckV2ZW50OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5sZWdlbmQ7aSYmaS5oYW5kbGVFdmVudChlKX19fSx7MjY6MjYsMjc6MjcsMzE6MzEsNDY6NDZ9XSw1MzpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciBNPXQoMjYpLG49dCgyNyksdz10KDQ2KSxhPXQoMzEpLG89dy5ub29wO00uX3NldChcImdsb2JhbFwiLHt0aXRsZTp7ZGlzcGxheTohMSxmb250U3R5bGU6XCJib2xkXCIsZnVsbFdpZHRoOiEwLGxpbmVIZWlnaHQ6MS4yLHBhZGRpbmc6MTAscG9zaXRpb246XCJ0b3BcIix0ZXh0OlwiXCIsd2VpZ2h0OjJlM319KTt2YXIgcj1uLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt3LmV4dGVuZCh0aGlzLHQpLHRoaXMubGVnZW5kSGl0Qm94ZXM9W119LGJlZm9yZVVwZGF0ZTpvLHVwZGF0ZTpmdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcztyZXR1cm4gbi5iZWZvcmVVcGRhdGUoKSxuLm1heFdpZHRoPXQsbi5tYXhIZWlnaHQ9ZSxuLm1hcmdpbnM9aSxuLmJlZm9yZVNldERpbWVuc2lvbnMoKSxuLnNldERpbWVuc2lvbnMoKSxuLmFmdGVyU2V0RGltZW5zaW9ucygpLG4uYmVmb3JlQnVpbGRMYWJlbHMoKSxuLmJ1aWxkTGFiZWxzKCksbi5hZnRlckJ1aWxkTGFiZWxzKCksbi5iZWZvcmVGaXQoKSxuLmZpdCgpLG4uYWZ0ZXJGaXQoKSxuLmFmdGVyVXBkYXRlKCksbi5taW5TaXplfSxhZnRlclVwZGF0ZTpvLGJlZm9yZVNldERpbWVuc2lvbnM6byxzZXREaW1lbnNpb25zOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0LmlzSG9yaXpvbnRhbCgpPyh0LndpZHRoPXQubWF4V2lkdGgsdC5sZWZ0PTAsdC5yaWdodD10LndpZHRoKToodC5oZWlnaHQ9dC5tYXhIZWlnaHQsdC50b3A9MCx0LmJvdHRvbT10LmhlaWdodCksdC5wYWRkaW5nTGVmdD0wLHQucGFkZGluZ1RvcD0wLHQucGFkZGluZ1JpZ2h0PTAsdC5wYWRkaW5nQm90dG9tPTAsdC5taW5TaXplPXt3aWR0aDowLGhlaWdodDowfX0sYWZ0ZXJTZXREaW1lbnNpb25zOm8sYmVmb3JlQnVpbGRMYWJlbHM6byxidWlsZExhYmVsczpvLGFmdGVyQnVpbGRMYWJlbHM6byxiZWZvcmVGaXQ6byxmaXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dy52YWx1ZU9yRGVmYXVsdCxpPXQub3B0aW9ucyxuPWkuZGlzcGxheSxhPWUoaS5mb250U2l6ZSxNLmdsb2JhbC5kZWZhdWx0Rm9udFNpemUpLG89dC5taW5TaXplLHI9dy5pc0FycmF5KGkudGV4dCk/aS50ZXh0Lmxlbmd0aDoxLHM9dy5vcHRpb25zLnRvTGluZUhlaWdodChpLmxpbmVIZWlnaHQsYSksbD1uP3IqcysyKmkucGFkZGluZzowO3QuaXNIb3Jpem9udGFsKCk/KG8ud2lkdGg9dC5tYXhXaWR0aCxvLmhlaWdodD1sKTooby53aWR0aD1sLG8uaGVpZ2h0PXQubWF4SGVpZ2h0KSx0LndpZHRoPW8ud2lkdGgsdC5oZWlnaHQ9by5oZWlnaHR9LGFmdGVyRml0Om8saXNIb3Jpem9udGFsOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLnBvc2l0aW9uO3JldHVyblwidG9wXCI9PT10fHxcImJvdHRvbVwiPT09dH0sZHJhdzpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10LmN0eCxpPXcudmFsdWVPckRlZmF1bHQsbj10Lm9wdGlvbnMsYT1NLmdsb2JhbDtpZihuLmRpc3BsYXkpe3ZhciBvLHIscyxsPWkobi5mb250U2l6ZSxhLmRlZmF1bHRGb250U2l6ZSksdT1pKG4uZm9udFN0eWxlLGEuZGVmYXVsdEZvbnRTdHlsZSksZD1pKG4uZm9udEZhbWlseSxhLmRlZmF1bHRGb250RmFtaWx5KSxjPXcuZm9udFN0cmluZyhsLHUsZCksaD13Lm9wdGlvbnMudG9MaW5lSGVpZ2h0KG4ubGluZUhlaWdodCxsKSxmPWgvMituLnBhZGRpbmcsZz0wLHA9dC50b3AsbT10LmxlZnQsdj10LmJvdHRvbSxiPXQucmlnaHQ7ZS5maWxsU3R5bGU9aShuLmZvbnRDb2xvcixhLmRlZmF1bHRGb250Q29sb3IpLGUuZm9udD1jLHQuaXNIb3Jpem9udGFsKCk/KHI9bSsoYi1tKS8yLHM9cCtmLG89Yi1tKToocj1cImxlZnRcIj09PW4ucG9zaXRpb24/bStmOmItZixzPXArKHYtcCkvMixvPXYtcCxnPU1hdGguUEkqKFwibGVmdFwiPT09bi5wb3NpdGlvbj8tLjU6LjUpKSxlLnNhdmUoKSxlLnRyYW5zbGF0ZShyLHMpLGUucm90YXRlKGcpLGUudGV4dEFsaWduPVwiY2VudGVyXCIsZS50ZXh0QmFzZWxpbmU9XCJtaWRkbGVcIjt2YXIgeD1uLnRleHQ7aWYody5pc0FycmF5KHgpKWZvcih2YXIgeT0wLGs9MDtrPHgubGVuZ3RoOysrayllLmZpbGxUZXh0KHhba10sMCx5LG8pLHkrPWg7ZWxzZSBlLmZpbGxUZXh0KHgsMCwwLG8pO2UucmVzdG9yZSgpfX19KTtmdW5jdGlvbiBzKHQsZSl7dmFyIGk9bmV3IHIoe2N0eDp0LmN0eCxvcHRpb25zOmUsY2hhcnQ6dH0pO2EuY29uZmlndXJlKHQsaSxlKSxhLmFkZEJveCh0LGkpLHQudGl0bGVCbG9jaz1pfWUuZXhwb3J0cz17aWQ6XCJ0aXRsZVwiLF9lbGVtZW50OnIsYmVmb3JlSW5pdDpmdW5jdGlvbih0KXt2YXIgZT10Lm9wdGlvbnMudGl0bGU7ZSYmcyh0LGUpfSxiZWZvcmVVcGRhdGU6ZnVuY3Rpb24odCl7dmFyIGU9dC5vcHRpb25zLnRpdGxlLGk9dC50aXRsZUJsb2NrO2U/KHcubWVyZ2VJZihlLE0uZ2xvYmFsLnRpdGxlKSxpPyhhLmNvbmZpZ3VyZSh0LGksZSksaS5vcHRpb25zPWUpOnModCxlKSk6aSYmKGEucmVtb3ZlQm94KHQsaSksZGVsZXRlIHQudGl0bGVCbG9jayl9fX0sezI2OjI2LDI3OjI3LDMxOjMxLDQ2OjQ2fV0sNTQ6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10KDMzKSxhPXQoMzQpO2UuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciB0PW4uZXh0ZW5kKHtnZXRMYWJlbHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNoYXJ0LmRhdGE7cmV0dXJuIHRoaXMub3B0aW9ucy5sYWJlbHN8fCh0aGlzLmlzSG9yaXpvbnRhbCgpP3QueExhYmVsczp0LnlMYWJlbHMpfHx0LmxhYmVsc30sZGV0ZXJtaW5lRGF0YUxpbWl0czpmdW5jdGlvbigpe3ZhciB0LGU9dGhpcyxpPWUuZ2V0TGFiZWxzKCk7ZS5taW5JbmRleD0wLGUubWF4SW5kZXg9aS5sZW5ndGgtMSx2b2lkIDAhPT1lLm9wdGlvbnMudGlja3MubWluJiYodD1pLmluZGV4T2YoZS5vcHRpb25zLnRpY2tzLm1pbiksZS5taW5JbmRleD0tMSE9PXQ/dDplLm1pbkluZGV4KSx2b2lkIDAhPT1lLm9wdGlvbnMudGlja3MubWF4JiYodD1pLmluZGV4T2YoZS5vcHRpb25zLnRpY2tzLm1heCksZS5tYXhJbmRleD0tMSE9PXQ/dDplLm1heEluZGV4KSxlLm1pbj1pW2UubWluSW5kZXhdLGUubWF4PWlbZS5tYXhJbmRleF19LGJ1aWxkVGlja3M6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dC5nZXRMYWJlbHMoKTt0LnRpY2tzPTA9PT10Lm1pbkluZGV4JiZ0Lm1heEluZGV4PT09ZS5sZW5ndGgtMT9lOmUuc2xpY2UodC5taW5JbmRleCx0Lm1heEluZGV4KzEpfSxnZXRMYWJlbEZvckluZGV4OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcyxuPWkuY2hhcnQuZGF0YSxhPWkuaXNIb3Jpem9udGFsKCk7cmV0dXJuIG4ueUxhYmVscyYmIWE/aS5nZXRSaWdodFZhbHVlKG4uZGF0YXNldHNbZV0uZGF0YVt0XSk6aS50aWNrc1t0LWkubWluSW5kZXhdfSxnZXRQaXhlbEZvclZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIGksbj10aGlzLGE9bi5vcHRpb25zLm9mZnNldCxvPU1hdGgubWF4KG4ubWF4SW5kZXgrMS1uLm1pbkluZGV4LShhPzA6MSksMSk7aWYobnVsbCE9dCYmKGk9bi5pc0hvcml6b250YWwoKT90Lng6dC55KSx2b2lkIDAhPT1pfHx2b2lkIDAhPT10JiZpc05hTihlKSl7dD1pfHx0O3ZhciByPW4uZ2V0TGFiZWxzKCkuaW5kZXhPZih0KTtlPS0xIT09cj9yOmV9aWYobi5pc0hvcml6b250YWwoKSl7dmFyIHM9bi53aWR0aC9vLGw9cyooZS1uLm1pbkluZGV4KTtyZXR1cm4gYSYmKGwrPXMvMiksbi5sZWZ0K01hdGgucm91bmQobCl9dmFyIHU9bi5oZWlnaHQvbyxkPXUqKGUtbi5taW5JbmRleCk7cmV0dXJuIGEmJihkKz11LzIpLG4udG9wK01hdGgucm91bmQoZCl9LGdldFBpeGVsRm9yVGljazpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXRQaXhlbEZvclZhbHVlKHRoaXMudGlja3NbdF0sdCt0aGlzLm1pbkluZGV4LG51bGwpfSxnZXRWYWx1ZUZvclBpeGVsOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsaT1lLm9wdGlvbnMub2Zmc2V0LG49TWF0aC5tYXgoZS5fdGlja3MubGVuZ3RoLShpPzA6MSksMSksYT1lLmlzSG9yaXpvbnRhbCgpLG89KGE/ZS53aWR0aDplLmhlaWdodCkvbjtyZXR1cm4gdC09YT9lLmxlZnQ6ZS50b3AsaSYmKHQtPW8vMiksKHQ8PTA/MDpNYXRoLnJvdW5kKHQvbykpK2UubWluSW5kZXh9LGdldEJhc2VQaXhlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJvdHRvbX19KTthLnJlZ2lzdGVyU2NhbGVUeXBlKFwiY2F0ZWdvcnlcIix0LHtwb3NpdGlvbjpcImJvdHRvbVwifSl9fSx7MzM6MzMsMzQ6MzR9XSw1NTpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciBuPXQoMjYpLGM9dCg0NiksYT10KDM0KSxvPXQoMzUpO2UuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT17cG9zaXRpb246XCJsZWZ0XCIsdGlja3M6e2NhbGxiYWNrOm8uZm9ybWF0dGVycy5saW5lYXJ9fSxpPXQuTGluZWFyU2NhbGVCYXNlLmV4dGVuZCh7ZGV0ZXJtaW5lRGF0YUxpbWl0czpmdW5jdGlvbigpe3ZhciByPXRoaXMscz1yLm9wdGlvbnMsbD1yLmNoYXJ0LHQ9bC5kYXRhLmRhdGFzZXRzLGU9ci5pc0hvcml6b250YWwoKTtmdW5jdGlvbiB1KHQpe3JldHVybiBlP3QueEF4aXNJRD09PXIuaWQ6dC55QXhpc0lEPT09ci5pZH1yLm1pbj1udWxsLHIubWF4PW51bGw7dmFyIG49cy5zdGFja2VkO2lmKHZvaWQgMD09PW4mJmMuZWFjaCh0LGZ1bmN0aW9uKHQsZSl7aWYoIW4pe3ZhciBpPWwuZ2V0RGF0YXNldE1ldGEoZSk7bC5pc0RhdGFzZXRWaXNpYmxlKGUpJiZ1KGkpJiZ2b2lkIDAhPT1pLnN0YWNrJiYobj0hMCl9fSkscy5zdGFja2VkfHxuKXt2YXIgZD17fTtjLmVhY2godCxmdW5jdGlvbih0LGUpe3ZhciBuPWwuZ2V0RGF0YXNldE1ldGEoZSksaT1bbi50eXBlLHZvaWQgMD09PXMuc3RhY2tlZCYmdm9pZCAwPT09bi5zdGFjaz9lOlwiXCIsbi5zdGFja10uam9pbihcIi5cIik7dm9pZCAwPT09ZFtpXSYmKGRbaV09e3Bvc2l0aXZlVmFsdWVzOltdLG5lZ2F0aXZlVmFsdWVzOltdfSk7dmFyIGE9ZFtpXS5wb3NpdGl2ZVZhbHVlcyxvPWRbaV0ubmVnYXRpdmVWYWx1ZXM7bC5pc0RhdGFzZXRWaXNpYmxlKGUpJiZ1KG4pJiZjLmVhY2godC5kYXRhLGZ1bmN0aW9uKHQsZSl7dmFyIGk9K3IuZ2V0UmlnaHRWYWx1ZSh0KTtpc05hTihpKXx8bi5kYXRhW2VdLmhpZGRlbnx8KGFbZV09YVtlXXx8MCxvW2VdPW9bZV18fDAscy5yZWxhdGl2ZVBvaW50cz9hW2VdPTEwMDppPDA/b1tlXSs9aTphW2VdKz1pKX0pfSksYy5lYWNoKGQsZnVuY3Rpb24odCl7dmFyIGU9dC5wb3NpdGl2ZVZhbHVlcy5jb25jYXQodC5uZWdhdGl2ZVZhbHVlcyksaT1jLm1pbihlKSxuPWMubWF4KGUpO3IubWluPW51bGw9PT1yLm1pbj9pOk1hdGgubWluKHIubWluLGkpLHIubWF4PW51bGw9PT1yLm1heD9uOk1hdGgubWF4KHIubWF4LG4pfSl9ZWxzZSBjLmVhY2godCxmdW5jdGlvbih0LGUpe3ZhciBuPWwuZ2V0RGF0YXNldE1ldGEoZSk7bC5pc0RhdGFzZXRWaXNpYmxlKGUpJiZ1KG4pJiZjLmVhY2godC5kYXRhLGZ1bmN0aW9uKHQsZSl7dmFyIGk9K3IuZ2V0UmlnaHRWYWx1ZSh0KTtpc05hTihpKXx8bi5kYXRhW2VdLmhpZGRlbnx8KG51bGw9PT1yLm1pbj9yLm1pbj1pOmk8ci5taW4mJihyLm1pbj1pKSxudWxsPT09ci5tYXg/ci5tYXg9aTppPnIubWF4JiYoci5tYXg9aSkpfSl9KTtyLm1pbj1pc0Zpbml0ZShyLm1pbikmJiFpc05hTihyLm1pbik/ci5taW46MCxyLm1heD1pc0Zpbml0ZShyLm1heCkmJiFpc05hTihyLm1heCk/ci5tYXg6MSx0aGlzLmhhbmRsZVRpY2tSYW5nZU9wdGlvbnMoKX0sZ2V0VGlja0xpbWl0OmZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLm9wdGlvbnMudGlja3M7aWYodGhpcy5pc0hvcml6b250YWwoKSl0PU1hdGgubWluKGUubWF4VGlja3NMaW1pdD9lLm1heFRpY2tzTGltaXQ6MTEsTWF0aC5jZWlsKHRoaXMud2lkdGgvNTApKTtlbHNle3ZhciBpPWMudmFsdWVPckRlZmF1bHQoZS5mb250U2l6ZSxuLmdsb2JhbC5kZWZhdWx0Rm9udFNpemUpO3Q9TWF0aC5taW4oZS5tYXhUaWNrc0xpbWl0P2UubWF4VGlja3NMaW1pdDoxMSxNYXRoLmNlaWwodGhpcy5oZWlnaHQvKDIqaSkpKX1yZXR1cm4gdH0saGFuZGxlRGlyZWN0aW9uYWxDaGFuZ2VzOmZ1bmN0aW9uKCl7dGhpcy5pc0hvcml6b250YWwoKXx8dGhpcy50aWNrcy5yZXZlcnNlKCl9LGdldExhYmVsRm9ySW5kZXg6ZnVuY3Rpb24odCxlKXtyZXR1cm4rdGhpcy5nZXRSaWdodFZhbHVlKHRoaXMuY2hhcnQuZGF0YS5kYXRhc2V0c1tlXS5kYXRhW3RdKX0sZ2V0UGl4ZWxGb3JWYWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLGk9ZS5zdGFydCxuPStlLmdldFJpZ2h0VmFsdWUodCksYT1lLmVuZC1pO3JldHVybiBlLmlzSG9yaXpvbnRhbCgpP2UubGVmdCtlLndpZHRoL2EqKG4taSk6ZS5ib3R0b20tZS5oZWlnaHQvYSoobi1pKX0sZ2V0VmFsdWVGb3JQaXhlbDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLGk9ZS5pc0hvcml6b250YWwoKSxuPWk/ZS53aWR0aDplLmhlaWdodCxhPShpP3QtZS5sZWZ0OmUuYm90dG9tLXQpL247cmV0dXJuIGUuc3RhcnQrKGUuZW5kLWUuc3RhcnQpKmF9LGdldFBpeGVsRm9yVGljazpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXRQaXhlbEZvclZhbHVlKHRoaXMudGlja3NBc051bWJlcnNbdF0pfX0pO2EucmVnaXN0ZXJTY2FsZVR5cGUoXCJsaW5lYXJcIixpLGUpfX0sezI2OjI2LDM0OjM0LDM1OjM1LDQ2OjQ2fV0sNTY6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgYz10KDQ2KSxuPXQoMzMpO2UuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1jLm5vb3A7dC5MaW5lYXJTY2FsZUJhc2U9bi5leHRlbmQoe2dldFJpZ2h0VmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/K3Q6bi5wcm90b3R5cGUuZ2V0UmlnaHRWYWx1ZS5jYWxsKHRoaXMsdCl9LGhhbmRsZVRpY2tSYW5nZU9wdGlvbnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dC5vcHRpb25zLnRpY2tzO2lmKGUuYmVnaW5BdFplcm8pe3ZhciBpPWMuc2lnbih0Lm1pbiksbj1jLnNpZ24odC5tYXgpO2k8MCYmbjwwP3QubWF4PTA6MDxpJiYwPG4mJih0Lm1pbj0wKX12YXIgYT12b2lkIDAhPT1lLm1pbnx8dm9pZCAwIT09ZS5zdWdnZXN0ZWRNaW4sbz12b2lkIDAhPT1lLm1heHx8dm9pZCAwIT09ZS5zdWdnZXN0ZWRNYXg7dm9pZCAwIT09ZS5taW4/dC5taW49ZS5taW46dm9pZCAwIT09ZS5zdWdnZXN0ZWRNaW4mJihudWxsPT09dC5taW4/dC5taW49ZS5zdWdnZXN0ZWRNaW46dC5taW49TWF0aC5taW4odC5taW4sZS5zdWdnZXN0ZWRNaW4pKSx2b2lkIDAhPT1lLm1heD90Lm1heD1lLm1heDp2b2lkIDAhPT1lLnN1Z2dlc3RlZE1heCYmKG51bGw9PT10Lm1heD90Lm1heD1lLnN1Z2dlc3RlZE1heDp0Lm1heD1NYXRoLm1heCh0Lm1heCxlLnN1Z2dlc3RlZE1heCkpLGEhPT1vJiZ0Lm1pbj49dC5tYXgmJihhP3QubWF4PXQubWluKzE6dC5taW49dC5tYXgtMSksdC5taW49PT10Lm1heCYmKHQubWF4KyssZS5iZWdpbkF0WmVyb3x8dC5taW4tLSl9LGdldFRpY2tMaW1pdDplLGhhbmRsZURpcmVjdGlvbmFsQ2hhbmdlczplLGJ1aWxkVGlja3M6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dC5vcHRpb25zLnRpY2tzLGk9dC5nZXRUaWNrTGltaXQoKSxuPXttYXhUaWNrczppPU1hdGgubWF4KDIsaSksbWluOmUubWluLG1heDplLm1heCxwcmVjaXNpb246ZS5wcmVjaXNpb24sc3RlcFNpemU6Yy52YWx1ZU9yRGVmYXVsdChlLmZpeGVkU3RlcFNpemUsZS5zdGVwU2l6ZSl9LGE9dC50aWNrcz1mdW5jdGlvbih0LGUpe3ZhciBpLG4sYSxvPVtdO2lmKHQuc3RlcFNpemUmJjA8dC5zdGVwU2l6ZSlhPXQuc3RlcFNpemU7ZWxzZXt2YXIgcj1jLm5pY2VOdW0oZS5tYXgtZS5taW4sITEpO2E9Yy5uaWNlTnVtKHIvKHQubWF4VGlja3MtMSksITApLHZvaWQgMCE9PShuPXQucHJlY2lzaW9uKSYmKGk9TWF0aC5wb3coMTAsbiksYT1NYXRoLmNlaWwoYSppKS9pKX12YXIgcz1NYXRoLmZsb29yKGUubWluL2EpKmEsbD1NYXRoLmNlaWwoZS5tYXgvYSkqYTtjLmlzTnVsbE9yVW5kZWYodC5taW4pfHxjLmlzTnVsbE9yVW5kZWYodC5tYXgpfHwhdC5zdGVwU2l6ZXx8Yy5hbG1vc3RXaG9sZSgodC5tYXgtdC5taW4pL3Quc3RlcFNpemUsYS8xZTMpJiYocz10Lm1pbixsPXQubWF4KTt2YXIgdT0obC1zKS9hO3U9Yy5hbG1vc3RFcXVhbHModSxNYXRoLnJvdW5kKHUpLGEvMWUzKT9NYXRoLnJvdW5kKHUpOk1hdGguY2VpbCh1KSxhPChuPTEpJiYobj1NYXRoLnBvdygxMCwxLU1hdGguZmxvb3IoYy5sb2cxMChhKSkpLHM9TWF0aC5yb3VuZChzKm4pL24sbD1NYXRoLnJvdW5kKGwqbikvbiksby5wdXNoKHZvaWQgMCE9PXQubWluP3QubWluOnMpO2Zvcih2YXIgZD0xO2Q8dTsrK2Qpby5wdXNoKE1hdGgucm91bmQoKHMrZCphKSpuKS9uKTtyZXR1cm4gby5wdXNoKHZvaWQgMCE9PXQubWF4P3QubWF4OmwpLG99KG4sdCk7dC5oYW5kbGVEaXJlY3Rpb25hbENoYW5nZXMoKSx0Lm1heD1jLm1heChhKSx0Lm1pbj1jLm1pbihhKSxlLnJldmVyc2U/KGEucmV2ZXJzZSgpLHQuc3RhcnQ9dC5tYXgsdC5lbmQ9dC5taW4pOih0LnN0YXJ0PXQubWluLHQuZW5kPXQubWF4KX0sY29udmVydFRpY2tzVG9MYWJlbHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QudGlja3NBc051bWJlcnM9dC50aWNrcy5zbGljZSgpLHQuemVyb0xpbmVJbmRleD10LnRpY2tzLmluZGV4T2YoMCksbi5wcm90b3R5cGUuY29udmVydFRpY2tzVG9MYWJlbHMuY2FsbCh0KX19KX19LHszMzozMyw0Njo0Nn1dLDU3OltmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGg9dCg0Niksbj10KDMzKSxhPXQoMzQpLG89dCgzNSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGMpe3ZhciB0PXtwb3NpdGlvbjpcImxlZnRcIix0aWNrczp7Y2FsbGJhY2s6by5mb3JtYXR0ZXJzLmxvZ2FyaXRobWljfX0sZT1uLmV4dGVuZCh7ZGV0ZXJtaW5lRGF0YUxpbWl0czpmdW5jdGlvbigpe3ZhciByPXRoaXMsaT1yLm9wdGlvbnMscz1yLmNoYXJ0LHQ9cy5kYXRhLmRhdGFzZXRzLGU9ci5pc0hvcml6b250YWwoKTtmdW5jdGlvbiBsKHQpe3JldHVybiBlP3QueEF4aXNJRD09PXIuaWQ6dC55QXhpc0lEPT09ci5pZH1yLm1pbj1udWxsLHIubWF4PW51bGwsci5taW5Ob3RaZXJvPW51bGw7dmFyIG49aS5zdGFja2VkO2lmKHZvaWQgMD09PW4mJmguZWFjaCh0LGZ1bmN0aW9uKHQsZSl7aWYoIW4pe3ZhciBpPXMuZ2V0RGF0YXNldE1ldGEoZSk7cy5pc0RhdGFzZXRWaXNpYmxlKGUpJiZsKGkpJiZ2b2lkIDAhPT1pLnN0YWNrJiYobj0hMCl9fSksaS5zdGFja2VkfHxuKXt2YXIgdT17fTtoLmVhY2godCxmdW5jdGlvbih0LGUpe3ZhciBhPXMuZ2V0RGF0YXNldE1ldGEoZSksbz1bYS50eXBlLHZvaWQgMD09PWkuc3RhY2tlZCYmdm9pZCAwPT09YS5zdGFjaz9lOlwiXCIsYS5zdGFja10uam9pbihcIi5cIik7cy5pc0RhdGFzZXRWaXNpYmxlKGUpJiZsKGEpJiYodm9pZCAwPT09dVtvXSYmKHVbb109W10pLGguZWFjaCh0LmRhdGEsZnVuY3Rpb24odCxlKXt2YXIgaT11W29dLG49K3IuZ2V0UmlnaHRWYWx1ZSh0KTtpc05hTihuKXx8YS5kYXRhW2VdLmhpZGRlbnx8bjwwfHwoaVtlXT1pW2VdfHwwLGlbZV0rPW4pfSkpfSksaC5lYWNoKHUsZnVuY3Rpb24odCl7aWYoMDx0Lmxlbmd0aCl7dmFyIGU9aC5taW4odCksaT1oLm1heCh0KTtyLm1pbj1udWxsPT09ci5taW4/ZTpNYXRoLm1pbihyLm1pbixlKSxyLm1heD1udWxsPT09ci5tYXg/aTpNYXRoLm1heChyLm1heCxpKX19KX1lbHNlIGguZWFjaCh0LGZ1bmN0aW9uKHQsZSl7dmFyIG49cy5nZXREYXRhc2V0TWV0YShlKTtzLmlzRGF0YXNldFZpc2libGUoZSkmJmwobikmJmguZWFjaCh0LmRhdGEsZnVuY3Rpb24odCxlKXt2YXIgaT0rci5nZXRSaWdodFZhbHVlKHQpO2lzTmFOKGkpfHxuLmRhdGFbZV0uaGlkZGVufHxpPDB8fChudWxsPT09ci5taW4/ci5taW49aTppPHIubWluJiYoci5taW49aSksbnVsbD09PXIubWF4P3IubWF4PWk6aT5yLm1heCYmKHIubWF4PWkpLDAhPT1pJiYobnVsbD09PXIubWluTm90WmVyb3x8aTxyLm1pbk5vdFplcm8pJiYoci5taW5Ob3RaZXJvPWkpKX0pfSk7dGhpcy5oYW5kbGVUaWNrUmFuZ2VPcHRpb25zKCl9LGhhbmRsZVRpY2tSYW5nZU9wdGlvbnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dC5vcHRpb25zLnRpY2tzLGk9aC52YWx1ZU9yRGVmYXVsdDt0Lm1pbj1pKGUubWluLHQubWluKSx0Lm1heD1pKGUubWF4LHQubWF4KSx0Lm1pbj09PXQubWF4JiYoMCE9PXQubWluJiZudWxsIT09dC5taW4/KHQubWluPU1hdGgucG93KDEwLE1hdGguZmxvb3IoaC5sb2cxMCh0Lm1pbikpLTEpLHQubWF4PU1hdGgucG93KDEwLE1hdGguZmxvb3IoaC5sb2cxMCh0Lm1heCkpKzEpKToodC5taW49MSx0Lm1heD0xMCkpLG51bGw9PT10Lm1pbiYmKHQubWluPU1hdGgucG93KDEwLE1hdGguZmxvb3IoaC5sb2cxMCh0Lm1heCkpLTEpKSxudWxsPT09dC5tYXgmJih0Lm1heD0wIT09dC5taW4/TWF0aC5wb3coMTAsTWF0aC5mbG9vcihoLmxvZzEwKHQubWluKSkrMSk6MTApLG51bGw9PT10Lm1pbk5vdFplcm8mJigwPHQubWluP3QubWluTm90WmVybz10Lm1pbjp0Lm1heDwxP3QubWluTm90WmVybz1NYXRoLnBvdygxMCxNYXRoLmZsb29yKGgubG9nMTAodC5tYXgpKSk6dC5taW5Ob3RaZXJvPTEpfSxidWlsZFRpY2tzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXQub3B0aW9ucy50aWNrcyxpPSF0LmlzSG9yaXpvbnRhbCgpLG49e21pbjplLm1pbixtYXg6ZS5tYXh9LGE9dC50aWNrcz1mdW5jdGlvbih0LGUpe3ZhciBpLG4sYT1bXSxvPWgudmFsdWVPckRlZmF1bHQscj1vKHQubWluLE1hdGgucG93KDEwLE1hdGguZmxvb3IoaC5sb2cxMChlLm1pbikpKSkscz1NYXRoLmZsb29yKGgubG9nMTAoZS5tYXgpKSxsPU1hdGguY2VpbChlLm1heC9NYXRoLnBvdygxMCxzKSk7MD09PXI/KGk9TWF0aC5mbG9vcihoLmxvZzEwKGUubWluTm90WmVybykpLG49TWF0aC5mbG9vcihlLm1pbk5vdFplcm8vTWF0aC5wb3coMTAsaSkpLGEucHVzaChyKSxyPW4qTWF0aC5wb3coMTAsaSkpOihpPU1hdGguZmxvb3IoaC5sb2cxMChyKSksbj1NYXRoLmZsb29yKHIvTWF0aC5wb3coMTAsaSkpKTtmb3IodmFyIHU9aTwwP01hdGgucG93KDEwLE1hdGguYWJzKGkpKToxO2EucHVzaChyKSwxMD09KytuJiYobj0xLHU9MDw9KytpPzE6dSkscj1NYXRoLnJvdW5kKG4qTWF0aC5wb3coMTAsaSkqdSkvdSxpPHN8fGk9PT1zJiZuPGw7KTt2YXIgZD1vKHQubWF4LHIpO3JldHVybiBhLnB1c2goZCksYX0obix0KTt0Lm1heD1oLm1heChhKSx0Lm1pbj1oLm1pbihhKSxlLnJldmVyc2U/KGk9IWksdC5zdGFydD10Lm1heCx0LmVuZD10Lm1pbik6KHQuc3RhcnQ9dC5taW4sdC5lbmQ9dC5tYXgpLGkmJmEucmV2ZXJzZSgpfSxjb252ZXJ0VGlja3NUb0xhYmVsczpmdW5jdGlvbigpe3RoaXMudGlja1ZhbHVlcz10aGlzLnRpY2tzLnNsaWNlKCksbi5wcm90b3R5cGUuY29udmVydFRpY2tzVG9MYWJlbHMuY2FsbCh0aGlzKX0sZ2V0TGFiZWxGb3JJbmRleDpmdW5jdGlvbih0LGUpe3JldHVybit0aGlzLmdldFJpZ2h0VmFsdWUodGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzW2VdLmRhdGFbdF0pfSxnZXRQaXhlbEZvclRpY2s6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0UGl4ZWxGb3JWYWx1ZSh0aGlzLnRpY2tWYWx1ZXNbdF0pfSxfZ2V0Rmlyc3RUaWNrVmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5mbG9vcihoLmxvZzEwKHQpKTtyZXR1cm4gTWF0aC5mbG9vcih0L01hdGgucG93KDEwLGUpKSpNYXRoLnBvdygxMCxlKX0sZ2V0UGl4ZWxGb3JWYWx1ZTpmdW5jdGlvbih0KXt2YXIgZSxpLG4sYSxvLHI9dGhpcyxzPXIub3B0aW9ucy50aWNrcy5yZXZlcnNlLGw9aC5sb2cxMCx1PXIuX2dldEZpcnN0VGlja1ZhbHVlKHIubWluTm90WmVybyksZD0wO3JldHVybiB0PStyLmdldFJpZ2h0VmFsdWUodCksbz1zPyhuPXIuZW5kLGE9ci5zdGFydCwtMSk6KG49ci5zdGFydCxhPXIuZW5kLDEpLGk9ci5pc0hvcml6b250YWwoKT8oZT1yLndpZHRoLHM/ci5yaWdodDpyLmxlZnQpOihlPXIuaGVpZ2h0LG8qPS0xLHM/ci50b3A6ci5ib3R0b20pLHQhPT1uJiYoMD09PW4mJihlLT1kPWguZ2V0VmFsdWVPckRlZmF1bHQoci5vcHRpb25zLnRpY2tzLmZvbnRTaXplLGMuZGVmYXVsdHMuZ2xvYmFsLmRlZmF1bHRGb250U2l6ZSksbj11KSwwIT09dCYmKGQrPWUvKGwoYSktbChuKSkqKGwodCktbChuKSkpLGkrPW8qZCksaX0sZ2V0VmFsdWVGb3JQaXhlbDpmdW5jdGlvbih0KXt2YXIgZSxpLG4sYSxvPXRoaXMscj1vLm9wdGlvbnMudGlja3MucmV2ZXJzZSxzPWgubG9nMTAsbD1vLl9nZXRGaXJzdFRpY2tWYWx1ZShvLm1pbk5vdFplcm8pO2lmKG49cj8oaT1vLmVuZCxvLnN0YXJ0KTooaT1vLnN0YXJ0LG8uZW5kKSwoYT1vLmlzSG9yaXpvbnRhbCgpPyhlPW8ud2lkdGgscj9vLnJpZ2h0LXQ6dC1vLmxlZnQpOihlPW8uaGVpZ2h0LHI/dC1vLnRvcDpvLmJvdHRvbS10KSkhPT1pKXtpZigwPT09aSl7dmFyIHU9aC5nZXRWYWx1ZU9yRGVmYXVsdChvLm9wdGlvbnMudGlja3MuZm9udFNpemUsYy5kZWZhdWx0cy5nbG9iYWwuZGVmYXVsdEZvbnRTaXplKTthLT11LGUtPXUsaT1sfWEqPXMobiktcyhpKSxhLz1lLGE9TWF0aC5wb3coMTAscyhpKSthKX1yZXR1cm4gYX19KTthLnJlZ2lzdGVyU2NhbGVUeXBlKFwibG9nYXJpdGhtaWNcIixlLHQpfX0sezMzOjMzLDM0OjM0LDM1OjM1LDQ2OjQ2fV0sNTg6W2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10KDI2KSxrPXQoNDYpLGE9dCgzNCksbz10KDM1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHY9bi5nbG9iYWwsdD17ZGlzcGxheTohMCxhbmltYXRlOiEwLHBvc2l0aW9uOlwiY2hhcnRBcmVhXCIsYW5nbGVMaW5lczp7ZGlzcGxheTohMCxjb2xvcjpcInJnYmEoMCwgMCwgMCwgMC4xKVwiLGxpbmVXaWR0aDoxfSxncmlkTGluZXM6e2NpcmN1bGFyOiExfSx0aWNrczp7c2hvd0xhYmVsQmFja2Ryb3A6ITAsYmFja2Ryb3BDb2xvcjpcInJnYmEoMjU1LDI1NSwyNTUsMC43NSlcIixiYWNrZHJvcFBhZGRpbmdZOjIsYmFja2Ryb3BQYWRkaW5nWDoyLGNhbGxiYWNrOm8uZm9ybWF0dGVycy5saW5lYXJ9LHBvaW50TGFiZWxzOntkaXNwbGF5OiEwLGZvbnRTaXplOjEwLGNhbGxiYWNrOmZ1bmN0aW9uKHQpe3JldHVybiB0fX19O2Z1bmN0aW9uIGIodCl7dmFyIGU9dC5vcHRpb25zO3JldHVybiBlLmFuZ2xlTGluZXMuZGlzcGxheXx8ZS5wb2ludExhYmVscy5kaXNwbGF5P3QuY2hhcnQuZGF0YS5sYWJlbHMubGVuZ3RoOjB9ZnVuY3Rpb24geCh0KXt2YXIgZT10Lm9wdGlvbnMucG9pbnRMYWJlbHMsaT1rLnZhbHVlT3JEZWZhdWx0KGUuZm9udFNpemUsdi5kZWZhdWx0Rm9udFNpemUpLG49ay52YWx1ZU9yRGVmYXVsdChlLmZvbnRTdHlsZSx2LmRlZmF1bHRGb250U3R5bGUpLGE9ay52YWx1ZU9yRGVmYXVsdChlLmZvbnRGYW1pbHksdi5kZWZhdWx0Rm9udEZhbWlseSk7cmV0dXJue3NpemU6aSxzdHlsZTpuLGZhbWlseTphLGZvbnQ6ay5mb250U3RyaW5nKGksbixhKX19ZnVuY3Rpb24gbSh0LGUsaSxuLGEpe3JldHVybiB0PT09bnx8dD09PWE/e3N0YXJ0OmUtaS8yLGVuZDplK2kvMn06dDxufHxhPHQ/e3N0YXJ0OmUtaS01LGVuZDplfTp7c3RhcnQ6ZSxlbmQ6ZStpKzV9fWZ1bmN0aW9uIHkodCxlLGksbil7aWYoay5pc0FycmF5KGUpKWZvcih2YXIgYT1pLnksbz0xLjUqbixyPTA7cjxlLmxlbmd0aDsrK3IpdC5maWxsVGV4dChlW3JdLGkueCxhKSxhKz1vO2Vsc2UgdC5maWxsVGV4dChlLGkueCxpLnkpfWZ1bmN0aW9uIHModCl7cmV0dXJuIGsuaXNOdW1iZXIodCk/dDowfXZhciBpPWUuTGluZWFyU2NhbGVCYXNlLmV4dGVuZCh7c2V0RGltZW5zaW9uczpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10Lm9wdGlvbnMsaT1lLnRpY2tzO3Qud2lkdGg9dC5tYXhXaWR0aCx0LmhlaWdodD10Lm1heEhlaWdodCx0LnhDZW50ZXI9TWF0aC5yb3VuZCh0LndpZHRoLzIpLHQueUNlbnRlcj1NYXRoLnJvdW5kKHQuaGVpZ2h0LzIpO3ZhciBuPWsubWluKFt0LmhlaWdodCx0LndpZHRoXSksYT1rLnZhbHVlT3JEZWZhdWx0KGkuZm9udFNpemUsdi5kZWZhdWx0Rm9udFNpemUpO3QuZHJhd2luZ0FyZWE9ZS5kaXNwbGF5P24vMi0oYS8yK2kuYmFja2Ryb3BQYWRkaW5nWSk6bi8yfSxkZXRlcm1pbmVEYXRhTGltaXRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxpPWEuY2hhcnQsbz1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkscj1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7ay5lYWNoKGkuZGF0YS5kYXRhc2V0cyxmdW5jdGlvbih0LGUpe2lmKGkuaXNEYXRhc2V0VmlzaWJsZShlKSl7dmFyIG49aS5nZXREYXRhc2V0TWV0YShlKTtrLmVhY2godC5kYXRhLGZ1bmN0aW9uKHQsZSl7dmFyIGk9K2EuZ2V0UmlnaHRWYWx1ZSh0KTtpc05hTihpKXx8bi5kYXRhW2VdLmhpZGRlbnx8KG89TWF0aC5taW4oaSxvKSxyPU1hdGgubWF4KGkscikpfSl9fSksYS5taW49bz09PU51bWJlci5QT1NJVElWRV9JTkZJTklUWT8wOm8sYS5tYXg9cj09PU51bWJlci5ORUdBVElWRV9JTkZJTklUWT8wOnIsYS5oYW5kbGVUaWNrUmFuZ2VPcHRpb25zKCl9LGdldFRpY2tMaW1pdDpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy50aWNrcyxlPWsudmFsdWVPckRlZmF1bHQodC5mb250U2l6ZSx2LmRlZmF1bHRGb250U2l6ZSk7cmV0dXJuIE1hdGgubWluKHQubWF4VGlja3NMaW1pdD90Lm1heFRpY2tzTGltaXQ6MTEsTWF0aC5jZWlsKHRoaXMuZHJhd2luZ0FyZWEvKDEuNSplKSkpfSxjb252ZXJ0VGlja3NUb0xhYmVsczpmdW5jdGlvbigpe3ZhciB0PXRoaXM7ZS5MaW5lYXJTY2FsZUJhc2UucHJvdG90eXBlLmNvbnZlcnRUaWNrc1RvTGFiZWxzLmNhbGwodCksdC5wb2ludExhYmVscz10LmNoYXJ0LmRhdGEubGFiZWxzLm1hcCh0Lm9wdGlvbnMucG9pbnRMYWJlbHMuY2FsbGJhY2ssdCl9LGdldExhYmVsRm9ySW5kZXg6ZnVuY3Rpb24odCxlKXtyZXR1cm4rdGhpcy5nZXRSaWdodFZhbHVlKHRoaXMuY2hhcnQuZGF0YS5kYXRhc2V0c1tlXS5kYXRhW3RdKX0sZml0OmZ1bmN0aW9uKCl7dmFyIHQsZTt0aGlzLm9wdGlvbnMucG9pbnRMYWJlbHMuZGlzcGxheT9mdW5jdGlvbih0KXt2YXIgZSxpLG4sYT14KHQpLG89TWF0aC5taW4odC5oZWlnaHQvMix0LndpZHRoLzIpLHI9e3I6dC53aWR0aCxsOjAsdDp0LmhlaWdodCxiOjB9LHM9e307dC5jdHguZm9udD1hLmZvbnQsdC5fcG9pbnRMYWJlbFNpemVzPVtdO3ZhciBsLHUsZCxjPWIodCk7Zm9yKGU9MDtlPGM7ZSsrKXtuPXQuZ2V0UG9pbnRQb3NpdGlvbihlLG8pLGw9dC5jdHgsdT1hLnNpemUsZD10LnBvaW50TGFiZWxzW2VdfHxcIlwiLGk9ay5pc0FycmF5KGQpP3t3OmsubG9uZ2VzdFRleHQobCxsLmZvbnQsZCksaDpkLmxlbmd0aCp1KzEuNSooZC5sZW5ndGgtMSkqdX06e3c6bC5tZWFzdXJlVGV4dChkKS53aWR0aCxoOnV9LHQuX3BvaW50TGFiZWxTaXplc1tlXT1pO3ZhciBoPXQuZ2V0SW5kZXhBbmdsZShlKSxmPWsudG9EZWdyZWVzKGgpJTM2MCxnPW0oZixuLngsaS53LDAsMTgwKSxwPW0oZixuLnksaS5oLDkwLDI3MCk7Zy5zdGFydDxyLmwmJihyLmw9Zy5zdGFydCxzLmw9aCksZy5lbmQ+ci5yJiYoci5yPWcuZW5kLHMucj1oKSxwLnN0YXJ0PHIudCYmKHIudD1wLnN0YXJ0LHMudD1oKSxwLmVuZD5yLmImJihyLmI9cC5lbmQscy5iPWgpfXQuc2V0UmVkdWN0aW9ucyhvLHIscyl9KHRoaXMpOih0PXRoaXMsZT1NYXRoLm1pbih0LmhlaWdodC8yLHQud2lkdGgvMiksdC5kcmF3aW5nQXJlYT1NYXRoLnJvdW5kKGUpLHQuc2V0Q2VudGVyUG9pbnQoMCwwLDAsMCkpfSxzZXRSZWR1Y3Rpb25zOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1lLmwvTWF0aC5zaW4oaS5sKSxhPU1hdGgubWF4KGUuci10aGlzLndpZHRoLDApL01hdGguc2luKGkuciksbz0tZS50L01hdGguY29zKGkudCkscj0tTWF0aC5tYXgoZS5iLXRoaXMuaGVpZ2h0LDApL01hdGguY29zKGkuYik7bj1zKG4pLGE9cyhhKSxvPXMobykscj1zKHIpLHRoaXMuZHJhd2luZ0FyZWE9TWF0aC5taW4oTWF0aC5yb3VuZCh0LShuK2EpLzIpLE1hdGgucm91bmQodC0obytyKS8yKSksdGhpcy5zZXRDZW50ZXJQb2ludChuLGEsbyxyKX0sc2V0Q2VudGVyUG9pbnQ6ZnVuY3Rpb24odCxlLGksbil7dmFyIGE9dGhpcyxvPWEud2lkdGgtZS1hLmRyYXdpbmdBcmVhLHI9dCthLmRyYXdpbmdBcmVhLHM9aSthLmRyYXdpbmdBcmVhLGw9YS5oZWlnaHQtbi1hLmRyYXdpbmdBcmVhO2EueENlbnRlcj1NYXRoLnJvdW5kKChyK28pLzIrYS5sZWZ0KSxhLnlDZW50ZXI9TWF0aC5yb3VuZCgocytsKS8yK2EudG9wKX0sZ2V0SW5kZXhBbmdsZTpmdW5jdGlvbih0KXtyZXR1cm4gdCooMipNYXRoLlBJL2IodGhpcykpKyh0aGlzLmNoYXJ0Lm9wdGlvbnMmJnRoaXMuY2hhcnQub3B0aW9ucy5zdGFydEFuZ2xlP3RoaXMuY2hhcnQub3B0aW9ucy5zdGFydEFuZ2xlOjApKk1hdGguUEkqMi8zNjB9LGdldERpc3RhbmNlRnJvbUNlbnRlckZvclZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYobnVsbD09PXQpcmV0dXJuIDA7dmFyIGk9ZS5kcmF3aW5nQXJlYS8oZS5tYXgtZS5taW4pO3JldHVybiBlLm9wdGlvbnMudGlja3MucmV2ZXJzZT8oZS5tYXgtdCkqaToodC1lLm1pbikqaX0sZ2V0UG9pbnRQb3NpdGlvbjpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuZ2V0SW5kZXhBbmdsZSh0KS1NYXRoLlBJLzI7cmV0dXJue3g6TWF0aC5yb3VuZChNYXRoLmNvcyhpKSplKSt0aGlzLnhDZW50ZXIseTpNYXRoLnJvdW5kKE1hdGguc2luKGkpKmUpK3RoaXMueUNlbnRlcn19LGdldFBvaW50UG9zaXRpb25Gb3JWYWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmdldFBvaW50UG9zaXRpb24odCx0aGlzLmdldERpc3RhbmNlRnJvbUNlbnRlckZvclZhbHVlKGUpKX0sZ2V0QmFzZVBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5taW4sZT10aGlzLm1heDtyZXR1cm4gdGhpcy5nZXRQb2ludFBvc2l0aW9uRm9yVmFsdWUoMCx0aGlzLmJlZ2luQXRaZXJvPzA6dDwwJiZlPDA/ZTowPHQmJjA8ZT90OjApfSxkcmF3OmZ1bmN0aW9uKCl7dmFyIG89dGhpcyx0PW8ub3B0aW9ucyxyPXQuZ3JpZExpbmVzLHM9dC50aWNrcyxsPWsudmFsdWVPckRlZmF1bHQ7aWYodC5kaXNwbGF5KXt2YXIgdT1vLmN0eCxkPXRoaXMuZ2V0SW5kZXhBbmdsZSgwKSxjPWwocy5mb250U2l6ZSx2LmRlZmF1bHRGb250U2l6ZSksZT1sKHMuZm9udFN0eWxlLHYuZGVmYXVsdEZvbnRTdHlsZSksaT1sKHMuZm9udEZhbWlseSx2LmRlZmF1bHRGb250RmFtaWx5KSxoPWsuZm9udFN0cmluZyhjLGUsaSk7ay5lYWNoKG8udGlja3MsZnVuY3Rpb24odCxlKXtpZigwPGV8fHMucmV2ZXJzZSl7dmFyIGk9by5nZXREaXN0YW5jZUZyb21DZW50ZXJGb3JWYWx1ZShvLnRpY2tzQXNOdW1iZXJzW2VdKTtpZihyLmRpc3BsYXkmJjAhPT1lJiZmdW5jdGlvbih0LGUsaSxuKXt2YXIgYT10LmN0eDtpZihhLnN0cm9rZVN0eWxlPWsudmFsdWVBdEluZGV4T3JEZWZhdWx0KGUuY29sb3Isbi0xKSxhLmxpbmVXaWR0aD1rLnZhbHVlQXRJbmRleE9yRGVmYXVsdChlLmxpbmVXaWR0aCxuLTEpLHQub3B0aW9ucy5ncmlkTGluZXMuY2lyY3VsYXIpYS5iZWdpblBhdGgoKSxhLmFyYyh0LnhDZW50ZXIsdC55Q2VudGVyLGksMCwyKk1hdGguUEkpLGEuY2xvc2VQYXRoKCksYS5zdHJva2UoKTtlbHNle3ZhciBvPWIodCk7aWYoMD09PW8pcmV0dXJuO2EuYmVnaW5QYXRoKCk7dmFyIHI9dC5nZXRQb2ludFBvc2l0aW9uKDAsaSk7YS5tb3ZlVG8oci54LHIueSk7Zm9yKHZhciBzPTE7czxvO3MrKylyPXQuZ2V0UG9pbnRQb3NpdGlvbihzLGkpLGEubGluZVRvKHIueCxyLnkpO2EuY2xvc2VQYXRoKCksYS5zdHJva2UoKX19KG8scixpLGUpLHMuZGlzcGxheSl7dmFyIG49bChzLmZvbnRDb2xvcix2LmRlZmF1bHRGb250Q29sb3IpO2lmKHUuZm9udD1oLHUuc2F2ZSgpLHUudHJhbnNsYXRlKG8ueENlbnRlcixvLnlDZW50ZXIpLHUucm90YXRlKGQpLHMuc2hvd0xhYmVsQmFja2Ryb3Ape3ZhciBhPXUubWVhc3VyZVRleHQodCkud2lkdGg7dS5maWxsU3R5bGU9cy5iYWNrZHJvcENvbG9yLHUuZmlsbFJlY3QoLWEvMi1zLmJhY2tkcm9wUGFkZGluZ1gsLWktYy8yLXMuYmFja2Ryb3BQYWRkaW5nWSxhKzIqcy5iYWNrZHJvcFBhZGRpbmdYLGMrMipzLmJhY2tkcm9wUGFkZGluZ1kpfXUudGV4dEFsaWduPVwiY2VudGVyXCIsdS50ZXh0QmFzZWxpbmU9XCJtaWRkbGVcIix1LmZpbGxTdHlsZT1uLHUuZmlsbFRleHQodCwwLC1pKSx1LnJlc3RvcmUoKX19fSksKHQuYW5nbGVMaW5lcy5kaXNwbGF5fHx0LnBvaW50TGFiZWxzLmRpc3BsYXkpJiZmdW5jdGlvbih0KXt2YXIgZT10LmN0eCxpPXQub3B0aW9ucyxuPWkuYW5nbGVMaW5lcyxhPWkucG9pbnRMYWJlbHM7ZS5saW5lV2lkdGg9bi5saW5lV2lkdGgsZS5zdHJva2VTdHlsZT1uLmNvbG9yO3ZhciBvLHIscyxsLHU9dC5nZXREaXN0YW5jZUZyb21DZW50ZXJGb3JWYWx1ZShpLnRpY2tzLnJldmVyc2U/dC5taW46dC5tYXgpLGQ9eCh0KTtlLnRleHRCYXNlbGluZT1cInRvcFwiO2Zvcih2YXIgYz1iKHQpLTE7MDw9YztjLS0pe2lmKG4uZGlzcGxheSl7dmFyIGg9dC5nZXRQb2ludFBvc2l0aW9uKGMsdSk7ZS5iZWdpblBhdGgoKSxlLm1vdmVUbyh0LnhDZW50ZXIsdC55Q2VudGVyKSxlLmxpbmVUbyhoLngsaC55KSxlLnN0cm9rZSgpLGUuY2xvc2VQYXRoKCl9aWYoYS5kaXNwbGF5KXt2YXIgZj10LmdldFBvaW50UG9zaXRpb24oYyx1KzUpLGc9ay52YWx1ZUF0SW5kZXhPckRlZmF1bHQoYS5mb250Q29sb3IsYyx2LmRlZmF1bHRGb250Q29sb3IpO2UuZm9udD1kLmZvbnQsZS5maWxsU3R5bGU9Zzt2YXIgcD10LmdldEluZGV4QW5nbGUoYyksbT1rLnRvRGVncmVlcyhwKTtlLnRleHRBbGlnbj0wPT09KGw9bSl8fDE4MD09PWw/XCJjZW50ZXJcIjpsPDE4MD9cImxlZnRcIjpcInJpZ2h0XCIsbz1tLHI9dC5fcG9pbnRMYWJlbFNpemVzW2NdLHM9Ziw5MD09PW98fDI3MD09PW8/cy55LT1yLmgvMjooMjcwPG98fG88OTApJiYocy55LT1yLmgpLHkoZSx0LnBvaW50TGFiZWxzW2NdfHxcIlwiLGYsZC5zaXplKX19fShvKX19fSk7YS5yZWdpc3RlclNjYWxlVHlwZShcInJhZGlhbExpbmVhclwiLGksdCl9fSx7MjY6MjYsMzQ6MzQsMzU6MzUsNDY6NDZ9XSw1OTpbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciB4PXQoMSk7eD1cImZ1bmN0aW9uXCI9PXR5cGVvZiB4P3g6d2luZG93Lm1vbWVudDt2YXIgcj10KDI2KSxtPXQoNDYpLG49dCgzMyksYT10KDM0KSxwPU51bWJlci5NSU5fU0FGRV9JTlRFR0VSfHwtOTAwNzE5OTI1NDc0MDk5MSx2PU51bWJlci5NQVhfU0FGRV9JTlRFR0VSfHw5MDA3MTk5MjU0NzQwOTkxLHk9e21pbGxpc2Vjb25kOntjb21tb246ITAsc2l6ZToxLHN0ZXBzOlsxLDIsNSwxMCwyMCw1MCwxMDAsMjUwLDUwMF19LHNlY29uZDp7Y29tbW9uOiEwLHNpemU6MWUzLHN0ZXBzOlsxLDIsNSwxMCwxNSwzMF19LG1pbnV0ZTp7Y29tbW9uOiEwLHNpemU6NmU0LHN0ZXBzOlsxLDIsNSwxMCwxNSwzMF19LGhvdXI6e2NvbW1vbjohMCxzaXplOjM2ZTUsc3RlcHM6WzEsMiwzLDYsMTJdfSxkYXk6e2NvbW1vbjohMCxzaXplOjg2NGU1LHN0ZXBzOlsxLDIsNV19LHdlZWs6e2NvbW1vbjohMSxzaXplOjYwNDhlNSxzdGVwczpbMSwyLDMsNF19LG1vbnRoOntjb21tb246ITAsc2l6ZToyNjI4ZTYsc3RlcHM6WzEsMiwzXX0scXVhcnRlcjp7Y29tbW9uOiExLHNpemU6Nzg4NGU2LHN0ZXBzOlsxLDIsMyw0XX0seWVhcjp7Y29tbW9uOiEwLHNpemU6MzE1NGU3fX0saz1PYmplY3Qua2V5cyh5KTtmdW5jdGlvbiBiKHQsZSl7cmV0dXJuIHQtZX1mdW5jdGlvbiBNKHQpe3ZhciBlLGksbixhPXt9LG89W107Zm9yKGU9MCxpPXQubGVuZ3RoO2U8aTsrK2UpYVtuPXRbZV1dfHwoYVtuXT0hMCxvLnB1c2gobikpO3JldHVybiBvfWZ1bmN0aW9uIHcodCxlLGksbil7dmFyIGE9ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgbixhLG8scj0wLHM9dC5sZW5ndGgtMTswPD1yJiZyPD1zOyl7aWYoYT10WyhuPXIrcz4+MSktMV18fG51bGwsbz10W25dLCFhKXJldHVybntsbzpudWxsLGhpOm99O2lmKG9bZV08aSlyPW4rMTtlbHNle2lmKCEoYVtlXT5pKSlyZXR1cm57bG86YSxoaTpvfTtzPW4tMX19cmV0dXJue2xvOm8saGk6bnVsbH19KHQsZSxpKSxvPWEubG8/YS5oaT9hLmxvOnRbdC5sZW5ndGgtMl06dFswXSxyPWEubG8/YS5oaT9hLmhpOnRbdC5sZW5ndGgtMV06dFsxXSxzPXJbZV0tb1tlXSxsPXM/KGktb1tlXSkvczowLHU9KHJbbl0tb1tuXSkqbDtyZXR1cm4gb1tuXSt1fWZ1bmN0aW9uIEModCxlKXt2YXIgaT1lLnBhcnNlcixuPWUucGFyc2VyfHxlLmZvcm1hdDtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBpP2kodCk6XCJzdHJpbmdcIj09dHlwZW9mIHQmJlwic3RyaW5nXCI9PXR5cGVvZiBuP3godCxuKToodCBpbnN0YW5jZW9mIHh8fCh0PXgodCkpLHQuaXNWYWxpZCgpP3Q6XCJmdW5jdGlvblwiPT10eXBlb2Ygbj9uKHQpOnQpfWZ1bmN0aW9uIFModCxlKXtpZihtLmlzTnVsbE9yVW5kZWYodCkpcmV0dXJuIG51bGw7dmFyIGk9ZS5vcHRpb25zLnRpbWUsbj1DKGUuZ2V0UmlnaHRWYWx1ZSh0KSxpKTtyZXR1cm4gbi5pc1ZhbGlkKCk/KGkucm91bmQmJm4uc3RhcnRPZihpLnJvdW5kKSxuLnZhbHVlT2YoKSk6bnVsbH1mdW5jdGlvbiBfKHQpe2Zvcih2YXIgZT1rLmluZGV4T2YodCkrMSxpPWsubGVuZ3RoO2U8aTsrK2UpaWYoeVtrW2VdXS5jb21tb24pcmV0dXJuIGtbZV19ZnVuY3Rpb24gRCh0LGUsaSxuKXt2YXIgYSxvPW4udGltZSxyPW8udW5pdHx8ZnVuY3Rpb24odCxlLGksbil7dmFyIGEsbyxyLHM9ay5sZW5ndGg7Zm9yKGE9ay5pbmRleE9mKHQpO2E8cy0xOysrYSlpZihyPShvPXlba1thXV0pLnN0ZXBzP28uc3RlcHNbby5zdGVwcy5sZW5ndGgtMV06dixvLmNvbW1vbiYmTWF0aC5jZWlsKChpLWUpLyhyKm8uc2l6ZSkpPD1uKXJldHVybiBrW2FdO3JldHVybiBrW3MtMV19KG8ubWluVW5pdCx0LGUsaSkscz1fKHIpLGw9bS52YWx1ZU9yRGVmYXVsdChvLnN0ZXBTaXplLG8udW5pdFN0ZXBTaXplKSx1PVwid2Vla1wiPT09ciYmby5pc29XZWVrZGF5LGQ9bi50aWNrcy5tYWpvci5lbmFibGVkLGM9eVtyXSxoPXgodCksZj14KGUpLGc9W107Zm9yKGx8fChsPWZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBhLG8scixzPWUtdCxsPXlbaV0sdT1sLnNpemUsZD1sLnN0ZXBzO2lmKCFkKXJldHVybiBNYXRoLmNlaWwocy8obip1KSk7Zm9yKGE9MCxvPWQubGVuZ3RoO2E8byYmKHI9ZFthXSwhKE1hdGguY2VpbChzLyh1KnIpKTw9bikpOysrYSk7cmV0dXJuIHJ9KHQsZSxyLGkpKSx1JiYoaD1oLmlzb1dlZWtkYXkodSksZj1mLmlzb1dlZWtkYXkodSkpLGg9aC5zdGFydE9mKHU/XCJkYXlcIjpyKSwoZj1mLnN0YXJ0T2YodT9cImRheVwiOnIpKTxlJiZmLmFkZCgxLHIpLGE9eChoKSxkJiZzJiYhdSYmIW8ucm91bmQmJihhLnN0YXJ0T2YocyksYS5hZGQofn4oKGgtYSkvKGMuc2l6ZSpsKSkqbCxyKSk7YTxmO2EuYWRkKGwscikpZy5wdXNoKCthKTtyZXR1cm4gZy5wdXNoKCthKSxnfWUuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciB0PW4uZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKCl7aWYoIXgpdGhyb3cgbmV3IEVycm9yKFwiQ2hhcnQuanMgLSBNb21lbnQuanMgY291bGQgbm90IGJlIGZvdW5kISBZb3UgbXVzdCBpbmNsdWRlIGl0IGJlZm9yZSBDaGFydC5qcyB0byB1c2UgdGhlIHRpbWUgc2NhbGUuIERvd25sb2FkIGF0IGh0dHBzOi8vbW9tZW50anMuY29tXCIpO3RoaXMubWVyZ2VUaWNrc09wdGlvbnMoKSxuLnByb3RvdHlwZS5pbml0aWFsaXplLmNhbGwodGhpcyl9LHVwZGF0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucztyZXR1cm4gdC50aW1lJiZ0LnRpbWUuZm9ybWF0JiZjb25zb2xlLndhcm4oXCJvcHRpb25zLnRpbWUuZm9ybWF0IGlzIGRlcHJlY2F0ZWQgYW5kIHJlcGxhY2VkIGJ5IG9wdGlvbnMudGltZS5wYXJzZXIuXCIpLG4ucHJvdG90eXBlLnVwZGF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldFJpZ2h0VmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnZvaWQgMCE9PXQudCYmKHQ9dC50KSxuLnByb3RvdHlwZS5nZXRSaWdodFZhbHVlLmNhbGwodGhpcyx0KX0sZGV0ZXJtaW5lRGF0YUxpbWl0czpmdW5jdGlvbigpe3ZhciB0LGUsaSxuLGEsbyxyPXRoaXMscz1yLmNoYXJ0LGw9ci5vcHRpb25zLnRpbWUsdT1sLnVuaXR8fFwiZGF5XCIsZD12LGM9cCxoPVtdLGY9W10sZz1bXTtmb3IodD0wLGk9cy5kYXRhLmxhYmVscy5sZW5ndGg7dDxpOysrdClnLnB1c2goUyhzLmRhdGEubGFiZWxzW3RdLHIpKTtmb3IodD0wLGk9KHMuZGF0YS5kYXRhc2V0c3x8W10pLmxlbmd0aDt0PGk7Kyt0KWlmKHMuaXNEYXRhc2V0VmlzaWJsZSh0KSlpZihhPXMuZGF0YS5kYXRhc2V0c1t0XS5kYXRhLG0uaXNPYmplY3QoYVswXSkpZm9yKGZbdF09W10sZT0wLG49YS5sZW5ndGg7ZTxuOysrZSlvPVMoYVtlXSxyKSxoLnB1c2gobyksZlt0XVtlXT1vO2Vsc2UgaC5wdXNoLmFwcGx5KGgsZyksZlt0XT1nLnNsaWNlKDApO2Vsc2UgZlt0XT1bXTtnLmxlbmd0aCYmKGc9TShnKS5zb3J0KGIpLGQ9TWF0aC5taW4oZCxnWzBdKSxjPU1hdGgubWF4KGMsZ1tnLmxlbmd0aC0xXSkpLGgubGVuZ3RoJiYoaD1NKGgpLnNvcnQoYiksZD1NYXRoLm1pbihkLGhbMF0pLGM9TWF0aC5tYXgoYyxoW2gubGVuZ3RoLTFdKSksZD1TKGwubWluLHIpfHxkLGM9UyhsLm1heCxyKXx8YyxkPWQ9PT12Pyt4KCkuc3RhcnRPZih1KTpkLGM9Yz09PXA/K3goKS5lbmRPZih1KSsxOmMsci5taW49TWF0aC5taW4oZCxjKSxyLm1heD1NYXRoLm1heChkKzEsYyksci5faG9yaXpvbnRhbD1yLmlzSG9yaXpvbnRhbCgpLHIuX3RhYmxlPVtdLHIuX3RpbWVzdGFtcHM9e2RhdGE6aCxkYXRhc2V0czpmLGxhYmVsczpnfX0sYnVpbGRUaWNrczpmdW5jdGlvbigpe3ZhciB0LGUsaSxuLGEsbyxyLHMsbCx1LGQsYyxoPXRoaXMsZj1oLm1pbixnPWgubWF4LHA9aC5vcHRpb25zLG09cC50aW1lLHY9W10sYj1bXTtzd2l0Y2gocC50aWNrcy5zb3VyY2Upe2Nhc2VcImRhdGFcIjp2PWguX3RpbWVzdGFtcHMuZGF0YTticmVhaztjYXNlXCJsYWJlbHNcIjp2PWguX3RpbWVzdGFtcHMubGFiZWxzO2JyZWFrO2Nhc2VcImF1dG9cIjpkZWZhdWx0OnY9RChmLGcsaC5nZXRMYWJlbENhcGFjaXR5KGYpLHApfWZvcihcInRpY2tzXCI9PT1wLmJvdW5kcyYmdi5sZW5ndGgmJihmPXZbMF0sZz12W3YubGVuZ3RoLTFdKSxmPVMobS5taW4saCl8fGYsZz1TKG0ubWF4LGgpfHxnLHQ9MCxlPXYubGVuZ3RoO3Q8ZTsrK3QpZjw9KGk9dlt0XSkmJmk8PWcmJmIucHVzaChpKTtyZXR1cm4gaC5taW49ZixoLm1heD1nLGguX3VuaXQ9bS51bml0fHxmdW5jdGlvbih0LGUsaSxuKXt2YXIgYSxvLHI9eC5kdXJhdGlvbih4KG4pLmRpZmYoeChpKSkpO2ZvcihhPWsubGVuZ3RoLTE7YT49ay5pbmRleE9mKGUpO2EtLSlpZihvPWtbYV0seVtvXS5jb21tb24mJnIuYXMobyk+PXQubGVuZ3RoKXJldHVybiBvO3JldHVybiBrW2U/ay5pbmRleE9mKGUpOjBdfShiLG0ubWluVW5pdCxoLm1pbixoLm1heCksaC5fbWFqb3JVbml0PV8oaC5fdW5pdCksaC5fdGFibGU9ZnVuY3Rpb24odCxlLGksbil7aWYoXCJsaW5lYXJcIj09PW58fCF0Lmxlbmd0aClyZXR1cm5be3RpbWU6ZSxwb3M6MH0se3RpbWU6aSxwb3M6MX1dO3ZhciBhLG8scixzLGwsdT1bXSxkPVtlXTtmb3IoYT0wLG89dC5sZW5ndGg7YTxvOysrYSllPChzPXRbYV0pJiZzPGkmJmQucHVzaChzKTtmb3IoZC5wdXNoKGkpLGE9MCxvPWQubGVuZ3RoO2E8bzsrK2EpbD1kW2ErMV0scj1kW2EtMV0scz1kW2FdLHZvaWQgMCE9PXImJnZvaWQgMCE9PWwmJk1hdGgucm91bmQoKGwrcikvMik9PT1zfHx1LnB1c2goe3RpbWU6cyxwb3M6YS8oby0xKX0pO3JldHVybiB1fShoLl90aW1lc3RhbXBzLmRhdGEsZixnLHAuZGlzdHJpYnV0aW9uKSxoLl9vZmZzZXRzPShuPWguX3RhYmxlLGE9YixvPWYscj1nLGM9ZD0wLChzPXApLm9mZnNldCYmYS5sZW5ndGgmJihzLnRpbWUubWlufHwobD0xPGEubGVuZ3RoP2FbMV06cix1PWFbMF0sZD0odyhuLFwidGltZVwiLGwsXCJwb3NcIiktdyhuLFwidGltZVwiLHUsXCJwb3NcIikpLzIpLHMudGltZS5tYXh8fChsPWFbYS5sZW5ndGgtMV0sdT0xPGEubGVuZ3RoP2FbYS5sZW5ndGgtMl06byxjPSh3KG4sXCJ0aW1lXCIsbCxcInBvc1wiKS13KG4sXCJ0aW1lXCIsdSxcInBvc1wiKSkvMikpLHtsZWZ0OmQscmlnaHQ6Y30pLGguX2xhYmVsRm9ybWF0PWZ1bmN0aW9uKHQsZSl7dmFyIGksbixhLG89dC5sZW5ndGg7Zm9yKGk9MDtpPG87aSsrKXtpZigwIT09KG49Qyh0W2ldLGUpKS5taWxsaXNlY29uZCgpKXJldHVyblwiTU1NIEQsIFlZWVkgaDptbTpzcy5TU1MgYVwiOzA9PT1uLnNlY29uZCgpJiYwPT09bi5taW51dGUoKSYmMD09PW4uaG91cigpfHwoYT0hMCl9cmV0dXJuIGE/XCJNTU0gRCwgWVlZWSBoOm1tOnNzIGFcIjpcIk1NTSBELCBZWVlZXCJ9KGguX3RpbWVzdGFtcHMuZGF0YSxtKSxmdW5jdGlvbih0LGUpe3ZhciBpLG4sYSxvLHI9W107Zm9yKGk9MCxuPXQubGVuZ3RoO2k8bjsrK2kpYT10W2ldLG89ISFlJiZhPT09K3goYSkuc3RhcnRPZihlKSxyLnB1c2goe3ZhbHVlOmEsbWFqb3I6b30pO3JldHVybiByfShiLGguX21ham9yVW5pdCl9LGdldExhYmVsRm9ySW5kZXg6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmNoYXJ0LmRhdGEsbj10aGlzLm9wdGlvbnMudGltZSxhPWkubGFiZWxzJiZ0PGkubGFiZWxzLmxlbmd0aD9pLmxhYmVsc1t0XTpcIlwiLG89aS5kYXRhc2V0c1tlXS5kYXRhW3RdO3JldHVybiBtLmlzT2JqZWN0KG8pJiYoYT10aGlzLmdldFJpZ2h0VmFsdWUobykpLG4udG9vbHRpcEZvcm1hdD9DKGEsbikuZm9ybWF0KG4udG9vbHRpcEZvcm1hdCk6XCJzdHJpbmdcIj09dHlwZW9mIGE/YTpDKGEsbikuZm9ybWF0KHRoaXMuX2xhYmVsRm9ybWF0KX0sdGlja0Zvcm1hdEZ1bmN0aW9uOmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBhPXRoaXMub3B0aW9ucyxvPXQudmFsdWVPZigpLHI9YS50aW1lLmRpc3BsYXlGb3JtYXRzLHM9clt0aGlzLl91bml0XSxsPXRoaXMuX21ham9yVW5pdCx1PXJbbF0sZD10LmNsb25lKCkuc3RhcnRPZihsKS52YWx1ZU9mKCksYz1hLnRpY2tzLm1ham9yLGg9Yy5lbmFibGVkJiZsJiZ1JiZvPT09ZCxmPXQuZm9ybWF0KG58fChoP3U6cykpLGc9aD9jOmEudGlja3MubWlub3IscD1tLnZhbHVlT3JEZWZhdWx0KGcuY2FsbGJhY2ssZy51c2VyQ2FsbGJhY2spO3JldHVybiBwP3AoZixlLGkpOmZ9LGNvbnZlcnRUaWNrc1RvTGFiZWxzOmZ1bmN0aW9uKHQpe3ZhciBlLGksbj1bXTtmb3IoZT0wLGk9dC5sZW5ndGg7ZTxpOysrZSluLnB1c2godGhpcy50aWNrRm9ybWF0RnVuY3Rpb24oeCh0W2VdLnZhbHVlKSxlLHQpKTtyZXR1cm4gbn0sZ2V0UGl4ZWxGb3JPZmZzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxpPWUuX2hvcml6b250YWw/ZS53aWR0aDplLmhlaWdodCxuPWUuX2hvcml6b250YWw/ZS5sZWZ0OmUudG9wLGE9dyhlLl90YWJsZSxcInRpbWVcIix0LFwicG9zXCIpO3JldHVybiBuK2kqKGUuX29mZnNldHMubGVmdCthKS8oZS5fb2Zmc2V0cy5sZWZ0KzErZS5fb2Zmc2V0cy5yaWdodCl9LGdldFBpeGVsRm9yVmFsdWU6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPW51bGw7aWYodm9pZCAwIT09ZSYmdm9pZCAwIT09aSYmKG49dGhpcy5fdGltZXN0YW1wcy5kYXRhc2V0c1tpXVtlXSksbnVsbD09PW4mJihuPVModCx0aGlzKSksbnVsbCE9PW4pcmV0dXJuIHRoaXMuZ2V0UGl4ZWxGb3JPZmZzZXQobil9LGdldFBpeGVsRm9yVGljazpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFRpY2tzKCk7cmV0dXJuIDA8PXQmJnQ8ZS5sZW5ndGg/dGhpcy5nZXRQaXhlbEZvck9mZnNldChlW3RdLnZhbHVlKTpudWxsfSxnZXRWYWx1ZUZvclBpeGVsOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsaT1lLl9ob3Jpem9udGFsP2Uud2lkdGg6ZS5oZWlnaHQsbj1lLl9ob3Jpem9udGFsP2UubGVmdDplLnRvcCxhPShpPyh0LW4pL2k6MCkqKGUuX29mZnNldHMubGVmdCsxK2UuX29mZnNldHMubGVmdCktZS5fb2Zmc2V0cy5yaWdodCxvPXcoZS5fdGFibGUsXCJwb3NcIixhLFwidGltZVwiKTtyZXR1cm4geChvKX0sZ2V0TGFiZWxXaWR0aDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm9wdGlvbnMudGlja3MsaT10aGlzLmN0eC5tZWFzdXJlVGV4dCh0KS53aWR0aCxuPW0udG9SYWRpYW5zKGUubWF4Um90YXRpb24pLGE9TWF0aC5jb3Mobiksbz1NYXRoLnNpbihuKTtyZXR1cm4gaSphK20udmFsdWVPckRlZmF1bHQoZS5mb250U2l6ZSxyLmdsb2JhbC5kZWZhdWx0Rm9udFNpemUpKm99LGdldExhYmVsQ2FwYWNpdHk6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5vcHRpb25zLnRpbWUuZGlzcGxheUZvcm1hdHMubWlsbGlzZWNvbmQsaT10aGlzLnRpY2tGb3JtYXRGdW5jdGlvbih4KHQpLDAsW10sZSksbj10aGlzLmdldExhYmVsV2lkdGgoaSksYT10aGlzLmlzSG9yaXpvbnRhbCgpP3RoaXMud2lkdGg6dGhpcy5oZWlnaHQsbz1NYXRoLmZsb29yKGEvbik7cmV0dXJuIDA8bz9vOjF9fSk7YS5yZWdpc3RlclNjYWxlVHlwZShcInRpbWVcIix0LHtwb3NpdGlvbjpcImJvdHRvbVwiLGRpc3RyaWJ1dGlvbjpcImxpbmVhclwiLGJvdW5kczpcImRhdGFcIix0aW1lOntwYXJzZXI6ITEsZm9ybWF0OiExLHVuaXQ6ITEscm91bmQ6ITEsZGlzcGxheUZvcm1hdDohMSxpc29XZWVrZGF5OiExLG1pblVuaXQ6XCJtaWxsaXNlY29uZFwiLGRpc3BsYXlGb3JtYXRzOnttaWxsaXNlY29uZDpcImg6bW06c3MuU1NTIGFcIixzZWNvbmQ6XCJoOm1tOnNzIGFcIixtaW51dGU6XCJoOm1tIGFcIixob3VyOlwiaEFcIixkYXk6XCJNTU0gRFwiLHdlZWs6XCJsbFwiLG1vbnRoOlwiTU1NIFlZWVlcIixxdWFydGVyOlwiW1FdUSAtIFlZWVlcIix5ZWFyOlwiWVlZWVwifX0sdGlja3M6e2F1dG9Ta2lwOiExLHNvdXJjZTpcImF1dG9cIixtYWpvcjp7ZW5hYmxlZDohMX19fSl9fSx7MToxLDI2OjI2LDMzOjMzLDM0OjM0LDQ2OjQ2fV19LHt9LFs3XSkoNyl9KTsiLCJpZiAoIUVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMpIHtcbiAgRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcyA9IEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8ICBFbGVtZW50LnByb3RvdHlwZS53ZWJraXRNYXRjaGVzU2VsZWN0b3I7XG59XG5cbmlmICghRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdCkge1xuICBFbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0ID0gZnVuY3Rpb24ocykge1xuICAgICAgdmFyIGVsID0gdGhpcztcbiAgICAgIGlmICghZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKGVsKSkgcmV0dXJuIG51bGw7XG4gICAgICBkbyB7XG4gICAgICAgICAgaWYgKGVsLm1hdGNoZXMocykpIHJldHVybiBlbDtcbiAgICAgICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQ7XG4gICAgICB9IHdoaWxlIChlbCAhPT0gbnVsbCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfTtcbn1cbiIsIiFmdW5jdGlvbihlKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIG47bj1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsbi5kcmFndWxhPWUoKX19KGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uIGUobix0LHIpe2Z1bmN0aW9uIG8odSxjKXtpZighdFt1XSl7aWYoIW5bdV0pe3ZhciBhPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWMmJmEpcmV0dXJuIGEodSwhMCk7aWYoaSlyZXR1cm4gaSh1LCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK3UrXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPXRbdV09e2V4cG9ydHM6e319O25bdV1bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHQ9blt1XVsxXVtlXTtyZXR1cm4gbyh0P3Q6ZSl9LGwsbC5leHBvcnRzLGUsbix0LHIpfXJldHVybiB0W3VdLmV4cG9ydHN9Zm9yKHZhciBpPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsdT0wO3U8ci5sZW5ndGg7dSsrKW8oclt1XSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbihlLG4sdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcihlKXt2YXIgbj11W2VdO3JldHVybiBuP24ubGFzdEluZGV4PTA6dVtlXT1uPW5ldyBSZWdFeHAoYytlK2EsXCJnXCIpLG59ZnVuY3Rpb24gbyhlLG4pe3ZhciB0PWUuY2xhc3NOYW1lO3QubGVuZ3RoP3IobikudGVzdCh0KXx8KGUuY2xhc3NOYW1lKz1cIiBcIituKTplLmNsYXNzTmFtZT1ufWZ1bmN0aW9uIGkoZSxuKXtlLmNsYXNzTmFtZT1lLmNsYXNzTmFtZS5yZXBsYWNlKHIobiksXCIgXCIpLnRyaW0oKX12YXIgdT17fSxjPVwiKD86XnxcXFxccylcIixhPVwiKD86XFxcXHN8JClcIjtuLmV4cG9ydHM9e2FkZDpvLHJtOml9fSx7fV0sMjpbZnVuY3Rpb24oZSxuLHQpeyhmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKGUsbil7ZnVuY3Rpb24gdChlKXtyZXR1cm4tMSE9PWxlLmNvbnRhaW5lcnMuaW5kZXhPZihlKXx8ZmUuaXNDb250YWluZXIoZSl9ZnVuY3Rpb24gcihlKXt2YXIgbj1lP1wicmVtb3ZlXCI6XCJhZGRcIjtvKFMsbixcIm1vdXNlZG93blwiLE8pLG8oUyxuLFwibW91c2V1cFwiLEwpfWZ1bmN0aW9uIGMoZSl7dmFyIG49ZT9cInJlbW92ZVwiOlwiYWRkXCI7byhTLG4sXCJtb3VzZW1vdmVcIixOKX1mdW5jdGlvbiBtKGUpe3ZhciBuPWU/XCJyZW1vdmVcIjpcImFkZFwiO3dbbl0oUyxcInNlbGVjdHN0YXJ0XCIsQyksd1tuXShTLFwiY2xpY2tcIixDKX1mdW5jdGlvbiBoKCl7cighMCksTCh7fSl9ZnVuY3Rpb24gQyhlKXtjZSYmZS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIE8oZSl7bmU9ZS5jbGllbnRYLHRlPWUuY2xpZW50WTt2YXIgbj0xIT09aShlKXx8ZS5tZXRhS2V5fHxlLmN0cmxLZXk7aWYoIW4pe3ZhciB0PWUudGFyZ2V0LHI9VCh0KTtyJiYoY2U9cixjKCksXCJtb3VzZWRvd25cIj09PWUudHlwZSYmKHAodCk/dC5mb2N1cygpOmUucHJldmVudERlZmF1bHQoKSkpfX1mdW5jdGlvbiBOKGUpe2lmKGNlKXtpZigwPT09aShlKSlyZXR1cm4gdm9pZCBMKHt9KTtpZih2b2lkIDA9PT1lLmNsaWVudFh8fGUuY2xpZW50WCE9PW5lfHx2b2lkIDA9PT1lLmNsaWVudFl8fGUuY2xpZW50WSE9PXRlKXtpZihmZS5pZ25vcmVJbnB1dFRleHRTZWxlY3Rpb24pe3ZhciBuPXkoXCJjbGllbnRYXCIsZSksdD15KFwiY2xpZW50WVwiLGUpLHI9eC5lbGVtZW50RnJvbVBvaW50KG4sdCk7aWYocChyKSlyZXR1cm59dmFyIG89Y2U7YyghMCksbSgpLEQoKSxCKG8pO3ZhciBhPXUoVyk7Wj15KFwicGFnZVhcIixlKS1hLmxlZnQsZWU9eShcInBhZ2VZXCIsZSktYS50b3AsRS5hZGQoaWV8fFcsXCJndS10cmFuc2l0XCIpLEsoKSxVKGUpfX19ZnVuY3Rpb24gVChlKXtpZighKGxlLmRyYWdnaW5nJiZKfHx0KGUpKSl7Zm9yKHZhciBuPWU7dihlKSYmdCh2KGUpKT09PSExOyl7aWYoZmUuaW52YWxpZChlLG4pKXJldHVybjtpZihlPXYoZSksIWUpcmV0dXJufXZhciByPXYoZSk7aWYociYmIWZlLmludmFsaWQoZSxuKSl7dmFyIG89ZmUubW92ZXMoZSxyLG4sZyhlKSk7aWYobylyZXR1cm57aXRlbTplLHNvdXJjZTpyfX19fWZ1bmN0aW9uIFgoZSl7cmV0dXJuISFUKGUpfWZ1bmN0aW9uIFkoZSl7dmFyIG49VChlKTtuJiZCKG4pfWZ1bmN0aW9uIEIoZSl7JChlLml0ZW0sZS5zb3VyY2UpJiYoaWU9ZS5pdGVtLmNsb25lTm9kZSghMCksbGUuZW1pdChcImNsb25lZFwiLGllLGUuaXRlbSxcImNvcHlcIikpLFE9ZS5zb3VyY2UsVz1lLml0ZW0scmU9b2U9ZyhlLml0ZW0pLGxlLmRyYWdnaW5nPSEwLGxlLmVtaXQoXCJkcmFnXCIsVyxRKX1mdW5jdGlvbiBQKCl7cmV0dXJuITF9ZnVuY3Rpb24gRCgpe2lmKGxlLmRyYWdnaW5nKXt2YXIgZT1pZXx8VztNKGUsdihlKSl9fWZ1bmN0aW9uIEkoKXtjZT0hMSxjKCEwKSxtKCEwKX1mdW5jdGlvbiBMKGUpe2lmKEkoKSxsZS5kcmFnZ2luZyl7dmFyIG49aWV8fFcsdD15KFwiY2xpZW50WFwiLGUpLHI9eShcImNsaWVudFlcIixlKSxvPWEoSix0LHIpLGk9cShvLHQscik7aSYmKGllJiZmZS5jb3B5U29ydFNvdXJjZXx8IWllfHxpIT09USk/TShuLGkpOmZlLnJlbW92ZU9uU3BpbGw/UigpOkEoKX19ZnVuY3Rpb24gTShlLG4pe3ZhciB0PXYoZSk7aWUmJmZlLmNvcHlTb3J0U291cmNlJiZuPT09USYmdC5yZW1vdmVDaGlsZChXKSxrKG4pP2xlLmVtaXQoXCJjYW5jZWxcIixlLFEsUSk6bGUuZW1pdChcImRyb3BcIixlLG4sUSxvZSksaigpfWZ1bmN0aW9uIFIoKXtpZihsZS5kcmFnZ2luZyl7dmFyIGU9aWV8fFcsbj12KGUpO24mJm4ucmVtb3ZlQ2hpbGQoZSksbGUuZW1pdChpZT9cImNhbmNlbFwiOlwicmVtb3ZlXCIsZSxuLFEpLGooKX19ZnVuY3Rpb24gQShlKXtpZihsZS5kcmFnZ2luZyl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4wP2U6ZmUucmV2ZXJ0T25TcGlsbCx0PWllfHxXLHI9dih0KSxvPWsocik7bz09PSExJiZuJiYoaWU/ciYmci5yZW1vdmVDaGlsZChpZSk6US5pbnNlcnRCZWZvcmUodCxyZSkpLG98fG4/bGUuZW1pdChcImNhbmNlbFwiLHQsUSxRKTpsZS5lbWl0KFwiZHJvcFwiLHQscixRLG9lKSxqKCl9fWZ1bmN0aW9uIGooKXt2YXIgZT1pZXx8VztJKCkseigpLGUmJkUucm0oZSxcImd1LXRyYW5zaXRcIiksdWUmJmNsZWFyVGltZW91dCh1ZSksbGUuZHJhZ2dpbmc9ITEsYWUmJmxlLmVtaXQoXCJvdXRcIixlLGFlLFEpLGxlLmVtaXQoXCJkcmFnZW5kXCIsZSksUT1XPWllPXJlPW9lPXVlPWFlPW51bGx9ZnVuY3Rpb24gayhlLG4pe3ZhciB0O3JldHVybiB0PXZvaWQgMCE9PW4/bjpKP29lOmcoaWV8fFcpLGU9PT1RJiZ0PT09cmV9ZnVuY3Rpb24gcShlLG4scil7ZnVuY3Rpb24gbygpe3ZhciBvPXQoaSk7aWYobz09PSExKXJldHVybiExO3ZhciB1PUgoaSxlKSxjPVYoaSx1LG4sciksYT1rKGksYyk7cmV0dXJuIGE/ITA6ZmUuYWNjZXB0cyhXLGksUSxjKX1mb3IodmFyIGk9ZTtpJiYhbygpOylpPXYoaSk7cmV0dXJuIGl9ZnVuY3Rpb24gVShlKXtmdW5jdGlvbiBuKGUpe2xlLmVtaXQoZSxmLGFlLFEpfWZ1bmN0aW9uIHQoKXtzJiZuKFwib3ZlclwiKX1mdW5jdGlvbiByKCl7YWUmJm4oXCJvdXRcIil9aWYoSil7ZS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBvPXkoXCJjbGllbnRYXCIsZSksaT15KFwiY2xpZW50WVwiLGUpLHU9by1aLGM9aS1lZTtKLnN0eWxlLmxlZnQ9dStcInB4XCIsSi5zdHlsZS50b3A9YytcInB4XCI7dmFyIGY9aWV8fFcsbD1hKEosbyxpKSxkPXEobCxvLGkpLHM9bnVsbCE9PWQmJmQhPT1hZTsoc3x8bnVsbD09PWQpJiYocigpLGFlPWQsdCgpKTt2YXIgcD12KGYpO2lmKGQ9PT1RJiZpZSYmIWZlLmNvcHlTb3J0U291cmNlKXJldHVybiB2b2lkKHAmJnAucmVtb3ZlQ2hpbGQoZikpO3ZhciBtLGg9SChkLGwpO2lmKG51bGwhPT1oKW09VihkLGgsbyxpKTtlbHNle2lmKGZlLnJldmVydE9uU3BpbGwhPT0hMHx8aWUpcmV0dXJuIHZvaWQoaWUmJnAmJnAucmVtb3ZlQ2hpbGQoZikpO209cmUsZD1RfShudWxsPT09bSYmc3x8bSE9PWYmJm0hPT1nKGYpKSYmKG9lPW0sZC5pbnNlcnRCZWZvcmUoZixtKSxsZS5lbWl0KFwic2hhZG93XCIsZixkLFEpKX19ZnVuY3Rpb24gXyhlKXtFLnJtKGUsXCJndS1oaWRlXCIpfWZ1bmN0aW9uIEYoZSl7bGUuZHJhZ2dpbmcmJkUuYWRkKGUsXCJndS1oaWRlXCIpfWZ1bmN0aW9uIEsoKXtpZighSil7dmFyIGU9Vy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtKPVcuY2xvbmVOb2RlKCEwKSxKLnN0eWxlLndpZHRoPWQoZSkrXCJweFwiLEouc3R5bGUuaGVpZ2h0PXMoZSkrXCJweFwiLEUucm0oSixcImd1LXRyYW5zaXRcIiksRS5hZGQoSixcImd1LW1pcnJvclwiKSxmZS5taXJyb3JDb250YWluZXIuYXBwZW5kQ2hpbGQoSiksbyhTLFwiYWRkXCIsXCJtb3VzZW1vdmVcIixVKSxFLmFkZChmZS5taXJyb3JDb250YWluZXIsXCJndS11bnNlbGVjdGFibGVcIiksbGUuZW1pdChcImNsb25lZFwiLEosVyxcIm1pcnJvclwiKX19ZnVuY3Rpb24geigpe0omJihFLnJtKGZlLm1pcnJvckNvbnRhaW5lcixcImd1LXVuc2VsZWN0YWJsZVwiKSxvKFMsXCJyZW1vdmVcIixcIm1vdXNlbW92ZVwiLFUpLHYoSikucmVtb3ZlQ2hpbGQoSiksSj1udWxsKX1mdW5jdGlvbiBIKGUsbil7Zm9yKHZhciB0PW47dCE9PWUmJnYodCkhPT1lOyl0PXYodCk7cmV0dXJuIHQ9PT1TP251bGw6dH1mdW5jdGlvbiBWKGUsbix0LHIpe2Z1bmN0aW9uIG8oKXt2YXIgbixvLGksdT1lLmNoaWxkcmVuLmxlbmd0aDtmb3Iobj0wO3U+bjtuKyspe2lmKG89ZS5jaGlsZHJlbltuXSxpPW8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYyYmaS5sZWZ0K2kud2lkdGgvMj50KXJldHVybiBvO2lmKCFjJiZpLnRvcCtpLmhlaWdodC8yPnIpcmV0dXJuIG99cmV0dXJuIG51bGx9ZnVuY3Rpb24gaSgpe3ZhciBlPW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuIHUoYz90PmUubGVmdCtkKGUpLzI6cj5lLnRvcCtzKGUpLzIpfWZ1bmN0aW9uIHUoZSl7cmV0dXJuIGU/ZyhuKTpufXZhciBjPVwiaG9yaXpvbnRhbFwiPT09ZmUuZGlyZWN0aW9uLGE9biE9PWU/aSgpOm8oKTtyZXR1cm4gYX1mdW5jdGlvbiAkKGUsbil7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBmZS5jb3B5P2ZlLmNvcHk6ZmUuY29weShlLG4pfXZhciBHPWFyZ3VtZW50cy5sZW5ndGg7MT09PUcmJkFycmF5LmlzQXJyYXkoZSk9PT0hMSYmKG49ZSxlPVtdKTt2YXIgSixRLFcsWixlZSxuZSx0ZSxyZSxvZSxpZSx1ZSxjZSxhZT1udWxsLGZlPW58fHt9O3ZvaWQgMD09PWZlLm1vdmVzJiYoZmUubW92ZXM9bCksdm9pZCAwPT09ZmUuYWNjZXB0cyYmKGZlLmFjY2VwdHM9bCksdm9pZCAwPT09ZmUuaW52YWxpZCYmKGZlLmludmFsaWQ9UCksdm9pZCAwPT09ZmUuY29udGFpbmVycyYmKGZlLmNvbnRhaW5lcnM9ZXx8W10pLHZvaWQgMD09PWZlLmlzQ29udGFpbmVyJiYoZmUuaXNDb250YWluZXI9Ziksdm9pZCAwPT09ZmUuY29weSYmKGZlLmNvcHk9ITEpLHZvaWQgMD09PWZlLmNvcHlTb3J0U291cmNlJiYoZmUuY29weVNvcnRTb3VyY2U9ITEpLHZvaWQgMD09PWZlLnJldmVydE9uU3BpbGwmJihmZS5yZXZlcnRPblNwaWxsPSExKSx2b2lkIDA9PT1mZS5yZW1vdmVPblNwaWxsJiYoZmUucmVtb3ZlT25TcGlsbD0hMSksdm9pZCAwPT09ZmUuZGlyZWN0aW9uJiYoZmUuZGlyZWN0aW9uPVwidmVydGljYWxcIiksdm9pZCAwPT09ZmUuaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uJiYoZmUuaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uPSEwKSx2b2lkIDA9PT1mZS5taXJyb3JDb250YWluZXImJihmZS5taXJyb3JDb250YWluZXI9eC5ib2R5KTt2YXIgbGU9Yih7Y29udGFpbmVyczpmZS5jb250YWluZXJzLHN0YXJ0OlksZW5kOkQsY2FuY2VsOkEscmVtb3ZlOlIsZGVzdHJveTpoLGNhbk1vdmU6WCxkcmFnZ2luZzohMX0pO3JldHVybiBmZS5yZW1vdmVPblNwaWxsPT09ITAmJmxlLm9uKFwib3ZlclwiLF8pLm9uKFwib3V0XCIsRikscigpLGxlfWZ1bmN0aW9uIG8oZSxuLHIsbyl7dmFyIGk9e21vdXNldXA6XCJ0b3VjaGVuZFwiLG1vdXNlZG93bjpcInRvdWNoc3RhcnRcIixtb3VzZW1vdmU6XCJ0b3VjaG1vdmVcIn0sdT17bW91c2V1cDpcInBvaW50ZXJ1cFwiLG1vdXNlZG93bjpcInBvaW50ZXJkb3duXCIsbW91c2Vtb3ZlOlwicG9pbnRlcm1vdmVcIn0sYz17bW91c2V1cDpcIk1TUG9pbnRlclVwXCIsbW91c2Vkb3duOlwiTVNQb2ludGVyRG93blwiLG1vdXNlbW92ZTpcIk1TUG9pbnRlck1vdmVcIn07dC5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQ/d1tuXShlLHVbcl0sbyk6dC5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZD93W25dKGUsY1tyXSxvKTood1tuXShlLGlbcl0sbyksd1tuXShlLHIsbykpfWZ1bmN0aW9uIGkoZSl7aWYodm9pZCAwIT09ZS50b3VjaGVzKXJldHVybiBlLnRvdWNoZXMubGVuZ3RoO2lmKHZvaWQgMCE9PWUud2hpY2gmJjAhPT1lLndoaWNoKXJldHVybiBlLndoaWNoO2lmKHZvaWQgMCE9PWUuYnV0dG9ucylyZXR1cm4gZS5idXR0b25zO3ZhciBuPWUuYnV0dG9uO3JldHVybiB2b2lkIDAhPT1uPzEmbj8xOjImbj8zOjQmbj8yOjA6dm9pZCAwfWZ1bmN0aW9uIHUoZSl7dmFyIG49ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm57bGVmdDpuLmxlZnQrYyhcInNjcm9sbExlZnRcIixcInBhZ2VYT2Zmc2V0XCIpLHRvcDpuLnRvcCtjKFwic2Nyb2xsVG9wXCIsXCJwYWdlWU9mZnNldFwiKX19ZnVuY3Rpb24gYyhlLG4pe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiB0W25dP3Rbbl06Uy5jbGllbnRIZWlnaHQ/U1tlXTp4LmJvZHlbZV19ZnVuY3Rpb24gYShlLG4sdCl7dmFyIHIsbz1lfHx7fSxpPW8uY2xhc3NOYW1lO3JldHVybiBvLmNsYXNzTmFtZSs9XCIgZ3UtaGlkZVwiLHI9eC5lbGVtZW50RnJvbVBvaW50KG4sdCksby5jbGFzc05hbWU9aSxyfWZ1bmN0aW9uIGYoKXtyZXR1cm4hMX1mdW5jdGlvbiBsKCl7cmV0dXJuITB9ZnVuY3Rpb24gZChlKXtyZXR1cm4gZS53aWR0aHx8ZS5yaWdodC1lLmxlZnR9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZS5oZWlnaHR8fGUuYm90dG9tLWUudG9wfWZ1bmN0aW9uIHYoZSl7cmV0dXJuIGUucGFyZW50Tm9kZT09PXg/bnVsbDplLnBhcmVudE5vZGV9ZnVuY3Rpb24gcChlKXtyZXR1cm5cIklOUFVUXCI9PT1lLnRhZ05hbWV8fFwiVEVYVEFSRUFcIj09PWUudGFnTmFtZXx8XCJTRUxFQ1RcIj09PWUudGFnTmFtZXx8bShlKX1mdW5jdGlvbiBtKGUpe3JldHVybiBlP1wiZmFsc2VcIj09PWUuY29udGVudEVkaXRhYmxlPyExOlwidHJ1ZVwiPT09ZS5jb250ZW50RWRpdGFibGU/ITA6bSh2KGUpKTohMX1mdW5jdGlvbiBnKGUpe2Z1bmN0aW9uIG4oKXt2YXIgbj1lO2RvIG49bi5uZXh0U2libGluZzt3aGlsZShuJiYxIT09bi5ub2RlVHlwZSk7cmV0dXJuIG59cmV0dXJuIGUubmV4dEVsZW1lbnRTaWJsaW5nfHxuKCl9ZnVuY3Rpb24gaChlKXtyZXR1cm4gZS50YXJnZXRUb3VjaGVzJiZlLnRhcmdldFRvdWNoZXMubGVuZ3RoP2UudGFyZ2V0VG91Y2hlc1swXTplLmNoYW5nZWRUb3VjaGVzJiZlLmNoYW5nZWRUb3VjaGVzLmxlbmd0aD9lLmNoYW5nZWRUb3VjaGVzWzBdOmV9ZnVuY3Rpb24geShlLG4pe3ZhciB0PWgobikscj17cGFnZVg6XCJjbGllbnRYXCIscGFnZVk6XCJjbGllbnRZXCJ9O3JldHVybiBlIGluIHImJiEoZSBpbiB0KSYmcltlXWluIHQmJihlPXJbZV0pLHRbZV19dmFyIGI9ZShcImNvbnRyYS9lbWl0dGVyXCIpLHc9ZShcImNyb3NzdmVudFwiKSxFPWUoXCIuL2NsYXNzZXNcIikseD1kb2N1bWVudCxTPXguZG9jdW1lbnRFbGVtZW50O24uZXhwb3J0cz1yfSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7XCIuL2NsYXNzZXNcIjoxLFwiY29udHJhL2VtaXR0ZXJcIjo1LGNyb3NzdmVudDo2fV0sMzpbZnVuY3Rpb24oZSxuLHQpe24uZXhwb3J0cz1mdW5jdGlvbihlLG4pe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLG4pfX0se31dLDQ6W2Z1bmN0aW9uKGUsbix0KXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKFwidGlja3lcIik7bi5leHBvcnRzPWZ1bmN0aW9uKGUsbix0KXtlJiZyKGZ1bmN0aW9uKCl7ZS5hcHBseSh0fHxudWxsLG58fFtdKX0pfX0se3RpY2t5Ojl9XSw1OltmdW5jdGlvbihlLG4sdCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZShcImF0b2FcIiksbz1lKFwiLi9kZWJvdW5jZVwiKTtuLmV4cG9ydHM9ZnVuY3Rpb24oZSxuKXt2YXIgdD1ufHx7fSxpPXt9O3JldHVybiB2b2lkIDA9PT1lJiYoZT17fSksZS5vbj1mdW5jdGlvbihuLHQpe3JldHVybiBpW25dP2lbbl0ucHVzaCh0KTppW25dPVt0XSxlfSxlLm9uY2U9ZnVuY3Rpb24obix0KXtyZXR1cm4gdC5fb25jZT0hMCxlLm9uKG4sdCksZX0sZS5vZmY9ZnVuY3Rpb24obix0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoO2lmKDE9PT1yKWRlbGV0ZSBpW25dO2Vsc2UgaWYoMD09PXIpaT17fTtlbHNle3ZhciBvPWlbbl07aWYoIW8pcmV0dXJuIGU7by5zcGxpY2Uoby5pbmRleE9mKHQpLDEpfXJldHVybiBlfSxlLmVtaXQ9ZnVuY3Rpb24oKXt2YXIgbj1yKGFyZ3VtZW50cyk7cmV0dXJuIGUuZW1pdHRlclNuYXBzaG90KG4uc2hpZnQoKSkuYXBwbHkodGhpcyxuKX0sZS5lbWl0dGVyU25hcHNob3Q9ZnVuY3Rpb24obil7dmFyIHU9KGlbbl18fFtdKS5zbGljZSgwKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaT1yKGFyZ3VtZW50cyksYz10aGlzfHxlO2lmKFwiZXJyb3JcIj09PW4mJnRbXCJ0aHJvd3NcIl0hPT0hMSYmIXUubGVuZ3RoKXRocm93IDE9PT1pLmxlbmd0aD9pWzBdOmk7cmV0dXJuIHUuZm9yRWFjaChmdW5jdGlvbihyKXt0LmFzeW5jP28ocixpLGMpOnIuYXBwbHkoYyxpKSxyLl9vbmNlJiZlLm9mZihuLHIpfSksZX19LGV9fSx7XCIuL2RlYm91bmNlXCI6NCxhdG9hOjN9XSw2OltmdW5jdGlvbihlLG4sdCl7KGZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIoZSxuLHQscil7cmV0dXJuIGUuYWRkRXZlbnRMaXN0ZW5lcihuLHQscil9ZnVuY3Rpb24gbyhlLG4sdCl7cmV0dXJuIGUuYXR0YWNoRXZlbnQoXCJvblwiK24sZihlLG4sdCkpfWZ1bmN0aW9uIGkoZSxuLHQscil7cmV0dXJuIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihuLHQscil9ZnVuY3Rpb24gdShlLG4sdCl7dmFyIHI9bChlLG4sdCk7cmV0dXJuIHI/ZS5kZXRhY2hFdmVudChcIm9uXCIrbixyKTp2b2lkIDB9ZnVuY3Rpb24gYyhlLG4sdCl7ZnVuY3Rpb24gcigpe3ZhciBlO3JldHVybiBwLmNyZWF0ZUV2ZW50PyhlPXAuY3JlYXRlRXZlbnQoXCJFdmVudFwiKSxlLmluaXRFdmVudChuLCEwLCEwKSk6cC5jcmVhdGVFdmVudE9iamVjdCYmKGU9cC5jcmVhdGVFdmVudE9iamVjdCgpKSxlfWZ1bmN0aW9uIG8oKXtyZXR1cm4gbmV3IHMobix7ZGV0YWlsOnR9KX12YXIgaT0tMT09PXYuaW5kZXhPZihuKT9vKCk6cigpO2UuZGlzcGF0Y2hFdmVudD9lLmRpc3BhdGNoRXZlbnQoaSk6ZS5maXJlRXZlbnQoXCJvblwiK24saSl9ZnVuY3Rpb24gYShlLG4scil7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBvPW58fHQuZXZlbnQ7by50YXJnZXQ9by50YXJnZXR8fG8uc3JjRWxlbWVudCxvLnByZXZlbnREZWZhdWx0PW8ucHJldmVudERlZmF1bHR8fGZ1bmN0aW9uKCl7by5yZXR1cm5WYWx1ZT0hMX0sby5zdG9wUHJvcGFnYXRpb249by5zdG9wUHJvcGFnYXRpb258fGZ1bmN0aW9uKCl7by5jYW5jZWxCdWJibGU9ITB9LG8ud2hpY2g9by53aGljaHx8by5rZXlDb2RlLHIuY2FsbChlLG8pfX1mdW5jdGlvbiBmKGUsbix0KXt2YXIgcj1sKGUsbix0KXx8YShlLG4sdCk7cmV0dXJuIGgucHVzaCh7d3JhcHBlcjpyLGVsZW1lbnQ6ZSx0eXBlOm4sZm46dH0pLHJ9ZnVuY3Rpb24gbChlLG4sdCl7dmFyIHI9ZChlLG4sdCk7aWYocil7dmFyIG89aFtyXS53cmFwcGVyO3JldHVybiBoLnNwbGljZShyLDEpLG99fWZ1bmN0aW9uIGQoZSxuLHQpe3ZhciByLG87Zm9yKHI9MDtyPGgubGVuZ3RoO3IrKylpZihvPWhbcl0sby5lbGVtZW50PT09ZSYmby50eXBlPT09biYmby5mbj09PXQpcmV0dXJuIHJ9dmFyIHM9ZShcImN1c3RvbS1ldmVudFwiKSx2PWUoXCIuL2V2ZW50bWFwXCIpLHA9dC5kb2N1bWVudCxtPXIsZz1pLGg9W107dC5hZGRFdmVudExpc3RlbmVyfHwobT1vLGc9dSksbi5leHBvcnRzPXthZGQ6bSxyZW1vdmU6ZyxmYWJyaWNhdGU6Y319KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHtcIi4vZXZlbnRtYXBcIjo3LFwiY3VzdG9tLWV2ZW50XCI6OH1dLDc6W2Z1bmN0aW9uKGUsbix0KXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHQ9W10scj1cIlwiLG89L15vbi87Zm9yKHIgaW4gZSlvLnRlc3QocikmJnQucHVzaChyLnNsaWNlKDIpKTtuLmV4cG9ydHM9dH0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se31dLDg6W2Z1bmN0aW9uKGUsbix0KXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3RyeXt2YXIgZT1uZXcgcihcImNhdFwiLHtkZXRhaWw6e2ZvbzpcImJhclwifX0pO3JldHVyblwiY2F0XCI9PT1lLnR5cGUmJlwiYmFyXCI9PT1lLmRldGFpbC5mb299Y2F0Y2gobil7fXJldHVybiExfXZhciByPWUuQ3VzdG9tRXZlbnQ7bi5leHBvcnRzPXQoKT9yOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRvY3VtZW50LmNyZWF0ZUV2ZW50P2Z1bmN0aW9uKGUsbil7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJDdXN0b21FdmVudFwiKTtyZXR1cm4gbj90LmluaXRDdXN0b21FdmVudChlLG4uYnViYmxlcyxuLmNhbmNlbGFibGUsbi5kZXRhaWwpOnQuaW5pdEN1c3RvbUV2ZW50KGUsITEsITEsdm9pZCAwKSx0fTpmdW5jdGlvbihlLG4pe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7cmV0dXJuIHQudHlwZT1lLG4/KHQuYnViYmxlcz1Cb29sZWFuKG4uYnViYmxlcyksdC5jYW5jZWxhYmxlPUJvb2xlYW4obi5jYW5jZWxhYmxlKSx0LmRldGFpbD1uLmRldGFpbCk6KHQuYnViYmxlcz0hMSx0LmNhbmNlbGFibGU9ITEsdC5kZXRhaWw9dm9pZCAwKSx0fX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se31dLDk6W2Z1bmN0aW9uKGUsbix0KXt2YXIgcixvPVwiZnVuY3Rpb25cIj09dHlwZW9mIHNldEltbWVkaWF0ZTtyPW8/ZnVuY3Rpb24oZSl7c2V0SW1tZWRpYXRlKGUpfTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KGUsMCl9LG4uZXhwb3J0cz1yfSx7fV19LHt9LFsyXSkoMil9KTsiLCIhZnVuY3Rpb24odCxlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShlKTp0LkVTNlByb21pc2U9ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCh0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4gbnVsbCE9PXQmJihcIm9iamVjdFwiPT09ZXx8XCJmdW5jdGlvblwiPT09ZSl9ZnVuY3Rpb24gZSh0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIG4odCl7Qj10fWZ1bmN0aW9uIHIodCl7Rz10fWZ1bmN0aW9uIG8oKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhhKX19ZnVuY3Rpb24gaSgpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiB6P2Z1bmN0aW9uKCl7eihhKX06YygpfWZ1bmN0aW9uIHMoKXt2YXIgdD0wLGU9bmV3IEooYSksbj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtyZXR1cm4gZS5vYnNlcnZlKG4se2NoYXJhY3RlckRhdGE6ITB9KSxmdW5jdGlvbigpe24uZGF0YT10PSsrdCUyfX1mdW5jdGlvbiB1KCl7dmFyIHQ9bmV3IE1lc3NhZ2VDaGFubmVsO3JldHVybiB0LnBvcnQxLm9ubWVzc2FnZT1hLGZ1bmN0aW9uKCl7cmV0dXJuIHQucG9ydDIucG9zdE1lc3NhZ2UoMCl9fWZ1bmN0aW9uIGMoKXt2YXIgdD1zZXRUaW1lb3V0O3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KGEsMSl9fWZ1bmN0aW9uIGEoKXtmb3IodmFyIHQ9MDt0PFc7dCs9Mil7dmFyIGU9Vlt0XSxuPVZbdCsxXTtlKG4pLFZbdF09dm9pZCAwLFZbdCsxXT12b2lkIDB9Vz0wfWZ1bmN0aW9uIGYoKXt0cnl7dmFyIHQ9RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpLnJlcXVpcmUoXCJ2ZXJ0eFwiKTtyZXR1cm4gej10LnJ1bk9uTG9vcHx8dC5ydW5PbkNvbnRleHQsaSgpfWNhdGNoKGUpe3JldHVybiBjKCl9fWZ1bmN0aW9uIGwodCxlKXt2YXIgbj10aGlzLHI9bmV3IHRoaXMuY29uc3RydWN0b3IocCk7dm9pZCAwPT09cltaXSYmTyhyKTt2YXIgbz1uLl9zdGF0ZTtpZihvKXt2YXIgaT1hcmd1bWVudHNbby0xXTtHKGZ1bmN0aW9uKCl7cmV0dXJuIFAobyxyLGksbi5fcmVzdWx0KX0pfWVsc2UgRShuLHIsdCxlKTtyZXR1cm4gcn1mdW5jdGlvbiBoKHQpe3ZhciBlPXRoaXM7aWYodCYmXCJvYmplY3RcIj09dHlwZW9mIHQmJnQuY29uc3RydWN0b3I9PT1lKXJldHVybiB0O3ZhciBuPW5ldyBlKHApO3JldHVybiBnKG4sdCksbn1mdW5jdGlvbiBwKCl7fWZ1bmN0aW9uIHYoKXtyZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIil9ZnVuY3Rpb24gZCgpe3JldHVybiBuZXcgVHlwZUVycm9yKFwiQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLlwiKX1mdW5jdGlvbiBfKHQpe3RyeXtyZXR1cm4gdC50aGVufWNhdGNoKGUpe3JldHVybiBudC5lcnJvcj1lLG50fX1mdW5jdGlvbiB5KHQsZSxuLHIpe3RyeXt0LmNhbGwoZSxuLHIpfWNhdGNoKG8pe3JldHVybiBvfX1mdW5jdGlvbiBtKHQsZSxuKXtHKGZ1bmN0aW9uKHQpe3ZhciByPSExLG89eShuLGUsZnVuY3Rpb24obil7cnx8KHI9ITAsZSE9PW4/Zyh0LG4pOlModCxuKSl9LGZ1bmN0aW9uKGUpe3J8fChyPSEwLGoodCxlKSl9LFwiU2V0dGxlOiBcIisodC5fbGFiZWx8fFwiIHVua25vd24gcHJvbWlzZVwiKSk7IXImJm8mJihyPSEwLGoodCxvKSl9LHQpfWZ1bmN0aW9uIGIodCxlKXtlLl9zdGF0ZT09PXR0P1ModCxlLl9yZXN1bHQpOmUuX3N0YXRlPT09ZXQ/aih0LGUuX3Jlc3VsdCk6RShlLHZvaWQgMCxmdW5jdGlvbihlKXtyZXR1cm4gZyh0LGUpfSxmdW5jdGlvbihlKXtyZXR1cm4gaih0LGUpfSl9ZnVuY3Rpb24gdyh0LG4scil7bi5jb25zdHJ1Y3Rvcj09PXQuY29uc3RydWN0b3ImJnI9PT1sJiZuLmNvbnN0cnVjdG9yLnJlc29sdmU9PT1oP2IodCxuKTpyPT09bnQ/KGoodCxudC5lcnJvciksbnQuZXJyb3I9bnVsbCk6dm9pZCAwPT09cj9TKHQsbik6ZShyKT9tKHQsbixyKTpTKHQsbil9ZnVuY3Rpb24gZyhlLG4pe2U9PT1uP2ooZSx2KCkpOnQobik/dyhlLG4sXyhuKSk6UyhlLG4pfWZ1bmN0aW9uIEEodCl7dC5fb25lcnJvciYmdC5fb25lcnJvcih0Ll9yZXN1bHQpLFQodCl9ZnVuY3Rpb24gUyh0LGUpe3QuX3N0YXRlPT09JCYmKHQuX3Jlc3VsdD1lLHQuX3N0YXRlPXR0LDAhPT10Ll9zdWJzY3JpYmVycy5sZW5ndGgmJkcoVCx0KSl9ZnVuY3Rpb24gaih0LGUpe3QuX3N0YXRlPT09JCYmKHQuX3N0YXRlPWV0LHQuX3Jlc3VsdD1lLEcoQSx0KSl9ZnVuY3Rpb24gRSh0LGUsbixyKXt2YXIgbz10Ll9zdWJzY3JpYmVycyxpPW8ubGVuZ3RoO3QuX29uZXJyb3I9bnVsbCxvW2ldPWUsb1tpK3R0XT1uLG9baStldF09ciwwPT09aSYmdC5fc3RhdGUmJkcoVCx0KX1mdW5jdGlvbiBUKHQpe3ZhciBlPXQuX3N1YnNjcmliZXJzLG49dC5fc3RhdGU7aWYoMCE9PWUubGVuZ3RoKXtmb3IodmFyIHI9dm9pZCAwLG89dm9pZCAwLGk9dC5fcmVzdWx0LHM9MDtzPGUubGVuZ3RoO3MrPTMpcj1lW3NdLG89ZVtzK25dLHI/UChuLHIsbyxpKTpvKGkpO3QuX3N1YnNjcmliZXJzLmxlbmd0aD0wfX1mdW5jdGlvbiBNKHQsZSl7dHJ5e3JldHVybiB0KGUpfWNhdGNoKG4pe3JldHVybiBudC5lcnJvcj1uLG50fX1mdW5jdGlvbiBQKHQsbixyLG8pe3ZhciBpPWUocikscz12b2lkIDAsdT12b2lkIDAsYz12b2lkIDAsYT12b2lkIDA7aWYoaSl7aWYocz1NKHIsbykscz09PW50PyhhPSEwLHU9cy5lcnJvcixzLmVycm9yPW51bGwpOmM9ITAsbj09PXMpcmV0dXJuIHZvaWQgaihuLGQoKSl9ZWxzZSBzPW8sYz0hMDtuLl9zdGF0ZSE9PSR8fChpJiZjP2cobixzKTphP2oobix1KTp0PT09dHQ/UyhuLHMpOnQ9PT1ldCYmaihuLHMpKX1mdW5jdGlvbiB4KHQsZSl7dHJ5e2UoZnVuY3Rpb24oZSl7Zyh0LGUpfSxmdW5jdGlvbihlKXtqKHQsZSl9KX1jYXRjaChuKXtqKHQsbil9fWZ1bmN0aW9uIEMoKXtyZXR1cm4gcnQrK31mdW5jdGlvbiBPKHQpe3RbWl09cnQrKyx0Ll9zdGF0ZT12b2lkIDAsdC5fcmVzdWx0PXZvaWQgMCx0Ll9zdWJzY3JpYmVycz1bXX1mdW5jdGlvbiBrKCl7cmV0dXJuIG5ldyBFcnJvcihcIkFycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheVwiKX1mdW5jdGlvbiBGKHQpe3JldHVybiBuZXcgb3QodGhpcyx0KS5wcm9taXNlfWZ1bmN0aW9uIFkodCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IGUoVSh0KT9mdW5jdGlvbihuLHIpe2Zvcih2YXIgbz10Lmxlbmd0aCxpPTA7aTxvO2krKyllLnJlc29sdmUodFtpXSkudGhlbihuLHIpfTpmdW5jdGlvbih0LGUpe3JldHVybiBlKG5ldyBUeXBlRXJyb3IoXCJZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuXCIpKX0pfWZ1bmN0aW9uIHEodCl7dmFyIGU9dGhpcyxuPW5ldyBlKHApO3JldHVybiBqKG4sdCksbn1mdW5jdGlvbiBEKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIllvdSBtdXN0IHBhc3MgYSByZXNvbHZlciBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIHByb21pc2UgY29uc3RydWN0b3JcIil9ZnVuY3Rpb24gSygpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIil9ZnVuY3Rpb24gTCgpe3ZhciB0PXZvaWQgMDtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsKXQ9Z2xvYmFsO2Vsc2UgaWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYpdD1zZWxmO2Vsc2UgdHJ5e3Q9RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihcInBvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudFwiKX12YXIgbj10LlByb21pc2U7aWYobil7dmFyIHI9bnVsbDt0cnl7cj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobi5yZXNvbHZlKCkpfWNhdGNoKGUpe31pZihcIltvYmplY3QgUHJvbWlzZV1cIj09PXImJiFuLmNhc3QpcmV0dXJufXQuUHJvbWlzZT1pdH12YXIgTj12b2lkIDA7Tj1BcnJheS5pc0FycmF5P0FycmF5LmlzQXJyYXk6ZnVuY3Rpb24odCl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfTt2YXIgVT1OLFc9MCx6PXZvaWQgMCxCPXZvaWQgMCxHPWZ1bmN0aW9uKHQsZSl7VltXXT10LFZbVysxXT1lLFcrPTIsMj09PVcmJihCP0IoYSk6WCgpKX0sSD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp2b2lkIDAsST1IfHx7fSxKPUkuTXV0YXRpb25PYnNlcnZlcnx8SS5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLFE9XCJ1bmRlZmluZWRcIj09dHlwZW9mIHNlbGYmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBwcm9jZXNzJiZcIltvYmplY3QgcHJvY2Vzc11cIj09PXt9LnRvU3RyaW5nLmNhbGwocHJvY2VzcyksUj1cInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhDbGFtcGVkQXJyYXkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBpbXBvcnRTY3JpcHRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgTWVzc2FnZUNoYW5uZWwsVj1uZXcgQXJyYXkoMWUzKSxYPXZvaWQgMDtYPVE/bygpOko/cygpOlI/dSgpOnZvaWQgMD09PUgmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmU/ZigpOmMoKTt2YXIgWj1NYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiksJD12b2lkIDAsdHQ9MSxldD0yLG50PXtlcnJvcjpudWxsfSxydD0wLG90PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I9dCx0aGlzLnByb21pc2U9bmV3IHQocCksdGhpcy5wcm9taXNlW1pdfHxPKHRoaXMucHJvbWlzZSksVShlKT8odGhpcy5sZW5ndGg9ZS5sZW5ndGgsdGhpcy5fcmVtYWluaW5nPWUubGVuZ3RoLHRoaXMuX3Jlc3VsdD1uZXcgQXJyYXkodGhpcy5sZW5ndGgpLDA9PT10aGlzLmxlbmd0aD9TKHRoaXMucHJvbWlzZSx0aGlzLl9yZXN1bHQpOih0aGlzLmxlbmd0aD10aGlzLmxlbmd0aHx8MCx0aGlzLl9lbnVtZXJhdGUoZSksMD09PXRoaXMuX3JlbWFpbmluZyYmUyh0aGlzLnByb21pc2UsdGhpcy5fcmVzdWx0KSkpOmoodGhpcy5wcm9taXNlLGsoKSl9cmV0dXJuIHQucHJvdG90eXBlLl9lbnVtZXJhdGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7dGhpcy5fc3RhdGU9PT0kJiZlPHQubGVuZ3RoO2UrKyl0aGlzLl9lYWNoRW50cnkodFtlXSxlKX0sdC5wcm90b3R5cGUuX2VhY2hFbnRyeT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3Iscj1uLnJlc29sdmU7aWYocj09PWgpe3ZhciBvPV8odCk7aWYobz09PWwmJnQuX3N0YXRlIT09JCl0aGlzLl9zZXR0bGVkQXQodC5fc3RhdGUsZSx0Ll9yZXN1bHQpO2Vsc2UgaWYoXCJmdW5jdGlvblwiIT10eXBlb2Ygbyl0aGlzLl9yZW1haW5pbmctLSx0aGlzLl9yZXN1bHRbZV09dDtlbHNlIGlmKG49PT1pdCl7dmFyIGk9bmV3IG4ocCk7dyhpLHQsbyksdGhpcy5fd2lsbFNldHRsZUF0KGksZSl9ZWxzZSB0aGlzLl93aWxsU2V0dGxlQXQobmV3IG4oZnVuY3Rpb24oZSl7cmV0dXJuIGUodCl9KSxlKX1lbHNlIHRoaXMuX3dpbGxTZXR0bGVBdChyKHQpLGUpfSx0LnByb3RvdHlwZS5fc2V0dGxlZEF0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLnByb21pc2U7ci5fc3RhdGU9PT0kJiYodGhpcy5fcmVtYWluaW5nLS0sdD09PWV0P2oocixuKTp0aGlzLl9yZXN1bHRbZV09biksMD09PXRoaXMuX3JlbWFpbmluZyYmUyhyLHRoaXMuX3Jlc3VsdCl9LHQucHJvdG90eXBlLl93aWxsU2V0dGxlQXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO0UodCx2b2lkIDAsZnVuY3Rpb24odCl7cmV0dXJuIG4uX3NldHRsZWRBdCh0dCxlLHQpfSxmdW5jdGlvbih0KXtyZXR1cm4gbi5fc2V0dGxlZEF0KGV0LGUsdCl9KX0sdH0oKSxpdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dGhpc1taXT1DKCksdGhpcy5fcmVzdWx0PXRoaXMuX3N0YXRlPXZvaWQgMCx0aGlzLl9zdWJzY3JpYmVycz1bXSxwIT09ZSYmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJkQoKSx0aGlzIGluc3RhbmNlb2YgdD94KHRoaXMsZSk6SygpKX1yZXR1cm4gdC5wcm90b3R5cGVbXCJjYXRjaFwiXT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKG51bGwsdCl9LHQucHJvdG90eXBlW1wiZmluYWxseVwiXT1mdW5jdGlvbih0KXt2YXIgbj10aGlzLHI9bi5jb25zdHJ1Y3RvcjtyZXR1cm4gZSh0KT9uLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHIucmVzb2x2ZSh0KCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZX0pfSxmdW5jdGlvbihlKXtyZXR1cm4gci5yZXNvbHZlKHQoKSkudGhlbihmdW5jdGlvbigpe3Rocm93IGV9KX0pOm4udGhlbih0LHQpfSx0fSgpO3JldHVybiBpdC5wcm90b3R5cGUudGhlbj1sLGl0LmFsbD1GLGl0LnJhY2U9WSxpdC5yZXNvbHZlPWgsaXQucmVqZWN0PXEsaXQuX3NldFNjaGVkdWxlcj1uLGl0Ll9zZXRBc2FwPXIsaXQuX2FzYXA9RyxpdC5wb2x5ZmlsbD1MLGl0LlByb21pc2U9aXQsaXQucG9seWZpbGwoKSxpdH0pO1xuIiwiIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZSgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZSk6dC5FUzZQcm9taXNlPWUoKX0odGhpcyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuIG51bGwhPT10JiYoXCJvYmplY3RcIj09PWV8fFwiZnVuY3Rpb25cIj09PWUpfWZ1bmN0aW9uIGUodCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdH1mdW5jdGlvbiBuKHQpe0I9dH1mdW5jdGlvbiByKHQpe0c9dH1mdW5jdGlvbiBvKCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHByb2Nlc3MubmV4dFRpY2soYSl9fWZ1bmN0aW9uIGkoKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2Ygej9mdW5jdGlvbigpe3ooYSl9OmMoKX1mdW5jdGlvbiBzKCl7dmFyIHQ9MCxlPW5ldyBKKGEpLG49ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIik7cmV0dXJuIGUub2JzZXJ2ZShuLHtjaGFyYWN0ZXJEYXRhOiEwfSksZnVuY3Rpb24oKXtuLmRhdGE9dD0rK3QlMn19ZnVuY3Rpb24gdSgpe3ZhciB0PW5ldyBNZXNzYWdlQ2hhbm5lbDtyZXR1cm4gdC5wb3J0MS5vbm1lc3NhZ2U9YSxmdW5jdGlvbigpe3JldHVybiB0LnBvcnQyLnBvc3RNZXNzYWdlKDApfX1mdW5jdGlvbiBjKCl7dmFyIHQ9c2V0VGltZW91dDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdChhLDEpfX1mdW5jdGlvbiBhKCl7Zm9yKHZhciB0PTA7dDxXO3QrPTIpe3ZhciBlPVZbdF0sbj1WW3QrMV07ZShuKSxWW3RdPXZvaWQgMCxWW3QrMV09dm9pZCAwfVc9MH1mdW5jdGlvbiBmKCl7dHJ5e3ZhciB0PUZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKS5yZXF1aXJlKFwidmVydHhcIik7cmV0dXJuIHo9dC5ydW5Pbkxvb3B8fHQucnVuT25Db250ZXh0LGkoKX1jYXRjaChlKXtyZXR1cm4gYygpfX1mdW5jdGlvbiBsKHQsZSl7dmFyIG49dGhpcyxyPW5ldyB0aGlzLmNvbnN0cnVjdG9yKHApO3ZvaWQgMD09PXJbWl0mJk8ocik7dmFyIG89bi5fc3RhdGU7aWYobyl7dmFyIGk9YXJndW1lbnRzW28tMV07RyhmdW5jdGlvbigpe3JldHVybiBQKG8scixpLG4uX3Jlc3VsdCl9KX1lbHNlIEUobixyLHQsZSk7cmV0dXJuIHJ9ZnVuY3Rpb24gaCh0KXt2YXIgZT10aGlzO2lmKHQmJlwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0LmNvbnN0cnVjdG9yPT09ZSlyZXR1cm4gdDt2YXIgbj1uZXcgZShwKTtyZXR1cm4gZyhuLHQpLG59ZnVuY3Rpb24gcCgpe31mdW5jdGlvbiB2KCl7cmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmXCIpfWZ1bmN0aW9uIGQoKXtyZXR1cm4gbmV3IFR5cGVFcnJvcihcIkEgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS5cIil9ZnVuY3Rpb24gXyh0KXt0cnl7cmV0dXJuIHQudGhlbn1jYXRjaChlKXtyZXR1cm4gbnQuZXJyb3I9ZSxudH19ZnVuY3Rpb24geSh0LGUsbixyKXt0cnl7dC5jYWxsKGUsbixyKX1jYXRjaChvKXtyZXR1cm4gb319ZnVuY3Rpb24gbSh0LGUsbil7RyhmdW5jdGlvbih0KXt2YXIgcj0hMSxvPXkobixlLGZ1bmN0aW9uKG4pe3J8fChyPSEwLGUhPT1uP2codCxuKTpTKHQsbikpfSxmdW5jdGlvbihlKXtyfHwocj0hMCxqKHQsZSkpfSxcIlNldHRsZTogXCIrKHQuX2xhYmVsfHxcIiB1bmtub3duIHByb21pc2VcIikpOyFyJiZvJiYocj0hMCxqKHQsbykpfSx0KX1mdW5jdGlvbiBiKHQsZSl7ZS5fc3RhdGU9PT10dD9TKHQsZS5fcmVzdWx0KTplLl9zdGF0ZT09PWV0P2oodCxlLl9yZXN1bHQpOkUoZSx2b2lkIDAsZnVuY3Rpb24oZSl7cmV0dXJuIGcodCxlKX0sZnVuY3Rpb24oZSl7cmV0dXJuIGoodCxlKX0pfWZ1bmN0aW9uIHcodCxuLHIpe24uY29uc3RydWN0b3I9PT10LmNvbnN0cnVjdG9yJiZyPT09bCYmbi5jb25zdHJ1Y3Rvci5yZXNvbHZlPT09aD9iKHQsbik6cj09PW50PyhqKHQsbnQuZXJyb3IpLG50LmVycm9yPW51bGwpOnZvaWQgMD09PXI/Uyh0LG4pOmUocik/bSh0LG4scik6Uyh0LG4pfWZ1bmN0aW9uIGcoZSxuKXtlPT09bj9qKGUsdigpKTp0KG4pP3coZSxuLF8obikpOlMoZSxuKX1mdW5jdGlvbiBBKHQpe3QuX29uZXJyb3ImJnQuX29uZXJyb3IodC5fcmVzdWx0KSxUKHQpfWZ1bmN0aW9uIFModCxlKXt0Ll9zdGF0ZT09PSQmJih0Ll9yZXN1bHQ9ZSx0Ll9zdGF0ZT10dCwwIT09dC5fc3Vic2NyaWJlcnMubGVuZ3RoJiZHKFQsdCkpfWZ1bmN0aW9uIGoodCxlKXt0Ll9zdGF0ZT09PSQmJih0Ll9zdGF0ZT1ldCx0Ll9yZXN1bHQ9ZSxHKEEsdCkpfWZ1bmN0aW9uIEUodCxlLG4scil7dmFyIG89dC5fc3Vic2NyaWJlcnMsaT1vLmxlbmd0aDt0Ll9vbmVycm9yPW51bGwsb1tpXT1lLG9baSt0dF09bixvW2krZXRdPXIsMD09PWkmJnQuX3N0YXRlJiZHKFQsdCl9ZnVuY3Rpb24gVCh0KXt2YXIgZT10Ll9zdWJzY3JpYmVycyxuPXQuX3N0YXRlO2lmKDAhPT1lLmxlbmd0aCl7Zm9yKHZhciByPXZvaWQgMCxvPXZvaWQgMCxpPXQuX3Jlc3VsdCxzPTA7czxlLmxlbmd0aDtzKz0zKXI9ZVtzXSxvPWVbcytuXSxyP1AobixyLG8saSk6byhpKTt0Ll9zdWJzY3JpYmVycy5sZW5ndGg9MH19ZnVuY3Rpb24gTSh0LGUpe3RyeXtyZXR1cm4gdChlKX1jYXRjaChuKXtyZXR1cm4gbnQuZXJyb3I9bixudH19ZnVuY3Rpb24gUCh0LG4scixvKXt2YXIgaT1lKHIpLHM9dm9pZCAwLHU9dm9pZCAwLGM9dm9pZCAwLGE9dm9pZCAwO2lmKGkpe2lmKHM9TShyLG8pLHM9PT1udD8oYT0hMCx1PXMuZXJyb3Iscy5lcnJvcj1udWxsKTpjPSEwLG49PT1zKXJldHVybiB2b2lkIGoobixkKCkpfWVsc2Ugcz1vLGM9ITA7bi5fc3RhdGUhPT0kfHwoaSYmYz9nKG4scyk6YT9qKG4sdSk6dD09PXR0P1MobixzKTp0PT09ZXQmJmoobixzKSl9ZnVuY3Rpb24geCh0LGUpe3RyeXtlKGZ1bmN0aW9uKGUpe2codCxlKX0sZnVuY3Rpb24oZSl7aih0LGUpfSl9Y2F0Y2gobil7aih0LG4pfX1mdW5jdGlvbiBDKCl7cmV0dXJuIHJ0Kyt9ZnVuY3Rpb24gTyh0KXt0W1pdPXJ0KyssdC5fc3RhdGU9dm9pZCAwLHQuX3Jlc3VsdD12b2lkIDAsdC5fc3Vic2NyaWJlcnM9W119ZnVuY3Rpb24gaygpe3JldHVybiBuZXcgRXJyb3IoXCJBcnJheSBNZXRob2RzIG11c3QgYmUgcHJvdmlkZWQgYW4gQXJyYXlcIil9ZnVuY3Rpb24gRih0KXtyZXR1cm4gbmV3IG90KHRoaXMsdCkucHJvbWlzZX1mdW5jdGlvbiBZKHQpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBlKFUodCk/ZnVuY3Rpb24obixyKXtmb3IodmFyIG89dC5sZW5ndGgsaT0wO2k8bztpKyspZS5yZXNvbHZlKHRbaV0pLnRoZW4obixyKX06ZnVuY3Rpb24odCxlKXtyZXR1cm4gZShuZXcgVHlwZUVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLlwiKSl9KX1mdW5jdGlvbiBxKHQpe3ZhciBlPXRoaXMsbj1uZXcgZShwKTtyZXR1cm4gaihuLHQpLG59ZnVuY3Rpb24gRCgpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yXCIpfWZ1bmN0aW9uIEsoKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpfWZ1bmN0aW9uIEwoKXt2YXIgdD12b2lkIDA7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbCl0PWdsb2JhbDtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmKXQ9c2VsZjtlbHNlIHRyeXt0PUZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnRcIil9dmFyIG49dC5Qcm9taXNlO2lmKG4pe3ZhciByPW51bGw7dHJ5e3I9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG4ucmVzb2x2ZSgpKX1jYXRjaChlKXt9aWYoXCJbb2JqZWN0IFByb21pc2VdXCI9PT1yJiYhbi5jYXN0KXJldHVybn10LlByb21pc2U9aXR9dmFyIE49dm9pZCAwO049QXJyYXkuaXNBcnJheT9BcnJheS5pc0FycmF5OmZ1bmN0aW9uKHQpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX07dmFyIFU9TixXPTAsej12b2lkIDAsQj12b2lkIDAsRz1mdW5jdGlvbih0LGUpe1ZbV109dCxWW1crMV09ZSxXKz0yLDI9PT1XJiYoQj9CKGEpOlgoKSl9LEg9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dm9pZCAwLEk9SHx8e30sSj1JLk11dGF0aW9uT2JzZXJ2ZXJ8fEkuV2ViS2l0TXV0YXRpb25PYnNlcnZlcixRPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBzZWxmJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgcHJvY2VzcyYmXCJbb2JqZWN0IHByb2Nlc3NdXCI9PT17fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpLFI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgaW1wb3J0U2NyaXB0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIE1lc3NhZ2VDaGFubmVsLFY9bmV3IEFycmF5KDFlMyksWD12b2lkIDA7WD1RP28oKTpKP3MoKTpSP3UoKTp2b2lkIDA9PT1IJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlP2YoKTpjKCk7dmFyIFo9TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIpLCQ9dm9pZCAwLHR0PTEsZXQ9MixudD17ZXJyb3I6bnVsbH0scnQ9MCxvdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yPXQsdGhpcy5wcm9taXNlPW5ldyB0KHApLHRoaXMucHJvbWlzZVtaXXx8Tyh0aGlzLnByb21pc2UpLFUoZSk/KHRoaXMubGVuZ3RoPWUubGVuZ3RoLHRoaXMuX3JlbWFpbmluZz1lLmxlbmd0aCx0aGlzLl9yZXN1bHQ9bmV3IEFycmF5KHRoaXMubGVuZ3RoKSwwPT09dGhpcy5sZW5ndGg/Uyh0aGlzLnByb21pc2UsdGhpcy5fcmVzdWx0KToodGhpcy5sZW5ndGg9dGhpcy5sZW5ndGh8fDAsdGhpcy5fZW51bWVyYXRlKGUpLDA9PT10aGlzLl9yZW1haW5pbmcmJlModGhpcy5wcm9taXNlLHRoaXMuX3Jlc3VsdCkpKTpqKHRoaXMucHJvbWlzZSxrKCkpfXJldHVybiB0LnByb3RvdHlwZS5fZW51bWVyYXRlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO3RoaXMuX3N0YXRlPT09JCYmZTx0Lmxlbmd0aDtlKyspdGhpcy5fZWFjaEVudHJ5KHRbZV0sZSl9LHQucHJvdG90eXBlLl9lYWNoRW50cnk9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yLHI9bi5yZXNvbHZlO2lmKHI9PT1oKXt2YXIgbz1fKHQpO2lmKG89PT1sJiZ0Ll9zdGF0ZSE9PSQpdGhpcy5fc2V0dGxlZEF0KHQuX3N0YXRlLGUsdC5fcmVzdWx0KTtlbHNlIGlmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG8pdGhpcy5fcmVtYWluaW5nLS0sdGhpcy5fcmVzdWx0W2VdPXQ7ZWxzZSBpZihuPT09aXQpe3ZhciBpPW5ldyBuKHApO3coaSx0LG8pLHRoaXMuX3dpbGxTZXR0bGVBdChpLGUpfWVsc2UgdGhpcy5fd2lsbFNldHRsZUF0KG5ldyBuKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQpfSksZSl9ZWxzZSB0aGlzLl93aWxsU2V0dGxlQXQocih0KSxlKX0sdC5wcm90b3R5cGUuX3NldHRsZWRBdD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcy5wcm9taXNlO3IuX3N0YXRlPT09JCYmKHRoaXMuX3JlbWFpbmluZy0tLHQ9PT1ldD9qKHIsbik6dGhpcy5fcmVzdWx0W2VdPW4pLDA9PT10aGlzLl9yZW1haW5pbmcmJlMocix0aGlzLl9yZXN1bHQpfSx0LnByb3RvdHlwZS5fd2lsbFNldHRsZUF0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztFKHQsdm9pZCAwLGZ1bmN0aW9uKHQpe3JldHVybiBuLl9zZXR0bGVkQXQodHQsZSx0KX0sZnVuY3Rpb24odCl7cmV0dXJuIG4uX3NldHRsZWRBdChldCxlLHQpfSl9LHR9KCksaXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3RoaXNbWl09QygpLHRoaXMuX3Jlc3VsdD10aGlzLl9zdGF0ZT12b2lkIDAsdGhpcy5fc3Vic2NyaWJlcnM9W10scCE9PWUmJihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZEKCksdGhpcyBpbnN0YW5jZW9mIHQ/eCh0aGlzLGUpOksoKSl9cmV0dXJuIHQucHJvdG90eXBlW1wiY2F0Y2hcIl09ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGhlbihudWxsLHQpfSx0LnByb3RvdHlwZVtcImZpbmFsbHlcIl09ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxyPW4uY29uc3RydWN0b3I7cmV0dXJuIGUodCk/bi50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiByLnJlc29sdmUodCgpKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGV9KX0sZnVuY3Rpb24oZSl7cmV0dXJuIHIucmVzb2x2ZSh0KCkpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyBlfSl9KTpuLnRoZW4odCx0KX0sdH0oKTtyZXR1cm4gaXQucHJvdG90eXBlLnRoZW49bCxpdC5hbGw9RixpdC5yYWNlPVksaXQucmVzb2x2ZT1oLGl0LnJlamVjdD1xLGl0Ll9zZXRTY2hlZHVsZXI9bixpdC5fc2V0QXNhcD1yLGl0Ll9hc2FwPUcsaXQucG9seWZpbGw9TCxpdC5Qcm9taXNlPWl0LGl0fSk7XG4iLCIoZnVuY3Rpb24oYSxiKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGIpO2Vsc2UgaWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGV4cG9ydHMpYigpO2Vsc2V7YigpLGEuRmlsZVNhdmVyPXtleHBvcnRzOnt9fS5leHBvcnRzfX0pKHRoaXMsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGEsYil7cmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIGI/Yj17YXV0b0JvbTohMX06XCJvYmplY3RcIiE9dHlwZW9mIGImJihjb25zb2xlLndhcm4oXCJEZXByaWNhdGVkOiBFeHBlY3RlZCB0aGlyZCBhcmd1bWVudCB0byBiZSBhIG9iamVjdFwiKSxiPXthdXRvQm9tOiFifSksYi5hdXRvQm9tJiYvXlxccyooPzp0ZXh0XFwvXFxTKnxhcHBsaWNhdGlvblxcL3htbHxcXFMqXFwvXFxTKlxcK3htbClcXHMqOy4qY2hhcnNldFxccyo9XFxzKnV0Zi04L2kudGVzdChhLnR5cGUpP25ldyBCbG9iKFtcIlxcdUZFRkZcIixhXSx7dHlwZTphLnR5cGV9KTphfWZ1bmN0aW9uIGMoYixjLGQpe3ZhciBlPW5ldyBYTUxIdHRwUmVxdWVzdDtlLm9wZW4oXCJHRVRcIixiKSxlLnJlc3BvbnNlVHlwZT1cImJsb2JcIixlLm9ubG9hZD1mdW5jdGlvbigpe2EoZS5yZXNwb25zZSxjLGQpfSxlLm9uZXJyb3I9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiY291bGQgbm90IGRvd25sb2FkIGZpbGVcIil9LGUuc2VuZCgpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9bmV3IFhNTEh0dHBSZXF1ZXN0O3JldHVybiBiLm9wZW4oXCJIRUFEXCIsYSwhMSksYi5zZW5kKCksMjAwPD1iLnN0YXR1cyYmMjk5Pj1iLnN0YXR1c31mdW5jdGlvbiBlKGEpe3RyeXthLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiKSl9Y2F0Y2goYyl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKTtiLmluaXRNb3VzZUV2ZW50KFwiY2xpY2tcIiwhMCwhMCx3aW5kb3csMCwwLDAsODAsMjAsITEsITEsITEsITEsMCxudWxsKSxhLmRpc3BhdGNoRXZlbnQoYil9fXZhciBmPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCl8fCg0MixldmFsKShcInRoaXNcIil9Y2F0Y2goYSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmd2luZG93LndpbmRvdz09PXdpbmRvdz93aW5kb3c6XCJvYmplY3RcIj09dHlwZW9mIHNlbGYmJnNlbGYuc2VsZj09PXNlbGY/c2VsZjpcIm9iamVjdFwiPT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwuZ2xvYmFsPT09Z2xvYmFsP2dsb2JhbDp0aGlzfX0oKSxhPWYuc2F2ZUFzfHxcIm9iamVjdFwiIT10eXBlb2Ygd2luZG93fHx3aW5kb3chPT1mP2Z1bmN0aW9uKCl7fTpcImRvd25sb2FkXCJpbiBIVE1MQW5jaG9yRWxlbWVudC5wcm90b3R5cGU/ZnVuY3Rpb24oYixnLGgpe3ZhciBpPWYuVVJMfHxmLndlYmtpdFVSTCxqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO2c9Z3x8Yi5uYW1lfHxcImRvd25sb2FkXCIsai5kb3dubG9hZD1nLGoucmVsPVwibm9vcGVuZXJcIixcInN0cmluZ1wiPT10eXBlb2YgYj8oai5ocmVmPWIsai5vcmlnaW49PT1sb2NhdGlvbi5vcmlnaW4/ZShqKTpkKGouaHJlZik/YyhiLGcsaCk6ZShqLGoudGFyZ2V0PVwiX2JsYW5rXCIpKTooai5ocmVmPWkuY3JlYXRlT2JqZWN0VVJMKGIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLnJldm9rZU9iamVjdFVSTChqLmhyZWYpfSw0RTQpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlKGopfSwwKSl9OlwibXNTYXZlT3JPcGVuQmxvYlwiaW4gbmF2aWdhdG9yP2Z1bmN0aW9uKGYsZyxoKXtpZihnPWd8fGYubmFtZXx8XCJkb3dubG9hZFwiLFwic3RyaW5nXCIhPXR5cGVvZiBmKW5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGIoZixoKSxnKTtlbHNlIGlmKGQoZikpYyhmLGcsaCk7ZWxzZXt2YXIgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtpLmhyZWY9ZixpLnRhcmdldD1cIl9ibGFua1wiLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlKGkpfSl9fTpmdW5jdGlvbihhLGIsZCxlKXtpZihlPWV8fG9wZW4oXCJcIixcIl9ibGFua1wiKSxlJiYoZS5kb2N1bWVudC50aXRsZT1lLmRvY3VtZW50LmJvZHkuaW5uZXJUZXh0PVwiZG93bmxvYWRpbmcuLi5cIiksXCJzdHJpbmdcIj09dHlwZW9mIGEpcmV0dXJuIGMoYSxiLGQpO3ZhciBnPVwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCI9PT1hLnR5cGUsaD0vY29uc3RydWN0b3IvaS50ZXN0KGYuSFRNTEVsZW1lbnQpfHxmLnNhZmFyaSxpPS9DcmlPU1xcL1tcXGRdKy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtpZigoaXx8ZyYmaCkmJlwib2JqZWN0XCI9PXR5cGVvZiBGaWxlUmVhZGVyKXt2YXIgaj1uZXcgRmlsZVJlYWRlcjtqLm9ubG9hZGVuZD1mdW5jdGlvbigpe3ZhciBhPWoucmVzdWx0O2E9aT9hOmEucmVwbGFjZSgvXmRhdGE6W147XSo7LyxcImRhdGE6YXR0YWNobWVudC9maWxlO1wiKSxlP2UubG9jYXRpb24uaHJlZj1hOmxvY2F0aW9uPWEsZT1udWxsfSxqLnJlYWRBc0RhdGFVUkwoYSl9ZWxzZXt2YXIgaz1mLlVSTHx8Zi53ZWJraXRVUkwsbD1rLmNyZWF0ZU9iamVjdFVSTChhKTtlP2UubG9jYXRpb249bDpsb2NhdGlvbi5ocmVmPWwsZT1udWxsLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtrLnJldm9rZU9iamVjdFVSTChsKX0sNEU0KX19O2Yuc2F2ZUFzPWEuc2F2ZUFzPWEsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSYmKG1vZHVsZS5leHBvcnRzPWEpfSk7XG4iLCIvKiFcbiAqIEZsaWNraXR5IFBBQ0tBR0VEIHYyLjEuMlxuICogVG91Y2gsIHJlc3BvbnNpdmUsIGZsaWNrYWJsZSBjYXJvdXNlbHNcbiAqXG4gKiBMaWNlbnNlZCBHUEx2MyBmb3Igb3BlbiBzb3VyY2UgdXNlXG4gKiBvciBGbGlja2l0eSBDb21tZXJjaWFsIExpY2Vuc2UgZm9yIGNvbW1lcmNpYWwgdXNlXG4gKlxuICogaHR0cHM6Ly9mbGlja2l0eS5tZXRhZml6enkuY29cbiAqIENvcHlyaWdodCAyMDE1LTIwMTggTWV0YWZpenp5XG4gKi9cblxuIWZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImpxdWVyeS1icmlkZ2V0L2pxdWVyeS1icmlkZ2V0XCIsW1wianF1ZXJ5XCJdLGZ1bmN0aW9uKGkpe3JldHVybiBlKHQsaSl9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHQscmVxdWlyZShcImpxdWVyeVwiKSk6dC5qUXVlcnlCcmlkZ2V0PWUodCx0LmpRdWVyeSl9KHdpbmRvdyxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoaSxvLGEpe2Z1bmN0aW9uIGwodCxlLG4pe3ZhciBzLG89XCIkKCkuXCIraSsnKFwiJytlKydcIiknO3JldHVybiB0LmVhY2goZnVuY3Rpb24odCxsKXt2YXIgaD1hLmRhdGEobCxpKTtpZighaClyZXR1cm4gdm9pZCByKGkrXCIgbm90IGluaXRpYWxpemVkLiBDYW5ub3QgY2FsbCBtZXRob2RzLCBpLmUuIFwiK28pO3ZhciBjPWhbZV07aWYoIWN8fFwiX1wiPT1lLmNoYXJBdCgwKSlyZXR1cm4gdm9pZCByKG8rXCIgaXMgbm90IGEgdmFsaWQgbWV0aG9kXCIpO3ZhciBkPWMuYXBwbHkoaCxuKTtzPXZvaWQgMD09PXM/ZDpzfSksdm9pZCAwIT09cz9zOnR9ZnVuY3Rpb24gaCh0LGUpe3QuZWFjaChmdW5jdGlvbih0LG4pe3ZhciBzPWEuZGF0YShuLGkpO3M/KHMub3B0aW9uKGUpLHMuX2luaXQoKSk6KHM9bmV3IG8obixlKSxhLmRhdGEobixpLHMpKX0pfWE9YXx8ZXx8dC5qUXVlcnksYSYmKG8ucHJvdG90eXBlLm9wdGlvbnx8KG8ucHJvdG90eXBlLm9wdGlvbj1mdW5jdGlvbih0KXthLmlzUGxhaW5PYmplY3QodCkmJih0aGlzLm9wdGlvbnM9YS5leHRlbmQoITAsdGhpcy5vcHRpb25zLHQpKX0pLGEuZm5baV09ZnVuY3Rpb24odCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpe3ZhciBlPXMuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGwodGhpcyx0LGUpfXJldHVybiBoKHRoaXMsdCksdGhpc30sbihhKSl9ZnVuY3Rpb24gbih0KXshdHx8dCYmdC5icmlkZ2V0fHwodC5icmlkZ2V0PWkpfXZhciBzPUFycmF5LnByb3RvdHlwZS5zbGljZSxvPXQuY29uc29sZSxyPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBvP2Z1bmN0aW9uKCl7fTpmdW5jdGlvbih0KXtvLmVycm9yKHQpfTtyZXR1cm4gbihlfHx0LmpRdWVyeSksaX0pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImV2LWVtaXR0ZXIvZXYtZW1pdHRlclwiLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUoKTp0LkV2RW1pdHRlcj1lKCl9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXZhciBlPXQucHJvdG90eXBlO3JldHVybiBlLm9uPWZ1bmN0aW9uKHQsZSl7aWYodCYmZSl7dmFyIGk9dGhpcy5fZXZlbnRzPXRoaXMuX2V2ZW50c3x8e30sbj1pW3RdPWlbdF18fFtdO3JldHVybiBuLmluZGV4T2YoZSk9PS0xJiZuLnB1c2goZSksdGhpc319LGUub25jZT1mdW5jdGlvbih0LGUpe2lmKHQmJmUpe3RoaXMub24odCxlKTt2YXIgaT10aGlzLl9vbmNlRXZlbnRzPXRoaXMuX29uY2VFdmVudHN8fHt9LG49aVt0XT1pW3RdfHx7fTtyZXR1cm4gbltlXT0hMCx0aGlzfX0sZS5vZmY9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9ldmVudHMmJnRoaXMuX2V2ZW50c1t0XTtpZihpJiZpLmxlbmd0aCl7dmFyIG49aS5pbmRleE9mKGUpO3JldHVybiBuIT0tMSYmaS5zcGxpY2UobiwxKSx0aGlzfX0sZS5lbWl0RXZlbnQ9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9ldmVudHMmJnRoaXMuX2V2ZW50c1t0XTtpZihpJiZpLmxlbmd0aCl7aT1pLnNsaWNlKDApLGU9ZXx8W107Zm9yKHZhciBuPXRoaXMuX29uY2VFdmVudHMmJnRoaXMuX29uY2VFdmVudHNbdF0scz0wO3M8aS5sZW5ndGg7cysrKXt2YXIgbz1pW3NdLHI9biYmbltvXTtyJiYodGhpcy5vZmYodCxvKSxkZWxldGUgbltvXSksby5hcHBseSh0aGlzLGUpfXJldHVybiB0aGlzfX0sZS5hbGxPZmY9ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5fZXZlbnRzLGRlbGV0ZSB0aGlzLl9vbmNlRXZlbnRzfSx0fSksZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZ2V0LXNpemUvZ2V0LXNpemVcIixlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKCk6dC5nZXRTaXplPWUoKX0od2luZG93LGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCh0KXt2YXIgZT1wYXJzZUZsb2F0KHQpLGk9dC5pbmRleE9mKFwiJVwiKT09LTEmJiFpc05hTihlKTtyZXR1cm4gaSYmZX1mdW5jdGlvbiBlKCl7fWZ1bmN0aW9uIGkoKXtmb3IodmFyIHQ9e3dpZHRoOjAsaGVpZ2h0OjAsaW5uZXJXaWR0aDowLGlubmVySGVpZ2h0OjAsb3V0ZXJXaWR0aDowLG91dGVySGVpZ2h0OjB9LGU9MDtlPGg7ZSsrKXt2YXIgaT1sW2VdO3RbaV09MH1yZXR1cm4gdH1mdW5jdGlvbiBuKHQpe3ZhciBlPWdldENvbXB1dGVkU3R5bGUodCk7cmV0dXJuIGV8fGEoXCJTdHlsZSByZXR1cm5lZCBcIitlK1wiLiBBcmUgeW91IHJ1bm5pbmcgdGhpcyBjb2RlIGluIGEgaGlkZGVuIGlmcmFtZSBvbiBGaXJlZm94PyBTZWUgaHR0cHM6Ly9iaXQubHkvZ2V0c2l6ZWJ1ZzFcIiksZX1mdW5jdGlvbiBzKCl7aWYoIWMpe2M9ITA7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtlLnN0eWxlLndpZHRoPVwiMjAwcHhcIixlLnN0eWxlLnBhZGRpbmc9XCIxcHggMnB4IDNweCA0cHhcIixlLnN0eWxlLmJvcmRlclN0eWxlPVwic29saWRcIixlLnN0eWxlLmJvcmRlcldpZHRoPVwiMXB4IDJweCAzcHggNHB4XCIsZS5zdHlsZS5ib3hTaXppbmc9XCJib3JkZXItYm94XCI7dmFyIGk9ZG9jdW1lbnQuYm9keXx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2kuYXBwZW5kQ2hpbGQoZSk7dmFyIHM9bihlKTtyPTIwMD09TWF0aC5yb3VuZCh0KHMud2lkdGgpKSxvLmlzQm94U2l6ZU91dGVyPXIsaS5yZW1vdmVDaGlsZChlKX19ZnVuY3Rpb24gbyhlKXtpZihzKCksXCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZSkpLGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZlLm5vZGVUeXBlKXt2YXIgbz1uKGUpO2lmKFwibm9uZVwiPT1vLmRpc3BsYXkpcmV0dXJuIGkoKTt2YXIgYT17fTthLndpZHRoPWUub2Zmc2V0V2lkdGgsYS5oZWlnaHQ9ZS5vZmZzZXRIZWlnaHQ7Zm9yKHZhciBjPWEuaXNCb3JkZXJCb3g9XCJib3JkZXItYm94XCI9PW8uYm94U2l6aW5nLGQ9MDtkPGg7ZCsrKXt2YXIgdT1sW2RdLGY9b1t1XSxwPXBhcnNlRmxvYXQoZik7YVt1XT1pc05hTihwKT8wOnB9dmFyIGc9YS5wYWRkaW5nTGVmdCthLnBhZGRpbmdSaWdodCx2PWEucGFkZGluZ1RvcCthLnBhZGRpbmdCb3R0b20sbT1hLm1hcmdpbkxlZnQrYS5tYXJnaW5SaWdodCx5PWEubWFyZ2luVG9wK2EubWFyZ2luQm90dG9tLGI9YS5ib3JkZXJMZWZ0V2lkdGgrYS5ib3JkZXJSaWdodFdpZHRoLEU9YS5ib3JkZXJUb3BXaWR0aCthLmJvcmRlckJvdHRvbVdpZHRoLFM9YyYmcixDPXQoby53aWR0aCk7QyE9PSExJiYoYS53aWR0aD1DKyhTPzA6ZytiKSk7dmFyIHg9dChvLmhlaWdodCk7cmV0dXJuIHghPT0hMSYmKGEuaGVpZ2h0PXgrKFM/MDp2K0UpKSxhLmlubmVyV2lkdGg9YS53aWR0aC0oZytiKSxhLmlubmVySGVpZ2h0PWEuaGVpZ2h0LSh2K0UpLGEub3V0ZXJXaWR0aD1hLndpZHRoK20sYS5vdXRlckhlaWdodD1hLmhlaWdodCt5LGF9fXZhciByLGE9XCJ1bmRlZmluZWRcIj09dHlwZW9mIGNvbnNvbGU/ZTpmdW5jdGlvbih0KXtjb25zb2xlLmVycm9yKHQpfSxsPVtcInBhZGRpbmdMZWZ0XCIsXCJwYWRkaW5nUmlnaHRcIixcInBhZGRpbmdUb3BcIixcInBhZGRpbmdCb3R0b21cIixcIm1hcmdpbkxlZnRcIixcIm1hcmdpblJpZ2h0XCIsXCJtYXJnaW5Ub3BcIixcIm1hcmdpbkJvdHRvbVwiLFwiYm9yZGVyTGVmdFdpZHRoXCIsXCJib3JkZXJSaWdodFdpZHRoXCIsXCJib3JkZXJUb3BXaWR0aFwiLFwiYm9yZGVyQm90dG9tV2lkdGhcIl0saD1sLmxlbmd0aCxjPSExO3JldHVybiBvfSksZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZGVzYW5kcm8tbWF0Y2hlcy1zZWxlY3Rvci9tYXRjaGVzLXNlbGVjdG9yXCIsZSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSgpOnQubWF0Y2hlc1NlbGVjdG9yPWUoKX0od2luZG93LGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHQ9ZnVuY3Rpb24oKXt2YXIgdD13aW5kb3cuRWxlbWVudC5wcm90b3R5cGU7aWYodC5tYXRjaGVzKXJldHVyblwibWF0Y2hlc1wiO2lmKHQubWF0Y2hlc1NlbGVjdG9yKXJldHVyblwibWF0Y2hlc1NlbGVjdG9yXCI7Zm9yKHZhciBlPVtcIndlYmtpdFwiLFwibW96XCIsXCJtc1wiLFwib1wiXSxpPTA7aTxlLmxlbmd0aDtpKyspe3ZhciBuPWVbaV0scz1uK1wiTWF0Y2hlc1NlbGVjdG9yXCI7aWYodFtzXSlyZXR1cm4gc319KCk7cmV0dXJuIGZ1bmN0aW9uKGUsaSl7cmV0dXJuIGVbdF0oaSl9fSksZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZml6enktdWktdXRpbHMvdXRpbHNcIixbXCJkZXNhbmRyby1tYXRjaGVzLXNlbGVjdG9yL21hdGNoZXMtc2VsZWN0b3JcIl0sZnVuY3Rpb24oaSl7cmV0dXJuIGUodCxpKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUodCxyZXF1aXJlKFwiZGVzYW5kcm8tbWF0Y2hlcy1zZWxlY3RvclwiKSk6dC5maXp6eVVJVXRpbHM9ZSh0LHQubWF0Y2hlc1NlbGVjdG9yKX0od2luZG93LGZ1bmN0aW9uKHQsZSl7dmFyIGk9e307aS5leHRlbmQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkgaW4gZSl0W2ldPWVbaV07cmV0dXJuIHR9LGkubW9kdWxvPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHQlZStlKSVlfTt2YXIgbj1BcnJheS5wcm90b3R5cGUuc2xpY2U7aS5tYWtlQXJyYXk9ZnVuY3Rpb24odCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdDtpZihudWxsPT09dHx8dm9pZCAwPT09dClyZXR1cm5bXTt2YXIgZT1cIm9iamVjdFwiPT10eXBlb2YgdCYmXCJudW1iZXJcIj09dHlwZW9mIHQubGVuZ3RoO3JldHVybiBlP24uY2FsbCh0KTpbdF19LGkucmVtb3ZlRnJvbT1mdW5jdGlvbih0LGUpe3ZhciBpPXQuaW5kZXhPZihlKTtpIT0tMSYmdC5zcGxpY2UoaSwxKX0saS5nZXRQYXJlbnQ9ZnVuY3Rpb24odCxpKXtmb3IoO3QucGFyZW50Tm9kZSYmdCE9ZG9jdW1lbnQuYm9keTspaWYodD10LnBhcmVudE5vZGUsZSh0LGkpKXJldHVybiB0fSxpLmdldFF1ZXJ5RWxlbWVudD1mdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdD9kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHQpOnR9LGkuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9XCJvblwiK3QudHlwZTt0aGlzW2VdJiZ0aGlzW2VdKHQpfSxpLmZpbHRlckZpbmRFbGVtZW50cz1mdW5jdGlvbih0LG4pe3Q9aS5tYWtlQXJyYXkodCk7dmFyIHM9W107cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpe2lmKCFuKXJldHVybiB2b2lkIHMucHVzaCh0KTtlKHQsbikmJnMucHVzaCh0KTtmb3IodmFyIGk9dC5xdWVyeVNlbGVjdG9yQWxsKG4pLG89MDtvPGkubGVuZ3RoO28rKylzLnB1c2goaVtvXSl9fSksc30saS5kZWJvdW5jZU1ldGhvZD1mdW5jdGlvbih0LGUsaSl7aT1pfHwxMDA7dmFyIG49dC5wcm90b3R5cGVbZV0scz1lK1wiVGltZW91dFwiO3QucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpc1tzXTtjbGVhclRpbWVvdXQodCk7dmFyIGU9YXJndW1lbnRzLG89dGhpczt0aGlzW3NdPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLmFwcGx5KG8sZSksZGVsZXRlIG9bc119LGkpfX0saS5kb2NSZWFkeT1mdW5jdGlvbih0KXt2YXIgZT1kb2N1bWVudC5yZWFkeVN0YXRlO1wiY29tcGxldGVcIj09ZXx8XCJpbnRlcmFjdGl2ZVwiPT1lP3NldFRpbWVvdXQodCk6ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIix0KX0saS50b0Rhc2hlZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5yZXBsYWNlKC8oLikoW0EtWl0pL2csZnVuY3Rpb24odCxlLGkpe3JldHVybiBlK1wiLVwiK2l9KS50b0xvd2VyQ2FzZSgpfTt2YXIgcz10LmNvbnNvbGU7cmV0dXJuIGkuaHRtbEluaXQ9ZnVuY3Rpb24oZSxuKXtpLmRvY1JlYWR5KGZ1bmN0aW9uKCl7dmFyIG89aS50b0Rhc2hlZChuKSxyPVwiZGF0YS1cIitvLGE9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltcIityK1wiXVwiKSxsPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuanMtXCIrbyksaD1pLm1ha2VBcnJheShhKS5jb25jYXQoaS5tYWtlQXJyYXkobCkpLGM9citcIi1vcHRpb25zXCIsZD10LmpRdWVyeTtoLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGksbz10LmdldEF0dHJpYnV0ZShyKXx8dC5nZXRBdHRyaWJ1dGUoYyk7dHJ5e2k9byYmSlNPTi5wYXJzZShvKX1jYXRjaChhKXtyZXR1cm4gdm9pZChzJiZzLmVycm9yKFwiRXJyb3IgcGFyc2luZyBcIityK1wiIG9uIFwiK3QuY2xhc3NOYW1lK1wiOiBcIithKSl9dmFyIGw9bmV3IGUodCxpKTtkJiZkLmRhdGEodCxuLGwpfSl9KX0saX0pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImZsaWNraXR5L2pzL2NlbGxcIixbXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiXSxmdW5jdGlvbihpKXtyZXR1cm4gZSh0LGkpfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSh0LHJlcXVpcmUoXCJnZXQtc2l6ZVwiKSk6KHQuRmxpY2tpdHk9dC5GbGlja2l0eXx8e30sdC5GbGlja2l0eS5DZWxsPWUodCx0LmdldFNpemUpKX0od2luZG93LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gaSh0LGUpe3RoaXMuZWxlbWVudD10LHRoaXMucGFyZW50PWUsdGhpcy5jcmVhdGUoKX12YXIgbj1pLnByb3RvdHlwZTtyZXR1cm4gbi5jcmVhdGU9ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiLHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsXCJmYWxzZVwiKSx0aGlzLng9MCx0aGlzLnNoaWZ0PTB9LG4uZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuZWxlbWVudC5zdHlsZS5wb3NpdGlvbj1cIlwiO3ZhciB0PXRoaXMucGFyZW50Lm9yaWdpblNpZGU7dGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiksdGhpcy5lbGVtZW50LnN0eWxlW3RdPVwiXCJ9LG4uZ2V0U2l6ZT1mdW5jdGlvbigpe3RoaXMuc2l6ZT1lKHRoaXMuZWxlbWVudCl9LG4uc2V0UG9zaXRpb249ZnVuY3Rpb24odCl7dGhpcy54PXQsdGhpcy51cGRhdGVUYXJnZXQoKSx0aGlzLnJlbmRlclBvc2l0aW9uKHQpfSxuLnVwZGF0ZVRhcmdldD1uLnNldERlZmF1bHRUYXJnZXQ9ZnVuY3Rpb24oKXt2YXIgdD1cImxlZnRcIj09dGhpcy5wYXJlbnQub3JpZ2luU2lkZT9cIm1hcmdpbkxlZnRcIjpcIm1hcmdpblJpZ2h0XCI7dGhpcy50YXJnZXQ9dGhpcy54K3RoaXMuc2l6ZVt0XSt0aGlzLnNpemUud2lkdGgqdGhpcy5wYXJlbnQuY2VsbEFsaWdufSxuLnJlbmRlclBvc2l0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGFyZW50Lm9yaWdpblNpZGU7dGhpcy5lbGVtZW50LnN0eWxlW2VdPXRoaXMucGFyZW50LmdldFBvc2l0aW9uVmFsdWUodCl9LG4ud3JhcFNoaWZ0PWZ1bmN0aW9uKHQpe3RoaXMuc2hpZnQ9dCx0aGlzLnJlbmRlclBvc2l0aW9uKHRoaXMueCt0aGlzLnBhcmVudC5zbGlkZWFibGVXaWR0aCp0KX0sbi5yZW1vdmU9ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpfSxpfSksZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZmxpY2tpdHkvanMvc2xpZGVcIixlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKCk6KHQuRmxpY2tpdHk9dC5GbGlja2l0eXx8e30sdC5GbGlja2l0eS5TbGlkZT1lKCkpfSh3aW5kb3csZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KHQpe3RoaXMucGFyZW50PXQsdGhpcy5pc09yaWdpbkxlZnQ9XCJsZWZ0XCI9PXQub3JpZ2luU2lkZSx0aGlzLmNlbGxzPVtdLHRoaXMub3V0ZXJXaWR0aD0wLHRoaXMuaGVpZ2h0PTB9dmFyIGU9dC5wcm90b3R5cGU7cmV0dXJuIGUuYWRkQ2VsbD1mdW5jdGlvbih0KXtpZih0aGlzLmNlbGxzLnB1c2godCksdGhpcy5vdXRlcldpZHRoKz10LnNpemUub3V0ZXJXaWR0aCx0aGlzLmhlaWdodD1NYXRoLm1heCh0LnNpemUub3V0ZXJIZWlnaHQsdGhpcy5oZWlnaHQpLDE9PXRoaXMuY2VsbHMubGVuZ3RoKXt0aGlzLng9dC54O3ZhciBlPXRoaXMuaXNPcmlnaW5MZWZ0P1wibWFyZ2luTGVmdFwiOlwibWFyZ2luUmlnaHRcIjt0aGlzLmZpcnN0TWFyZ2luPXQuc2l6ZVtlXX19LGUudXBkYXRlVGFyZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pc09yaWdpbkxlZnQ/XCJtYXJnaW5SaWdodFwiOlwibWFyZ2luTGVmdFwiLGU9dGhpcy5nZXRMYXN0Q2VsbCgpLGk9ZT9lLnNpemVbdF06MCxuPXRoaXMub3V0ZXJXaWR0aC0odGhpcy5maXJzdE1hcmdpbitpKTt0aGlzLnRhcmdldD10aGlzLngrdGhpcy5maXJzdE1hcmdpbituKnRoaXMucGFyZW50LmNlbGxBbGlnbn0sZS5nZXRMYXN0Q2VsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNlbGxzW3RoaXMuY2VsbHMubGVuZ3RoLTFdfSxlLnNlbGVjdD1mdW5jdGlvbigpe3RoaXMuY2hhbmdlU2VsZWN0ZWQoITApfSxlLnVuc2VsZWN0PWZ1bmN0aW9uKCl7dGhpcy5jaGFuZ2VTZWxlY3RlZCghMSl9LGUuY2hhbmdlU2VsZWN0ZWQ9ZnVuY3Rpb24odCl7dmFyIGU9dD9cImFkZFwiOlwicmVtb3ZlXCI7dGhpcy5jZWxscy5mb3JFYWNoKGZ1bmN0aW9uKGkpe2kuZWxlbWVudC5jbGFzc0xpc3RbZV0oXCJpcy1zZWxlY3RlZFwiKSxpLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1zZWxlY3RlZFwiLHQudG9TdHJpbmcoKSl9KX0sZS5nZXRDZWxsRWxlbWVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jZWxscy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuZWxlbWVudH0pfSx0fSksZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZmxpY2tpdHkvanMvYW5pbWF0ZVwiLFtcImZpenp5LXVpLXV0aWxzL3V0aWxzXCJdLGZ1bmN0aW9uKGkpe3JldHVybiBlKHQsaSl9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHQscmVxdWlyZShcImZpenp5LXVpLXV0aWxzXCIpKToodC5GbGlja2l0eT10LkZsaWNraXR5fHx7fSx0LkZsaWNraXR5LmFuaW1hdGVQcm90b3R5cGU9ZSh0LHQuZml6enlVSVV0aWxzKSl9KHdpbmRvdyxmdW5jdGlvbih0LGUpe3ZhciBpPXt9O3JldHVybiBpLnN0YXJ0QW5pbWF0aW9uPWZ1bmN0aW9uKCl7dGhpcy5pc0FuaW1hdGluZ3x8KHRoaXMuaXNBbmltYXRpbmc9ITAsdGhpcy5yZXN0aW5nRnJhbWVzPTAsdGhpcy5hbmltYXRlKCkpfSxpLmFuaW1hdGU9ZnVuY3Rpb24oKXt0aGlzLmFwcGx5RHJhZ0ZvcmNlKCksdGhpcy5hcHBseVNlbGVjdGVkQXR0cmFjdGlvbigpO3ZhciB0PXRoaXMueDtpZih0aGlzLmludGVncmF0ZVBoeXNpY3MoKSx0aGlzLnBvc2l0aW9uU2xpZGVyKCksdGhpcy5zZXR0bGUodCksdGhpcy5pc0FuaW1hdGluZyl7dmFyIGU9dGhpcztyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXtlLmFuaW1hdGUoKX0pfX0saS5wb3NpdGlvblNsaWRlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMueDt0aGlzLm9wdGlvbnMud3JhcEFyb3VuZCYmdGhpcy5jZWxscy5sZW5ndGg+MSYmKHQ9ZS5tb2R1bG8odCx0aGlzLnNsaWRlYWJsZVdpZHRoKSx0LT10aGlzLnNsaWRlYWJsZVdpZHRoLHRoaXMuc2hpZnRXcmFwQ2VsbHModCkpLHQrPXRoaXMuY3Vyc29yUG9zaXRpb24sdD10aGlzLm9wdGlvbnMucmlnaHRUb0xlZnQ/LXQ6dDt2YXIgaT10aGlzLmdldFBvc2l0aW9uVmFsdWUodCk7dGhpcy5zbGlkZXIuc3R5bGUudHJhbnNmb3JtPXRoaXMuaXNBbmltYXRpbmc/XCJ0cmFuc2xhdGUzZChcIitpK1wiLDAsMClcIjpcInRyYW5zbGF0ZVgoXCIraStcIilcIjt2YXIgbj10aGlzLnNsaWRlc1swXTtpZihuKXt2YXIgcz0tdGhpcy54LW4udGFyZ2V0LG89cy90aGlzLnNsaWRlc1dpZHRoO3RoaXMuZGlzcGF0Y2hFdmVudChcInNjcm9sbFwiLG51bGwsW28sc10pfX0saS5wb3NpdGlvblNsaWRlckF0U2VsZWN0ZWQ9ZnVuY3Rpb24oKXt0aGlzLmNlbGxzLmxlbmd0aCYmKHRoaXMueD0tdGhpcy5zZWxlY3RlZFNsaWRlLnRhcmdldCx0aGlzLnZlbG9jaXR5PTAsdGhpcy5wb3NpdGlvblNsaWRlcigpKX0saS5nZXRQb3NpdGlvblZhbHVlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnMucGVyY2VudFBvc2l0aW9uPy4wMSpNYXRoLnJvdW5kKHQvdGhpcy5zaXplLmlubmVyV2lkdGgqMWU0KStcIiVcIjpNYXRoLnJvdW5kKHQpK1wicHhcIn0saS5zZXR0bGU9ZnVuY3Rpb24odCl7dGhpcy5pc1BvaW50ZXJEb3dufHxNYXRoLnJvdW5kKDEwMCp0aGlzLngpIT1NYXRoLnJvdW5kKDEwMCp0KXx8dGhpcy5yZXN0aW5nRnJhbWVzKyssdGhpcy5yZXN0aW5nRnJhbWVzPjImJih0aGlzLmlzQW5pbWF0aW5nPSExLGRlbGV0ZSB0aGlzLmlzRnJlZVNjcm9sbGluZyx0aGlzLnBvc2l0aW9uU2xpZGVyKCksdGhpcy5kaXNwYXRjaEV2ZW50KFwic2V0dGxlXCIsbnVsbCxbdGhpcy5zZWxlY3RlZEluZGV4XSkpfSxpLnNoaWZ0V3JhcENlbGxzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY3Vyc29yUG9zaXRpb24rdDt0aGlzLl9zaGlmdENlbGxzKHRoaXMuYmVmb3JlU2hpZnRDZWxscyxlLC0xKTt2YXIgaT10aGlzLnNpemUuaW5uZXJXaWR0aC0odCt0aGlzLnNsaWRlYWJsZVdpZHRoK3RoaXMuY3Vyc29yUG9zaXRpb24pO3RoaXMuX3NoaWZ0Q2VsbHModGhpcy5hZnRlclNoaWZ0Q2VsbHMsaSwxKX0saS5fc2hpZnRDZWxscz1mdW5jdGlvbih0LGUsaSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBzPXRbbl0sbz1lPjA/aTowO3Mud3JhcFNoaWZ0KG8pLGUtPXMuc2l6ZS5vdXRlcldpZHRofX0saS5fdW5zaGlmdENlbGxzPWZ1bmN0aW9uKHQpe2lmKHQmJnQubGVuZ3RoKWZvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV0ud3JhcFNoaWZ0KDApfSxpLmludGVncmF0ZVBoeXNpY3M9ZnVuY3Rpb24oKXt0aGlzLngrPXRoaXMudmVsb2NpdHksdGhpcy52ZWxvY2l0eSo9dGhpcy5nZXRGcmljdGlvbkZhY3RvcigpfSxpLmFwcGx5Rm9yY2U9ZnVuY3Rpb24odCl7dGhpcy52ZWxvY2l0eSs9dH0saS5nZXRGcmljdGlvbkZhY3Rvcj1mdW5jdGlvbigpe3JldHVybiAxLXRoaXMub3B0aW9uc1t0aGlzLmlzRnJlZVNjcm9sbGluZz9cImZyZWVTY3JvbGxGcmljdGlvblwiOlwiZnJpY3Rpb25cIl19LGkuZ2V0UmVzdGluZ1Bvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueCt0aGlzLnZlbG9jaXR5LygxLXRoaXMuZ2V0RnJpY3Rpb25GYWN0b3IoKSl9LGkuYXBwbHlEcmFnRm9yY2U9ZnVuY3Rpb24oKXtpZih0aGlzLmlzRHJhZ2dhYmxlJiZ0aGlzLmlzUG9pbnRlckRvd24pe3ZhciB0PXRoaXMuZHJhZ1gtdGhpcy54LGU9dC10aGlzLnZlbG9jaXR5O3RoaXMuYXBwbHlGb3JjZShlKX19LGkuYXBwbHlTZWxlY3RlZEF0dHJhY3Rpb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmlzRHJhZ2dhYmxlJiZ0aGlzLmlzUG9pbnRlckRvd247aWYoIXQmJiF0aGlzLmlzRnJlZVNjcm9sbGluZyYmdGhpcy5zbGlkZXMubGVuZ3RoKXt2YXIgZT10aGlzLnNlbGVjdGVkU2xpZGUudGFyZ2V0Ki0xLXRoaXMueCxpPWUqdGhpcy5vcHRpb25zLnNlbGVjdGVkQXR0cmFjdGlvbjt0aGlzLmFwcGx5Rm9yY2UoaSl9fSxpfSksZnVuY3Rpb24odCxlKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFwiZmxpY2tpdHkvanMvZmxpY2tpdHlcIixbXCJldi1lbWl0dGVyL2V2LWVtaXR0ZXJcIixcImdldC1zaXplL2dldC1zaXplXCIsXCJmaXp6eS11aS11dGlscy91dGlsc1wiLFwiLi9jZWxsXCIsXCIuL3NsaWRlXCIsXCIuL2FuaW1hdGVcIl0sZnVuY3Rpb24oaSxuLHMsbyxyLGEpe3JldHVybiBlKHQsaSxuLHMsbyxyLGEpfSk7ZWxzZSBpZihcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cyltb2R1bGUuZXhwb3J0cz1lKHQscmVxdWlyZShcImV2LWVtaXR0ZXJcIikscmVxdWlyZShcImdldC1zaXplXCIpLHJlcXVpcmUoXCJmaXp6eS11aS11dGlsc1wiKSxyZXF1aXJlKFwiLi9jZWxsXCIpLHJlcXVpcmUoXCIuL3NsaWRlXCIpLHJlcXVpcmUoXCIuL2FuaW1hdGVcIikpO2Vsc2V7dmFyIGk9dC5GbGlja2l0eTt0LkZsaWNraXR5PWUodCx0LkV2RW1pdHRlcix0LmdldFNpemUsdC5maXp6eVVJVXRpbHMsaS5DZWxsLGkuU2xpZGUsaS5hbmltYXRlUHJvdG90eXBlKX19KHdpbmRvdyxmdW5jdGlvbih0LGUsaSxuLHMsbyxyKXtmdW5jdGlvbiBhKHQsZSl7Zm9yKHQ9bi5tYWtlQXJyYXkodCk7dC5sZW5ndGg7KWUuYXBwZW5kQ2hpbGQodC5zaGlmdCgpKX1mdW5jdGlvbiBsKHQsZSl7dmFyIGk9bi5nZXRRdWVyeUVsZW1lbnQodCk7aWYoIWkpcmV0dXJuIHZvaWQoZCYmZC5lcnJvcihcIkJhZCBlbGVtZW50IGZvciBGbGlja2l0eTogXCIrKGl8fHQpKSk7aWYodGhpcy5lbGVtZW50PWksdGhpcy5lbGVtZW50LmZsaWNraXR5R1VJRCl7dmFyIHM9Zlt0aGlzLmVsZW1lbnQuZmxpY2tpdHlHVUlEXTtyZXR1cm4gcy5vcHRpb24oZSksc31oJiYodGhpcy4kZWxlbWVudD1oKHRoaXMuZWxlbWVudCkpLHRoaXMub3B0aW9ucz1uLmV4dGVuZCh7fSx0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRzKSx0aGlzLm9wdGlvbihlKSx0aGlzLl9jcmVhdGUoKX12YXIgaD10LmpRdWVyeSxjPXQuZ2V0Q29tcHV0ZWRTdHlsZSxkPXQuY29uc29sZSx1PTAsZj17fTtsLmRlZmF1bHRzPXthY2Nlc3NpYmlsaXR5OiEwLGNlbGxBbGlnbjpcImNlbnRlclwiLGZyZWVTY3JvbGxGcmljdGlvbjouMDc1LGZyaWN0aW9uOi4yOCxuYW1lc3BhY2VKUXVlcnlFdmVudHM6ITAscGVyY2VudFBvc2l0aW9uOiEwLHJlc2l6ZTohMCxzZWxlY3RlZEF0dHJhY3Rpb246LjAyNSxzZXRHYWxsZXJ5U2l6ZTohMH0sbC5jcmVhdGVNZXRob2RzPVtdO3ZhciBwPWwucHJvdG90eXBlO24uZXh0ZW5kKHAsZS5wcm90b3R5cGUpLHAuX2NyZWF0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZ3VpZD0rK3U7dGhpcy5lbGVtZW50LmZsaWNraXR5R1VJRD1lLGZbZV09dGhpcyx0aGlzLnNlbGVjdGVkSW5kZXg9MCx0aGlzLnJlc3RpbmdGcmFtZXM9MCx0aGlzLng9MCx0aGlzLnZlbG9jaXR5PTAsdGhpcy5vcmlnaW5TaWRlPXRoaXMub3B0aW9ucy5yaWdodFRvTGVmdD9cInJpZ2h0XCI6XCJsZWZ0XCIsdGhpcy52aWV3cG9ydD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMudmlld3BvcnQuY2xhc3NOYW1lPVwiZmxpY2tpdHktdmlld3BvcnRcIix0aGlzLl9jcmVhdGVTbGlkZXIoKSwodGhpcy5vcHRpb25zLnJlc2l6ZXx8dGhpcy5vcHRpb25zLndhdGNoQ1NTKSYmdC5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcyk7Zm9yKHZhciBpIGluIHRoaXMub3B0aW9ucy5vbil7dmFyIG49dGhpcy5vcHRpb25zLm9uW2ldO3RoaXMub24oaSxuKX1sLmNyZWF0ZU1ldGhvZHMuZm9yRWFjaChmdW5jdGlvbih0KXt0aGlzW3RdKCl9LHRoaXMpLHRoaXMub3B0aW9ucy53YXRjaENTUz90aGlzLndhdGNoQ1NTKCk6dGhpcy5hY3RpdmF0ZSgpfSxwLm9wdGlvbj1mdW5jdGlvbih0KXtuLmV4dGVuZCh0aGlzLm9wdGlvbnMsdCl9LHAuYWN0aXZhdGU9ZnVuY3Rpb24oKXtpZighdGhpcy5pc0FjdGl2ZSl7dGhpcy5pc0FjdGl2ZT0hMCx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZsaWNraXR5LWVuYWJsZWRcIiksdGhpcy5vcHRpb25zLnJpZ2h0VG9MZWZ0JiZ0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZsaWNraXR5LXJ0bFwiKSx0aGlzLmdldFNpemUoKTt2YXIgdD10aGlzLl9maWx0ZXJGaW5kQ2VsbEVsZW1lbnRzKHRoaXMuZWxlbWVudC5jaGlsZHJlbik7YSh0LHRoaXMuc2xpZGVyKSx0aGlzLnZpZXdwb3J0LmFwcGVuZENoaWxkKHRoaXMuc2xpZGVyKSx0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWV3cG9ydCksdGhpcy5yZWxvYWRDZWxscygpLHRoaXMub3B0aW9ucy5hY2Nlc3NpYmlsaXR5JiYodGhpcy5lbGVtZW50LnRhYkluZGV4PTAsdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsdGhpcykpLHRoaXMuZW1pdEV2ZW50KFwiYWN0aXZhdGVcIik7dmFyIGUsaT10aGlzLm9wdGlvbnMuaW5pdGlhbEluZGV4O2U9dGhpcy5pc0luaXRBY3RpdmF0ZWQ/dGhpcy5zZWxlY3RlZEluZGV4OnZvaWQgMCE9PWkmJnRoaXMuY2VsbHNbaV0/aTowLHRoaXMuc2VsZWN0KGUsITEsITApLHRoaXMuaXNJbml0QWN0aXZhdGVkPSEwLHRoaXMuZGlzcGF0Y2hFdmVudChcInJlYWR5XCIpfX0scC5fY3JlYXRlU2xpZGVyPWZ1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0LmNsYXNzTmFtZT1cImZsaWNraXR5LXNsaWRlclwiLHQuc3R5bGVbdGhpcy5vcmlnaW5TaWRlXT0wLHRoaXMuc2xpZGVyPXR9LHAuX2ZpbHRlckZpbmRDZWxsRWxlbWVudHM9ZnVuY3Rpb24odCl7cmV0dXJuIG4uZmlsdGVyRmluZEVsZW1lbnRzKHQsdGhpcy5vcHRpb25zLmNlbGxTZWxlY3Rvcil9LHAucmVsb2FkQ2VsbHM9ZnVuY3Rpb24oKXt0aGlzLmNlbGxzPXRoaXMuX21ha2VDZWxscyh0aGlzLnNsaWRlci5jaGlsZHJlbiksdGhpcy5wb3NpdGlvbkNlbGxzKCksdGhpcy5fZ2V0V3JhcFNoaWZ0Q2VsbHMoKSx0aGlzLnNldEdhbGxlcnlTaXplKCl9LHAuX21ha2VDZWxscz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9maWx0ZXJGaW5kQ2VsbEVsZW1lbnRzKHQpLGk9ZS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBzKHQsdGhpcyl9LHRoaXMpO3JldHVybiBpfSxwLmdldExhc3RDZWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2VsbHNbdGhpcy5jZWxscy5sZW5ndGgtMV19LHAuZ2V0TGFzdFNsaWRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2xpZGVzW3RoaXMuc2xpZGVzLmxlbmd0aC0xXX0scC5wb3NpdGlvbkNlbGxzPWZ1bmN0aW9uKCl7dGhpcy5fc2l6ZUNlbGxzKHRoaXMuY2VsbHMpLHRoaXMuX3Bvc2l0aW9uQ2VsbHMoMCl9LHAuX3Bvc2l0aW9uQ2VsbHM9ZnVuY3Rpb24odCl7dD10fHwwLHRoaXMubWF4Q2VsbEhlaWdodD10P3RoaXMubWF4Q2VsbEhlaWdodHx8MDowO3ZhciBlPTA7aWYodD4wKXt2YXIgaT10aGlzLmNlbGxzW3QtMV07ZT1pLngraS5zaXplLm91dGVyV2lkdGh9Zm9yKHZhciBuPXRoaXMuY2VsbHMubGVuZ3RoLHM9dDtzPG47cysrKXt2YXIgbz10aGlzLmNlbGxzW3NdO28uc2V0UG9zaXRpb24oZSksZSs9by5zaXplLm91dGVyV2lkdGgsdGhpcy5tYXhDZWxsSGVpZ2h0PU1hdGgubWF4KG8uc2l6ZS5vdXRlckhlaWdodCx0aGlzLm1heENlbGxIZWlnaHQpfXRoaXMuc2xpZGVhYmxlV2lkdGg9ZSx0aGlzLnVwZGF0ZVNsaWRlcygpLHRoaXMuX2NvbnRhaW5TbGlkZXMoKSx0aGlzLnNsaWRlc1dpZHRoPW4/dGhpcy5nZXRMYXN0U2xpZGUoKS50YXJnZXQtdGhpcy5zbGlkZXNbMF0udGFyZ2V0OjB9LHAuX3NpemVDZWxscz1mdW5jdGlvbih0KXt0LmZvckVhY2goZnVuY3Rpb24odCl7dC5nZXRTaXplKCl9KX0scC51cGRhdGVTbGlkZXM9ZnVuY3Rpb24oKXtpZih0aGlzLnNsaWRlcz1bXSx0aGlzLmNlbGxzLmxlbmd0aCl7dmFyIHQ9bmV3IG8odGhpcyk7dGhpcy5zbGlkZXMucHVzaCh0KTt2YXIgZT1cImxlZnRcIj09dGhpcy5vcmlnaW5TaWRlLGk9ZT9cIm1hcmdpblJpZ2h0XCI6XCJtYXJnaW5MZWZ0XCIsbj10aGlzLl9nZXRDYW5DZWxsRml0KCk7dGhpcy5jZWxscy5mb3JFYWNoKGZ1bmN0aW9uKGUscyl7aWYoIXQuY2VsbHMubGVuZ3RoKXJldHVybiB2b2lkIHQuYWRkQ2VsbChlKTt2YXIgcj10Lm91dGVyV2lkdGgtdC5maXJzdE1hcmdpbisoZS5zaXplLm91dGVyV2lkdGgtZS5zaXplW2ldKTtuLmNhbGwodGhpcyxzLHIpP3QuYWRkQ2VsbChlKToodC51cGRhdGVUYXJnZXQoKSx0PW5ldyBvKHRoaXMpLHRoaXMuc2xpZGVzLnB1c2godCksdC5hZGRDZWxsKGUpKX0sdGhpcyksdC51cGRhdGVUYXJnZXQoKSx0aGlzLnVwZGF0ZVNlbGVjdGVkU2xpZGUoKX19LHAuX2dldENhbkNlbGxGaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuZ3JvdXBDZWxscztpZighdClyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hMX07aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpe3ZhciBlPXBhcnNlSW50KHQsMTApO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gdCVlIT09MH19dmFyIGk9XCJzdHJpbmdcIj09dHlwZW9mIHQmJnQubWF0Y2goL14oXFxkKyklJC8pLG49aT9wYXJzZUludChpWzFdLDEwKS8xMDA6MTtyZXR1cm4gZnVuY3Rpb24odCxlKXtyZXR1cm4gZTw9KHRoaXMuc2l6ZS5pbm5lcldpZHRoKzEpKm59fSxwLl9pbml0PXAucmVwb3NpdGlvbj1mdW5jdGlvbigpe3RoaXMucG9zaXRpb25DZWxscygpLHRoaXMucG9zaXRpb25TbGlkZXJBdFNlbGVjdGVkKCl9LHAuZ2V0U2l6ZT1mdW5jdGlvbigpe3RoaXMuc2l6ZT1pKHRoaXMuZWxlbWVudCksdGhpcy5zZXRDZWxsQWxpZ24oKSx0aGlzLmN1cnNvclBvc2l0aW9uPXRoaXMuc2l6ZS5pbm5lcldpZHRoKnRoaXMuY2VsbEFsaWdufTt2YXIgZz17Y2VudGVyOntsZWZ0Oi41LHJpZ2h0Oi41fSxsZWZ0OntsZWZ0OjAscmlnaHQ6MX0scmlnaHQ6e3JpZ2h0OjAsbGVmdDoxfX07cmV0dXJuIHAuc2V0Q2VsbEFsaWduPWZ1bmN0aW9uKCl7dmFyIHQ9Z1t0aGlzLm9wdGlvbnMuY2VsbEFsaWduXTt0aGlzLmNlbGxBbGlnbj10P3RbdGhpcy5vcmlnaW5TaWRlXTp0aGlzLm9wdGlvbnMuY2VsbEFsaWdufSxwLnNldEdhbGxlcnlTaXplPWZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLnNldEdhbGxlcnlTaXplKXt2YXIgdD10aGlzLm9wdGlvbnMuYWRhcHRpdmVIZWlnaHQmJnRoaXMuc2VsZWN0ZWRTbGlkZT90aGlzLnNlbGVjdGVkU2xpZGUuaGVpZ2h0OnRoaXMubWF4Q2VsbEhlaWdodDt0aGlzLnZpZXdwb3J0LnN0eWxlLmhlaWdodD10K1wicHhcIn19LHAuX2dldFdyYXBTaGlmdENlbGxzPWZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLndyYXBBcm91bmQpe3RoaXMuX3Vuc2hpZnRDZWxscyh0aGlzLmJlZm9yZVNoaWZ0Q2VsbHMpLHRoaXMuX3Vuc2hpZnRDZWxscyh0aGlzLmFmdGVyU2hpZnRDZWxscyk7dmFyIHQ9dGhpcy5jdXJzb3JQb3NpdGlvbixlPXRoaXMuY2VsbHMubGVuZ3RoLTE7dGhpcy5iZWZvcmVTaGlmdENlbGxzPXRoaXMuX2dldEdhcENlbGxzKHQsZSwtMSksdD10aGlzLnNpemUuaW5uZXJXaWR0aC10aGlzLmN1cnNvclBvc2l0aW9uLHRoaXMuYWZ0ZXJTaGlmdENlbGxzPXRoaXMuX2dldEdhcENlbGxzKHQsMCwxKX19LHAuX2dldEdhcENlbGxzPWZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIG49W107dD4wOyl7dmFyIHM9dGhpcy5jZWxsc1tlXTtpZighcylicmVhaztuLnB1c2gocyksZSs9aSx0LT1zLnNpemUub3V0ZXJXaWR0aH1yZXR1cm4gbn0scC5fY29udGFpblNsaWRlcz1mdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucy5jb250YWluJiYhdGhpcy5vcHRpb25zLndyYXBBcm91bmQmJnRoaXMuY2VsbHMubGVuZ3RoKXt2YXIgdD10aGlzLm9wdGlvbnMucmlnaHRUb0xlZnQsZT10P1wibWFyZ2luUmlnaHRcIjpcIm1hcmdpbkxlZnRcIixpPXQ/XCJtYXJnaW5MZWZ0XCI6XCJtYXJnaW5SaWdodFwiLG49dGhpcy5zbGlkZWFibGVXaWR0aC10aGlzLmdldExhc3RDZWxsKCkuc2l6ZVtpXSxzPW48dGhpcy5zaXplLmlubmVyV2lkdGgsbz10aGlzLmN1cnNvclBvc2l0aW9uK3RoaXMuY2VsbHNbMF0uc2l6ZVtlXSxyPW4tdGhpcy5zaXplLmlubmVyV2lkdGgqKDEtdGhpcy5jZWxsQWxpZ24pO3RoaXMuc2xpZGVzLmZvckVhY2goZnVuY3Rpb24odCl7cz90LnRhcmdldD1uKnRoaXMuY2VsbEFsaWduOih0LnRhcmdldD1NYXRoLm1heCh0LnRhcmdldCxvKSx0LnRhcmdldD1NYXRoLm1pbih0LnRhcmdldCxyKSl9LHRoaXMpfX0scC5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1lP1tlXS5jb25jYXQoaSk6aTtpZih0aGlzLmVtaXRFdmVudCh0LG4pLGgmJnRoaXMuJGVsZW1lbnQpe3QrPXRoaXMub3B0aW9ucy5uYW1lc3BhY2VKUXVlcnlFdmVudHM/XCIuZmxpY2tpdHlcIjpcIlwiO3ZhciBzPXQ7aWYoZSl7dmFyIG89aC5FdmVudChlKTtvLnR5cGU9dCxzPW99dGhpcy4kZWxlbWVudC50cmlnZ2VyKHMsaSl9fSxwLnNlbGVjdD1mdW5jdGlvbih0LGUsaSl7aWYodGhpcy5pc0FjdGl2ZSYmKHQ9cGFyc2VJbnQodCwxMCksdGhpcy5fd3JhcFNlbGVjdCh0KSwodGhpcy5vcHRpb25zLndyYXBBcm91bmR8fGUpJiYodD1uLm1vZHVsbyh0LHRoaXMuc2xpZGVzLmxlbmd0aCkpLHRoaXMuc2xpZGVzW3RdKSl7dmFyIHM9dGhpcy5zZWxlY3RlZEluZGV4O3RoaXMuc2VsZWN0ZWRJbmRleD10LHRoaXMudXBkYXRlU2VsZWN0ZWRTbGlkZSgpLGk/dGhpcy5wb3NpdGlvblNsaWRlckF0U2VsZWN0ZWQoKTp0aGlzLnN0YXJ0QW5pbWF0aW9uKCksdGhpcy5vcHRpb25zLmFkYXB0aXZlSGVpZ2h0JiZ0aGlzLnNldEdhbGxlcnlTaXplKCksdGhpcy5kaXNwYXRjaEV2ZW50KFwic2VsZWN0XCIsbnVsbCxbdF0pLHQhPXMmJnRoaXMuZGlzcGF0Y2hFdmVudChcImNoYW5nZVwiLG51bGwsW3RdKSx0aGlzLmRpc3BhdGNoRXZlbnQoXCJjZWxsU2VsZWN0XCIpfX0scC5fd3JhcFNlbGVjdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnNsaWRlcy5sZW5ndGgsaT10aGlzLm9wdGlvbnMud3JhcEFyb3VuZCYmZT4xO2lmKCFpKXJldHVybiB0O3ZhciBzPW4ubW9kdWxvKHQsZSksbz1NYXRoLmFicyhzLXRoaXMuc2VsZWN0ZWRJbmRleCkscj1NYXRoLmFicyhzK2UtdGhpcy5zZWxlY3RlZEluZGV4KSxhPU1hdGguYWJzKHMtZS10aGlzLnNlbGVjdGVkSW5kZXgpOyF0aGlzLmlzRHJhZ1NlbGVjdCYmcjxvP3QrPWU6IXRoaXMuaXNEcmFnU2VsZWN0JiZhPG8mJih0LT1lKSx0PDA/dGhpcy54LT10aGlzLnNsaWRlYWJsZVdpZHRoOnQ+PWUmJih0aGlzLngrPXRoaXMuc2xpZGVhYmxlV2lkdGgpfSxwLnByZXZpb3VzPWZ1bmN0aW9uKHQsZSl7dGhpcy5zZWxlY3QodGhpcy5zZWxlY3RlZEluZGV4LTEsdCxlKX0scC5uZXh0PWZ1bmN0aW9uKHQsZSl7dGhpcy5zZWxlY3QodGhpcy5zZWxlY3RlZEluZGV4KzEsdCxlKX0scC51cGRhdGVTZWxlY3RlZFNsaWRlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5zbGlkZXNbdGhpcy5zZWxlY3RlZEluZGV4XTt0JiYodGhpcy51bnNlbGVjdFNlbGVjdGVkU2xpZGUoKSx0aGlzLnNlbGVjdGVkU2xpZGU9dCx0LnNlbGVjdCgpLHRoaXMuc2VsZWN0ZWRDZWxscz10LmNlbGxzLHRoaXMuc2VsZWN0ZWRFbGVtZW50cz10LmdldENlbGxFbGVtZW50cygpLHRoaXMuc2VsZWN0ZWRDZWxsPXQuY2VsbHNbMF0sdGhpcy5zZWxlY3RlZEVsZW1lbnQ9dGhpcy5zZWxlY3RlZEVsZW1lbnRzWzBdKX0scC51bnNlbGVjdFNlbGVjdGVkU2xpZGU9ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVkU2xpZGUmJnRoaXMuc2VsZWN0ZWRTbGlkZS51bnNlbGVjdCgpfSxwLnNlbGVjdENlbGw9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMucXVlcnlDZWxsKHQpO2lmKG4pe3ZhciBzPXRoaXMuZ2V0Q2VsbFNsaWRlSW5kZXgobik7dGhpcy5zZWxlY3QocyxlLGkpfX0scC5nZXRDZWxsU2xpZGVJbmRleD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMuc2xpZGVzLmxlbmd0aDtlKyspe3ZhciBpPXRoaXMuc2xpZGVzW2VdLG49aS5jZWxscy5pbmRleE9mKHQpO2lmKG4hPS0xKXJldHVybiBlfX0scC5nZXRDZWxsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5jZWxscy5sZW5ndGg7ZSsrKXt2YXIgaT10aGlzLmNlbGxzW2VdO2lmKGkuZWxlbWVudD09dClyZXR1cm4gaX19LHAuZ2V0Q2VsbHM9ZnVuY3Rpb24odCl7dD1uLm1ha2VBcnJheSh0KTt2YXIgZT1bXTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuZ2V0Q2VsbCh0KTtpJiZlLnB1c2goaSl9LHRoaXMpLGV9LHAuZ2V0Q2VsbEVsZW1lbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2VsbHMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmVsZW1lbnR9KX0scC5nZXRQYXJlbnRDZWxsPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0Q2VsbCh0KTtyZXR1cm4gZT9lOih0PW4uZ2V0UGFyZW50KHQsXCIuZmxpY2tpdHktc2xpZGVyID4gKlwiKSx0aGlzLmdldENlbGwodCkpfSxwLmdldEFkamFjZW50Q2VsbEVsZW1lbnRzPWZ1bmN0aW9uKHQsZSl7aWYoIXQpcmV0dXJuIHRoaXMuc2VsZWN0ZWRTbGlkZS5nZXRDZWxsRWxlbWVudHMoKTtlPXZvaWQgMD09PWU/dGhpcy5zZWxlY3RlZEluZGV4OmU7dmFyIGk9dGhpcy5zbGlkZXMubGVuZ3RoO2lmKDErMip0Pj1pKXJldHVybiB0aGlzLmdldENlbGxFbGVtZW50cygpO2Zvcih2YXIgcz1bXSxvPWUtdDtvPD1lK3Q7bysrKXt2YXIgcj10aGlzLm9wdGlvbnMud3JhcEFyb3VuZD9uLm1vZHVsbyhvLGkpOm8sYT10aGlzLnNsaWRlc1tyXTthJiYocz1zLmNvbmNhdChhLmdldENlbGxFbGVtZW50cygpKSl9cmV0dXJuIHN9LHAucXVlcnlDZWxsPWZ1bmN0aW9uKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0P3RoaXMuY2VsbHNbdF06KFwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD10aGlzLmVsZW1lbnQucXVlcnlTZWxlY3Rvcih0KSksdGhpcy5nZXRDZWxsKHQpKX0scC51aUNoYW5nZT1mdW5jdGlvbigpe3RoaXMuZW1pdEV2ZW50KFwidWlDaGFuZ2VcIil9LHAuY2hpbGRVSVBvaW50ZXJEb3duPWZ1bmN0aW9uKHQpe3RoaXMuZW1pdEV2ZW50KFwiY2hpbGRVSVBvaW50ZXJEb3duXCIsW3RdKX0scC5vbnJlc2l6ZT1mdW5jdGlvbigpe3RoaXMud2F0Y2hDU1MoKSx0aGlzLnJlc2l6ZSgpfSxuLmRlYm91bmNlTWV0aG9kKGwsXCJvbnJlc2l6ZVwiLDE1MCkscC5yZXNpemU9ZnVuY3Rpb24oKXtpZih0aGlzLmlzQWN0aXZlKXt0aGlzLmdldFNpemUoKSx0aGlzLm9wdGlvbnMud3JhcEFyb3VuZCYmKHRoaXMueD1uLm1vZHVsbyh0aGlzLngsdGhpcy5zbGlkZWFibGVXaWR0aCkpLHRoaXMucG9zaXRpb25DZWxscygpLHRoaXMuX2dldFdyYXBTaGlmdENlbGxzKCksdGhpcy5zZXRHYWxsZXJ5U2l6ZSgpLHRoaXMuZW1pdEV2ZW50KFwicmVzaXplXCIpO3ZhciB0PXRoaXMuc2VsZWN0ZWRFbGVtZW50cyYmdGhpcy5zZWxlY3RlZEVsZW1lbnRzWzBdO3RoaXMuc2VsZWN0Q2VsbCh0LCExLCEwKX19LHAud2F0Y2hDU1M9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMud2F0Y2hDU1M7aWYodCl7dmFyIGU9Yyh0aGlzLmVsZW1lbnQsXCI6YWZ0ZXJcIikuY29udGVudDtlLmluZGV4T2YoXCJmbGlja2l0eVwiKSE9LTE/dGhpcy5hY3RpdmF0ZSgpOnRoaXMuZGVhY3RpdmF0ZSgpfX0scC5vbmtleWRvd249ZnVuY3Rpb24odCl7dmFyIGU9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCYmZG9jdW1lbnQuYWN0aXZlRWxlbWVudCE9dGhpcy5lbGVtZW50O2lmKHRoaXMub3B0aW9ucy5hY2Nlc3NpYmlsaXR5JiYhZSl7dmFyIGk9bC5rZXlib2FyZEhhbmRsZXJzW3Qua2V5Q29kZV07aSYmaS5jYWxsKHRoaXMpfX0sbC5rZXlib2FyZEhhbmRsZXJzPXszNzpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5yaWdodFRvTGVmdD9cIm5leHRcIjpcInByZXZpb3VzXCI7dGhpcy51aUNoYW5nZSgpLHRoaXNbdF0oKX0sMzk6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMucmlnaHRUb0xlZnQ/XCJwcmV2aW91c1wiOlwibmV4dFwiO3RoaXMudWlDaGFuZ2UoKSx0aGlzW3RdKCl9fSxwLmZvY3VzPWZ1bmN0aW9uKCl7dmFyIGU9dC5wYWdlWU9mZnNldDt0aGlzLmVsZW1lbnQuZm9jdXMoe3ByZXZlbnRTY3JvbGw6ITB9KSx0LnBhZ2VZT2Zmc2V0IT1lJiZ0LnNjcm9sbFRvKHQucGFnZVhPZmZzZXQsZSl9LHAuZGVhY3RpdmF0ZT1mdW5jdGlvbigpe3RoaXMuaXNBY3RpdmUmJih0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZsaWNraXR5LWVuYWJsZWRcIiksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmbGlja2l0eS1ydGxcIiksdGhpcy51bnNlbGVjdFNlbGVjdGVkU2xpZGUoKSx0aGlzLmNlbGxzLmZvckVhY2goZnVuY3Rpb24odCl7dC5kZXN0cm95KCl9KSx0aGlzLmVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy52aWV3cG9ydCksYSh0aGlzLnNsaWRlci5jaGlsZHJlbix0aGlzLmVsZW1lbnQpLHRoaXMub3B0aW9ucy5hY2Nlc3NpYmlsaXR5JiYodGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcInRhYkluZGV4XCIpLHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMpKSx0aGlzLmlzQWN0aXZlPSExLHRoaXMuZW1pdEV2ZW50KFwiZGVhY3RpdmF0ZVwiKSl9LHAuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMpLHRoaXMuZW1pdEV2ZW50KFwiZGVzdHJveVwiKSxoJiZ0aGlzLiRlbGVtZW50JiZoLnJlbW92ZURhdGEodGhpcy5lbGVtZW50LFwiZmxpY2tpdHlcIiksZGVsZXRlIHRoaXMuZWxlbWVudC5mbGlja2l0eUdVSUQsZGVsZXRlIGZbdGhpcy5ndWlkXX0sbi5leHRlbmQocCxyKSxsLmRhdGE9ZnVuY3Rpb24odCl7dD1uLmdldFF1ZXJ5RWxlbWVudCh0KTt2YXIgZT10JiZ0LmZsaWNraXR5R1VJRDtyZXR1cm4gZSYmZltlXX0sbi5odG1sSW5pdChsLFwiZmxpY2tpdHlcIiksaCYmaC5icmlkZ2V0JiZoLmJyaWRnZXQoXCJmbGlja2l0eVwiLGwpLGwuc2V0SlF1ZXJ5PWZ1bmN0aW9uKHQpe2g9dH0sbC5DZWxsPXMsbH0pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcInVuaXBvaW50ZXIvdW5pcG9pbnRlclwiLFtcImV2LWVtaXR0ZXIvZXYtZW1pdHRlclwiXSxmdW5jdGlvbihpKXtyZXR1cm4gZSh0LGkpfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSh0LHJlcXVpcmUoXCJldi1lbWl0dGVyXCIpKTp0LlVuaXBvaW50ZXI9ZSh0LHQuRXZFbWl0dGVyKX0od2luZG93LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gaSgpe31mdW5jdGlvbiBuKCl7fXZhciBzPW4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5wcm90b3R5cGUpO3MuYmluZFN0YXJ0RXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5fYmluZFN0YXJ0RXZlbnQodCwhMCl9LHMudW5iaW5kU3RhcnRFdmVudD1mdW5jdGlvbih0KXt0aGlzLl9iaW5kU3RhcnRFdmVudCh0LCExKX0scy5fYmluZFN0YXJ0RXZlbnQ9ZnVuY3Rpb24oZSxpKXtpPXZvaWQgMD09PWl8fGk7dmFyIG49aT9cImFkZEV2ZW50TGlzdGVuZXJcIjpcInJlbW92ZUV2ZW50TGlzdGVuZXJcIixzPVwibW91c2Vkb3duXCI7dC5Qb2ludGVyRXZlbnQ/cz1cInBvaW50ZXJkb3duXCI6XCJvbnRvdWNoc3RhcnRcImluIHQmJihzPVwidG91Y2hzdGFydFwiKSxlW25dKHMsdGhpcyl9LHMuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9XCJvblwiK3QudHlwZTt0aGlzW2VdJiZ0aGlzW2VdKHQpfSxzLmdldFRvdWNoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXt2YXIgaT10W2VdO2lmKGkuaWRlbnRpZmllcj09dGhpcy5wb2ludGVySWRlbnRpZmllcilyZXR1cm4gaX19LHMub25tb3VzZWRvd249ZnVuY3Rpb24odCl7dmFyIGU9dC5idXR0b247ZSYmMCE9PWUmJjEhPT1lfHx0aGlzLl9wb2ludGVyRG93bih0LHQpfSxzLm9udG91Y2hzdGFydD1mdW5jdGlvbih0KXt0aGlzLl9wb2ludGVyRG93bih0LHQuY2hhbmdlZFRvdWNoZXNbMF0pfSxzLm9ucG9pbnRlcmRvd249ZnVuY3Rpb24odCl7dGhpcy5fcG9pbnRlckRvd24odCx0KX0scy5fcG9pbnRlckRvd249ZnVuY3Rpb24odCxlKXt0LmJ1dHRvbnx8dGhpcy5pc1BvaW50ZXJEb3dufHwodGhpcy5pc1BvaW50ZXJEb3duPSEwLHRoaXMucG9pbnRlcklkZW50aWZpZXI9dm9pZCAwIT09ZS5wb2ludGVySWQ/ZS5wb2ludGVySWQ6ZS5pZGVudGlmaWVyLHRoaXMucG9pbnRlckRvd24odCxlKSl9LHMucG9pbnRlckRvd249ZnVuY3Rpb24odCxlKXt0aGlzLl9iaW5kUG9zdFN0YXJ0RXZlbnRzKHQpLHRoaXMuZW1pdEV2ZW50KFwicG9pbnRlckRvd25cIixbdCxlXSl9O3ZhciBvPXttb3VzZWRvd246W1wibW91c2Vtb3ZlXCIsXCJtb3VzZXVwXCJdLHRvdWNoc3RhcnQ6W1widG91Y2htb3ZlXCIsXCJ0b3VjaGVuZFwiLFwidG91Y2hjYW5jZWxcIl0scG9pbnRlcmRvd246W1wicG9pbnRlcm1vdmVcIixcInBvaW50ZXJ1cFwiLFwicG9pbnRlcmNhbmNlbFwiXX07cmV0dXJuIHMuX2JpbmRQb3N0U3RhcnRFdmVudHM9ZnVuY3Rpb24oZSl7aWYoZSl7dmFyIGk9b1tlLnR5cGVdO2kuZm9yRWFjaChmdW5jdGlvbihlKXt0LmFkZEV2ZW50TGlzdGVuZXIoZSx0aGlzKX0sdGhpcyksdGhpcy5fYm91bmRQb2ludGVyRXZlbnRzPWl9fSxzLl91bmJpbmRQb3N0U3RhcnRFdmVudHM9ZnVuY3Rpb24oKXt0aGlzLl9ib3VuZFBvaW50ZXJFdmVudHMmJih0aGlzLl9ib3VuZFBvaW50ZXJFdmVudHMuZm9yRWFjaChmdW5jdGlvbihlKXt0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0aGlzKX0sdGhpcyksZGVsZXRlIHRoaXMuX2JvdW5kUG9pbnRlckV2ZW50cyl9LHMub25tb3VzZW1vdmU9ZnVuY3Rpb24odCl7dGhpcy5fcG9pbnRlck1vdmUodCx0KX0scy5vbnBvaW50ZXJtb3ZlPWZ1bmN0aW9uKHQpe3QucG9pbnRlcklkPT10aGlzLnBvaW50ZXJJZGVudGlmaWVyJiZ0aGlzLl9wb2ludGVyTW92ZSh0LHQpfSxzLm9udG91Y2htb3ZlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0VG91Y2godC5jaGFuZ2VkVG91Y2hlcyk7ZSYmdGhpcy5fcG9pbnRlck1vdmUodCxlKX0scy5fcG9pbnRlck1vdmU9ZnVuY3Rpb24odCxlKXt0aGlzLnBvaW50ZXJNb3ZlKHQsZSl9LHMucG9pbnRlck1vdmU9ZnVuY3Rpb24odCxlKXt0aGlzLmVtaXRFdmVudChcInBvaW50ZXJNb3ZlXCIsW3QsZV0pfSxzLm9ubW91c2V1cD1mdW5jdGlvbih0KXt0aGlzLl9wb2ludGVyVXAodCx0KX0scy5vbnBvaW50ZXJ1cD1mdW5jdGlvbih0KXt0LnBvaW50ZXJJZD09dGhpcy5wb2ludGVySWRlbnRpZmllciYmdGhpcy5fcG9pbnRlclVwKHQsdCl9LHMub250b3VjaGVuZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFRvdWNoKHQuY2hhbmdlZFRvdWNoZXMpO2UmJnRoaXMuX3BvaW50ZXJVcCh0LGUpfSxzLl9wb2ludGVyVXA9ZnVuY3Rpb24odCxlKXt0aGlzLl9wb2ludGVyRG9uZSgpLHRoaXMucG9pbnRlclVwKHQsZSl9LHMucG9pbnRlclVwPWZ1bmN0aW9uKHQsZSl7dGhpcy5lbWl0RXZlbnQoXCJwb2ludGVyVXBcIixbdCxlXSl9LHMuX3BvaW50ZXJEb25lPWZ1bmN0aW9uKCl7dGhpcy5fcG9pbnRlclJlc2V0KCksdGhpcy5fdW5iaW5kUG9zdFN0YXJ0RXZlbnRzKCksdGhpcy5wb2ludGVyRG9uZSgpfSxzLl9wb2ludGVyUmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmlzUG9pbnRlckRvd249ITEsZGVsZXRlIHRoaXMucG9pbnRlcklkZW50aWZpZXJ9LHMucG9pbnRlckRvbmU9aSxzLm9ucG9pbnRlcmNhbmNlbD1mdW5jdGlvbih0KXt0LnBvaW50ZXJJZD09dGhpcy5wb2ludGVySWRlbnRpZmllciYmdGhpcy5fcG9pbnRlckNhbmNlbCh0LHQpfSxzLm9udG91Y2hjYW5jZWw9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRUb3VjaCh0LmNoYW5nZWRUb3VjaGVzKTtlJiZ0aGlzLl9wb2ludGVyQ2FuY2VsKHQsZSl9LHMuX3BvaW50ZXJDYW5jZWw9ZnVuY3Rpb24odCxlKXt0aGlzLl9wb2ludGVyRG9uZSgpLHRoaXMucG9pbnRlckNhbmNlbCh0LGUpfSxzLnBvaW50ZXJDYW5jZWw9ZnVuY3Rpb24odCxlKXt0aGlzLmVtaXRFdmVudChcInBvaW50ZXJDYW5jZWxcIixbdCxlXSl9LG4uZ2V0UG9pbnRlclBvaW50PWZ1bmN0aW9uKHQpe3JldHVybnt4OnQucGFnZVgseTp0LnBhZ2VZfX0sbn0pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcInVuaWRyYWdnZXIvdW5pZHJhZ2dlclwiLFtcInVuaXBvaW50ZXIvdW5pcG9pbnRlclwiXSxmdW5jdGlvbihpKXtyZXR1cm4gZSh0LGkpfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSh0LHJlcXVpcmUoXCJ1bmlwb2ludGVyXCIpKTp0LlVuaWRyYWdnZXI9ZSh0LHQuVW5pcG9pbnRlcil9KHdpbmRvdyxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkoKXt9dmFyIG49aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSk7bi5iaW5kSGFuZGxlcz1mdW5jdGlvbigpe3RoaXMuX2JpbmRIYW5kbGVzKCEwKX0sbi51bmJpbmRIYW5kbGVzPWZ1bmN0aW9uKCl7dGhpcy5fYmluZEhhbmRsZXMoITEpfSxuLl9iaW5kSGFuZGxlcz1mdW5jdGlvbihlKXtlPXZvaWQgMD09PWV8fGU7Zm9yKHZhciBpPWU/XCJhZGRFdmVudExpc3RlbmVyXCI6XCJyZW1vdmVFdmVudExpc3RlbmVyXCIsbj1lP3RoaXMuX3RvdWNoQWN0aW9uVmFsdWU6XCJcIixzPTA7czx0aGlzLmhhbmRsZXMubGVuZ3RoO3MrKyl7dmFyIG89dGhpcy5oYW5kbGVzW3NdO3RoaXMuX2JpbmRTdGFydEV2ZW50KG8sZSksb1tpXShcImNsaWNrXCIsdGhpcyksdC5Qb2ludGVyRXZlbnQmJihvLnN0eWxlLnRvdWNoQWN0aW9uPW4pfX0sbi5fdG91Y2hBY3Rpb25WYWx1ZT1cIm5vbmVcIixuLnBvaW50ZXJEb3duPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5va2F5UG9pbnRlckRvd24odCk7aSYmKHRoaXMucG9pbnRlckRvd25Qb2ludGVyPWUsdC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMucG9pbnRlckRvd25CbHVyKCksdGhpcy5fYmluZFBvc3RTdGFydEV2ZW50cyh0KSx0aGlzLmVtaXRFdmVudChcInBvaW50ZXJEb3duXCIsW3QsZV0pKX07dmFyIHM9e1RFWFRBUkVBOiEwLElOUFVUOiEwLFNFTEVDVDohMCxPUFRJT046ITB9LG89e3JhZGlvOiEwLGNoZWNrYm94OiEwLGJ1dHRvbjohMCxzdWJtaXQ6ITAsaW1hZ2U6ITAsZmlsZTohMH07cmV0dXJuIG4ub2theVBvaW50ZXJEb3duPWZ1bmN0aW9uKHQpe3ZhciBlPXNbdC50YXJnZXQubm9kZU5hbWVdLGk9b1t0LnRhcmdldC50eXBlXSxuPSFlfHxpO3JldHVybiBufHx0aGlzLl9wb2ludGVyUmVzZXQoKSxufSxuLnBvaW50ZXJEb3duQmx1cj1mdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsZT10JiZ0LmJsdXImJnQhPWRvY3VtZW50LmJvZHk7ZSYmdC5ibHVyKCl9LG4ucG9pbnRlck1vdmU9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9kcmFnUG9pbnRlck1vdmUodCxlKTt0aGlzLmVtaXRFdmVudChcInBvaW50ZXJNb3ZlXCIsW3QsZSxpXSksdGhpcy5fZHJhZ01vdmUodCxlLGkpfSxuLl9kcmFnUG9pbnRlck1vdmU9ZnVuY3Rpb24odCxlKXt2YXIgaT17eDplLnBhZ2VYLXRoaXMucG9pbnRlckRvd25Qb2ludGVyLnBhZ2VYLHk6ZS5wYWdlWS10aGlzLnBvaW50ZXJEb3duUG9pbnRlci5wYWdlWX07cmV0dXJuIXRoaXMuaXNEcmFnZ2luZyYmdGhpcy5oYXNEcmFnU3RhcnRlZChpKSYmdGhpcy5fZHJhZ1N0YXJ0KHQsZSksaX0sbi5oYXNEcmFnU3RhcnRlZD1mdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5hYnModC54KT4zfHxNYXRoLmFicyh0LnkpPjN9LG4ucG9pbnRlclVwPWZ1bmN0aW9uKHQsZSl7dGhpcy5lbWl0RXZlbnQoXCJwb2ludGVyVXBcIixbdCxlXSksdGhpcy5fZHJhZ1BvaW50ZXJVcCh0LGUpfSxuLl9kcmFnUG9pbnRlclVwPWZ1bmN0aW9uKHQsZSl7dGhpcy5pc0RyYWdnaW5nP3RoaXMuX2RyYWdFbmQodCxlKTp0aGlzLl9zdGF0aWNDbGljayh0LGUpfSxuLl9kcmFnU3RhcnQ9ZnVuY3Rpb24odCxlKXt0aGlzLmlzRHJhZ2dpbmc9ITAsdGhpcy5pc1ByZXZlbnRpbmdDbGlja3M9ITAsdGhpcy5kcmFnU3RhcnQodCxlKX0sbi5kcmFnU3RhcnQ9ZnVuY3Rpb24odCxlKXt0aGlzLmVtaXRFdmVudChcImRyYWdTdGFydFwiLFt0LGVdKX0sbi5fZHJhZ01vdmU9ZnVuY3Rpb24odCxlLGkpe3RoaXMuaXNEcmFnZ2luZyYmdGhpcy5kcmFnTW92ZSh0LGUsaSl9LG4uZHJhZ01vdmU9ZnVuY3Rpb24odCxlLGkpe3QucHJldmVudERlZmF1bHQoKSx0aGlzLmVtaXRFdmVudChcImRyYWdNb3ZlXCIsW3QsZSxpXSl9LG4uX2RyYWdFbmQ9ZnVuY3Rpb24odCxlKXt0aGlzLmlzRHJhZ2dpbmc9ITEsc2V0VGltZW91dChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLmlzUHJldmVudGluZ0NsaWNrc30uYmluZCh0aGlzKSksdGhpcy5kcmFnRW5kKHQsZSl9LG4uZHJhZ0VuZD1mdW5jdGlvbih0LGUpe3RoaXMuZW1pdEV2ZW50KFwiZHJhZ0VuZFwiLFt0LGVdKX0sbi5vbmNsaWNrPWZ1bmN0aW9uKHQpe3RoaXMuaXNQcmV2ZW50aW5nQ2xpY2tzJiZ0LnByZXZlbnREZWZhdWx0KCl9LG4uX3N0YXRpY0NsaWNrPWZ1bmN0aW9uKHQsZSl7dGhpcy5pc0lnbm9yaW5nTW91c2VVcCYmXCJtb3VzZXVwXCI9PXQudHlwZXx8KHRoaXMuc3RhdGljQ2xpY2sodCxlKSxcIm1vdXNldXBcIiE9dC50eXBlJiYodGhpcy5pc0lnbm9yaW5nTW91c2VVcD0hMCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuaXNJZ25vcmluZ01vdXNlVXB9LmJpbmQodGhpcyksNDAwKSkpfSxuLnN0YXRpY0NsaWNrPWZ1bmN0aW9uKHQsZSl7dGhpcy5lbWl0RXZlbnQoXCJzdGF0aWNDbGlja1wiLFt0LGVdKX0saS5nZXRQb2ludGVyUG9pbnQ9ZS5nZXRQb2ludGVyUG9pbnQsaX0pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImZsaWNraXR5L2pzL2RyYWdcIixbXCIuL2ZsaWNraXR5XCIsXCJ1bmlkcmFnZ2VyL3VuaWRyYWdnZXJcIixcImZpenp5LXVpLXV0aWxzL3V0aWxzXCJdLGZ1bmN0aW9uKGksbixzKXtyZXR1cm4gZSh0LGksbixzKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUodCxyZXF1aXJlKFwiLi9mbGlja2l0eVwiKSxyZXF1aXJlKFwidW5pZHJhZ2dlclwiKSxyZXF1aXJlKFwiZml6enktdWktdXRpbHNcIikpOnQuRmxpY2tpdHk9ZSh0LHQuRmxpY2tpdHksdC5VbmlkcmFnZ2VyLHQuZml6enlVSVV0aWxzKX0od2luZG93LGZ1bmN0aW9uKHQsZSxpLG4pe2Z1bmN0aW9uIHMoKXtyZXR1cm57eDp0LnBhZ2VYT2Zmc2V0LHk6dC5wYWdlWU9mZnNldH19bi5leHRlbmQoZS5kZWZhdWx0cyx7ZHJhZ2dhYmxlOlwiPjFcIixkcmFnVGhyZXNob2xkOjN9KSxlLmNyZWF0ZU1ldGhvZHMucHVzaChcIl9jcmVhdGVEcmFnXCIpO3ZhciBvPWUucHJvdG90eXBlO24uZXh0ZW5kKG8saS5wcm90b3R5cGUpLG8uX3RvdWNoQWN0aW9uVmFsdWU9XCJwYW4teVwiO3ZhciByPVwiY3JlYXRlVG91Y2hcImluIGRvY3VtZW50LGE9ITE7by5fY3JlYXRlRHJhZz1mdW5jdGlvbigpe3RoaXMub24oXCJhY3RpdmF0ZVwiLHRoaXMub25BY3RpdmF0ZURyYWcpLHRoaXMub24oXCJ1aUNoYW5nZVwiLHRoaXMuX3VpQ2hhbmdlRHJhZyksdGhpcy5vbihcImNoaWxkVUlQb2ludGVyRG93blwiLHRoaXMuX2NoaWxkVUlQb2ludGVyRG93bkRyYWcpLHRoaXMub24oXCJkZWFjdGl2YXRlXCIsdGhpcy5vbkRlYWN0aXZhdGVEcmFnKSx0aGlzLm9uKFwiY2VsbENoYW5nZVwiLHRoaXMudXBkYXRlRHJhZ2dhYmxlKSxyJiYhYSYmKHQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLGZ1bmN0aW9uKCl7fSksYT0hMCl9LG8ub25BY3RpdmF0ZURyYWc9ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXM9W3RoaXMudmlld3BvcnRdLHRoaXMuYmluZEhhbmRsZXMoKSx0aGlzLnVwZGF0ZURyYWdnYWJsZSgpfSxvLm9uRGVhY3RpdmF0ZURyYWc9ZnVuY3Rpb24oKXt0aGlzLnVuYmluZEhhbmRsZXMoKSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImlzLWRyYWdnYWJsZVwiKX0sby51cGRhdGVEcmFnZ2FibGU9ZnVuY3Rpb24oKXtcIj4xXCI9PXRoaXMub3B0aW9ucy5kcmFnZ2FibGU/dGhpcy5pc0RyYWdnYWJsZT10aGlzLnNsaWRlcy5sZW5ndGg+MTp0aGlzLmlzRHJhZ2dhYmxlPXRoaXMub3B0aW9ucy5kcmFnZ2FibGUsdGhpcy5pc0RyYWdnYWJsZT90aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImlzLWRyYWdnYWJsZVwiKTp0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImlzLWRyYWdnYWJsZVwiKX0sby5iaW5kRHJhZz1mdW5jdGlvbigpe3RoaXMub3B0aW9ucy5kcmFnZ2FibGU9ITAsdGhpcy51cGRhdGVEcmFnZ2FibGUoKX0sby51bmJpbmREcmFnPWZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmRyYWdnYWJsZT0hMSx0aGlzLnVwZGF0ZURyYWdnYWJsZSgpfSxvLl91aUNoYW5nZURyYWc9ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5pc0ZyZWVTY3JvbGxpbmd9LG8uX2NoaWxkVUlQb2ludGVyRG93bkRyYWc9ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMucG9pbnRlckRvd25Gb2N1cyh0KX0sby5wb2ludGVyRG93bj1mdW5jdGlvbihlLGkpe2lmKCF0aGlzLmlzRHJhZ2dhYmxlKXJldHVybiB2b2lkIHRoaXMuX3BvaW50ZXJEb3duRGVmYXVsdChlLGkpO3ZhciBuPXRoaXMub2theVBvaW50ZXJEb3duKGUpO24mJih0aGlzLl9wb2ludGVyRG93blByZXZlbnREZWZhdWx0KGUpLHRoaXMucG9pbnRlckRvd25Gb2N1cyhlKSxkb2N1bWVudC5hY3RpdmVFbGVtZW50IT10aGlzLmVsZW1lbnQmJnRoaXMucG9pbnRlckRvd25CbHVyKCksdGhpcy5kcmFnWD10aGlzLngsdGhpcy52aWV3cG9ydC5jbGFzc0xpc3QuYWRkKFwiaXMtcG9pbnRlci1kb3duXCIpLHRoaXMucG9pbnRlckRvd25TY3JvbGw9cygpLHQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHRoaXMpLHRoaXMuX3BvaW50ZXJEb3duRGVmYXVsdChlLGkpKX0sby5fcG9pbnRlckRvd25EZWZhdWx0PWZ1bmN0aW9uKHQsZSl7dGhpcy5wb2ludGVyRG93blBvaW50ZXI9ZSx0aGlzLl9iaW5kUG9zdFN0YXJ0RXZlbnRzKHQpLHRoaXMuZGlzcGF0Y2hFdmVudChcInBvaW50ZXJEb3duXCIsdCxbZV0pfTt2YXIgbD17SU5QVVQ6ITAsVEVYVEFSRUE6ITAsU0VMRUNUOiEwfTtyZXR1cm4gby5wb2ludGVyRG93bkZvY3VzPWZ1bmN0aW9uKHQpe3ZhciBlPWxbdC50YXJnZXQubm9kZU5hbWVdO2V8fHRoaXMuZm9jdXMoKX0sby5fcG9pbnRlckRvd25QcmV2ZW50RGVmYXVsdD1mdW5jdGlvbih0KXt2YXIgZT1cInRvdWNoc3RhcnRcIj09dC50eXBlLGk9XCJ0b3VjaFwiPT10LnBvaW50ZXJUeXBlLG49bFt0LnRhcmdldC5ub2RlTmFtZV07ZXx8aXx8bnx8dC5wcmV2ZW50RGVmYXVsdCgpfSxvLmhhc0RyYWdTdGFydGVkPWZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmFicyh0LngpPnRoaXMub3B0aW9ucy5kcmFnVGhyZXNob2xkfSxvLnBvaW50ZXJVcD1mdW5jdGlvbih0LGUpe2RlbGV0ZSB0aGlzLmlzVG91Y2hTY3JvbGxpbmcsdGhpcy52aWV3cG9ydC5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtcG9pbnRlci1kb3duXCIpLHRoaXMuZGlzcGF0Y2hFdmVudChcInBvaW50ZXJVcFwiLHQsW2VdKSx0aGlzLl9kcmFnUG9pbnRlclVwKHQsZSl9LG8ucG9pbnRlckRvbmU9ZnVuY3Rpb24oKXt0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0aGlzKSxkZWxldGUgdGhpcy5wb2ludGVyRG93blNjcm9sbH0sby5kcmFnU3RhcnQ9ZnVuY3Rpb24oZSxpKXt0aGlzLmlzRHJhZ2dhYmxlJiYodGhpcy5kcmFnU3RhcnRQb3NpdGlvbj10aGlzLngsdGhpcy5zdGFydEFuaW1hdGlvbigpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHRoaXMpLHRoaXMuZGlzcGF0Y2hFdmVudChcImRyYWdTdGFydFwiLGUsW2ldKSl9LG8ucG9pbnRlck1vdmU9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9kcmFnUG9pbnRlck1vdmUodCxlKTt0aGlzLmRpc3BhdGNoRXZlbnQoXCJwb2ludGVyTW92ZVwiLHQsW2UsaV0pLHRoaXMuX2RyYWdNb3ZlKHQsZSxpKX0sby5kcmFnTW92ZT1mdW5jdGlvbih0LGUsaSl7aWYodGhpcy5pc0RyYWdnYWJsZSl7dC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMucHJldmlvdXNEcmFnWD10aGlzLmRyYWdYO3ZhciBuPXRoaXMub3B0aW9ucy5yaWdodFRvTGVmdD8tMToxO3RoaXMub3B0aW9ucy53cmFwQXJvdW5kJiYoaS54PWkueCV0aGlzLnNsaWRlYWJsZVdpZHRoKTt2YXIgcz10aGlzLmRyYWdTdGFydFBvc2l0aW9uK2kueCpuO2lmKCF0aGlzLm9wdGlvbnMud3JhcEFyb3VuZCYmdGhpcy5zbGlkZXMubGVuZ3RoKXt2YXIgbz1NYXRoLm1heCgtdGhpcy5zbGlkZXNbMF0udGFyZ2V0LHRoaXMuZHJhZ1N0YXJ0UG9zaXRpb24pO3M9cz5vPy41KihzK28pOnM7dmFyIHI9TWF0aC5taW4oLXRoaXMuZ2V0TGFzdFNsaWRlKCkudGFyZ2V0LHRoaXMuZHJhZ1N0YXJ0UG9zaXRpb24pO3M9czxyPy41KihzK3IpOnN9dGhpcy5kcmFnWD1zLHRoaXMuZHJhZ01vdmVUaW1lPW5ldyBEYXRlLFxudGhpcy5kaXNwYXRjaEV2ZW50KFwiZHJhZ01vdmVcIix0LFtlLGldKX19LG8uZHJhZ0VuZD1mdW5jdGlvbih0LGUpe2lmKHRoaXMuaXNEcmFnZ2FibGUpe3RoaXMub3B0aW9ucy5mcmVlU2Nyb2xsJiYodGhpcy5pc0ZyZWVTY3JvbGxpbmc9ITApO3ZhciBpPXRoaXMuZHJhZ0VuZFJlc3RpbmdTZWxlY3QoKTtpZih0aGlzLm9wdGlvbnMuZnJlZVNjcm9sbCYmIXRoaXMub3B0aW9ucy53cmFwQXJvdW5kKXt2YXIgbj10aGlzLmdldFJlc3RpbmdQb3NpdGlvbigpO3RoaXMuaXNGcmVlU2Nyb2xsaW5nPS1uPnRoaXMuc2xpZGVzWzBdLnRhcmdldCYmLW48dGhpcy5nZXRMYXN0U2xpZGUoKS50YXJnZXR9ZWxzZSB0aGlzLm9wdGlvbnMuZnJlZVNjcm9sbHx8aSE9dGhpcy5zZWxlY3RlZEluZGV4fHwoaSs9dGhpcy5kcmFnRW5kQm9vc3RTZWxlY3QoKSk7ZGVsZXRlIHRoaXMucHJldmlvdXNEcmFnWCx0aGlzLmlzRHJhZ1NlbGVjdD10aGlzLm9wdGlvbnMud3JhcEFyb3VuZCx0aGlzLnNlbGVjdChpKSxkZWxldGUgdGhpcy5pc0RyYWdTZWxlY3QsdGhpcy5kaXNwYXRjaEV2ZW50KFwiZHJhZ0VuZFwiLHQsW2VdKX19LG8uZHJhZ0VuZFJlc3RpbmdTZWxlY3Q9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFJlc3RpbmdQb3NpdGlvbigpLGU9TWF0aC5hYnModGhpcy5nZXRTbGlkZURpc3RhbmNlKC10LHRoaXMuc2VsZWN0ZWRJbmRleCkpLGk9dGhpcy5fZ2V0Q2xvc2VzdFJlc3RpbmcodCxlLDEpLG49dGhpcy5fZ2V0Q2xvc2VzdFJlc3RpbmcodCxlLC0xKSxzPWkuZGlzdGFuY2U8bi5kaXN0YW5jZT9pLmluZGV4Om4uaW5kZXg7cmV0dXJuIHN9LG8uX2dldENsb3Nlc3RSZXN0aW5nPWZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIG49dGhpcy5zZWxlY3RlZEluZGV4LHM9MS8wLG89dGhpcy5vcHRpb25zLmNvbnRhaW4mJiF0aGlzLm9wdGlvbnMud3JhcEFyb3VuZD9mdW5jdGlvbih0LGUpe3JldHVybiB0PD1lfTpmdW5jdGlvbih0LGUpe3JldHVybiB0PGV9O28oZSxzKSYmKG4rPWkscz1lLGU9dGhpcy5nZXRTbGlkZURpc3RhbmNlKC10LG4pLG51bGwhPT1lKTspZT1NYXRoLmFicyhlKTtyZXR1cm57ZGlzdGFuY2U6cyxpbmRleDpuLWl9fSxvLmdldFNsaWRlRGlzdGFuY2U9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLnNsaWRlcy5sZW5ndGgscz10aGlzLm9wdGlvbnMud3JhcEFyb3VuZCYmaT4xLG89cz9uLm1vZHVsbyhlLGkpOmUscj10aGlzLnNsaWRlc1tvXTtpZighcilyZXR1cm4gbnVsbDt2YXIgYT1zP3RoaXMuc2xpZGVhYmxlV2lkdGgqTWF0aC5mbG9vcihlL2kpOjA7cmV0dXJuIHQtKHIudGFyZ2V0K2EpfSxvLmRyYWdFbmRCb29zdFNlbGVjdD1mdW5jdGlvbigpe2lmKHZvaWQgMD09PXRoaXMucHJldmlvdXNEcmFnWHx8IXRoaXMuZHJhZ01vdmVUaW1lfHxuZXcgRGF0ZS10aGlzLmRyYWdNb3ZlVGltZT4xMDApcmV0dXJuIDA7dmFyIHQ9dGhpcy5nZXRTbGlkZURpc3RhbmNlKC10aGlzLmRyYWdYLHRoaXMuc2VsZWN0ZWRJbmRleCksZT10aGlzLnByZXZpb3VzRHJhZ1gtdGhpcy5kcmFnWDtyZXR1cm4gdD4wJiZlPjA/MTp0PDAmJmU8MD8tMTowfSxvLnN0YXRpY0NsaWNrPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5nZXRQYXJlbnRDZWxsKHQudGFyZ2V0KSxuPWkmJmkuZWxlbWVudCxzPWkmJnRoaXMuY2VsbHMuaW5kZXhPZihpKTt0aGlzLmRpc3BhdGNoRXZlbnQoXCJzdGF0aWNDbGlja1wiLHQsW2UsbixzXSl9LG8ub25zY3JvbGw9ZnVuY3Rpb24oKXt2YXIgdD1zKCksZT10aGlzLnBvaW50ZXJEb3duU2Nyb2xsLngtdC54LGk9dGhpcy5wb2ludGVyRG93blNjcm9sbC55LXQueTsoTWF0aC5hYnMoZSk+M3x8TWF0aC5hYnMoaSk+MykmJnRoaXMuX3BvaW50ZXJEb25lKCl9LGV9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJ0YXAtbGlzdGVuZXIvdGFwLWxpc3RlbmVyXCIsW1widW5pcG9pbnRlci91bmlwb2ludGVyXCJdLGZ1bmN0aW9uKGkpe3JldHVybiBlKHQsaSl9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHQscmVxdWlyZShcInVuaXBvaW50ZXJcIikpOnQuVGFwTGlzdGVuZXI9ZSh0LHQuVW5pcG9pbnRlcil9KHdpbmRvdyxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkodCl7dGhpcy5iaW5kVGFwKHQpfXZhciBuPWkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5wcm90b3R5cGUpO3JldHVybiBuLmJpbmRUYXA9ZnVuY3Rpb24odCl7dCYmKHRoaXMudW5iaW5kVGFwKCksdGhpcy50YXBFbGVtZW50PXQsdGhpcy5fYmluZFN0YXJ0RXZlbnQodCwhMCkpfSxuLnVuYmluZFRhcD1mdW5jdGlvbigpe3RoaXMudGFwRWxlbWVudCYmKHRoaXMuX2JpbmRTdGFydEV2ZW50KHRoaXMudGFwRWxlbWVudCwhMCksZGVsZXRlIHRoaXMudGFwRWxlbWVudCl9LG4ucG9pbnRlclVwPWZ1bmN0aW9uKGksbil7aWYoIXRoaXMuaXNJZ25vcmluZ01vdXNlVXB8fFwibW91c2V1cFwiIT1pLnR5cGUpe3ZhciBzPWUuZ2V0UG9pbnRlclBvaW50KG4pLG89dGhpcy50YXBFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHI9dC5wYWdlWE9mZnNldCxhPXQucGFnZVlPZmZzZXQsbD1zLng+PW8ubGVmdCtyJiZzLng8PW8ucmlnaHQrciYmcy55Pj1vLnRvcCthJiZzLnk8PW8uYm90dG9tK2E7aWYobCYmdGhpcy5lbWl0RXZlbnQoXCJ0YXBcIixbaSxuXSksXCJtb3VzZXVwXCIhPWkudHlwZSl7dGhpcy5pc0lnbm9yaW5nTW91c2VVcD0hMDt2YXIgaD10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtkZWxldGUgaC5pc0lnbm9yaW5nTW91c2VVcH0sNDAwKX19fSxuLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnBvaW50ZXJEb25lKCksdGhpcy51bmJpbmRUYXAoKX0saX0pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImZsaWNraXR5L2pzL3ByZXYtbmV4dC1idXR0b25cIixbXCIuL2ZsaWNraXR5XCIsXCJ0YXAtbGlzdGVuZXIvdGFwLWxpc3RlbmVyXCIsXCJmaXp6eS11aS11dGlscy91dGlsc1wiXSxmdW5jdGlvbihpLG4scyl7cmV0dXJuIGUodCxpLG4scyl9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHQscmVxdWlyZShcIi4vZmxpY2tpdHlcIikscmVxdWlyZShcInRhcC1saXN0ZW5lclwiKSxyZXF1aXJlKFwiZml6enktdWktdXRpbHNcIikpOmUodCx0LkZsaWNraXR5LHQuVGFwTGlzdGVuZXIsdC5maXp6eVVJVXRpbHMpfSh3aW5kb3csZnVuY3Rpb24odCxlLGksbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcyh0LGUpe3RoaXMuZGlyZWN0aW9uPXQsdGhpcy5wYXJlbnQ9ZSx0aGlzLl9jcmVhdGUoKX1mdW5jdGlvbiBvKHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0P3Q6XCJNIFwiK3QueDArXCIsNTAgTCBcIit0LngxK1wiLFwiKyh0LnkxKzUwKStcIiBMIFwiK3QueDIrXCIsXCIrKHQueTIrNTApK1wiIEwgXCIrdC54MytcIiw1MCAgTCBcIit0LngyK1wiLFwiKyg1MC10LnkyKStcIiBMIFwiK3QueDErXCIsXCIrKDUwLXQueTEpK1wiIFpcIn12YXIgcj1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI7cy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShpLnByb3RvdHlwZSkscy5wcm90b3R5cGUuX2NyZWF0ZT1mdW5jdGlvbigpe3RoaXMuaXNFbmFibGVkPSEwLHRoaXMuaXNQcmV2aW91cz10aGlzLmRpcmVjdGlvbj09LTE7dmFyIHQ9dGhpcy5wYXJlbnQub3B0aW9ucy5yaWdodFRvTGVmdD8xOi0xO3RoaXMuaXNMZWZ0PXRoaXMuZGlyZWN0aW9uPT10O3ZhciBlPXRoaXMuZWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO2UuY2xhc3NOYW1lPVwiZmxpY2tpdHktYnV0dG9uIGZsaWNraXR5LXByZXYtbmV4dC1idXR0b25cIixlLmNsYXNzTmFtZSs9dGhpcy5pc1ByZXZpb3VzP1wiIHByZXZpb3VzXCI6XCIgbmV4dFwiLGUuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwiYnV0dG9uXCIpLHRoaXMuZGlzYWJsZSgpLGUuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLHRoaXMuaXNQcmV2aW91cz9cIlByZXZpb3VzXCI6XCJOZXh0XCIpO3ZhciBpPXRoaXMuY3JlYXRlU1ZHKCk7ZS5hcHBlbmRDaGlsZChpKSx0aGlzLm9uKFwidGFwXCIsdGhpcy5vblRhcCksdGhpcy5wYXJlbnQub24oXCJzZWxlY3RcIix0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpKSx0aGlzLm9uKFwicG9pbnRlckRvd25cIix0aGlzLnBhcmVudC5jaGlsZFVJUG9pbnRlckRvd24uYmluZCh0aGlzLnBhcmVudCkpfSxzLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbigpe3RoaXMuYmluZFRhcCh0aGlzLmVsZW1lbnQpLHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzKSx0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCl9LHMucHJvdG90eXBlLmRlYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLnBhcmVudC5lbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksaS5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzKX0scy5wcm90b3R5cGUuY3JlYXRlU1ZHPWZ1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHIsXCJzdmdcIik7dC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLFwiZmxpY2tpdHktYnV0dG9uLWljb25cIiksdC5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsXCIwIDAgMTAwIDEwMFwiKTt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMocixcInBhdGhcIiksaT1vKHRoaXMucGFyZW50Lm9wdGlvbnMuYXJyb3dTaGFwZSk7cmV0dXJuIGUuc2V0QXR0cmlidXRlKFwiZFwiLGkpLGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixcImFycm93XCIpLHRoaXMuaXNMZWZ0fHxlLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlKDEwMCwgMTAwKSByb3RhdGUoMTgwKSBcIiksdC5hcHBlbmRDaGlsZChlKSx0fSxzLnByb3RvdHlwZS5vblRhcD1mdW5jdGlvbigpe2lmKHRoaXMuaXNFbmFibGVkKXt0aGlzLnBhcmVudC51aUNoYW5nZSgpO3ZhciB0PXRoaXMuaXNQcmV2aW91cz9cInByZXZpb3VzXCI6XCJuZXh0XCI7dGhpcy5wYXJlbnRbdF0oKX19LHMucHJvdG90eXBlLmhhbmRsZUV2ZW50PW4uaGFuZGxlRXZlbnQscy5wcm90b3R5cGUub25jbGljaz1mdW5jdGlvbih0KXt2YXIgZT1kb2N1bWVudC5hY3RpdmVFbGVtZW50O2UmJmU9PXRoaXMuZWxlbWVudCYmdGhpcy5vblRhcCh0LHQpfSxzLnByb3RvdHlwZS5lbmFibGU9ZnVuY3Rpb24oKXt0aGlzLmlzRW5hYmxlZHx8KHRoaXMuZWxlbWVudC5kaXNhYmxlZD0hMSx0aGlzLmlzRW5hYmxlZD0hMCl9LHMucHJvdG90eXBlLmRpc2FibGU9ZnVuY3Rpb24oKXt0aGlzLmlzRW5hYmxlZCYmKHRoaXMuZWxlbWVudC5kaXNhYmxlZD0hMCx0aGlzLmlzRW5hYmxlZD0hMSl9LHMucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LnNsaWRlcztpZih0aGlzLnBhcmVudC5vcHRpb25zLndyYXBBcm91bmQmJnQubGVuZ3RoPjEpcmV0dXJuIHZvaWQgdGhpcy5lbmFibGUoKTt2YXIgZT10Lmxlbmd0aD90Lmxlbmd0aC0xOjAsaT10aGlzLmlzUHJldmlvdXM/MDplLG49dGhpcy5wYXJlbnQuc2VsZWN0ZWRJbmRleD09aT9cImRpc2FibGVcIjpcImVuYWJsZVwiO3RoaXNbbl0oKX0scy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpfSxuLmV4dGVuZChlLmRlZmF1bHRzLHtwcmV2TmV4dEJ1dHRvbnM6ITAsYXJyb3dTaGFwZTp7eDA6MTAseDE6NjAseTE6NTAseDI6NzAseTI6NDAseDM6MzB9fSksZS5jcmVhdGVNZXRob2RzLnB1c2goXCJfY3JlYXRlUHJldk5leHRCdXR0b25zXCIpO3ZhciBhPWUucHJvdG90eXBlO3JldHVybiBhLl9jcmVhdGVQcmV2TmV4dEJ1dHRvbnM9ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMucHJldk5leHRCdXR0b25zJiYodGhpcy5wcmV2QnV0dG9uPW5ldyBzKCgtMSksdGhpcyksdGhpcy5uZXh0QnV0dG9uPW5ldyBzKDEsdGhpcyksdGhpcy5vbihcImFjdGl2YXRlXCIsdGhpcy5hY3RpdmF0ZVByZXZOZXh0QnV0dG9ucykpfSxhLmFjdGl2YXRlUHJldk5leHRCdXR0b25zPWZ1bmN0aW9uKCl7dGhpcy5wcmV2QnV0dG9uLmFjdGl2YXRlKCksdGhpcy5uZXh0QnV0dG9uLmFjdGl2YXRlKCksdGhpcy5vbihcImRlYWN0aXZhdGVcIix0aGlzLmRlYWN0aXZhdGVQcmV2TmV4dEJ1dHRvbnMpfSxhLmRlYWN0aXZhdGVQcmV2TmV4dEJ1dHRvbnM9ZnVuY3Rpb24oKXt0aGlzLnByZXZCdXR0b24uZGVhY3RpdmF0ZSgpLHRoaXMubmV4dEJ1dHRvbi5kZWFjdGl2YXRlKCksdGhpcy5vZmYoXCJkZWFjdGl2YXRlXCIsdGhpcy5kZWFjdGl2YXRlUHJldk5leHRCdXR0b25zKX0sZS5QcmV2TmV4dEJ1dHRvbj1zLGV9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJmbGlja2l0eS9qcy9wYWdlLWRvdHNcIixbXCIuL2ZsaWNraXR5XCIsXCJ0YXAtbGlzdGVuZXIvdGFwLWxpc3RlbmVyXCIsXCJmaXp6eS11aS11dGlscy91dGlsc1wiXSxmdW5jdGlvbihpLG4scyl7cmV0dXJuIGUodCxpLG4scyl9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHQscmVxdWlyZShcIi4vZmxpY2tpdHlcIikscmVxdWlyZShcInRhcC1saXN0ZW5lclwiKSxyZXF1aXJlKFwiZml6enktdWktdXRpbHNcIikpOmUodCx0LkZsaWNraXR5LHQuVGFwTGlzdGVuZXIsdC5maXp6eVVJVXRpbHMpfSh3aW5kb3csZnVuY3Rpb24odCxlLGksbil7ZnVuY3Rpb24gcyh0KXt0aGlzLnBhcmVudD10LHRoaXMuX2NyZWF0ZSgpfXMucHJvdG90eXBlPW5ldyBpLHMucHJvdG90eXBlLl9jcmVhdGU9ZnVuY3Rpb24oKXt0aGlzLmhvbGRlcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib2xcIiksdGhpcy5ob2xkZXIuY2xhc3NOYW1lPVwiZmxpY2tpdHktcGFnZS1kb3RzXCIsdGhpcy5kb3RzPVtdLHRoaXMub24oXCJ0YXBcIix0aGlzLm9uVGFwKSx0aGlzLm9uKFwicG9pbnRlckRvd25cIix0aGlzLnBhcmVudC5jaGlsZFVJUG9pbnRlckRvd24uYmluZCh0aGlzLnBhcmVudCkpfSxzLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbigpe3RoaXMuc2V0RG90cygpLHRoaXMuYmluZFRhcCh0aGlzLmhvbGRlciksdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmhvbGRlcil9LHMucHJvdG90eXBlLmRlYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLnBhcmVudC5lbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuaG9sZGVyKSxpLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyl9LHMucHJvdG90eXBlLnNldERvdHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudC5zbGlkZXMubGVuZ3RoLXRoaXMuZG90cy5sZW5ndGg7dD4wP3RoaXMuYWRkRG90cyh0KTp0PDAmJnRoaXMucmVtb3ZlRG90cygtdCl9LHMucHJvdG90eXBlLmFkZERvdHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxpPVtdLG49dGhpcy5kb3RzLmxlbmd0aCxzPW4rdCxvPW47bzxzO28rKyl7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO3IuY2xhc3NOYW1lPVwiZG90XCIsci5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsXCJQYWdlIGRvdCBcIisobysxKSksZS5hcHBlbmRDaGlsZChyKSxpLnB1c2gocil9dGhpcy5ob2xkZXIuYXBwZW5kQ2hpbGQoZSksdGhpcy5kb3RzPXRoaXMuZG90cy5jb25jYXQoaSl9LHMucHJvdG90eXBlLnJlbW92ZURvdHM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5kb3RzLnNwbGljZSh0aGlzLmRvdHMubGVuZ3RoLXQsdCk7ZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3RoaXMuaG9sZGVyLnJlbW92ZUNoaWxkKHQpfSx0aGlzKX0scy5wcm90b3R5cGUudXBkYXRlU2VsZWN0ZWQ9ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVkRG90JiYodGhpcy5zZWxlY3RlZERvdC5jbGFzc05hbWU9XCJkb3RcIix0aGlzLnNlbGVjdGVkRG90LnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtY3VycmVudFwiKSksdGhpcy5kb3RzLmxlbmd0aCYmKHRoaXMuc2VsZWN0ZWREb3Q9dGhpcy5kb3RzW3RoaXMucGFyZW50LnNlbGVjdGVkSW5kZXhdLHRoaXMuc2VsZWN0ZWREb3QuY2xhc3NOYW1lPVwiZG90IGlzLXNlbGVjdGVkXCIsdGhpcy5zZWxlY3RlZERvdC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWN1cnJlbnRcIixcInN0ZXBcIikpfSxzLnByb3RvdHlwZS5vblRhcD1mdW5jdGlvbih0KXt2YXIgZT10LnRhcmdldDtpZihcIkxJXCI9PWUubm9kZU5hbWUpe3RoaXMucGFyZW50LnVpQ2hhbmdlKCk7dmFyIGk9dGhpcy5kb3RzLmluZGV4T2YoZSk7dGhpcy5wYXJlbnQuc2VsZWN0KGkpfX0scy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpfSxlLlBhZ2VEb3RzPXMsbi5leHRlbmQoZS5kZWZhdWx0cyx7cGFnZURvdHM6ITB9KSxlLmNyZWF0ZU1ldGhvZHMucHVzaChcIl9jcmVhdGVQYWdlRG90c1wiKTt2YXIgbz1lLnByb3RvdHlwZTtyZXR1cm4gby5fY3JlYXRlUGFnZURvdHM9ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMucGFnZURvdHMmJih0aGlzLnBhZ2VEb3RzPW5ldyBzKHRoaXMpLHRoaXMub24oXCJhY3RpdmF0ZVwiLHRoaXMuYWN0aXZhdGVQYWdlRG90cyksdGhpcy5vbihcInNlbGVjdFwiLHRoaXMudXBkYXRlU2VsZWN0ZWRQYWdlRG90cyksdGhpcy5vbihcImNlbGxDaGFuZ2VcIix0aGlzLnVwZGF0ZVBhZ2VEb3RzKSx0aGlzLm9uKFwicmVzaXplXCIsdGhpcy51cGRhdGVQYWdlRG90cyksdGhpcy5vbihcImRlYWN0aXZhdGVcIix0aGlzLmRlYWN0aXZhdGVQYWdlRG90cykpfSxvLmFjdGl2YXRlUGFnZURvdHM9ZnVuY3Rpb24oKXt0aGlzLnBhZ2VEb3RzLmFjdGl2YXRlKCl9LG8udXBkYXRlU2VsZWN0ZWRQYWdlRG90cz1mdW5jdGlvbigpe3RoaXMucGFnZURvdHMudXBkYXRlU2VsZWN0ZWQoKX0sby51cGRhdGVQYWdlRG90cz1mdW5jdGlvbigpe3RoaXMucGFnZURvdHMuc2V0RG90cygpfSxvLmRlYWN0aXZhdGVQYWdlRG90cz1mdW5jdGlvbigpe3RoaXMucGFnZURvdHMuZGVhY3RpdmF0ZSgpfSxlLlBhZ2VEb3RzPXMsZX0pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImZsaWNraXR5L2pzL3BsYXllclwiLFtcImV2LWVtaXR0ZXIvZXYtZW1pdHRlclwiLFwiZml6enktdWktdXRpbHMvdXRpbHNcIixcIi4vZmxpY2tpdHlcIl0sZnVuY3Rpb24odCxpLG4pe3JldHVybiBlKHQsaSxuKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUocmVxdWlyZShcImV2LWVtaXR0ZXJcIikscmVxdWlyZShcImZpenp5LXVpLXV0aWxzXCIpLHJlcXVpcmUoXCIuL2ZsaWNraXR5XCIpKTplKHQuRXZFbWl0dGVyLHQuZml6enlVSVV0aWxzLHQuRmxpY2tpdHkpfSh3aW5kb3csZnVuY3Rpb24odCxlLGkpe2Z1bmN0aW9uIG4odCl7dGhpcy5wYXJlbnQ9dCx0aGlzLnN0YXRlPVwic3RvcHBlZFwiLHRoaXMub25WaXNpYmlsaXR5Q2hhbmdlPXRoaXMudmlzaWJpbGl0eUNoYW5nZS5iaW5kKHRoaXMpLHRoaXMub25WaXNpYmlsaXR5UGxheT10aGlzLnZpc2liaWxpdHlQbGF5LmJpbmQodGhpcyl9bi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0LnByb3RvdHlwZSksbi5wcm90b3R5cGUucGxheT1mdW5jdGlvbigpe2lmKFwicGxheWluZ1wiIT10aGlzLnN0YXRlKXt2YXIgdD1kb2N1bWVudC5oaWRkZW47aWYodClyZXR1cm4gdm9pZCBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLHRoaXMub25WaXNpYmlsaXR5UGxheSk7dGhpcy5zdGF0ZT1cInBsYXlpbmdcIixkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLHRoaXMub25WaXNpYmlsaXR5Q2hhbmdlKSx0aGlzLnRpY2soKX19LG4ucHJvdG90eXBlLnRpY2s9ZnVuY3Rpb24oKXtpZihcInBsYXlpbmdcIj09dGhpcy5zdGF0ZSl7dmFyIHQ9dGhpcy5wYXJlbnQub3B0aW9ucy5hdXRvUGxheTt0PVwibnVtYmVyXCI9PXR5cGVvZiB0P3Q6M2UzO3ZhciBlPXRoaXM7dGhpcy5jbGVhcigpLHRoaXMudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5wYXJlbnQubmV4dCghMCksZS50aWNrKCl9LHQpfX0sbi5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuc3RhdGU9XCJzdG9wcGVkXCIsdGhpcy5jbGVhcigpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsdGhpcy5vblZpc2liaWxpdHlDaGFuZ2UpfSxuLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpfSxuLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe1wicGxheWluZ1wiPT10aGlzLnN0YXRlJiYodGhpcy5zdGF0ZT1cInBhdXNlZFwiLHRoaXMuY2xlYXIoKSl9LG4ucHJvdG90eXBlLnVucGF1c2U9ZnVuY3Rpb24oKXtcInBhdXNlZFwiPT10aGlzLnN0YXRlJiZ0aGlzLnBsYXkoKX0sbi5wcm90b3R5cGUudmlzaWJpbGl0eUNoYW5nZT1mdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmhpZGRlbjt0aGlzW3Q/XCJwYXVzZVwiOlwidW5wYXVzZVwiXSgpfSxuLnByb3RvdHlwZS52aXNpYmlsaXR5UGxheT1mdW5jdGlvbigpe3RoaXMucGxheSgpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsdGhpcy5vblZpc2liaWxpdHlQbGF5KX0sZS5leHRlbmQoaS5kZWZhdWx0cyx7cGF1c2VBdXRvUGxheU9uSG92ZXI6ITB9KSxpLmNyZWF0ZU1ldGhvZHMucHVzaChcIl9jcmVhdGVQbGF5ZXJcIik7dmFyIHM9aS5wcm90b3R5cGU7cmV0dXJuIHMuX2NyZWF0ZVBsYXllcj1mdW5jdGlvbigpe3RoaXMucGxheWVyPW5ldyBuKHRoaXMpLHRoaXMub24oXCJhY3RpdmF0ZVwiLHRoaXMuYWN0aXZhdGVQbGF5ZXIpLHRoaXMub24oXCJ1aUNoYW5nZVwiLHRoaXMuc3RvcFBsYXllciksdGhpcy5vbihcInBvaW50ZXJEb3duXCIsdGhpcy5zdG9wUGxheWVyKSx0aGlzLm9uKFwiZGVhY3RpdmF0ZVwiLHRoaXMuZGVhY3RpdmF0ZVBsYXllcil9LHMuYWN0aXZhdGVQbGF5ZXI9ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuYXV0b1BsYXkmJih0aGlzLnBsYXllci5wbGF5KCksdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsdGhpcykpfSxzLnBsYXlQbGF5ZXI9ZnVuY3Rpb24oKXt0aGlzLnBsYXllci5wbGF5KCl9LHMuc3RvcFBsYXllcj1mdW5jdGlvbigpe3RoaXMucGxheWVyLnN0b3AoKX0scy5wYXVzZVBsYXllcj1mdW5jdGlvbigpe3RoaXMucGxheWVyLnBhdXNlKCl9LHMudW5wYXVzZVBsYXllcj1mdW5jdGlvbigpe3RoaXMucGxheWVyLnVucGF1c2UoKX0scy5kZWFjdGl2YXRlUGxheWVyPWZ1bmN0aW9uKCl7dGhpcy5wbGF5ZXIuc3RvcCgpLHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLHRoaXMpfSxzLm9ubW91c2VlbnRlcj1mdW5jdGlvbigpe3RoaXMub3B0aW9ucy5wYXVzZUF1dG9QbGF5T25Ib3ZlciYmKHRoaXMucGxheWVyLnBhdXNlKCksdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsdGhpcykpfSxzLm9ubW91c2VsZWF2ZT1mdW5jdGlvbigpe3RoaXMucGxheWVyLnVucGF1c2UoKSx0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIix0aGlzKX0saS5QbGF5ZXI9bixpfSksZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZmxpY2tpdHkvanMvYWRkLXJlbW92ZS1jZWxsXCIsW1wiLi9mbGlja2l0eVwiLFwiZml6enktdWktdXRpbHMvdXRpbHNcIl0sZnVuY3Rpb24oaSxuKXtyZXR1cm4gZSh0LGksbil9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHQscmVxdWlyZShcIi4vZmxpY2tpdHlcIikscmVxdWlyZShcImZpenp5LXVpLXV0aWxzXCIpKTplKHQsdC5GbGlja2l0eSx0LmZpenp5VUlVdGlscyl9KHdpbmRvdyxmdW5jdGlvbih0LGUsaSl7ZnVuY3Rpb24gbih0KXt2YXIgZT1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0KXtlLmFwcGVuZENoaWxkKHQuZWxlbWVudCl9KSxlfXZhciBzPWUucHJvdG90eXBlO3JldHVybiBzLmluc2VydD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX21ha2VDZWxscyh0KTtpZihpJiZpLmxlbmd0aCl7dmFyIHM9dGhpcy5jZWxscy5sZW5ndGg7ZT12b2lkIDA9PT1lP3M6ZTt2YXIgbz1uKGkpLHI9ZT09cztpZihyKXRoaXMuc2xpZGVyLmFwcGVuZENoaWxkKG8pO2Vsc2V7dmFyIGE9dGhpcy5jZWxsc1tlXS5lbGVtZW50O3RoaXMuc2xpZGVyLmluc2VydEJlZm9yZShvLGEpfWlmKDA9PT1lKXRoaXMuY2VsbHM9aS5jb25jYXQodGhpcy5jZWxscyk7ZWxzZSBpZihyKXRoaXMuY2VsbHM9dGhpcy5jZWxscy5jb25jYXQoaSk7ZWxzZXt2YXIgbD10aGlzLmNlbGxzLnNwbGljZShlLHMtZSk7dGhpcy5jZWxscz10aGlzLmNlbGxzLmNvbmNhdChpKS5jb25jYXQobCl9dGhpcy5fc2l6ZUNlbGxzKGkpLHRoaXMuY2VsbENoYW5nZShlLCEwKX19LHMuYXBwZW5kPWZ1bmN0aW9uKHQpe3RoaXMuaW5zZXJ0KHQsdGhpcy5jZWxscy5sZW5ndGgpfSxzLnByZXBlbmQ9ZnVuY3Rpb24odCl7dGhpcy5pbnNlcnQodCwwKX0scy5yZW1vdmU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRDZWxscyh0KTtpZihlJiZlLmxlbmd0aCl7dmFyIG49dGhpcy5jZWxscy5sZW5ndGgtMTtlLmZvckVhY2goZnVuY3Rpb24odCl7dC5yZW1vdmUoKTt2YXIgZT10aGlzLmNlbGxzLmluZGV4T2YodCk7bj1NYXRoLm1pbihlLG4pLGkucmVtb3ZlRnJvbSh0aGlzLmNlbGxzLHQpfSx0aGlzKSx0aGlzLmNlbGxDaGFuZ2UobiwhMCl9fSxzLmNlbGxTaXplQ2hhbmdlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0Q2VsbCh0KTtpZihlKXtlLmdldFNpemUoKTt2YXIgaT10aGlzLmNlbGxzLmluZGV4T2YoZSk7dGhpcy5jZWxsQ2hhbmdlKGkpfX0scy5jZWxsQ2hhbmdlPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5zZWxlY3RlZEVsZW1lbnQ7dGhpcy5fcG9zaXRpb25DZWxscyh0KSx0aGlzLl9nZXRXcmFwU2hpZnRDZWxscygpLHRoaXMuc2V0R2FsbGVyeVNpemUoKTt2YXIgbj10aGlzLmdldENlbGwoaSk7biYmKHRoaXMuc2VsZWN0ZWRJbmRleD10aGlzLmdldENlbGxTbGlkZUluZGV4KG4pKSx0aGlzLnNlbGVjdGVkSW5kZXg9TWF0aC5taW4odGhpcy5zbGlkZXMubGVuZ3RoLTEsdGhpcy5zZWxlY3RlZEluZGV4KSx0aGlzLmVtaXRFdmVudChcImNlbGxDaGFuZ2VcIixbdF0pLHRoaXMuc2VsZWN0KHRoaXMuc2VsZWN0ZWRJbmRleCksZSYmdGhpcy5wb3NpdGlvblNsaWRlckF0U2VsZWN0ZWQoKX0sZX0pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImZsaWNraXR5L2pzL2xhenlsb2FkXCIsW1wiLi9mbGlja2l0eVwiLFwiZml6enktdWktdXRpbHMvdXRpbHNcIl0sZnVuY3Rpb24oaSxuKXtyZXR1cm4gZSh0LGksbil9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHQscmVxdWlyZShcIi4vZmxpY2tpdHlcIikscmVxdWlyZShcImZpenp5LXVpLXV0aWxzXCIpKTplKHQsdC5GbGlja2l0eSx0LmZpenp5VUlVdGlscyl9KHdpbmRvdyxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtpZihcIklNR1wiPT10Lm5vZGVOYW1lKXt2YXIgZT10LmdldEF0dHJpYnV0ZShcImRhdGEtZmxpY2tpdHktbGF6eWxvYWRcIiksbj10LmdldEF0dHJpYnV0ZShcImRhdGEtZmxpY2tpdHktbGF6eWxvYWQtc3JjXCIpLHM9dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWZsaWNraXR5LWxhenlsb2FkLXNyY3NldFwiKTtpZihlfHxufHxzKXJldHVyblt0XX12YXIgbz1cImltZ1tkYXRhLWZsaWNraXR5LWxhenlsb2FkXSwgaW1nW2RhdGEtZmxpY2tpdHktbGF6eWxvYWQtc3JjXSwgaW1nW2RhdGEtZmxpY2tpdHktbGF6eWxvYWQtc3Jjc2V0XVwiLHI9dC5xdWVyeVNlbGVjdG9yQWxsKG8pO3JldHVybiBpLm1ha2VBcnJheShyKX1mdW5jdGlvbiBzKHQsZSl7dGhpcy5pbWc9dCx0aGlzLmZsaWNraXR5PWUsdGhpcy5sb2FkKCl9ZS5jcmVhdGVNZXRob2RzLnB1c2goXCJfY3JlYXRlTGF6eWxvYWRcIik7dmFyIG89ZS5wcm90b3R5cGU7cmV0dXJuIG8uX2NyZWF0ZUxhenlsb2FkPWZ1bmN0aW9uKCl7dGhpcy5vbihcInNlbGVjdFwiLHRoaXMubGF6eUxvYWQpfSxvLmxhenlMb2FkPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmxhenlMb2FkO2lmKHQpe3ZhciBlPVwibnVtYmVyXCI9PXR5cGVvZiB0P3Q6MCxpPXRoaXMuZ2V0QWRqYWNlbnRDZWxsRWxlbWVudHMoZSksbz1bXTtpLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9bih0KTtvPW8uY29uY2F0KGUpfSksby5mb3JFYWNoKGZ1bmN0aW9uKHQpe25ldyBzKHQsdGhpcyl9LHRoaXMpfX0scy5wcm90b3R5cGUuaGFuZGxlRXZlbnQ9aS5oYW5kbGVFdmVudCxzLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKCl7dGhpcy5pbWcuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0aGlzKSx0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIix0aGlzKTt2YXIgdD10aGlzLmltZy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWZsaWNraXR5LWxhenlsb2FkXCIpfHx0aGlzLmltZy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWZsaWNraXR5LWxhenlsb2FkLXNyY1wiKSxlPXRoaXMuaW1nLmdldEF0dHJpYnV0ZShcImRhdGEtZmxpY2tpdHktbGF6eWxvYWQtc3Jjc2V0XCIpO3RoaXMuaW1nLnNyYz10LGUmJnRoaXMuaW1nLnNldEF0dHJpYnV0ZShcInNyY3NldFwiLGUpLHRoaXMuaW1nLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtZmxpY2tpdHktbGF6eWxvYWRcIiksdGhpcy5pbWcucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1mbGlja2l0eS1sYXp5bG9hZC1zcmNcIiksdGhpcy5pbWcucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1mbGlja2l0eS1sYXp5bG9hZC1zcmNzZXRcIil9LHMucHJvdG90eXBlLm9ubG9hZD1mdW5jdGlvbih0KXt0aGlzLmNvbXBsZXRlKHQsXCJmbGlja2l0eS1sYXp5bG9hZGVkXCIpfSxzLnByb3RvdHlwZS5vbmVycm9yPWZ1bmN0aW9uKHQpe3RoaXMuY29tcGxldGUodCxcImZsaWNraXR5LWxhenllcnJvclwiKX0scy5wcm90b3R5cGUuY29tcGxldGU9ZnVuY3Rpb24odCxlKXt0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLHRoaXMpLHRoaXMuaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHRoaXMpO3ZhciBpPXRoaXMuZmxpY2tpdHkuZ2V0UGFyZW50Q2VsbCh0aGlzLmltZyksbj1pJiZpLmVsZW1lbnQ7dGhpcy5mbGlja2l0eS5jZWxsU2l6ZUNoYW5nZShuKSx0aGlzLmltZy5jbGFzc0xpc3QuYWRkKGUpLHRoaXMuZmxpY2tpdHkuZGlzcGF0Y2hFdmVudChcImxhenlMb2FkXCIsdCxuKX0sZS5MYXp5TG9hZGVyPXMsZX0pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImZsaWNraXR5L2pzL2luZGV4XCIsW1wiLi9mbGlja2l0eVwiLFwiLi9kcmFnXCIsXCIuL3ByZXYtbmV4dC1idXR0b25cIixcIi4vcGFnZS1kb3RzXCIsXCIuL3BsYXllclwiLFwiLi9hZGQtcmVtb3ZlLWNlbGxcIixcIi4vbGF6eWxvYWRcIl0sZSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHMmJihtb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCIuL2ZsaWNraXR5XCIpLHJlcXVpcmUoXCIuL2RyYWdcIikscmVxdWlyZShcIi4vcHJldi1uZXh0LWJ1dHRvblwiKSxyZXF1aXJlKFwiLi9wYWdlLWRvdHNcIikscmVxdWlyZShcIi4vcGxheWVyXCIpLHJlcXVpcmUoXCIuL2FkZC1yZW1vdmUtY2VsbFwiKSxyZXF1aXJlKFwiLi9sYXp5bG9hZFwiKSkpfSh3aW5kb3csZnVuY3Rpb24odCl7cmV0dXJuIHR9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJmbGlja2l0eS1hcy1uYXYtZm9yL2FzLW5hdi1mb3JcIixbXCJmbGlja2l0eS9qcy9pbmRleFwiLFwiZml6enktdWktdXRpbHMvdXRpbHNcIl0sZSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKFwiZmxpY2tpdHlcIikscmVxdWlyZShcImZpenp5LXVpLXV0aWxzXCIpKTp0LkZsaWNraXR5PWUodC5GbGlja2l0eSx0LmZpenp5VUlVdGlscyl9KHdpbmRvdyxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkodCxlLGkpe3JldHVybihlLXQpKmkrdH10LmNyZWF0ZU1ldGhvZHMucHVzaChcIl9jcmVhdGVBc05hdkZvclwiKTt2YXIgbj10LnByb3RvdHlwZTtyZXR1cm4gbi5fY3JlYXRlQXNOYXZGb3I9ZnVuY3Rpb24oKXt0aGlzLm9uKFwiYWN0aXZhdGVcIix0aGlzLmFjdGl2YXRlQXNOYXZGb3IpLHRoaXMub24oXCJkZWFjdGl2YXRlXCIsdGhpcy5kZWFjdGl2YXRlQXNOYXZGb3IpLHRoaXMub24oXCJkZXN0cm95XCIsdGhpcy5kZXN0cm95QXNOYXZGb3IpO3ZhciB0PXRoaXMub3B0aW9ucy5hc05hdkZvcjtpZih0KXt2YXIgZT10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtlLnNldE5hdkNvbXBhbmlvbih0KX0pfX0sbi5zZXROYXZDb21wYW5pb249ZnVuY3Rpb24oaSl7aT1lLmdldFF1ZXJ5RWxlbWVudChpKTt2YXIgbj10LmRhdGEoaSk7aWYobiYmbiE9dGhpcyl7dGhpcy5uYXZDb21wYW5pb249bjt2YXIgcz10aGlzO3RoaXMub25OYXZDb21wYW5pb25TZWxlY3Q9ZnVuY3Rpb24oKXtzLm5hdkNvbXBhbmlvblNlbGVjdCgpfSxuLm9uKFwic2VsZWN0XCIsdGhpcy5vbk5hdkNvbXBhbmlvblNlbGVjdCksdGhpcy5vbihcInN0YXRpY0NsaWNrXCIsdGhpcy5vbk5hdlN0YXRpY0NsaWNrKSx0aGlzLm5hdkNvbXBhbmlvblNlbGVjdCghMCl9fSxuLm5hdkNvbXBhbmlvblNlbGVjdD1mdW5jdGlvbih0KXtpZih0aGlzLm5hdkNvbXBhbmlvbil7dmFyIGU9dGhpcy5uYXZDb21wYW5pb24uc2VsZWN0ZWRDZWxsc1swXSxuPXRoaXMubmF2Q29tcGFuaW9uLmNlbGxzLmluZGV4T2YoZSkscz1uK3RoaXMubmF2Q29tcGFuaW9uLnNlbGVjdGVkQ2VsbHMubGVuZ3RoLTEsbz1NYXRoLmZsb29yKGkobixzLHRoaXMubmF2Q29tcGFuaW9uLmNlbGxBbGlnbikpO2lmKHRoaXMuc2VsZWN0Q2VsbChvLCExLHQpLHRoaXMucmVtb3ZlTmF2U2VsZWN0ZWRFbGVtZW50cygpLCEobz49dGhpcy5jZWxscy5sZW5ndGgpKXt2YXIgcj10aGlzLmNlbGxzLnNsaWNlKG4scysxKTt0aGlzLm5hdlNlbGVjdGVkRWxlbWVudHM9ci5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuZWxlbWVudH0pLHRoaXMuY2hhbmdlTmF2U2VsZWN0ZWRDbGFzcyhcImFkZFwiKX19fSxuLmNoYW5nZU5hdlNlbGVjdGVkQ2xhc3M9ZnVuY3Rpb24odCl7dGhpcy5uYXZTZWxlY3RlZEVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5jbGFzc0xpc3RbdF0oXCJpcy1uYXYtc2VsZWN0ZWRcIil9KX0sbi5hY3RpdmF0ZUFzTmF2Rm9yPWZ1bmN0aW9uKCl7dGhpcy5uYXZDb21wYW5pb25TZWxlY3QoITApfSxuLnJlbW92ZU5hdlNlbGVjdGVkRWxlbWVudHM9ZnVuY3Rpb24oKXt0aGlzLm5hdlNlbGVjdGVkRWxlbWVudHMmJih0aGlzLmNoYW5nZU5hdlNlbGVjdGVkQ2xhc3MoXCJyZW1vdmVcIiksZGVsZXRlIHRoaXMubmF2U2VsZWN0ZWRFbGVtZW50cyl9LG4ub25OYXZTdGF0aWNDbGljaz1mdW5jdGlvbih0LGUsaSxuKXtcIm51bWJlclwiPT10eXBlb2YgbiYmdGhpcy5uYXZDb21wYW5pb24uc2VsZWN0Q2VsbChuKX0sbi5kZWFjdGl2YXRlQXNOYXZGb3I9ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZU5hdlNlbGVjdGVkRWxlbWVudHMoKX0sbi5kZXN0cm95QXNOYXZGb3I9ZnVuY3Rpb24oKXt0aGlzLm5hdkNvbXBhbmlvbiYmKHRoaXMubmF2Q29tcGFuaW9uLm9mZihcInNlbGVjdFwiLHRoaXMub25OYXZDb21wYW5pb25TZWxlY3QpLHRoaXMub2ZmKFwic3RhdGljQ2xpY2tcIix0aGlzLm9uTmF2U3RhdGljQ2xpY2spLGRlbGV0ZSB0aGlzLm5hdkNvbXBhbmlvbil9LHR9KSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJpbWFnZXNsb2FkZWQvaW1hZ2VzbG9hZGVkXCIsW1wiZXYtZW1pdHRlci9ldi1lbWl0dGVyXCJdLGZ1bmN0aW9uKGkpe3JldHVybiBlKHQsaSl9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHQscmVxdWlyZShcImV2LWVtaXR0ZXJcIikpOnQuaW1hZ2VzTG9hZGVkPWUodCx0LkV2RW1pdHRlcil9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBpKHQsZSl7Zm9yKHZhciBpIGluIGUpdFtpXT1lW2ldO3JldHVybiB0fWZ1bmN0aW9uIG4odCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdDt2YXIgZT1cIm9iamVjdFwiPT10eXBlb2YgdCYmXCJudW1iZXJcIj09dHlwZW9mIHQubGVuZ3RoO3JldHVybiBlP2guY2FsbCh0KTpbdF19ZnVuY3Rpb24gcyh0LGUsbyl7aWYoISh0aGlzIGluc3RhbmNlb2YgcykpcmV0dXJuIG5ldyBzKHQsZSxvKTt2YXIgcj10O3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0JiYocj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHQpKSxyPyh0aGlzLmVsZW1lbnRzPW4ociksdGhpcy5vcHRpb25zPWkoe30sdGhpcy5vcHRpb25zKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlP289ZTppKHRoaXMub3B0aW9ucyxlKSxvJiZ0aGlzLm9uKFwiYWx3YXlzXCIsbyksdGhpcy5nZXRJbWFnZXMoKSxhJiYodGhpcy5qcURlZmVycmVkPW5ldyBhLkRlZmVycmVkKSx2b2lkIHNldFRpbWVvdXQodGhpcy5jaGVjay5iaW5kKHRoaXMpKSk6dm9pZCBsLmVycm9yKFwiQmFkIGVsZW1lbnQgZm9yIGltYWdlc0xvYWRlZCBcIisocnx8dCkpfWZ1bmN0aW9uIG8odCl7dGhpcy5pbWc9dH1mdW5jdGlvbiByKHQsZSl7dGhpcy51cmw9dCx0aGlzLmVsZW1lbnQ9ZSx0aGlzLmltZz1uZXcgSW1hZ2V9dmFyIGE9dC5qUXVlcnksbD10LmNvbnNvbGUsaD1BcnJheS5wcm90b3R5cGUuc2xpY2U7cy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSkscy5wcm90b3R5cGUub3B0aW9ucz17fSxzLnByb3RvdHlwZS5nZXRJbWFnZXM9ZnVuY3Rpb24oKXt0aGlzLmltYWdlcz1bXSx0aGlzLmVsZW1lbnRzLmZvckVhY2godGhpcy5hZGRFbGVtZW50SW1hZ2VzLHRoaXMpfSxzLnByb3RvdHlwZS5hZGRFbGVtZW50SW1hZ2VzPWZ1bmN0aW9uKHQpe1wiSU1HXCI9PXQubm9kZU5hbWUmJnRoaXMuYWRkSW1hZ2UodCksdGhpcy5vcHRpb25zLmJhY2tncm91bmQ9PT0hMCYmdGhpcy5hZGRFbGVtZW50QmFja2dyb3VuZEltYWdlcyh0KTt2YXIgZT10Lm5vZGVUeXBlO2lmKGUmJmNbZV0pe2Zvcih2YXIgaT10LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbWdcIiksbj0wO248aS5sZW5ndGg7bisrKXt2YXIgcz1pW25dO3RoaXMuYWRkSW1hZ2Uocyl9aWYoXCJzdHJpbmdcIj09dHlwZW9mIHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kKXt2YXIgbz10LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5vcHRpb25zLmJhY2tncm91bmQpO2ZvcihuPTA7bjxvLmxlbmd0aDtuKyspe3ZhciByPW9bbl07dGhpcy5hZGRFbGVtZW50QmFja2dyb3VuZEltYWdlcyhyKX19fX07dmFyIGM9ezE6ITAsOTohMCwxMTohMH07cmV0dXJuIHMucHJvdG90eXBlLmFkZEVsZW1lbnRCYWNrZ3JvdW5kSW1hZ2VzPWZ1bmN0aW9uKHQpe3ZhciBlPWdldENvbXB1dGVkU3R5bGUodCk7aWYoZSlmb3IodmFyIGk9L3VybFxcKChbJ1wiXSk/KC4qPylcXDFcXCkvZ2ksbj1pLmV4ZWMoZS5iYWNrZ3JvdW5kSW1hZ2UpO251bGwhPT1uOyl7dmFyIHM9biYmblsyXTtzJiZ0aGlzLmFkZEJhY2tncm91bmQocyx0KSxuPWkuZXhlYyhlLmJhY2tncm91bmRJbWFnZSl9fSxzLnByb3RvdHlwZS5hZGRJbWFnZT1mdW5jdGlvbih0KXt2YXIgZT1uZXcgbyh0KTt0aGlzLmltYWdlcy5wdXNoKGUpfSxzLnByb3RvdHlwZS5hZGRCYWNrZ3JvdW5kPWZ1bmN0aW9uKHQsZSl7dmFyIGk9bmV3IHIodCxlKTt0aGlzLmltYWdlcy5wdXNoKGkpfSxzLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxpLG4pe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtlLnByb2dyZXNzKHQsaSxuKX0pfXZhciBlPXRoaXM7cmV0dXJuIHRoaXMucHJvZ3Jlc3NlZENvdW50PTAsdGhpcy5oYXNBbnlCcm9rZW49ITEsdGhpcy5pbWFnZXMubGVuZ3RoP3ZvaWQgdGhpcy5pbWFnZXMuZm9yRWFjaChmdW5jdGlvbihlKXtlLm9uY2UoXCJwcm9ncmVzc1wiLHQpLGUuY2hlY2soKX0pOnZvaWQgdGhpcy5jb21wbGV0ZSgpfSxzLnByb3RvdHlwZS5wcm9ncmVzcz1mdW5jdGlvbih0LGUsaSl7dGhpcy5wcm9ncmVzc2VkQ291bnQrKyx0aGlzLmhhc0FueUJyb2tlbj10aGlzLmhhc0FueUJyb2tlbnx8IXQuaXNMb2FkZWQsdGhpcy5lbWl0RXZlbnQoXCJwcm9ncmVzc1wiLFt0aGlzLHQsZV0pLHRoaXMuanFEZWZlcnJlZCYmdGhpcy5qcURlZmVycmVkLm5vdGlmeSYmdGhpcy5qcURlZmVycmVkLm5vdGlmeSh0aGlzLHQpLHRoaXMucHJvZ3Jlc3NlZENvdW50PT10aGlzLmltYWdlcy5sZW5ndGgmJnRoaXMuY29tcGxldGUoKSx0aGlzLm9wdGlvbnMuZGVidWcmJmwmJmwubG9nKFwicHJvZ3Jlc3M6IFwiK2ksdCxlKX0scy5wcm90b3R5cGUuY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmhhc0FueUJyb2tlbj9cImZhaWxcIjpcImRvbmVcIjtpZih0aGlzLmlzQ29tcGxldGU9ITAsdGhpcy5lbWl0RXZlbnQodCxbdGhpc10pLHRoaXMuZW1pdEV2ZW50KFwiYWx3YXlzXCIsW3RoaXNdKSx0aGlzLmpxRGVmZXJyZWQpe3ZhciBlPXRoaXMuaGFzQW55QnJva2VuP1wicmVqZWN0XCI6XCJyZXNvbHZlXCI7dGhpcy5qcURlZmVycmVkW2VdKHRoaXMpfX0sby5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksby5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldElzSW1hZ2VDb21wbGV0ZSgpO3JldHVybiB0P3ZvaWQgdGhpcy5jb25maXJtKDAhPT10aGlzLmltZy5uYXR1cmFsV2lkdGgsXCJuYXR1cmFsV2lkdGhcIik6KHRoaXMucHJveHlJbWFnZT1uZXcgSW1hZ2UsdGhpcy5wcm94eUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdGhpcyksdGhpcy5wcm94eUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHRoaXMpLHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdGhpcyksdGhpcy5pbWcuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsdGhpcyksdm9pZCh0aGlzLnByb3h5SW1hZ2Uuc3JjPXRoaXMuaW1nLnNyYykpfSxvLnByb3RvdHlwZS5nZXRJc0ltYWdlQ29tcGxldGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbWcuY29tcGxldGUmJnRoaXMuaW1nLm5hdHVyYWxXaWR0aH0sby5wcm90b3R5cGUuY29uZmlybT1mdW5jdGlvbih0LGUpe3RoaXMuaXNMb2FkZWQ9dCx0aGlzLmVtaXRFdmVudChcInByb2dyZXNzXCIsW3RoaXMsdGhpcy5pbWcsZV0pfSxvLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbih0KXt2YXIgZT1cIm9uXCIrdC50eXBlO3RoaXNbZV0mJnRoaXNbZV0odCl9LG8ucHJvdG90eXBlLm9ubG9hZD1mdW5jdGlvbigpe3RoaXMuY29uZmlybSghMCxcIm9ubG9hZFwiKSx0aGlzLnVuYmluZEV2ZW50cygpfSxvLnByb3RvdHlwZS5vbmVycm9yPWZ1bmN0aW9uKCl7dGhpcy5jb25maXJtKCExLFwib25lcnJvclwiKSx0aGlzLnVuYmluZEV2ZW50cygpfSxvLnByb3RvdHlwZS51bmJpbmRFdmVudHM9ZnVuY3Rpb24oKXt0aGlzLnByb3h5SW1hZ2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0aGlzKSx0aGlzLnByb3h5SW1hZ2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsdGhpcyksdGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0aGlzKSx0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIix0aGlzKX0sci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSksci5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXt0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLHRoaXMpLHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHRoaXMpLHRoaXMuaW1nLnNyYz10aGlzLnVybDt2YXIgdD10aGlzLmdldElzSW1hZ2VDb21wbGV0ZSgpO3QmJih0aGlzLmNvbmZpcm0oMCE9PXRoaXMuaW1nLm5hdHVyYWxXaWR0aCxcIm5hdHVyYWxXaWR0aFwiKSx0aGlzLnVuYmluZEV2ZW50cygpKX0sci5wcm90b3R5cGUudW5iaW5kRXZlbnRzPWZ1bmN0aW9uKCl7dGhpcy5pbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0aGlzKSx0aGlzLmltZy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIix0aGlzKX0sci5wcm90b3R5cGUuY29uZmlybT1mdW5jdGlvbih0LGUpe3RoaXMuaXNMb2FkZWQ9dCx0aGlzLmVtaXRFdmVudChcInByb2dyZXNzXCIsW3RoaXMsdGhpcy5lbGVtZW50LGVdKX0scy5tYWtlSlF1ZXJ5UGx1Z2luPWZ1bmN0aW9uKGUpe2U9ZXx8dC5qUXVlcnksZSYmKGE9ZSxhLmZuLmltYWdlc0xvYWRlZD1mdW5jdGlvbih0LGUpe3ZhciBpPW5ldyBzKHRoaXMsdCxlKTtyZXR1cm4gaS5qcURlZmVycmVkLnByb21pc2UoYSh0aGlzKSl9KX0scy5tYWtlSlF1ZXJ5UGx1Z2luKCksc30pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJmbGlja2l0eS9qcy9pbmRleFwiLFwiaW1hZ2VzbG9hZGVkL2ltYWdlc2xvYWRlZFwiXSxmdW5jdGlvbihpLG4pe3JldHVybiBlKHQsaSxuKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUodCxyZXF1aXJlKFwiZmxpY2tpdHlcIikscmVxdWlyZShcImltYWdlc2xvYWRlZFwiKSk6dC5GbGlja2l0eT1lKHQsdC5GbGlja2l0eSx0LmltYWdlc0xvYWRlZCl9KHdpbmRvdyxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7ZS5jcmVhdGVNZXRob2RzLnB1c2goXCJfY3JlYXRlSW1hZ2VzTG9hZGVkXCIpO3ZhciBuPWUucHJvdG90eXBlO3JldHVybiBuLl9jcmVhdGVJbWFnZXNMb2FkZWQ9ZnVuY3Rpb24oKXt0aGlzLm9uKFwiYWN0aXZhdGVcIix0aGlzLmltYWdlc0xvYWRlZCl9LG4uaW1hZ2VzTG9hZGVkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGkpe3ZhciBuPWUuZ2V0UGFyZW50Q2VsbChpLmltZyk7ZS5jZWxsU2l6ZUNoYW5nZShuJiZuLmVsZW1lbnQpLGUub3B0aW9ucy5mcmVlU2Nyb2xsfHxlLnBvc2l0aW9uU2xpZGVyQXRTZWxlY3RlZCgpfWlmKHRoaXMub3B0aW9ucy5pbWFnZXNMb2FkZWQpe3ZhciBlPXRoaXM7aSh0aGlzLnNsaWRlcikub24oXCJwcm9ncmVzc1wiLHQpfX0sZX0pOyIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGdsb2JhbC5JTWFzayA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuLy8gNy4yLjEgUmVxdWlyZU9iamVjdENvZXJjaWJsZShhcmd1bWVudClcbnZhciBfZGVmaW5lZCA9IGZ1bmN0aW9uIChpdCkge1xuICBpZiAoaXQgPT0gdW5kZWZpbmVkKSB0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgXCIgKyBpdCk7XG4gIHJldHVybiBpdDtcbn07XG5cbi8vIDcuMS4xMyBUb09iamVjdChhcmd1bWVudClcblxudmFyIF90b09iamVjdCA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gT2JqZWN0KF9kZWZpbmVkKGl0KSk7XG59O1xuXG52YXIgaGFzT3duUHJvcGVydHkgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfaGFzID0gZnVuY3Rpb24gKGl0LCBrZXkpIHtcbiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoaXQsIGtleSk7XG59O1xuXG52YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxudmFyIF9jb2YgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoaXQpLnNsaWNlKDgsIC0xKTtcbn07XG5cbi8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbnZhciBfaW9iamVjdCA9IE9iamVjdCgneicpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApID8gT2JqZWN0IDogZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBfY29mKGl0KSA9PSAnU3RyaW5nJyA/IGl0LnNwbGl0KCcnKSA6IE9iamVjdChpdCk7XG59O1xuXG4vLyB0byBpbmRleGVkIG9iamVjdCwgdG9PYmplY3Qgd2l0aCBmYWxsYmFjayBmb3Igbm9uLWFycmF5LWxpa2UgRVMzIHN0cmluZ3NcblxuXG52YXIgX3RvSW9iamVjdCA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gX2lvYmplY3QoX2RlZmluZWQoaXQpKTtcbn07XG5cbi8vIDcuMS40IFRvSW50ZWdlclxudmFyIGNlaWwgPSBNYXRoLmNlaWw7XG52YXIgZmxvb3IgPSBNYXRoLmZsb29yO1xudmFyIF90b0ludGVnZXIgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuIGlzTmFOKGl0ID0gK2l0KSA/IDAgOiAoaXQgPiAwID8gZmxvb3IgOiBjZWlsKShpdCk7XG59O1xuXG4vLyA3LjEuMTUgVG9MZW5ndGhcblxudmFyIG1pbiA9IE1hdGgubWluO1xudmFyIF90b0xlbmd0aCA9IGZ1bmN0aW9uIChpdCkge1xuICByZXR1cm4gaXQgPiAwID8gbWluKF90b0ludGVnZXIoaXQpLCAweDFmZmZmZmZmZmZmZmZmKSA6IDA7IC8vIHBvdygyLCA1MykgLSAxID09IDkwMDcxOTkyNTQ3NDA5OTFcbn07XG5cbnZhciBtYXggPSBNYXRoLm1heDtcbnZhciBtaW4kMSA9IE1hdGgubWluO1xudmFyIF90b0Fic29sdXRlSW5kZXggPSBmdW5jdGlvbiAoaW5kZXgsIGxlbmd0aCkge1xuICBpbmRleCA9IF90b0ludGVnZXIoaW5kZXgpO1xuICByZXR1cm4gaW5kZXggPCAwID8gbWF4KGluZGV4ICsgbGVuZ3RoLCAwKSA6IG1pbiQxKGluZGV4LCBsZW5ndGgpO1xufTtcblxuLy8gZmFsc2UgLT4gQXJyYXkjaW5kZXhPZlxuLy8gdHJ1ZSAgLT4gQXJyYXkjaW5jbHVkZXNcblxuXG5cbnZhciBfYXJyYXlJbmNsdWRlcyA9IGZ1bmN0aW9uIChJU19JTkNMVURFUykge1xuICByZXR1cm4gZnVuY3Rpb24gKCR0aGlzLCBlbCwgZnJvbUluZGV4KSB7XG4gICAgdmFyIE8gPSBfdG9Jb2JqZWN0KCR0aGlzKTtcbiAgICB2YXIgbGVuZ3RoID0gX3RvTGVuZ3RoKE8ubGVuZ3RoKTtcbiAgICB2YXIgaW5kZXggPSBfdG9BYnNvbHV0ZUluZGV4KGZyb21JbmRleCwgbGVuZ3RoKTtcbiAgICB2YXIgdmFsdWU7XG4gICAgLy8gQXJyYXkjaW5jbHVkZXMgdXNlcyBTYW1lVmFsdWVaZXJvIGVxdWFsaXR5IGFsZ29yaXRobVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgICBpZiAoSVNfSU5DTFVERVMgJiYgZWwgIT0gZWwpIHdoaWxlIChsZW5ndGggPiBpbmRleCkge1xuICAgICAgdmFsdWUgPSBPW2luZGV4KytdO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICAgICAgaWYgKHZhbHVlICE9IHZhbHVlKSByZXR1cm4gdHJ1ZTtcbiAgICAvLyBBcnJheSNpbmRleE9mIGlnbm9yZXMgaG9sZXMsIEFycmF5I2luY2x1ZGVzIC0gbm90XG4gICAgfSBlbHNlIGZvciAoO2xlbmd0aCA+IGluZGV4OyBpbmRleCsrKSBpZiAoSVNfSU5DTFVERVMgfHwgaW5kZXggaW4gTykge1xuICAgICAgaWYgKE9baW5kZXhdID09PSBlbCkgcmV0dXJuIElTX0lOQ0xVREVTIHx8IGluZGV4IHx8IDA7XG4gICAgfSByZXR1cm4gIUlTX0lOQ0xVREVTICYmIC0xO1xuICB9O1xufTtcblxuZnVuY3Rpb24gY3JlYXRlQ29tbW9uanNNb2R1bGUoZm4sIG1vZHVsZSkge1xuXHRyZXR1cm4gbW9kdWxlID0geyBleHBvcnRzOiB7fSB9LCBmbihtb2R1bGUsIG1vZHVsZS5leHBvcnRzKSwgbW9kdWxlLmV4cG9ydHM7XG59XG5cbnZhciBfZ2xvYmFsID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSkge1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzg2I2lzc3VlY29tbWVudC0xMTU3NTkwMjhcbnZhciBnbG9iYWwgPSBtb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lk1hdGggPT0gTWF0aFxuICA/IHdpbmRvdyA6IHR5cGVvZiBzZWxmICE9ICd1bmRlZmluZWQnICYmIHNlbGYuTWF0aCA9PSBNYXRoID8gc2VsZlxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmNcbiAgOiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuaWYgKHR5cGVvZiBfX2cgPT0gJ251bWJlcicpIF9fZyA9IGdsb2JhbDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxufSk7XG5cbnZhciBTSEFSRUQgPSAnX19jb3JlLWpzX3NoYXJlZF9fJztcbnZhciBzdG9yZSA9IF9nbG9iYWxbU0hBUkVEXSB8fCAoX2dsb2JhbFtTSEFSRURdID0ge30pO1xudmFyIF9zaGFyZWQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiBzdG9yZVtrZXldIHx8IChzdG9yZVtrZXldID0ge30pO1xufTtcblxudmFyIGlkID0gMDtcbnZhciBweCA9IE1hdGgucmFuZG9tKCk7XG52YXIgX3VpZCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgcmV0dXJuICdTeW1ib2woJy5jb25jYXQoa2V5ID09PSB1bmRlZmluZWQgPyAnJyA6IGtleSwgJylfJywgKCsraWQgKyBweCkudG9TdHJpbmcoMzYpKTtcbn07XG5cbnZhciBzaGFyZWQgPSBfc2hhcmVkKCdrZXlzJyk7XG5cbnZhciBfc2hhcmVkS2V5ID0gZnVuY3Rpb24gKGtleSkge1xuICByZXR1cm4gc2hhcmVkW2tleV0gfHwgKHNoYXJlZFtrZXldID0gX3VpZChrZXkpKTtcbn07XG5cbnZhciBhcnJheUluZGV4T2YgPSBfYXJyYXlJbmNsdWRlcyhmYWxzZSk7XG52YXIgSUVfUFJPVE8gPSBfc2hhcmVkS2V5KCdJRV9QUk9UTycpO1xuXG52YXIgX29iamVjdEtleXNJbnRlcm5hbCA9IGZ1bmN0aW9uIChvYmplY3QsIG5hbWVzKSB7XG4gIHZhciBPID0gX3RvSW9iamVjdChvYmplY3QpO1xuICB2YXIgaSA9IDA7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgdmFyIGtleTtcbiAgZm9yIChrZXkgaW4gTykgaWYgKGtleSAhPSBJRV9QUk9UTykgX2hhcyhPLCBrZXkpICYmIHJlc3VsdC5wdXNoKGtleSk7XG4gIC8vIERvbid0IGVudW0gYnVnICYgaGlkZGVuIGtleXNcbiAgd2hpbGUgKG5hbWVzLmxlbmd0aCA+IGkpIGlmIChfaGFzKE8sIGtleSA9IG5hbWVzW2krK10pKSB7XG4gICAgfmFycmF5SW5kZXhPZihyZXN1bHQsIGtleSkgfHwgcmVzdWx0LnB1c2goa2V5KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8gSUUgOC0gZG9uJ3QgZW51bSBidWcga2V5c1xudmFyIF9lbnVtQnVnS2V5cyA9IChcbiAgJ2NvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZidcbikuc3BsaXQoJywnKTtcblxuLy8gMTkuMS4yLjE0IC8gMTUuMi4zLjE0IE9iamVjdC5rZXlzKE8pXG5cblxuXG52YXIgX29iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiBrZXlzKE8pIHtcbiAgcmV0dXJuIF9vYmplY3RLZXlzSW50ZXJuYWwoTywgX2VudW1CdWdLZXlzKTtcbn07XG5cbnZhciBfY29yZSA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uIChtb2R1bGUpIHtcbnZhciBjb3JlID0gbW9kdWxlLmV4cG9ydHMgPSB7IHZlcnNpb246ICcyLjUuMycgfTtcbmlmICh0eXBlb2YgX19lID09ICdudW1iZXInKSBfX2UgPSBjb3JlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG59KTtcblxudmFyIF9jb3JlXzEgPSBfY29yZS52ZXJzaW9uO1xuXG52YXIgX2lzT2JqZWN0ID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiB0eXBlb2YgaXQgPT09ICdvYmplY3QnID8gaXQgIT09IG51bGwgOiB0eXBlb2YgaXQgPT09ICdmdW5jdGlvbic7XG59O1xuXG52YXIgX2FuT2JqZWN0ID0gZnVuY3Rpb24gKGl0KSB7XG4gIGlmICghX2lzT2JqZWN0KGl0KSkgdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYW4gb2JqZWN0IScpO1xuICByZXR1cm4gaXQ7XG59O1xuXG52YXIgX2ZhaWxzID0gZnVuY3Rpb24gKGV4ZWMpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gISFleGVjKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcblxuLy8gVGhhbmsncyBJRTggZm9yIGhpcyBmdW5ueSBkZWZpbmVQcm9wZXJ0eVxudmFyIF9kZXNjcmlwdG9ycyA9ICFfZmFpbHMoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAnYScsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiA3OyB9IH0pLmEgIT0gNztcbn0pO1xuXG52YXIgZG9jdW1lbnQkMSA9IF9nbG9iYWwuZG9jdW1lbnQ7XG4vLyB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBpcyAnb2JqZWN0JyBpbiBvbGQgSUVcbnZhciBpcyA9IF9pc09iamVjdChkb2N1bWVudCQxKSAmJiBfaXNPYmplY3QoZG9jdW1lbnQkMS5jcmVhdGVFbGVtZW50KTtcbnZhciBfZG9tQ3JlYXRlID0gZnVuY3Rpb24gKGl0KSB7XG4gIHJldHVybiBpcyA/IGRvY3VtZW50JDEuY3JlYXRlRWxlbWVudChpdCkgOiB7fTtcbn07XG5cbnZhciBfaWU4RG9tRGVmaW5lID0gIV9kZXNjcmlwdG9ycyAmJiAhX2ZhaWxzKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfZG9tQ3JlYXRlKCdkaXYnKSwgJ2EnLCB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gNzsgfSB9KS5hICE9IDc7XG59KTtcblxuLy8gNy4xLjEgVG9QcmltaXRpdmUoaW5wdXQgWywgUHJlZmVycmVkVHlwZV0pXG5cbi8vIGluc3RlYWQgb2YgdGhlIEVTNiBzcGVjIHZlcnNpb24sIHdlIGRpZG4ndCBpbXBsZW1lbnQgQEB0b1ByaW1pdGl2ZSBjYXNlXG4vLyBhbmQgdGhlIHNlY29uZCBhcmd1bWVudCAtIGZsYWcgLSBwcmVmZXJyZWQgdHlwZSBpcyBhIHN0cmluZ1xudmFyIF90b1ByaW1pdGl2ZSA9IGZ1bmN0aW9uIChpdCwgUykge1xuICBpZiAoIV9pc09iamVjdChpdCkpIHJldHVybiBpdDtcbiAgdmFyIGZuLCB2YWw7XG4gIGlmIChTICYmIHR5cGVvZiAoZm4gPSBpdC50b1N0cmluZykgPT0gJ2Z1bmN0aW9uJyAmJiAhX2lzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSkgcmV0dXJuIHZhbDtcbiAgaWYgKHR5cGVvZiAoZm4gPSBpdC52YWx1ZU9mKSA9PSAnZnVuY3Rpb24nICYmICFfaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKSByZXR1cm4gdmFsO1xuICBpZiAoIVMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFfaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKSByZXR1cm4gdmFsO1xuICB0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWVcIik7XG59O1xuXG52YXIgZFAgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG5cbnZhciBmID0gX2Rlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnR5IDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykge1xuICBfYW5PYmplY3QoTyk7XG4gIFAgPSBfdG9QcmltaXRpdmUoUCwgdHJ1ZSk7XG4gIF9hbk9iamVjdChBdHRyaWJ1dGVzKTtcbiAgaWYgKF9pZThEb21EZWZpbmUpIHRyeSB7XG4gICAgcmV0dXJuIGRQKE8sIFAsIEF0dHJpYnV0ZXMpO1xuICB9IGNhdGNoIChlKSB7IC8qIGVtcHR5ICovIH1cbiAgaWYgKCdnZXQnIGluIEF0dHJpYnV0ZXMgfHwgJ3NldCcgaW4gQXR0cmlidXRlcykgdGhyb3cgVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEnKTtcbiAgaWYgKCd2YWx1ZScgaW4gQXR0cmlidXRlcykgT1tQXSA9IEF0dHJpYnV0ZXMudmFsdWU7XG4gIHJldHVybiBPO1xufTtcblxudmFyIF9vYmplY3REcCA9IHtcblx0ZjogZlxufTtcblxudmFyIF9wcm9wZXJ0eURlc2MgPSBmdW5jdGlvbiAoYml0bWFwLCB2YWx1ZSkge1xuICByZXR1cm4ge1xuICAgIGVudW1lcmFibGU6ICEoYml0bWFwICYgMSksXG4gICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLFxuICAgIHdyaXRhYmxlOiAhKGJpdG1hcCAmIDQpLFxuICAgIHZhbHVlOiB2YWx1ZVxuICB9O1xufTtcblxudmFyIF9oaWRlID0gX2Rlc2NyaXB0b3JzID8gZnVuY3Rpb24gKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICByZXR1cm4gX29iamVjdERwLmYob2JqZWN0LCBrZXksIF9wcm9wZXJ0eURlc2MoMSwgdmFsdWUpKTtcbn0gOiBmdW5jdGlvbiAob2JqZWN0LCBrZXksIHZhbHVlKSB7XG4gIG9iamVjdFtrZXldID0gdmFsdWU7XG4gIHJldHVybiBvYmplY3Q7XG59O1xuXG52YXIgX3JlZGVmaW5lID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSkge1xudmFyIFNSQyA9IF91aWQoJ3NyYycpO1xudmFyIFRPX1NUUklORyA9ICd0b1N0cmluZyc7XG52YXIgJHRvU3RyaW5nID0gRnVuY3Rpb25bVE9fU1RSSU5HXTtcbnZhciBUUEwgPSAoJycgKyAkdG9TdHJpbmcpLnNwbGl0KFRPX1NUUklORyk7XG5cbl9jb3JlLmluc3BlY3RTb3VyY2UgPSBmdW5jdGlvbiAoaXQpIHtcbiAgcmV0dXJuICR0b1N0cmluZy5jYWxsKGl0KTtcbn07XG5cbihtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChPLCBrZXksIHZhbCwgc2FmZSkge1xuICB2YXIgaXNGdW5jdGlvbiA9IHR5cGVvZiB2YWwgPT0gJ2Z1bmN0aW9uJztcbiAgaWYgKGlzRnVuY3Rpb24pIF9oYXModmFsLCAnbmFtZScpIHx8IF9oaWRlKHZhbCwgJ25hbWUnLCBrZXkpO1xuICBpZiAoT1trZXldID09PSB2YWwpIHJldHVybjtcbiAgaWYgKGlzRnVuY3Rpb24pIF9oYXModmFsLCBTUkMpIHx8IF9oaWRlKHZhbCwgU1JDLCBPW2tleV0gPyAnJyArIE9ba2V5XSA6IFRQTC5qb2luKFN0cmluZyhrZXkpKSk7XG4gIGlmIChPID09PSBfZ2xvYmFsKSB7XG4gICAgT1trZXldID0gdmFsO1xuICB9IGVsc2UgaWYgKCFzYWZlKSB7XG4gICAgZGVsZXRlIE9ba2V5XTtcbiAgICBfaGlkZShPLCBrZXksIHZhbCk7XG4gIH0gZWxzZSBpZiAoT1trZXldKSB7XG4gICAgT1trZXldID0gdmFsO1xuICB9IGVsc2Uge1xuICAgIF9oaWRlKE8sIGtleSwgdmFsKTtcbiAgfVxuLy8gYWRkIGZha2UgRnVuY3Rpb24jdG9TdHJpbmcgZm9yIGNvcnJlY3Qgd29yayB3cmFwcGVkIG1ldGhvZHMgLyBjb25zdHJ1Y3RvcnMgd2l0aCBtZXRob2RzIGxpa2UgTG9EYXNoIGlzTmF0aXZlXG59KShGdW5jdGlvbi5wcm90b3R5cGUsIFRPX1NUUklORywgZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gIHJldHVybiB0eXBlb2YgdGhpcyA9PSAnZnVuY3Rpb24nICYmIHRoaXNbU1JDXSB8fCAkdG9TdHJpbmcuY2FsbCh0aGlzKTtcbn0pO1xufSk7XG5cbnZhciBfYUZ1bmN0aW9uID0gZnVuY3Rpb24gKGl0KSB7XG4gIGlmICh0eXBlb2YgaXQgIT0gJ2Z1bmN0aW9uJykgdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYSBmdW5jdGlvbiEnKTtcbiAgcmV0dXJuIGl0O1xufTtcblxuLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nXG5cbnZhciBfY3R4ID0gZnVuY3Rpb24gKGZuLCB0aGF0LCBsZW5ndGgpIHtcbiAgX2FGdW5jdGlvbihmbik7XG4gIGlmICh0aGF0ID09PSB1bmRlZmluZWQpIHJldHVybiBmbjtcbiAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSk7XG4gICAgfTtcbiAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYik7XG4gICAgfTtcbiAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbiAoYSwgYiwgYykge1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKC8qIC4uLmFyZ3MgKi8pIHtcbiAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTtcbiAgfTtcbn07XG5cbnZhciBQUk9UT1RZUEUgPSAncHJvdG90eXBlJztcblxudmFyICRleHBvcnQgPSBmdW5jdGlvbiAodHlwZSwgbmFtZSwgc291cmNlKSB7XG4gIHZhciBJU19GT1JDRUQgPSB0eXBlICYgJGV4cG9ydC5GO1xuICB2YXIgSVNfR0xPQkFMID0gdHlwZSAmICRleHBvcnQuRztcbiAgdmFyIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlM7XG4gIHZhciBJU19QUk9UTyA9IHR5cGUgJiAkZXhwb3J0LlA7XG4gIHZhciBJU19CSU5EID0gdHlwZSAmICRleHBvcnQuQjtcbiAgdmFyIHRhcmdldCA9IElTX0dMT0JBTCA/IF9nbG9iYWwgOiBJU19TVEFUSUMgPyBfZ2xvYmFsW25hbWVdIHx8IChfZ2xvYmFsW25hbWVdID0ge30pIDogKF9nbG9iYWxbbmFtZV0gfHwge30pW1BST1RPVFlQRV07XG4gIHZhciBleHBvcnRzID0gSVNfR0xPQkFMID8gX2NvcmUgOiBfY29yZVtuYW1lXSB8fCAoX2NvcmVbbmFtZV0gPSB7fSk7XG4gIHZhciBleHBQcm90byA9IGV4cG9ydHNbUFJPVE9UWVBFXSB8fCAoZXhwb3J0c1tQUk9UT1RZUEVdID0ge30pO1xuICB2YXIga2V5LCBvd24sIG91dCwgZXhwO1xuICBpZiAoSVNfR0xPQkFMKSBzb3VyY2UgPSBuYW1lO1xuICBmb3IgKGtleSBpbiBzb3VyY2UpIHtcbiAgICAvLyBjb250YWlucyBpbiBuYXRpdmVcbiAgICBvd24gPSAhSVNfRk9SQ0VEICYmIHRhcmdldCAmJiB0YXJnZXRba2V5XSAhPT0gdW5kZWZpbmVkO1xuICAgIC8vIGV4cG9ydCBuYXRpdmUgb3IgcGFzc2VkXG4gICAgb3V0ID0gKG93biA/IHRhcmdldCA6IHNvdXJjZSlba2V5XTtcbiAgICAvLyBiaW5kIHRpbWVycyB0byBnbG9iYWwgZm9yIGNhbGwgZnJvbSBleHBvcnQgY29udGV4dFxuICAgIGV4cCA9IElTX0JJTkQgJiYgb3duID8gX2N0eChvdXQsIF9nbG9iYWwpIDogSVNfUFJPVE8gJiYgdHlwZW9mIG91dCA9PSAnZnVuY3Rpb24nID8gX2N0eChGdW5jdGlvbi5jYWxsLCBvdXQpIDogb3V0O1xuICAgIC8vIGV4dGVuZCBnbG9iYWxcbiAgICBpZiAodGFyZ2V0KSBfcmVkZWZpbmUodGFyZ2V0LCBrZXksIG91dCwgdHlwZSAmICRleHBvcnQuVSk7XG4gICAgLy8gZXhwb3J0XG4gICAgaWYgKGV4cG9ydHNba2V5XSAhPSBvdXQpIF9oaWRlKGV4cG9ydHMsIGtleSwgZXhwKTtcbiAgICBpZiAoSVNfUFJPVE8gJiYgZXhwUHJvdG9ba2V5XSAhPSBvdXQpIGV4cFByb3RvW2tleV0gPSBvdXQ7XG4gIH1cbn07XG5fZ2xvYmFsLmNvcmUgPSBfY29yZTtcbi8vIHR5cGUgYml0bWFwXG4kZXhwb3J0LkYgPSAxOyAgIC8vIGZvcmNlZFxuJGV4cG9ydC5HID0gMjsgICAvLyBnbG9iYWxcbiRleHBvcnQuUyA9IDQ7ICAgLy8gc3RhdGljXG4kZXhwb3J0LlAgPSA4OyAgIC8vIHByb3RvXG4kZXhwb3J0LkIgPSAxNjsgIC8vIGJpbmRcbiRleHBvcnQuVyA9IDMyOyAgLy8gd3JhcFxuJGV4cG9ydC5VID0gNjQ7ICAvLyBzYWZlXG4kZXhwb3J0LlIgPSAxMjg7IC8vIHJlYWwgcHJvdG8gbWV0aG9kIGZvciBgbGlicmFyeWBcbnZhciBfZXhwb3J0ID0gJGV4cG9ydDtcblxuLy8gbW9zdCBPYmplY3QgbWV0aG9kcyBieSBFUzYgc2hvdWxkIGFjY2VwdCBwcmltaXRpdmVzXG5cblxuXG52YXIgX29iamVjdFNhcCA9IGZ1bmN0aW9uIChLRVksIGV4ZWMpIHtcbiAgdmFyIGZuID0gKF9jb3JlLk9iamVjdCB8fCB7fSlbS0VZXSB8fCBPYmplY3RbS0VZXTtcbiAgdmFyIGV4cCA9IHt9O1xuICBleHBbS0VZXSA9IGV4ZWMoZm4pO1xuICBfZXhwb3J0KF9leHBvcnQuUyArIF9leHBvcnQuRiAqIF9mYWlscyhmdW5jdGlvbiAoKSB7IGZuKDEpOyB9KSwgJ09iamVjdCcsIGV4cCk7XG59O1xuXG4vLyAxOS4xLjIuMTQgT2JqZWN0LmtleXMoTylcblxuXG5cbl9vYmplY3RTYXAoJ2tleXMnLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmdW5jdGlvbiBrZXlzKGl0KSB7XG4gICAgcmV0dXJuIF9vYmplY3RLZXlzKF90b09iamVjdChpdCkpO1xuICB9O1xufSk7XG5cbnZhciBrZXlzID0gX2NvcmUuT2JqZWN0LmtleXM7XG5cbnZhciBfc3RyaW5nUmVwZWF0ID0gZnVuY3Rpb24gcmVwZWF0KGNvdW50KSB7XG4gIHZhciBzdHIgPSBTdHJpbmcoX2RlZmluZWQodGhpcykpO1xuICB2YXIgcmVzID0gJyc7XG4gIHZhciBuID0gX3RvSW50ZWdlcihjb3VudCk7XG4gIGlmIChuIDwgMCB8fCBuID09IEluZmluaXR5KSB0aHJvdyBSYW5nZUVycm9yKFwiQ291bnQgY2FuJ3QgYmUgbmVnYXRpdmVcIik7XG4gIGZvciAoO24gPiAwOyAobiA+Pj49IDEpICYmIChzdHIgKz0gc3RyKSkgaWYgKG4gJiAxKSByZXMgKz0gc3RyO1xuICByZXR1cm4gcmVzO1xufTtcblxuX2V4cG9ydChfZXhwb3J0LlAsICdTdHJpbmcnLCB7XG4gIC8vIDIxLjEuMy4xMyBTdHJpbmcucHJvdG90eXBlLnJlcGVhdChjb3VudClcbiAgcmVwZWF0OiBfc3RyaW5nUmVwZWF0XG59KTtcblxudmFyIHJlcGVhdCQxID0gX2NvcmUuU3RyaW5nLnJlcGVhdDtcblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtc3RyaW5nLXBhZC1zdGFydC1lbmRcblxuXG5cblxudmFyIF9zdHJpbmdQYWQgPSBmdW5jdGlvbiAodGhhdCwgbWF4TGVuZ3RoLCBmaWxsU3RyaW5nLCBsZWZ0KSB7XG4gIHZhciBTID0gU3RyaW5nKF9kZWZpbmVkKHRoYXQpKTtcbiAgdmFyIHN0cmluZ0xlbmd0aCA9IFMubGVuZ3RoO1xuICB2YXIgZmlsbFN0ciA9IGZpbGxTdHJpbmcgPT09IHVuZGVmaW5lZCA/ICcgJyA6IFN0cmluZyhmaWxsU3RyaW5nKTtcbiAgdmFyIGludE1heExlbmd0aCA9IF90b0xlbmd0aChtYXhMZW5ndGgpO1xuICBpZiAoaW50TWF4TGVuZ3RoIDw9IHN0cmluZ0xlbmd0aCB8fCBmaWxsU3RyID09ICcnKSByZXR1cm4gUztcbiAgdmFyIGZpbGxMZW4gPSBpbnRNYXhMZW5ndGggLSBzdHJpbmdMZW5ndGg7XG4gIHZhciBzdHJpbmdGaWxsZXIgPSBfc3RyaW5nUmVwZWF0LmNhbGwoZmlsbFN0ciwgTWF0aC5jZWlsKGZpbGxMZW4gLyBmaWxsU3RyLmxlbmd0aCkpO1xuICBpZiAoc3RyaW5nRmlsbGVyLmxlbmd0aCA+IGZpbGxMZW4pIHN0cmluZ0ZpbGxlciA9IHN0cmluZ0ZpbGxlci5zbGljZSgwLCBmaWxsTGVuKTtcbiAgcmV0dXJuIGxlZnQgPyBzdHJpbmdGaWxsZXIgKyBTIDogUyArIHN0cmluZ0ZpbGxlcjtcbn07XG5cbnZhciBuYXZpZ2F0b3IgPSBfZ2xvYmFsLm5hdmlnYXRvcjtcblxudmFyIF91c2VyQWdlbnQgPSBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCB8fCAnJztcblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtc3RyaW5nLXBhZC1zdGFydC1lbmRcblxuXG5cblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzI4MFxuX2V4cG9ydChfZXhwb3J0LlAgKyBfZXhwb3J0LkYgKiAvVmVyc2lvblxcLzEwXFwuXFxkKyhcXC5cXGQrKT8gU2FmYXJpXFwvLy50ZXN0KF91c2VyQWdlbnQpLCAnU3RyaW5nJywge1xuICBwYWRTdGFydDogZnVuY3Rpb24gcGFkU3RhcnQobWF4TGVuZ3RoIC8qICwgZmlsbFN0cmluZyA9ICcgJyAqLykge1xuICAgIHJldHVybiBfc3RyaW5nUGFkKHRoaXMsIG1heExlbmd0aCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQsIHRydWUpO1xuICB9XG59KTtcblxudmFyIHBhZFN0YXJ0ID0gX2NvcmUuU3RyaW5nLnBhZFN0YXJ0O1xuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1zdHJpbmctcGFkLXN0YXJ0LWVuZFxuXG5cblxuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMjgwXG5fZXhwb3J0KF9leHBvcnQuUCArIF9leHBvcnQuRiAqIC9WZXJzaW9uXFwvMTBcXC5cXGQrKFxcLlxcZCspPyBTYWZhcmlcXC8vLnRlc3QoX3VzZXJBZ2VudCksICdTdHJpbmcnLCB7XG4gIHBhZEVuZDogZnVuY3Rpb24gcGFkRW5kKG1heExlbmd0aCAvKiAsIGZpbGxTdHJpbmcgPSAnICcgKi8pIHtcbiAgICByZXR1cm4gX3N0cmluZ1BhZCh0aGlzLCBtYXhMZW5ndGgsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkLCBmYWxzZSk7XG4gIH1cbn0pO1xuXG52YXIgcGFkRW5kID0gX2NvcmUuU3RyaW5nLnBhZEVuZDtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmo7XG59IDogZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbn07XG5cblxuXG5cblxuXG5cblxuXG5cblxudmFyIGNsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn07XG5cbnZhciBjcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfTtcbn0oKTtcblxuXG5cblxuXG5cblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcblxuICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn07XG5cbnZhciBnZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHtcbiAgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlO1xuICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7XG5cbiAgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTtcblxuICAgIGlmIChwYXJlbnQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChcInZhbHVlXCIgaW4gZGVzYykge1xuICAgIHJldHVybiBkZXNjLnZhbHVlO1xuICB9IGVsc2Uge1xuICAgIHZhciBnZXR0ZXIgPSBkZXNjLmdldDtcblxuICAgIGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpO1xuICB9XG59O1xuXG52YXIgaW5oZXJpdHMgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpO1xuICB9XG5cbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgY29uc3RydWN0b3I6IHtcbiAgICAgIHZhbHVlOiBzdWJDbGFzcyxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuICBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG59O1xuXG5cblxuXG5cblxuXG5cblxuXG5cbnZhciBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuID0gZnVuY3Rpb24gKHNlbGYsIGNhbGwpIHtcbiAgaWYgKCFzZWxmKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG59O1xuXG5cblxudmFyIHNldCA9IGZ1bmN0aW9uIHNldChvYmplY3QsIHByb3BlcnR5LCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpO1xuXG4gIGlmIChkZXNjID09PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7XG5cbiAgICBpZiAocGFyZW50ICE9PSBudWxsKSB7XG4gICAgICBzZXQocGFyZW50LCBwcm9wZXJ0eSwgdmFsdWUsIHJlY2VpdmVyKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MgJiYgZGVzYy53cml0YWJsZSkge1xuICAgIGRlc2MudmFsdWUgPSB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2V0dGVyID0gZGVzYy5zZXQ7XG5cbiAgICBpZiAoc2V0dGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHNldHRlci5jYWxsKHJlY2VpdmVyLCB2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlO1xufTtcblxudmFyIHNsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7XG4gICAgdmFyIF9hcnIgPSBbXTtcbiAgICB2YXIgX24gPSB0cnVlO1xuICAgIHZhciBfZCA9IGZhbHNlO1xuICAgIHZhciBfZSA9IHVuZGVmaW5lZDtcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7XG4gICAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7XG5cbiAgICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgX2QgPSB0cnVlO1xuICAgICAgX2UgPSBlcnI7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoX2QpIHRocm93IF9lO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBfYXJyO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgICByZXR1cm4gYXJyO1xuICAgIH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7XG4gICAgICByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTtcbiAgICB9XG4gIH07XG59KCk7XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbnZhciB0b0NvbnN1bWFibGVBcnJheSA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIGFycjJbaV0gPSBhcnJbaV07XG5cbiAgICByZXR1cm4gYXJyMjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShhcnIpO1xuICB9XG59O1xuXG4vKiogQ2hlY2tzIGlmIHZhbHVlIGlzIHN0cmluZyAqL1xuZnVuY3Rpb24gaXNTdHJpbmcoc3RyKSB7XG4gIHJldHVybiB0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyB8fCBzdHIgaW5zdGFuY2VvZiBTdHJpbmc7XG59XG5cbi8qKiBDb25mb3JtcyBzdHJpbmcgd2l0aCBmYWxsYmFjayAqL1xuZnVuY3Rpb24gY29uZm9ybShyZXMsIHN0cikge1xuICB2YXIgZmFsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICcnO1xuXG4gIHJldHVybiBpc1N0cmluZyhyZXMpID8gcmVzIDogcmVzID8gc3RyIDogZmFsbGJhY2s7XG59XG5cbi8qKlxuICBEaXJlY3Rpb25cbiAgQHByb3Age251bWJlcn0gTk9ORVxuICBAcHJvcCB7bnVtYmVyfSBMRUZUXG4gIEBwcm9wIHtudW1iZXJ9IFJJR0hUXG4qL1xudmFyIERJUkVDVElPTiA9IHtcbiAgTk9ORTogMCxcbiAgTEVGVDogLTEsXG4gIFJJR0hUOiAxXG4gIC8qKlxuICAgIERpcmVjdGlvblxuICAgIEBlbnVtIHtudW1iZXJ9XG4gICovXG59O1xuXG4vKiogUmV0dXJucyBuZXh0IGNoYXIgcG9zaXRpb24gaW4gZGlyZWN0aW9uICovXG5mdW5jdGlvbiBpbmRleEluRGlyZWN0aW9uKHBvcywgZGlyZWN0aW9uKSB7XG4gIGlmIChkaXJlY3Rpb24gPT09IERJUkVDVElPTi5MRUZUKSAtLXBvcztcbiAgcmV0dXJuIHBvcztcbn1cblxuLyoqIEVzY2FwZXMgcmVndWxhciBleHByZXNzaW9uIGNvbnRyb2wgY2hhcnMgKi9cbmZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oWy4qKz9ePSE6JHt9KCl8W1xcXS9cXFxcXSkvZywgJ1xcXFwkMScpO1xufVxuXG4vLyBjbG9uZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vZXBvYmVyZXpraW4vZmFzdC1kZWVwLWVxdWFsIHdpdGggc21hbGwgY2hhbmdlc1xuZnVuY3Rpb24gb2JqZWN0SW5jbHVkZXMoYiwgYSkge1xuICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWU7XG5cbiAgdmFyIGFyckEgPSBBcnJheS5pc0FycmF5KGEpLFxuICAgICAgYXJyQiA9IEFycmF5LmlzQXJyYXkoYiksXG4gICAgICBpO1xuXG4gIGlmIChhcnJBICYmIGFyckIpIHtcbiAgICBpZiAoYS5sZW5ndGggIT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCFvYmplY3RJbmNsdWRlcyhhW2ldLCBiW2ldKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1yZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmIChhcnJBICE9IGFyckIpIHJldHVybiBmYWxzZTtcblxuICBpZiAoYSAmJiBiICYmICh0eXBlb2YgYSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYSkpID09PSAnb2JqZWN0JyAmJiAodHlwZW9mIGIgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGIpKSA9PT0gJ29iamVjdCcpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGEpO1xuICAgIC8vIGlmIChrZXlzLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG5cbiAgICB2YXIgZGF0ZUEgPSBhIGluc3RhbmNlb2YgRGF0ZSxcbiAgICAgICAgZGF0ZUIgPSBiIGluc3RhbmNlb2YgRGF0ZTtcbiAgICBpZiAoZGF0ZUEgJiYgZGF0ZUIpIHJldHVybiBhLmdldFRpbWUoKSA9PSBiLmdldFRpbWUoKTtcbiAgICBpZiAoZGF0ZUEgIT0gZGF0ZUIpIHJldHVybiBmYWxzZTtcblxuICAgIHZhciByZWdleHBBID0gYSBpbnN0YW5jZW9mIFJlZ0V4cCxcbiAgICAgICAgcmVnZXhwQiA9IGIgaW5zdGFuY2VvZiBSZWdFeHA7XG4gICAgaWYgKHJlZ2V4cEEgJiYgcmVnZXhwQikgcmV0dXJuIGEudG9TdHJpbmcoKSA9PSBiLnRvU3RyaW5nKCk7XG4gICAgaWYgKHJlZ2V4cEEgIT0gcmVnZXhwQikgcmV0dXJuIGZhbHNlO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIGtleXNbaV0pKSByZXR1cm4gZmFsc2U7XG4gICAgfWZvciAoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIW9iamVjdEluY2x1ZGVzKGFba2V5c1tpXV0sIGJba2V5c1tpXV0pKSByZXR1cm4gZmFsc2U7XG4gICAgfXJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xudmFyIGcgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cgfHwgdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsLmdsb2JhbCA9PT0gZ2xvYmFsICYmIGdsb2JhbCB8fCB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5zZWxmID09PSBzZWxmICYmIHNlbGYgfHwge307XG4vKiBlc2xpbnQtZW5hYmxlIG5vLXVuZGVmICovXG5cbi8qKiBTZWxlY3Rpb24gcmFuZ2UgKi9cblxuLyoqIFByb3ZpZGVzIGRldGFpbHMgb2YgY2hhbmdpbmcgaW5wdXQgKi9cblxudmFyIEFjdGlvbkRldGFpbHMgPSBmdW5jdGlvbiAoKSB7XG4gIC8qKiBPbGQgaW5wdXQgdmFsdWUgKi9cblxuICAvKiogQ3VycmVudCBpbnB1dCB2YWx1ZSAqL1xuICBmdW5jdGlvbiBBY3Rpb25EZXRhaWxzKHZhbHVlLCBjdXJzb3JQb3MsIG9sZFZhbHVlLCBvbGRTZWxlY3Rpb24pIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBBY3Rpb25EZXRhaWxzKTtcblxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB0aGlzLmN1cnNvclBvcyA9IGN1cnNvclBvcztcbiAgICB0aGlzLm9sZFZhbHVlID0gb2xkVmFsdWU7XG4gICAgdGhpcy5vbGRTZWxlY3Rpb24gPSBvbGRTZWxlY3Rpb247XG5cbiAgICAvLyBkb3VibGUgY2hlY2sgaWYgbGVmdCBwYXJ0IHdhcyBjaGFuZ2VkIChhdXRvZmlsbGluZywgb3RoZXIgbm9uLXN0YW5kYXJkIGlucHV0IHRyaWdnZXJzKVxuICAgIHdoaWxlICh0aGlzLnZhbHVlLnNsaWNlKDAsIHRoaXMuc3RhcnRDaGFuZ2VQb3MpICE9PSB0aGlzLm9sZFZhbHVlLnNsaWNlKDAsIHRoaXMuc3RhcnRDaGFuZ2VQb3MpKSB7XG4gICAgICAtLXRoaXMub2xkU2VsZWN0aW9uLnN0YXJ0O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgIFN0YXJ0IGNoYW5naW5nIHBvc2l0aW9uXG4gICAgQHJlYWRvbmx5XG4gICovXG5cbiAgLyoqIE9sZCBzZWxlY3Rpb24gKi9cblxuICAvKiogQ3VycmVudCBjdXJzb3IgcG9zaXRpb24gKi9cblxuXG4gIGNyZWF0ZUNsYXNzKEFjdGlvbkRldGFpbHMsIFt7XG4gICAga2V5OiAnc3RhcnRDaGFuZ2VQb3MnLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgcmV0dXJuIE1hdGgubWluKHRoaXMuY3Vyc29yUG9zLCB0aGlzLm9sZFNlbGVjdGlvbi5zdGFydCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICBJbnNlcnRlZCBzeW1ib2xzIGNvdW50XG4gICAgICBAcmVhZG9ubHlcbiAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdpbnNlcnRlZENvdW50JyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHJldHVybiB0aGlzLmN1cnNvclBvcyAtIHRoaXMuc3RhcnRDaGFuZ2VQb3M7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICBJbnNlcnRlZCBzeW1ib2xzXG4gICAgICBAcmVhZG9ubHlcbiAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdpbnNlcnRlZCcsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHIodGhpcy5zdGFydENoYW5nZVBvcywgdGhpcy5pbnNlcnRlZENvdW50KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIFJlbW92ZWQgc3ltYm9scyBjb3VudFxuICAgICAgQHJlYWRvbmx5XG4gICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAncmVtb3ZlZENvdW50JyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIC8vIE1hdGgubWF4IGZvciBvcHBvc2l0ZSBvcGVyYXRpb25cbiAgICAgIHJldHVybiBNYXRoLm1heCh0aGlzLm9sZFNlbGVjdGlvbi5lbmQgLSB0aGlzLnN0YXJ0Q2hhbmdlUG9zIHx8XG4gICAgICAvLyBmb3IgRGVsZXRlXG4gICAgICB0aGlzLm9sZFZhbHVlLmxlbmd0aCAtIHRoaXMudmFsdWUubGVuZ3RoLCAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIFJlbW92ZWQgc3ltYm9sc1xuICAgICAgQHJlYWRvbmx5XG4gICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAncmVtb3ZlZCcsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICByZXR1cm4gdGhpcy5vbGRWYWx1ZS5zdWJzdHIodGhpcy5zdGFydENoYW5nZVBvcywgdGhpcy5yZW1vdmVkQ291bnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAgVW5jaGFuZ2VkIGhlYWQgc3ltYm9sc1xuICAgICAgQHJlYWRvbmx5XG4gICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnaGVhZCcsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoMCwgdGhpcy5zdGFydENoYW5nZVBvcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICBVbmNoYW5nZWQgdGFpbCBzeW1ib2xzXG4gICAgICBAcmVhZG9ubHlcbiAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICd0YWlsJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlLnN1YnN0cmluZyh0aGlzLnN0YXJ0Q2hhbmdlUG9zICsgdGhpcy5pbnNlcnRlZENvdW50KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIFJlbW92ZSBkaXJlY3Rpb25cbiAgICAgIEByZWFkb25seVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3JlbW92ZURpcmVjdGlvbicsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICBpZiAoIXRoaXMucmVtb3ZlZENvdW50IHx8IHRoaXMuaW5zZXJ0ZWRDb3VudCkgcmV0dXJuIERJUkVDVElPTi5OT05FO1xuXG4gICAgICAvLyBhbGlnbiByaWdodCBpZiBkZWxldGUgYXQgcmlnaHQgb3IgaWYgcmFuZ2UgcmVtb3ZlZCAoZXZlbnQgd2l0aCBiYWNrc3BhY2UpXG4gICAgICByZXR1cm4gdGhpcy5vbGRTZWxlY3Rpb24uZW5kID09PSB0aGlzLmN1cnNvclBvcyB8fCB0aGlzLm9sZFNlbGVjdGlvbi5zdGFydCA9PT0gdGhpcy5jdXJzb3JQb3MgPyBESVJFQ1RJT04uUklHSFQgOiBESVJFQ1RJT04uTEVGVDtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIEFjdGlvbkRldGFpbHM7XG59KCk7XG5cbi8qKlxuICBQcm92aWRlcyBkZXRhaWxzIG9mIGNoYW5naW5nIG1vZGVsIHZhbHVlXG4gIEBwYXJhbSB7T2JqZWN0fSBbZGV0YWlsc11cbiAgQHBhcmFtIHtzdHJpbmd9IFtkZXRhaWxzLmluc2VydGVkXSAtIEluc2VydGVkIHN5bWJvbHNcbiAgQHBhcmFtIHtib29sZWFufSBbZGV0YWlscy5vdmVyZmxvd10gLSBJcyBvdmVyZmxvd2VkXG4gIEBwYXJhbSB7bnVtYmVyfSBbZGV0YWlscy5yZW1vdmVDb3VudF0gLSBSZW1vdmVkIHN5bWJvbHMgY291bnRcbiAgQHBhcmFtIHtudW1iZXJ9IFtkZXRhaWxzLnNoaWZ0XSAtIEFkZGl0aW9uYWwgb2Zmc2V0IGlmIGFueSBjaGFuZ2VzIG9jY3VycmVkIGJlZm9yZSBjdXJyZW50IHBvc2l0aW9uXG4qL1xudmFyIENoYW5nZURldGFpbHMgPSBmdW5jdGlvbiAoKSB7XG4gIC8qKiBBZGRpdGlvbmFsIG9mZnNldCBpZiBhbnkgY2hhbmdlcyBvY2N1cnJlZCBiZWZvcmUgY3VycmVudCBwb3NpdGlvbiAqL1xuXG4gIC8qKiBJbnNlcnRlZCBzeW1ib2xzICovXG4gIGZ1bmN0aW9uIENoYW5nZURldGFpbHMoZGV0YWlscykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIENoYW5nZURldGFpbHMpO1xuXG4gICAgX2V4dGVuZHModGhpcywge1xuICAgICAgaW5zZXJ0ZWQ6ICcnLFxuICAgICAgb3ZlcmZsb3c6IGZhbHNlLFxuICAgICAgc2hpZnQ6IDBcbiAgICB9LCBkZXRhaWxzKTtcbiAgfVxuXG4gIC8qKlxuICAgIEFnZ3JlZ2F0ZSBjaGFuZ2VzXG4gICAgQHJldHVybnMge0NoYW5nZURldGFpbHN9IGB0aGlzYFxuICAqL1xuXG4gIC8qKiBJcyBvdmVyZmxvd2VkICovXG5cblxuICBjcmVhdGVDbGFzcyhDaGFuZ2VEZXRhaWxzLCBbe1xuICAgIGtleTogJ2FnZ3JlZ2F0ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFnZ3JlZ2F0ZShkZXRhaWxzKSB7XG4gICAgICBpZiAoZGV0YWlscy5yYXdJbnNlcnRlZCkgdGhpcy5yYXdJbnNlcnRlZCArPSBkZXRhaWxzLnJhd0luc2VydGVkO1xuICAgICAgdGhpcy5pbnNlcnRlZCArPSBkZXRhaWxzLmluc2VydGVkO1xuICAgICAgdGhpcy5zaGlmdCArPSBkZXRhaWxzLnNoaWZ0O1xuICAgICAgdGhpcy5vdmVyZmxvdyA9IHRoaXMub3ZlcmZsb3cgfHwgZGV0YWlscy5vdmVyZmxvdztcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBUb3RhbCBvZmZzZXQgY29uc2lkZXJpbmcgYWxsIGNoYW5nZXMgKi9cblxuICB9LCB7XG4gICAga2V5OiAnb2Zmc2V0JyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNoaWZ0ICsgdGhpcy5pbnNlcnRlZC5sZW5ndGg7XG4gICAgfVxuXG4gICAgLyoqIFJhdyBpbnNlcnRlZCBpcyB1c2VkIGJ5IGR5bmFtaWMgbWFzayAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdyYXdJbnNlcnRlZCcsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmF3SW5zZXJ0ZWQgIT0gbnVsbCA/IHRoaXMuX3Jhd0luc2VydGVkIDogdGhpcy5pbnNlcnRlZDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0JCQxKHJhd0luc2VydGVkKSB7XG4gICAgICB0aGlzLl9yYXdJbnNlcnRlZCA9IHJhd0luc2VydGVkO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gQ2hhbmdlRGV0YWlscztcbn0oKTtcblxuLyoqIFN1cHBvcnRlZCBtYXNrIHR5cGUgKi9cblxuXG4vKiogQXBwZW5kIGZsYWdzICovXG5cblxuLyoqIEV4dHJhY3QgZmxhZ3MgKi9cblxuLyoqIFByb3ZpZGVzIGNvbW1vbiBtYXNraW5nIHN0dWZmICovXG52YXIgTWFza2VkID0gZnVuY3Rpb24gKCkge1xuICAvKiogRG9lcyBhZGRpdGlvbmFsIHByb2Nlc3NpbmcgaW4gdGhlIGVuZCBvZiBlZGl0aW5nICovXG5cbiAgLyoqIFRyYW5zZm9ybXMgdmFsdWUgYmVmb3JlIG1hc2sgcHJvY2Vzc2luZyAqL1xuICBmdW5jdGlvbiBNYXNrZWQob3B0cykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIE1hc2tlZCk7XG5cbiAgICB0aGlzLl92YWx1ZSA9ICcnO1xuICAgIHRoaXMuX3VwZGF0ZShfZXh0ZW5kcyh7fSwgTWFza2VkLkRFRkFVTFRTLCBvcHRzKSk7XG4gICAgdGhpcy5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKiBTZXRzIGFuZCBhcHBsaWVzIG5ldyBvcHRpb25zICovXG5cbiAgLyoqICovXG5cbiAgLyoqIFZhbGlkYXRlcyBpZiB2YWx1ZSBpcyBhY2NlcHRhYmxlICovXG4gIC8vICRTaGFwZTxNYXNrZWRPcHRpb25zPjsgVE9ETyBhZnRlciBmaXggaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2Zsb3cvaXNzdWVzLzQ3NzNcblxuICAvKiogQHR5cGUge01hc2t9ICovXG5cblxuICBjcmVhdGVDbGFzcyhNYXNrZWQsIFt7XG4gICAga2V5OiAndXBkYXRlT3B0aW9ucycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnMob3B0cykge1xuICAgICAgdGhpcy53aXRoVmFsdWVSZWZyZXNoKHRoaXMuX3VwZGF0ZS5iaW5kKHRoaXMsIG9wdHMpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIFNldHMgbmV3IG9wdGlvbnNcbiAgICAgIEBwcm90ZWN0ZWRcbiAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdfdXBkYXRlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZShvcHRzKSB7XG4gICAgICBfZXh0ZW5kcyh0aGlzLCBvcHRzKTtcbiAgICB9XG5cbiAgICAvKiogQ2xvbmVzIG1hc2tlZCB3aXRoIG9wdGlvbnMgYW5kIHZhbHVlICovXG5cbiAgfSwge1xuICAgIGtleTogJ2Nsb25lJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvbmUoKSB7XG4gICAgICB2YXIgbSA9IG5ldyBNYXNrZWQodGhpcyk7XG4gICAgICBtLl92YWx1ZSA9IHRoaXMudmFsdWUuc2xpY2UoKTtcbiAgICAgIHJldHVybiBtO1xuICAgIH1cblxuICAgIC8qKiAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdhc3NpZ24nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhc3NpZ24oc291cmNlKSB7XG4gICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICByZXR1cm4gX2V4dGVuZHModGhpcywgc291cmNlKTtcbiAgICB9XG5cbiAgICAvKiogUmVzZXRzIHZhbHVlICovXG5cbiAgfSwge1xuICAgIGtleTogJ3Jlc2V0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICB0aGlzLl92YWx1ZSA9ICcnO1xuICAgIH1cblxuICAgIC8qKiAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdyZXNvbHZlJyxcblxuXG4gICAgLyoqIFJlc29sdmUgbmV3IHZhbHVlICovXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc29sdmUodmFsdWUpIHtcbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgIHRoaXMuX2FwcGVuZCh2YWx1ZSwgeyBpbnB1dDogdHJ1ZSB9KTtcbiAgICAgIHRoaXMuX2FwcGVuZFRhaWwoKTtcbiAgICAgIHRoaXMuZG9Db21taXQoKTtcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH1cblxuICAgIC8qKiAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICduZWFyZXN0SW5wdXRQb3MnLFxuXG5cbiAgICAvKiogRmluZHMgbmVhcmVzdCBpbnB1dCBwb3NpdGlvbiBpbiBkaXJlY3Rpb24gKi9cbiAgICB2YWx1ZTogZnVuY3Rpb24gbmVhcmVzdElucHV0UG9zKGN1cnNvclBvcywgZGlyZWN0aW9uKSB7XG4gICAgICByZXR1cm4gY3Vyc29yUG9zO1xuICAgIH1cblxuICAgIC8qKiBFeHRyYWN0cyB2YWx1ZSBpbiByYW5nZSBjb25zaWRlcmluZyBmbGFncyAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdleHRyYWN0SW5wdXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBleHRyYWN0SW5wdXQoKSB7XG4gICAgICB2YXIgZnJvbVBvcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMDtcbiAgICAgIHZhciB0b1BvcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdGhpcy52YWx1ZS5sZW5ndGg7XG4gICAgICByZXR1cm4gdGhpcy52YWx1ZS5zbGljZShmcm9tUG9zLCB0b1Bvcyk7XG4gICAgfVxuXG4gICAgLyoqIEV4dHJhY3RzIHRhaWwgaW4gcmFuZ2UgKi9cblxuICB9LCB7XG4gICAga2V5OiAnX2V4dHJhY3RUYWlsJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2V4dHJhY3RUYWlsKCkge1xuICAgICAgdmFyIGZyb21Qb3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDA7XG4gICAgICB2YXIgdG9Qb3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRoaXMudmFsdWUubGVuZ3RoO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdGhpcy5leHRyYWN0SW5wdXQoZnJvbVBvcywgdG9Qb3MpLFxuICAgICAgICBmcm9tUG9zOiBmcm9tUG9zLFxuICAgICAgICB0b1BvczogdG9Qb3NcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqIEFwcGVuZHMgdGFpbCAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdfYXBwZW5kVGFpbCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9hcHBlbmRUYWlsKHRhaWwpIHtcbiAgICAgIHJldHVybiB0aGlzLl9hcHBlbmQodGFpbCA/IHRhaWwudmFsdWUgOiAnJywgeyB0YWlsOiB0cnVlIH0pO1xuICAgIH1cblxuICAgIC8qKiBBcHBlbmRzIHN5bWJvbHMgY29uc2lkZXJpbmcgZmxhZ3MgKi9cblxuICB9LCB7XG4gICAga2V5OiAnX2FwcGVuZCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9hcHBlbmQoc3RyKSB7XG4gICAgICB2YXIgZmxhZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgICB2YXIgb2xkVmFsdWVMZW5ndGggPSB0aGlzLnZhbHVlLmxlbmd0aDtcbiAgICAgIHZhciBjb25zaXN0ZW50VmFsdWUgPSB0aGlzLmNsb25lKCk7XG4gICAgICB2YXIgb3ZlcmZsb3cgPSBmYWxzZTtcblxuICAgICAgc3RyID0gdGhpcy5kb1ByZXBhcmUoc3RyLCBmbGFncyk7XG5cbiAgICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBzdHIubGVuZ3RoOyArK2NpKSB7XG4gICAgICAgIHRoaXMuX3ZhbHVlICs9IHN0cltjaV07XG4gICAgICAgIGlmICh0aGlzLmRvVmFsaWRhdGUoZmxhZ3MpID09PSBmYWxzZSkge1xuICAgICAgICAgIHRoaXMuYXNzaWduKGNvbnNpc3RlbnRWYWx1ZSk7XG4gICAgICAgICAgaWYgKCFmbGFncy5pbnB1dCkge1xuICAgICAgICAgICAgLy8gaW4gYGlucHV0YCBtb2RlIGRvbnQgc2tpcCBpbnZhbGlkIGNoYXJzXG4gICAgICAgICAgICBvdmVyZmxvdyA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zaXN0ZW50VmFsdWUgPSB0aGlzLmNsb25lKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgQ2hhbmdlRGV0YWlscyh7XG4gICAgICAgIGluc2VydGVkOiB0aGlzLnZhbHVlLnNsaWNlKG9sZFZhbHVlTGVuZ3RoKSxcbiAgICAgICAgb3ZlcmZsb3c6IG92ZXJmbG93XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKiogQXBwZW5kcyBzeW1ib2xzIGNvbnNpZGVyaW5nIHRhaWwgKi9cblxuICB9LCB7XG4gICAga2V5OiAnYXBwZW5kV2l0aFRhaWwnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhcHBlbmRXaXRoVGFpbChzdHIsIHRhaWwpIHtcbiAgICAgIC8vIFRPRE8gcmVmYWN0b3JcbiAgICAgIHZhciBhZ2dyZWdhdGVEZXRhaWxzID0gbmV3IENoYW5nZURldGFpbHMoKTtcbiAgICAgIHZhciBjb25zaXN0ZW50VmFsdWUgPSB0aGlzLmNsb25lKCk7XG4gICAgICB2YXIgY29uc2lzdGVudEFwcGVuZGVkID0gdm9pZCAwO1xuXG4gICAgICBmb3IgKHZhciBjaSA9IDA7IGNpIDwgc3RyLmxlbmd0aDsgKytjaSkge1xuICAgICAgICB2YXIgY2ggPSBzdHJbY2ldO1xuXG4gICAgICAgIHZhciBhcHBlbmREZXRhaWxzID0gdGhpcy5fYXBwZW5kKGNoLCB7IGlucHV0OiB0cnVlIH0pO1xuICAgICAgICBjb25zaXN0ZW50QXBwZW5kZWQgPSB0aGlzLmNsb25lKCk7XG4gICAgICAgIHZhciB0YWlsQXBwZW5kZWQgPSAhYXBwZW5kRGV0YWlscy5vdmVyZmxvdyAmJiAhdGhpcy5fYXBwZW5kVGFpbCh0YWlsKS5vdmVyZmxvdztcbiAgICAgICAgaWYgKCF0YWlsQXBwZW5kZWQgfHwgdGhpcy5kb1ZhbGlkYXRlKHsgdGFpbDogdHJ1ZSB9KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICB0aGlzLmFzc2lnbihjb25zaXN0ZW50VmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hc3NpZ24oY29uc2lzdGVudEFwcGVuZGVkKTtcbiAgICAgICAgY29uc2lzdGVudFZhbHVlID0gdGhpcy5jbG9uZSgpO1xuICAgICAgICBhZ2dyZWdhdGVEZXRhaWxzLmFnZ3JlZ2F0ZShhcHBlbmREZXRhaWxzKTtcbiAgICAgIH1cblxuICAgICAgLy8gVE9ETyBuZWVkZWQgZm9yIGNhc2VzIHdoZW5cbiAgICAgIC8vIDEpIFJFTU9WRSBPTkxZIEFORCBOTyBMT09QIEFUIEFMTFxuICAgICAgLy8gMikgbGFzdCBsb29wIGl0ZXJhdGlvbiByZW1vdmVzIHRhaWxcbiAgICAgIC8vIDMpIHdoZW4gYnJlYWtzIG9uIHRhaWwgaW5zZXJ0XG5cbiAgICAgIC8vIGFnZ3JlZ2F0ZSBvbmx5IHNoaWZ0IGZyb20gdGFpbFxuICAgICAgYWdncmVnYXRlRGV0YWlscy5zaGlmdCArPSB0aGlzLl9hcHBlbmRUYWlsKHRhaWwpLnNoaWZ0O1xuXG4gICAgICByZXR1cm4gYWdncmVnYXRlRGV0YWlscztcbiAgICB9XG5cbiAgICAvKiogKi9cblxuICB9LCB7XG4gICAga2V5OiAncmVtb3ZlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgdmFyIGZyb20gPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDA7XG4gICAgICB2YXIgY291bnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRoaXMudmFsdWUubGVuZ3RoIC0gZnJvbTtcblxuICAgICAgdGhpcy5fdmFsdWUgPSB0aGlzLnZhbHVlLnNsaWNlKDAsIGZyb20pICsgdGhpcy52YWx1ZS5zbGljZShmcm9tICsgY291bnQpO1xuICAgICAgcmV0dXJuIG5ldyBDaGFuZ2VEZXRhaWxzKCk7XG4gICAgfVxuXG4gICAgLyoqIENhbGxzIGZ1bmN0aW9uIGFuZCByZWFwcGxpZXMgY3VycmVudCB2YWx1ZSAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICd3aXRoVmFsdWVSZWZyZXNoJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gd2l0aFZhbHVlUmVmcmVzaChmbikge1xuICAgICAgaWYgKHRoaXMuX3JlZnJlc2hpbmcgfHwgIXRoaXMuaXNJbml0aWFsaXplZCkgcmV0dXJuIGZuKCk7XG4gICAgICB0aGlzLl9yZWZyZXNoaW5nID0gdHJ1ZTtcblxuICAgICAgdmFyIHVubWFza2VkID0gdGhpcy51bm1hc2tlZFZhbHVlO1xuXG4gICAgICB2YXIgcmV0ID0gZm4oKTtcblxuICAgICAgdGhpcy51bm1hc2tlZFZhbHVlID0gdW5tYXNrZWQ7XG5cbiAgICAgIGRlbGV0ZSB0aGlzLl9yZWZyZXNoaW5nO1xuICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIFByZXBhcmVzIHN0cmluZyBiZWZvcmUgbWFzayBwcm9jZXNzaW5nXG4gICAgICBAcHJvdGVjdGVkXG4gICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZG9QcmVwYXJlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZG9QcmVwYXJlKHN0cikge1xuICAgICAgdmFyIGZsYWdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgICAgcmV0dXJuIHRoaXMucHJlcGFyZShzdHIsIHRoaXMsIGZsYWdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIFZhbGlkYXRlcyBpZiB2YWx1ZSBpcyBhY2NlcHRhYmxlXG4gICAgICBAcHJvdGVjdGVkXG4gICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZG9WYWxpZGF0ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRvVmFsaWRhdGUoZmxhZ3MpIHtcbiAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRlKHRoaXMudmFsdWUsIHRoaXMsIGZsYWdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIERvZXMgYWRkaXRpb25hbCBwcm9jZXNzaW5nIGluIHRoZSBlbmQgb2YgZWRpdGluZ1xuICAgICAgQHByb3RlY3RlZFxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2RvQ29tbWl0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZG9Db21taXQoKSB7XG4gICAgICB0aGlzLmNvbW1pdCh0aGlzLnZhbHVlLCB0aGlzKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPXG4gICAgLy8gaW5zZXJ0IChzdHIsIGZyb21Qb3MsIGZsYWdzKVxuXG4gICAgLyoqICovXG5cbiAgfSwge1xuICAgIGtleTogJ3NwbGljZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNwbGljZShzdGFydCwgZGVsZXRlQ291bnQsIGluc2VydGVkLCByZW1vdmVEaXJlY3Rpb24pIHtcbiAgICAgIHZhciB0YWlsUG9zID0gc3RhcnQgKyBkZWxldGVDb3VudDtcbiAgICAgIHZhciB0YWlsID0gdGhpcy5fZXh0cmFjdFRhaWwodGFpbFBvcyk7XG5cbiAgICAgIHZhciBzdGFydENoYW5nZVBvcyA9IHRoaXMubmVhcmVzdElucHV0UG9zKHN0YXJ0LCByZW1vdmVEaXJlY3Rpb24pO1xuICAgICAgdmFyIGNoYW5nZURldGFpbHMgPSBuZXcgQ2hhbmdlRGV0YWlscyh7XG4gICAgICAgIHNoaWZ0OiBzdGFydENoYW5nZVBvcyAtIHN0YXJ0IC8vIGFkanVzdCBzaGlmdCBpZiBzdGFydCB3YXMgYWxpZ25lZFxuICAgICAgfSkuYWdncmVnYXRlKHRoaXMucmVtb3ZlKHN0YXJ0Q2hhbmdlUG9zKSkuYWdncmVnYXRlKHRoaXMuYXBwZW5kV2l0aFRhaWwoaW5zZXJ0ZWQsIHRhaWwpKTtcblxuICAgICAgcmV0dXJuIGNoYW5nZURldGFpbHM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAndmFsdWUnLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQkJDEodmFsdWUpIHtcbiAgICAgIHRoaXMucmVzb2x2ZSh2YWx1ZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAndW5tYXNrZWRWYWx1ZScsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0JCQxKHZhbHVlKSB7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICB0aGlzLl9hcHBlbmQodmFsdWUpO1xuICAgICAgdGhpcy5fYXBwZW5kVGFpbCgpO1xuICAgICAgdGhpcy5kb0NvbW1pdCgpO1xuICAgIH1cblxuICAgIC8qKiBWYWx1ZSB0aGF0IGluY2x1ZGVzIHJhdyB1c2VyIGlucHV0ICovXG5cbiAgfSwge1xuICAgIGtleTogJ3Jhd0lucHV0VmFsdWUnLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZXh0cmFjdElucHV0KDAsIHRoaXMudmFsdWUubGVuZ3RoLCB7IHJhdzogdHJ1ZSB9KTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0JCQxKHZhbHVlKSB7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICB0aGlzLl9hcHBlbmQodmFsdWUsIHsgcmF3OiB0cnVlIH0pO1xuICAgICAgdGhpcy5fYXBwZW5kVGFpbCgpO1xuICAgICAgdGhpcy5kb0NvbW1pdCgpO1xuICAgIH1cblxuICAgIC8qKiAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdpc0NvbXBsZXRlJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gTWFza2VkO1xufSgpO1xuXG5NYXNrZWQuREVGQVVMVFMgPSB7XG4gIHByZXBhcmU6IGZ1bmN0aW9uIHByZXBhcmUodmFsKSB7XG4gICAgcmV0dXJuIHZhbDtcbiAgfSxcbiAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuICBjb21taXQ6IGZ1bmN0aW9uIGNvbW1pdCgpIHt9XG59O1xuXG4vKiogR2V0IE1hc2tlZCBjbGFzcyBieSBtYXNrIHR5cGUgKi9cbmZ1bmN0aW9uIG1hc2tlZENsYXNzKG1hc2spIHtcbiAgaWYgKG1hc2sgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcignbWFzayBwcm9wZXJ0eSBzaG91bGQgYmUgZGVmaW5lZCcpO1xuICB9XG5cbiAgaWYgKG1hc2sgaW5zdGFuY2VvZiBSZWdFeHApIHJldHVybiBnLklNYXNrLk1hc2tlZFJlZ0V4cDtcbiAgaWYgKGlzU3RyaW5nKG1hc2spKSByZXR1cm4gZy5JTWFzay5NYXNrZWRQYXR0ZXJuO1xuICBpZiAobWFzayBpbnN0YW5jZW9mIERhdGUgfHwgbWFzayA9PT0gRGF0ZSkgcmV0dXJuIGcuSU1hc2suTWFza2VkRGF0ZTtcbiAgaWYgKG1hc2sgaW5zdGFuY2VvZiBOdW1iZXIgfHwgdHlwZW9mIG1hc2sgPT09ICdudW1iZXInIHx8IG1hc2sgPT09IE51bWJlcikgcmV0dXJuIGcuSU1hc2suTWFza2VkTnVtYmVyO1xuICBpZiAoQXJyYXkuaXNBcnJheShtYXNrKSB8fCBtYXNrID09PSBBcnJheSkgcmV0dXJuIGcuSU1hc2suTWFza2VkRHluYW1pYztcbiAgLy8gJEZsb3dGaXhNZVxuICBpZiAobWFzay5wcm90b3R5cGUgaW5zdGFuY2VvZiBnLklNYXNrLk1hc2tlZCkgcmV0dXJuIG1hc2s7XG4gIC8vICRGbG93Rml4TWVcbiAgaWYgKG1hc2sgaW5zdGFuY2VvZiBGdW5jdGlvbikgcmV0dXJuIGcuSU1hc2suTWFza2VkRnVuY3Rpb247XG5cbiAgY29uc29sZS53YXJuKCdNYXNrIG5vdCBmb3VuZCBmb3IgbWFzaycsIG1hc2spOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgcmV0dXJuIGcuSU1hc2suTWFza2VkO1xufVxuXG4vKiogQ3JlYXRlcyBuZXcge0BsaW5rIE1hc2tlZH0gZGVwZW5kaW5nIG9uIG1hc2sgdHlwZSAqL1xuZnVuY3Rpb24gY3JlYXRlTWFzayhvcHRzKSB7XG4gIG9wdHMgPSBfZXh0ZW5kcyh7fSwgb3B0cyk7IC8vIGNsb25lXG4gIHZhciBtYXNrID0gb3B0cy5tYXNrO1xuXG4gIGlmIChtYXNrIGluc3RhbmNlb2YgZy5JTWFzay5NYXNrZWQpIHJldHVybiBtYXNrO1xuXG4gIHZhciBNYXNrZWRDbGFzcyA9IG1hc2tlZENsYXNzKG1hc2spO1xuICByZXR1cm4gbmV3IE1hc2tlZENsYXNzKG9wdHMpO1xufVxuXG4vKiogKi9cblxuLyoqICovXG52YXIgUGF0dGVybkRlZmluaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gIC8qKiAqL1xuXG4gIC8qKiAqL1xuXG4gIC8qKiAqL1xuICBmdW5jdGlvbiBQYXR0ZXJuRGVmaW5pdGlvbihvcHRzKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgUGF0dGVybkRlZmluaXRpb24pO1xuICAgIC8vIFRPRE8gZmxvd1xuICAgIF9leHRlbmRzKHRoaXMsIG9wdHMpO1xuXG4gICAgaWYgKHRoaXMubWFzaykge1xuICAgICAgdGhpcy5fbWFza2VkID0gY3JlYXRlTWFzayhvcHRzKTtcbiAgICB9XG4gIH1cblxuICAvKiogKi9cblxuICAvKiogKi9cblxuICAvKiogKi9cblxuICAvKiogKi9cblxuXG4gIC8qKiAqL1xuXG5cbiAgY3JlYXRlQ2xhc3MoUGF0dGVybkRlZmluaXRpb24sIFt7XG4gICAga2V5OiAncmVzZXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgIHRoaXMuaXNIb2xsb3cgPSBmYWxzZTtcbiAgICAgIHRoaXMuaXNSYXdJbnB1dCA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMuX21hc2tlZCkgdGhpcy5fbWFza2VkLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgLyoqICovXG5cbiAgfSwge1xuICAgIGtleTogJ3Jlc29sdmUnLFxuXG5cbiAgICAvKiogKi9cbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZShjaCkge1xuICAgICAgaWYgKCF0aGlzLl9tYXNrZWQpIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiB0aGlzLl9tYXNrZWQucmVzb2x2ZShjaCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnaXNJbnB1dCcsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICByZXR1cm4gdGhpcy50eXBlID09PSBQYXR0ZXJuRGVmaW5pdGlvbi5UWVBFUy5JTlBVVDtcbiAgICB9XG5cbiAgICAvKiogKi9cblxuICB9LCB7XG4gICAga2V5OiAnaXNIaWRkZW5Ib2xsb3cnLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXNIb2xsb3cgJiYgdGhpcy5vcHRpb25hbDtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIFBhdHRlcm5EZWZpbml0aW9uO1xufSgpO1xuXG5QYXR0ZXJuRGVmaW5pdGlvbi5ERUZBVUxUUyA9IHtcbiAgJzAnOiAvXFxkLyxcbiAgJ2EnOiAvW1xcdTAwNDEtXFx1MDA1QVxcdTAwNjEtXFx1MDA3QVxcdTAwQUFcXHUwMEI1XFx1MDBCQVxcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBGNlxcdTAwRjgtXFx1MDJDMVxcdTAyQzYtXFx1MDJEMVxcdTAyRTAtXFx1MDJFNFxcdTAyRUNcXHUwMkVFXFx1MDM3MC1cXHUwMzc0XFx1MDM3NlxcdTAzNzdcXHUwMzdBLVxcdTAzN0RcXHUwMzg2XFx1MDM4OC1cXHUwMzhBXFx1MDM4Q1xcdTAzOEUtXFx1MDNBMVxcdTAzQTMtXFx1MDNGNVxcdTAzRjctXFx1MDQ4MVxcdTA0OEEtXFx1MDUyN1xcdTA1MzEtXFx1MDU1NlxcdTA1NTlcXHUwNTYxLVxcdTA1ODdcXHUwNUQwLVxcdTA1RUFcXHUwNUYwLVxcdTA1RjJcXHUwNjIwLVxcdTA2NEFcXHUwNjZFXFx1MDY2RlxcdTA2NzEtXFx1MDZEM1xcdTA2RDVcXHUwNkU1XFx1MDZFNlxcdTA2RUVcXHUwNkVGXFx1MDZGQS1cXHUwNkZDXFx1MDZGRlxcdTA3MTBcXHUwNzEyLVxcdTA3MkZcXHUwNzRELVxcdTA3QTVcXHUwN0IxXFx1MDdDQS1cXHUwN0VBXFx1MDdGNFxcdTA3RjVcXHUwN0ZBXFx1MDgwMC1cXHUwODE1XFx1MDgxQVxcdTA4MjRcXHUwODI4XFx1MDg0MC1cXHUwODU4XFx1MDhBMFxcdTA4QTItXFx1MDhBQ1xcdTA5MDQtXFx1MDkzOVxcdTA5M0RcXHUwOTUwXFx1MDk1OC1cXHUwOTYxXFx1MDk3MS1cXHUwOTc3XFx1MDk3OS1cXHUwOTdGXFx1MDk4NS1cXHUwOThDXFx1MDk4RlxcdTA5OTBcXHUwOTkzLVxcdTA5QThcXHUwOUFBLVxcdTA5QjBcXHUwOUIyXFx1MDlCNi1cXHUwOUI5XFx1MDlCRFxcdTA5Q0VcXHUwOURDXFx1MDlERFxcdTA5REYtXFx1MDlFMVxcdTA5RjBcXHUwOUYxXFx1MEEwNS1cXHUwQTBBXFx1MEEwRlxcdTBBMTBcXHUwQTEzLVxcdTBBMjhcXHUwQTJBLVxcdTBBMzBcXHUwQTMyXFx1MEEzM1xcdTBBMzVcXHUwQTM2XFx1MEEzOFxcdTBBMzlcXHUwQTU5LVxcdTBBNUNcXHUwQTVFXFx1MEE3Mi1cXHUwQTc0XFx1MEE4NS1cXHUwQThEXFx1MEE4Ri1cXHUwQTkxXFx1MEE5My1cXHUwQUE4XFx1MEFBQS1cXHUwQUIwXFx1MEFCMlxcdTBBQjNcXHUwQUI1LVxcdTBBQjlcXHUwQUJEXFx1MEFEMFxcdTBBRTBcXHUwQUUxXFx1MEIwNS1cXHUwQjBDXFx1MEIwRlxcdTBCMTBcXHUwQjEzLVxcdTBCMjhcXHUwQjJBLVxcdTBCMzBcXHUwQjMyXFx1MEIzM1xcdTBCMzUtXFx1MEIzOVxcdTBCM0RcXHUwQjVDXFx1MEI1RFxcdTBCNUYtXFx1MEI2MVxcdTBCNzFcXHUwQjgzXFx1MEI4NS1cXHUwQjhBXFx1MEI4RS1cXHUwQjkwXFx1MEI5Mi1cXHUwQjk1XFx1MEI5OVxcdTBCOUFcXHUwQjlDXFx1MEI5RVxcdTBCOUZcXHUwQkEzXFx1MEJBNFxcdTBCQTgtXFx1MEJBQVxcdTBCQUUtXFx1MEJCOVxcdTBCRDBcXHUwQzA1LVxcdTBDMENcXHUwQzBFLVxcdTBDMTBcXHUwQzEyLVxcdTBDMjhcXHUwQzJBLVxcdTBDMzNcXHUwQzM1LVxcdTBDMzlcXHUwQzNEXFx1MEM1OFxcdTBDNTlcXHUwQzYwXFx1MEM2MVxcdTBDODUtXFx1MEM4Q1xcdTBDOEUtXFx1MEM5MFxcdTBDOTItXFx1MENBOFxcdTBDQUEtXFx1MENCM1xcdTBDQjUtXFx1MENCOVxcdTBDQkRcXHUwQ0RFXFx1MENFMFxcdTBDRTFcXHUwQ0YxXFx1MENGMlxcdTBEMDUtXFx1MEQwQ1xcdTBEMEUtXFx1MEQxMFxcdTBEMTItXFx1MEQzQVxcdTBEM0RcXHUwRDRFXFx1MEQ2MFxcdTBENjFcXHUwRDdBLVxcdTBEN0ZcXHUwRDg1LVxcdTBEOTZcXHUwRDlBLVxcdTBEQjFcXHUwREIzLVxcdTBEQkJcXHUwREJEXFx1MERDMC1cXHUwREM2XFx1MEUwMS1cXHUwRTMwXFx1MEUzMlxcdTBFMzNcXHUwRTQwLVxcdTBFNDZcXHUwRTgxXFx1MEU4MlxcdTBFODRcXHUwRTg3XFx1MEU4OFxcdTBFOEFcXHUwRThEXFx1MEU5NC1cXHUwRTk3XFx1MEU5OS1cXHUwRTlGXFx1MEVBMS1cXHUwRUEzXFx1MEVBNVxcdTBFQTdcXHUwRUFBXFx1MEVBQlxcdTBFQUQtXFx1MEVCMFxcdTBFQjJcXHUwRUIzXFx1MEVCRFxcdTBFQzAtXFx1MEVDNFxcdTBFQzZcXHUwRURDLVxcdTBFREZcXHUwRjAwXFx1MEY0MC1cXHUwRjQ3XFx1MEY0OS1cXHUwRjZDXFx1MEY4OC1cXHUwRjhDXFx1MTAwMC1cXHUxMDJBXFx1MTAzRlxcdTEwNTAtXFx1MTA1NVxcdTEwNUEtXFx1MTA1RFxcdTEwNjFcXHUxMDY1XFx1MTA2NlxcdTEwNkUtXFx1MTA3MFxcdTEwNzUtXFx1MTA4MVxcdTEwOEVcXHUxMEEwLVxcdTEwQzVcXHUxMEM3XFx1MTBDRFxcdTEwRDAtXFx1MTBGQVxcdTEwRkMtXFx1MTI0OFxcdTEyNEEtXFx1MTI0RFxcdTEyNTAtXFx1MTI1NlxcdTEyNThcXHUxMjVBLVxcdTEyNURcXHUxMjYwLVxcdTEyODhcXHUxMjhBLVxcdTEyOERcXHUxMjkwLVxcdTEyQjBcXHUxMkIyLVxcdTEyQjVcXHUxMkI4LVxcdTEyQkVcXHUxMkMwXFx1MTJDMi1cXHUxMkM1XFx1MTJDOC1cXHUxMkQ2XFx1MTJEOC1cXHUxMzEwXFx1MTMxMi1cXHUxMzE1XFx1MTMxOC1cXHUxMzVBXFx1MTM4MC1cXHUxMzhGXFx1MTNBMC1cXHUxM0Y0XFx1MTQwMS1cXHUxNjZDXFx1MTY2Ri1cXHUxNjdGXFx1MTY4MS1cXHUxNjlBXFx1MTZBMC1cXHUxNkVBXFx1MTcwMC1cXHUxNzBDXFx1MTcwRS1cXHUxNzExXFx1MTcyMC1cXHUxNzMxXFx1MTc0MC1cXHUxNzUxXFx1MTc2MC1cXHUxNzZDXFx1MTc2RS1cXHUxNzcwXFx1MTc4MC1cXHUxN0IzXFx1MTdEN1xcdTE3RENcXHUxODIwLVxcdTE4NzdcXHUxODgwLVxcdTE4QThcXHUxOEFBXFx1MThCMC1cXHUxOEY1XFx1MTkwMC1cXHUxOTFDXFx1MTk1MC1cXHUxOTZEXFx1MTk3MC1cXHUxOTc0XFx1MTk4MC1cXHUxOUFCXFx1MTlDMS1cXHUxOUM3XFx1MUEwMC1cXHUxQTE2XFx1MUEyMC1cXHUxQTU0XFx1MUFBN1xcdTFCMDUtXFx1MUIzM1xcdTFCNDUtXFx1MUI0QlxcdTFCODMtXFx1MUJBMFxcdTFCQUVcXHUxQkFGXFx1MUJCQS1cXHUxQkU1XFx1MUMwMC1cXHUxQzIzXFx1MUM0RC1cXHUxQzRGXFx1MUM1QS1cXHUxQzdEXFx1MUNFOS1cXHUxQ0VDXFx1MUNFRS1cXHUxQ0YxXFx1MUNGNVxcdTFDRjZcXHUxRDAwLVxcdTFEQkZcXHUxRTAwLVxcdTFGMTVcXHUxRjE4LVxcdTFGMURcXHUxRjIwLVxcdTFGNDVcXHUxRjQ4LVxcdTFGNERcXHUxRjUwLVxcdTFGNTdcXHUxRjU5XFx1MUY1QlxcdTFGNURcXHUxRjVGLVxcdTFGN0RcXHUxRjgwLVxcdTFGQjRcXHUxRkI2LVxcdTFGQkNcXHUxRkJFXFx1MUZDMi1cXHUxRkM0XFx1MUZDNi1cXHUxRkNDXFx1MUZEMC1cXHUxRkQzXFx1MUZENi1cXHUxRkRCXFx1MUZFMC1cXHUxRkVDXFx1MUZGMi1cXHUxRkY0XFx1MUZGNi1cXHUxRkZDXFx1MjA3MVxcdTIwN0ZcXHUyMDkwLVxcdTIwOUNcXHUyMTAyXFx1MjEwN1xcdTIxMEEtXFx1MjExM1xcdTIxMTVcXHUyMTE5LVxcdTIxMURcXHUyMTI0XFx1MjEyNlxcdTIxMjhcXHUyMTJBLVxcdTIxMkRcXHUyMTJGLVxcdTIxMzlcXHUyMTNDLVxcdTIxM0ZcXHUyMTQ1LVxcdTIxNDlcXHUyMTRFXFx1MjE4M1xcdTIxODRcXHUyQzAwLVxcdTJDMkVcXHUyQzMwLVxcdTJDNUVcXHUyQzYwLVxcdTJDRTRcXHUyQ0VCLVxcdTJDRUVcXHUyQ0YyXFx1MkNGM1xcdTJEMDAtXFx1MkQyNVxcdTJEMjdcXHUyRDJEXFx1MkQzMC1cXHUyRDY3XFx1MkQ2RlxcdTJEODAtXFx1MkQ5NlxcdTJEQTAtXFx1MkRBNlxcdTJEQTgtXFx1MkRBRVxcdTJEQjAtXFx1MkRCNlxcdTJEQjgtXFx1MkRCRVxcdTJEQzAtXFx1MkRDNlxcdTJEQzgtXFx1MkRDRVxcdTJERDAtXFx1MkRENlxcdTJERDgtXFx1MkRERVxcdTJFMkZcXHUzMDA1XFx1MzAwNlxcdTMwMzEtXFx1MzAzNVxcdTMwM0JcXHUzMDNDXFx1MzA0MS1cXHUzMDk2XFx1MzA5RC1cXHUzMDlGXFx1MzBBMS1cXHUzMEZBXFx1MzBGQy1cXHUzMEZGXFx1MzEwNS1cXHUzMTJEXFx1MzEzMS1cXHUzMThFXFx1MzFBMC1cXHUzMUJBXFx1MzFGMC1cXHUzMUZGXFx1MzQwMC1cXHU0REI1XFx1NEUwMC1cXHU5RkNDXFx1QTAwMC1cXHVBNDhDXFx1QTREMC1cXHVBNEZEXFx1QTUwMC1cXHVBNjBDXFx1QTYxMC1cXHVBNjFGXFx1QTYyQVxcdUE2MkJcXHVBNjQwLVxcdUE2NkVcXHVBNjdGLVxcdUE2OTdcXHVBNkEwLVxcdUE2RTVcXHVBNzE3LVxcdUE3MUZcXHVBNzIyLVxcdUE3ODhcXHVBNzhCLVxcdUE3OEVcXHVBNzkwLVxcdUE3OTNcXHVBN0EwLVxcdUE3QUFcXHVBN0Y4LVxcdUE4MDFcXHVBODAzLVxcdUE4MDVcXHVBODA3LVxcdUE4MEFcXHVBODBDLVxcdUE4MjJcXHVBODQwLVxcdUE4NzNcXHVBODgyLVxcdUE4QjNcXHVBOEYyLVxcdUE4RjdcXHVBOEZCXFx1QTkwQS1cXHVBOTI1XFx1QTkzMC1cXHVBOTQ2XFx1QTk2MC1cXHVBOTdDXFx1QTk4NC1cXHVBOUIyXFx1QTlDRlxcdUFBMDAtXFx1QUEyOFxcdUFBNDAtXFx1QUE0MlxcdUFBNDQtXFx1QUE0QlxcdUFBNjAtXFx1QUE3NlxcdUFBN0FcXHVBQTgwLVxcdUFBQUZcXHVBQUIxXFx1QUFCNVxcdUFBQjZcXHVBQUI5LVxcdUFBQkRcXHVBQUMwXFx1QUFDMlxcdUFBREItXFx1QUFERFxcdUFBRTAtXFx1QUFFQVxcdUFBRjItXFx1QUFGNFxcdUFCMDEtXFx1QUIwNlxcdUFCMDktXFx1QUIwRVxcdUFCMTEtXFx1QUIxNlxcdUFCMjAtXFx1QUIyNlxcdUFCMjgtXFx1QUIyRVxcdUFCQzAtXFx1QUJFMlxcdUFDMDAtXFx1RDdBM1xcdUQ3QjAtXFx1RDdDNlxcdUQ3Q0ItXFx1RDdGQlxcdUY5MDAtXFx1RkE2RFxcdUZBNzAtXFx1RkFEOVxcdUZCMDAtXFx1RkIwNlxcdUZCMTMtXFx1RkIxN1xcdUZCMURcXHVGQjFGLVxcdUZCMjhcXHVGQjJBLVxcdUZCMzZcXHVGQjM4LVxcdUZCM0NcXHVGQjNFXFx1RkI0MFxcdUZCNDFcXHVGQjQzXFx1RkI0NFxcdUZCNDYtXFx1RkJCMVxcdUZCRDMtXFx1RkQzRFxcdUZENTAtXFx1RkQ4RlxcdUZEOTItXFx1RkRDN1xcdUZERjAtXFx1RkRGQlxcdUZFNzAtXFx1RkU3NFxcdUZFNzYtXFx1RkVGQ1xcdUZGMjEtXFx1RkYzQVxcdUZGNDEtXFx1RkY1QVxcdUZGNjYtXFx1RkZCRVxcdUZGQzItXFx1RkZDN1xcdUZGQ0EtXFx1RkZDRlxcdUZGRDItXFx1RkZEN1xcdUZGREEtXFx1RkZEQ10vLCAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjA3NTA3MFxuICAnKic6IC8uL1xufTtcbi8qKlxuICBAcHJvcCB7c3RyaW5nfSBJTlBVVFxuICBAcHJvcCB7c3RyaW5nfSBGSVhFRFxuKi9cblBhdHRlcm5EZWZpbml0aW9uLlRZUEVTID0ge1xuICBJTlBVVDogJ2lucHV0JyxcbiAgRklYRUQ6ICdmaXhlZCdcbn07XG5cbi8qKiAqL1xuXG5cbi8qKiAqL1xuXG4vKipcbiAgUGF0dGVybiBncm91cCBzeW1ib2xzIGZyb20gcGFyZW50XG4gIEBwYXJhbSB7TWFza2VkUGF0dGVybn0gbWFza2VkIC0gSW50ZXJuYWwge0BsaW5rIG1hc2tlZH0gbW9kZWxcbiAgQHBhcmFtIHtPYmplY3R9IG9wdHNcbiAgQHBhcmFtIHtzdHJpbmd9IG9wdHMubmFtZSAtIEdyb3VwIG5hbWVcbiAgQHBhcmFtIHtudW1iZXJ9IG9wdHMub2Zmc2V0IC0gR3JvdXAgb2Zmc2V0IGluIG1hc2tlZCBkZWZpbml0aW9ucyBhcnJheVxuICBAcGFyYW0ge3N0cmluZ30gb3B0cy5tYXNrIC0gR3JvdXAgbWFza1xuICBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy52YWxpZGF0ZV0gLSBDdXN0b20gZ3JvdXAgdmFsaWRhdG9yXG4qL1xudmFyIFBhdHRlcm5Hcm91cCA9IGZ1bmN0aW9uICgpIHtcbiAgLyoqIEdyb3VwIG1hc2sgKi9cblxuICAvKiogR3JvdXAgbmFtZSAqL1xuXG4gIC8qKiAqL1xuICBmdW5jdGlvbiBQYXR0ZXJuR3JvdXAobWFza2VkLCBfcmVmKSB7XG4gICAgdmFyIG5hbWUgPSBfcmVmLm5hbWUsXG4gICAgICAgIG9mZnNldCA9IF9yZWYub2Zmc2V0LFxuICAgICAgICBtYXNrID0gX3JlZi5tYXNrLFxuICAgICAgICB2YWxpZGF0ZSA9IF9yZWYudmFsaWRhdGU7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgUGF0dGVybkdyb3VwKTtcblxuICAgIHRoaXMubWFza2VkID0gbWFza2VkO1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgdGhpcy5tYXNrID0gbWFzaztcbiAgICB0aGlzLnZhbGlkYXRlID0gdmFsaWRhdGUgfHwgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgfVxuXG4gIC8qKiBTbGljZSBvZiBpbnRlcm5hbCB7QGxpbmsgbWFza2VkfSB2YWx1ZSAqL1xuXG4gIC8qKiBDdXN0b20gZ3JvdXAgdmFsaWRhdG9yICovXG5cbiAgLyoqIEdyb3VwIG9mZnNldCBpbiBtYXNrZWQgZGVmaW5pdGlvbnMgYXJyYXkgKi9cblxuXG4gIC8qKiBJbnRlcm5hbCB7QGxpbmsgbWFza2VkfSBtb2RlbCAqL1xuXG4gIC8qKiAqL1xuXG5cbiAgY3JlYXRlQ2xhc3MoUGF0dGVybkdyb3VwLCBbe1xuICAgIGtleTogJ2RvVmFsaWRhdGUnLFxuXG5cbiAgICAvKiogVmFsaWRhdGVzIGlmIGN1cnJlbnQgdmFsdWUgaXMgYWNjZXB0YWJsZSAqL1xuICAgIHZhbHVlOiBmdW5jdGlvbiBkb1ZhbGlkYXRlKGZsYWdzKSB7XG4gICAgICByZXR1cm4gdGhpcy52YWxpZGF0ZSh0aGlzLnZhbHVlLCB0aGlzLCBmbGFncyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAndmFsdWUnLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgcmV0dXJuIHRoaXMubWFza2VkLnZhbHVlLnNsaWNlKHRoaXMubWFza2VkLm1hcERlZkluZGV4VG9Qb3ModGhpcy5vZmZzZXQpLCB0aGlzLm1hc2tlZC5tYXBEZWZJbmRleFRvUG9zKHRoaXMub2Zmc2V0ICsgdGhpcy5tYXNrLmxlbmd0aCkpO1xuICAgIH1cblxuICAgIC8qKiBVbm1hc2tlZCBzbGljZSBvZiBpbnRlcm5hbCB7QGxpbmsgbWFza2VkfSB2YWx1ZSAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICd1bm1hc2tlZFZhbHVlJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHJldHVybiB0aGlzLm1hc2tlZC5leHRyYWN0SW5wdXQodGhpcy5tYXNrZWQubWFwRGVmSW5kZXhUb1Bvcyh0aGlzLm9mZnNldCksIHRoaXMubWFza2VkLm1hcERlZkluZGV4VG9Qb3ModGhpcy5vZmZzZXQgKyB0aGlzLm1hc2subGVuZ3RoKSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBQYXR0ZXJuR3JvdXA7XG59KCk7XG5cbnZhciBSYW5nZUdyb3VwID0gZnVuY3Rpb24gKCkge1xuICAvKiogQHR5cGUge0Z1bmN0aW9ufSAqL1xuICBmdW5jdGlvbiBSYW5nZUdyb3VwKF9yZWYyKSB7XG4gICAgdmFyIF9yZWYzID0gc2xpY2VkVG9BcnJheShfcmVmMiwgMiksXG4gICAgICAgIGZyb20gPSBfcmVmM1swXSxcbiAgICAgICAgdG8gPSBfcmVmM1sxXTtcblxuICAgIHZhciBtYXhsZW4gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFN0cmluZyh0bykubGVuZ3RoO1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFJhbmdlR3JvdXApO1xuXG4gICAgdGhpcy5fZnJvbSA9IGZyb207XG4gICAgdGhpcy5fdG8gPSB0bztcbiAgICB0aGlzLl9tYXhMZW5ndGggPSBtYXhsZW47XG4gICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMudmFsaWRhdGUuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuX3VwZGF0ZSgpO1xuICB9XG4gIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuXG5cbiAgY3JlYXRlQ2xhc3MoUmFuZ2VHcm91cCwgW3tcbiAgICBrZXk6ICdfdXBkYXRlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZSgpIHtcbiAgICAgIHRoaXMuX21heExlbmd0aCA9IE1hdGgubWF4KHRoaXMuX21heExlbmd0aCwgU3RyaW5nKHRoaXMudG8pLmxlbmd0aCk7XG4gICAgICB0aGlzLm1hc2sgPSAnMCcucmVwZWF0KHRoaXMuX21heExlbmd0aCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAndmFsaWRhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB2YWxpZGF0ZShzdHIpIHtcbiAgICAgIHZhciBtaW5zdHIgPSAnJztcbiAgICAgIHZhciBtYXhzdHIgPSAnJztcblxuICAgICAgdmFyIF9yZWY0ID0gc3RyLm1hdGNoKC9eKFxcRCopKFxcZCopKFxcRCopLykgfHwgW10sXG4gICAgICAgICAgX3JlZjUgPSBzbGljZWRUb0FycmF5KF9yZWY0LCAzKSxcbiAgICAgICAgICBwbGFjZWhvbGRlciA9IF9yZWY1WzFdLFxuICAgICAgICAgIG51bSA9IF9yZWY1WzJdO1xuXG4gICAgICBpZiAobnVtKSB7XG4gICAgICAgIG1pbnN0ciA9ICcwJy5yZXBlYXQocGxhY2Vob2xkZXIubGVuZ3RoKSArIG51bTtcbiAgICAgICAgbWF4c3RyID0gJzknLnJlcGVhdChwbGFjZWhvbGRlci5sZW5ndGgpICsgbnVtO1xuICAgICAgfVxuXG4gICAgICB2YXIgZmlyc3ROb25aZXJvID0gc3RyLnNlYXJjaCgvW14wXS8pO1xuICAgICAgaWYgKGZpcnN0Tm9uWmVybyA9PT0gLTEgJiYgc3RyLmxlbmd0aCA8PSB0aGlzLl9tYXRjaEZyb20pIHJldHVybiB0cnVlO1xuXG4gICAgICBtaW5zdHIgPSBtaW5zdHIucGFkRW5kKHRoaXMuX21heExlbmd0aCwgJzAnKTtcbiAgICAgIG1heHN0ciA9IG1heHN0ci5wYWRFbmQodGhpcy5fbWF4TGVuZ3RoLCAnOScpO1xuXG4gICAgICByZXR1cm4gdGhpcy5mcm9tIDw9IE51bWJlcihtYXhzdHIpICYmIE51bWJlcihtaW5zdHIpIDw9IHRoaXMudG87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAndG8nLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3RvO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQkJDEodG8pIHtcbiAgICAgIHRoaXMuX3RvID0gdG87XG4gICAgICB0aGlzLl91cGRhdGUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdmcm9tJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9mcm9tO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQkJDEoZnJvbSkge1xuICAgICAgdGhpcy5fZnJvbSA9IGZyb207XG4gICAgICB0aGlzLl91cGRhdGUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdtYXhMZW5ndGgnLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX21heExlbmd0aDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0JCQxKG1heExlbmd0aCkge1xuICAgICAgdGhpcy5fbWF4TGVuZ3RoID0gbWF4TGVuZ3RoO1xuICAgICAgdGhpcy5fdXBkYXRlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnX21hdGNoRnJvbScsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXhMZW5ndGggLSBTdHJpbmcodGhpcy5mcm9tKS5sZW5ndGg7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBSYW5nZUdyb3VwO1xufSgpO1xuXG4vKiogUGF0dGVybiBncm91cCB0aGF0IHZhbGlkYXRlcyBlbnVtIHZhbHVlcyAqL1xuZnVuY3Rpb24gRW51bUdyb3VwKGVudW1zKSB7XG4gIHJldHVybiB7XG4gICAgbWFzazogJyonLnJlcGVhdChlbnVtc1swXS5sZW5ndGgpLFxuICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZSh2YWx1ZSwgZ3JvdXAsIGZsYWdzKSB7XG4gICAgICByZXR1cm4gZW51bXMuc29tZShmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gZS5pbmRleE9mKGdyb3VwLnVubWFza2VkVmFsdWUpID49IDA7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cblBhdHRlcm5Hcm91cC5SYW5nZSA9IFJhbmdlR3JvdXA7XG5QYXR0ZXJuR3JvdXAuRW51bSA9IEVudW1Hcm91cDtcblxudmFyIENodW5rc1RhaWxEZXRhaWxzID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBDaHVua3NUYWlsRGV0YWlscyhjaHVua3MpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBDaHVua3NUYWlsRGV0YWlscyk7XG5cbiAgICB0aGlzLmNodW5rcyA9IGNodW5rcztcbiAgfVxuXG4gIGNyZWF0ZUNsYXNzKENodW5rc1RhaWxEZXRhaWxzLCBbe1xuICAgIGtleTogJ3ZhbHVlJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHJldHVybiB0aGlzLmNodW5rcy5tYXAoZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgcmV0dXJuIGMudmFsdWU7XG4gICAgICB9KS5qb2luKCcnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdmcm9tUG9zJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHZhciBmaXJzdENodW5rID0gdGhpcy5jaHVua3NbMF07XG4gICAgICByZXR1cm4gZmlyc3RDaHVuayAmJiBmaXJzdENodW5rLnN0b3A7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAndG9Qb3MnLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgdmFyIGxhc3RDaHVuayA9IHRoaXMuY2h1bmtzW3RoaXMuY2h1bmtzLmxlbmd0aCAtIDFdO1xuICAgICAgcmV0dXJuIGxhc3RDaHVuayAmJiBsYXN0Q2h1bmsuc3RvcDtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIENodW5rc1RhaWxEZXRhaWxzO1xufSgpO1xuXG4vKipcbiAgUGF0dGVybiBtYXNrXG4gIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gIEBwYXJhbSB7T2JqZWN0fSBvcHRzLmdyb3Vwc1xuICBAcGFyYW0ge09iamVjdH0gb3B0cy5kZWZpbml0aW9uc1xuICBAcGFyYW0ge3N0cmluZ30gb3B0cy5wbGFjZWhvbGRlckNoYXJcbiAgQHBhcmFtIHtib29sZWFufSBvcHRzLmxhenlcbiovXG52YXIgTWFza2VkUGF0dGVybiA9IGZ1bmN0aW9uIChfTWFza2VkKSB7XG4gIGluaGVyaXRzKE1hc2tlZFBhdHRlcm4sIF9NYXNrZWQpO1xuXG4gIC8vIFRPRE8gbWFzayB0eXBlXG4gIC8qKiBTaW5nbGUgY2hhciBmb3IgZW1wdHkgaW5wdXQgKi9cblxuXG4gIC8qKiAqL1xuICBmdW5jdGlvbiBNYXNrZWRQYXR0ZXJuKCkge1xuICAgIHZhciBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBNYXNrZWRQYXR0ZXJuKTtcbiAgICAvLyBUT0RPIHR5cGUgJFNoYXBlPE1hc2tlZFBhdHRlcm5PcHRpb25zPj17fSBkb2VzIG5vdCB3b3JrXG4gICAgb3B0cy5kZWZpbml0aW9ucyA9IF9leHRlbmRzKHt9LCBQYXR0ZXJuRGVmaW5pdGlvbi5ERUZBVUxUUywgb3B0cy5kZWZpbml0aW9ucyk7XG4gICAgcmV0dXJuIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE1hc2tlZFBhdHRlcm4uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNYXNrZWRQYXR0ZXJuKSkuY2FsbCh0aGlzLCBfZXh0ZW5kcyh7fSwgTWFza2VkUGF0dGVybi5ERUZBVUxUUywgb3B0cykpKTtcbiAgfVxuXG4gIC8qKlxuICAgIEBvdmVycmlkZVxuICAgIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gICovXG5cbiAgLyoqIFNob3cgcGxhY2Vob2xkZXIgb25seSB3aGVuIG5lZWRlZCAqL1xuXG4gIC8qKiAqL1xuXG5cbiAgY3JlYXRlQ2xhc3MoTWFza2VkUGF0dGVybiwgW3tcbiAgICBrZXk6ICdfdXBkYXRlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZSgpIHtcbiAgICAgIHZhciBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAgICAgb3B0cy5kZWZpbml0aW9ucyA9IF9leHRlbmRzKHt9LCB0aGlzLmRlZmluaXRpb25zLCBvcHRzLmRlZmluaXRpb25zKTtcbiAgICAgIGdldChNYXNrZWRQYXR0ZXJuLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hc2tlZFBhdHRlcm4ucHJvdG90eXBlKSwgJ191cGRhdGUnLCB0aGlzKS5jYWxsKHRoaXMsIG9wdHMpO1xuICAgICAgdGhpcy5fcmVidWlsZE1hc2soKTtcbiAgICB9XG5cbiAgICAvKiogKi9cblxuICB9LCB7XG4gICAga2V5OiAnX3JlYnVpbGRNYXNrJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlYnVpbGRNYXNrKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBkZWZzID0gdGhpcy5kZWZpbml0aW9ucztcbiAgICAgIHRoaXMuX2NoYXJEZWZzID0gW107XG4gICAgICB0aGlzLl9ncm91cERlZnMgPSBbXTtcblxuICAgICAgdmFyIHBhdHRlcm4gPSB0aGlzLm1hc2s7XG4gICAgICBpZiAoIXBhdHRlcm4gfHwgIWRlZnMpIHJldHVybjtcblxuICAgICAgdmFyIHVubWFza2luZ0Jsb2NrID0gZmFsc2U7XG4gICAgICB2YXIgb3B0aW9uYWxCbG9jayA9IGZhbHNlO1xuICAgICAgdmFyIHN0b3BBbGlnbiA9IGZhbHNlO1xuXG4gICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChfaSkge1xuICAgICAgICBpZiAoX3RoaXMyLmdyb3Vwcykge1xuICAgICAgICAgIHZhciBwID0gcGF0dGVybi5zbGljZShfaSk7XG4gICAgICAgICAgdmFyIGdOYW1lcyA9IE9iamVjdC5rZXlzKF90aGlzMi5ncm91cHMpLmZpbHRlcihmdW5jdGlvbiAoZ05hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBwLmluZGV4T2YoZ05hbWUpID09PSAwO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vIG9yZGVyIGJ5IGtleSBsZW5ndGhcbiAgICAgICAgICBnTmFtZXMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGIubGVuZ3RoIC0gYS5sZW5ndGg7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy8gdXNlIGdyb3VwIG5hbWUgd2l0aCBtYXggbGVuZ3RoXG4gICAgICAgICAgdmFyIGdOYW1lID0gZ05hbWVzWzBdO1xuICAgICAgICAgIGlmIChnTmFtZSkge1xuICAgICAgICAgICAgdmFyIGdyb3VwID0gX3RoaXMyLmdyb3Vwc1tnTmFtZV07XG4gICAgICAgICAgICBfdGhpczIuX2dyb3VwRGVmcy5wdXNoKG5ldyBQYXR0ZXJuR3JvdXAoX3RoaXMyLCB7XG4gICAgICAgICAgICAgIG5hbWU6IGdOYW1lLFxuICAgICAgICAgICAgICBvZmZzZXQ6IF90aGlzMi5fY2hhckRlZnMubGVuZ3RoLFxuICAgICAgICAgICAgICBtYXNrOiBncm91cC5tYXNrLFxuICAgICAgICAgICAgICB2YWxpZGF0ZTogZ3JvdXAudmFsaWRhdGVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHBhdHRlcm4gPSBwYXR0ZXJuLnJlcGxhY2UoZ05hbWUsIGdyb3VwLm1hc2spO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjaGFyID0gcGF0dGVybltfaV07XG4gICAgICAgIHZhciB0eXBlID0gY2hhciBpbiBkZWZzID8gUGF0dGVybkRlZmluaXRpb24uVFlQRVMuSU5QVVQgOiBQYXR0ZXJuRGVmaW5pdGlvbi5UWVBFUy5GSVhFRDtcbiAgICAgICAgdmFyIHVubWFza2luZyA9IHR5cGUgPT09IFBhdHRlcm5EZWZpbml0aW9uLlRZUEVTLklOUFVUIHx8IHVubWFza2luZ0Jsb2NrO1xuICAgICAgICB2YXIgb3B0aW9uYWwgPSB0eXBlID09PSBQYXR0ZXJuRGVmaW5pdGlvbi5UWVBFUy5JTlBVVCAmJiBvcHRpb25hbEJsb2NrO1xuXG4gICAgICAgIGlmIChjaGFyID09PSBNYXNrZWRQYXR0ZXJuLlNUT1BfQ0hBUikge1xuICAgICAgICAgIHN0b3BBbGlnbiA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuICdjb250aW51ZSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhciA9PT0gJ3snIHx8IGNoYXIgPT09ICd9Jykge1xuICAgICAgICAgIHVubWFza2luZ0Jsb2NrID0gIXVubWFza2luZ0Jsb2NrO1xuICAgICAgICAgIHJldHVybiAnY29udGludWUnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYXIgPT09ICdbJyB8fCBjaGFyID09PSAnXScpIHtcbiAgICAgICAgICBvcHRpb25hbEJsb2NrID0gIW9wdGlvbmFsQmxvY2s7XG4gICAgICAgICAgcmV0dXJuICdjb250aW51ZSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhciA9PT0gTWFza2VkUGF0dGVybi5FU0NBUEVfQ0hBUikge1xuICAgICAgICAgICsrX2k7XG4gICAgICAgICAgY2hhciA9IHBhdHRlcm5bX2ldO1xuICAgICAgICAgIGlmICghY2hhcikgcmV0dXJuICdicmVhayc7XG4gICAgICAgICAgdHlwZSA9IFBhdHRlcm5EZWZpbml0aW9uLlRZUEVTLkZJWEVEO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLl9jaGFyRGVmcy5wdXNoKG5ldyBQYXR0ZXJuRGVmaW5pdGlvbih7XG4gICAgICAgICAgY2hhcjogY2hhcixcbiAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgIG9wdGlvbmFsOiBvcHRpb25hbCxcbiAgICAgICAgICBzdG9wQWxpZ246IHN0b3BBbGlnbixcbiAgICAgICAgICB1bm1hc2tpbmc6IHVubWFza2luZyxcbiAgICAgICAgICBtYXNrOiB0eXBlID09PSBQYXR0ZXJuRGVmaW5pdGlvbi5UWVBFUy5JTlBVVCA/IGRlZnNbY2hhcl0gOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gY2hhcjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcblxuICAgICAgICBzdG9wQWxpZ24gPSBmYWxzZTtcbiAgICAgICAgaSA9IF9pO1xuICAgICAgfTtcblxuICAgICAgX2xvb3AyOiBmb3IgKHZhciBpID0gMDsgaSA8IHBhdHRlcm4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIF9yZXQgPSBfbG9vcChpKTtcblxuICAgICAgICBzd2l0Y2ggKF9yZXQpIHtcbiAgICAgICAgICBjYXNlICdjb250aW51ZSc6XG4gICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgIGNhc2UgJ2JyZWFrJzpcbiAgICAgICAgICAgIGJyZWFrIF9sb29wMjt9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICBAb3ZlcnJpZGVcbiAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdkb1ZhbGlkYXRlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZG9WYWxpZGF0ZSgpIHtcbiAgICAgIHZhciBfYmFiZWxIZWxwZXJzJGdldDtcblxuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuX2dyb3VwRGVmcy5ldmVyeShmdW5jdGlvbiAoZyQkMSkge1xuICAgICAgICByZXR1cm4gZyQkMS5kb1ZhbGlkYXRlLmFwcGx5KGckJDEsIHRvQ29uc3VtYWJsZUFycmF5KGFyZ3MpKTtcbiAgICAgIH0pICYmIChfYmFiZWxIZWxwZXJzJGdldCA9IGdldChNYXNrZWRQYXR0ZXJuLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hc2tlZFBhdHRlcm4ucHJvdG90eXBlKSwgJ2RvVmFsaWRhdGUnLCB0aGlzKSkuY2FsbC5hcHBseShfYmFiZWxIZWxwZXJzJGdldCwgW3RoaXNdLmNvbmNhdCh0b0NvbnN1bWFibGVBcnJheShhcmdzKSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAgQG92ZXJyaWRlXG4gICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnY2xvbmUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9uZSgpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB2YXIgbSA9IG5ldyBNYXNrZWRQYXR0ZXJuKHRoaXMpO1xuICAgICAgbS5fdmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgbS5fY2hhckRlZnMuZm9yRWFjaChmdW5jdGlvbiAoZCwgaSkge1xuICAgICAgICByZXR1cm4gX2V4dGVuZHMoZCwgX3RoaXMzLl9jaGFyRGVmc1tpXSk7XG4gICAgICB9KTtcbiAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgIG0uX2dyb3VwRGVmcy5mb3JFYWNoKGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgICAgIHJldHVybiBfZXh0ZW5kcyhkLCBfdGhpczMuX2dyb3VwRGVmc1tpXSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBtO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAgQG92ZXJyaWRlXG4gICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAncmVzZXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgIGdldChNYXNrZWRQYXR0ZXJuLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hc2tlZFBhdHRlcm4ucHJvdG90eXBlKSwgJ3Jlc2V0JywgdGhpcykuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuX2NoYXJEZWZzLmZvckVhY2goZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgZGVsZXRlIGQuaXNIb2xsb3c7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIEBvdmVycmlkZVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2hpZGRlbkhvbGxvd3NCZWZvcmUnLFxuXG5cbiAgICAvKiogKi9cbiAgICB2YWx1ZTogZnVuY3Rpb24gaGlkZGVuSG9sbG93c0JlZm9yZShkZWZJbmRleCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NoYXJEZWZzLnNsaWNlKDAsIGRlZkluZGV4KS5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgcmV0dXJuIGQuaXNIaWRkZW5Ib2xsb3c7XG4gICAgICB9KS5sZW5ndGg7XG4gICAgfVxuXG4gICAgLyoqIE1hcCBkZWZpbml0aW9uIGluZGV4IHRvIHBvc2l0aW9uIG9uIHZpZXcgKi9cblxuICB9LCB7XG4gICAga2V5OiAnbWFwRGVmSW5kZXhUb1BvcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1hcERlZkluZGV4VG9Qb3MoZGVmSW5kZXgpIHtcbiAgICAgIHJldHVybiBkZWZJbmRleCAtIHRoaXMuaGlkZGVuSG9sbG93c0JlZm9yZShkZWZJbmRleCk7XG4gICAgfVxuXG4gICAgLyoqIE1hcCBwb3NpdGlvbiBvbiB2aWV3IHRvIGRlZmluaXRpb24gaW5kZXggKi9cblxuICB9LCB7XG4gICAga2V5OiAnbWFwUG9zVG9EZWZJbmRleCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1hcFBvc1RvRGVmSW5kZXgocG9zKSB7XG4gICAgICB2YXIgZGVmSW5kZXggPSBwb3M7XG4gICAgICBmb3IgKHZhciBkaSA9IDA7IGRpIDwgdGhpcy5fY2hhckRlZnMubGVuZ3RoOyArK2RpKSB7XG4gICAgICAgIHZhciBkZWYgPSB0aGlzLl9jaGFyRGVmc1tkaV07XG4gICAgICAgIGlmIChkaSA+PSBkZWZJbmRleCkgYnJlYWs7XG4gICAgICAgIGlmIChkZWYuaXNIaWRkZW5Ib2xsb3cpICsrZGVmSW5kZXg7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVmSW5kZXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICBAb3ZlcnJpZGVcbiAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdfYXBwZW5kVGFpbCcsXG5cblxuICAgIC8qKlxuICAgICAgQG92ZXJyaWRlXG4gICAgKi9cbiAgICB2YWx1ZTogZnVuY3Rpb24gX2FwcGVuZFRhaWwodGFpbCkge1xuICAgICAgdmFyIGRldGFpbHMgPSBuZXcgQ2hhbmdlRGV0YWlscygpO1xuICAgICAgaWYgKHRhaWwpIHtcbiAgICAgICAgZGV0YWlscy5hZ2dyZWdhdGUodGFpbCBpbnN0YW5jZW9mIENodW5rc1RhaWxEZXRhaWxzID8gdGhpcy5fYXBwZW5kQ2h1bmtzKHRhaWwuY2h1bmtzLCB7IHRhaWw6IHRydWUgfSkgOiBnZXQoTWFza2VkUGF0dGVybi5wcm90b3R5cGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNYXNrZWRQYXR0ZXJuLnByb3RvdHlwZSksICdfYXBwZW5kVGFpbCcsIHRoaXMpLmNhbGwodGhpcywgdGFpbCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRldGFpbHMuYWdncmVnYXRlKHRoaXMuX2FwcGVuZFBsYWNlaG9sZGVyKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAgQG92ZXJyaWRlXG4gICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnX2FwcGVuZCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9hcHBlbmQoc3RyKSB7XG4gICAgICB2YXIgZmxhZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgICB2YXIgb2xkVmFsdWVMZW5ndGggPSB0aGlzLnZhbHVlLmxlbmd0aDtcbiAgICAgIHZhciByYXdJbnNlcnRlZCA9ICcnO1xuICAgICAgdmFyIG92ZXJmbG93ID0gZmFsc2U7XG5cbiAgICAgIHN0ciA9IHRoaXMuZG9QcmVwYXJlKHN0ciwgZmxhZ3MpO1xuXG4gICAgICBmb3IgKHZhciBjaSA9IDAsIGRpID0gdGhpcy5tYXBQb3NUb0RlZkluZGV4KHRoaXMudmFsdWUubGVuZ3RoKTsgY2kgPCBzdHIubGVuZ3RoOykge1xuICAgICAgICB2YXIgY2ggPSBzdHJbY2ldO1xuICAgICAgICB2YXIgZGVmID0gdGhpcy5fY2hhckRlZnNbZGldO1xuXG4gICAgICAgIC8vIGNoZWNrIG92ZXJmbG93XG4gICAgICAgIGlmIChkZWYgPT0gbnVsbCkge1xuICAgICAgICAgIG92ZXJmbG93ID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlc2V0XG4gICAgICAgIGRlZi5pc0hvbGxvdyA9IGZhbHNlO1xuXG4gICAgICAgIHZhciByZXNvbHZlZCA9IHZvaWQgMCxcbiAgICAgICAgICAgIHNraXBwZWQgPSB2b2lkIDA7XG4gICAgICAgIHZhciBjaHJlcyA9IGNvbmZvcm0oZGVmLnJlc29sdmUoY2gpLCBjaCk7XG5cbiAgICAgICAgaWYgKGRlZi50eXBlID09PSBQYXR0ZXJuRGVmaW5pdGlvbi5UWVBFUy5JTlBVVCkge1xuICAgICAgICAgIGlmIChjaHJlcykge1xuICAgICAgICAgICAgdGhpcy5fdmFsdWUgKz0gY2hyZXM7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZG9WYWxpZGF0ZSgpKSB7XG4gICAgICAgICAgICAgIGNocmVzID0gJyc7XG4gICAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdGhpcy52YWx1ZS5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmVzb2x2ZWQgPSAhIWNocmVzO1xuICAgICAgICAgIHNraXBwZWQgPSAhY2hyZXMgJiYgIWRlZi5vcHRpb25hbDtcblxuICAgICAgICAgIGlmICghY2hyZXMpIHtcbiAgICAgICAgICAgIGlmICghZGVmLm9wdGlvbmFsICYmICFmbGFncy5pbnB1dCAmJiAhdGhpcy5sYXp5KSB7XG4gICAgICAgICAgICAgIHRoaXMuX3ZhbHVlICs9IHRoaXMucGxhY2Vob2xkZXJDaGFyO1xuICAgICAgICAgICAgICBza2lwcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXNraXBwZWQpIGRlZi5pc0hvbGxvdyA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJhd0luc2VydGVkICs9IGNocmVzO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl92YWx1ZSArPSBkZWYuY2hhcjtcbiAgICAgICAgICByZXNvbHZlZCA9IGNocmVzICYmIChkZWYudW5tYXNraW5nIHx8IGZsYWdzLmlucHV0IHx8IGZsYWdzLnJhdykgJiYgIWZsYWdzLnRhaWw7XG4gICAgICAgICAgZGVmLmlzUmF3SW5wdXQgPSByZXNvbHZlZCAmJiAoZmxhZ3MucmF3IHx8IGZsYWdzLmlucHV0KTtcbiAgICAgICAgICBpZiAoZGVmLmlzUmF3SW5wdXQpIHJhd0luc2VydGVkICs9IGRlZi5jaGFyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFza2lwcGVkKSArK2RpO1xuICAgICAgICBpZiAocmVzb2x2ZWQgfHwgc2tpcHBlZCkgKytjaTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBDaGFuZ2VEZXRhaWxzKHtcbiAgICAgICAgaW5zZXJ0ZWQ6IHRoaXMudmFsdWUuc2xpY2Uob2xkVmFsdWVMZW5ndGgpLFxuICAgICAgICByYXdJbnNlcnRlZDogcmF3SW5zZXJ0ZWQsXG4gICAgICAgIG92ZXJmbG93OiBvdmVyZmxvd1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqIEFwcGVuZHMgY2h1bmtzIHNwbGl0dGVkIGJ5IHN0b3AgY2hhcnMgKi9cblxuICB9LCB7XG4gICAga2V5OiAnX2FwcGVuZENodW5rcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9hcHBlbmRDaHVua3MoY2h1bmtzKSB7XG4gICAgICB2YXIgZGV0YWlscyA9IG5ldyBDaGFuZ2VEZXRhaWxzKCk7XG5cbiAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4yID4gMSA/IF9sZW4yIC0gMSA6IDApLCBfa2V5MiA9IDE7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgYXJnc1tfa2V5MiAtIDFdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IGNodW5rcy5sZW5ndGg7ICsrY2kpIHtcbiAgICAgICAgdmFyIF9jaHVua3MkY2kgPSBjaHVua3NbY2ldLFxuICAgICAgICAgICAgc3RvcCA9IF9jaHVua3MkY2kuc3RvcCxcbiAgICAgICAgICAgIHZhbHVlID0gX2NodW5rcyRjaS52YWx1ZTtcblxuICAgICAgICB2YXIgZnJvbURlZiA9IHN0b3AgIT0gbnVsbCAmJiB0aGlzLl9jaGFyRGVmc1tzdG9wXTtcbiAgICAgICAgLy8gbGV0cyBkb3VibGUgY2hlY2sgaWYgc3RvcEFsaWduIGlzIGhlcmVcbiAgICAgICAgaWYgKGZyb21EZWYgJiYgZnJvbURlZi5zdG9wQWxpZ24pIGRldGFpbHMuYWdncmVnYXRlKHRoaXMuX2FwcGVuZFBsYWNlaG9sZGVyKHN0b3ApKTtcbiAgICAgICAgaWYgKGRldGFpbHMuYWdncmVnYXRlKHRoaXMuX2FwcGVuZC5hcHBseSh0aGlzLCBbdmFsdWVdLmNvbmNhdCh0b0NvbnN1bWFibGVBcnJheShhcmdzKSkpKS5vdmVyZmxvdykgYnJlYWs7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGV0YWlscztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIEBvdmVycmlkZVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ19leHRyYWN0VGFpbCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9leHRyYWN0VGFpbCgpIHtcbiAgICAgIHZhciBmcm9tUG9zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAwO1xuICAgICAgdmFyIHRvUG9zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0aGlzLnZhbHVlLmxlbmd0aDtcblxuICAgICAgcmV0dXJuIG5ldyBDaHVua3NUYWlsRGV0YWlscyh0aGlzLl9leHRyYWN0SW5wdXRDaHVua3MoZnJvbVBvcywgdG9Qb3MpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIEBvdmVycmlkZVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2V4dHJhY3RJbnB1dCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGV4dHJhY3RJbnB1dCgpIHtcbiAgICAgIHZhciBmcm9tUG9zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAwO1xuICAgICAgdmFyIHRvUG9zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0aGlzLnZhbHVlLmxlbmd0aDtcbiAgICAgIHZhciBmbGFncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG5cbiAgICAgIGlmIChmcm9tUG9zID09PSB0b1BvcykgcmV0dXJuICcnO1xuXG4gICAgICB2YXIgc3RyID0gdGhpcy52YWx1ZTtcbiAgICAgIHZhciBpbnB1dCA9ICcnO1xuXG4gICAgICB2YXIgdG9EZWZJbmRleCA9IHRoaXMubWFwUG9zVG9EZWZJbmRleCh0b1Bvcyk7XG4gICAgICBmb3IgKHZhciBjaSA9IGZyb21Qb3MsIGRpID0gdGhpcy5tYXBQb3NUb0RlZkluZGV4KGZyb21Qb3MpOyBjaSA8IHRvUG9zICYmIGNpIDwgc3RyLmxlbmd0aCAmJiBkaSA8IHRvRGVmSW5kZXg7ICsrZGkpIHtcbiAgICAgICAgdmFyIGNoID0gc3RyW2NpXTtcbiAgICAgICAgdmFyIGRlZiA9IHRoaXMuX2NoYXJEZWZzW2RpXTtcblxuICAgICAgICBpZiAoIWRlZikgYnJlYWs7XG4gICAgICAgIGlmIChkZWYuaXNIaWRkZW5Ib2xsb3cpIGNvbnRpbnVlO1xuXG4gICAgICAgIGlmIChkZWYuaXNJbnB1dCAmJiAhZGVmLmlzSG9sbG93IHx8IGZsYWdzLnJhdyAmJiAhZGVmLmlzSW5wdXQgJiYgZGVmLmlzUmF3SW5wdXQpIGlucHV0ICs9IGNoO1xuICAgICAgICArK2NpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cblxuICAgIC8qKiBFeHRyYWN0cyBjaHVua3MgZnJvbSBpbnB1dCBzcGxpdHRlZCBieSBzdG9wIGNoYXJzICovXG5cbiAgfSwge1xuICAgIGtleTogJ19leHRyYWN0SW5wdXRDaHVua3MnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfZXh0cmFjdElucHV0Q2h1bmtzKCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIHZhciBmcm9tUG9zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAwO1xuICAgICAgdmFyIHRvUG9zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0aGlzLnZhbHVlLmxlbmd0aDtcblxuICAgICAgaWYgKGZyb21Qb3MgPT09IHRvUG9zKSByZXR1cm4gW107XG5cbiAgICAgIHZhciBmcm9tRGVmSW5kZXggPSB0aGlzLm1hcFBvc1RvRGVmSW5kZXgoZnJvbVBvcyk7XG4gICAgICB2YXIgdG9EZWZJbmRleCA9IHRoaXMubWFwUG9zVG9EZWZJbmRleCh0b1Bvcyk7XG4gICAgICB2YXIgc3RvcERlZkluZGljZXMgPSB0aGlzLl9jaGFyRGVmcy5tYXAoZnVuY3Rpb24gKGQsIGkpIHtcbiAgICAgICAgcmV0dXJuIFtkLCBpXTtcbiAgICAgIH0pLnNsaWNlKGZyb21EZWZJbmRleCwgdG9EZWZJbmRleCkuZmlsdGVyKGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICAgIHZhciBfcmVmMiA9IHNsaWNlZFRvQXJyYXkoX3JlZiwgMSksXG4gICAgICAgICAgICBkID0gX3JlZjJbMF07XG5cbiAgICAgICAgcmV0dXJuIGQuc3RvcEFsaWduO1xuICAgICAgfSkubWFwKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgICB2YXIgX3JlZjQgPSBzbGljZWRUb0FycmF5KF9yZWYzLCAyKSxcbiAgICAgICAgICAgIGkgPSBfcmVmNFsxXTtcblxuICAgICAgICByZXR1cm4gaTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgc3RvcHMgPSBbZnJvbURlZkluZGV4XS5jb25jYXQodG9Db25zdW1hYmxlQXJyYXkoc3RvcERlZkluZGljZXMpLCBbdG9EZWZJbmRleF0pO1xuXG4gICAgICByZXR1cm4gc3RvcHMubWFwKGZ1bmN0aW9uIChzLCBpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3RvcDogc3RvcERlZkluZGljZXMuaW5kZXhPZihzKSA+PSAwID8gcyA6IG51bGwsXG5cbiAgICAgICAgICB2YWx1ZTogX3RoaXM0LmV4dHJhY3RJbnB1dChfdGhpczQubWFwRGVmSW5kZXhUb1BvcyhzKSwgX3RoaXM0Lm1hcERlZkluZGV4VG9Qb3Moc3RvcHNbKytpXSkpXG4gICAgICAgIH07XG4gICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKF9yZWY1KSB7XG4gICAgICAgIHZhciBzdG9wID0gX3JlZjUuc3RvcCxcbiAgICAgICAgICAgIHZhbHVlID0gX3JlZjUudmFsdWU7XG4gICAgICAgIHJldHVybiBzdG9wICE9IG51bGwgfHwgdmFsdWU7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKiogQXBwZW5kcyBwbGFjZWhvbGRlciBkZXBlbmRpbmcgb24gbGF6aW5lc3MgKi9cblxuICB9LCB7XG4gICAga2V5OiAnX2FwcGVuZFBsYWNlaG9sZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2FwcGVuZFBsYWNlaG9sZGVyKHRvRGVmSW5kZXgpIHtcbiAgICAgIHZhciBvbGRWYWx1ZUxlbmd0aCA9IHRoaXMudmFsdWUubGVuZ3RoO1xuICAgICAgdmFyIG1heERlZkluZGV4ID0gdG9EZWZJbmRleCB8fCB0aGlzLl9jaGFyRGVmcy5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBkaSA9IHRoaXMubWFwUG9zVG9EZWZJbmRleCh0aGlzLnZhbHVlLmxlbmd0aCk7IGRpIDwgbWF4RGVmSW5kZXg7ICsrZGkpIHtcbiAgICAgICAgdmFyIGRlZiA9IHRoaXMuX2NoYXJEZWZzW2RpXTtcbiAgICAgICAgaWYgKGRlZi5pc0lucHV0KSBkZWYuaXNIb2xsb3cgPSB0cnVlO1xuXG4gICAgICAgIGlmICghdGhpcy5sYXp5IHx8IHRvRGVmSW5kZXgpIHtcbiAgICAgICAgICB0aGlzLl92YWx1ZSArPSAhZGVmLmlzSW5wdXQgJiYgZGVmLmNoYXIgIT0gbnVsbCA/IGRlZi5jaGFyIDogIWRlZi5vcHRpb25hbCA/IHRoaXMucGxhY2Vob2xkZXJDaGFyIDogJyc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgQ2hhbmdlRGV0YWlscyh7XG4gICAgICAgIGluc2VydGVkOiB0aGlzLnZhbHVlLnNsaWNlKG9sZFZhbHVlTGVuZ3RoKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICBAb3ZlcnJpZGVcbiAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdyZW1vdmUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICB2YXIgZnJvbSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMDtcbiAgICAgIHZhciBjb3VudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdGhpcy52YWx1ZS5sZW5ndGggLSBmcm9tO1xuXG4gICAgICB2YXIgZnJvbURlZkluZGV4ID0gdGhpcy5tYXBQb3NUb0RlZkluZGV4KGZyb20pO1xuICAgICAgdmFyIHRvRGVmSW5kZXggPSB0aGlzLm1hcFBvc1RvRGVmSW5kZXgoZnJvbSArIGNvdW50KTtcbiAgICAgIHRoaXMuX2NoYXJEZWZzLnNsaWNlKGZyb21EZWZJbmRleCwgdG9EZWZJbmRleCkuZm9yRWFjaChmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gZC5yZXNldCgpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBnZXQoTWFza2VkUGF0dGVybi5wcm90b3R5cGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNYXNrZWRQYXR0ZXJuLnByb3RvdHlwZSksICdyZW1vdmUnLCB0aGlzKS5jYWxsKHRoaXMsIGZyb20sIGNvdW50KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIEBvdmVycmlkZVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ25lYXJlc3RJbnB1dFBvcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG5lYXJlc3RJbnB1dFBvcyhjdXJzb3JQb3MpIHtcbiAgICAgIHZhciBkaXJlY3Rpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IERJUkVDVElPTi5OT05FO1xuXG4gICAgICB2YXIgc3RlcCA9IGRpcmVjdGlvbiB8fCBESVJFQ1RJT04uUklHSFQ7XG5cbiAgICAgIHZhciBpbml0aWFsRGVmSW5kZXggPSB0aGlzLm1hcFBvc1RvRGVmSW5kZXgoY3Vyc29yUG9zKTtcbiAgICAgIHZhciBpbml0aWFsRGVmID0gdGhpcy5fY2hhckRlZnNbaW5pdGlhbERlZkluZGV4XTtcbiAgICAgIHZhciBkaSA9IGluaXRpYWxEZWZJbmRleDtcblxuICAgICAgdmFyIGZpcnN0SW5wdXRJbmRleCA9IHZvaWQgMCxcbiAgICAgICAgICBmaXJzdEZpbGxlZElucHV0SW5kZXggPSB2b2lkIDAsXG4gICAgICAgICAgZmlyc3RWaXNpYmxlSG9sbG93SW5kZXggPSB2b2lkIDAsXG4gICAgICAgICAgbmV4dGRpID0gdm9pZCAwO1xuXG4gICAgICAvLyBjaGVjayBpZiBjaGFycyBhdCByaWdodCBpcyBhY2NlcHRhYmxlIGZvciBMRUZUIGFuZCBOT05FIGRpcmVjdGlvbnNcbiAgICAgIGlmIChkaXJlY3Rpb24gIT09IERJUkVDVElPTi5SSUdIVCAmJiAoaW5pdGlhbERlZiAmJiBpbml0aWFsRGVmLmlzSW5wdXQgfHxcbiAgICAgIC8vIGluIG5vbmUgZGlyZWN0aW9uIGxhdGVzdCBwb3NpdGlvbiBpcyBhY2NlcHRhYmxlIGFsc29cbiAgICAgIGRpcmVjdGlvbiA9PT0gRElSRUNUSU9OLk5PTkUgJiYgY3Vyc29yUG9zID09PSB0aGlzLnZhbHVlLmxlbmd0aCkpIHtcbiAgICAgICAgZmlyc3RJbnB1dEluZGV4ID0gaW5pdGlhbERlZkluZGV4O1xuICAgICAgICBpZiAoaW5pdGlhbERlZiAmJiAhaW5pdGlhbERlZi5pc0hvbGxvdykgZmlyc3RGaWxsZWRJbnB1dEluZGV4ID0gaW5pdGlhbERlZkluZGV4O1xuICAgICAgfVxuXG4gICAgICBpZiAoZmlyc3RGaWxsZWRJbnB1dEluZGV4ID09IG51bGwgJiYgZGlyZWN0aW9uID09IERJUkVDVElPTi5MRUZUIHx8IGZpcnN0SW5wdXRJbmRleCA9PSBudWxsKSB7XG4gICAgICAgIC8vIHNlYXJjaCBmb3J3YXJkXG4gICAgICAgIGZvciAobmV4dGRpID0gaW5kZXhJbkRpcmVjdGlvbihkaSwgc3RlcCk7IDAgPD0gbmV4dGRpICYmIG5leHRkaSA8IHRoaXMuX2NoYXJEZWZzLmxlbmd0aDsgZGkgKz0gc3RlcCwgbmV4dGRpICs9IHN0ZXApIHtcbiAgICAgICAgICB2YXIgbmV4dERlZiA9IHRoaXMuX2NoYXJEZWZzW25leHRkaV07XG4gICAgICAgICAgaWYgKGZpcnN0SW5wdXRJbmRleCA9PSBudWxsICYmIG5leHREZWYuaXNJbnB1dCkge1xuICAgICAgICAgICAgZmlyc3RJbnB1dEluZGV4ID0gZGk7XG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBESVJFQ1RJT04uTk9ORSkgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChmaXJzdFZpc2libGVIb2xsb3dJbmRleCA9PSBudWxsICYmIG5leHREZWYuaXNIb2xsb3cgJiYgIW5leHREZWYuaXNIaWRkZW5Ib2xsb3cpIGZpcnN0VmlzaWJsZUhvbGxvd0luZGV4ID0gZGk7XG4gICAgICAgICAgaWYgKG5leHREZWYuaXNJbnB1dCAmJiAhbmV4dERlZi5pc0hvbGxvdykge1xuICAgICAgICAgICAgZmlyc3RGaWxsZWRJbnB1dEluZGV4ID0gZGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gZm9yIGxhenkgaWYgaGFzIGFsaWduZWQgbGVmdCBpbnNpZGUgZml4ZWQgYW5kIGhhcyBjYW1lIHRvIHRoZSBzdGFydCAtIHVzZSBzdGFydCBwb3NpdGlvblxuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gRElSRUNUSU9OLkxFRlQgJiYgZGkgPT09IDAgJiYgdGhpcy5sYXp5ICYmICF0aGlzLmV4dHJhY3RJbnB1dCgpICYmICghaW5pdGlhbERlZiB8fCAhaW5pdGlhbERlZi5pc0lucHV0KSkgZmlyc3RJbnB1dEluZGV4ID0gMDtcblxuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gRElSRUNUSU9OLkxFRlQgfHwgZmlyc3RJbnB1dEluZGV4ID09IG51bGwpIHtcbiAgICAgICAgLy8gc2VhcmNoIGJhY2t3YXJkXG4gICAgICAgIHN0ZXAgPSAtc3RlcDtcbiAgICAgICAgdmFyIG92ZXJmbG93ID0gZmFsc2U7XG5cbiAgICAgICAgLy8gZmluZCBob2xsb3dzIG9ubHkgYmVmb3JlIGluaXRpYWwgcG9zXG4gICAgICAgIGZvciAobmV4dGRpID0gaW5kZXhJbkRpcmVjdGlvbihkaSwgc3RlcCk7IDAgPD0gbmV4dGRpICYmIG5leHRkaSA8IHRoaXMuX2NoYXJEZWZzLmxlbmd0aDsgZGkgKz0gc3RlcCwgbmV4dGRpICs9IHN0ZXApIHtcbiAgICAgICAgICB2YXIgX25leHREZWYgPSB0aGlzLl9jaGFyRGVmc1tuZXh0ZGldO1xuICAgICAgICAgIGlmIChfbmV4dERlZi5pc0lucHV0KSB7XG4gICAgICAgICAgICBmaXJzdElucHV0SW5kZXggPSBkaTtcbiAgICAgICAgICAgIGlmIChfbmV4dERlZi5pc0hvbGxvdyAmJiAhX25leHREZWYuaXNIaWRkZW5Ib2xsb3cpIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGlmIGhvbGxvdyBub3QgZm91bmQgYmVmb3JlIHN0YXJ0IHBvc2l0aW9uIC0gc2V0IGBvdmVyZmxvd2BcbiAgICAgICAgICAvLyBhbmQgdHJ5IHRvIGZpbmQganVzdCBhbnkgaW5wdXRcbiAgICAgICAgICBpZiAoZGkgPT09IGluaXRpYWxEZWZJbmRleCkgb3ZlcmZsb3cgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gZmlyc3QgaW5wdXQgZm91bmRcbiAgICAgICAgICBpZiAob3ZlcmZsb3cgJiYgZmlyc3RJbnB1dEluZGV4ICE9IG51bGwpIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcHJvY2VzcyBvdmVyZmxvd1xuICAgICAgICBvdmVyZmxvdyA9IG92ZXJmbG93IHx8IG5leHRkaSA+PSB0aGlzLl9jaGFyRGVmcy5sZW5ndGg7XG4gICAgICAgIGlmIChvdmVyZmxvdyAmJiBmaXJzdElucHV0SW5kZXggIT0gbnVsbCkgZGkgPSBmaXJzdElucHV0SW5kZXg7XG4gICAgICB9IGVsc2UgaWYgKGZpcnN0RmlsbGVkSW5wdXRJbmRleCA9PSBudWxsKSB7XG4gICAgICAgIC8vIGFkanVzdCBpbmRleCBpZiBkZWxldGUgYXQgcmlnaHQgYW5kIGZpbGxlZCBpbnB1dCBub3QgZm91bmQgYXQgcmlnaHRcbiAgICAgICAgZGkgPSBmaXJzdFZpc2libGVIb2xsb3dJbmRleCAhPSBudWxsID8gZmlyc3RWaXNpYmxlSG9sbG93SW5kZXggOiBmaXJzdElucHV0SW5kZXg7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLm1hcERlZkluZGV4VG9Qb3MoZGkpO1xuICAgIH1cblxuICAgIC8qKiBHZXQgZ3JvdXAgYnkgbmFtZSAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdncm91cCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdyb3VwKG5hbWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmdyb3Vwc0J5TmFtZShuYW1lKVswXTtcbiAgICB9XG5cbiAgICAvKiogR2V0IGFsbCBncm91cHMgYnkgbmFtZSAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdncm91cHNCeU5hbWUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBncm91cHNCeU5hbWUobmFtZSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2dyb3VwRGVmcy5maWx0ZXIoZnVuY3Rpb24gKGckJDEpIHtcbiAgICAgICAgcmV0dXJuIGckJDEubmFtZSA9PT0gbmFtZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2lzQ29tcGxldGUnLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgIHJldHVybiAhdGhpcy5fY2hhckRlZnMuc29tZShmdW5jdGlvbiAoZCwgaSkge1xuICAgICAgICByZXR1cm4gZC5pc0lucHV0ICYmICFkLm9wdGlvbmFsICYmIChkLmlzSG9sbG93IHx8ICFfdGhpczUuZXh0cmFjdElucHV0KGksIGkgKyAxKSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICd1bm1hc2tlZFZhbHVlJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHZhciBzdHIgPSB0aGlzLnZhbHVlO1xuICAgICAgdmFyIHVubWFza2VkID0gJyc7XG5cbiAgICAgIGZvciAodmFyIGNpID0gMCwgZGkgPSAwOyBjaSA8IHN0ci5sZW5ndGggJiYgZGkgPCB0aGlzLl9jaGFyRGVmcy5sZW5ndGg7ICsrZGkpIHtcbiAgICAgICAgdmFyIGNoID0gc3RyW2NpXTtcbiAgICAgICAgdmFyIGRlZiA9IHRoaXMuX2NoYXJEZWZzW2RpXTtcblxuICAgICAgICBpZiAoZGVmLmlzSGlkZGVuSG9sbG93KSBjb250aW51ZTtcbiAgICAgICAgaWYgKGRlZi51bm1hc2tpbmcgJiYgIWRlZi5pc0hvbGxvdykgdW5tYXNrZWQgKz0gY2g7XG4gICAgICAgICsrY2k7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bm1hc2tlZDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0JCQxKHVubWFza2VkVmFsdWUpIHtcbiAgICAgIHNldChNYXNrZWRQYXR0ZXJuLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hc2tlZFBhdHRlcm4ucHJvdG90eXBlKSwgJ3VubWFza2VkVmFsdWUnLCB1bm1hc2tlZFZhbHVlLCB0aGlzKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIE1hc2tlZFBhdHRlcm47XG59KE1hc2tlZCk7XG5cbk1hc2tlZFBhdHRlcm4uREVGQVVMVFMgPSB7XG4gIGxhenk6IHRydWUsXG4gIHBsYWNlaG9sZGVyQ2hhcjogJ18nXG59O1xuTWFza2VkUGF0dGVybi5TVE9QX0NIQVIgPSAnYCc7XG5NYXNrZWRQYXR0ZXJuLkVTQ0FQRV9DSEFSID0gJ1xcXFwnO1xuTWFza2VkUGF0dGVybi5EZWZpbml0aW9uID0gUGF0dGVybkRlZmluaXRpb247XG5NYXNrZWRQYXR0ZXJuLkdyb3VwID0gUGF0dGVybkdyb3VwO1xuXG4vKiogRGF0ZSBtYXNrICovXG5cbnZhciBNYXNrZWREYXRlID0gZnVuY3Rpb24gKF9NYXNrZWRQYXR0ZXJuKSB7XG4gIGluaGVyaXRzKE1hc2tlZERhdGUsIF9NYXNrZWRQYXR0ZXJuKTtcblxuICAvKipcbiAgICBAcGFyYW0ge09iamVjdH0gb3B0c1xuICAqL1xuXG4gIC8qKiBTdGFydCBkYXRlICovXG5cbiAgLyoqIEZvcm1hdCBEYXRlIHRvIHN0cmluZyAqL1xuICBmdW5jdGlvbiBNYXNrZWREYXRlKG9wdHMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBNYXNrZWREYXRlKTtcbiAgICByZXR1cm4gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTWFza2VkRGF0ZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hc2tlZERhdGUpKS5jYWxsKHRoaXMsIF9leHRlbmRzKHt9LCBNYXNrZWREYXRlLkRFRkFVTFRTLCBvcHRzKSkpO1xuICB9XG5cbiAgLyoqXG4gICAgQG92ZXJyaWRlXG4gICovXG5cbiAgLyoqIEVuZCBkYXRlICovXG5cbiAgLyoqIFBhdHRlcm4gbWFzayBmb3IgZGF0ZSBhY2NvcmRpbmcgdG8ge0BsaW5rIE1hc2tlZERhdGUjZm9ybWF0fSAqL1xuXG5cbiAgLyoqIFBhcnNlIHN0cmluZyB0byBEYXRlICovXG5cblxuICBjcmVhdGVDbGFzcyhNYXNrZWREYXRlLCBbe1xuICAgIGtleTogJ191cGRhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfdXBkYXRlKG9wdHMpIHtcbiAgICAgIGlmIChvcHRzLm1hc2sgPT09IERhdGUpIGRlbGV0ZSBvcHRzLm1hc2s7XG4gICAgICBpZiAob3B0cy5wYXR0ZXJuKSB7XG4gICAgICAgIG9wdHMubWFzayA9IG9wdHMucGF0dGVybjtcbiAgICAgICAgZGVsZXRlIG9wdHMucGF0dGVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGdyb3VwcyA9IG9wdHMuZ3JvdXBzO1xuICAgICAgb3B0cy5ncm91cHMgPSBfZXh0ZW5kcyh7fSwgTWFza2VkRGF0ZS5HRVRfREVGQVVMVF9HUk9VUFMoKSk7XG4gICAgICAvLyBhZGp1c3QgeWVhciBncm91cFxuICAgICAgaWYgKG9wdHMubWluKSBvcHRzLmdyb3Vwcy5ZLmZyb20gPSBvcHRzLm1pbi5nZXRGdWxsWWVhcigpO1xuICAgICAgaWYgKG9wdHMubWF4KSBvcHRzLmdyb3Vwcy5ZLnRvID0gb3B0cy5tYXguZ2V0RnVsbFllYXIoKTtcbiAgICAgIF9leHRlbmRzKG9wdHMuZ3JvdXBzLCBncm91cHMpO1xuXG4gICAgICBnZXQoTWFza2VkRGF0ZS5wcm90b3R5cGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNYXNrZWREYXRlLnByb3RvdHlwZSksICdfdXBkYXRlJywgdGhpcykuY2FsbCh0aGlzLCBvcHRzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIEBvdmVycmlkZVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2RvVmFsaWRhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkb1ZhbGlkYXRlKCkge1xuICAgICAgdmFyIF9iYWJlbEhlbHBlcnMkZ2V0O1xuXG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICB2YXIgdmFsaWQgPSAoX2JhYmVsSGVscGVycyRnZXQgPSBnZXQoTWFza2VkRGF0ZS5wcm90b3R5cGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNYXNrZWREYXRlLnByb3RvdHlwZSksICdkb1ZhbGlkYXRlJywgdGhpcykpLmNhbGwuYXBwbHkoX2JhYmVsSGVscGVycyRnZXQsIFt0aGlzXS5jb25jYXQodG9Db25zdW1hYmxlQXJyYXkoYXJncykpKTtcbiAgICAgIHZhciBkYXRlID0gdGhpcy5kYXRlO1xuXG4gICAgICByZXR1cm4gdmFsaWQgJiYgKCF0aGlzLmlzQ29tcGxldGUgfHwgdGhpcy5pc0RhdGVFeGlzdCh0aGlzLnZhbHVlKSAmJiBkYXRlICYmICh0aGlzLm1pbiA9PSBudWxsIHx8IHRoaXMubWluIDw9IGRhdGUpICYmICh0aGlzLm1heCA9PSBudWxsIHx8IGRhdGUgPD0gdGhpcy5tYXgpKTtcbiAgICB9XG5cbiAgICAvKiogQ2hlY2tzIGlmIGRhdGUgaXMgZXhpc3RzICovXG5cbiAgfSwge1xuICAgIGtleTogJ2lzRGF0ZUV4aXN0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNEYXRlRXhpc3Qoc3RyKSB7XG4gICAgICByZXR1cm4gdGhpcy5mb3JtYXQodGhpcy5wYXJzZShzdHIpKSA9PT0gc3RyO1xuICAgIH1cblxuICAgIC8qKiBQYXJzZWQgRGF0ZSAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdkYXRlJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzQ29tcGxldGUgPyB0aGlzLnBhcnNlKHRoaXMudmFsdWUpIDogbnVsbDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0JCQxKGRhdGUpIHtcbiAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmZvcm1hdChkYXRlKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIE1hc2tlZERhdGU7XG59KE1hc2tlZFBhdHRlcm4pO1xuXG5NYXNrZWREYXRlLkRFRkFVTFRTID0ge1xuICBwYXR0ZXJuOiAnZHsufWBtey59YFknLFxuICBmb3JtYXQ6IGZ1bmN0aW9uIGZvcm1hdChkYXRlKSB7XG4gICAgdmFyIGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICB2YXIgbW9udGggPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcblxuICAgIHJldHVybiBbZGF5LCBtb250aCwgeWVhcl0uam9pbignLicpO1xuICB9LFxuICBwYXJzZTogZnVuY3Rpb24gcGFyc2Uoc3RyKSB7XG4gICAgdmFyIF9zdHIkc3BsaXQgPSBzdHIuc3BsaXQoJy4nKSxcbiAgICAgICAgX3N0ciRzcGxpdDIgPSBzbGljZWRUb0FycmF5KF9zdHIkc3BsaXQsIDMpLFxuICAgICAgICBkYXkgPSBfc3RyJHNwbGl0MlswXSxcbiAgICAgICAgbW9udGggPSBfc3RyJHNwbGl0MlsxXSxcbiAgICAgICAgeWVhciA9IF9zdHIkc3BsaXQyWzJdO1xuXG4gICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgZGF5KTtcbiAgfVxufTtcbk1hc2tlZERhdGUuR0VUX0RFRkFVTFRfR1JPVVBTID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIGQ6IG5ldyBQYXR0ZXJuR3JvdXAuUmFuZ2UoWzEsIDMxXSksXG4gICAgbTogbmV3IFBhdHRlcm5Hcm91cC5SYW5nZShbMSwgMTJdKSxcbiAgICBZOiBuZXcgUGF0dGVybkdyb3VwLlJhbmdlKFsxOTAwLCA5OTk5XSlcbiAgfTtcbn07XG5cbi8qKlxuICBHZW5lcmljIGVsZW1lbnQgQVBJIHRvIHVzZSB3aXRoIG1hc2tcbiAgQGludGVyZmFjZVxuKi9cblxuLyoqIExpc3RlbnMgdG8gZWxlbWVudCBldmVudHMgYW5kIGNvbnRyb2xzIGNoYW5nZXMgYmV0d2VlbiBlbGVtZW50IGFuZCB7QGxpbmsgTWFza2VkfSAqL1xudmFyIElucHV0TWFzayA9IGZ1bmN0aW9uICgpIHtcblxuICAvKipcbiAgICBAcGFyYW0ge1VJRWxlbWVudH0gZWxcbiAgICBAcGFyYW0ge09iamVjdH0gb3B0c1xuICAqL1xuXG4gIC8qKlxuICAgIFZpZXcgZWxlbWVudFxuICAgIEByZWFkb25seVxuICAqL1xuICBmdW5jdGlvbiBJbnB1dE1hc2soZWwsIG9wdHMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBJbnB1dE1hc2spO1xuXG4gICAgdGhpcy5lbCA9IGVsO1xuICAgIHRoaXMubWFza2VkID0gY3JlYXRlTWFzayhvcHRzKTtcblxuICAgIHRoaXMuX2xpc3RlbmVycyA9IHt9O1xuICAgIHRoaXMuX3ZhbHVlID0gJyc7XG4gICAgdGhpcy5fdW5tYXNrZWRWYWx1ZSA9ICcnO1xuXG4gICAgdGhpcy5fc2F2ZVNlbGVjdGlvbiA9IHRoaXMuX3NhdmVTZWxlY3Rpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbklucHV0ID0gdGhpcy5fb25JbnB1dC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uQ2hhbmdlID0gdGhpcy5fb25DaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbkRyb3AgPSB0aGlzLl9vbkRyb3AuYmluZCh0aGlzKTtcbiAgICB0aGlzLmFsaWduQ3Vyc29yID0gdGhpcy5hbGlnbkN1cnNvci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuYWxpZ25DdXJzb3JGcmllbmRseSA9IHRoaXMuYWxpZ25DdXJzb3JGcmllbmRseS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5fYmluZEV2ZW50cygpO1xuXG4gICAgLy8gcmVmcmVzaFxuICAgIHRoaXMudXBkYXRlVmFsdWUoKTtcbiAgICB0aGlzLl9vbkNoYW5nZSgpO1xuICB9XG5cbiAgLyoqIFJlYWQgb3IgdXBkYXRlIG1hc2sgKi9cblxuXG4gIC8qKlxuICAgIEludGVybmFsIHtAbGluayBNYXNrZWR9IG1vZGVsXG4gICAgQHJlYWRvbmx5XG4gICovXG5cblxuICBjcmVhdGVDbGFzcyhJbnB1dE1hc2ssIFt7XG4gICAga2V5OiAnX2JpbmRFdmVudHMnLFxuXG5cbiAgICAvKipcbiAgICAgIFN0YXJ0cyBsaXN0ZW5pbmcgdG8gZWxlbWVudCBldmVudHNcbiAgICAgIEBwcm90ZWN0ZWRcbiAgICAqL1xuICAgIHZhbHVlOiBmdW5jdGlvbiBfYmluZEV2ZW50cygpIHtcbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX3NhdmVTZWxlY3Rpb24pO1xuICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuX29uSW5wdXQpO1xuICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5fb25Ecm9wKTtcbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmFsaWduQ3Vyc29yRnJpZW5kbHkpO1xuICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLl9vbkNoYW5nZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICBTdG9wcyBsaXN0ZW5pbmcgdG8gZWxlbWVudCBldmVudHNcbiAgICAgIEBwcm90ZWN0ZWRcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnX3VuYmluZEV2ZW50cycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF91bmJpbmRFdmVudHMoKSB7XG4gICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9zYXZlU2VsZWN0aW9uKTtcbiAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB0aGlzLl9vbklucHV0KTtcbiAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMuX29uRHJvcCk7XG4gICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5hbGlnbkN1cnNvckZyaWVuZGx5KTtcbiAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5fb25DaGFuZ2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAgRmlyZXMgY3VzdG9tIGV2ZW50XG4gICAgICBAcHJvdGVjdGVkXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ19maXJlRXZlbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfZmlyZUV2ZW50KGV2KSB7XG4gICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzW2V2XSB8fCBbXTtcbiAgICAgIGxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsKSB7XG4gICAgICAgIHJldHVybiBsKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIEN1cnJlbnQgc2VsZWN0aW9uIHN0YXJ0XG4gICAgICBAcmVhZG9ubHlcbiAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdfc2F2ZVNlbGVjdGlvbicsXG5cblxuICAgIC8qKlxuICAgICAgU3RvcmVzIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgICBAcHJvdGVjdGVkXG4gICAgKi9cbiAgICB2YWx1ZTogZnVuY3Rpb24gX3NhdmVTZWxlY3Rpb24oKSAvKiBldiAqL3tcbiAgICAgIGlmICh0aGlzLnZhbHVlICE9PSB0aGlzLmVsLnZhbHVlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignVW5jb250cm9sbGVkIGlucHV0IGNoYW5nZSwgcmVmcmVzaCBtYXNrIG1hbnVhbGx5IScpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICAgIH1cbiAgICAgIHRoaXMuX3NlbGVjdGlvbiA9IHtcbiAgICAgICAgc3RhcnQ6IHRoaXMuc2VsZWN0aW9uU3RhcnQsXG4gICAgICAgIGVuZDogdGhpcy5jdXJzb3JQb3NcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqIFN5bmNyb25pemVzIG1vZGVsIHZhbHVlIGZyb20gdmlldyAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICd1cGRhdGVWYWx1ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVZhbHVlKCkge1xuICAgICAgdGhpcy5tYXNrZWQudmFsdWUgPSB0aGlzLmVsLnZhbHVlO1xuICAgIH1cblxuICAgIC8qKiBTeW5jcm9uaXplcyB2aWV3IGZyb20gbW9kZWwgdmFsdWUsIGZpcmVzIGNoYW5nZSBldmVudHMgKi9cblxuICB9LCB7XG4gICAga2V5OiAndXBkYXRlQ29udHJvbCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUNvbnRyb2woKSB7XG4gICAgICB2YXIgbmV3VW5tYXNrZWRWYWx1ZSA9IHRoaXMubWFza2VkLnVubWFza2VkVmFsdWU7XG4gICAgICB2YXIgbmV3VmFsdWUgPSB0aGlzLm1hc2tlZC52YWx1ZTtcbiAgICAgIHZhciBpc0NoYW5nZWQgPSB0aGlzLnVubWFza2VkVmFsdWUgIT09IG5ld1VubWFza2VkVmFsdWUgfHwgdGhpcy52YWx1ZSAhPT0gbmV3VmFsdWU7XG5cbiAgICAgIHRoaXMuX3VubWFza2VkVmFsdWUgPSBuZXdVbm1hc2tlZFZhbHVlO1xuICAgICAgdGhpcy5fdmFsdWUgPSBuZXdWYWx1ZTtcblxuICAgICAgaWYgKHRoaXMuZWwudmFsdWUgIT09IG5ld1ZhbHVlKSB0aGlzLmVsLnZhbHVlID0gbmV3VmFsdWU7XG4gICAgICBpZiAoaXNDaGFuZ2VkKSB0aGlzLl9maXJlQ2hhbmdlRXZlbnRzKCk7XG4gICAgfVxuXG4gICAgLyoqIFVwZGF0ZXMgb3B0aW9ucyB3aXRoIGRlZXAgZXF1YWwgY2hlY2ssIHJlY3JlYXRlcyBAe2xpbmsgTWFza2VkfSBtb2RlbCBpZiBtYXNrIHR5cGUgY2hhbmdlcyAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICd1cGRhdGVPcHRpb25zJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlT3B0aW9ucyhvcHRzKSB7XG4gICAgICBvcHRzID0gX2V4dGVuZHMoe30sIG9wdHMpOyAvLyBjbG9uZVxuICAgICAgaWYgKG9wdHMubWFzayA9PT0gRGF0ZSAmJiB0aGlzLm1hc2tlZCBpbnN0YW5jZW9mIE1hc2tlZERhdGUpIGRlbGV0ZSBvcHRzLm1hc2s7XG5cbiAgICAgIC8vIGNoZWNrIGlmIGNoYW5nZWRcbiAgICAgIGlmIChvYmplY3RJbmNsdWRlcyh0aGlzLm1hc2tlZCwgb3B0cykpIHJldHVybjtcblxuICAgICAgdGhpcy5tYXNrZWQudXBkYXRlT3B0aW9ucyhvcHRzKTtcbiAgICAgIHRoaXMudXBkYXRlQ29udHJvbCgpO1xuICAgIH1cblxuICAgIC8qKiBVcGRhdGVzIGN1cnNvciAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICd1cGRhdGVDdXJzb3InLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVDdXJzb3IoY3Vyc29yUG9zKSB7XG4gICAgICBpZiAoY3Vyc29yUG9zID09IG51bGwpIHJldHVybjtcbiAgICAgIHRoaXMuY3Vyc29yUG9zID0gY3Vyc29yUG9zO1xuXG4gICAgICAvLyBhbHNvIHF1ZXVlIGNoYW5nZSBjdXJzb3IgZm9yIG1vYmlsZSBicm93c2Vyc1xuICAgICAgdGhpcy5fZGVsYXlVcGRhdGVDdXJzb3IoY3Vyc29yUG9zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIERlbGF5cyBjdXJzb3IgdXBkYXRlIHRvIHN1cHBvcnQgbW9iaWxlIGJyb3dzZXJzXG4gICAgICBAcHJpdmF0ZVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ19kZWxheVVwZGF0ZUN1cnNvcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxheVVwZGF0ZUN1cnNvcihjdXJzb3JQb3MpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHRoaXMuX2Fib3J0VXBkYXRlQ3Vyc29yKCk7XG4gICAgICB0aGlzLl9jaGFuZ2luZ0N1cnNvclBvcyA9IGN1cnNvclBvcztcbiAgICAgIHRoaXMuX2N1cnNvckNoYW5naW5nID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghX3RoaXMuZWwpIHJldHVybjsgLy8gaWYgd2FzIGRlc3Ryb3llZFxuICAgICAgICBfdGhpcy5jdXJzb3JQb3MgPSBfdGhpcy5fY2hhbmdpbmdDdXJzb3JQb3M7XG4gICAgICAgIF90aGlzLl9hYm9ydFVwZGF0ZUN1cnNvcigpO1xuICAgICAgfSwgMTApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAgRmlyZXMgY3VzdG9tIGV2ZW50c1xuICAgICAgQHByb3RlY3RlZFxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ19maXJlQ2hhbmdlRXZlbnRzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2ZpcmVDaGFuZ2VFdmVudHMoKSB7XG4gICAgICB0aGlzLl9maXJlRXZlbnQoJ2FjY2VwdCcpO1xuICAgICAgaWYgKHRoaXMubWFza2VkLmlzQ29tcGxldGUpIHRoaXMuX2ZpcmVFdmVudCgnY29tcGxldGUnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIEFib3J0cyBkZWxheWVkIGN1cnNvciB1cGRhdGVcbiAgICAgIEBwcml2YXRlXG4gICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnX2Fib3J0VXBkYXRlQ3Vyc29yJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2Fib3J0VXBkYXRlQ3Vyc29yKCkge1xuICAgICAgaWYgKHRoaXMuX2N1cnNvckNoYW5naW5nKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9jdXJzb3JDaGFuZ2luZyk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9jdXJzb3JDaGFuZ2luZztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQWxpZ25zIGN1cnNvciB0byBuZWFyZXN0IGF2YWlsYWJsZSBwb3NpdGlvbiAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdhbGlnbkN1cnNvcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFsaWduQ3Vyc29yKCkge1xuICAgICAgdGhpcy5jdXJzb3JQb3MgPSB0aGlzLm1hc2tlZC5uZWFyZXN0SW5wdXRQb3ModGhpcy5jdXJzb3JQb3MsIERJUkVDVElPTi5MRUZUKTtcbiAgICB9XG5cbiAgICAvKiogQWxpZ25zIGN1cnNvciBvbmx5IGlmIHNlbGVjdGlvbiBpcyBlbXB0eSAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdhbGlnbkN1cnNvckZyaWVuZGx5JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWxpZ25DdXJzb3JGcmllbmRseSgpIHtcbiAgICAgIGlmICh0aGlzLnNlbGVjdGlvblN0YXJ0ICE9PSB0aGlzLmN1cnNvclBvcykgcmV0dXJuO1xuICAgICAgdGhpcy5hbGlnbkN1cnNvcigpO1xuICAgIH1cblxuICAgIC8qKiBBZGRzIGxpc3RlbmVyIG9uIGN1c3RvbSBldmVudCAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdvbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uKGV2LCBoYW5kbGVyKSB7XG4gICAgICBpZiAoIXRoaXMuX2xpc3RlbmVyc1tldl0pIHRoaXMuX2xpc3RlbmVyc1tldl0gPSBbXTtcbiAgICAgIHRoaXMuX2xpc3RlbmVyc1tldl0ucHVzaChoYW5kbGVyKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBSZW1vdmVzIGN1c3RvbSBldmVudCBsaXN0ZW5lciAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdvZmYnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvZmYoZXYsIGhhbmRsZXIpIHtcbiAgICAgIGlmICghdGhpcy5fbGlzdGVuZXJzW2V2XSkgcmV0dXJuO1xuICAgICAgaWYgKCFoYW5kbGVyKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9saXN0ZW5lcnNbZXZdO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgaEluZGV4ID0gdGhpcy5fbGlzdGVuZXJzW2V2XS5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgaWYgKGhJbmRleCA+PSAwKSB0aGlzLl9saXN0ZW5lcnNbZXZdLnNwbGljZShoSW5kZXgsIDEpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqIEhhbmRsZXMgdmlldyBpbnB1dCBldmVudCAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdfb25JbnB1dCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9vbklucHV0KCkge1xuICAgICAgdGhpcy5fYWJvcnRVcGRhdGVDdXJzb3IoKTtcblxuICAgICAgdmFyIGRldGFpbHMgPSBuZXcgQWN0aW9uRGV0YWlscyhcbiAgICAgIC8vIG5ldyBzdGF0ZVxuICAgICAgdGhpcy5lbC52YWx1ZSwgdGhpcy5jdXJzb3JQb3MsXG4gICAgICAvLyBvbGQgc3RhdGVcbiAgICAgIHRoaXMudmFsdWUsIHRoaXMuX3NlbGVjdGlvbik7XG5cbiAgICAgIHZhciBvZmZzZXQgPSB0aGlzLm1hc2tlZC5zcGxpY2UoZGV0YWlscy5zdGFydENoYW5nZVBvcywgZGV0YWlscy5yZW1vdmVkLmxlbmd0aCwgZGV0YWlscy5pbnNlcnRlZCwgZGV0YWlscy5yZW1vdmVEaXJlY3Rpb24pLm9mZnNldDtcblxuICAgICAgdmFyIGN1cnNvclBvcyA9IHRoaXMubWFza2VkLm5lYXJlc3RJbnB1dFBvcyhkZXRhaWxzLnN0YXJ0Q2hhbmdlUG9zICsgb2Zmc2V0LCBkZXRhaWxzLnJlbW92ZURpcmVjdGlvbik7XG5cbiAgICAgIHRoaXMudXBkYXRlQ29udHJvbCgpO1xuICAgICAgdGhpcy51cGRhdGVDdXJzb3IoY3Vyc29yUG9zKTtcbiAgICB9XG5cbiAgICAvKiogSGFuZGxlcyB2aWV3IGNoYW5nZSBldmVudCBhbmQgY29tbWl0cyBtb2RlbCB2YWx1ZSAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdfb25DaGFuZ2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfb25DaGFuZ2UoKSB7XG4gICAgICBpZiAodGhpcy52YWx1ZSAhPT0gdGhpcy5lbC52YWx1ZSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKCk7XG4gICAgICB9XG4gICAgICB0aGlzLm1hc2tlZC5kb0NvbW1pdCgpO1xuICAgICAgdGhpcy51cGRhdGVDb250cm9sKCk7XG4gICAgfVxuXG4gICAgLyoqIEhhbmRsZXMgdmlldyBkcm9wIGV2ZW50LCBwcmV2ZW50cyBieSBkZWZhdWx0ICovXG5cbiAgfSwge1xuICAgIGtleTogJ19vbkRyb3AnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Ecm9wKGV2KSB7XG4gICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuXG4gICAgLyoqIFVuYmluZCB2aWV3IGV2ZW50cyBhbmQgcmVtb3ZlcyBlbGVtZW50IHJlZmVyZW5jZSAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdkZXN0cm95JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgIHRoaXMuX3VuYmluZEV2ZW50cygpO1xuICAgICAgLy8gJEZsb3dGaXhNZSB3aHkgbm90IGRvIHNvP1xuICAgICAgdGhpcy5fbGlzdGVuZXJzLmxlbmd0aCA9IDA7XG4gICAgICBkZWxldGUgdGhpcy5lbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdtYXNrJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHJldHVybiB0aGlzLm1hc2tlZC5tYXNrO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQkJDEobWFzaykge1xuICAgICAgaWYgKG1hc2sgPT0gbnVsbCB8fCBtYXNrID09PSB0aGlzLm1hc2tlZC5tYXNrKSByZXR1cm47XG5cbiAgICAgIGlmICh0aGlzLm1hc2tlZC5jb25zdHJ1Y3RvciA9PT0gbWFza2VkQ2xhc3MobWFzaykpIHtcbiAgICAgICAgdGhpcy5tYXNrZWQubWFzayA9IG1hc2s7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIG1hc2tlZCA9IGNyZWF0ZU1hc2soeyBtYXNrOiBtYXNrIH0pO1xuICAgICAgbWFza2VkLnVubWFza2VkVmFsdWUgPSB0aGlzLm1hc2tlZC51bm1hc2tlZFZhbHVlO1xuICAgICAgdGhpcy5tYXNrZWQgPSBtYXNrZWQ7XG4gICAgfVxuXG4gICAgLyoqIFJhdyB2YWx1ZSAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICd2YWx1ZScsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMShzdHIpIHtcbiAgICAgIHRoaXMubWFza2VkLnZhbHVlID0gc3RyO1xuICAgICAgdGhpcy51cGRhdGVDb250cm9sKCk7XG4gICAgICB0aGlzLmFsaWduQ3Vyc29yKCk7XG4gICAgfVxuXG4gICAgLyoqIFVubWFza2VkIHZhbHVlICovXG5cbiAgfSwge1xuICAgIGtleTogJ3VubWFza2VkVmFsdWUnLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3VubWFza2VkVmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMShzdHIpIHtcbiAgICAgIHRoaXMubWFza2VkLnVubWFza2VkVmFsdWUgPSBzdHI7XG4gICAgICB0aGlzLnVwZGF0ZUNvbnRyb2woKTtcbiAgICAgIHRoaXMuYWxpZ25DdXJzb3IoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZWxlY3Rpb25TdGFydCcsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY3Vyc29yQ2hhbmdpbmcgPyB0aGlzLl9jaGFuZ2luZ0N1cnNvclBvcyA6IHRoaXMuZWwuc2VsZWN0aW9uU3RhcnQ7XG4gICAgfVxuXG4gICAgLyoqIEN1cnJlbnQgY3Vyc29yIHBvc2l0aW9uICovXG5cbiAgfSwge1xuICAgIGtleTogJ2N1cnNvclBvcycsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY3Vyc29yQ2hhbmdpbmcgPyB0aGlzLl9jaGFuZ2luZ0N1cnNvclBvcyA6IHRoaXMuZWwuc2VsZWN0aW9uRW5kO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQkJDEocG9zKSB7XG4gICAgICBpZiAodGhpcy5lbCAhPT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkgcmV0dXJuO1xuXG4gICAgICB0aGlzLmVsLnNldFNlbGVjdGlvblJhbmdlKHBvcywgcG9zKTtcbiAgICAgIHRoaXMuX3NhdmVTZWxlY3Rpb24oKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIElucHV0TWFzaztcbn0oKTtcblxuLyoqXG4gIE51bWJlciBtYXNrXG4gIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gIEBwYXJhbSB7c3RyaW5nfSBvcHRzLnJhZGl4IC0gU2luZ2xlIGNoYXJcbiAgQHBhcmFtIHtzdHJpbmd9IG9wdHMudGhvdXNhbmRzU2VwYXJhdG9yIC0gU2luZ2xlIGNoYXJcbiAgQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBvcHRzLm1hcFRvUmFkaXggLSBBcnJheSBvZiBzaW5nbGUgY2hhcnNcbiAgQHBhcmFtIHtudW1iZXJ9IG9wdHMubWluXG4gIEBwYXJhbSB7bnVtYmVyfSBvcHRzLm1heFxuICBAcGFyYW0ge251bWJlcn0gb3B0cy5zY2FsZSAtIERpZ2l0cyBhZnRlciBwb2ludFxuICBAcGFyYW0ge2Jvb2xlYW59IG9wdHMuc2lnbmVkIC0gQWxsb3cgbmVnYXRpdmVcbiAgQHBhcmFtIHtib29sZWFufSBvcHRzLm5vcm1hbGl6ZVplcm9zIC0gRmxhZyB0byByZW1vdmUgbGVhZGluZyBhbmQgdHJhaWxpbmcgemVyb3MgaW4gdGhlIGVuZCBvZiBlZGl0aW5nXG4gIEBwYXJhbSB7Ym9vbGVhbn0gb3B0cy5wYWRGcmFjdGlvbmFsWmVyb3MgLSBGbGFnIHRvIHBhZCB0cmFpbGluZyB6ZXJvcyBhZnRlciBwb2ludCBpbiB0aGUgZW5kIG9mIGVkaXRpbmdcbiovXG52YXIgTWFza2VkTnVtYmVyID0gZnVuY3Rpb24gKF9NYXNrZWQpIHtcbiAgaW5oZXJpdHMoTWFza2VkTnVtYmVyLCBfTWFza2VkKTtcblxuICAvKiogRmxhZyB0byByZW1vdmUgbGVhZGluZyBhbmQgdHJhaWxpbmcgemVyb3MgaW4gdGhlIGVuZCBvZiBlZGl0aW5nICovXG5cbiAgLyoqIERpZ2l0cyBhZnRlciBwb2ludCAqL1xuXG4gIC8qKiAqL1xuXG4gIC8qKiBTaW5nbGUgY2hhciAqL1xuICBmdW5jdGlvbiBNYXNrZWROdW1iZXIob3B0cykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIE1hc2tlZE51bWJlcik7XG4gICAgcmV0dXJuIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE1hc2tlZE51bWJlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hc2tlZE51bWJlcikpLmNhbGwodGhpcywgX2V4dGVuZHMoe30sIE1hc2tlZE51bWJlci5ERUZBVUxUUywgb3B0cykpKTtcbiAgfVxuXG4gIC8qKlxuICAgIEBvdmVycmlkZVxuICAqL1xuXG4gIC8qKiBGbGFnIHRvIHBhZCB0cmFpbGluZyB6ZXJvcyBhZnRlciBwb2ludCBpbiB0aGUgZW5kIG9mIGVkaXRpbmcgKi9cblxuICAvKiogKi9cblxuICAvKiogKi9cblxuICAvKiogQXJyYXkgb2Ygc2luZ2xlIGNoYXJzICovXG5cblxuICAvKiogU2luZ2xlIGNoYXIgKi9cblxuXG4gIGNyZWF0ZUNsYXNzKE1hc2tlZE51bWJlciwgW3tcbiAgICBrZXk6ICdfdXBkYXRlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZShvcHRzKSB7XG4gICAgICBnZXQoTWFza2VkTnVtYmVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hc2tlZE51bWJlci5wcm90b3R5cGUpLCAnX3VwZGF0ZScsIHRoaXMpLmNhbGwodGhpcywgb3B0cyk7XG4gICAgICB0aGlzLl91cGRhdGVSZWdFeHBzKCk7XG4gICAgfVxuXG4gICAgLyoqICovXG5cbiAgfSwge1xuICAgIGtleTogJ191cGRhdGVSZWdFeHBzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZVJlZ0V4cHMoKSB7XG4gICAgICAvLyB1c2UgZGlmZmVyZW50IHJlZ2V4cCB0byBwcm9jZXNzIHVzZXIgaW5wdXQgKG1vcmUgc3RyaWN0LCBpbnB1dCBzdWZmaXgpIGFuZCB0YWlsIHNoaWZ0aW5nXG4gICAgICB2YXIgc3RhcnQgPSAnXic7XG5cbiAgICAgIHZhciBtaWRJbnB1dCA9ICcnO1xuICAgICAgdmFyIG1pZCA9ICcnO1xuICAgICAgaWYgKHRoaXMuYWxsb3dOZWdhdGl2ZSkge1xuICAgICAgICBtaWRJbnB1dCArPSAnKFsrfFxcXFwtXT98KFsrfFxcXFwtXT8oMHwoWzEtOV0rXFxcXGQqKSkpKSc7XG4gICAgICAgIG1pZCArPSAnWyt8XFxcXC1dPyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtaWRJbnB1dCArPSAnKDB8KFsxLTldK1xcXFxkKikpJztcbiAgICAgIH1cbiAgICAgIG1pZCArPSAnXFxcXGQqJztcblxuICAgICAgdmFyIGVuZCA9ICh0aGlzLnNjYWxlID8gJygnICsgdGhpcy5yYWRpeCArICdcXFxcZHswLCcgKyB0aGlzLnNjYWxlICsgJ30pPycgOiAnJykgKyAnJCc7XG5cbiAgICAgIHRoaXMuX251bWJlclJlZ0V4cElucHV0ID0gbmV3IFJlZ0V4cChzdGFydCArIG1pZElucHV0ICsgZW5kKTtcbiAgICAgIHRoaXMuX251bWJlclJlZ0V4cCA9IG5ldyBSZWdFeHAoc3RhcnQgKyBtaWQgKyBlbmQpO1xuICAgICAgdGhpcy5fbWFwVG9SYWRpeFJlZ0V4cCA9IG5ldyBSZWdFeHAoJ1snICsgdGhpcy5tYXBUb1JhZGl4Lm1hcChlc2NhcGVSZWdFeHApLmpvaW4oJycpICsgJ10nLCAnZycpO1xuICAgICAgdGhpcy5fdGhvdXNhbmRzU2VwYXJhdG9yUmVnRXhwID0gbmV3IFJlZ0V4cChlc2NhcGVSZWdFeHAodGhpcy50aG91c2FuZHNTZXBhcmF0b3IpLCAnZycpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAgQG92ZXJyaWRlXG4gICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnX2V4dHJhY3RUYWlsJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2V4dHJhY3RUYWlsKCkge1xuICAgICAgdmFyIGZyb21Qb3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDA7XG4gICAgICB2YXIgdG9Qb3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRoaXMudmFsdWUubGVuZ3RoO1xuXG4gICAgICB2YXIgdGFpbCA9IGdldChNYXNrZWROdW1iZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTWFza2VkTnVtYmVyLnByb3RvdHlwZSksICdfZXh0cmFjdFRhaWwnLCB0aGlzKS5jYWxsKHRoaXMsIGZyb21Qb3MsIHRvUG9zKTtcblxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCB0YWlsLCB7XG4gICAgICAgIHZhbHVlOiB0aGlzLl9yZW1vdmVUaG91c2FuZHNTZXBhcmF0b3JzKHRhaWwudmFsdWUpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKiogKi9cblxuICB9LCB7XG4gICAga2V5OiAnX3JlbW92ZVRob3VzYW5kc1NlcGFyYXRvcnMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlVGhvdXNhbmRzU2VwYXJhdG9ycyh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UodGhpcy5fdGhvdXNhbmRzU2VwYXJhdG9yUmVnRXhwLCAnJyk7XG4gICAgfVxuXG4gICAgLyoqICovXG5cbiAgfSwge1xuICAgIGtleTogJ19pbnNlcnRUaG91c2FuZHNTZXBhcmF0b3JzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2luc2VydFRob3VzYW5kc1NlcGFyYXRvcnModmFsdWUpIHtcbiAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI5MDExMDIvaG93LXRvLXByaW50LWEtbnVtYmVyLXdpdGgtY29tbWFzLWFzLXRob3VzYW5kcy1zZXBhcmF0b3JzLWluLWphdmFzY3JpcHRcbiAgICAgIHZhciBwYXJ0cyA9IHZhbHVlLnNwbGl0KHRoaXMucmFkaXgpO1xuICAgICAgcGFydHNbMF0gPSBwYXJ0c1swXS5yZXBsYWNlKC9cXEIoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCB0aGlzLnRob3VzYW5kc1NlcGFyYXRvcik7XG4gICAgICByZXR1cm4gcGFydHMuam9pbih0aGlzLnJhZGl4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIEBvdmVycmlkZVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2RvUHJlcGFyZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRvUHJlcGFyZShzdHIpIHtcbiAgICAgIHZhciBfYmFiZWxIZWxwZXJzJGdldDtcblxuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gKF9iYWJlbEhlbHBlcnMkZ2V0ID0gZ2V0KE1hc2tlZE51bWJlci5wcm90b3R5cGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNYXNrZWROdW1iZXIucHJvdG90eXBlKSwgJ2RvUHJlcGFyZScsIHRoaXMpKS5jYWxsLmFwcGx5KF9iYWJlbEhlbHBlcnMkZ2V0LCBbdGhpcywgdGhpcy5fcmVtb3ZlVGhvdXNhbmRzU2VwYXJhdG9ycyhzdHIucmVwbGFjZSh0aGlzLl9tYXBUb1JhZGl4UmVnRXhwLCB0aGlzLnJhZGl4KSldLmNvbmNhdCh0b0NvbnN1bWFibGVBcnJheShhcmdzKSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAgQG92ZXJyaWRlXG4gICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnYXBwZW5kV2l0aFRhaWwnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhcHBlbmRXaXRoVGFpbCgpIHtcbiAgICAgIHZhciBfYmFiZWxIZWxwZXJzJGdldDI7XG5cbiAgICAgIHZhciBwcmV2aW91c1ZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICAgIHRoaXMuX3ZhbHVlID0gdGhpcy5fcmVtb3ZlVGhvdXNhbmRzU2VwYXJhdG9ycyh0aGlzLnZhbHVlKTtcbiAgICAgIHZhciBzdGFydENoYW5nZVBvcyA9IHRoaXMudmFsdWUubGVuZ3RoO1xuXG4gICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICB9XG5cbiAgICAgIHZhciBhcHBlbmREZXRhaWxzID0gKF9iYWJlbEhlbHBlcnMkZ2V0MiA9IGdldChNYXNrZWROdW1iZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTWFza2VkTnVtYmVyLnByb3RvdHlwZSksICdhcHBlbmRXaXRoVGFpbCcsIHRoaXMpKS5jYWxsLmFwcGx5KF9iYWJlbEhlbHBlcnMkZ2V0MiwgW3RoaXNdLmNvbmNhdCh0b0NvbnN1bWFibGVBcnJheShhcmdzKSkpO1xuICAgICAgdGhpcy5fdmFsdWUgPSB0aGlzLl9pbnNlcnRUaG91c2FuZHNTZXBhcmF0b3JzKHRoaXMudmFsdWUpO1xuXG4gICAgICAvLyBjYWxjdWxhdGUgb2Zmc2V0cyBhZnRlciBpbnNlcnQgc2VwYXJhdG9yc1xuICAgICAgdmFyIGJlZm9yZVRhaWxQb3MgPSBzdGFydENoYW5nZVBvcyArIGFwcGVuZERldGFpbHMuaW5zZXJ0ZWQubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgcG9zID0gMDsgcG9zIDw9IGJlZm9yZVRhaWxQb3M7ICsrcG9zKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlW3Bvc10gPT09IHRoaXMudGhvdXNhbmRzU2VwYXJhdG9yKSB7XG4gICAgICAgICAgaWYgKHBvcyA8IHN0YXJ0Q2hhbmdlUG9zIHx8XG4gICAgICAgICAgLy8gY2hlY2sgaGlnaCBib3VuZFxuICAgICAgICAgIC8vIGlmIHNlcGFyYXRvciBpcyBzdGlsbCB0aGVyZSAtIGNvbnNpZGVyIGl0IGFsc29cbiAgICAgICAgICBwb3MgPT09IHN0YXJ0Q2hhbmdlUG9zICYmIHByZXZpb3VzVmFsdWVbcG9zXSA9PT0gdGhpcy50aG91c2FuZHNTZXBhcmF0b3IpIHtcbiAgICAgICAgICAgICsrc3RhcnRDaGFuZ2VQb3M7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwb3MgPCBiZWZvcmVUYWlsUG9zKSArK2JlZm9yZVRhaWxQb3M7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gYWRqdXN0IGRldGFpbHMgd2l0aCBzZXBhcmF0b3JzXG4gICAgICBhcHBlbmREZXRhaWxzLnJhd0luc2VydGVkID0gYXBwZW5kRGV0YWlscy5pbnNlcnRlZDtcbiAgICAgIGFwcGVuZERldGFpbHMuaW5zZXJ0ZWQgPSB0aGlzLnZhbHVlLnNsaWNlKHN0YXJ0Q2hhbmdlUG9zLCBiZWZvcmVUYWlsUG9zKTtcbiAgICAgIGFwcGVuZERldGFpbHMuc2hpZnQgKz0gc3RhcnRDaGFuZ2VQb3MgLSBwcmV2aW91c1ZhbHVlLmxlbmd0aDtcblxuICAgICAgcmV0dXJuIGFwcGVuZERldGFpbHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICBAb3ZlcnJpZGVcbiAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICduZWFyZXN0SW5wdXRQb3MnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBuZWFyZXN0SW5wdXRQb3MoY3Vyc29yUG9zLCBkaXJlY3Rpb24pIHtcbiAgICAgIGlmICghZGlyZWN0aW9uKSByZXR1cm4gY3Vyc29yUG9zO1xuXG4gICAgICB2YXIgbmV4dFBvcyA9IGluZGV4SW5EaXJlY3Rpb24oY3Vyc29yUG9zLCBkaXJlY3Rpb24pO1xuICAgICAgaWYgKHRoaXMudmFsdWVbbmV4dFBvc10gPT09IHRoaXMudGhvdXNhbmRzU2VwYXJhdG9yKSBjdXJzb3JQb3MgKz0gZGlyZWN0aW9uO1xuICAgICAgcmV0dXJuIGN1cnNvclBvcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIEBvdmVycmlkZVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2RvVmFsaWRhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkb1ZhbGlkYXRlKGZsYWdzKSB7XG4gICAgICB2YXIgcmVnZXhwID0gZmxhZ3MuaW5wdXQgPyB0aGlzLl9udW1iZXJSZWdFeHBJbnB1dCA6IHRoaXMuX251bWJlclJlZ0V4cDtcblxuICAgICAgLy8gdmFsaWRhdGUgYXMgc3RyaW5nXG4gICAgICB2YXIgdmFsaWQgPSByZWdleHAudGVzdCh0aGlzLl9yZW1vdmVUaG91c2FuZHNTZXBhcmF0b3JzKHRoaXMudmFsdWUpKTtcblxuICAgICAgaWYgKHZhbGlkKSB7XG4gICAgICAgIC8vIHZhbGlkYXRlIGFzIG51bWJlclxuICAgICAgICB2YXIgbnVtYmVyID0gdGhpcy5udW1iZXI7XG4gICAgICAgIHZhbGlkID0gdmFsaWQgJiYgIWlzTmFOKG51bWJlcikgJiYgKFxuICAgICAgICAvLyBjaGVjayBtaW4gYm91bmQgZm9yIG5lZ2F0aXZlIHZhbHVlc1xuICAgICAgICB0aGlzLm1pbiA9PSBudWxsIHx8IHRoaXMubWluID49IDAgfHwgdGhpcy5taW4gPD0gdGhpcy5udW1iZXIpICYmIChcbiAgICAgICAgLy8gY2hlY2sgbWF4IGJvdW5kIGZvciBwb3NpdGl2ZSB2YWx1ZXNcbiAgICAgICAgdGhpcy5tYXggPT0gbnVsbCB8fCB0aGlzLm1heCA8PSAwIHx8IHRoaXMubnVtYmVyIDw9IHRoaXMubWF4KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZhbGlkICYmIGdldChNYXNrZWROdW1iZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTWFza2VkTnVtYmVyLnByb3RvdHlwZSksICdkb1ZhbGlkYXRlJywgdGhpcykuY2FsbCh0aGlzLCBmbGFncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICBAb3ZlcnJpZGVcbiAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdkb0NvbW1pdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRvQ29tbWl0KCkge1xuICAgICAgdmFyIG51bWJlciA9IHRoaXMubnVtYmVyO1xuICAgICAgdmFyIHZhbGlkbnVtID0gbnVtYmVyO1xuXG4gICAgICAvLyBjaGVjayBib3VuZHNcbiAgICAgIGlmICh0aGlzLm1pbiAhPSBudWxsKSB2YWxpZG51bSA9IE1hdGgubWF4KHZhbGlkbnVtLCB0aGlzLm1pbik7XG4gICAgICBpZiAodGhpcy5tYXggIT0gbnVsbCkgdmFsaWRudW0gPSBNYXRoLm1pbih2YWxpZG51bSwgdGhpcy5tYXgpO1xuXG4gICAgICBpZiAodmFsaWRudW0gIT09IG51bWJlcikgdGhpcy51bm1hc2tlZFZhbHVlID0gU3RyaW5nKHZhbGlkbnVtKTtcblxuICAgICAgdmFyIGZvcm1hdHRlZCA9IHRoaXMudmFsdWU7XG5cbiAgICAgIGlmICh0aGlzLm5vcm1hbGl6ZVplcm9zKSBmb3JtYXR0ZWQgPSB0aGlzLl9ub3JtYWxpemVaZXJvcyhmb3JtYXR0ZWQpO1xuICAgICAgaWYgKHRoaXMucGFkRnJhY3Rpb25hbFplcm9zKSBmb3JtYXR0ZWQgPSB0aGlzLl9wYWRGcmFjdGlvbmFsWmVyb3MoZm9ybWF0dGVkKTtcblxuICAgICAgdGhpcy5fdmFsdWUgPSBmb3JtYXR0ZWQ7XG4gICAgICBnZXQoTWFza2VkTnVtYmVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hc2tlZE51bWJlci5wcm90b3R5cGUpLCAnZG9Db21taXQnLCB0aGlzKS5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKiAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdfbm9ybWFsaXplWmVyb3MnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfbm9ybWFsaXplWmVyb3ModmFsdWUpIHtcbiAgICAgIHZhciBwYXJ0cyA9IHRoaXMuX3JlbW92ZVRob3VzYW5kc1NlcGFyYXRvcnModmFsdWUpLnNwbGl0KHRoaXMucmFkaXgpO1xuXG4gICAgICAvLyByZW1vdmUgbGVhZGluZyB6ZXJvc1xuICAgICAgcGFydHNbMF0gPSBwYXJ0c1swXS5yZXBsYWNlKC9eKFxcRCopKDAqKShcXGQqKS8sIGZ1bmN0aW9uIChtYXRjaCwgc2lnbiwgemVyb3MsIG51bSkge1xuICAgICAgICByZXR1cm4gc2lnbiArIG51bTtcbiAgICAgIH0pO1xuICAgICAgLy8gYWRkIGxlYWRpbmcgemVyb1xuICAgICAgaWYgKHZhbHVlLmxlbmd0aCAmJiAhL1xcZCQvLnRlc3QocGFydHNbMF0pKSBwYXJ0c1swXSA9IHBhcnRzWzBdICsgJzAnO1xuXG4gICAgICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgICBwYXJ0c1sxXSA9IHBhcnRzWzFdLnJlcGxhY2UoLzAqJC8sICcnKTsgLy8gcmVtb3ZlIHRyYWlsaW5nIHplcm9zXG4gICAgICAgIGlmICghcGFydHNbMV0ubGVuZ3RoKSBwYXJ0cy5sZW5ndGggPSAxOyAvLyByZW1vdmUgZnJhY3Rpb25hbFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5faW5zZXJ0VGhvdXNhbmRzU2VwYXJhdG9ycyhwYXJ0cy5qb2luKHRoaXMucmFkaXgpKTtcbiAgICB9XG5cbiAgICAvKiogKi9cblxuICB9LCB7XG4gICAga2V5OiAnX3BhZEZyYWN0aW9uYWxaZXJvcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9wYWRGcmFjdGlvbmFsWmVyb3ModmFsdWUpIHtcbiAgICAgIGlmICghdmFsdWUpIHJldHVybiB2YWx1ZTtcblxuICAgICAgdmFyIHBhcnRzID0gdmFsdWUuc3BsaXQodGhpcy5yYWRpeCk7XG4gICAgICBpZiAocGFydHMubGVuZ3RoIDwgMikgcGFydHMucHVzaCgnJyk7XG4gICAgICBwYXJ0c1sxXSA9IHBhcnRzWzFdLnBhZEVuZCh0aGlzLnNjYWxlLCAnMCcpO1xuICAgICAgcmV0dXJuIHBhcnRzLmpvaW4odGhpcy5yYWRpeCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICBAb3ZlcnJpZGVcbiAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICd1bm1hc2tlZFZhbHVlJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZW1vdmVUaG91c2FuZHNTZXBhcmF0b3JzKHRoaXMuX25vcm1hbGl6ZVplcm9zKHRoaXMudmFsdWUpKS5yZXBsYWNlKHRoaXMucmFkaXgsICcuJyk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMSh1bm1hc2tlZFZhbHVlKSB7XG4gICAgICBzZXQoTWFza2VkTnVtYmVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hc2tlZE51bWJlci5wcm90b3R5cGUpLCAndW5tYXNrZWRWYWx1ZScsIHVubWFza2VkVmFsdWUucmVwbGFjZSgnLicsIHRoaXMucmFkaXgpLCB0aGlzKTtcbiAgICB9XG5cbiAgICAvKiogUGFyc2VkIE51bWJlciAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdudW1iZXInLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgcmV0dXJuIE51bWJlcih0aGlzLnVubWFza2VkVmFsdWUpO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQkJDEobnVtYmVyKSB7XG4gICAgICB0aGlzLnVubWFza2VkVmFsdWUgPSBTdHJpbmcobnVtYmVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIElzIG5lZ2F0aXZlIGFsbG93ZWRcbiAgICAgIEByZWFkb25seVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2FsbG93TmVnYXRpdmUnLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2lnbmVkIHx8IHRoaXMubWluICE9IG51bGwgJiYgdGhpcy5taW4gPCAwIHx8IHRoaXMubWF4ICE9IG51bGwgJiYgdGhpcy5tYXggPCAwO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gTWFza2VkTnVtYmVyO1xufShNYXNrZWQpO1xuXG5NYXNrZWROdW1iZXIuREVGQVVMVFMgPSB7XG4gIHJhZGl4OiAnLCcsXG4gIHRob3VzYW5kc1NlcGFyYXRvcjogJycsXG4gIG1hcFRvUmFkaXg6IFsnLiddLFxuICBzY2FsZTogMixcbiAgc2lnbmVkOiBmYWxzZSxcbiAgbm9ybWFsaXplWmVyb3M6IHRydWUsXG4gIHBhZEZyYWN0aW9uYWxaZXJvczogZmFsc2Vcbn07XG5cbi8qKiBNYXNraW5nIGJ5IFJlZ0V4cCAqL1xuXG52YXIgTWFza2VkUmVnRXhwID0gZnVuY3Rpb24gKF9NYXNrZWQpIHtcbiAgaW5oZXJpdHMoTWFza2VkUmVnRXhwLCBfTWFza2VkKTtcblxuICBmdW5jdGlvbiBNYXNrZWRSZWdFeHAoKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgTWFza2VkUmVnRXhwKTtcbiAgICByZXR1cm4gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTWFza2VkUmVnRXhwLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTWFza2VkUmVnRXhwKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhNYXNrZWRSZWdFeHAsIFt7XG4gICAga2V5OiAnX3VwZGF0ZScsXG5cbiAgICAvKipcbiAgICAgIEBvdmVycmlkZVxuICAgICAgQHBhcmFtIHtPYmplY3R9IG9wdHNcbiAgICAqL1xuICAgIHZhbHVlOiBmdW5jdGlvbiBfdXBkYXRlKG9wdHMpIHtcbiAgICAgIG9wdHMudmFsaWRhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLnNlYXJjaChvcHRzLm1hc2spID49IDA7XG4gICAgICB9O1xuICAgICAgZ2V0KE1hc2tlZFJlZ0V4cC5wcm90b3R5cGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNYXNrZWRSZWdFeHAucHJvdG90eXBlKSwgJ191cGRhdGUnLCB0aGlzKS5jYWxsKHRoaXMsIG9wdHMpO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gTWFza2VkUmVnRXhwO1xufShNYXNrZWQpO1xuXG4vKiogTWFza2luZyBieSBjdXN0b20gRnVuY3Rpb24gKi9cblxudmFyIE1hc2tlZEZ1bmN0aW9uID0gZnVuY3Rpb24gKF9NYXNrZWQpIHtcbiAgaW5oZXJpdHMoTWFza2VkRnVuY3Rpb24sIF9NYXNrZWQpO1xuXG4gIGZ1bmN0aW9uIE1hc2tlZEZ1bmN0aW9uKCkge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIE1hc2tlZEZ1bmN0aW9uKTtcbiAgICByZXR1cm4gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTWFza2VkRnVuY3Rpb24uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNYXNrZWRGdW5jdGlvbikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoTWFza2VkRnVuY3Rpb24sIFt7XG4gICAga2V5OiAnX3VwZGF0ZScsXG5cbiAgICAvKipcbiAgICAgIEBvdmVycmlkZVxuICAgICAgQHBhcmFtIHtPYmplY3R9IG9wdHNcbiAgICAqL1xuICAgIHZhbHVlOiBmdW5jdGlvbiBfdXBkYXRlKG9wdHMpIHtcbiAgICAgIG9wdHMudmFsaWRhdGUgPSBvcHRzLm1hc2s7XG4gICAgICBnZXQoTWFza2VkRnVuY3Rpb24ucHJvdG90eXBlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTWFza2VkRnVuY3Rpb24ucHJvdG90eXBlKSwgJ191cGRhdGUnLCB0aGlzKS5jYWxsKHRoaXMsIG9wdHMpO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gTWFza2VkRnVuY3Rpb247XG59KE1hc2tlZCk7XG5cbi8qKiBEeW5hbWljIG1hc2sgZm9yIGNob29zaW5nIGFwcm9wcmlhdGUgbWFzayBpbiBydW4tdGltZSAqL1xudmFyIE1hc2tlZER5bmFtaWMgPSBmdW5jdGlvbiAoX01hc2tlZCkge1xuICBpbmhlcml0cyhNYXNrZWREeW5hbWljLCBfTWFza2VkKTtcblxuICAvKipcbiAgICBAcGFyYW0ge09iamVjdH0gb3B0c1xuICAqL1xuXG4gIC8qKiBDb21wbGlsZWQge0BsaW5rIE1hc2tlZH0gb3B0aW9ucyAqL1xuICBmdW5jdGlvbiBNYXNrZWREeW5hbWljKG9wdHMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBNYXNrZWREeW5hbWljKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE1hc2tlZER5bmFtaWMuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNYXNrZWREeW5hbWljKSkuY2FsbCh0aGlzLCBfZXh0ZW5kcyh7fSwgTWFza2VkRHluYW1pYy5ERUZBVUxUUywgb3B0cykpKTtcblxuICAgIF90aGlzLmN1cnJlbnRNYXNrID0gbnVsbDtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICAvKipcbiAgICBAb3ZlcnJpZGVcbiAgKi9cblxuICAvKiogQ2hvb3NlcyB7QGxpbmsgTWFza2VkfSBkZXBlbmRpbmcgb24gaW5wdXQgdmFsdWUgKi9cblxuICAvKiogQ3VycmVudGx5IGNob3NlbiBtYXNrICovXG5cblxuICBjcmVhdGVDbGFzcyhNYXNrZWREeW5hbWljLCBbe1xuICAgIGtleTogJ191cGRhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfdXBkYXRlKG9wdHMpIHtcbiAgICAgIGdldChNYXNrZWREeW5hbWljLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hc2tlZER5bmFtaWMucHJvdG90eXBlKSwgJ191cGRhdGUnLCB0aGlzKS5jYWxsKHRoaXMsIG9wdHMpO1xuICAgICAgLy8gbWFzayBjb3VsZCBiZSB0b3RhbGx5IGR5bmFtaWMgd2l0aCBvbmx5IGBkaXNwYXRjaGAgb3B0aW9uXG4gICAgICB0aGlzLmNvbXBpbGVkTWFza3MgPSBBcnJheS5pc0FycmF5KG9wdHMubWFzaykgPyBvcHRzLm1hc2subWFwKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVNYXNrKG0pO1xuICAgICAgfSkgOiBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIEBvdmVycmlkZVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ19hcHBlbmQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfYXBwZW5kKHN0cikge1xuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICBzdHIgPSB0aGlzLmRvUHJlcGFyZS5hcHBseSh0aGlzLCBbc3RyXS5jb25jYXQodG9Db25zdW1hYmxlQXJyYXkoYXJncykpKTtcblxuICAgICAgdmFyIGRldGFpbHMgPSB0aGlzLl9hcHBseURpc3BhdGNoLmFwcGx5KHRoaXMsIFtzdHJdLmNvbmNhdCh0b0NvbnN1bWFibGVBcnJheShhcmdzKSkpO1xuXG4gICAgICBpZiAodGhpcy5jdXJyZW50TWFzaykge1xuICAgICAgICB2YXIgX2N1cnJlbnRNYXNrO1xuXG4gICAgICAgIGRldGFpbHMuYWdncmVnYXRlKChfY3VycmVudE1hc2sgPSB0aGlzLmN1cnJlbnRNYXNrKS5fYXBwZW5kLmFwcGx5KF9jdXJyZW50TWFzaywgW3N0cl0uY29uY2F0KHRvQ29uc3VtYWJsZUFycmF5KGFyZ3MpKSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGV0YWlscztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdfYXBwbHlEaXNwYXRjaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9hcHBseURpc3BhdGNoKCkge1xuICAgICAgdmFyIGFwcGVuZGVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnJztcblxuICAgICAgdmFyIG9sZFZhbHVlTGVuZ3RoID0gdGhpcy52YWx1ZS5sZW5ndGg7XG4gICAgICB2YXIgaW5wdXRWYWx1ZSA9IHRoaXMucmF3SW5wdXRWYWx1ZTtcbiAgICAgIHZhciBvbGRNYXNrID0gdGhpcy5jdXJyZW50TWFzaztcbiAgICAgIHZhciBkZXRhaWxzID0gbmV3IENoYW5nZURldGFpbHMoKTtcblxuICAgICAgLy8gZGlzcGF0Y2ggU0hPVUxEIE5PVCBtb2RpZnkgbWFza1xuXG4gICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgIGFyZ3NbX2tleTIgLSAxXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY3VycmVudE1hc2sgPSB0aGlzLmRvRGlzcGF0Y2guYXBwbHkodGhpcywgW2FwcGVuZGVkXS5jb25jYXQodG9Db25zdW1hYmxlQXJyYXkoYXJncykpKTtcblxuICAgICAgLy8gcmVzdG9yZSBzdGF0ZSBhZnRlciBkaXNwYXRjaFxuICAgICAgaWYgKHRoaXMuY3VycmVudE1hc2sgJiYgdGhpcy5jdXJyZW50TWFzayAhPT0gb2xkTWFzaykge1xuICAgICAgICAvLyBpZiBtYXNrIGNoYW5nZWQgcmVhcHBseSBpbnB1dFxuICAgICAgICB0aGlzLmN1cnJlbnRNYXNrLnJlc2V0KCk7XG4gICAgICAgIC8vICRGbG93Rml4TWUgLSBpdCdzIG9rLCB3ZSBkb24ndCBjaGFuZ2UgY3VycmVudCBtYXNrXG4gICAgICAgIHRoaXMuY3VycmVudE1hc2suX2FwcGVuZChpbnB1dFZhbHVlLCB7IHJhdzogdHJ1ZSB9KTtcbiAgICAgICAgZGV0YWlscy5zaGlmdCA9IHRoaXMudmFsdWUubGVuZ3RoIC0gb2xkVmFsdWVMZW5ndGg7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkZXRhaWxzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAgQG92ZXJyaWRlXG4gICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZG9EaXNwYXRjaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRvRGlzcGF0Y2goYXBwZW5kZWQpIHtcbiAgICAgIHZhciBmbGFncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKGFwcGVuZGVkLCB0aGlzLCBmbGFncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICBAb3ZlcnJpZGVcbiAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdjbG9uZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsb25lKCkge1xuICAgICAgdmFyIG0gPSBuZXcgTWFza2VkRHluYW1pYyh0aGlzKTtcbiAgICAgIG0uX3ZhbHVlID0gdGhpcy52YWx1ZTtcblxuICAgICAgLy8gdHJ5IHRvIGtlZXAgcmVmZXJlbmNlIHRvIGNvbXBpbGVkIG1hc2tzXG4gICAgICB2YXIgY3VycmVudE1hc2tJbmRleCA9IHRoaXMuY29tcGlsZWRNYXNrcy5pbmRleE9mKHRoaXMuY3VycmVudE1hc2spO1xuICAgICAgaWYgKHRoaXMuY3VycmVudE1hc2spIHtcbiAgICAgICAgbS5jdXJyZW50TWFzayA9IGN1cnJlbnRNYXNrSW5kZXggPj0gMCA/IG0uY29tcGlsZWRNYXNrc1tjdXJyZW50TWFza0luZGV4XS5hc3NpZ24odGhpcy5jdXJyZW50TWFzaykgOiB0aGlzLmN1cnJlbnRNYXNrLmNsb25lKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBtO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAgQG92ZXJyaWRlXG4gICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAncmVzZXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRNYXNrKSB0aGlzLmN1cnJlbnRNYXNrLnJlc2V0KCk7XG4gICAgICB0aGlzLmNvbXBpbGVkTWFza3MuZm9yRWFjaChmdW5jdGlvbiAoY20pIHtcbiAgICAgICAgcmV0dXJuIGNtLnJlc2V0KCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIEBvdmVycmlkZVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3JlbW92ZScsXG5cblxuICAgIC8qKlxuICAgICAgQG92ZXJyaWRlXG4gICAgKi9cbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgdmFyIGRldGFpbHMgPSBuZXcgQ2hhbmdlRGV0YWlscygpO1xuICAgICAgaWYgKHRoaXMuY3VycmVudE1hc2spIHtcbiAgICAgICAgdmFyIF9jdXJyZW50TWFzazI7XG5cbiAgICAgICAgZGV0YWlscy5hZ2dyZWdhdGUoKF9jdXJyZW50TWFzazIgPSB0aGlzLmN1cnJlbnRNYXNrKS5yZW1vdmUuYXBwbHkoX2N1cnJlbnRNYXNrMiwgYXJndW1lbnRzKSlcbiAgICAgICAgLy8gdXBkYXRlIHdpdGggZGlzcGF0Y2hcbiAgICAgICAgLmFnZ3JlZ2F0ZSh0aGlzLl9hcHBseURpc3BhdGNoKCkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGV0YWlscztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIEBvdmVycmlkZVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2V4dHJhY3RJbnB1dCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGV4dHJhY3RJbnB1dCgpIHtcbiAgICAgIHZhciBfY3VycmVudE1hc2szO1xuXG4gICAgICByZXR1cm4gdGhpcy5jdXJyZW50TWFzayA/IChfY3VycmVudE1hc2szID0gdGhpcy5jdXJyZW50TWFzaykuZXh0cmFjdElucHV0LmFwcGx5KF9jdXJyZW50TWFzazMsIGFyZ3VtZW50cykgOiAnJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIEBvdmVycmlkZVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ19leHRyYWN0VGFpbCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9leHRyYWN0VGFpbCgpIHtcbiAgICAgIHZhciBfY3VycmVudE1hc2s0LCBfYmFiZWxIZWxwZXJzJGdldDtcblxuICAgICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjMpLCBfa2V5MyA9IDA7IF9rZXkzIDwgX2xlbjM7IF9rZXkzKyspIHtcbiAgICAgICAgYXJnc1tfa2V5M10gPSBhcmd1bWVudHNbX2tleTNdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5jdXJyZW50TWFzayA/IChfY3VycmVudE1hc2s0ID0gdGhpcy5jdXJyZW50TWFzaykuX2V4dHJhY3RUYWlsLmFwcGx5KF9jdXJyZW50TWFzazQsIHRvQ29uc3VtYWJsZUFycmF5KGFyZ3MpKSA6IChfYmFiZWxIZWxwZXJzJGdldCA9IGdldChNYXNrZWREeW5hbWljLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hc2tlZER5bmFtaWMucHJvdG90eXBlKSwgJ19leHRyYWN0VGFpbCcsIHRoaXMpKS5jYWxsLmFwcGx5KF9iYWJlbEhlbHBlcnMkZ2V0LCBbdGhpc10uY29uY2F0KHRvQ29uc3VtYWJsZUFycmF5KGFyZ3MpKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICBAb3ZlcnJpZGVcbiAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdfYXBwZW5kVGFpbCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9hcHBlbmRUYWlsKHRhaWwpIHtcbiAgICAgIHZhciBkZXRhaWxzID0gbmV3IENoYW5nZURldGFpbHMoKTtcbiAgICAgIGlmICh0YWlsKSBkZXRhaWxzLmFnZ3JlZ2F0ZSh0aGlzLl9hcHBseURpc3BhdGNoKHRhaWwudmFsdWUpKTtcblxuICAgICAgcmV0dXJuIGRldGFpbHMuYWdncmVnYXRlKHRoaXMuY3VycmVudE1hc2sgPyB0aGlzLmN1cnJlbnRNYXNrLl9hcHBlbmRUYWlsKHRhaWwpIDogZ2V0KE1hc2tlZER5bmFtaWMucHJvdG90eXBlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTWFza2VkRHluYW1pYy5wcm90b3R5cGUpLCAnX2FwcGVuZFRhaWwnLCB0aGlzKS5jYWxsKHRoaXMsIHRhaWwpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIEBvdmVycmlkZVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2RvQ29tbWl0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZG9Db21taXQoKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50TWFzaykgdGhpcy5jdXJyZW50TWFzay5kb0NvbW1pdCgpO1xuICAgICAgZ2V0KE1hc2tlZER5bmFtaWMucHJvdG90eXBlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTWFza2VkRHluYW1pYy5wcm90b3R5cGUpLCAnZG9Db21taXQnLCB0aGlzKS5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAgQG92ZXJyaWRlXG4gICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnbmVhcmVzdElucHV0UG9zJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbmVhcmVzdElucHV0UG9zKCkge1xuICAgICAgdmFyIF9jdXJyZW50TWFzazUsIF9iYWJlbEhlbHBlcnMkZ2V0MjtcblxuICAgICAgZm9yICh2YXIgX2xlbjQgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjQpLCBfa2V5NCA9IDA7IF9rZXk0IDwgX2xlbjQ7IF9rZXk0KyspIHtcbiAgICAgICAgYXJnc1tfa2V5NF0gPSBhcmd1bWVudHNbX2tleTRdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5jdXJyZW50TWFzayA/IChfY3VycmVudE1hc2s1ID0gdGhpcy5jdXJyZW50TWFzaykubmVhcmVzdElucHV0UG9zLmFwcGx5KF9jdXJyZW50TWFzazUsIHRvQ29uc3VtYWJsZUFycmF5KGFyZ3MpKSA6IChfYmFiZWxIZWxwZXJzJGdldDIgPSBnZXQoTWFza2VkRHluYW1pYy5wcm90b3R5cGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNYXNrZWREeW5hbWljLnByb3RvdHlwZSksICduZWFyZXN0SW5wdXRQb3MnLCB0aGlzKSkuY2FsbC5hcHBseShfYmFiZWxIZWxwZXJzJGdldDIsIFt0aGlzXS5jb25jYXQodG9Db25zdW1hYmxlQXJyYXkoYXJncykpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICd2YWx1ZScsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jdXJyZW50TWFzayA/IHRoaXMuY3VycmVudE1hc2sudmFsdWUgOiAnJztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0JCQxKHZhbHVlKSB7XG4gICAgICBzZXQoTWFza2VkRHluYW1pYy5wcm90b3R5cGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNYXNrZWREeW5hbWljLnByb3RvdHlwZSksICd2YWx1ZScsIHZhbHVlLCB0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIEBvdmVycmlkZVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3VubWFza2VkVmFsdWUnLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgcmV0dXJuIHRoaXMuY3VycmVudE1hc2sgPyB0aGlzLmN1cnJlbnRNYXNrLnVubWFza2VkVmFsdWUgOiAnJztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0JCQxKHVubWFza2VkVmFsdWUpIHtcbiAgICAgIHNldChNYXNrZWREeW5hbWljLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hc2tlZER5bmFtaWMucHJvdG90eXBlKSwgJ3VubWFza2VkVmFsdWUnLCB1bm1hc2tlZFZhbHVlLCB0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgIEBvdmVycmlkZVxuICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2lzQ29tcGxldGUnLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgcmV0dXJuICEhdGhpcy5jdXJyZW50TWFzayAmJiB0aGlzLmN1cnJlbnRNYXNrLmlzQ29tcGxldGU7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBNYXNrZWREeW5hbWljO1xufShNYXNrZWQpO1xuXG5NYXNrZWREeW5hbWljLkRFRkFVTFRTID0ge1xuICBkaXNwYXRjaDogZnVuY3Rpb24gZGlzcGF0Y2goYXBwZW5kZWQsIG1hc2tlZCwgZmxhZ3MpIHtcbiAgICBpZiAoIW1hc2tlZC5jb21waWxlZE1hc2tzLmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgdmFyIGlucHV0VmFsdWUgPSBtYXNrZWQucmF3SW5wdXRWYWx1ZTtcblxuICAgIC8vIHNpbXVsYXRlIGlucHV0XG4gICAgdmFyIGlucHV0cyA9IG1hc2tlZC5jb21waWxlZE1hc2tzLm1hcChmdW5jdGlvbiAoY20sIGluZGV4KSB7XG4gICAgICB2YXIgbSA9IGNtLmNsb25lKCk7XG4gICAgICBtLnJhd0lucHV0VmFsdWUgPSBpbnB1dFZhbHVlO1xuICAgICAgbS5fYXBwZW5kKGFwcGVuZGVkLCBmbGFncyk7XG5cbiAgICAgIHJldHVybiB7IHZhbHVlOiBtLnJhd0lucHV0VmFsdWUubGVuZ3RoLCBpbmRleDogaW5kZXggfTtcbiAgICB9KTtcblxuICAgIC8vIHBvcCBtYXNrcyB3aXRoIGxvbmdlciB2YWx1ZXMgZmlyc3RcbiAgICBpbnB1dHMuc29ydChmdW5jdGlvbiAoaTEsIGkyKSB7XG4gICAgICByZXR1cm4gaTIudmFsdWUgLSBpMS52YWx1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiBtYXNrZWQuY29tcGlsZWRNYXNrc1tpbnB1dHNbMF0uaW5kZXhdO1xuICB9XG59O1xuXG4vKipcbiAqIEFwcGxpZXMgbWFzayBvbiBlbGVtZW50LlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0hUTUxJbnB1dHxVSUVsZW1lbnR9IGVsIC0gRWxlbWVudCB0byBhcHBseSBtYXNrXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIEN1c3RvbSBtYXNrIG9wdGlvbnNcbiAqIEByZXR1cm4ge0lucHV0TWFza31cbiAqL1xuZnVuY3Rpb24gSU1hc2soZWwpIHtcbiAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gIC8vIGN1cnJlbnRseSBhdmFpbGFibGUgb25seSBmb3IgaW5wdXQtbGlrZSBlbGVtZW50c1xuICByZXR1cm4gbmV3IElucHV0TWFzayhlbCwgb3B0cyk7XG59XG5cbi8qKiB7QGxpbmsgSW5wdXRNYXNrfSAqL1xuSU1hc2suSW5wdXRNYXNrID0gSW5wdXRNYXNrO1xuXG4vKioge0BsaW5rIE1hc2tlZH0gKi9cbklNYXNrLk1hc2tlZCA9IE1hc2tlZDtcbi8qKiB7QGxpbmsgTWFza2VkUGF0dGVybn0gKi9cbklNYXNrLk1hc2tlZFBhdHRlcm4gPSBNYXNrZWRQYXR0ZXJuO1xuLyoqIHtAbGluayBNYXNrZWROdW1iZXJ9ICovXG5JTWFzay5NYXNrZWROdW1iZXIgPSBNYXNrZWROdW1iZXI7XG4vKioge0BsaW5rIE1hc2tlZERhdGV9ICovXG5JTWFzay5NYXNrZWREYXRlID0gTWFza2VkRGF0ZTtcbi8qKiB7QGxpbmsgTWFza2VkUmVnRXhwfSAqL1xuSU1hc2suTWFza2VkUmVnRXhwID0gTWFza2VkUmVnRXhwO1xuLyoqIHtAbGluayBNYXNrZWRGdW5jdGlvbn0gKi9cbklNYXNrLk1hc2tlZEZ1bmN0aW9uID0gTWFza2VkRnVuY3Rpb247XG4vKioge0BsaW5rIE1hc2tlZER5bmFtaWN9ICovXG5JTWFzay5NYXNrZWREeW5hbWljID0gTWFza2VkRHluYW1pYztcbi8qKiB7QGxpbmsgY3JlYXRlTWFza30gKi9cbklNYXNrLmNyZWF0ZU1hc2sgPSBjcmVhdGVNYXNrO1xuXG5nLklNYXNrID0gSU1hc2s7XG5cbnJldHVybiBJTWFzaztcblxufSkpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWltYXNrLmpzLm1hcFxuIiwiLyohXG4gKiBJc290b3BlIFBBQ0tBR0VEIHYzLjAuNVxuICpcbiAqIExpY2Vuc2VkIEdQTHYzIGZvciBvcGVuIHNvdXJjZSB1c2VcbiAqIG9yIElzb3RvcGUgQ29tbWVyY2lhbCBMaWNlbnNlIGZvciBjb21tZXJjaWFsIHVzZVxuICpcbiAqIGh0dHBzOi8vaXNvdG9wZS5tZXRhZml6enkuY29cbiAqIENvcHlyaWdodCAyMDE3IE1ldGFmaXp6eVxuICovXG5cbiFmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJqcXVlcnktYnJpZGdldC9qcXVlcnktYnJpZGdldFwiLFtcImpxdWVyeVwiXSxmdW5jdGlvbihpKXtyZXR1cm4gZSh0LGkpfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSh0LHJlcXVpcmUoXCJqcXVlcnlcIikpOnQualF1ZXJ5QnJpZGdldD1lKHQsdC5qUXVlcnkpfSh3aW5kb3csZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKGkscyxhKXtmdW5jdGlvbiB1KHQsZSxvKXt2YXIgbixzPVwiJCgpLlwiK2krJyhcIicrZSsnXCIpJztyZXR1cm4gdC5lYWNoKGZ1bmN0aW9uKHQsdSl7dmFyIGg9YS5kYXRhKHUsaSk7aWYoIWgpcmV0dXJuIHZvaWQgcihpK1wiIG5vdCBpbml0aWFsaXplZC4gQ2Fubm90IGNhbGwgbWV0aG9kcywgaS5lLiBcIitzKTt2YXIgZD1oW2VdO2lmKCFkfHxcIl9cIj09ZS5jaGFyQXQoMCkpcmV0dXJuIHZvaWQgcihzK1wiIGlzIG5vdCBhIHZhbGlkIG1ldGhvZFwiKTt2YXIgbD1kLmFwcGx5KGgsbyk7bj12b2lkIDA9PT1uP2w6bn0pLHZvaWQgMCE9PW4/bjp0fWZ1bmN0aW9uIGgodCxlKXt0LmVhY2goZnVuY3Rpb24odCxvKXt2YXIgbj1hLmRhdGEobyxpKTtuPyhuLm9wdGlvbihlKSxuLl9pbml0KCkpOihuPW5ldyBzKG8sZSksYS5kYXRhKG8saSxuKSl9KX1hPWF8fGV8fHQualF1ZXJ5LGEmJihzLnByb3RvdHlwZS5vcHRpb258fChzLnByb3RvdHlwZS5vcHRpb249ZnVuY3Rpb24odCl7YS5pc1BsYWluT2JqZWN0KHQpJiYodGhpcy5vcHRpb25zPWEuZXh0ZW5kKCEwLHRoaXMub3B0aW9ucyx0KSl9KSxhLmZuW2ldPWZ1bmN0aW9uKHQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXt2YXIgZT1uLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiB1KHRoaXMsdCxlKX1yZXR1cm4gaCh0aGlzLHQpLHRoaXN9LG8oYSkpfWZ1bmN0aW9uIG8odCl7IXR8fHQmJnQuYnJpZGdldHx8KHQuYnJpZGdldD1pKX12YXIgbj1BcnJheS5wcm90b3R5cGUuc2xpY2Uscz10LmNvbnNvbGUscj1cInVuZGVmaW5lZFwiPT10eXBlb2Ygcz9mdW5jdGlvbigpe306ZnVuY3Rpb24odCl7cy5lcnJvcih0KX07cmV0dXJuIG8oZXx8dC5qUXVlcnkpLGl9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJldi1lbWl0dGVyL2V2LWVtaXR0ZXJcIixlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKCk6dC5FdkVtaXR0ZXI9ZSgpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe312YXIgZT10LnByb3RvdHlwZTtyZXR1cm4gZS5vbj1mdW5jdGlvbih0LGUpe2lmKHQmJmUpe3ZhciBpPXRoaXMuX2V2ZW50cz10aGlzLl9ldmVudHN8fHt9LG89aVt0XT1pW3RdfHxbXTtyZXR1cm4gby5pbmRleE9mKGUpPT0tMSYmby5wdXNoKGUpLHRoaXN9fSxlLm9uY2U9ZnVuY3Rpb24odCxlKXtpZih0JiZlKXt0aGlzLm9uKHQsZSk7dmFyIGk9dGhpcy5fb25jZUV2ZW50cz10aGlzLl9vbmNlRXZlbnRzfHx7fSxvPWlbdF09aVt0XXx8e307cmV0dXJuIG9bZV09ITAsdGhpc319LGUub2ZmPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHNbdF07aWYoaSYmaS5sZW5ndGgpe3ZhciBvPWkuaW5kZXhPZihlKTtyZXR1cm4gbyE9LTEmJmkuc3BsaWNlKG8sMSksdGhpc319LGUuZW1pdEV2ZW50PWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHNbdF07aWYoaSYmaS5sZW5ndGgpe2k9aS5zbGljZSgwKSxlPWV8fFtdO2Zvcih2YXIgbz10aGlzLl9vbmNlRXZlbnRzJiZ0aGlzLl9vbmNlRXZlbnRzW3RdLG49MDtuPGkubGVuZ3RoO24rKyl7dmFyIHM9aVtuXSxyPW8mJm9bc107ciYmKHRoaXMub2ZmKHQscyksZGVsZXRlIG9bc10pLHMuYXBwbHkodGhpcyxlKX1yZXR1cm4gdGhpc319LGUuYWxsT2ZmPWZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuX2V2ZW50cyxkZWxldGUgdGhpcy5fb25jZUV2ZW50c30sdH0pLGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImdldC1zaXplL2dldC1zaXplXCIsW10sZnVuY3Rpb24oKXtyZXR1cm4gZSgpfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSgpOnQuZ2V0U2l6ZT1lKCl9KHdpbmRvdyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7dmFyIGU9cGFyc2VGbG9hdCh0KSxpPXQuaW5kZXhPZihcIiVcIik9PS0xJiYhaXNOYU4oZSk7cmV0dXJuIGkmJmV9ZnVuY3Rpb24gZSgpe31mdW5jdGlvbiBpKCl7Zm9yKHZhciB0PXt3aWR0aDowLGhlaWdodDowLGlubmVyV2lkdGg6MCxpbm5lckhlaWdodDowLG91dGVyV2lkdGg6MCxvdXRlckhlaWdodDowfSxlPTA7ZTxoO2UrKyl7dmFyIGk9dVtlXTt0W2ldPTB9cmV0dXJuIHR9ZnVuY3Rpb24gbyh0KXt2YXIgZT1nZXRDb21wdXRlZFN0eWxlKHQpO3JldHVybiBlfHxhKFwiU3R5bGUgcmV0dXJuZWQgXCIrZStcIi4gQXJlIHlvdSBydW5uaW5nIHRoaXMgY29kZSBpbiBhIGhpZGRlbiBpZnJhbWUgb24gRmlyZWZveD8gU2VlIGh0dHA6Ly9iaXQubHkvZ2V0c2l6ZWJ1ZzFcIiksZX1mdW5jdGlvbiBuKCl7aWYoIWQpe2Q9ITA7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtlLnN0eWxlLndpZHRoPVwiMjAwcHhcIixlLnN0eWxlLnBhZGRpbmc9XCIxcHggMnB4IDNweCA0cHhcIixlLnN0eWxlLmJvcmRlclN0eWxlPVwic29saWRcIixlLnN0eWxlLmJvcmRlcldpZHRoPVwiMXB4IDJweCAzcHggNHB4XCIsZS5zdHlsZS5ib3hTaXppbmc9XCJib3JkZXItYm94XCI7dmFyIGk9ZG9jdW1lbnQuYm9keXx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2kuYXBwZW5kQ2hpbGQoZSk7dmFyIG49byhlKTtzLmlzQm94U2l6ZU91dGVyPXI9MjAwPT10KG4ud2lkdGgpLGkucmVtb3ZlQ2hpbGQoZSl9fWZ1bmN0aW9uIHMoZSl7aWYobigpLFwic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGUpKSxlJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmZS5ub2RlVHlwZSl7dmFyIHM9byhlKTtpZihcIm5vbmVcIj09cy5kaXNwbGF5KXJldHVybiBpKCk7dmFyIGE9e307YS53aWR0aD1lLm9mZnNldFdpZHRoLGEuaGVpZ2h0PWUub2Zmc2V0SGVpZ2h0O2Zvcih2YXIgZD1hLmlzQm9yZGVyQm94PVwiYm9yZGVyLWJveFwiPT1zLmJveFNpemluZyxsPTA7bDxoO2wrKyl7dmFyIGY9dVtsXSxjPXNbZl0sbT1wYXJzZUZsb2F0KGMpO2FbZl09aXNOYU4obSk/MDptfXZhciBwPWEucGFkZGluZ0xlZnQrYS5wYWRkaW5nUmlnaHQseT1hLnBhZGRpbmdUb3ArYS5wYWRkaW5nQm90dG9tLGc9YS5tYXJnaW5MZWZ0K2EubWFyZ2luUmlnaHQsdj1hLm1hcmdpblRvcCthLm1hcmdpbkJvdHRvbSxfPWEuYm9yZGVyTGVmdFdpZHRoK2EuYm9yZGVyUmlnaHRXaWR0aCxJPWEuYm9yZGVyVG9wV2lkdGgrYS5ib3JkZXJCb3R0b21XaWR0aCx6PWQmJnIseD10KHMud2lkdGgpO3ghPT0hMSYmKGEud2lkdGg9eCsoej8wOnArXykpO3ZhciBTPXQocy5oZWlnaHQpO3JldHVybiBTIT09ITEmJihhLmhlaWdodD1TKyh6PzA6eStJKSksYS5pbm5lcldpZHRoPWEud2lkdGgtKHArXyksYS5pbm5lckhlaWdodD1hLmhlaWdodC0oeStJKSxhLm91dGVyV2lkdGg9YS53aWR0aCtnLGEub3V0ZXJIZWlnaHQ9YS5oZWlnaHQrdixhfX12YXIgcixhPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBjb25zb2xlP2U6ZnVuY3Rpb24odCl7Y29uc29sZS5lcnJvcih0KX0sdT1bXCJwYWRkaW5nTGVmdFwiLFwicGFkZGluZ1JpZ2h0XCIsXCJwYWRkaW5nVG9wXCIsXCJwYWRkaW5nQm90dG9tXCIsXCJtYXJnaW5MZWZ0XCIsXCJtYXJnaW5SaWdodFwiLFwibWFyZ2luVG9wXCIsXCJtYXJnaW5Cb3R0b21cIixcImJvcmRlckxlZnRXaWR0aFwiLFwiYm9yZGVyUmlnaHRXaWR0aFwiLFwiYm9yZGVyVG9wV2lkdGhcIixcImJvcmRlckJvdHRvbVdpZHRoXCJdLGg9dS5sZW5ndGgsZD0hMTtyZXR1cm4gc30pLGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImRlc2FuZHJvLW1hdGNoZXMtc2VsZWN0b3IvbWF0Y2hlcy1zZWxlY3RvclwiLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUoKTp0Lm1hdGNoZXNTZWxlY3Rvcj1lKCl9KHdpbmRvdyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciB0PWZ1bmN0aW9uKCl7dmFyIHQ9d2luZG93LkVsZW1lbnQucHJvdG90eXBlO2lmKHQubWF0Y2hlcylyZXR1cm5cIm1hdGNoZXNcIjtpZih0Lm1hdGNoZXNTZWxlY3RvcilyZXR1cm5cIm1hdGNoZXNTZWxlY3RvclwiO2Zvcih2YXIgZT1bXCJ3ZWJraXRcIixcIm1velwiLFwibXNcIixcIm9cIl0saT0wO2k8ZS5sZW5ndGg7aSsrKXt2YXIgbz1lW2ldLG49bytcIk1hdGNoZXNTZWxlY3RvclwiO2lmKHRbbl0pcmV0dXJuIG59fSgpO3JldHVybiBmdW5jdGlvbihlLGkpe3JldHVybiBlW3RdKGkpfX0pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImZpenp5LXVpLXV0aWxzL3V0aWxzXCIsW1wiZGVzYW5kcm8tbWF0Y2hlcy1zZWxlY3Rvci9tYXRjaGVzLXNlbGVjdG9yXCJdLGZ1bmN0aW9uKGkpe3JldHVybiBlKHQsaSl9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHQscmVxdWlyZShcImRlc2FuZHJvLW1hdGNoZXMtc2VsZWN0b3JcIikpOnQuZml6enlVSVV0aWxzPWUodCx0Lm1hdGNoZXNTZWxlY3Rvcil9KHdpbmRvdyxmdW5jdGlvbih0LGUpe3ZhciBpPXt9O2kuZXh0ZW5kPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpIGluIGUpdFtpXT1lW2ldO3JldHVybiB0fSxpLm1vZHVsbz1mdW5jdGlvbih0LGUpe3JldHVybih0JWUrZSklZX0saS5tYWtlQXJyYXk9ZnVuY3Rpb24odCl7dmFyIGU9W107aWYoQXJyYXkuaXNBcnJheSh0KSllPXQ7ZWxzZSBpZih0JiZcIm9iamVjdFwiPT10eXBlb2YgdCYmXCJudW1iZXJcIj09dHlwZW9mIHQubGVuZ3RoKWZvcih2YXIgaT0wO2k8dC5sZW5ndGg7aSsrKWUucHVzaCh0W2ldKTtlbHNlIGUucHVzaCh0KTtyZXR1cm4gZX0saS5yZW1vdmVGcm9tPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5pbmRleE9mKGUpO2khPS0xJiZ0LnNwbGljZShpLDEpfSxpLmdldFBhcmVudD1mdW5jdGlvbih0LGkpe2Zvcig7dC5wYXJlbnROb2RlJiZ0IT1kb2N1bWVudC5ib2R5OylpZih0PXQucGFyZW50Tm9kZSxlKHQsaSkpcmV0dXJuIHR9LGkuZ2V0UXVlcnlFbGVtZW50PWZ1bmN0aW9uKHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0P2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodCk6dH0saS5oYW5kbGVFdmVudD1mdW5jdGlvbih0KXt2YXIgZT1cIm9uXCIrdC50eXBlO3RoaXNbZV0mJnRoaXNbZV0odCl9LGkuZmlsdGVyRmluZEVsZW1lbnRzPWZ1bmN0aW9uKHQsbyl7dD1pLm1ha2VBcnJheSh0KTt2YXIgbj1bXTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCl7aWYoIW8pcmV0dXJuIHZvaWQgbi5wdXNoKHQpO2UodCxvKSYmbi5wdXNoKHQpO2Zvcih2YXIgaT10LnF1ZXJ5U2VsZWN0b3JBbGwobykscz0wO3M8aS5sZW5ndGg7cysrKW4ucHVzaChpW3NdKX19KSxufSxpLmRlYm91bmNlTWV0aG9kPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbz10LnByb3RvdHlwZVtlXSxuPWUrXCJUaW1lb3V0XCI7dC5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXt2YXIgdD10aGlzW25dO3QmJmNsZWFyVGltZW91dCh0KTt2YXIgZT1hcmd1bWVudHMscz10aGlzO3RoaXNbbl09c2V0VGltZW91dChmdW5jdGlvbigpe28uYXBwbHkocyxlKSxkZWxldGUgc1tuXX0saXx8MTAwKX19LGkuZG9jUmVhZHk9ZnVuY3Rpb24odCl7dmFyIGU9ZG9jdW1lbnQucmVhZHlTdGF0ZTtcImNvbXBsZXRlXCI9PWV8fFwiaW50ZXJhY3RpdmVcIj09ZT9zZXRUaW1lb3V0KHQpOmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsdCl9LGkudG9EYXNoZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvKC4pKFtBLVpdKS9nLGZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gZStcIi1cIitpfSkudG9Mb3dlckNhc2UoKX07dmFyIG89dC5jb25zb2xlO3JldHVybiBpLmh0bWxJbml0PWZ1bmN0aW9uKGUsbil7aS5kb2NSZWFkeShmdW5jdGlvbigpe3ZhciBzPWkudG9EYXNoZWQobikscj1cImRhdGEtXCIrcyxhPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbXCIrcitcIl1cIiksdT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmpzLVwiK3MpLGg9aS5tYWtlQXJyYXkoYSkuY29uY2F0KGkubWFrZUFycmF5KHUpKSxkPXIrXCItb3B0aW9uc1wiLGw9dC5qUXVlcnk7aC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBpLHM9dC5nZXRBdHRyaWJ1dGUocil8fHQuZ2V0QXR0cmlidXRlKGQpO3RyeXtpPXMmJkpTT04ucGFyc2Uocyl9Y2F0Y2goYSl7cmV0dXJuIHZvaWQobyYmby5lcnJvcihcIkVycm9yIHBhcnNpbmcgXCIrcitcIiBvbiBcIit0LmNsYXNzTmFtZStcIjogXCIrYSkpfXZhciB1PW5ldyBlKHQsaSk7bCYmbC5kYXRhKHQsbix1KX0pfSl9LGl9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJvdXRsYXllci9pdGVtXCIsW1wiZXYtZW1pdHRlci9ldi1lbWl0dGVyXCIsXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCJldi1lbWl0dGVyXCIpLHJlcXVpcmUoXCJnZXQtc2l6ZVwiKSk6KHQuT3V0bGF5ZXI9e30sdC5PdXRsYXllci5JdGVtPWUodC5FdkVtaXR0ZXIsdC5nZXRTaXplKSl9KHdpbmRvdyxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7Zm9yKHZhciBlIGluIHQpcmV0dXJuITE7cmV0dXJuIGU9bnVsbCwhMH1mdW5jdGlvbiBvKHQsZSl7dCYmKHRoaXMuZWxlbWVudD10LHRoaXMubGF5b3V0PWUsdGhpcy5wb3NpdGlvbj17eDowLHk6MH0sdGhpcy5fY3JlYXRlKCkpfWZ1bmN0aW9uIG4odCl7cmV0dXJuIHQucmVwbGFjZSgvKFtBLVpdKS9nLGZ1bmN0aW9uKHQpe3JldHVyblwiLVwiK3QudG9Mb3dlckNhc2UoKX0pfXZhciBzPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSxyPVwic3RyaW5nXCI9PXR5cGVvZiBzLnRyYW5zaXRpb24/XCJ0cmFuc2l0aW9uXCI6XCJXZWJraXRUcmFuc2l0aW9uXCIsYT1cInN0cmluZ1wiPT10eXBlb2Ygcy50cmFuc2Zvcm0/XCJ0cmFuc2Zvcm1cIjpcIldlYmtpdFRyYW5zZm9ybVwiLHU9e1dlYmtpdFRyYW5zaXRpb246XCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsdHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIn1bcl0saD17dHJhbnNmb3JtOmEsdHJhbnNpdGlvbjpyLHRyYW5zaXRpb25EdXJhdGlvbjpyK1wiRHVyYXRpb25cIix0cmFuc2l0aW9uUHJvcGVydHk6citcIlByb3BlcnR5XCIsdHJhbnNpdGlvbkRlbGF5OnIrXCJEZWxheVwifSxkPW8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpO2QuY29uc3RydWN0b3I9byxkLl9jcmVhdGU9ZnVuY3Rpb24oKXt0aGlzLl90cmFuc249e2luZ1Byb3BlcnRpZXM6e30sY2xlYW46e30sb25FbmQ6e319LHRoaXMuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCJ9KX0sZC5oYW5kbGVFdmVudD1mdW5jdGlvbih0KXt2YXIgZT1cIm9uXCIrdC50eXBlO3RoaXNbZV0mJnRoaXNbZV0odCl9LGQuZ2V0U2l6ZT1mdW5jdGlvbigpe3RoaXMuc2l6ZT1lKHRoaXMuZWxlbWVudCl9LGQuY3NzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZWxlbWVudC5zdHlsZTtmb3IodmFyIGkgaW4gdCl7dmFyIG89aFtpXXx8aTtlW29dPXRbaV19fSxkLmdldFBvc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9Z2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnQpLGU9dGhpcy5sYXlvdXQuX2dldE9wdGlvbihcIm9yaWdpbkxlZnRcIiksaT10aGlzLmxheW91dC5fZ2V0T3B0aW9uKFwib3JpZ2luVG9wXCIpLG89dFtlP1wibGVmdFwiOlwicmlnaHRcIl0sbj10W2k/XCJ0b3BcIjpcImJvdHRvbVwiXSxzPXRoaXMubGF5b3V0LnNpemUscj1vLmluZGV4T2YoXCIlXCIpIT0tMT9wYXJzZUZsb2F0KG8pLzEwMCpzLndpZHRoOnBhcnNlSW50KG8sMTApLGE9bi5pbmRleE9mKFwiJVwiKSE9LTE/cGFyc2VGbG9hdChuKS8xMDAqcy5oZWlnaHQ6cGFyc2VJbnQobiwxMCk7cj1pc05hTihyKT8wOnIsYT1pc05hTihhKT8wOmEsci09ZT9zLnBhZGRpbmdMZWZ0OnMucGFkZGluZ1JpZ2h0LGEtPWk/cy5wYWRkaW5nVG9wOnMucGFkZGluZ0JvdHRvbSx0aGlzLnBvc2l0aW9uLng9cix0aGlzLnBvc2l0aW9uLnk9YX0sZC5sYXlvdXRQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMubGF5b3V0LnNpemUsZT17fSxpPXRoaXMubGF5b3V0Ll9nZXRPcHRpb24oXCJvcmlnaW5MZWZ0XCIpLG89dGhpcy5sYXlvdXQuX2dldE9wdGlvbihcIm9yaWdpblRvcFwiKSxuPWk/XCJwYWRkaW5nTGVmdFwiOlwicGFkZGluZ1JpZ2h0XCIscz1pP1wibGVmdFwiOlwicmlnaHRcIixyPWk/XCJyaWdodFwiOlwibGVmdFwiLGE9dGhpcy5wb3NpdGlvbi54K3Rbbl07ZVtzXT10aGlzLmdldFhWYWx1ZShhKSxlW3JdPVwiXCI7dmFyIHU9bz9cInBhZGRpbmdUb3BcIjpcInBhZGRpbmdCb3R0b21cIixoPW8/XCJ0b3BcIjpcImJvdHRvbVwiLGQ9bz9cImJvdHRvbVwiOlwidG9wXCIsbD10aGlzLnBvc2l0aW9uLnkrdFt1XTtlW2hdPXRoaXMuZ2V0WVZhbHVlKGwpLGVbZF09XCJcIix0aGlzLmNzcyhlKSx0aGlzLmVtaXRFdmVudChcImxheW91dFwiLFt0aGlzXSl9LGQuZ2V0WFZhbHVlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubGF5b3V0Ll9nZXRPcHRpb24oXCJob3Jpem9udGFsXCIpO3JldHVybiB0aGlzLmxheW91dC5vcHRpb25zLnBlcmNlbnRQb3NpdGlvbiYmIWU/dC90aGlzLmxheW91dC5zaXplLndpZHRoKjEwMCtcIiVcIjp0K1wicHhcIn0sZC5nZXRZVmFsdWU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5sYXlvdXQuX2dldE9wdGlvbihcImhvcml6b250YWxcIik7cmV0dXJuIHRoaXMubGF5b3V0Lm9wdGlvbnMucGVyY2VudFBvc2l0aW9uJiZlP3QvdGhpcy5sYXlvdXQuc2l6ZS5oZWlnaHQqMTAwK1wiJVwiOnQrXCJweFwifSxkLl90cmFuc2l0aW9uVG89ZnVuY3Rpb24odCxlKXt0aGlzLmdldFBvc2l0aW9uKCk7dmFyIGk9dGhpcy5wb3NpdGlvbi54LG89dGhpcy5wb3NpdGlvbi55LG49cGFyc2VJbnQodCwxMCkscz1wYXJzZUludChlLDEwKSxyPW49PT10aGlzLnBvc2l0aW9uLngmJnM9PT10aGlzLnBvc2l0aW9uLnk7aWYodGhpcy5zZXRQb3NpdGlvbih0LGUpLHImJiF0aGlzLmlzVHJhbnNpdGlvbmluZylyZXR1cm4gdm9pZCB0aGlzLmxheW91dFBvc2l0aW9uKCk7dmFyIGE9dC1pLHU9ZS1vLGg9e307aC50cmFuc2Zvcm09dGhpcy5nZXRUcmFuc2xhdGUoYSx1KSx0aGlzLnRyYW5zaXRpb24oe3RvOmgsb25UcmFuc2l0aW9uRW5kOnt0cmFuc2Zvcm06dGhpcy5sYXlvdXRQb3NpdGlvbn0saXNDbGVhbmluZzohMH0pfSxkLmdldFRyYW5zbGF0ZT1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMubGF5b3V0Ll9nZXRPcHRpb24oXCJvcmlnaW5MZWZ0XCIpLG89dGhpcy5sYXlvdXQuX2dldE9wdGlvbihcIm9yaWdpblRvcFwiKTtyZXR1cm4gdD1pP3Q6LXQsZT1vP2U6LWUsXCJ0cmFuc2xhdGUzZChcIit0K1wicHgsIFwiK2UrXCJweCwgMClcIn0sZC5nb1RvPWZ1bmN0aW9uKHQsZSl7dGhpcy5zZXRQb3NpdGlvbih0LGUpLHRoaXMubGF5b3V0UG9zaXRpb24oKX0sZC5tb3ZlVG89ZC5fdHJhbnNpdGlvblRvLGQuc2V0UG9zaXRpb249ZnVuY3Rpb24odCxlKXt0aGlzLnBvc2l0aW9uLng9cGFyc2VJbnQodCwxMCksdGhpcy5wb3NpdGlvbi55PXBhcnNlSW50KGUsMTApfSxkLl9ub25UcmFuc2l0aW9uPWZ1bmN0aW9uKHQpe3RoaXMuY3NzKHQudG8pLHQuaXNDbGVhbmluZyYmdGhpcy5fcmVtb3ZlU3R5bGVzKHQudG8pO2Zvcih2YXIgZSBpbiB0Lm9uVHJhbnNpdGlvbkVuZCl0Lm9uVHJhbnNpdGlvbkVuZFtlXS5jYWxsKHRoaXMpfSxkLnRyYW5zaXRpb249ZnVuY3Rpb24odCl7aWYoIXBhcnNlRmxvYXQodGhpcy5sYXlvdXQub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb24pKXJldHVybiB2b2lkIHRoaXMuX25vblRyYW5zaXRpb24odCk7dmFyIGU9dGhpcy5fdHJhbnNuO2Zvcih2YXIgaSBpbiB0Lm9uVHJhbnNpdGlvbkVuZCllLm9uRW5kW2ldPXQub25UcmFuc2l0aW9uRW5kW2ldO2ZvcihpIGluIHQudG8pZS5pbmdQcm9wZXJ0aWVzW2ldPSEwLHQuaXNDbGVhbmluZyYmKGUuY2xlYW5baV09ITApO2lmKHQuZnJvbSl7dGhpcy5jc3ModC5mcm9tKTt2YXIgbz10aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0O289bnVsbH10aGlzLmVuYWJsZVRyYW5zaXRpb24odC50byksdGhpcy5jc3ModC50byksdGhpcy5pc1RyYW5zaXRpb25pbmc9ITB9O3ZhciBsPVwib3BhY2l0eSxcIituKGEpO2QuZW5hYmxlVHJhbnNpdGlvbj1mdW5jdGlvbigpe2lmKCF0aGlzLmlzVHJhbnNpdGlvbmluZyl7dmFyIHQ9dGhpcy5sYXlvdXQub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb247dD1cIm51bWJlclwiPT10eXBlb2YgdD90K1wibXNcIjp0LHRoaXMuY3NzKHt0cmFuc2l0aW9uUHJvcGVydHk6bCx0cmFuc2l0aW9uRHVyYXRpb246dCx0cmFuc2l0aW9uRGVsYXk6dGhpcy5zdGFnZ2VyRGVsYXl8fDB9KSx0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih1LHRoaXMsITEpfX0sZC5vbndlYmtpdFRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24odCl7dGhpcy5vbnRyYW5zaXRpb25lbmQodCl9LGQub25vdHJhbnNpdGlvbmVuZD1mdW5jdGlvbih0KXt0aGlzLm9udHJhbnNpdGlvbmVuZCh0KX07dmFyIGY9e1wiLXdlYmtpdC10cmFuc2Zvcm1cIjpcInRyYW5zZm9ybVwifTtkLm9udHJhbnNpdGlvbmVuZD1mdW5jdGlvbih0KXtpZih0LnRhcmdldD09PXRoaXMuZWxlbWVudCl7dmFyIGU9dGhpcy5fdHJhbnNuLG89Zlt0LnByb3BlcnR5TmFtZV18fHQucHJvcGVydHlOYW1lO2lmKGRlbGV0ZSBlLmluZ1Byb3BlcnRpZXNbb10saShlLmluZ1Byb3BlcnRpZXMpJiZ0aGlzLmRpc2FibGVUcmFuc2l0aW9uKCksbyBpbiBlLmNsZWFuJiYodGhpcy5lbGVtZW50LnN0eWxlW3QucHJvcGVydHlOYW1lXT1cIlwiLGRlbGV0ZSBlLmNsZWFuW29dKSxvIGluIGUub25FbmQpe3ZhciBuPWUub25FbmRbb107bi5jYWxsKHRoaXMpLGRlbGV0ZSBlLm9uRW5kW29dfXRoaXMuZW1pdEV2ZW50KFwidHJhbnNpdGlvbkVuZFwiLFt0aGlzXSl9fSxkLmRpc2FibGVUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVUcmFuc2l0aW9uU3R5bGVzKCksdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodSx0aGlzLCExKSx0aGlzLmlzVHJhbnNpdGlvbmluZz0hMX0sZC5fcmVtb3ZlU3R5bGVzPWZ1bmN0aW9uKHQpe3ZhciBlPXt9O2Zvcih2YXIgaSBpbiB0KWVbaV09XCJcIjt0aGlzLmNzcyhlKX07dmFyIGM9e3RyYW5zaXRpb25Qcm9wZXJ0eTpcIlwiLHRyYW5zaXRpb25EdXJhdGlvbjpcIlwiLHRyYW5zaXRpb25EZWxheTpcIlwifTtyZXR1cm4gZC5yZW1vdmVUcmFuc2l0aW9uU3R5bGVzPWZ1bmN0aW9uKCl7dGhpcy5jc3MoYyl9LGQuc3RhZ2dlcj1mdW5jdGlvbih0KXt0PWlzTmFOKHQpPzA6dCx0aGlzLnN0YWdnZXJEZWxheT10K1wibXNcIn0sZC5yZW1vdmVFbGVtPWZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KSx0aGlzLmNzcyh7ZGlzcGxheTpcIlwifSksdGhpcy5lbWl0RXZlbnQoXCJyZW1vdmVcIixbdGhpc10pfSxkLnJlbW92ZT1mdW5jdGlvbigpe3JldHVybiByJiZwYXJzZUZsb2F0KHRoaXMubGF5b3V0Lm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uKT8odGhpcy5vbmNlKFwidHJhbnNpdGlvbkVuZFwiLGZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVFbGVtKCl9KSx2b2lkIHRoaXMuaGlkZSgpKTp2b2lkIHRoaXMucmVtb3ZlRWxlbSgpfSxkLnJldmVhbD1mdW5jdGlvbigpe2RlbGV0ZSB0aGlzLmlzSGlkZGVuLHRoaXMuY3NzKHtkaXNwbGF5OlwiXCJ9KTt2YXIgdD10aGlzLmxheW91dC5vcHRpb25zLGU9e30saT10aGlzLmdldEhpZGVSZXZlYWxUcmFuc2l0aW9uRW5kUHJvcGVydHkoXCJ2aXNpYmxlU3R5bGVcIik7ZVtpXT10aGlzLm9uUmV2ZWFsVHJhbnNpdGlvbkVuZCx0aGlzLnRyYW5zaXRpb24oe2Zyb206dC5oaWRkZW5TdHlsZSx0bzp0LnZpc2libGVTdHlsZSxpc0NsZWFuaW5nOiEwLG9uVHJhbnNpdGlvbkVuZDplfSl9LGQub25SZXZlYWxUcmFuc2l0aW9uRW5kPWZ1bmN0aW9uKCl7dGhpcy5pc0hpZGRlbnx8dGhpcy5lbWl0RXZlbnQoXCJyZXZlYWxcIil9LGQuZ2V0SGlkZVJldmVhbFRyYW5zaXRpb25FbmRQcm9wZXJ0eT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmxheW91dC5vcHRpb25zW3RdO2lmKGUub3BhY2l0eSlyZXR1cm5cIm9wYWNpdHlcIjtmb3IodmFyIGkgaW4gZSlyZXR1cm4gaX0sZC5oaWRlPWZ1bmN0aW9uKCl7dGhpcy5pc0hpZGRlbj0hMCx0aGlzLmNzcyh7ZGlzcGxheTpcIlwifSk7dmFyIHQ9dGhpcy5sYXlvdXQub3B0aW9ucyxlPXt9LGk9dGhpcy5nZXRIaWRlUmV2ZWFsVHJhbnNpdGlvbkVuZFByb3BlcnR5KFwiaGlkZGVuU3R5bGVcIik7ZVtpXT10aGlzLm9uSGlkZVRyYW5zaXRpb25FbmQsdGhpcy50cmFuc2l0aW9uKHtmcm9tOnQudmlzaWJsZVN0eWxlLHRvOnQuaGlkZGVuU3R5bGUsaXNDbGVhbmluZzohMCxvblRyYW5zaXRpb25FbmQ6ZX0pfSxkLm9uSGlkZVRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24oKXt0aGlzLmlzSGlkZGVuJiYodGhpcy5jc3Moe2Rpc3BsYXk6XCJub25lXCJ9KSx0aGlzLmVtaXRFdmVudChcImhpZGVcIikpfSxkLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmNzcyh7cG9zaXRpb246XCJcIixsZWZ0OlwiXCIscmlnaHQ6XCJcIix0b3A6XCJcIixib3R0b206XCJcIix0cmFuc2l0aW9uOlwiXCIsdHJhbnNmb3JtOlwiXCJ9KX0sb30pLGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcIm91dGxheWVyL291dGxheWVyXCIsW1wiZXYtZW1pdHRlci9ldi1lbWl0dGVyXCIsXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiLFwiZml6enktdWktdXRpbHMvdXRpbHNcIixcIi4vaXRlbVwiXSxmdW5jdGlvbihpLG8sbixzKXtyZXR1cm4gZSh0LGksbyxuLHMpfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSh0LHJlcXVpcmUoXCJldi1lbWl0dGVyXCIpLHJlcXVpcmUoXCJnZXQtc2l6ZVwiKSxyZXF1aXJlKFwiZml6enktdWktdXRpbHNcIikscmVxdWlyZShcIi4vaXRlbVwiKSk6dC5PdXRsYXllcj1lKHQsdC5FdkVtaXR0ZXIsdC5nZXRTaXplLHQuZml6enlVSVV0aWxzLHQuT3V0bGF5ZXIuSXRlbSl9KHdpbmRvdyxmdW5jdGlvbih0LGUsaSxvLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHModCxlKXt2YXIgaT1vLmdldFF1ZXJ5RWxlbWVudCh0KTtpZighaSlyZXR1cm4gdm9pZCh1JiZ1LmVycm9yKFwiQmFkIGVsZW1lbnQgZm9yIFwiK3RoaXMuY29uc3RydWN0b3IubmFtZXNwYWNlK1wiOiBcIisoaXx8dCkpKTt0aGlzLmVsZW1lbnQ9aSxoJiYodGhpcy4kZWxlbWVudD1oKHRoaXMuZWxlbWVudCkpLHRoaXMub3B0aW9ucz1vLmV4dGVuZCh7fSx0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRzKSx0aGlzLm9wdGlvbihlKTt2YXIgbj0rK2w7dGhpcy5lbGVtZW50Lm91dGxheWVyR1VJRD1uLGZbbl09dGhpcyx0aGlzLl9jcmVhdGUoKTt2YXIgcz10aGlzLl9nZXRPcHRpb24oXCJpbml0TGF5b3V0XCIpO3MmJnRoaXMubGF5b3V0KCl9ZnVuY3Rpb24gcih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZX1mdW5jdGlvbiBhKHQpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXJldHVybiB0O3ZhciBlPXQubWF0Y2goLyheXFxkKlxcLj9cXGQqKShcXHcqKS8pLGk9ZSYmZVsxXSxvPWUmJmVbMl07aWYoIWkubGVuZ3RoKXJldHVybiAwO2k9cGFyc2VGbG9hdChpKTt2YXIgbj1tW29dfHwxO3JldHVybiBpKm59dmFyIHU9dC5jb25zb2xlLGg9dC5qUXVlcnksZD1mdW5jdGlvbigpe30sbD0wLGY9e307cy5uYW1lc3BhY2U9XCJvdXRsYXllclwiLHMuSXRlbT1uLHMuZGVmYXVsdHM9e2NvbnRhaW5lclN0eWxlOntwb3NpdGlvbjpcInJlbGF0aXZlXCJ9LGluaXRMYXlvdXQ6ITAsb3JpZ2luTGVmdDohMCxvcmlnaW5Ub3A6ITAscmVzaXplOiEwLHJlc2l6ZUNvbnRhaW5lcjohMCx0cmFuc2l0aW9uRHVyYXRpb246XCIwLjRzXCIsaGlkZGVuU3R5bGU6e29wYWNpdHk6MCx0cmFuc2Zvcm06XCJzY2FsZSgwLjAwMSlcIn0sdmlzaWJsZVN0eWxlOntvcGFjaXR5OjEsdHJhbnNmb3JtOlwic2NhbGUoMSlcIn19O3ZhciBjPXMucHJvdG90eXBlO28uZXh0ZW5kKGMsZS5wcm90b3R5cGUpLGMub3B0aW9uPWZ1bmN0aW9uKHQpe28uZXh0ZW5kKHRoaXMub3B0aW9ucyx0KX0sYy5fZ2V0T3B0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29uc3RydWN0b3IuY29tcGF0T3B0aW9uc1t0XTtyZXR1cm4gZSYmdm9pZCAwIT09dGhpcy5vcHRpb25zW2VdP3RoaXMub3B0aW9uc1tlXTp0aGlzLm9wdGlvbnNbdF19LHMuY29tcGF0T3B0aW9ucz17aW5pdExheW91dDpcImlzSW5pdExheW91dFwiLGhvcml6b250YWw6XCJpc0hvcml6b250YWxcIixsYXlvdXRJbnN0YW50OlwiaXNMYXlvdXRJbnN0YW50XCIsb3JpZ2luTGVmdDpcImlzT3JpZ2luTGVmdFwiLG9yaWdpblRvcDpcImlzT3JpZ2luVG9wXCIscmVzaXplOlwiaXNSZXNpemVCb3VuZFwiLHJlc2l6ZUNvbnRhaW5lcjpcImlzUmVzaXppbmdDb250YWluZXJcIn0sYy5fY3JlYXRlPWZ1bmN0aW9uKCl7dGhpcy5yZWxvYWRJdGVtcygpLHRoaXMuc3RhbXBzPVtdLHRoaXMuc3RhbXAodGhpcy5vcHRpb25zLnN0YW1wKSxvLmV4dGVuZCh0aGlzLmVsZW1lbnQuc3R5bGUsdGhpcy5vcHRpb25zLmNvbnRhaW5lclN0eWxlKTt2YXIgdD10aGlzLl9nZXRPcHRpb24oXCJyZXNpemVcIik7dCYmdGhpcy5iaW5kUmVzaXplKCl9LGMucmVsb2FkSXRlbXM9ZnVuY3Rpb24oKXt0aGlzLml0ZW1zPXRoaXMuX2l0ZW1pemUodGhpcy5lbGVtZW50LmNoaWxkcmVuKX0sYy5faXRlbWl6ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5fZmlsdGVyRmluZEl0ZW1FbGVtZW50cyh0KSxpPXRoaXMuY29uc3RydWN0b3IuSXRlbSxvPVtdLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHM9ZVtuXSxyPW5ldyBpKHMsdGhpcyk7by5wdXNoKHIpfXJldHVybiBvfSxjLl9maWx0ZXJGaW5kSXRlbUVsZW1lbnRzPWZ1bmN0aW9uKHQpe3JldHVybiBvLmZpbHRlckZpbmRFbGVtZW50cyh0LHRoaXMub3B0aW9ucy5pdGVtU2VsZWN0b3IpfSxjLmdldEl0ZW1FbGVtZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW1zLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5lbGVtZW50fSl9LGMubGF5b3V0PWZ1bmN0aW9uKCl7dGhpcy5fcmVzZXRMYXlvdXQoKSx0aGlzLl9tYW5hZ2VTdGFtcHMoKTt2YXIgdD10aGlzLl9nZXRPcHRpb24oXCJsYXlvdXRJbnN0YW50XCIpLGU9dm9pZCAwIT09dD90OiF0aGlzLl9pc0xheW91dEluaXRlZDt0aGlzLmxheW91dEl0ZW1zKHRoaXMuaXRlbXMsZSksdGhpcy5faXNMYXlvdXRJbml0ZWQ9ITB9LGMuX2luaXQ9Yy5sYXlvdXQsYy5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLmdldFNpemUoKX0sYy5nZXRTaXplPWZ1bmN0aW9uKCl7dGhpcy5zaXplPWkodGhpcy5lbGVtZW50KX0sYy5fZ2V0TWVhc3VyZW1lbnQ9ZnVuY3Rpb24odCxlKXt2YXIgbyxuPXRoaXMub3B0aW9uc1t0XTtuPyhcInN0cmluZ1wiPT10eXBlb2Ygbj9vPXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKG4pOm4gaW5zdGFuY2VvZiBIVE1MRWxlbWVudCYmKG89biksdGhpc1t0XT1vP2kobylbZV06bik6dGhpc1t0XT0wfSxjLmxheW91dEl0ZW1zPWZ1bmN0aW9uKHQsZSl7dD10aGlzLl9nZXRJdGVtc0ZvckxheW91dCh0KSx0aGlzLl9sYXlvdXRJdGVtcyh0LGUpLHRoaXMuX3Bvc3RMYXlvdXQoKX0sYy5fZ2V0SXRlbXNGb3JMYXlvdXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiF0LmlzSWdub3JlZH0pfSxjLl9sYXlvdXRJdGVtcz1mdW5jdGlvbih0LGUpe2lmKHRoaXMuX2VtaXRDb21wbGV0ZU9uSXRlbXMoXCJsYXlvdXRcIix0KSx0JiZ0Lmxlbmd0aCl7dmFyIGk9W107dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBvPXRoaXMuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbih0KTtvLml0ZW09dCxvLmlzSW5zdGFudD1lfHx0LmlzTGF5b3V0SW5zdGFudCxpLnB1c2gobyl9LHRoaXMpLHRoaXMuX3Byb2Nlc3NMYXlvdXRRdWV1ZShpKX19LGMuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybnt4OjAseTowfX0sYy5fcHJvY2Vzc0xheW91dFF1ZXVlPWZ1bmN0aW9uKHQpe3RoaXMudXBkYXRlU3RhZ2dlcigpLHQuZm9yRWFjaChmdW5jdGlvbih0LGUpe3RoaXMuX3Bvc2l0aW9uSXRlbSh0Lml0ZW0sdC54LHQueSx0LmlzSW5zdGFudCxlKX0sdGhpcyl9LGMudXBkYXRlU3RhZ2dlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5zdGFnZ2VyO3JldHVybiBudWxsPT09dHx8dm9pZCAwPT09dD92b2lkKHRoaXMuc3RhZ2dlcj0wKToodGhpcy5zdGFnZ2VyPWEodCksdGhpcy5zdGFnZ2VyKX0sYy5fcG9zaXRpb25JdGVtPWZ1bmN0aW9uKHQsZSxpLG8sbil7bz90LmdvVG8oZSxpKToodC5zdGFnZ2VyKG4qdGhpcy5zdGFnZ2VyKSx0Lm1vdmVUbyhlLGkpKX0sYy5fcG9zdExheW91dD1mdW5jdGlvbigpe3RoaXMucmVzaXplQ29udGFpbmVyKCl9LGMucmVzaXplQ29udGFpbmVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZ2V0T3B0aW9uKFwicmVzaXplQ29udGFpbmVyXCIpO2lmKHQpe3ZhciBlPXRoaXMuX2dldENvbnRhaW5lclNpemUoKTtlJiYodGhpcy5fc2V0Q29udGFpbmVyTWVhc3VyZShlLndpZHRoLCEwKSx0aGlzLl9zZXRDb250YWluZXJNZWFzdXJlKGUuaGVpZ2h0LCExKSl9fSxjLl9nZXRDb250YWluZXJTaXplPWQsYy5fc2V0Q29udGFpbmVyTWVhc3VyZT1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMCE9PXQpe3ZhciBpPXRoaXMuc2l6ZTtpLmlzQm9yZGVyQm94JiYodCs9ZT9pLnBhZGRpbmdMZWZ0K2kucGFkZGluZ1JpZ2h0K2kuYm9yZGVyTGVmdFdpZHRoK2kuYm9yZGVyUmlnaHRXaWR0aDppLnBhZGRpbmdCb3R0b20raS5wYWRkaW5nVG9wK2kuYm9yZGVyVG9wV2lkdGgraS5ib3JkZXJCb3R0b21XaWR0aCksdD1NYXRoLm1heCh0LDApLHRoaXMuZWxlbWVudC5zdHlsZVtlP1wid2lkdGhcIjpcImhlaWdodFwiXT10K1wicHhcIn19LGMuX2VtaXRDb21wbGV0ZU9uSXRlbXM9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBpKCl7bi5kaXNwYXRjaEV2ZW50KHQrXCJDb21wbGV0ZVwiLG51bGwsW2VdKX1mdW5jdGlvbiBvKCl7cisrLHI9PXMmJmkoKX12YXIgbj10aGlzLHM9ZS5sZW5ndGg7aWYoIWV8fCFzKXJldHVybiB2b2lkIGkoKTt2YXIgcj0wO2UuZm9yRWFjaChmdW5jdGlvbihlKXtlLm9uY2UodCxvKX0pfSxjLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24odCxlLGkpe3ZhciBvPWU/W2VdLmNvbmNhdChpKTppO2lmKHRoaXMuZW1pdEV2ZW50KHQsbyksaClpZih0aGlzLiRlbGVtZW50PXRoaXMuJGVsZW1lbnR8fGgodGhpcy5lbGVtZW50KSxlKXt2YXIgbj1oLkV2ZW50KGUpO24udHlwZT10LHRoaXMuJGVsZW1lbnQudHJpZ2dlcihuLGkpfWVsc2UgdGhpcy4kZWxlbWVudC50cmlnZ2VyKHQsaSl9LGMuaWdub3JlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0SXRlbSh0KTtlJiYoZS5pc0lnbm9yZWQ9ITApfSxjLnVuaWdub3JlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0SXRlbSh0KTtlJiZkZWxldGUgZS5pc0lnbm9yZWR9LGMuc3RhbXA9ZnVuY3Rpb24odCl7dD10aGlzLl9maW5kKHQpLHQmJih0aGlzLnN0YW1wcz10aGlzLnN0YW1wcy5jb25jYXQodCksdC5mb3JFYWNoKHRoaXMuaWdub3JlLHRoaXMpKX0sYy51bnN0YW1wPWZ1bmN0aW9uKHQpe3Q9dGhpcy5fZmluZCh0KSx0JiZ0LmZvckVhY2goZnVuY3Rpb24odCl7by5yZW1vdmVGcm9tKHRoaXMuc3RhbXBzLHQpLHRoaXMudW5pZ25vcmUodCl9LHRoaXMpfSxjLl9maW5kPWZ1bmN0aW9uKHQpe2lmKHQpcmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHQpKSx0PW8ubWFrZUFycmF5KHQpfSxjLl9tYW5hZ2VTdGFtcHM9ZnVuY3Rpb24oKXt0aGlzLnN0YW1wcyYmdGhpcy5zdGFtcHMubGVuZ3RoJiYodGhpcy5fZ2V0Qm91bmRpbmdSZWN0KCksdGhpcy5zdGFtcHMuZm9yRWFjaCh0aGlzLl9tYW5hZ2VTdGFtcCx0aGlzKSl9LGMuX2dldEJvdW5kaW5nUmVjdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxlPXRoaXMuc2l6ZTt0aGlzLl9ib3VuZGluZ1JlY3Q9e2xlZnQ6dC5sZWZ0K2UucGFkZGluZ0xlZnQrZS5ib3JkZXJMZWZ0V2lkdGgsdG9wOnQudG9wK2UucGFkZGluZ1RvcCtlLmJvcmRlclRvcFdpZHRoLHJpZ2h0OnQucmlnaHQtKGUucGFkZGluZ1JpZ2h0K2UuYm9yZGVyUmlnaHRXaWR0aCksYm90dG9tOnQuYm90dG9tLShlLnBhZGRpbmdCb3R0b20rZS5ib3JkZXJCb3R0b21XaWR0aCl9fSxjLl9tYW5hZ2VTdGFtcD1kLGMuX2dldEVsZW1lbnRPZmZzZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPXRoaXMuX2JvdW5kaW5nUmVjdCxuPWkodCkscz17bGVmdDplLmxlZnQtby5sZWZ0LW4ubWFyZ2luTGVmdCx0b3A6ZS50b3Atby50b3Atbi5tYXJnaW5Ub3AscmlnaHQ6by5yaWdodC1lLnJpZ2h0LW4ubWFyZ2luUmlnaHQsYm90dG9tOm8uYm90dG9tLWUuYm90dG9tLW4ubWFyZ2luQm90dG9tfTtyZXR1cm4gc30sYy5oYW5kbGVFdmVudD1vLmhhbmRsZUV2ZW50LGMuYmluZFJlc2l6ZT1mdW5jdGlvbigpe3QuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMpLHRoaXMuaXNSZXNpemVCb3VuZD0hMH0sYy51bmJpbmRSZXNpemU9ZnVuY3Rpb24oKXt0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzKSx0aGlzLmlzUmVzaXplQm91bmQ9ITF9LGMub25yZXNpemU9ZnVuY3Rpb24oKXt0aGlzLnJlc2l6ZSgpfSxvLmRlYm91bmNlTWV0aG9kKHMsXCJvbnJlc2l6ZVwiLDEwMCksYy5yZXNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzUmVzaXplQm91bmQmJnRoaXMubmVlZHNSZXNpemVMYXlvdXQoKSYmdGhpcy5sYXlvdXQoKX0sYy5uZWVkc1Jlc2l6ZUxheW91dD1mdW5jdGlvbigpe3ZhciB0PWkodGhpcy5lbGVtZW50KSxlPXRoaXMuc2l6ZSYmdDtyZXR1cm4gZSYmdC5pbm5lcldpZHRoIT09dGhpcy5zaXplLmlubmVyV2lkdGh9LGMuYWRkSXRlbXM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5faXRlbWl6ZSh0KTtyZXR1cm4gZS5sZW5ndGgmJih0aGlzLml0ZW1zPXRoaXMuaXRlbXMuY29uY2F0KGUpKSxlfSxjLmFwcGVuZGVkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYWRkSXRlbXModCk7ZS5sZW5ndGgmJih0aGlzLmxheW91dEl0ZW1zKGUsITApLHRoaXMucmV2ZWFsKGUpKX0sYy5wcmVwZW5kZWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5faXRlbWl6ZSh0KTtpZihlLmxlbmd0aCl7dmFyIGk9dGhpcy5pdGVtcy5zbGljZSgwKTt0aGlzLml0ZW1zPWUuY29uY2F0KGkpLHRoaXMuX3Jlc2V0TGF5b3V0KCksdGhpcy5fbWFuYWdlU3RhbXBzKCksdGhpcy5sYXlvdXRJdGVtcyhlLCEwKSx0aGlzLnJldmVhbChlKSx0aGlzLmxheW91dEl0ZW1zKGkpfX0sYy5yZXZlYWw9ZnVuY3Rpb24odCl7aWYodGhpcy5fZW1pdENvbXBsZXRlT25JdGVtcyhcInJldmVhbFwiLHQpLHQmJnQubGVuZ3RoKXt2YXIgZT10aGlzLnVwZGF0ZVN0YWdnZXIoKTt0LmZvckVhY2goZnVuY3Rpb24odCxpKXt0LnN0YWdnZXIoaSplKSx0LnJldmVhbCgpfSl9fSxjLmhpZGU9ZnVuY3Rpb24odCl7aWYodGhpcy5fZW1pdENvbXBsZXRlT25JdGVtcyhcImhpZGVcIix0KSx0JiZ0Lmxlbmd0aCl7dmFyIGU9dGhpcy51cGRhdGVTdGFnZ2VyKCk7dC5mb3JFYWNoKGZ1bmN0aW9uKHQsaSl7dC5zdGFnZ2VyKGkqZSksdC5oaWRlKCl9KX19LGMucmV2ZWFsSXRlbUVsZW1lbnRzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0SXRlbXModCk7dGhpcy5yZXZlYWwoZSl9LGMuaGlkZUl0ZW1FbGVtZW50cz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldEl0ZW1zKHQpO3RoaXMuaGlkZShlKX0sYy5nZXRJdGVtPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5pdGVtcy5sZW5ndGg7ZSsrKXt2YXIgaT10aGlzLml0ZW1zW2VdO2lmKGkuZWxlbWVudD09dClyZXR1cm4gaX19LGMuZ2V0SXRlbXM9ZnVuY3Rpb24odCl7dD1vLm1ha2VBcnJheSh0KTt2YXIgZT1bXTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuZ2V0SXRlbSh0KTtpJiZlLnB1c2goaSl9LHRoaXMpLGV9LGMucmVtb3ZlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0SXRlbXModCk7dGhpcy5fZW1pdENvbXBsZXRlT25JdGVtcyhcInJlbW92ZVwiLGUpLGUmJmUubGVuZ3RoJiZlLmZvckVhY2goZnVuY3Rpb24odCl7dC5yZW1vdmUoKSxvLnJlbW92ZUZyb20odGhpcy5pdGVtcyx0KX0sdGhpcyl9LGMuZGVzdHJveT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZWxlbWVudC5zdHlsZTt0LmhlaWdodD1cIlwiLHQucG9zaXRpb249XCJcIix0LndpZHRoPVwiXCIsdGhpcy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuZGVzdHJveSgpfSksdGhpcy51bmJpbmRSZXNpemUoKTt2YXIgZT10aGlzLmVsZW1lbnQub3V0bGF5ZXJHVUlEO2RlbGV0ZSBmW2VdLGRlbGV0ZSB0aGlzLmVsZW1lbnQub3V0bGF5ZXJHVUlELGgmJmgucmVtb3ZlRGF0YSh0aGlzLmVsZW1lbnQsdGhpcy5jb25zdHJ1Y3Rvci5uYW1lc3BhY2UpfSxzLmRhdGE9ZnVuY3Rpb24odCl7dD1vLmdldFF1ZXJ5RWxlbWVudCh0KTt2YXIgZT10JiZ0Lm91dGxheWVyR1VJRDtyZXR1cm4gZSYmZltlXX0scy5jcmVhdGU9ZnVuY3Rpb24odCxlKXt2YXIgaT1yKHMpO3JldHVybiBpLmRlZmF1bHRzPW8uZXh0ZW5kKHt9LHMuZGVmYXVsdHMpLG8uZXh0ZW5kKGkuZGVmYXVsdHMsZSksaS5jb21wYXRPcHRpb25zPW8uZXh0ZW5kKHt9LHMuY29tcGF0T3B0aW9ucyksaS5uYW1lc3BhY2U9dCxpLmRhdGE9cy5kYXRhLGkuSXRlbT1yKG4pLG8uaHRtbEluaXQoaSx0KSxoJiZoLmJyaWRnZXQmJmguYnJpZGdldCh0LGkpLGl9O3ZhciBtPXttczoxLHM6MWUzfTtyZXR1cm4gcy5JdGVtPW4sc30pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImlzb3RvcGUtbGF5b3V0L2pzL2l0ZW1cIixbXCJvdXRsYXllci9vdXRsYXllclwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCJvdXRsYXllclwiKSk6KHQuSXNvdG9wZT10Lklzb3RvcGV8fHt9LHQuSXNvdG9wZS5JdGVtPWUodC5PdXRsYXllcikpfSh3aW5kb3csZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZSgpe3QuSXRlbS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dmFyIGk9ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0Lkl0ZW0ucHJvdG90eXBlKSxvPWkuX2NyZWF0ZTtpLl9jcmVhdGU9ZnVuY3Rpb24oKXt0aGlzLmlkPXRoaXMubGF5b3V0Lml0ZW1HVUlEKyssby5jYWxsKHRoaXMpLHRoaXMuc29ydERhdGE9e319LGkudXBkYXRlU29ydERhdGE9ZnVuY3Rpb24oKXtpZighdGhpcy5pc0lnbm9yZWQpe3RoaXMuc29ydERhdGEuaWQ9dGhpcy5pZCx0aGlzLnNvcnREYXRhW1wib3JpZ2luYWwtb3JkZXJcIl09dGhpcy5pZCx0aGlzLnNvcnREYXRhLnJhbmRvbT1NYXRoLnJhbmRvbSgpO3ZhciB0PXRoaXMubGF5b3V0Lm9wdGlvbnMuZ2V0U29ydERhdGEsZT10aGlzLmxheW91dC5fc29ydGVycztmb3IodmFyIGkgaW4gdCl7dmFyIG89ZVtpXTt0aGlzLnNvcnREYXRhW2ldPW8odGhpcy5lbGVtZW50LHRoaXMpfX19O3ZhciBuPWkuZGVzdHJveTtyZXR1cm4gaS5kZXN0cm95PWZ1bmN0aW9uKCl7bi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5jc3Moe2Rpc3BsYXk6XCJcIn0pfSxlfSksZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiaXNvdG9wZS1sYXlvdXQvanMvbGF5b3V0LW1vZGVcIixbXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiLFwib3V0bGF5ZXIvb3V0bGF5ZXJcIl0sZSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKFwiZ2V0LXNpemVcIikscmVxdWlyZShcIm91dGxheWVyXCIpKToodC5Jc290b3BlPXQuSXNvdG9wZXx8e30sdC5Jc290b3BlLkxheW91dE1vZGU9ZSh0LmdldFNpemUsdC5PdXRsYXllcikpfSh3aW5kb3csZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3RoaXMuaXNvdG9wZT10LHQmJih0aGlzLm9wdGlvbnM9dC5vcHRpb25zW3RoaXMubmFtZXNwYWNlXSx0aGlzLmVsZW1lbnQ9dC5lbGVtZW50LHRoaXMuaXRlbXM9dC5maWx0ZXJlZEl0ZW1zLHRoaXMuc2l6ZT10LnNpemUpfXZhciBvPWkucHJvdG90eXBlLG49W1wiX3Jlc2V0TGF5b3V0XCIsXCJfZ2V0SXRlbUxheW91dFBvc2l0aW9uXCIsXCJfbWFuYWdlU3RhbXBcIixcIl9nZXRDb250YWluZXJTaXplXCIsXCJfZ2V0RWxlbWVudE9mZnNldFwiLFwibmVlZHNSZXNpemVMYXlvdXRcIixcIl9nZXRPcHRpb25cIl07cmV0dXJuIG4uZm9yRWFjaChmdW5jdGlvbih0KXtvW3RdPWZ1bmN0aW9uKCl7cmV0dXJuIGUucHJvdG90eXBlW3RdLmFwcGx5KHRoaXMuaXNvdG9wZSxhcmd1bWVudHMpfX0pLG8ubmVlZHNWZXJ0aWNhbFJlc2l6ZUxheW91dD1mdW5jdGlvbigpe3ZhciBlPXQodGhpcy5pc290b3BlLmVsZW1lbnQpLGk9dGhpcy5pc290b3BlLnNpemUmJmU7cmV0dXJuIGkmJmUuaW5uZXJIZWlnaHQhPXRoaXMuaXNvdG9wZS5zaXplLmlubmVySGVpZ2h0fSxvLl9nZXRNZWFzdXJlbWVudD1mdW5jdGlvbigpe3RoaXMuaXNvdG9wZS5fZ2V0TWVhc3VyZW1lbnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxvLmdldENvbHVtbldpZHRoPWZ1bmN0aW9uKCl7dGhpcy5nZXRTZWdtZW50U2l6ZShcImNvbHVtblwiLFwiV2lkdGhcIil9LG8uZ2V0Um93SGVpZ2h0PWZ1bmN0aW9uKCl7dGhpcy5nZXRTZWdtZW50U2l6ZShcInJvd1wiLFwiSGVpZ2h0XCIpfSxvLmdldFNlZ21lbnRTaXplPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dCtlLG89XCJvdXRlclwiK2U7aWYodGhpcy5fZ2V0TWVhc3VyZW1lbnQoaSxvKSwhdGhpc1tpXSl7dmFyIG49dGhpcy5nZXRGaXJzdEl0ZW1TaXplKCk7dGhpc1tpXT1uJiZuW29dfHx0aGlzLmlzb3RvcGUuc2l6ZVtcImlubmVyXCIrZV19fSxvLmdldEZpcnN0SXRlbVNpemU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmlzb3RvcGUuZmlsdGVyZWRJdGVtc1swXTtyZXR1cm4gZSYmZS5lbGVtZW50JiZ0KGUuZWxlbWVudCl9LG8ubGF5b3V0PWZ1bmN0aW9uKCl7dGhpcy5pc290b3BlLmxheW91dC5hcHBseSh0aGlzLmlzb3RvcGUsYXJndW1lbnRzKX0sby5nZXRTaXplPWZ1bmN0aW9uKCl7dGhpcy5pc290b3BlLmdldFNpemUoKSx0aGlzLnNpemU9dGhpcy5pc290b3BlLnNpemV9LGkubW9kZXM9e30saS5jcmVhdGU9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7aS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobyksbi5wcm90b3R5cGUuY29uc3RydWN0b3I9bixlJiYobi5vcHRpb25zPWUpLG4ucHJvdG90eXBlLm5hbWVzcGFjZT10LGkubW9kZXNbdF09bixufSxpfSksZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwibWFzb25yeS1sYXlvdXQvbWFzb25yeVwiLFtcIm91dGxheWVyL291dGxheWVyXCIsXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCJvdXRsYXllclwiKSxyZXF1aXJlKFwiZ2V0LXNpemVcIikpOnQuTWFzb25yeT1lKHQuT3V0bGF5ZXIsdC5nZXRTaXplKX0od2luZG93LGZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5jcmVhdGUoXCJtYXNvbnJ5XCIpO2kuY29tcGF0T3B0aW9ucy5maXRXaWR0aD1cImlzRml0V2lkdGhcIjt2YXIgbz1pLnByb3RvdHlwZTtyZXR1cm4gby5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLmdldFNpemUoKSx0aGlzLl9nZXRNZWFzdXJlbWVudChcImNvbHVtbldpZHRoXCIsXCJvdXRlcldpZHRoXCIpLHRoaXMuX2dldE1lYXN1cmVtZW50KFwiZ3V0dGVyXCIsXCJvdXRlcldpZHRoXCIpLHRoaXMubWVhc3VyZUNvbHVtbnMoKSx0aGlzLmNvbFlzPVtdO2Zvcih2YXIgdD0wO3Q8dGhpcy5jb2xzO3QrKyl0aGlzLmNvbFlzLnB1c2goMCk7dGhpcy5tYXhZPTAsdGhpcy5ob3Jpem9udGFsQ29sSW5kZXg9MH0sby5tZWFzdXJlQ29sdW1ucz1mdW5jdGlvbigpe2lmKHRoaXMuZ2V0Q29udGFpbmVyV2lkdGgoKSwhdGhpcy5jb2x1bW5XaWR0aCl7dmFyIHQ9dGhpcy5pdGVtc1swXSxpPXQmJnQuZWxlbWVudDt0aGlzLmNvbHVtbldpZHRoPWkmJmUoaSkub3V0ZXJXaWR0aHx8dGhpcy5jb250YWluZXJXaWR0aH12YXIgbz10aGlzLmNvbHVtbldpZHRoKz10aGlzLmd1dHRlcixuPXRoaXMuY29udGFpbmVyV2lkdGgrdGhpcy5ndXR0ZXIscz1uL28scj1vLW4lbyxhPXImJnI8MT9cInJvdW5kXCI6XCJmbG9vclwiO3M9TWF0aFthXShzKSx0aGlzLmNvbHM9TWF0aC5tYXgocywxKX0sby5nZXRDb250YWluZXJXaWR0aD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2dldE9wdGlvbihcImZpdFdpZHRoXCIpLGk9dD90aGlzLmVsZW1lbnQucGFyZW50Tm9kZTp0aGlzLmVsZW1lbnQsbz1lKGkpO3RoaXMuY29udGFpbmVyV2lkdGg9byYmby5pbm5lcldpZHRofSxvLl9nZXRJdGVtTGF5b3V0UG9zaXRpb249ZnVuY3Rpb24odCl7dC5nZXRTaXplKCk7dmFyIGU9dC5zaXplLm91dGVyV2lkdGgldGhpcy5jb2x1bW5XaWR0aCxpPWUmJmU8MT9cInJvdW5kXCI6XCJjZWlsXCIsbz1NYXRoW2ldKHQuc2l6ZS5vdXRlcldpZHRoL3RoaXMuY29sdW1uV2lkdGgpO289TWF0aC5taW4obyx0aGlzLmNvbHMpO2Zvcih2YXIgbj10aGlzLm9wdGlvbnMuaG9yaXpvbnRhbE9yZGVyP1wiX2dldEhvcml6b250YWxDb2xQb3NpdGlvblwiOlwiX2dldFRvcENvbFBvc2l0aW9uXCIscz10aGlzW25dKG8sdCkscj17eDp0aGlzLmNvbHVtbldpZHRoKnMuY29sLHk6cy55fSxhPXMueSt0LnNpemUub3V0ZXJIZWlnaHQsdT1vK3MuY29sLGg9cy5jb2w7aDx1O2grKyl0aGlzLmNvbFlzW2hdPWE7cmV0dXJuIHJ9LG8uX2dldFRvcENvbFBvc2l0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2dldFRvcENvbEdyb3VwKHQpLGk9TWF0aC5taW4uYXBwbHkoTWF0aCxlKTtyZXR1cm57Y29sOmUuaW5kZXhPZihpKSx5Oml9fSxvLl9nZXRUb3BDb2xHcm91cD1mdW5jdGlvbih0KXtpZih0PDIpcmV0dXJuIHRoaXMuY29sWXM7Zm9yKHZhciBlPVtdLGk9dGhpcy5jb2xzKzEtdCxvPTA7bzxpO28rKyllW29dPXRoaXMuX2dldENvbEdyb3VwWShvLHQpO3JldHVybiBlfSxvLl9nZXRDb2xHcm91cFk9ZnVuY3Rpb24odCxlKXtpZihlPDIpcmV0dXJuIHRoaXMuY29sWXNbdF07dmFyIGk9dGhpcy5jb2xZcy5zbGljZSh0LHQrZSk7cmV0dXJuIE1hdGgubWF4LmFwcGx5KE1hdGgsaSl9LG8uX2dldEhvcml6b250YWxDb2xQb3NpdGlvbj1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuaG9yaXpvbnRhbENvbEluZGV4JXRoaXMuY29scyxvPXQ+MSYmaSt0PnRoaXMuY29scztpPW8/MDppO3ZhciBuPWUuc2l6ZS5vdXRlcldpZHRoJiZlLnNpemUub3V0ZXJIZWlnaHQ7cmV0dXJuIHRoaXMuaG9yaXpvbnRhbENvbEluZGV4PW4/aSt0OnRoaXMuaG9yaXpvbnRhbENvbEluZGV4LHtjb2w6aSx5OnRoaXMuX2dldENvbEdyb3VwWShpLHQpfX0sby5fbWFuYWdlU3RhbXA9ZnVuY3Rpb24odCl7dmFyIGk9ZSh0KSxvPXRoaXMuX2dldEVsZW1lbnRPZmZzZXQodCksbj10aGlzLl9nZXRPcHRpb24oXCJvcmlnaW5MZWZ0XCIpLHM9bj9vLmxlZnQ6by5yaWdodCxyPXMraS5vdXRlcldpZHRoLGE9TWF0aC5mbG9vcihzL3RoaXMuY29sdW1uV2lkdGgpO2E9TWF0aC5tYXgoMCxhKTt2YXIgdT1NYXRoLmZsb29yKHIvdGhpcy5jb2x1bW5XaWR0aCk7dS09ciV0aGlzLmNvbHVtbldpZHRoPzA6MSx1PU1hdGgubWluKHRoaXMuY29scy0xLHUpO2Zvcih2YXIgaD10aGlzLl9nZXRPcHRpb24oXCJvcmlnaW5Ub3BcIiksZD0oaD9vLnRvcDpvLmJvdHRvbSkraS5vdXRlckhlaWdodCxsPWE7bDw9dTtsKyspdGhpcy5jb2xZc1tsXT1NYXRoLm1heChkLHRoaXMuY29sWXNbbF0pfSxvLl9nZXRDb250YWluZXJTaXplPWZ1bmN0aW9uKCl7dGhpcy5tYXhZPU1hdGgubWF4LmFwcGx5KE1hdGgsdGhpcy5jb2xZcyk7dmFyIHQ9e2hlaWdodDp0aGlzLm1heFl9O3JldHVybiB0aGlzLl9nZXRPcHRpb24oXCJmaXRXaWR0aFwiKSYmKHQud2lkdGg9dGhpcy5fZ2V0Q29udGFpbmVyRml0V2lkdGgoKSksdH0sby5fZ2V0Q29udGFpbmVyRml0V2lkdGg9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMuY29sczstLWUmJjA9PT10aGlzLmNvbFlzW2VdOyl0Kys7cmV0dXJuKHRoaXMuY29scy10KSp0aGlzLmNvbHVtbldpZHRoLXRoaXMuZ3V0dGVyfSxvLm5lZWRzUmVzaXplTGF5b3V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb250YWluZXJXaWR0aDtyZXR1cm4gdGhpcy5nZXRDb250YWluZXJXaWR0aCgpLHQhPXRoaXMuY29udGFpbmVyV2lkdGh9LGl9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJpc290b3BlLWxheW91dC9qcy9sYXlvdXQtbW9kZXMvbWFzb25yeVwiLFtcIi4uL2xheW91dC1tb2RlXCIsXCJtYXNvbnJ5LWxheW91dC9tYXNvbnJ5XCJdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUocmVxdWlyZShcIi4uL2xheW91dC1tb2RlXCIpLHJlcXVpcmUoXCJtYXNvbnJ5LWxheW91dFwiKSk6ZSh0Lklzb3RvcGUuTGF5b3V0TW9kZSx0Lk1hc29ucnkpfSh3aW5kb3csZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjt2YXIgaT10LmNyZWF0ZShcIm1hc29ucnlcIiksbz1pLnByb3RvdHlwZSxuPXtfZ2V0RWxlbWVudE9mZnNldDohMCxsYXlvdXQ6ITAsX2dldE1lYXN1cmVtZW50OiEwfTtmb3IodmFyIHMgaW4gZS5wcm90b3R5cGUpbltzXXx8KG9bc109ZS5wcm90b3R5cGVbc10pO3ZhciByPW8ubWVhc3VyZUNvbHVtbnM7by5tZWFzdXJlQ29sdW1ucz1mdW5jdGlvbigpe3RoaXMuaXRlbXM9dGhpcy5pc290b3BlLmZpbHRlcmVkSXRlbXMsci5jYWxsKHRoaXMpfTt2YXIgYT1vLl9nZXRPcHRpb247cmV0dXJuIG8uX2dldE9wdGlvbj1mdW5jdGlvbih0KXtyZXR1cm5cImZpdFdpZHRoXCI9PXQ/dm9pZCAwIT09dGhpcy5vcHRpb25zLmlzRml0V2lkdGg/dGhpcy5vcHRpb25zLmlzRml0V2lkdGg6dGhpcy5vcHRpb25zLmZpdFdpZHRoOmEuYXBwbHkodGhpcy5pc290b3BlLGFyZ3VtZW50cyl9LGl9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJpc290b3BlLWxheW91dC9qcy9sYXlvdXQtbW9kZXMvZml0LXJvd3NcIixbXCIuLi9sYXlvdXQtbW9kZVwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCIuLi9sYXlvdXQtbW9kZVwiKSk6ZSh0Lklzb3RvcGUuTGF5b3V0TW9kZSl9KHdpbmRvdyxmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt2YXIgZT10LmNyZWF0ZShcImZpdFJvd3NcIiksaT1lLnByb3RvdHlwZTtyZXR1cm4gaS5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLng9MCx0aGlzLnk9MCx0aGlzLm1heFk9MCx0aGlzLl9nZXRNZWFzdXJlbWVudChcImd1dHRlclwiLFwib3V0ZXJXaWR0aFwiKX0saS5fZ2V0SXRlbUxheW91dFBvc2l0aW9uPWZ1bmN0aW9uKHQpe3QuZ2V0U2l6ZSgpO3ZhciBlPXQuc2l6ZS5vdXRlcldpZHRoK3RoaXMuZ3V0dGVyLGk9dGhpcy5pc290b3BlLnNpemUuaW5uZXJXaWR0aCt0aGlzLmd1dHRlcjswIT09dGhpcy54JiZlK3RoaXMueD5pJiYodGhpcy54PTAsdGhpcy55PXRoaXMubWF4WSk7dmFyIG89e3g6dGhpcy54LHk6dGhpcy55fTtyZXR1cm4gdGhpcy5tYXhZPU1hdGgubWF4KHRoaXMubWF4WSx0aGlzLnkrdC5zaXplLm91dGVySGVpZ2h0KSx0aGlzLngrPWUsb30saS5fZ2V0Q29udGFpbmVyU2l6ZT1mdW5jdGlvbigpe3JldHVybntoZWlnaHQ6dGhpcy5tYXhZfX0sZX0pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImlzb3RvcGUtbGF5b3V0L2pzL2xheW91dC1tb2Rlcy92ZXJ0aWNhbFwiLFtcIi4uL2xheW91dC1tb2RlXCJdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUocmVxdWlyZShcIi4uL2xheW91dC1tb2RlXCIpKTplKHQuSXNvdG9wZS5MYXlvdXRNb2RlKX0od2luZG93LGZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3ZhciBlPXQuY3JlYXRlKFwidmVydGljYWxcIix7aG9yaXpvbnRhbEFsaWdubWVudDowfSksaT1lLnByb3RvdHlwZTtyZXR1cm4gaS5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLnk9MH0saS5fZ2V0SXRlbUxheW91dFBvc2l0aW9uPWZ1bmN0aW9uKHQpe3QuZ2V0U2l6ZSgpO3ZhciBlPSh0aGlzLmlzb3RvcGUuc2l6ZS5pbm5lcldpZHRoLXQuc2l6ZS5vdXRlcldpZHRoKSp0aGlzLm9wdGlvbnMuaG9yaXpvbnRhbEFsaWdubWVudCxpPXRoaXMueTtyZXR1cm4gdGhpcy55Kz10LnNpemUub3V0ZXJIZWlnaHQse3g6ZSx5Oml9fSxpLl9nZXRDb250YWluZXJTaXplPWZ1bmN0aW9uKCl7cmV0dXJue2hlaWdodDp0aGlzLnl9fSxlfSksZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcIm91dGxheWVyL291dGxheWVyXCIsXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiLFwiZGVzYW5kcm8tbWF0Y2hlcy1zZWxlY3Rvci9tYXRjaGVzLXNlbGVjdG9yXCIsXCJmaXp6eS11aS11dGlscy91dGlsc1wiLFwiaXNvdG9wZS1sYXlvdXQvanMvaXRlbVwiLFwiaXNvdG9wZS1sYXlvdXQvanMvbGF5b3V0LW1vZGVcIixcImlzb3RvcGUtbGF5b3V0L2pzL2xheW91dC1tb2Rlcy9tYXNvbnJ5XCIsXCJpc290b3BlLWxheW91dC9qcy9sYXlvdXQtbW9kZXMvZml0LXJvd3NcIixcImlzb3RvcGUtbGF5b3V0L2pzL2xheW91dC1tb2Rlcy92ZXJ0aWNhbFwiXSxmdW5jdGlvbihpLG8sbixzLHIsYSl7cmV0dXJuIGUodCxpLG8sbixzLHIsYSl9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHQscmVxdWlyZShcIm91dGxheWVyXCIpLHJlcXVpcmUoXCJnZXQtc2l6ZVwiKSxyZXF1aXJlKFwiZGVzYW5kcm8tbWF0Y2hlcy1zZWxlY3RvclwiKSxyZXF1aXJlKFwiZml6enktdWktdXRpbHNcIikscmVxdWlyZShcImlzb3RvcGUtbGF5b3V0L2pzL2l0ZW1cIikscmVxdWlyZShcImlzb3RvcGUtbGF5b3V0L2pzL2xheW91dC1tb2RlXCIpLHJlcXVpcmUoXCJpc290b3BlLWxheW91dC9qcy9sYXlvdXQtbW9kZXMvbWFzb25yeVwiKSxyZXF1aXJlKFwiaXNvdG9wZS1sYXlvdXQvanMvbGF5b3V0LW1vZGVzL2ZpdC1yb3dzXCIpLHJlcXVpcmUoXCJpc290b3BlLWxheW91dC9qcy9sYXlvdXQtbW9kZXMvdmVydGljYWxcIikpOnQuSXNvdG9wZT1lKHQsdC5PdXRsYXllcix0LmdldFNpemUsdC5tYXRjaGVzU2VsZWN0b3IsdC5maXp6eVVJVXRpbHMsdC5Jc290b3BlLkl0ZW0sdC5Jc290b3BlLkxheW91dE1vZGUpfSh3aW5kb3csZnVuY3Rpb24odCxlLGksbyxuLHMscil7ZnVuY3Rpb24gYSh0LGUpe3JldHVybiBmdW5jdGlvbihpLG8pe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcz10W25dLHI9aS5zb3J0RGF0YVtzXSxhPW8uc29ydERhdGFbc107aWYocj5hfHxyPGEpe3ZhciB1PXZvaWQgMCE9PWVbc10/ZVtzXTplLGg9dT8xOi0xO3JldHVybihyPmE/MTotMSkqaH19cmV0dXJuIDB9fXZhciB1PXQualF1ZXJ5LGg9U3RyaW5nLnByb3RvdHlwZS50cmltP2Z1bmN0aW9uKHQpe3JldHVybiB0LnRyaW0oKX06ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX0sZD1lLmNyZWF0ZShcImlzb3RvcGVcIix7bGF5b3V0TW9kZTpcIm1hc29ucnlcIixpc0pRdWVyeUZpbHRlcmluZzohMCxzb3J0QXNjZW5kaW5nOiEwfSk7ZC5JdGVtPXMsZC5MYXlvdXRNb2RlPXI7dmFyIGw9ZC5wcm90b3R5cGU7bC5fY3JlYXRlPWZ1bmN0aW9uKCl7dGhpcy5pdGVtR1VJRD0wLHRoaXMuX3NvcnRlcnM9e30sdGhpcy5fZ2V0U29ydGVycygpLGUucHJvdG90eXBlLl9jcmVhdGUuY2FsbCh0aGlzKSx0aGlzLm1vZGVzPXt9LHRoaXMuZmlsdGVyZWRJdGVtcz10aGlzLml0ZW1zLHRoaXMuc29ydEhpc3Rvcnk9W1wib3JpZ2luYWwtb3JkZXJcIl07Zm9yKHZhciB0IGluIHIubW9kZXMpdGhpcy5faW5pdExheW91dE1vZGUodCl9LGwucmVsb2FkSXRlbXM9ZnVuY3Rpb24oKXt0aGlzLml0ZW1HVUlEPTAsZS5wcm90b3R5cGUucmVsb2FkSXRlbXMuY2FsbCh0aGlzKX0sbC5faXRlbWl6ZT1mdW5jdGlvbigpe2Zvcih2YXIgdD1lLnByb3RvdHlwZS5faXRlbWl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksaT0wO2k8dC5sZW5ndGg7aSsrKXt2YXIgbz10W2ldO28uaWQ9dGhpcy5pdGVtR1VJRCsrfXJldHVybiB0aGlzLl91cGRhdGVJdGVtc1NvcnREYXRhKHQpLHR9LGwuX2luaXRMYXlvdXRNb2RlPWZ1bmN0aW9uKHQpe3ZhciBlPXIubW9kZXNbdF0saT10aGlzLm9wdGlvbnNbdF18fHt9O3RoaXMub3B0aW9uc1t0XT1lLm9wdGlvbnM/bi5leHRlbmQoZS5vcHRpb25zLGkpOmksdGhpcy5tb2Rlc1t0XT1uZXcgZSh0aGlzKX0sbC5sYXlvdXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5faXNMYXlvdXRJbml0ZWQmJnRoaXMuX2dldE9wdGlvbihcImluaXRMYXlvdXRcIik/dm9pZCB0aGlzLmFycmFuZ2UoKTp2b2lkIHRoaXMuX2xheW91dCgpfSxsLl9sYXlvdXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9nZXRJc0luc3RhbnQoKTt0aGlzLl9yZXNldExheW91dCgpLHRoaXMuX21hbmFnZVN0YW1wcygpLHRoaXMubGF5b3V0SXRlbXModGhpcy5maWx0ZXJlZEl0ZW1zLHQpLHRoaXMuX2lzTGF5b3V0SW5pdGVkPSEwfSxsLmFycmFuZ2U9ZnVuY3Rpb24odCl7dGhpcy5vcHRpb24odCksdGhpcy5fZ2V0SXNJbnN0YW50KCk7dmFyIGU9dGhpcy5fZmlsdGVyKHRoaXMuaXRlbXMpO3RoaXMuZmlsdGVyZWRJdGVtcz1lLm1hdGNoZXMsdGhpcy5fYmluZEFycmFuZ2VDb21wbGV0ZSgpLHRoaXMuX2lzSW5zdGFudD90aGlzLl9ub1RyYW5zaXRpb24odGhpcy5faGlkZVJldmVhbCxbZV0pOnRoaXMuX2hpZGVSZXZlYWwoZSksdGhpcy5fc29ydCgpLHRoaXMuX2xheW91dCgpfSxsLl9pbml0PWwuYXJyYW5nZSxsLl9oaWRlUmV2ZWFsPWZ1bmN0aW9uKHQpe3RoaXMucmV2ZWFsKHQubmVlZFJldmVhbCksdGhpcy5oaWRlKHQubmVlZEhpZGUpfSxsLl9nZXRJc0luc3RhbnQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9nZXRPcHRpb24oXCJsYXlvdXRJbnN0YW50XCIpLGU9dm9pZCAwIT09dD90OiF0aGlzLl9pc0xheW91dEluaXRlZDtyZXR1cm4gdGhpcy5faXNJbnN0YW50PWUsZX0sbC5fYmluZEFycmFuZ2VDb21wbGV0ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtlJiZpJiZvJiZuLmRpc3BhdGNoRXZlbnQoXCJhcnJhbmdlQ29tcGxldGVcIixudWxsLFtuLmZpbHRlcmVkSXRlbXNdKX12YXIgZSxpLG8sbj10aGlzO3RoaXMub25jZShcImxheW91dENvbXBsZXRlXCIsZnVuY3Rpb24oKXtlPSEwLHQoKX0pLHRoaXMub25jZShcImhpZGVDb21wbGV0ZVwiLGZ1bmN0aW9uKCl7aT0hMCx0KCl9KSx0aGlzLm9uY2UoXCJyZXZlYWxDb21wbGV0ZVwiLGZ1bmN0aW9uKCl7bz0hMCx0KCl9KX0sbC5fZmlsdGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMub3B0aW9ucy5maWx0ZXI7ZT1lfHxcIipcIjtmb3IodmFyIGk9W10sbz1bXSxuPVtdLHM9dGhpcy5fZ2V0RmlsdGVyVGVzdChlKSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBhPXRbcl07aWYoIWEuaXNJZ25vcmVkKXt2YXIgdT1zKGEpO3UmJmkucHVzaChhKSx1JiZhLmlzSGlkZGVuP28ucHVzaChhKTp1fHxhLmlzSGlkZGVufHxuLnB1c2goYSl9fXJldHVybnttYXRjaGVzOmksbmVlZFJldmVhbDpvLG5lZWRIaWRlOm59fSxsLl9nZXRGaWx0ZXJUZXN0PWZ1bmN0aW9uKHQpe1xucmV0dXJuIHUmJnRoaXMub3B0aW9ucy5pc0pRdWVyeUZpbHRlcmluZz9mdW5jdGlvbihlKXtyZXR1cm4gdShlLmVsZW1lbnQpLmlzKHQpfTpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P2Z1bmN0aW9uKGUpe3JldHVybiB0KGUuZWxlbWVudCl9OmZ1bmN0aW9uKGUpe3JldHVybiBvKGUuZWxlbWVudCx0KX19LGwudXBkYXRlU29ydERhdGE9ZnVuY3Rpb24odCl7dmFyIGU7dD8odD1uLm1ha2VBcnJheSh0KSxlPXRoaXMuZ2V0SXRlbXModCkpOmU9dGhpcy5pdGVtcyx0aGlzLl9nZXRTb3J0ZXJzKCksdGhpcy5fdXBkYXRlSXRlbXNTb3J0RGF0YShlKX0sbC5fZ2V0U29ydGVycz1mdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5nZXRTb3J0RGF0YTtmb3IodmFyIGUgaW4gdCl7dmFyIGk9dFtlXTt0aGlzLl9zb3J0ZXJzW2VdPWYoaSl9fSxsLl91cGRhdGVJdGVtc1NvcnREYXRhPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10JiZ0Lmxlbmd0aCxpPTA7ZSYmaTxlO2krKyl7dmFyIG89dFtpXTtvLnVwZGF0ZVNvcnREYXRhKCl9fTt2YXIgZj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQpcmV0dXJuIHQ7dmFyIGk9aCh0KS5zcGxpdChcIiBcIiksbz1pWzBdLG49by5tYXRjaCgvXlxcWyguKylcXF0kLykscz1uJiZuWzFdLHI9ZShzLG8pLGE9ZC5zb3J0RGF0YVBhcnNlcnNbaVsxXV07cmV0dXJuIHQ9YT9mdW5jdGlvbih0KXtyZXR1cm4gdCYmYShyKHQpKX06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnIodCl9fWZ1bmN0aW9uIGUodCxlKXtyZXR1cm4gdD9mdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUodCl9OmZ1bmN0aW9uKHQpe3ZhciBpPXQucXVlcnlTZWxlY3RvcihlKTtyZXR1cm4gaSYmaS50ZXh0Q29udGVudH19cmV0dXJuIHR9KCk7ZC5zb3J0RGF0YVBhcnNlcnM9e3BhcnNlSW50OmZ1bmN0aW9uKHQpe3JldHVybiBwYXJzZUludCh0LDEwKX0scGFyc2VGbG9hdDpmdW5jdGlvbih0KXtyZXR1cm4gcGFyc2VGbG9hdCh0KX19LGwuX3NvcnQ9ZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMuc29ydEJ5KXt2YXIgdD1uLm1ha2VBcnJheSh0aGlzLm9wdGlvbnMuc29ydEJ5KTt0aGlzLl9nZXRJc1NhbWVTb3J0QnkodCl8fCh0aGlzLnNvcnRIaXN0b3J5PXQuY29uY2F0KHRoaXMuc29ydEhpc3RvcnkpKTt2YXIgZT1hKHRoaXMuc29ydEhpc3RvcnksdGhpcy5vcHRpb25zLnNvcnRBc2NlbmRpbmcpO3RoaXMuZmlsdGVyZWRJdGVtcy5zb3J0KGUpfX0sbC5fZ2V0SXNTYW1lU29ydEJ5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0hPXRoaXMuc29ydEhpc3RvcnlbZV0pcmV0dXJuITE7cmV0dXJuITB9LGwuX21vZGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMubGF5b3V0TW9kZSxlPXRoaXMubW9kZXNbdF07aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiTm8gbGF5b3V0IG1vZGU6IFwiK3QpO3JldHVybiBlLm9wdGlvbnM9dGhpcy5vcHRpb25zW3RdLGV9LGwuX3Jlc2V0TGF5b3V0PWZ1bmN0aW9uKCl7ZS5wcm90b3R5cGUuX3Jlc2V0TGF5b3V0LmNhbGwodGhpcyksdGhpcy5fbW9kZSgpLl9yZXNldExheW91dCgpfSxsLl9nZXRJdGVtTGF5b3V0UG9zaXRpb249ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX21vZGUoKS5fZ2V0SXRlbUxheW91dFBvc2l0aW9uKHQpfSxsLl9tYW5hZ2VTdGFtcD1mdW5jdGlvbih0KXt0aGlzLl9tb2RlKCkuX21hbmFnZVN0YW1wKHQpfSxsLl9nZXRDb250YWluZXJTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZGUoKS5fZ2V0Q29udGFpbmVyU2l6ZSgpfSxsLm5lZWRzUmVzaXplTGF5b3V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZGUoKS5uZWVkc1Jlc2l6ZUxheW91dCgpfSxsLmFwcGVuZGVkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYWRkSXRlbXModCk7aWYoZS5sZW5ndGgpe3ZhciBpPXRoaXMuX2ZpbHRlclJldmVhbEFkZGVkKGUpO3RoaXMuZmlsdGVyZWRJdGVtcz10aGlzLmZpbHRlcmVkSXRlbXMuY29uY2F0KGkpfX0sbC5wcmVwZW5kZWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5faXRlbWl6ZSh0KTtpZihlLmxlbmd0aCl7dGhpcy5fcmVzZXRMYXlvdXQoKSx0aGlzLl9tYW5hZ2VTdGFtcHMoKTt2YXIgaT10aGlzLl9maWx0ZXJSZXZlYWxBZGRlZChlKTt0aGlzLmxheW91dEl0ZW1zKHRoaXMuZmlsdGVyZWRJdGVtcyksdGhpcy5maWx0ZXJlZEl0ZW1zPWkuY29uY2F0KHRoaXMuZmlsdGVyZWRJdGVtcyksdGhpcy5pdGVtcz1lLmNvbmNhdCh0aGlzLml0ZW1zKX19LGwuX2ZpbHRlclJldmVhbEFkZGVkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2ZpbHRlcih0KTtyZXR1cm4gdGhpcy5oaWRlKGUubmVlZEhpZGUpLHRoaXMucmV2ZWFsKGUubWF0Y2hlcyksdGhpcy5sYXlvdXRJdGVtcyhlLm1hdGNoZXMsITApLGUubWF0Y2hlc30sbC5pbnNlcnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5hZGRJdGVtcyh0KTtpZihlLmxlbmd0aCl7dmFyIGksbyxuPWUubGVuZ3RoO2ZvcihpPTA7aTxuO2krKylvPWVbaV0sdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKG8uZWxlbWVudCk7dmFyIHM9dGhpcy5fZmlsdGVyKGUpLm1hdGNoZXM7Zm9yKGk9MDtpPG47aSsrKWVbaV0uaXNMYXlvdXRJbnN0YW50PSEwO2Zvcih0aGlzLmFycmFuZ2UoKSxpPTA7aTxuO2krKylkZWxldGUgZVtpXS5pc0xheW91dEluc3RhbnQ7dGhpcy5yZXZlYWwocyl9fTt2YXIgYz1sLnJlbW92ZTtyZXR1cm4gbC5yZW1vdmU9ZnVuY3Rpb24odCl7dD1uLm1ha2VBcnJheSh0KTt2YXIgZT10aGlzLmdldEl0ZW1zKHQpO2MuY2FsbCh0aGlzLHQpO2Zvcih2YXIgaT1lJiZlLmxlbmd0aCxvPTA7aSYmbzxpO28rKyl7dmFyIHM9ZVtvXTtuLnJlbW92ZUZyb20odGhpcy5maWx0ZXJlZEl0ZW1zLHMpfX0sbC5zaHVmZmxlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLml0ZW1zLmxlbmd0aDt0Kyspe3ZhciBlPXRoaXMuaXRlbXNbdF07ZS5zb3J0RGF0YS5yYW5kb209TWF0aC5yYW5kb20oKX10aGlzLm9wdGlvbnMuc29ydEJ5PVwicmFuZG9tXCIsdGhpcy5fc29ydCgpLHRoaXMuX2xheW91dCgpfSxsLl9ub1RyYW5zaXRpb249ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uO3RoaXMub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb249MDt2YXIgbz10LmFwcGx5KHRoaXMsZSk7cmV0dXJuIHRoaXMub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb249aSxvfSxsLmdldEZpbHRlcmVkSXRlbUVsZW1lbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlsdGVyZWRJdGVtcy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuZWxlbWVudH0pfSxkfSk7IiwiLyohXG5cbkpTWmlwIHYzLjEuNSAtIEEgSmF2YVNjcmlwdCBjbGFzcyBmb3IgZ2VuZXJhdGluZyBhbmQgcmVhZGluZyB6aXAgZmlsZXNcbjxodHRwOi8vc3R1YXJ0ay5jb20vanN6aXA+XG5cbihjKSAyMDA5LTIwMTYgU3R1YXJ0IEtuaWdodGxleSA8c3R1YXJ0IFthdF0gc3R1YXJ0ay5jb20+XG5EdWFsIGxpY2VuY2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBvciBHUEx2My4gU2VlIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vU3R1ay9qc3ppcC9tYXN0ZXIvTElDRU5TRS5tYXJrZG93bi5cblxuSlNaaXAgdXNlcyB0aGUgbGlicmFyeSBwYWtvIHJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSA6XG5odHRwczovL2dpdGh1Yi5jb20vbm9kZWNhL3Bha28vYmxvYi9tYXN0ZXIvTElDRU5TRVxuKi9cbiFmdW5jdGlvbihhKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1hKCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGEpO2Vsc2V7dmFyIGI7Yj1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsYi5KU1ppcD1hKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBhKGIsYyxkKXtmdW5jdGlvbiBlKGcsaCl7aWYoIWNbZ10pe2lmKCFiW2ddKXt2YXIgaT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFoJiZpKXJldHVybiBpKGcsITApO2lmKGYpcmV0dXJuIGYoZywhMCk7dmFyIGo9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitnK1wiJ1wiKTt0aHJvdyBqLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsan12YXIgaz1jW2ddPXtleHBvcnRzOnt9fTtiW2ddWzBdLmNhbGwoay5leHBvcnRzLGZ1bmN0aW9uKGEpe3ZhciBjPWJbZ11bMV1bYV07cmV0dXJuIGUoYz9jOmEpfSxrLGsuZXhwb3J0cyxhLGIsYyxkKX1yZXR1cm4gY1tnXS5leHBvcnRzfWZvcih2YXIgZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGc9MDtnPGQubGVuZ3RoO2crKyllKGRbZ10pO3JldHVybiBlfSh7MTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO3ZhciBkPWEoXCIuL3V0aWxzXCIpLGU9YShcIi4vc3VwcG9ydFwiKSxmPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIjtjLmVuY29kZT1mdW5jdGlvbihhKXtmb3IodmFyIGIsYyxlLGcsaCxpLGosaz1bXSxsPTAsbT1hLmxlbmd0aCxuPW0sbz1cInN0cmluZ1wiIT09ZC5nZXRUeXBlT2YoYSk7bDxhLmxlbmd0aDspbj1tLWwsbz8oYj1hW2wrK10sYz1sPG0/YVtsKytdOjAsZT1sPG0/YVtsKytdOjApOihiPWEuY2hhckNvZGVBdChsKyspLGM9bDxtP2EuY2hhckNvZGVBdChsKyspOjAsZT1sPG0/YS5jaGFyQ29kZUF0KGwrKyk6MCksZz1iPj4yLGg9KDMmYik8PDR8Yz4+NCxpPW4+MT8oMTUmYyk8PDJ8ZT4+Njo2NCxqPW4+Mj82MyZlOjY0LGsucHVzaChmLmNoYXJBdChnKStmLmNoYXJBdChoKStmLmNoYXJBdChpKStmLmNoYXJBdChqKSk7cmV0dXJuIGsuam9pbihcIlwiKX0sYy5kZWNvZGU9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGcsaCxpLGosaz0wLGw9MCxtPVwiZGF0YTpcIjtpZihhLnN1YnN0cigwLG0ubGVuZ3RoKT09PW0pdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBiYXNlNjQgaW5wdXQsIGl0IGxvb2tzIGxpa2UgYSBkYXRhIHVybC5cIik7YT1hLnJlcGxhY2UoL1teQS1aYS16MC05XFwrXFwvXFw9XS9nLFwiXCIpO3ZhciBuPTMqYS5sZW5ndGgvNDtpZihhLmNoYXJBdChhLmxlbmd0aC0xKT09PWYuY2hhckF0KDY0KSYmbi0tLGEuY2hhckF0KGEubGVuZ3RoLTIpPT09Zi5jaGFyQXQoNjQpJiZuLS0sbiUxIT09MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGJhc2U2NCBpbnB1dCwgYmFkIGNvbnRlbnQgbGVuZ3RoLlwiKTt2YXIgbztmb3Iobz1lLnVpbnQ4YXJyYXk/bmV3IFVpbnQ4QXJyYXkoMHxuKTpuZXcgQXJyYXkoMHxuKTtrPGEubGVuZ3RoOylnPWYuaW5kZXhPZihhLmNoYXJBdChrKyspKSxoPWYuaW5kZXhPZihhLmNoYXJBdChrKyspKSxpPWYuaW5kZXhPZihhLmNoYXJBdChrKyspKSxqPWYuaW5kZXhPZihhLmNoYXJBdChrKyspKSxiPWc8PDJ8aD4+NCxjPSgxNSZoKTw8NHxpPj4yLGQ9KDMmaSk8PDZ8aixvW2wrK109Yiw2NCE9PWkmJihvW2wrK109YyksNjQhPT1qJiYob1tsKytdPWQpO3JldHVybiBvfX0se1wiLi9zdXBwb3J0XCI6MzAsXCIuL3V0aWxzXCI6MzJ9XSwyOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhLGIsYyxkLGUpe3RoaXMuY29tcHJlc3NlZFNpemU9YSx0aGlzLnVuY29tcHJlc3NlZFNpemU9Yix0aGlzLmNyYzMyPWMsdGhpcy5jb21wcmVzc2lvbj1kLHRoaXMuY29tcHJlc3NlZENvbnRlbnQ9ZX12YXIgZT1hKFwiLi9leHRlcm5hbFwiKSxmPWEoXCIuL3N0cmVhbS9EYXRhV29ya2VyXCIpLGc9YShcIi4vc3RyZWFtL0RhdGFMZW5ndGhQcm9iZVwiKSxoPWEoXCIuL3N0cmVhbS9DcmMzMlByb2JlXCIpLGc9YShcIi4vc3RyZWFtL0RhdGFMZW5ndGhQcm9iZVwiKTtkLnByb3RvdHlwZT17Z2V0Q29udGVudFdvcmtlcjpmdW5jdGlvbigpe3ZhciBhPW5ldyBmKGUuUHJvbWlzZS5yZXNvbHZlKHRoaXMuY29tcHJlc3NlZENvbnRlbnQpKS5waXBlKHRoaXMuY29tcHJlc3Npb24udW5jb21wcmVzc1dvcmtlcigpKS5waXBlKG5ldyBnKFwiZGF0YV9sZW5ndGhcIikpLGI9dGhpcztyZXR1cm4gYS5vbihcImVuZFwiLGZ1bmN0aW9uKCl7aWYodGhpcy5zdHJlYW1JbmZvLmRhdGFfbGVuZ3RoIT09Yi51bmNvbXByZXNzZWRTaXplKXRocm93IG5ldyBFcnJvcihcIkJ1ZyA6IHVuY29tcHJlc3NlZCBkYXRhIHNpemUgbWlzbWF0Y2hcIil9KSxhfSxnZXRDb21wcmVzc2VkV29ya2VyOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBmKGUuUHJvbWlzZS5yZXNvbHZlKHRoaXMuY29tcHJlc3NlZENvbnRlbnQpKS53aXRoU3RyZWFtSW5mbyhcImNvbXByZXNzZWRTaXplXCIsdGhpcy5jb21wcmVzc2VkU2l6ZSkud2l0aFN0cmVhbUluZm8oXCJ1bmNvbXByZXNzZWRTaXplXCIsdGhpcy51bmNvbXByZXNzZWRTaXplKS53aXRoU3RyZWFtSW5mbyhcImNyYzMyXCIsdGhpcy5jcmMzMikud2l0aFN0cmVhbUluZm8oXCJjb21wcmVzc2lvblwiLHRoaXMuY29tcHJlc3Npb24pfX0sZC5jcmVhdGVXb3JrZXJGcm9tPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYS5waXBlKG5ldyBoKS5waXBlKG5ldyBnKFwidW5jb21wcmVzc2VkU2l6ZVwiKSkucGlwZShiLmNvbXByZXNzV29ya2VyKGMpKS5waXBlKG5ldyBnKFwiY29tcHJlc3NlZFNpemVcIikpLndpdGhTdHJlYW1JbmZvKFwiY29tcHJlc3Npb25cIixiKX0sYi5leHBvcnRzPWR9LHtcIi4vZXh0ZXJuYWxcIjo2LFwiLi9zdHJlYW0vQ3JjMzJQcm9iZVwiOjI1LFwiLi9zdHJlYW0vRGF0YUxlbmd0aFByb2JlXCI6MjYsXCIuL3N0cmVhbS9EYXRhV29ya2VyXCI6Mjd9XSwzOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGQ9YShcIi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIik7Yy5TVE9SRT17bWFnaWM6XCJcXDBcXDBcIixjb21wcmVzc1dvcmtlcjpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGQoXCJTVE9SRSBjb21wcmVzc2lvblwiKX0sdW5jb21wcmVzc1dvcmtlcjpmdW5jdGlvbigpe3JldHVybiBuZXcgZChcIlNUT1JFIGRlY29tcHJlc3Npb25cIil9fSxjLkRFRkxBVEU9YShcIi4vZmxhdGVcIil9LHtcIi4vZmxhdGVcIjo3LFwiLi9zdHJlYW0vR2VuZXJpY1dvcmtlclwiOjI4fV0sNDpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoKXtmb3IodmFyIGEsYj1bXSxjPTA7YzwyNTY7YysrKXthPWM7Zm9yKHZhciBkPTA7ZDw4O2QrKylhPTEmYT8zOTg4MjkyMzg0XmE+Pj4xOmE+Pj4xO2JbY109YX1yZXR1cm4gYn1mdW5jdGlvbiBlKGEsYixjLGQpe3ZhciBlPWgsZj1kK2M7YV49LTE7Zm9yKHZhciBnPWQ7ZzxmO2crKylhPWE+Pj44XmVbMjU1JihhXmJbZ10pXTtyZXR1cm4gYV4tMX1mdW5jdGlvbiBmKGEsYixjLGQpe3ZhciBlPWgsZj1kK2M7YV49LTE7Zm9yKHZhciBnPWQ7ZzxmO2crKylhPWE+Pj44XmVbMjU1JihhXmIuY2hhckNvZGVBdChnKSldO3JldHVybiBhXi0xfXZhciBnPWEoXCIuL3V0aWxzXCIpLGg9ZCgpO2IuZXhwb3J0cz1mdW5jdGlvbihhLGIpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBhfHwhYS5sZW5ndGgpcmV0dXJuIDA7dmFyIGM9XCJzdHJpbmdcIiE9PWcuZ2V0VHlwZU9mKGEpO3JldHVybiBjP2UoMHxiLGEsYS5sZW5ndGgsMCk6ZigwfGIsYSxhLmxlbmd0aCwwKX19LHtcIi4vdXRpbHNcIjozMn1dLDU6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtjLmJhc2U2ND0hMSxjLmJpbmFyeT0hMSxjLmRpcj0hMSxjLmNyZWF0ZUZvbGRlcnM9ITAsYy5kYXRlPW51bGwsYy5jb21wcmVzc2lvbj1udWxsLGMuY29tcHJlc3Npb25PcHRpb25zPW51bGwsYy5jb21tZW50PW51bGwsYy51bml4UGVybWlzc2lvbnM9bnVsbCxjLmRvc1Blcm1pc3Npb25zPW51bGx9LHt9XSw2OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGQ9bnVsbDtkPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBQcm9taXNlP1Byb21pc2U6YShcImxpZVwiKSxiLmV4cG9ydHM9e1Byb21pc2U6ZH19LHtsaWU6NTh9XSw3OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhLGIpe2guY2FsbCh0aGlzLFwiRmxhdGVXb3JrZXIvXCIrYSksdGhpcy5fcGFrbz1udWxsLHRoaXMuX3Bha29BY3Rpb249YSx0aGlzLl9wYWtvT3B0aW9ucz1iLHRoaXMubWV0YT17fX12YXIgZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQxNkFycmF5JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDMyQXJyYXksZj1hKFwicGFrb1wiKSxnPWEoXCIuL3V0aWxzXCIpLGg9YShcIi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIiksaT1lP1widWludDhhcnJheVwiOlwiYXJyYXlcIjtjLm1hZ2ljPVwiXFxiXFwwXCIsZy5pbmhlcml0cyhkLGgpLGQucHJvdG90eXBlLnByb2Nlc3NDaHVuaz1mdW5jdGlvbihhKXt0aGlzLm1ldGE9YS5tZXRhLG51bGw9PT10aGlzLl9wYWtvJiZ0aGlzLl9jcmVhdGVQYWtvKCksdGhpcy5fcGFrby5wdXNoKGcudHJhbnNmb3JtVG8oaSxhLmRhdGEpLCExKX0sZC5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXtoLnByb3RvdHlwZS5mbHVzaC5jYWxsKHRoaXMpLG51bGw9PT10aGlzLl9wYWtvJiZ0aGlzLl9jcmVhdGVQYWtvKCksdGhpcy5fcGFrby5wdXNoKFtdLCEwKX0sZC5wcm90b3R5cGUuY2xlYW5VcD1mdW5jdGlvbigpe2gucHJvdG90eXBlLmNsZWFuVXAuY2FsbCh0aGlzKSx0aGlzLl9wYWtvPW51bGx9LGQucHJvdG90eXBlLl9jcmVhdGVQYWtvPWZ1bmN0aW9uKCl7dGhpcy5fcGFrbz1uZXcgZlt0aGlzLl9wYWtvQWN0aW9uXSh7cmF3OiEwLGxldmVsOnRoaXMuX3Bha29PcHRpb25zLmxldmVsfHwtMX0pO3ZhciBhPXRoaXM7dGhpcy5fcGFrby5vbkRhdGE9ZnVuY3Rpb24oYil7YS5wdXNoKHtkYXRhOmIsbWV0YTphLm1ldGF9KX19LGMuY29tcHJlc3NXb3JrZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBkKFwiRGVmbGF0ZVwiLGEpfSxjLnVuY29tcHJlc3NXb3JrZXI9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGQoXCJJbmZsYXRlXCIse30pfX0se1wiLi9zdHJlYW0vR2VuZXJpY1dvcmtlclwiOjI4LFwiLi91dGlsc1wiOjMyLHBha286NTl9XSw4OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhLGIsYyxkKXtmLmNhbGwodGhpcyxcIlppcEZpbGVXb3JrZXJcIiksdGhpcy5ieXRlc1dyaXR0ZW49MCx0aGlzLnppcENvbW1lbnQ9Yix0aGlzLnppcFBsYXRmb3JtPWMsdGhpcy5lbmNvZGVGaWxlTmFtZT1kLHRoaXMuc3RyZWFtRmlsZXM9YSx0aGlzLmFjY3VtdWxhdGU9ITEsdGhpcy5jb250ZW50QnVmZmVyPVtdLHRoaXMuZGlyUmVjb3Jkcz1bXSx0aGlzLmN1cnJlbnRTb3VyY2VPZmZzZXQ9MCx0aGlzLmVudHJpZXNDb3VudD0wLHRoaXMuY3VycmVudEZpbGU9bnVsbCx0aGlzLl9zb3VyY2VzPVtdfXZhciBlPWEoXCIuLi91dGlsc1wiKSxmPWEoXCIuLi9zdHJlYW0vR2VuZXJpY1dvcmtlclwiKSxnPWEoXCIuLi91dGY4XCIpLGg9YShcIi4uL2NyYzMyXCIpLGk9YShcIi4uL3NpZ25hdHVyZVwiKSxqPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1cIlwiO2ZvcihjPTA7YzxiO2MrKylkKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSZhKSxhPj4+PTg7cmV0dXJuIGR9LGs9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hO3JldHVybiBhfHwoYz1iPzE2ODkzOjMzMjA0KSwoNjU1MzUmYyk8PDE2fSxsPWZ1bmN0aW9uKGEsYil7cmV0dXJuIDYzJihhfHwwKX0sbT1mdW5jdGlvbihhLGIsYyxkLGYsbSl7dmFyIG4sbyxwPWEuZmlsZSxxPWEuY29tcHJlc3Npb24scj1tIT09Zy51dGY4ZW5jb2RlLHM9ZS50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLG0ocC5uYW1lKSksdD1lLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsZy51dGY4ZW5jb2RlKHAubmFtZSkpLHU9cC5jb21tZW50LHY9ZS50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLG0odSkpLHc9ZS50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLGcudXRmOGVuY29kZSh1KSkseD10Lmxlbmd0aCE9PXAubmFtZS5sZW5ndGgseT13Lmxlbmd0aCE9PXUubGVuZ3RoLHo9XCJcIixBPVwiXCIsQj1cIlwiLEM9cC5kaXIsRD1wLmRhdGUsRT17Y3JjMzI6MCxjb21wcmVzc2VkU2l6ZTowLHVuY29tcHJlc3NlZFNpemU6MH07YiYmIWN8fChFLmNyYzMyPWEuY3JjMzIsRS5jb21wcmVzc2VkU2l6ZT1hLmNvbXByZXNzZWRTaXplLEUudW5jb21wcmVzc2VkU2l6ZT1hLnVuY29tcHJlc3NlZFNpemUpO3ZhciBGPTA7YiYmKEZ8PTgpLHJ8fCF4JiYheXx8KEZ8PTIwNDgpO3ZhciBHPTAsSD0wO0MmJihHfD0xNiksXCJVTklYXCI9PT1mPyhIPTc5OCxHfD1rKHAudW5peFBlcm1pc3Npb25zLEMpKTooSD0yMCxHfD1sKHAuZG9zUGVybWlzc2lvbnMsQykpLG49RC5nZXRVVENIb3VycygpLG48PD02LG58PUQuZ2V0VVRDTWludXRlcygpLG48PD01LG58PUQuZ2V0VVRDU2Vjb25kcygpLzIsbz1ELmdldFVUQ0Z1bGxZZWFyKCktMTk4MCxvPDw9NCxvfD1ELmdldFVUQ01vbnRoKCkrMSxvPDw9NSxvfD1ELmdldFVUQ0RhdGUoKSx4JiYoQT1qKDEsMSkraihoKHMpLDQpK3Qseis9XCJ1cFwiK2ooQS5sZW5ndGgsMikrQSkseSYmKEI9aigxLDEpK2ooaCh2KSw0KSt3LHorPVwidWNcIitqKEIubGVuZ3RoLDIpK0IpO3ZhciBJPVwiXCI7SSs9XCJcXG5cXDBcIixJKz1qKEYsMiksSSs9cS5tYWdpYyxJKz1qKG4sMiksSSs9aihvLDIpLEkrPWooRS5jcmMzMiw0KSxJKz1qKEUuY29tcHJlc3NlZFNpemUsNCksSSs9aihFLnVuY29tcHJlc3NlZFNpemUsNCksSSs9aihzLmxlbmd0aCwyKSxJKz1qKHoubGVuZ3RoLDIpO3ZhciBKPWkuTE9DQUxfRklMRV9IRUFERVIrSStzK3osSz1pLkNFTlRSQUxfRklMRV9IRUFERVIraihILDIpK0kraih2Lmxlbmd0aCwyKStcIlxcMFxcMFxcMFxcMFwiK2ooRyw0KStqKGQsNCkrcyt6K3Y7cmV0dXJue2ZpbGVSZWNvcmQ6SixkaXJSZWNvcmQ6S319LG49ZnVuY3Rpb24oYSxiLGMsZCxmKXt2YXIgZz1cIlwiLGg9ZS50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLGYoZCkpO3JldHVybiBnPWkuQ0VOVFJBTF9ESVJFQ1RPUllfRU5EK1wiXFwwXFwwXFwwXFwwXCIraihhLDIpK2ooYSwyKStqKGIsNCkraihjLDQpK2ooaC5sZW5ndGgsMikraH0sbz1mdW5jdGlvbihhKXt2YXIgYj1cIlwiO3JldHVybiBiPWkuREFUQV9ERVNDUklQVE9SK2ooYS5jcmMzMiw0KStqKGEuY29tcHJlc3NlZFNpemUsNCkraihhLnVuY29tcHJlc3NlZFNpemUsNCl9O2UuaW5oZXJpdHMoZCxmKSxkLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGEpe3ZhciBiPWEubWV0YS5wZXJjZW50fHwwLGM9dGhpcy5lbnRyaWVzQ291bnQsZD10aGlzLl9zb3VyY2VzLmxlbmd0aDt0aGlzLmFjY3VtdWxhdGU/dGhpcy5jb250ZW50QnVmZmVyLnB1c2goYSk6KHRoaXMuYnl0ZXNXcml0dGVuKz1hLmRhdGEubGVuZ3RoLGYucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLHtkYXRhOmEuZGF0YSxtZXRhOntjdXJyZW50RmlsZTp0aGlzLmN1cnJlbnRGaWxlLHBlcmNlbnQ6Yz8oYisxMDAqKGMtZC0xKSkvYzoxMDB9fSkpfSxkLnByb3RvdHlwZS5vcGVuZWRTb3VyY2U9ZnVuY3Rpb24oYSl7dGhpcy5jdXJyZW50U291cmNlT2Zmc2V0PXRoaXMuYnl0ZXNXcml0dGVuLHRoaXMuY3VycmVudEZpbGU9YS5maWxlLm5hbWU7dmFyIGI9dGhpcy5zdHJlYW1GaWxlcyYmIWEuZmlsZS5kaXI7aWYoYil7dmFyIGM9bShhLGIsITEsdGhpcy5jdXJyZW50U291cmNlT2Zmc2V0LHRoaXMuemlwUGxhdGZvcm0sdGhpcy5lbmNvZGVGaWxlTmFtZSk7dGhpcy5wdXNoKHtkYXRhOmMuZmlsZVJlY29yZCxtZXRhOntwZXJjZW50OjB9fSl9ZWxzZSB0aGlzLmFjY3VtdWxhdGU9ITB9LGQucHJvdG90eXBlLmNsb3NlZFNvdXJjZT1mdW5jdGlvbihhKXt0aGlzLmFjY3VtdWxhdGU9ITE7dmFyIGI9dGhpcy5zdHJlYW1GaWxlcyYmIWEuZmlsZS5kaXIsYz1tKGEsYiwhMCx0aGlzLmN1cnJlbnRTb3VyY2VPZmZzZXQsdGhpcy56aXBQbGF0Zm9ybSx0aGlzLmVuY29kZUZpbGVOYW1lKTtpZih0aGlzLmRpclJlY29yZHMucHVzaChjLmRpclJlY29yZCksYil0aGlzLnB1c2goe2RhdGE6byhhKSxtZXRhOntwZXJjZW50OjEwMH19KTtlbHNlIGZvcih0aGlzLnB1c2goe2RhdGE6Yy5maWxlUmVjb3JkLG1ldGE6e3BlcmNlbnQ6MH19KTt0aGlzLmNvbnRlbnRCdWZmZXIubGVuZ3RoOyl0aGlzLnB1c2godGhpcy5jb250ZW50QnVmZmVyLnNoaWZ0KCkpO3RoaXMuY3VycmVudEZpbGU9bnVsbH0sZC5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5ieXRlc1dyaXR0ZW4sYj0wO2I8dGhpcy5kaXJSZWNvcmRzLmxlbmd0aDtiKyspdGhpcy5wdXNoKHtkYXRhOnRoaXMuZGlyUmVjb3Jkc1tiXSxtZXRhOntwZXJjZW50OjEwMH19KTt2YXIgYz10aGlzLmJ5dGVzV3JpdHRlbi1hLGQ9bih0aGlzLmRpclJlY29yZHMubGVuZ3RoLGMsYSx0aGlzLnppcENvbW1lbnQsdGhpcy5lbmNvZGVGaWxlTmFtZSk7dGhpcy5wdXNoKHtkYXRhOmQsbWV0YTp7cGVyY2VudDoxMDB9fSl9LGQucHJvdG90eXBlLnByZXBhcmVOZXh0U291cmNlPWZ1bmN0aW9uKCl7dGhpcy5wcmV2aW91cz10aGlzLl9zb3VyY2VzLnNoaWZ0KCksdGhpcy5vcGVuZWRTb3VyY2UodGhpcy5wcmV2aW91cy5zdHJlYW1JbmZvKSx0aGlzLmlzUGF1c2VkP3RoaXMucHJldmlvdXMucGF1c2UoKTp0aGlzLnByZXZpb3VzLnJlc3VtZSgpfSxkLnByb3RvdHlwZS5yZWdpc3RlclByZXZpb3VzPWZ1bmN0aW9uKGEpe3RoaXMuX3NvdXJjZXMucHVzaChhKTt2YXIgYj10aGlzO3JldHVybiBhLm9uKFwiZGF0YVwiLGZ1bmN0aW9uKGEpe2IucHJvY2Vzc0NodW5rKGEpfSksYS5vbihcImVuZFwiLGZ1bmN0aW9uKCl7Yi5jbG9zZWRTb3VyY2UoYi5wcmV2aW91cy5zdHJlYW1JbmZvKSxiLl9zb3VyY2VzLmxlbmd0aD9iLnByZXBhcmVOZXh0U291cmNlKCk6Yi5lbmQoKX0pLGEub24oXCJlcnJvclwiLGZ1bmN0aW9uKGEpe2IuZXJyb3IoYSl9KSx0aGlzfSxkLnByb3RvdHlwZS5yZXN1bWU9ZnVuY3Rpb24oKXtyZXR1cm4hIWYucHJvdG90eXBlLnJlc3VtZS5jYWxsKHRoaXMpJiYoIXRoaXMucHJldmlvdXMmJnRoaXMuX3NvdXJjZXMubGVuZ3RoPyh0aGlzLnByZXBhcmVOZXh0U291cmNlKCksITApOnRoaXMucHJldmlvdXN8fHRoaXMuX3NvdXJjZXMubGVuZ3RofHx0aGlzLmdlbmVyYXRlZEVycm9yP3ZvaWQgMDoodGhpcy5lbmQoKSwhMCkpfSxkLnByb3RvdHlwZS5lcnJvcj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLl9zb3VyY2VzO2lmKCFmLnByb3RvdHlwZS5lcnJvci5jYWxsKHRoaXMsYSkpcmV0dXJuITE7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspdHJ5e2JbY10uZXJyb3IoYSl9Y2F0Y2goYSl7fXJldHVybiEwfSxkLnByb3RvdHlwZS5sb2NrPWZ1bmN0aW9uKCl7Zi5wcm90b3R5cGUubG9jay5jYWxsKHRoaXMpO2Zvcih2YXIgYT10aGlzLl9zb3VyY2VzLGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdLmxvY2soKX0sYi5leHBvcnRzPWR9LHtcIi4uL2NyYzMyXCI6NCxcIi4uL3NpZ25hdHVyZVwiOjIzLFwiLi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIjoyOCxcIi4uL3V0ZjhcIjozMSxcIi4uL3V0aWxzXCI6MzJ9XSw5OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGQ9YShcIi4uL2NvbXByZXNzaW9uc1wiKSxlPWEoXCIuL1ppcEZpbGVXb3JrZXJcIiksZj1mdW5jdGlvbihhLGIpe3ZhciBjPWF8fGIsZT1kW2NdO2lmKCFlKXRocm93IG5ldyBFcnJvcihjK1wiIGlzIG5vdCBhIHZhbGlkIGNvbXByZXNzaW9uIG1ldGhvZCAhXCIpO3JldHVybiBlfTtjLmdlbmVyYXRlV29ya2VyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1uZXcgZShiLnN0cmVhbUZpbGVzLGMsYi5wbGF0Zm9ybSxiLmVuY29kZUZpbGVOYW1lKSxnPTA7dHJ5e2EuZm9yRWFjaChmdW5jdGlvbihhLGMpe2crKzt2YXIgZT1mKGMub3B0aW9ucy5jb21wcmVzc2lvbixiLmNvbXByZXNzaW9uKSxoPWMub3B0aW9ucy5jb21wcmVzc2lvbk9wdGlvbnN8fGIuY29tcHJlc3Npb25PcHRpb25zfHx7fSxpPWMuZGlyLGo9Yy5kYXRlO2MuX2NvbXByZXNzV29ya2VyKGUsaCkud2l0aFN0cmVhbUluZm8oXCJmaWxlXCIse25hbWU6YSxkaXI6aSxkYXRlOmosY29tbWVudDpjLmNvbW1lbnR8fFwiXCIsdW5peFBlcm1pc3Npb25zOmMudW5peFBlcm1pc3Npb25zLGRvc1Blcm1pc3Npb25zOmMuZG9zUGVybWlzc2lvbnN9KS5waXBlKGQpfSksZC5lbnRyaWVzQ291bnQ9Z31jYXRjaChoKXtkLmVycm9yKGgpfXJldHVybiBkfX0se1wiLi4vY29tcHJlc3Npb25zXCI6MyxcIi4vWmlwRmlsZVdvcmtlclwiOjh9XSwxMDpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoKXtpZighKHRoaXMgaW5zdGFuY2VvZiBkKSlyZXR1cm4gbmV3IGQ7aWYoYXJndW1lbnRzLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY29uc3RydWN0b3Igd2l0aCBwYXJhbWV0ZXJzIGhhcyBiZWVuIHJlbW92ZWQgaW4gSlNaaXAgMy4wLCBwbGVhc2UgY2hlY2sgdGhlIHVwZ3JhZGUgZ3VpZGUuXCIpO3RoaXMuZmlsZXM9e30sdGhpcy5jb21tZW50PW51bGwsdGhpcy5yb290PVwiXCIsdGhpcy5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBkO2Zvcih2YXIgYiBpbiB0aGlzKVwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXNbYl0mJihhW2JdPXRoaXNbYl0pO3JldHVybiBhfX1kLnByb3RvdHlwZT1hKFwiLi9vYmplY3RcIiksZC5wcm90b3R5cGUubG9hZEFzeW5jPWEoXCIuL2xvYWRcIiksZC5zdXBwb3J0PWEoXCIuL3N1cHBvcnRcIiksZC5kZWZhdWx0cz1hKFwiLi9kZWZhdWx0c1wiKSxkLnZlcnNpb249XCIzLjEuNVwiLGQubG9hZEFzeW5jPWZ1bmN0aW9uKGEsYil7cmV0dXJuKG5ldyBkKS5sb2FkQXN5bmMoYSxiKX0sZC5leHRlcm5hbD1hKFwiLi9leHRlcm5hbFwiKSxiLmV4cG9ydHM9ZH0se1wiLi9kZWZhdWx0c1wiOjUsXCIuL2V4dGVybmFsXCI6NixcIi4vbG9hZFwiOjExLFwiLi9vYmplY3RcIjoxNSxcIi4vc3VwcG9ydFwiOjMwfV0sMTE6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEpe3JldHVybiBuZXcgZi5Qcm9taXNlKGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5kZWNvbXByZXNzZWQuZ2V0Q29udGVudFdvcmtlcigpLnBpcGUobmV3IGkpO2Qub24oXCJlcnJvclwiLGZ1bmN0aW9uKGEpe2MoYSl9KS5vbihcImVuZFwiLGZ1bmN0aW9uKCl7ZC5zdHJlYW1JbmZvLmNyYzMyIT09YS5kZWNvbXByZXNzZWQuY3JjMzI/YyhuZXcgRXJyb3IoXCJDb3JydXB0ZWQgemlwIDogQ1JDMzIgbWlzbWF0Y2hcIikpOmIoKX0pLnJlc3VtZSgpfSl9dmFyIGU9YShcIi4vdXRpbHNcIiksZj1hKFwiLi9leHRlcm5hbFwiKSxnPWEoXCIuL3V0ZjhcIiksZT1hKFwiLi91dGlsc1wiKSxoPWEoXCIuL3ppcEVudHJpZXNcIiksaT1hKFwiLi9zdHJlYW0vQ3JjMzJQcm9iZVwiKSxqPWEoXCIuL25vZGVqc1V0aWxzXCIpO2IuZXhwb3J0cz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7cmV0dXJuIGI9ZS5leHRlbmQoYnx8e30se2Jhc2U2NDohMSxjaGVja0NSQzMyOiExLG9wdGltaXplZEJpbmFyeVN0cmluZzohMSxjcmVhdGVGb2xkZXJzOiExLGRlY29kZUZpbGVOYW1lOmcudXRmOGRlY29kZX0pLGouaXNOb2RlJiZqLmlzU3RyZWFtKGEpP2YuUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiSlNaaXAgY2FuJ3QgYWNjZXB0IGEgc3RyZWFtIHdoZW4gbG9hZGluZyBhIHppcCBmaWxlLlwiKSk6ZS5wcmVwYXJlQ29udGVudChcInRoZSBsb2FkZWQgemlwIGZpbGVcIixhLCEwLGIub3B0aW1pemVkQmluYXJ5U3RyaW5nLGIuYmFzZTY0KS50aGVuKGZ1bmN0aW9uKGEpe3ZhciBjPW5ldyBoKGIpO3JldHVybiBjLmxvYWQoYSksY30pLnRoZW4oZnVuY3Rpb24oYSl7dmFyIGM9W2YuUHJvbWlzZS5yZXNvbHZlKGEpXSxlPWEuZmlsZXM7aWYoYi5jaGVja0NSQzMyKWZvcih2YXIgZz0wO2c8ZS5sZW5ndGg7ZysrKWMucHVzaChkKGVbZ10pKTtyZXR1cm4gZi5Qcm9taXNlLmFsbChjKX0pLnRoZW4oZnVuY3Rpb24oYSl7Zm9yKHZhciBkPWEuc2hpZnQoKSxlPWQuZmlsZXMsZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgZz1lW2ZdO2MuZmlsZShnLmZpbGVOYW1lU3RyLGcuZGVjb21wcmVzc2VkLHtiaW5hcnk6ITAsb3B0aW1pemVkQmluYXJ5U3RyaW5nOiEwLGRhdGU6Zy5kYXRlLGRpcjpnLmRpcixjb21tZW50OmcuZmlsZUNvbW1lbnRTdHIubGVuZ3RoP2cuZmlsZUNvbW1lbnRTdHI6bnVsbCx1bml4UGVybWlzc2lvbnM6Zy51bml4UGVybWlzc2lvbnMsZG9zUGVybWlzc2lvbnM6Zy5kb3NQZXJtaXNzaW9ucyxjcmVhdGVGb2xkZXJzOmIuY3JlYXRlRm9sZGVyc30pfXJldHVybiBkLnppcENvbW1lbnQubGVuZ3RoJiYoYy5jb21tZW50PWQuemlwQ29tbWVudCksY30pfX0se1wiLi9leHRlcm5hbFwiOjYsXCIuL25vZGVqc1V0aWxzXCI6MTQsXCIuL3N0cmVhbS9DcmMzMlByb2JlXCI6MjUsXCIuL3V0ZjhcIjozMSxcIi4vdXRpbHNcIjozMixcIi4vemlwRW50cmllc1wiOjMzfV0sMTI6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEsYil7Zi5jYWxsKHRoaXMsXCJOb2RlanMgc3RyZWFtIGlucHV0IGFkYXB0ZXIgZm9yIFwiK2EpLHRoaXMuX3Vwc3RyZWFtRW5kZWQ9ITEsdGhpcy5fYmluZFN0cmVhbShiKX12YXIgZT1hKFwiLi4vdXRpbHNcIiksZj1hKFwiLi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIik7ZS5pbmhlcml0cyhkLGYpLGQucHJvdG90eXBlLl9iaW5kU3RyZWFtPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7dGhpcy5fc3RyZWFtPWEsYS5wYXVzZSgpLGEub24oXCJkYXRhXCIsZnVuY3Rpb24oYSl7Yi5wdXNoKHtkYXRhOmEsbWV0YTp7cGVyY2VudDowfX0pfSkub24oXCJlcnJvclwiLGZ1bmN0aW9uKGEpe2IuaXNQYXVzZWQ/dGhpcy5nZW5lcmF0ZWRFcnJvcj1hOmIuZXJyb3IoYSl9KS5vbihcImVuZFwiLGZ1bmN0aW9uKCl7Yi5pc1BhdXNlZD9iLl91cHN0cmVhbUVuZGVkPSEwOmIuZW5kKCl9KX0sZC5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXtyZXR1cm4hIWYucHJvdG90eXBlLnBhdXNlLmNhbGwodGhpcykmJih0aGlzLl9zdHJlYW0ucGF1c2UoKSwhMCl9LGQucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe3JldHVybiEhZi5wcm90b3R5cGUucmVzdW1lLmNhbGwodGhpcykmJih0aGlzLl91cHN0cmVhbUVuZGVkP3RoaXMuZW5kKCk6dGhpcy5fc3RyZWFtLnJlc3VtZSgpLCEwKX0sYi5leHBvcnRzPWR9LHtcIi4uL3N0cmVhbS9HZW5lcmljV29ya2VyXCI6MjgsXCIuLi91dGlsc1wiOjMyfV0sMTM6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEsYixjKXtlLmNhbGwodGhpcyxiKSx0aGlzLl9oZWxwZXI9YTt2YXIgZD10aGlzO2Eub24oXCJkYXRhXCIsZnVuY3Rpb24oYSxiKXtkLnB1c2goYSl8fGQuX2hlbHBlci5wYXVzZSgpLGMmJmMoYil9KS5vbihcImVycm9yXCIsZnVuY3Rpb24oYSl7ZC5lbWl0KFwiZXJyb3JcIixhKX0pLm9uKFwiZW5kXCIsZnVuY3Rpb24oKXtkLnB1c2gobnVsbCl9KX12YXIgZT1hKFwicmVhZGFibGUtc3RyZWFtXCIpLlJlYWRhYmxlLGY9YShcIi4uL3V0aWxzXCIpO2YuaW5oZXJpdHMoZCxlKSxkLnByb3RvdHlwZS5fcmVhZD1mdW5jdGlvbigpe3RoaXMuX2hlbHBlci5yZXN1bWUoKX0sYi5leHBvcnRzPWR9LHtcIi4uL3V0aWxzXCI6MzIsXCJyZWFkYWJsZS1zdHJlYW1cIjoxNn1dLDE0OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7Yi5leHBvcnRzPXtpc05vZGU6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEJ1ZmZlcixuZXdCdWZmZXJGcm9tOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBCdWZmZXIoYSxiKX0sYWxsb2NCdWZmZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIEJ1ZmZlci5hbGxvYz9CdWZmZXIuYWxsb2MoYSk6bmV3IEJ1ZmZlcihhKX0saXNCdWZmZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcihhKX0saXNTdHJlYW06ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEub24mJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEucGF1c2UmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEucmVzdW1lfX19LHt9XSwxNTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuXCJbb2JqZWN0IFJlZ0V4cF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKX12YXIgZT1hKFwiLi91dGY4XCIpLGY9YShcIi4vdXRpbHNcIiksZz1hKFwiLi9zdHJlYW0vR2VuZXJpY1dvcmtlclwiKSxoPWEoXCIuL3N0cmVhbS9TdHJlYW1IZWxwZXJcIiksaT1hKFwiLi9kZWZhdWx0c1wiKSxqPWEoXCIuL2NvbXByZXNzZWRPYmplY3RcIiksaz1hKFwiLi96aXBPYmplY3RcIiksbD1hKFwiLi9nZW5lcmF0ZVwiKSxtPWEoXCIuL25vZGVqc1V0aWxzXCIpLG49YShcIi4vbm9kZWpzL05vZGVqc1N0cmVhbUlucHV0QWRhcHRlclwiKSxvPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPWYuZ2V0VHlwZU9mKGIpLGg9Zi5leHRlbmQoY3x8e30saSk7aC5kYXRlPWguZGF0ZXx8bmV3IERhdGUsbnVsbCE9PWguY29tcHJlc3Npb24mJihoLmNvbXByZXNzaW9uPWguY29tcHJlc3Npb24udG9VcHBlckNhc2UoKSksXCJzdHJpbmdcIj09dHlwZW9mIGgudW5peFBlcm1pc3Npb25zJiYoaC51bml4UGVybWlzc2lvbnM9cGFyc2VJbnQoaC51bml4UGVybWlzc2lvbnMsOCkpLGgudW5peFBlcm1pc3Npb25zJiYxNjM4NCZoLnVuaXhQZXJtaXNzaW9ucyYmKGguZGlyPSEwKSxoLmRvc1Blcm1pc3Npb25zJiYxNiZoLmRvc1Blcm1pc3Npb25zJiYoaC5kaXI9ITApLGguZGlyJiYoYT1xKGEpKSxoLmNyZWF0ZUZvbGRlcnMmJihkPXAoYSkpJiZyLmNhbGwodGhpcyxkLCEwKTt2YXIgbD1cInN0cmluZ1wiPT09ZSYmaC5iaW5hcnk9PT0hMSYmaC5iYXNlNjQ9PT0hMTtjJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgYy5iaW5hcnl8fChoLmJpbmFyeT0hbCk7dmFyIG89YiBpbnN0YW5jZW9mIGomJjA9PT1iLnVuY29tcHJlc3NlZFNpemU7KG98fGguZGlyfHwhYnx8MD09PWIubGVuZ3RoKSYmKGguYmFzZTY0PSExLGguYmluYXJ5PSEwLGI9XCJcIixoLmNvbXByZXNzaW9uPVwiU1RPUkVcIixlPVwic3RyaW5nXCIpO3ZhciBzPW51bGw7cz1iIGluc3RhbmNlb2Yganx8YiBpbnN0YW5jZW9mIGc/YjptLmlzTm9kZSYmbS5pc1N0cmVhbShiKT9uZXcgbihhLGIpOmYucHJlcGFyZUNvbnRlbnQoYSxiLGguYmluYXJ5LGgub3B0aW1pemVkQmluYXJ5U3RyaW5nLGguYmFzZTY0KTt2YXIgdD1uZXcgayhhLHMsaCk7dGhpcy5maWxlc1thXT10fSxwPWZ1bmN0aW9uKGEpe1wiL1wiPT09YS5zbGljZSgtMSkmJihhPWEuc3Vic3RyaW5nKDAsYS5sZW5ndGgtMSkpO3ZhciBiPWEubGFzdEluZGV4T2YoXCIvXCIpO3JldHVybiBiPjA/YS5zdWJzdHJpbmcoMCxiKTpcIlwifSxxPWZ1bmN0aW9uKGEpe3JldHVyblwiL1wiIT09YS5zbGljZSgtMSkmJihhKz1cIi9cIiksYX0scj1mdW5jdGlvbihhLGIpe3JldHVybiBiPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBiP2I6aS5jcmVhdGVGb2xkZXJzLGE9cShhKSx0aGlzLmZpbGVzW2FdfHxvLmNhbGwodGhpcyxhLG51bGwse2RpcjohMCxjcmVhdGVGb2xkZXJzOmJ9KSx0aGlzLmZpbGVzW2FdfSxzPXtsb2FkOmZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiVGhpcyBtZXRob2QgaGFzIGJlZW4gcmVtb3ZlZCBpbiBKU1ppcCAzLjAsIHBsZWFzZSBjaGVjayB0aGUgdXBncmFkZSBndWlkZS5cIil9LGZvckVhY2g6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkO2ZvcihiIGluIHRoaXMuZmlsZXMpdGhpcy5maWxlcy5oYXNPd25Qcm9wZXJ0eShiKSYmKGQ9dGhpcy5maWxlc1tiXSxjPWIuc2xpY2UodGhpcy5yb290Lmxlbmd0aCxiLmxlbmd0aCksYyYmYi5zbGljZSgwLHRoaXMucm9vdC5sZW5ndGgpPT09dGhpcy5yb290JiZhKGMsZCkpfSxmaWx0ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9W107cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbihjLGQpe2EoYyxkKSYmYi5wdXNoKGQpfSksYn0sZmlsZTpmdW5jdGlvbihhLGIsYyl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGQoYSkpe3ZhciBlPWE7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKGEsYil7cmV0dXJuIWIuZGlyJiZlLnRlc3QoYSl9KX12YXIgZj10aGlzLmZpbGVzW3RoaXMucm9vdCthXTtyZXR1cm4gZiYmIWYuZGlyP2Y6bnVsbH1yZXR1cm4gYT10aGlzLnJvb3QrYSxvLmNhbGwodGhpcyxhLGIsYyksdGhpc30sZm9sZGVyOmZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiB0aGlzO2lmKGQoYSkpcmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGMuZGlyJiZhLnRlc3QoYil9KTt2YXIgYj10aGlzLnJvb3QrYSxjPXIuY2FsbCh0aGlzLGIpLGU9dGhpcy5jbG9uZSgpO3JldHVybiBlLnJvb3Q9Yy5uYW1lLGV9LHJlbW92ZTpmdW5jdGlvbihhKXthPXRoaXMucm9vdCthO3ZhciBiPXRoaXMuZmlsZXNbYV07aWYoYnx8KFwiL1wiIT09YS5zbGljZSgtMSkmJihhKz1cIi9cIiksYj10aGlzLmZpbGVzW2FdKSxiJiYhYi5kaXIpZGVsZXRlIHRoaXMuZmlsZXNbYV07ZWxzZSBmb3IodmFyIGM9dGhpcy5maWx0ZXIoZnVuY3Rpb24oYixjKXtyZXR1cm4gYy5uYW1lLnNsaWNlKDAsYS5sZW5ndGgpPT09YX0pLGQ9MDtkPGMubGVuZ3RoO2QrKylkZWxldGUgdGhpcy5maWxlc1tjW2RdLm5hbWVdO3JldHVybiB0aGlzfSxnZW5lcmF0ZTpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIG1ldGhvZCBoYXMgYmVlbiByZW1vdmVkIGluIEpTWmlwIDMuMCwgcGxlYXNlIGNoZWNrIHRoZSB1cGdyYWRlIGd1aWRlLlwiKX0sZ2VuZXJhdGVJbnRlcm5hbFN0cmVhbTpmdW5jdGlvbihhKXt2YXIgYixjPXt9O3RyeXtpZihjPWYuZXh0ZW5kKGF8fHt9LHtzdHJlYW1GaWxlczohMSxjb21wcmVzc2lvbjpcIlNUT1JFXCIsY29tcHJlc3Npb25PcHRpb25zOm51bGwsdHlwZTpcIlwiLHBsYXRmb3JtOlwiRE9TXCIsY29tbWVudDpudWxsLG1pbWVUeXBlOlwiYXBwbGljYXRpb24vemlwXCIsZW5jb2RlRmlsZU5hbWU6ZS51dGY4ZW5jb2RlfSksYy50eXBlPWMudHlwZS50b0xvd2VyQ2FzZSgpLGMuY29tcHJlc3Npb249Yy5jb21wcmVzc2lvbi50b1VwcGVyQ2FzZSgpLFwiYmluYXJ5c3RyaW5nXCI9PT1jLnR5cGUmJihjLnR5cGU9XCJzdHJpbmdcIiksIWMudHlwZSl0aHJvdyBuZXcgRXJyb3IoXCJObyBvdXRwdXQgdHlwZSBzcGVjaWZpZWQuXCIpO2YuY2hlY2tTdXBwb3J0KGMudHlwZSksXCJkYXJ3aW5cIiE9PWMucGxhdGZvcm0mJlwiZnJlZWJzZFwiIT09Yy5wbGF0Zm9ybSYmXCJsaW51eFwiIT09Yy5wbGF0Zm9ybSYmXCJzdW5vc1wiIT09Yy5wbGF0Zm9ybXx8KGMucGxhdGZvcm09XCJVTklYXCIpLFwid2luMzJcIj09PWMucGxhdGZvcm0mJihjLnBsYXRmb3JtPVwiRE9TXCIpO3ZhciBkPWMuY29tbWVudHx8dGhpcy5jb21tZW50fHxcIlwiO2I9bC5nZW5lcmF0ZVdvcmtlcih0aGlzLGMsZCl9Y2F0Y2goaSl7Yj1uZXcgZyhcImVycm9yXCIpLGIuZXJyb3IoaSl9cmV0dXJuIG5ldyBoKGIsYy50eXBlfHxcInN0cmluZ1wiLGMubWltZVR5cGUpfSxnZW5lcmF0ZUFzeW5jOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZ2VuZXJhdGVJbnRlcm5hbFN0cmVhbShhKS5hY2N1bXVsYXRlKGIpfSxnZW5lcmF0ZU5vZGVTdHJlYW06ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1hfHx7fSxhLnR5cGV8fChhLnR5cGU9XCJub2RlYnVmZmVyXCIpLHRoaXMuZ2VuZXJhdGVJbnRlcm5hbFN0cmVhbShhKS50b05vZGVqc1N0cmVhbShiKX19O2IuZXhwb3J0cz1zfSx7XCIuL2NvbXByZXNzZWRPYmplY3RcIjoyLFwiLi9kZWZhdWx0c1wiOjUsXCIuL2dlbmVyYXRlXCI6OSxcIi4vbm9kZWpzL05vZGVqc1N0cmVhbUlucHV0QWRhcHRlclwiOjEyLFwiLi9ub2RlanNVdGlsc1wiOjE0LFwiLi9zdHJlYW0vR2VuZXJpY1dvcmtlclwiOjI4LFwiLi9zdHJlYW0vU3RyZWFtSGVscGVyXCI6MjksXCIuL3V0ZjhcIjozMSxcIi4vdXRpbHNcIjozMixcIi4vemlwT2JqZWN0XCI6MzV9XSwxNjpbZnVuY3Rpb24oYSxiLGMpe2IuZXhwb3J0cz1hKFwic3RyZWFtXCIpfSx7c3RyZWFtOnZvaWQgMH1dLDE3OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXtlLmNhbGwodGhpcyxhKTtmb3IodmFyIGI9MDtiPHRoaXMuZGF0YS5sZW5ndGg7YisrKWFbYl09MjU1JmFbYl19dmFyIGU9YShcIi4vRGF0YVJlYWRlclwiKSxmPWEoXCIuLi91dGlsc1wiKTtmLmluaGVyaXRzKGQsZSksZC5wcm90b3R5cGUuYnl0ZUF0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGFbdGhpcy56ZXJvK2FdfSxkLnByb3RvdHlwZS5sYXN0SW5kZXhPZlNpZ25hdHVyZT1mdW5jdGlvbihhKXtmb3IodmFyIGI9YS5jaGFyQ29kZUF0KDApLGM9YS5jaGFyQ29kZUF0KDEpLGQ9YS5jaGFyQ29kZUF0KDIpLGU9YS5jaGFyQ29kZUF0KDMpLGY9dGhpcy5sZW5ndGgtNDtmPj0wOy0tZilpZih0aGlzLmRhdGFbZl09PT1iJiZ0aGlzLmRhdGFbZisxXT09PWMmJnRoaXMuZGF0YVtmKzJdPT09ZCYmdGhpcy5kYXRhW2YrM109PT1lKXJldHVybiBmLXRoaXMuemVybztyZXR1cm4tMX0sZC5wcm90b3R5cGUucmVhZEFuZENoZWNrU2lnbmF0dXJlPWZ1bmN0aW9uKGEpe3ZhciBiPWEuY2hhckNvZGVBdCgwKSxjPWEuY2hhckNvZGVBdCgxKSxkPWEuY2hhckNvZGVBdCgyKSxlPWEuY2hhckNvZGVBdCgzKSxmPXRoaXMucmVhZERhdGEoNCk7cmV0dXJuIGI9PT1mWzBdJiZjPT09ZlsxXSYmZD09PWZbMl0mJmU9PT1mWzNdfSxkLnByb3RvdHlwZS5yZWFkRGF0YT1mdW5jdGlvbihhKXtpZih0aGlzLmNoZWNrT2Zmc2V0KGEpLDA9PT1hKXJldHVybltdO3ZhciBiPXRoaXMuZGF0YS5zbGljZSh0aGlzLnplcm8rdGhpcy5pbmRleCx0aGlzLnplcm8rdGhpcy5pbmRleCthKTtyZXR1cm4gdGhpcy5pbmRleCs9YSxifSxiLmV4cG9ydHM9ZH0se1wiLi4vdXRpbHNcIjozMixcIi4vRGF0YVJlYWRlclwiOjE4fV0sMTg6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEpe3RoaXMuZGF0YT1hLHRoaXMubGVuZ3RoPWEubGVuZ3RoLHRoaXMuaW5kZXg9MCx0aGlzLnplcm89MH12YXIgZT1hKFwiLi4vdXRpbHNcIik7ZC5wcm90b3R5cGU9e2NoZWNrT2Zmc2V0OmZ1bmN0aW9uKGEpe3RoaXMuY2hlY2tJbmRleCh0aGlzLmluZGV4K2EpfSxjaGVja0luZGV4OmZ1bmN0aW9uKGEpe2lmKHRoaXMubGVuZ3RoPHRoaXMuemVybythfHxhPDApdGhyb3cgbmV3IEVycm9yKFwiRW5kIG9mIGRhdGEgcmVhY2hlZCAoZGF0YSBsZW5ndGggPSBcIit0aGlzLmxlbmd0aCtcIiwgYXNrZWQgaW5kZXggPSBcIithK1wiKS4gQ29ycnVwdGVkIHppcCA/XCIpfSxzZXRJbmRleDpmdW5jdGlvbihhKXt0aGlzLmNoZWNrSW5kZXgoYSksdGhpcy5pbmRleD1hfSxza2lwOmZ1bmN0aW9uKGEpe3RoaXMuc2V0SW5kZXgodGhpcy5pbmRleCthKX0sYnl0ZUF0OmZ1bmN0aW9uKGEpe30scmVhZEludDpmdW5jdGlvbihhKXt2YXIgYixjPTA7Zm9yKHRoaXMuY2hlY2tPZmZzZXQoYSksYj10aGlzLmluZGV4K2EtMTtiPj10aGlzLmluZGV4O2ItLSljPShjPDw4KSt0aGlzLmJ5dGVBdChiKTtyZXR1cm4gdGhpcy5pbmRleCs9YSxjfSxyZWFkU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybiBlLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsdGhpcy5yZWFkRGF0YShhKSl9LHJlYWREYXRhOmZ1bmN0aW9uKGEpe30sbGFzdEluZGV4T2ZTaWduYXR1cmU6ZnVuY3Rpb24oYSl7fSxyZWFkQW5kQ2hlY2tTaWduYXR1cmU6ZnVuY3Rpb24oYSl7fSxyZWFkRGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVhZEludCg0KTtyZXR1cm4gbmV3IERhdGUoRGF0ZS5VVEMoKGE+PjI1JjEyNykrMTk4MCwoYT4+MjEmMTUpLTEsYT4+MTYmMzEsYT4+MTEmMzEsYT4+NSY2MywoMzEmYSk8PDEpKX19LGIuZXhwb3J0cz1kfSx7XCIuLi91dGlsc1wiOjMyfV0sMTk6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEpe2UuY2FsbCh0aGlzLGEpfXZhciBlPWEoXCIuL1VpbnQ4QXJyYXlSZWFkZXJcIiksZj1hKFwiLi4vdXRpbHNcIik7Zi5pbmhlcml0cyhkLGUpLGQucHJvdG90eXBlLnJlYWREYXRhPWZ1bmN0aW9uKGEpe3RoaXMuY2hlY2tPZmZzZXQoYSk7dmFyIGI9dGhpcy5kYXRhLnNsaWNlKHRoaXMuemVybyt0aGlzLmluZGV4LHRoaXMuemVybyt0aGlzLmluZGV4K2EpO3JldHVybiB0aGlzLmluZGV4Kz1hLGJ9LGIuZXhwb3J0cz1kfSx7XCIuLi91dGlsc1wiOjMyLFwiLi9VaW50OEFycmF5UmVhZGVyXCI6MjF9XSwyMDpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7ZS5jYWxsKHRoaXMsYSl9dmFyIGU9YShcIi4vRGF0YVJlYWRlclwiKSxmPWEoXCIuLi91dGlsc1wiKTtmLmluaGVyaXRzKGQsZSksZC5wcm90b3R5cGUuYnl0ZUF0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnplcm8rYSl9LGQucHJvdG90eXBlLmxhc3RJbmRleE9mU2lnbmF0dXJlPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEubGFzdEluZGV4T2YoYSktdGhpcy56ZXJvfSxkLnByb3RvdHlwZS5yZWFkQW5kQ2hlY2tTaWduYXR1cmU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5yZWFkRGF0YSg0KTtyZXR1cm4gYT09PWJ9LGQucHJvdG90eXBlLnJlYWREYXRhPWZ1bmN0aW9uKGEpe3RoaXMuY2hlY2tPZmZzZXQoYSk7dmFyIGI9dGhpcy5kYXRhLnNsaWNlKHRoaXMuemVybyt0aGlzLmluZGV4LHRoaXMuemVybyt0aGlzLmluZGV4K2EpO3JldHVybiB0aGlzLmluZGV4Kz1hLGJ9LGIuZXhwb3J0cz1kfSx7XCIuLi91dGlsc1wiOjMyLFwiLi9EYXRhUmVhZGVyXCI6MTh9XSwyMTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7ZS5jYWxsKHRoaXMsYSl9dmFyIGU9YShcIi4vQXJyYXlSZWFkZXJcIiksZj1hKFwiLi4vdXRpbHNcIik7Zi5pbmhlcml0cyhkLGUpLGQucHJvdG90eXBlLnJlYWREYXRhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuY2hlY2tPZmZzZXQoYSksMD09PWEpcmV0dXJuIG5ldyBVaW50OEFycmF5KDApO3ZhciBiPXRoaXMuZGF0YS5zdWJhcnJheSh0aGlzLnplcm8rdGhpcy5pbmRleCx0aGlzLnplcm8rdGhpcy5pbmRleCthKTtyZXR1cm4gdGhpcy5pbmRleCs9YSxifSxiLmV4cG9ydHM9ZH0se1wiLi4vdXRpbHNcIjozMixcIi4vQXJyYXlSZWFkZXJcIjoxN31dLDIyOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGQ9YShcIi4uL3V0aWxzXCIpLGU9YShcIi4uL3N1cHBvcnRcIiksZj1hKFwiLi9BcnJheVJlYWRlclwiKSxnPWEoXCIuL1N0cmluZ1JlYWRlclwiKSxoPWEoXCIuL05vZGVCdWZmZXJSZWFkZXJcIiksaT1hKFwiLi9VaW50OEFycmF5UmVhZGVyXCIpO2IuZXhwb3J0cz1mdW5jdGlvbihhKXt2YXIgYj1kLmdldFR5cGVPZihhKTtyZXR1cm4gZC5jaGVja1N1cHBvcnQoYiksXCJzdHJpbmdcIiE9PWJ8fGUudWludDhhcnJheT9cIm5vZGVidWZmZXJcIj09PWI/bmV3IGgoYSk6ZS51aW50OGFycmF5P25ldyBpKGQudHJhbnNmb3JtVG8oXCJ1aW50OGFycmF5XCIsYSkpOm5ldyBmKGQudHJhbnNmb3JtVG8oXCJhcnJheVwiLGEpKTpuZXcgZyhhKX19LHtcIi4uL3N1cHBvcnRcIjozMCxcIi4uL3V0aWxzXCI6MzIsXCIuL0FycmF5UmVhZGVyXCI6MTcsXCIuL05vZGVCdWZmZXJSZWFkZXJcIjoxOSxcIi4vU3RyaW5nUmVhZGVyXCI6MjAsXCIuL1VpbnQ4QXJyYXlSZWFkZXJcIjoyMX1dLDIzOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7Yy5MT0NBTF9GSUxFX0hFQURFUj1cIlBLXHUwMDAzXHUwMDA0XCIsYy5DRU5UUkFMX0ZJTEVfSEVBREVSPVwiUEtcdTAwMDFcdTAwMDJcIixjLkNFTlRSQUxfRElSRUNUT1JZX0VORD1cIlBLXHUwMDA1XHUwMDA2XCIsYy5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9MT0NBVE9SPVwiUEtcdTAwMDZcdTAwMDdcIixjLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0VORD1cIlBLXHUwMDA2XHUwMDA2XCIsYy5EQVRBX0RFU0NSSVBUT1I9XCJQS1x1MDAwN1xcYlwifSx7fV0sMjQ6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEpe2UuY2FsbCh0aGlzLFwiQ29udmVydFdvcmtlciB0byBcIithKSx0aGlzLmRlc3RUeXBlPWF9dmFyIGU9YShcIi4vR2VuZXJpY1dvcmtlclwiKSxmPWEoXCIuLi91dGlsc1wiKTtmLmluaGVyaXRzKGQsZSksZC5wcm90b3R5cGUucHJvY2Vzc0NodW5rPWZ1bmN0aW9uKGEpe3RoaXMucHVzaCh7ZGF0YTpmLnRyYW5zZm9ybVRvKHRoaXMuZGVzdFR5cGUsYS5kYXRhKSxtZXRhOmEubWV0YX0pfSxiLmV4cG9ydHM9ZH0se1wiLi4vdXRpbHNcIjozMixcIi4vR2VuZXJpY1dvcmtlclwiOjI4fV0sMjU6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKCl7ZS5jYWxsKHRoaXMsXCJDcmMzMlByb2JlXCIpLHRoaXMud2l0aFN0cmVhbUluZm8oXCJjcmMzMlwiLDApfXZhciBlPWEoXCIuL0dlbmVyaWNXb3JrZXJcIiksZj1hKFwiLi4vY3JjMzJcIiksZz1hKFwiLi4vdXRpbHNcIik7Zy5pbmhlcml0cyhkLGUpLGQucHJvdG90eXBlLnByb2Nlc3NDaHVuaz1mdW5jdGlvbihhKXt0aGlzLnN0cmVhbUluZm8uY3JjMzI9ZihhLmRhdGEsdGhpcy5zdHJlYW1JbmZvLmNyYzMyfHwwKSx0aGlzLnB1c2goYSl9LGIuZXhwb3J0cz1kfSx7XCIuLi9jcmMzMlwiOjQsXCIuLi91dGlsc1wiOjMyLFwiLi9HZW5lcmljV29ya2VyXCI6Mjh9XSwyNjpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7Zi5jYWxsKHRoaXMsXCJEYXRhTGVuZ3RoUHJvYmUgZm9yIFwiK2EpLHRoaXMucHJvcE5hbWU9YSx0aGlzLndpdGhTdHJlYW1JbmZvKGEsMCl9dmFyIGU9YShcIi4uL3V0aWxzXCIpLGY9YShcIi4vR2VuZXJpY1dvcmtlclwiKTtlLmluaGVyaXRzKGQsZiksZC5wcm90b3R5cGUucHJvY2Vzc0NodW5rPWZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPXRoaXMuc3RyZWFtSW5mb1t0aGlzLnByb3BOYW1lXXx8MDt0aGlzLnN0cmVhbUluZm9bdGhpcy5wcm9wTmFtZV09YithLmRhdGEubGVuZ3RofWYucHJvdG90eXBlLnByb2Nlc3NDaHVuay5jYWxsKHRoaXMsYSl9LGIuZXhwb3J0cz1kfSx7XCIuLi91dGlsc1wiOjMyLFwiLi9HZW5lcmljV29ya2VyXCI6Mjh9XSwyNzpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7Zi5jYWxsKHRoaXMsXCJEYXRhV29ya2VyXCIpO3ZhciBiPXRoaXM7dGhpcy5kYXRhSXNSZWFkeT0hMSx0aGlzLmluZGV4PTAsdGhpcy5tYXg9MCx0aGlzLmRhdGE9bnVsbCx0aGlzLnR5cGU9XCJcIix0aGlzLl90aWNrU2NoZWR1bGVkPSExLGEudGhlbihmdW5jdGlvbihhKXtiLmRhdGFJc1JlYWR5PSEwLGIuZGF0YT1hLGIubWF4PWEmJmEubGVuZ3RofHwwLGIudHlwZT1lLmdldFR5cGVPZihhKSxiLmlzUGF1c2VkfHxiLl90aWNrQW5kUmVwZWF0KCl9LGZ1bmN0aW9uKGEpe2IuZXJyb3IoYSl9KX12YXIgZT1hKFwiLi4vdXRpbHNcIiksZj1hKFwiLi9HZW5lcmljV29ya2VyXCIpLGc9MTYzODQ7ZS5pbmhlcml0cyhkLGYpLGQucHJvdG90eXBlLmNsZWFuVXA9ZnVuY3Rpb24oKXtmLnByb3RvdHlwZS5jbGVhblVwLmNhbGwodGhpcyksdGhpcy5kYXRhPW51bGx9LGQucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe3JldHVybiEhZi5wcm90b3R5cGUucmVzdW1lLmNhbGwodGhpcykmJighdGhpcy5fdGlja1NjaGVkdWxlZCYmdGhpcy5kYXRhSXNSZWFkeSYmKHRoaXMuX3RpY2tTY2hlZHVsZWQ9ITAsZS5kZWxheSh0aGlzLl90aWNrQW5kUmVwZWF0LFtdLHRoaXMpKSwhMCl9LGQucHJvdG90eXBlLl90aWNrQW5kUmVwZWF0PWZ1bmN0aW9uKCl7dGhpcy5fdGlja1NjaGVkdWxlZD0hMSx0aGlzLmlzUGF1c2VkfHx0aGlzLmlzRmluaXNoZWR8fCh0aGlzLl90aWNrKCksdGhpcy5pc0ZpbmlzaGVkfHwoZS5kZWxheSh0aGlzLl90aWNrQW5kUmVwZWF0LFtdLHRoaXMpLHRoaXMuX3RpY2tTY2hlZHVsZWQ9ITApKX0sZC5wcm90b3R5cGUuX3RpY2s9ZnVuY3Rpb24oKXtpZih0aGlzLmlzUGF1c2VkfHx0aGlzLmlzRmluaXNoZWQpcmV0dXJuITE7dmFyIGE9ZyxiPW51bGwsYz1NYXRoLm1pbih0aGlzLm1heCx0aGlzLmluZGV4K2EpO2lmKHRoaXMuaW5kZXg+PXRoaXMubWF4KXJldHVybiB0aGlzLmVuZCgpO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2VcInN0cmluZ1wiOmI9dGhpcy5kYXRhLnN1YnN0cmluZyh0aGlzLmluZGV4LGMpO2JyZWFrO2Nhc2VcInVpbnQ4YXJyYXlcIjpiPXRoaXMuZGF0YS5zdWJhcnJheSh0aGlzLmluZGV4LGMpO2JyZWFrO2Nhc2VcImFycmF5XCI6Y2FzZVwibm9kZWJ1ZmZlclwiOmI9dGhpcy5kYXRhLnNsaWNlKHRoaXMuaW5kZXgsYyl9cmV0dXJuIHRoaXMuaW5kZXg9Yyx0aGlzLnB1c2goe2RhdGE6YixtZXRhOntwZXJjZW50OnRoaXMubWF4P3RoaXMuaW5kZXgvdGhpcy5tYXgqMTAwOjB9fSl9LGIuZXhwb3J0cz1kfSx7XCIuLi91dGlsc1wiOjMyLFwiLi9HZW5lcmljV29ya2VyXCI6Mjh9XSwyODpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7dGhpcy5uYW1lPWF8fFwiZGVmYXVsdFwiLHRoaXMuc3RyZWFtSW5mbz17fSx0aGlzLmdlbmVyYXRlZEVycm9yPW51bGwsdGhpcy5leHRyYVN0cmVhbUluZm89e30sdGhpcy5pc1BhdXNlZD0hMCx0aGlzLmlzRmluaXNoZWQ9ITEsdGhpcy5pc0xvY2tlZD0hMSx0aGlzLl9saXN0ZW5lcnM9e2RhdGE6W10sZW5kOltdLGVycm9yOltdfSx0aGlzLnByZXZpb3VzPW51bGx9ZC5wcm90b3R5cGU9e3B1c2g6ZnVuY3Rpb24oYSl7dGhpcy5lbWl0KFwiZGF0YVwiLGEpfSxlbmQ6ZnVuY3Rpb24oKXtpZih0aGlzLmlzRmluaXNoZWQpcmV0dXJuITE7dGhpcy5mbHVzaCgpO3RyeXt0aGlzLmVtaXQoXCJlbmRcIiksdGhpcy5jbGVhblVwKCksdGhpcy5pc0ZpbmlzaGVkPSEwfWNhdGNoKGEpe3RoaXMuZW1pdChcImVycm9yXCIsYSl9cmV0dXJuITB9LGVycm9yOmZ1bmN0aW9uKGEpe3JldHVybiF0aGlzLmlzRmluaXNoZWQmJih0aGlzLmlzUGF1c2VkP3RoaXMuZ2VuZXJhdGVkRXJyb3I9YToodGhpcy5pc0ZpbmlzaGVkPSEwLHRoaXMuZW1pdChcImVycm9yXCIsYSksdGhpcy5wcmV2aW91cyYmdGhpcy5wcmV2aW91cy5lcnJvcihhKSx0aGlzLmNsZWFuVXAoKSksITApfSxvbjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLl9saXN0ZW5lcnNbYV0ucHVzaChiKSx0aGlzfSxjbGVhblVwOmZ1bmN0aW9uKCl7dGhpcy5zdHJlYW1JbmZvPXRoaXMuZ2VuZXJhdGVkRXJyb3I9dGhpcy5leHRyYVN0cmVhbUluZm89bnVsbCx0aGlzLl9saXN0ZW5lcnM9W119LGVtaXQ6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLl9saXN0ZW5lcnNbYV0pZm9yKHZhciBjPTA7Yzx0aGlzLl9saXN0ZW5lcnNbYV0ubGVuZ3RoO2MrKyl0aGlzLl9saXN0ZW5lcnNbYV1bY10uY2FsbCh0aGlzLGIpfSxwaXBlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlZ2lzdGVyUHJldmlvdXModGhpcyl9LHJlZ2lzdGVyUHJldmlvdXM6ZnVuY3Rpb24oYSl7aWYodGhpcy5pc0xvY2tlZCl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3RyZWFtICdcIit0aGlzK1wiJyBoYXMgYWxyZWFkeSBiZWVuIHVzZWQuXCIpO3RoaXMuc3RyZWFtSW5mbz1hLnN0cmVhbUluZm8sdGhpcy5tZXJnZVN0cmVhbUluZm8oKSx0aGlzLnByZXZpb3VzPWE7dmFyIGI9dGhpcztyZXR1cm4gYS5vbihcImRhdGFcIixmdW5jdGlvbihhKXtiLnByb2Nlc3NDaHVuayhhKX0pLGEub24oXCJlbmRcIixmdW5jdGlvbigpe2IuZW5kKCl9KSxhLm9uKFwiZXJyb3JcIixmdW5jdGlvbihhKXtiLmVycm9yKGEpfSksdGhpc30scGF1c2U6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc1BhdXNlZCYmIXRoaXMuaXNGaW5pc2hlZCYmKHRoaXMuaXNQYXVzZWQ9ITAsdGhpcy5wcmV2aW91cyYmdGhpcy5wcmV2aW91cy5wYXVzZSgpLCEwKX0scmVzdW1lOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNQYXVzZWR8fHRoaXMuaXNGaW5pc2hlZClyZXR1cm4hMTt0aGlzLmlzUGF1c2VkPSExO3ZhciBhPSExO3JldHVybiB0aGlzLmdlbmVyYXRlZEVycm9yJiYodGhpcy5lcnJvcih0aGlzLmdlbmVyYXRlZEVycm9yKSxhPSEwKSx0aGlzLnByZXZpb3VzJiZ0aGlzLnByZXZpb3VzLnJlc3VtZSgpLCFhfSxmbHVzaDpmdW5jdGlvbigpe30scHJvY2Vzc0NodW5rOmZ1bmN0aW9uKGEpe3RoaXMucHVzaChhKX0sd2l0aFN0cmVhbUluZm86ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5leHRyYVN0cmVhbUluZm9bYV09Yix0aGlzLm1lcmdlU3RyZWFtSW5mbygpLHRoaXN9LG1lcmdlU3RyZWFtSW5mbzpmdW5jdGlvbigpe2Zvcih2YXIgYSBpbiB0aGlzLmV4dHJhU3RyZWFtSW5mbyl0aGlzLmV4dHJhU3RyZWFtSW5mby5oYXNPd25Qcm9wZXJ0eShhKSYmKHRoaXMuc3RyZWFtSW5mb1thXT10aGlzLmV4dHJhU3RyZWFtSW5mb1thXSl9LGxvY2s6ZnVuY3Rpb24oKXtpZih0aGlzLmlzTG9ja2VkKXRocm93IG5ldyBFcnJvcihcIlRoZSBzdHJlYW0gJ1wiK3RoaXMrXCInIGhhcyBhbHJlYWR5IGJlZW4gdXNlZC5cIik7dGhpcy5pc0xvY2tlZD0hMCx0aGlzLnByZXZpb3VzJiZ0aGlzLnByZXZpb3VzLmxvY2soKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgYT1cIldvcmtlciBcIit0aGlzLm5hbWU7cmV0dXJuIHRoaXMucHJldmlvdXM/dGhpcy5wcmV2aW91cytcIiAtPiBcIithOmF9fSxiLmV4cG9ydHM9ZH0se31dLDI5OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhLGIsYyl7c3dpdGNoKGEpe2Nhc2VcImJsb2JcIjpyZXR1cm4gaC5uZXdCbG9iKGgudHJhbnNmb3JtVG8oXCJhcnJheWJ1ZmZlclwiLGIpLGMpO2Nhc2VcImJhc2U2NFwiOnJldHVybiBrLmVuY29kZShiKTtkZWZhdWx0OnJldHVybiBoLnRyYW5zZm9ybVRvKGEsYil9fWZ1bmN0aW9uIGUoYSxiKXt2YXIgYyxkPTAsZT1udWxsLGY9MDtmb3IoYz0wO2M8Yi5sZW5ndGg7YysrKWYrPWJbY10ubGVuZ3RoO3N3aXRjaChhKXtjYXNlXCJzdHJpbmdcIjpyZXR1cm4gYi5qb2luKFwiXCIpO2Nhc2VcImFycmF5XCI6cmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sYik7Y2FzZVwidWludDhhcnJheVwiOmZvcihlPW5ldyBVaW50OEFycmF5KGYpLGM9MDtjPGIubGVuZ3RoO2MrKyllLnNldChiW2NdLGQpLGQrPWJbY10ubGVuZ3RoO3JldHVybiBlO2Nhc2VcIm5vZGVidWZmZXJcIjpyZXR1cm4gQnVmZmVyLmNvbmNhdChiKTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcImNvbmNhdCA6IHVuc3VwcG9ydGVkIHR5cGUgJ1wiK2ErXCInXCIpfX1mdW5jdGlvbiBmKGEsYil7cmV0dXJuIG5ldyBtLlByb21pc2UoZnVuY3Rpb24oYyxmKXt2YXIgZz1bXSxoPWEuX2ludGVybmFsVHlwZSxpPWEuX291dHB1dFR5cGUsaj1hLl9taW1lVHlwZTthLm9uKFwiZGF0YVwiLGZ1bmN0aW9uKGEsYyl7Zy5wdXNoKGEpLGImJmIoYyl9KS5vbihcImVycm9yXCIsZnVuY3Rpb24oYSl7Zz1bXSxmKGEpfSkub24oXCJlbmRcIixmdW5jdGlvbigpe3RyeXt2YXIgYT1kKGksZShoLGcpLGopO2MoYSl9Y2F0Y2goYil7ZihiKX1nPVtdfSkucmVzdW1lKCl9KX1mdW5jdGlvbiBnKGEsYixjKXt2YXIgZD1iO3N3aXRjaChiKXtjYXNlXCJibG9iXCI6Y2FzZVwiYXJyYXlidWZmZXJcIjpkPVwidWludDhhcnJheVwiO2JyZWFrO2Nhc2VcImJhc2U2NFwiOmQ9XCJzdHJpbmdcIn10cnl7dGhpcy5faW50ZXJuYWxUeXBlPWQsdGhpcy5fb3V0cHV0VHlwZT1iLHRoaXMuX21pbWVUeXBlPWMsaC5jaGVja1N1cHBvcnQoZCksdGhpcy5fd29ya2VyPWEucGlwZShuZXcgaShkKSksYS5sb2NrKCl9Y2F0Y2goZSl7dGhpcy5fd29ya2VyPW5ldyBqKFwiZXJyb3JcIiksdGhpcy5fd29ya2VyLmVycm9yKGUpfX12YXIgaD1hKFwiLi4vdXRpbHNcIiksaT1hKFwiLi9Db252ZXJ0V29ya2VyXCIpLGo9YShcIi4vR2VuZXJpY1dvcmtlclwiKSxrPWEoXCIuLi9iYXNlNjRcIiksbD1hKFwiLi4vc3VwcG9ydFwiKSxtPWEoXCIuLi9leHRlcm5hbFwiKSxuPW51bGw7aWYobC5ub2Rlc3RyZWFtKXRyeXtuPWEoXCIuLi9ub2RlanMvTm9kZWpzU3RyZWFtT3V0cHV0QWRhcHRlclwiKX1jYXRjaChvKXt9Zy5wcm90b3R5cGU9e2FjY3VtdWxhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGYodGhpcyxhKX0sb246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO3JldHVyblwiZGF0YVwiPT09YT90aGlzLl93b3JrZXIub24oYSxmdW5jdGlvbihhKXtiLmNhbGwoYyxhLmRhdGEsYS5tZXRhKX0pOnRoaXMuX3dvcmtlci5vbihhLGZ1bmN0aW9uKCl7aC5kZWxheShiLGFyZ3VtZW50cyxjKX0pLHRoaXN9LHJlc3VtZTpmdW5jdGlvbigpe3JldHVybiBoLmRlbGF5KHRoaXMuX3dvcmtlci5yZXN1bWUsW10sdGhpcy5fd29ya2VyKSx0aGlzfSxwYXVzZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93b3JrZXIucGF1c2UoKSx0aGlzfSx0b05vZGVqc1N0cmVhbTpmdW5jdGlvbihhKXtpZihoLmNoZWNrU3VwcG9ydChcIm5vZGVzdHJlYW1cIiksXCJub2RlYnVmZmVyXCIhPT10aGlzLl9vdXRwdXRUeXBlKXRocm93IG5ldyBFcnJvcih0aGlzLl9vdXRwdXRUeXBlK1wiIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBtZXRob2RcIik7cmV0dXJuIG5ldyBuKHRoaXMse29iamVjdE1vZGU6XCJub2RlYnVmZmVyXCIhPT10aGlzLl9vdXRwdXRUeXBlfSxhKX19LGIuZXhwb3J0cz1nfSx7XCIuLi9iYXNlNjRcIjoxLFwiLi4vZXh0ZXJuYWxcIjo2LFwiLi4vbm9kZWpzL05vZGVqc1N0cmVhbU91dHB1dEFkYXB0ZXJcIjoxMyxcIi4uL3N1cHBvcnRcIjozMCxcIi4uL3V0aWxzXCI6MzIsXCIuL0NvbnZlcnRXb3JrZXJcIjoyNCxcIi4vR2VuZXJpY1dvcmtlclwiOjI4fV0sMzA6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtpZihjLmJhc2U2ND0hMCxjLmFycmF5PSEwLGMuc3RyaW5nPSEwLGMuYXJyYXlidWZmZXI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEFycmF5QnVmZmVyJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheSxjLm5vZGVidWZmZXI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEJ1ZmZlcixjLnVpbnQ4YXJyYXk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4QXJyYXksXCJ1bmRlZmluZWRcIj09dHlwZW9mIEFycmF5QnVmZmVyKWMuYmxvYj0hMTtlbHNle3ZhciBkPW5ldyBBcnJheUJ1ZmZlcigwKTt0cnl7Yy5ibG9iPTA9PT1uZXcgQmxvYihbZF0se3R5cGU6XCJhcHBsaWNhdGlvbi96aXBcIn0pLnNpemV9Y2F0Y2goZSl7dHJ5e3ZhciBmPXNlbGYuQmxvYkJ1aWxkZXJ8fHNlbGYuV2ViS2l0QmxvYkJ1aWxkZXJ8fHNlbGYuTW96QmxvYkJ1aWxkZXJ8fHNlbGYuTVNCbG9iQnVpbGRlcixnPW5ldyBmO2cuYXBwZW5kKGQpLGMuYmxvYj0wPT09Zy5nZXRCbG9iKFwiYXBwbGljYXRpb24vemlwXCIpLnNpemV9Y2F0Y2goZSl7Yy5ibG9iPSExfX19dHJ5e2Mubm9kZXN0cmVhbT0hIWEoXCJyZWFkYWJsZS1zdHJlYW1cIikuUmVhZGFibGV9Y2F0Y2goZSl7Yy5ub2Rlc3RyZWFtPSExfX0se1wicmVhZGFibGUtc3RyZWFtXCI6MTZ9XSwzMTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoKXtpLmNhbGwodGhpcyxcInV0Zi04IGRlY29kZVwiKSx0aGlzLmxlZnRPdmVyPW51bGx9ZnVuY3Rpb24gZSgpe2kuY2FsbCh0aGlzLFwidXRmLTggZW5jb2RlXCIpfWZvcih2YXIgZj1hKFwiLi91dGlsc1wiKSxnPWEoXCIuL3N1cHBvcnRcIiksaD1hKFwiLi9ub2RlanNVdGlsc1wiKSxpPWEoXCIuL3N0cmVhbS9HZW5lcmljV29ya2VyXCIpLGo9bmV3IEFycmF5KDI1Niksaz0wO2s8MjU2O2srKylqW2tdPWs+PTI1Mj82Oms+PTI0OD81Oms+PTI0MD80Oms+PTIyND8zOms+PTE5Mj8yOjE7alsyNTRdPWpbMjU0XT0xO3ZhciBsPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsaD1hLmxlbmd0aCxpPTA7Zm9yKGU9MDtlPGg7ZSsrKWM9YS5jaGFyQ29kZUF0KGUpLDU1Mjk2PT09KDY0NTEyJmMpJiZlKzE8aCYmKGQ9YS5jaGFyQ29kZUF0KGUrMSksNTYzMjA9PT0oNjQ1MTImZCkmJihjPTY1NTM2KyhjLTU1Mjk2PDwxMCkrKGQtNTYzMjApLGUrKykpLGkrPWM8MTI4PzE6YzwyMDQ4PzI6Yzw2NTUzNj8zOjQ7Zm9yKGI9Zy51aW50OGFycmF5P25ldyBVaW50OEFycmF5KGkpOm5ldyBBcnJheShpKSxmPTAsZT0wO2Y8aTtlKyspYz1hLmNoYXJDb2RlQXQoZSksNTUyOTY9PT0oNjQ1MTImYykmJmUrMTxoJiYoZD1hLmNoYXJDb2RlQXQoZSsxKSw1NjMyMD09PSg2NDUxMiZkKSYmKGM9NjU1MzYrKGMtNTUyOTY8PDEwKSsoZC01NjMyMCksZSsrKSksYzwxMjg/YltmKytdPWM6YzwyMDQ4PyhiW2YrK109MTkyfGM+Pj42LGJbZisrXT0xMjh8NjMmYyk6Yzw2NTUzNj8oYltmKytdPTIyNHxjPj4+MTIsYltmKytdPTEyOHxjPj4+NiY2MyxiW2YrK109MTI4fDYzJmMpOihiW2YrK109MjQwfGM+Pj4xOCxiW2YrK109MTI4fGM+Pj4xMiY2MyxiW2YrK109MTI4fGM+Pj42JjYzLGJbZisrXT0xMjh8NjMmYyk7cmV0dXJuIGJ9LG09ZnVuY3Rpb24oYSxiKXt2YXIgYztmb3IoYj1ifHxhLmxlbmd0aCxiPmEubGVuZ3RoJiYoYj1hLmxlbmd0aCksYz1iLTE7Yz49MCYmMTI4PT09KDE5MiZhW2NdKTspYy0tO3JldHVybiBjPDA/YjowPT09Yz9iOmMralthW2NdXT5iP2M6Yn0sbj1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxnPWEubGVuZ3RoLGg9bmV3IEFycmF5KDIqZyk7Zm9yKGM9MCxiPTA7YjxnOylpZihkPWFbYisrXSxkPDEyOCloW2MrK109ZDtlbHNlIGlmKGU9altkXSxlPjQpaFtjKytdPTY1NTMzLGIrPWUtMTtlbHNle2ZvcihkJj0yPT09ZT8zMTozPT09ZT8xNTo3O2U+MSYmYjxnOylkPWQ8PDZ8NjMmYVtiKytdLGUtLTtlPjE/aFtjKytdPTY1NTMzOmQ8NjU1MzY/aFtjKytdPWQ6KGQtPTY1NTM2LGhbYysrXT01NTI5NnxkPj4xMCYxMDIzLGhbYysrXT01NjMyMHwxMDIzJmQpfXJldHVybiBoLmxlbmd0aCE9PWMmJihoLnN1YmFycmF5P2g9aC5zdWJhcnJheSgwLGMpOmgubGVuZ3RoPWMpLGYuYXBwbHlGcm9tQ2hhckNvZGUoaCl9O2MudXRmOGVuY29kZT1mdW5jdGlvbihhKXtyZXR1cm4gZy5ub2RlYnVmZmVyP2gubmV3QnVmZmVyRnJvbShhLFwidXRmLThcIik6bChhKX0sYy51dGY4ZGVjb2RlPWZ1bmN0aW9uKGEpe3JldHVybiBnLm5vZGVidWZmZXI/Zi50cmFuc2Zvcm1UbyhcIm5vZGVidWZmZXJcIixhKS50b1N0cmluZyhcInV0Zi04XCIpOihhPWYudHJhbnNmb3JtVG8oZy51aW50OGFycmF5P1widWludDhhcnJheVwiOlwiYXJyYXlcIixhKSxuKGEpKX0sZi5pbmhlcml0cyhkLGkpLGQucHJvdG90eXBlLnByb2Nlc3NDaHVuaz1mdW5jdGlvbihhKXt2YXIgYj1mLnRyYW5zZm9ybVRvKGcudWludDhhcnJheT9cInVpbnQ4YXJyYXlcIjpcImFycmF5XCIsYS5kYXRhKTtpZih0aGlzLmxlZnRPdmVyJiZ0aGlzLmxlZnRPdmVyLmxlbmd0aCl7aWYoZy51aW50OGFycmF5KXt2YXIgZD1iO2I9bmV3IFVpbnQ4QXJyYXkoZC5sZW5ndGgrdGhpcy5sZWZ0T3Zlci5sZW5ndGgpLGIuc2V0KHRoaXMubGVmdE92ZXIsMCksYi5zZXQoZCx0aGlzLmxlZnRPdmVyLmxlbmd0aCl9ZWxzZSBiPXRoaXMubGVmdE92ZXIuY29uY2F0KGIpO3RoaXMubGVmdE92ZXI9bnVsbH12YXIgZT1tKGIpLGg9YjtlIT09Yi5sZW5ndGgmJihnLnVpbnQ4YXJyYXk/KGg9Yi5zdWJhcnJheSgwLGUpLHRoaXMubGVmdE92ZXI9Yi5zdWJhcnJheShlLGIubGVuZ3RoKSk6KGg9Yi5zbGljZSgwLGUpLHRoaXMubGVmdE92ZXI9Yi5zbGljZShlLGIubGVuZ3RoKSkpLHRoaXMucHVzaCh7ZGF0YTpjLnV0ZjhkZWNvZGUoaCksbWV0YTphLm1ldGF9KX0sZC5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXt0aGlzLmxlZnRPdmVyJiZ0aGlzLmxlZnRPdmVyLmxlbmd0aCYmKHRoaXMucHVzaCh7ZGF0YTpjLnV0ZjhkZWNvZGUodGhpcy5sZWZ0T3ZlciksbWV0YTp7fX0pLHRoaXMubGVmdE92ZXI9bnVsbCl9LGMuVXRmOERlY29kZVdvcmtlcj1kLGYuaW5oZXJpdHMoZSxpKSxlLnByb3RvdHlwZS5wcm9jZXNzQ2h1bms9ZnVuY3Rpb24oYSl7dGhpcy5wdXNoKHtkYXRhOmMudXRmOGVuY29kZShhLmRhdGEpLG1ldGE6YS5tZXRhfSl9LGMuVXRmOEVuY29kZVdvcmtlcj1lfSx7XCIuL25vZGVqc1V0aWxzXCI6MTQsXCIuL3N0cmVhbS9HZW5lcmljV29ya2VyXCI6MjgsXCIuL3N1cHBvcnRcIjozMCxcIi4vdXRpbHNcIjozMn1dLDMyOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXt2YXIgYj1udWxsO3JldHVybiBiPWkudWludDhhcnJheT9uZXcgVWludDhBcnJheShhLmxlbmd0aCk6bmV3IEFycmF5KGEubGVuZ3RoKSxmKGEsYil9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDsrK2MpYltjXT0yNTUmYS5jaGFyQ29kZUF0KGMpO3JldHVybiBifWZ1bmN0aW9uIGcoYSl7dmFyIGI9NjU1MzYsZD1jLmdldFR5cGVPZihhKSxlPSEwO2lmKFwidWludDhhcnJheVwiPT09ZD9lPW4uYXBwbHlDYW5CZVVzZWQudWludDhhcnJheTpcIm5vZGVidWZmZXJcIj09PWQmJihlPW4uYXBwbHlDYW5CZVVzZWQubm9kZWJ1ZmZlciksZSlmb3IoO2I+MTspdHJ5e3JldHVybiBuLnN0cmluZ2lmeUJ5Q2h1bmsoYSxkLGIpfWNhdGNoKGYpe2I9TWF0aC5mbG9vcihiLzIpfXJldHVybiBuLnN0cmluZ2lmeUJ5Q2hhcihhKX1mdW5jdGlvbiBoKGEsYil7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspYltjXT1hW2NdO1xucmV0dXJuIGJ9dmFyIGk9YShcIi4vc3VwcG9ydFwiKSxqPWEoXCIuL2Jhc2U2NFwiKSxrPWEoXCIuL25vZGVqc1V0aWxzXCIpLGw9YShcImNvcmUtanMvbGlicmFyeS9mbi9zZXQtaW1tZWRpYXRlXCIpLG09YShcIi4vZXh0ZXJuYWxcIik7Yy5uZXdCbG9iPWZ1bmN0aW9uKGEsYil7Yy5jaGVja1N1cHBvcnQoXCJibG9iXCIpO3RyeXtyZXR1cm4gbmV3IEJsb2IoW2FdLHt0eXBlOmJ9KX1jYXRjaChkKXt0cnl7dmFyIGU9c2VsZi5CbG9iQnVpbGRlcnx8c2VsZi5XZWJLaXRCbG9iQnVpbGRlcnx8c2VsZi5Nb3pCbG9iQnVpbGRlcnx8c2VsZi5NU0Jsb2JCdWlsZGVyLGY9bmV3IGU7cmV0dXJuIGYuYXBwZW5kKGEpLGYuZ2V0QmxvYihiKX1jYXRjaChkKXt0aHJvdyBuZXcgRXJyb3IoXCJCdWcgOiBjYW4ndCBjb25zdHJ1Y3QgdGhlIEJsb2IuXCIpfX19O3ZhciBuPXtzdHJpbmdpZnlCeUNodW5rOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPTAsZj1hLmxlbmd0aDtpZihmPD1jKXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsYSk7Zm9yKDtlPGY7KVwiYXJyYXlcIj09PWJ8fFwibm9kZWJ1ZmZlclwiPT09Yj9kLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGEuc2xpY2UoZSxNYXRoLm1pbihlK2MsZikpKSk6ZC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxhLnN1YmFycmF5KGUsTWF0aC5taW4oZStjLGYpKSkpLGUrPWM7cmV0dXJuIGQuam9pbihcIlwiKX0sc3RyaW5naWZ5QnlDaGFyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1cIlwiLGM9MDtjPGEubGVuZ3RoO2MrKyliKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGFbY10pO3JldHVybiBifSxhcHBseUNhbkJlVXNlZDp7dWludDhhcnJheTpmdW5jdGlvbigpe3RyeXtyZXR1cm4gaS51aW50OGFycmF5JiYxPT09U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50OEFycmF5KDEpKS5sZW5ndGh9Y2F0Y2goYSl7cmV0dXJuITF9fSgpLG5vZGVidWZmZXI6ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIGkubm9kZWJ1ZmZlciYmMT09PVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxrLmFsbG9jQnVmZmVyKDEpKS5sZW5ndGh9Y2F0Y2goYSl7cmV0dXJuITF9fSgpfX07Yy5hcHBseUZyb21DaGFyQ29kZT1nO3ZhciBvPXt9O28uc3RyaW5nPXtzdHJpbmc6ZSxhcnJheTpmdW5jdGlvbihhKXtyZXR1cm4gZihhLG5ldyBBcnJheShhLmxlbmd0aCkpfSxhcnJheWJ1ZmZlcjpmdW5jdGlvbihhKXtyZXR1cm4gby5zdHJpbmcudWludDhhcnJheShhKS5idWZmZXJ9LHVpbnQ4YXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIGYoYSxuZXcgVWludDhBcnJheShhLmxlbmd0aCkpfSxub2RlYnVmZmVyOmZ1bmN0aW9uKGEpe3JldHVybiBmKGEsay5hbGxvY0J1ZmZlcihhLmxlbmd0aCkpfX0sby5hcnJheT17c3RyaW5nOmcsYXJyYXk6ZSxhcnJheWJ1ZmZlcjpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSkuYnVmZmVyfSx1aW50OGFycmF5OmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgVWludDhBcnJheShhKX0sbm9kZWJ1ZmZlcjpmdW5jdGlvbihhKXtyZXR1cm4gay5uZXdCdWZmZXJGcm9tKGEpfX0sby5hcnJheWJ1ZmZlcj17c3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybiBnKG5ldyBVaW50OEFycmF5KGEpKX0sYXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIGgobmV3IFVpbnQ4QXJyYXkoYSksbmV3IEFycmF5KGEuYnl0ZUxlbmd0aCkpfSxhcnJheWJ1ZmZlcjplLHVpbnQ4YXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBVaW50OEFycmF5KGEpfSxub2RlYnVmZmVyOmZ1bmN0aW9uKGEpe3JldHVybiBrLm5ld0J1ZmZlckZyb20obmV3IFVpbnQ4QXJyYXkoYSkpfX0sby51aW50OGFycmF5PXtzdHJpbmc6ZyxhcnJheTpmdW5jdGlvbihhKXtyZXR1cm4gaChhLG5ldyBBcnJheShhLmxlbmd0aCkpfSxhcnJheWJ1ZmZlcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5idWZmZXJ9LHVpbnQ4YXJyYXk6ZSxub2RlYnVmZmVyOmZ1bmN0aW9uKGEpe3JldHVybiBrLm5ld0J1ZmZlckZyb20oYSl9fSxvLm5vZGVidWZmZXI9e3N0cmluZzpnLGFycmF5OmZ1bmN0aW9uKGEpe3JldHVybiBoKGEsbmV3IEFycmF5KGEubGVuZ3RoKSl9LGFycmF5YnVmZmVyOmZ1bmN0aW9uKGEpe3JldHVybiBvLm5vZGVidWZmZXIudWludDhhcnJheShhKS5idWZmZXJ9LHVpbnQ4YXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIGgoYSxuZXcgVWludDhBcnJheShhLmxlbmd0aCkpfSxub2RlYnVmZmVyOmV9LGMudHJhbnNmb3JtVG89ZnVuY3Rpb24oYSxiKXtpZihifHwoYj1cIlwiKSwhYSlyZXR1cm4gYjtjLmNoZWNrU3VwcG9ydChhKTt2YXIgZD1jLmdldFR5cGVPZihiKSxlPW9bZF1bYV0oYik7cmV0dXJuIGV9LGMuZ2V0VHlwZU9mPWZ1bmN0aW9uKGEpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBhP1wic3RyaW5nXCI6XCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpP1wiYXJyYXlcIjppLm5vZGVidWZmZXImJmsuaXNCdWZmZXIoYSk/XCJub2RlYnVmZmVyXCI6aS51aW50OGFycmF5JiZhIGluc3RhbmNlb2YgVWludDhBcnJheT9cInVpbnQ4YXJyYXlcIjppLmFycmF5YnVmZmVyJiZhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/XCJhcnJheWJ1ZmZlclwiOnZvaWQgMH0sYy5jaGVja1N1cHBvcnQ9ZnVuY3Rpb24oYSl7dmFyIGI9aVthLnRvTG93ZXJDYXNlKCldO2lmKCFiKXRocm93IG5ldyBFcnJvcihhK1wiIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBwbGF0Zm9ybVwiKX0sYy5NQVhfVkFMVUVfMTZCSVRTPTY1NTM1LGMuTUFYX1ZBTFVFXzMyQklUUz0tMSxjLnByZXR0eT1mdW5jdGlvbihhKXt2YXIgYixjLGQ9XCJcIjtmb3IoYz0wO2M8KGF8fFwiXCIpLmxlbmd0aDtjKyspYj1hLmNoYXJDb2RlQXQoYyksZCs9XCJcXFxceFwiKyhiPDE2P1wiMFwiOlwiXCIpK2IudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7cmV0dXJuIGR9LGMuZGVsYXk9ZnVuY3Rpb24oYSxiLGMpe2woZnVuY3Rpb24oKXthLmFwcGx5KGN8fG51bGwsYnx8W10pfSl9LGMuaW5oZXJpdHM9ZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbigpe307Yy5wcm90b3R5cGU9Yi5wcm90b3R5cGUsYS5wcm90b3R5cGU9bmV3IGN9LGMuZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGEsYixjPXt9O2ZvcihhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylmb3IoYiBpbiBhcmd1bWVudHNbYV0pYXJndW1lbnRzW2FdLmhhc093blByb3BlcnR5KGIpJiZcInVuZGVmaW5lZFwiPT10eXBlb2YgY1tiXSYmKGNbYl09YXJndW1lbnRzW2FdW2JdKTtyZXR1cm4gY30sYy5wcmVwYXJlQ29udGVudD1mdW5jdGlvbihhLGIsZSxmLGcpe3ZhciBoPW0uUHJvbWlzZS5yZXNvbHZlKGIpLnRoZW4oZnVuY3Rpb24oYSl7dmFyIGI9aS5ibG9iJiYoYSBpbnN0YW5jZW9mIEJsb2J8fFtcIltvYmplY3QgRmlsZV1cIixcIltvYmplY3QgQmxvYl1cIl0uaW5kZXhPZihPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSkpIT09LTEpO3JldHVybiBiJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgRmlsZVJlYWRlcj9uZXcgbS5Qcm9taXNlKGZ1bmN0aW9uKGIsYyl7dmFyIGQ9bmV3IEZpbGVSZWFkZXI7ZC5vbmxvYWQ9ZnVuY3Rpb24oYSl7YihhLnRhcmdldC5yZXN1bHQpfSxkLm9uZXJyb3I9ZnVuY3Rpb24oYSl7YyhhLnRhcmdldC5lcnJvcil9LGQucmVhZEFzQXJyYXlCdWZmZXIoYSl9KTphfSk7cmV0dXJuIGgudGhlbihmdW5jdGlvbihiKXt2YXIgaD1jLmdldFR5cGVPZihiKTtyZXR1cm4gaD8oXCJhcnJheWJ1ZmZlclwiPT09aD9iPWMudHJhbnNmb3JtVG8oXCJ1aW50OGFycmF5XCIsYik6XCJzdHJpbmdcIj09PWgmJihnP2I9ai5kZWNvZGUoYik6ZSYmZiE9PSEwJiYoYj1kKGIpKSksYik6bS5Qcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJDYW4ndCByZWFkIHRoZSBkYXRhIG9mICdcIithK1wiJy4gSXMgaXQgaW4gYSBzdXBwb3J0ZWQgSmF2YVNjcmlwdCB0eXBlIChTdHJpbmcsIEJsb2IsIEFycmF5QnVmZmVyLCBldGMpID9cIikpfSl9fSx7XCIuL2Jhc2U2NFwiOjEsXCIuL2V4dGVybmFsXCI6NixcIi4vbm9kZWpzVXRpbHNcIjoxNCxcIi4vc3VwcG9ydFwiOjMwLFwiY29yZS1qcy9saWJyYXJ5L2ZuL3NldC1pbW1lZGlhdGVcIjozNn1dLDMzOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXt0aGlzLmZpbGVzPVtdLHRoaXMubG9hZE9wdGlvbnM9YX12YXIgZT1hKFwiLi9yZWFkZXIvcmVhZGVyRm9yXCIpLGY9YShcIi4vdXRpbHNcIiksZz1hKFwiLi9zaWduYXR1cmVcIiksaD1hKFwiLi96aXBFbnRyeVwiKSxpPShhKFwiLi91dGY4XCIpLGEoXCIuL3N1cHBvcnRcIikpO2QucHJvdG90eXBlPXtjaGVja1NpZ25hdHVyZTpmdW5jdGlvbihhKXtpZighdGhpcy5yZWFkZXIucmVhZEFuZENoZWNrU2lnbmF0dXJlKGEpKXt0aGlzLnJlYWRlci5pbmRleC09NDt2YXIgYj10aGlzLnJlYWRlci5yZWFkU3RyaW5nKDQpO3Rocm93IG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXAgb3IgYnVnOiB1bmV4cGVjdGVkIHNpZ25hdHVyZSAoXCIrZi5wcmV0dHkoYikrXCIsIGV4cGVjdGVkIFwiK2YucHJldHR5KGEpK1wiKVwiKX19LGlzU2lnbmF0dXJlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5yZWFkZXIuaW5kZXg7dGhpcy5yZWFkZXIuc2V0SW5kZXgoYSk7dmFyIGQ9dGhpcy5yZWFkZXIucmVhZFN0cmluZyg0KSxlPWQ9PT1iO3JldHVybiB0aGlzLnJlYWRlci5zZXRJbmRleChjKSxlfSxyZWFkQmxvY2tFbmRPZkNlbnRyYWw6ZnVuY3Rpb24oKXt0aGlzLmRpc2tOdW1iZXI9dGhpcy5yZWFkZXIucmVhZEludCgyKSx0aGlzLmRpc2tXaXRoQ2VudHJhbERpclN0YXJ0PXRoaXMucmVhZGVyLnJlYWRJbnQoMiksdGhpcy5jZW50cmFsRGlyUmVjb3Jkc09uVGhpc0Rpc2s9dGhpcy5yZWFkZXIucmVhZEludCgyKSx0aGlzLmNlbnRyYWxEaXJSZWNvcmRzPXRoaXMucmVhZGVyLnJlYWRJbnQoMiksdGhpcy5jZW50cmFsRGlyU2l6ZT10aGlzLnJlYWRlci5yZWFkSW50KDQpLHRoaXMuY2VudHJhbERpck9mZnNldD10aGlzLnJlYWRlci5yZWFkSW50KDQpLHRoaXMuemlwQ29tbWVudExlbmd0aD10aGlzLnJlYWRlci5yZWFkSW50KDIpO3ZhciBhPXRoaXMucmVhZGVyLnJlYWREYXRhKHRoaXMuemlwQ29tbWVudExlbmd0aCksYj1pLnVpbnQ4YXJyYXk/XCJ1aW50OGFycmF5XCI6XCJhcnJheVwiLGM9Zi50cmFuc2Zvcm1UbyhiLGEpO3RoaXMuemlwQ29tbWVudD10aGlzLmxvYWRPcHRpb25zLmRlY29kZUZpbGVOYW1lKGMpfSxyZWFkQmxvY2taaXA2NEVuZE9mQ2VudHJhbDpmdW5jdGlvbigpe3RoaXMuemlwNjRFbmRPZkNlbnRyYWxTaXplPXRoaXMucmVhZGVyLnJlYWRJbnQoOCksdGhpcy5yZWFkZXIuc2tpcCg0KSx0aGlzLmRpc2tOdW1iZXI9dGhpcy5yZWFkZXIucmVhZEludCg0KSx0aGlzLmRpc2tXaXRoQ2VudHJhbERpclN0YXJ0PXRoaXMucmVhZGVyLnJlYWRJbnQoNCksdGhpcy5jZW50cmFsRGlyUmVjb3Jkc09uVGhpc0Rpc2s9dGhpcy5yZWFkZXIucmVhZEludCg4KSx0aGlzLmNlbnRyYWxEaXJSZWNvcmRzPXRoaXMucmVhZGVyLnJlYWRJbnQoOCksdGhpcy5jZW50cmFsRGlyU2l6ZT10aGlzLnJlYWRlci5yZWFkSW50KDgpLHRoaXMuY2VudHJhbERpck9mZnNldD10aGlzLnJlYWRlci5yZWFkSW50KDgpLHRoaXMuemlwNjRFeHRlbnNpYmxlRGF0YT17fTtmb3IodmFyIGEsYixjLGQ9dGhpcy56aXA2NEVuZE9mQ2VudHJhbFNpemUtNDQsZT0wO2U8ZDspYT10aGlzLnJlYWRlci5yZWFkSW50KDIpLGI9dGhpcy5yZWFkZXIucmVhZEludCg0KSxjPXRoaXMucmVhZGVyLnJlYWREYXRhKGIpLHRoaXMuemlwNjRFeHRlbnNpYmxlRGF0YVthXT17aWQ6YSxsZW5ndGg6Yix2YWx1ZTpjfX0scmVhZEJsb2NrWmlwNjRFbmRPZkNlbnRyYWxMb2NhdG9yOmZ1bmN0aW9uKCl7aWYodGhpcy5kaXNrV2l0aFppcDY0Q2VudHJhbERpclN0YXJ0PXRoaXMucmVhZGVyLnJlYWRJbnQoNCksdGhpcy5yZWxhdGl2ZU9mZnNldEVuZE9mWmlwNjRDZW50cmFsRGlyPXRoaXMucmVhZGVyLnJlYWRJbnQoOCksdGhpcy5kaXNrc0NvdW50PXRoaXMucmVhZGVyLnJlYWRJbnQoNCksdGhpcy5kaXNrc0NvdW50PjEpdGhyb3cgbmV3IEVycm9yKFwiTXVsdGktdm9sdW1lcyB6aXAgYXJlIG5vdCBzdXBwb3J0ZWRcIil9LHJlYWRMb2NhbEZpbGVzOmZ1bmN0aW9uKCl7dmFyIGEsYjtmb3IoYT0wO2E8dGhpcy5maWxlcy5sZW5ndGg7YSsrKWI9dGhpcy5maWxlc1thXSx0aGlzLnJlYWRlci5zZXRJbmRleChiLmxvY2FsSGVhZGVyT2Zmc2V0KSx0aGlzLmNoZWNrU2lnbmF0dXJlKGcuTE9DQUxfRklMRV9IRUFERVIpLGIucmVhZExvY2FsUGFydCh0aGlzLnJlYWRlciksYi5oYW5kbGVVVEY4KCksYi5wcm9jZXNzQXR0cmlidXRlcygpfSxyZWFkQ2VudHJhbERpcjpmdW5jdGlvbigpe3ZhciBhO2Zvcih0aGlzLnJlYWRlci5zZXRJbmRleCh0aGlzLmNlbnRyYWxEaXJPZmZzZXQpO3RoaXMucmVhZGVyLnJlYWRBbmRDaGVja1NpZ25hdHVyZShnLkNFTlRSQUxfRklMRV9IRUFERVIpOylhPW5ldyBoKHt6aXA2NDp0aGlzLnppcDY0fSx0aGlzLmxvYWRPcHRpb25zKSxhLnJlYWRDZW50cmFsUGFydCh0aGlzLnJlYWRlciksdGhpcy5maWxlcy5wdXNoKGEpO2lmKHRoaXMuY2VudHJhbERpclJlY29yZHMhPT10aGlzLmZpbGVzLmxlbmd0aCYmMCE9PXRoaXMuY2VudHJhbERpclJlY29yZHMmJjA9PT10aGlzLmZpbGVzLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJDb3JydXB0ZWQgemlwIG9yIGJ1ZzogZXhwZWN0ZWQgXCIrdGhpcy5jZW50cmFsRGlyUmVjb3JkcytcIiByZWNvcmRzIGluIGNlbnRyYWwgZGlyLCBnb3QgXCIrdGhpcy5maWxlcy5sZW5ndGgpfSxyZWFkRW5kT2ZDZW50cmFsOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWFkZXIubGFzdEluZGV4T2ZTaWduYXR1cmUoZy5DRU5UUkFMX0RJUkVDVE9SWV9FTkQpO2lmKGE8MCl7dmFyIGI9IXRoaXMuaXNTaWduYXR1cmUoMCxnLkxPQ0FMX0ZJTEVfSEVBREVSKTt0aHJvdyBiP25ldyBFcnJvcihcIkNhbid0IGZpbmQgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5IDogaXMgdGhpcyBhIHppcCBmaWxlID8gSWYgaXQgaXMsIHNlZSBodHRwczovL3N0dWsuZ2l0aHViLmlvL2pzemlwL2RvY3VtZW50YXRpb24vaG93dG8vcmVhZF96aXAuaHRtbFwiKTpuZXcgRXJyb3IoXCJDb3JydXB0ZWQgemlwOiBjYW4ndCBmaW5kIGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeVwiKX10aGlzLnJlYWRlci5zZXRJbmRleChhKTt2YXIgYz1hO2lmKHRoaXMuY2hlY2tTaWduYXR1cmUoZy5DRU5UUkFMX0RJUkVDVE9SWV9FTkQpLHRoaXMucmVhZEJsb2NrRW5kT2ZDZW50cmFsKCksdGhpcy5kaXNrTnVtYmVyPT09Zi5NQVhfVkFMVUVfMTZCSVRTfHx0aGlzLmRpc2tXaXRoQ2VudHJhbERpclN0YXJ0PT09Zi5NQVhfVkFMVUVfMTZCSVRTfHx0aGlzLmNlbnRyYWxEaXJSZWNvcmRzT25UaGlzRGlzaz09PWYuTUFYX1ZBTFVFXzE2QklUU3x8dGhpcy5jZW50cmFsRGlyUmVjb3Jkcz09PWYuTUFYX1ZBTFVFXzE2QklUU3x8dGhpcy5jZW50cmFsRGlyU2l6ZT09PWYuTUFYX1ZBTFVFXzMyQklUU3x8dGhpcy5jZW50cmFsRGlyT2Zmc2V0PT09Zi5NQVhfVkFMVUVfMzJCSVRTKXtpZih0aGlzLnppcDY0PSEwLGE9dGhpcy5yZWFkZXIubGFzdEluZGV4T2ZTaWduYXR1cmUoZy5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9MT0NBVE9SKSxhPDApdGhyb3cgbmV3IEVycm9yKFwiQ29ycnVwdGVkIHppcDogY2FuJ3QgZmluZCB0aGUgWklQNjQgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5IGxvY2F0b3JcIik7aWYodGhpcy5yZWFkZXIuc2V0SW5kZXgoYSksdGhpcy5jaGVja1NpZ25hdHVyZShnLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0xPQ0FUT1IpLHRoaXMucmVhZEJsb2NrWmlwNjRFbmRPZkNlbnRyYWxMb2NhdG9yKCksIXRoaXMuaXNTaWduYXR1cmUodGhpcy5yZWxhdGl2ZU9mZnNldEVuZE9mWmlwNjRDZW50cmFsRGlyLGcuWklQNjRfQ0VOVFJBTF9ESVJFQ1RPUllfRU5EKSYmKHRoaXMucmVsYXRpdmVPZmZzZXRFbmRPZlppcDY0Q2VudHJhbERpcj10aGlzLnJlYWRlci5sYXN0SW5kZXhPZlNpZ25hdHVyZShnLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0VORCksdGhpcy5yZWxhdGl2ZU9mZnNldEVuZE9mWmlwNjRDZW50cmFsRGlyPDApKXRocm93IG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXA6IGNhbid0IGZpbmQgdGhlIFpJUDY0IGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeVwiKTt0aGlzLnJlYWRlci5zZXRJbmRleCh0aGlzLnJlbGF0aXZlT2Zmc2V0RW5kT2ZaaXA2NENlbnRyYWxEaXIpLHRoaXMuY2hlY2tTaWduYXR1cmUoZy5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9FTkQpLHRoaXMucmVhZEJsb2NrWmlwNjRFbmRPZkNlbnRyYWwoKX12YXIgZD10aGlzLmNlbnRyYWxEaXJPZmZzZXQrdGhpcy5jZW50cmFsRGlyU2l6ZTt0aGlzLnppcDY0JiYoZCs9MjAsZCs9MTIrdGhpcy56aXA2NEVuZE9mQ2VudHJhbFNpemUpO3ZhciBlPWMtZDtpZihlPjApdGhpcy5pc1NpZ25hdHVyZShjLGcuQ0VOVFJBTF9GSUxFX0hFQURFUil8fCh0aGlzLnJlYWRlci56ZXJvPWUpO2Vsc2UgaWYoZTwwKXRocm93IG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXA6IG1pc3NpbmcgXCIrTWF0aC5hYnMoZSkrXCIgYnl0ZXMuXCIpfSxwcmVwYXJlUmVhZGVyOmZ1bmN0aW9uKGEpe3RoaXMucmVhZGVyPWUoYSl9LGxvYWQ6ZnVuY3Rpb24oYSl7dGhpcy5wcmVwYXJlUmVhZGVyKGEpLHRoaXMucmVhZEVuZE9mQ2VudHJhbCgpLHRoaXMucmVhZENlbnRyYWxEaXIoKSx0aGlzLnJlYWRMb2NhbEZpbGVzKCl9fSxiLmV4cG9ydHM9ZH0se1wiLi9yZWFkZXIvcmVhZGVyRm9yXCI6MjIsXCIuL3NpZ25hdHVyZVwiOjIzLFwiLi9zdXBwb3J0XCI6MzAsXCIuL3V0ZjhcIjozMSxcIi4vdXRpbHNcIjozMixcIi4vemlwRW50cnlcIjozNH1dLDM0OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhLGIpe3RoaXMub3B0aW9ucz1hLHRoaXMubG9hZE9wdGlvbnM9Yn12YXIgZT1hKFwiLi9yZWFkZXIvcmVhZGVyRm9yXCIpLGY9YShcIi4vdXRpbHNcIiksZz1hKFwiLi9jb21wcmVzc2VkT2JqZWN0XCIpLGg9YShcIi4vY3JjMzJcIiksaT1hKFwiLi91dGY4XCIpLGo9YShcIi4vY29tcHJlc3Npb25zXCIpLGs9YShcIi4vc3VwcG9ydFwiKSxsPTAsbT0zLG49ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGopaWYoai5oYXNPd25Qcm9wZXJ0eShiKSYmaltiXS5tYWdpYz09PWEpcmV0dXJuIGpbYl07cmV0dXJuIG51bGx9O2QucHJvdG90eXBlPXtpc0VuY3J5cHRlZDpmdW5jdGlvbigpe3JldHVybiAxPT09KDEmdGhpcy5iaXRGbGFnKX0sdXNlVVRGODpmdW5jdGlvbigpe3JldHVybiAyMDQ4PT09KDIwNDgmdGhpcy5iaXRGbGFnKX0scmVhZExvY2FsUGFydDpmdW5jdGlvbihhKXt2YXIgYixjO2lmKGEuc2tpcCgyMiksdGhpcy5maWxlTmFtZUxlbmd0aD1hLnJlYWRJbnQoMiksYz1hLnJlYWRJbnQoMiksdGhpcy5maWxlTmFtZT1hLnJlYWREYXRhKHRoaXMuZmlsZU5hbWVMZW5ndGgpLGEuc2tpcChjKSx0aGlzLmNvbXByZXNzZWRTaXplPT09LTF8fHRoaXMudW5jb21wcmVzc2VkU2l6ZT09PS0xKXRocm93IG5ldyBFcnJvcihcIkJ1ZyBvciBjb3JydXB0ZWQgemlwIDogZGlkbid0IGdldCBlbm91Z2ggaW5mb3JtYXRpb25zIGZyb20gdGhlIGNlbnRyYWwgZGlyZWN0b3J5IChjb21wcmVzc2VkU2l6ZSA9PT0gLTEgfHwgdW5jb21wcmVzc2VkU2l6ZSA9PT0gLTEpXCIpO2lmKGI9bih0aGlzLmNvbXByZXNzaW9uTWV0aG9kKSxudWxsPT09Yil0aHJvdyBuZXcgRXJyb3IoXCJDb3JydXB0ZWQgemlwIDogY29tcHJlc3Npb24gXCIrZi5wcmV0dHkodGhpcy5jb21wcmVzc2lvbk1ldGhvZCkrXCIgdW5rbm93biAoaW5uZXIgZmlsZSA6IFwiK2YudHJhbnNmb3JtVG8oXCJzdHJpbmdcIix0aGlzLmZpbGVOYW1lKStcIilcIik7dGhpcy5kZWNvbXByZXNzZWQ9bmV3IGcodGhpcy5jb21wcmVzc2VkU2l6ZSx0aGlzLnVuY29tcHJlc3NlZFNpemUsdGhpcy5jcmMzMixiLGEucmVhZERhdGEodGhpcy5jb21wcmVzc2VkU2l6ZSkpfSxyZWFkQ2VudHJhbFBhcnQ6ZnVuY3Rpb24oYSl7dGhpcy52ZXJzaW9uTWFkZUJ5PWEucmVhZEludCgyKSxhLnNraXAoMiksdGhpcy5iaXRGbGFnPWEucmVhZEludCgyKSx0aGlzLmNvbXByZXNzaW9uTWV0aG9kPWEucmVhZFN0cmluZygyKSx0aGlzLmRhdGU9YS5yZWFkRGF0ZSgpLHRoaXMuY3JjMzI9YS5yZWFkSW50KDQpLHRoaXMuY29tcHJlc3NlZFNpemU9YS5yZWFkSW50KDQpLHRoaXMudW5jb21wcmVzc2VkU2l6ZT1hLnJlYWRJbnQoNCk7dmFyIGI9YS5yZWFkSW50KDIpO2lmKHRoaXMuZXh0cmFGaWVsZHNMZW5ndGg9YS5yZWFkSW50KDIpLHRoaXMuZmlsZUNvbW1lbnRMZW5ndGg9YS5yZWFkSW50KDIpLHRoaXMuZGlza051bWJlclN0YXJ0PWEucmVhZEludCgyKSx0aGlzLmludGVybmFsRmlsZUF0dHJpYnV0ZXM9YS5yZWFkSW50KDIpLHRoaXMuZXh0ZXJuYWxGaWxlQXR0cmlidXRlcz1hLnJlYWRJbnQoNCksdGhpcy5sb2NhbEhlYWRlck9mZnNldD1hLnJlYWRJbnQoNCksdGhpcy5pc0VuY3J5cHRlZCgpKXRocm93IG5ldyBFcnJvcihcIkVuY3J5cHRlZCB6aXAgYXJlIG5vdCBzdXBwb3J0ZWRcIik7YS5za2lwKGIpLHRoaXMucmVhZEV4dHJhRmllbGRzKGEpLHRoaXMucGFyc2VaSVA2NEV4dHJhRmllbGQoYSksdGhpcy5maWxlQ29tbWVudD1hLnJlYWREYXRhKHRoaXMuZmlsZUNvbW1lbnRMZW5ndGgpfSxwcm9jZXNzQXR0cmlidXRlczpmdW5jdGlvbigpe3RoaXMudW5peFBlcm1pc3Npb25zPW51bGwsdGhpcy5kb3NQZXJtaXNzaW9ucz1udWxsO3ZhciBhPXRoaXMudmVyc2lvbk1hZGVCeT4+ODt0aGlzLmRpcj0hISgxNiZ0aGlzLmV4dGVybmFsRmlsZUF0dHJpYnV0ZXMpLGE9PT1sJiYodGhpcy5kb3NQZXJtaXNzaW9ucz02MyZ0aGlzLmV4dGVybmFsRmlsZUF0dHJpYnV0ZXMpLGE9PT1tJiYodGhpcy51bml4UGVybWlzc2lvbnM9dGhpcy5leHRlcm5hbEZpbGVBdHRyaWJ1dGVzPj4xNiY2NTUzNSksdGhpcy5kaXJ8fFwiL1wiIT09dGhpcy5maWxlTmFtZVN0ci5zbGljZSgtMSl8fCh0aGlzLmRpcj0hMCl9LHBhcnNlWklQNjRFeHRyYUZpZWxkOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZXh0cmFGaWVsZHNbMV0pe3ZhciBiPWUodGhpcy5leHRyYUZpZWxkc1sxXS52YWx1ZSk7dGhpcy51bmNvbXByZXNzZWRTaXplPT09Zi5NQVhfVkFMVUVfMzJCSVRTJiYodGhpcy51bmNvbXByZXNzZWRTaXplPWIucmVhZEludCg4KSksdGhpcy5jb21wcmVzc2VkU2l6ZT09PWYuTUFYX1ZBTFVFXzMyQklUUyYmKHRoaXMuY29tcHJlc3NlZFNpemU9Yi5yZWFkSW50KDgpKSx0aGlzLmxvY2FsSGVhZGVyT2Zmc2V0PT09Zi5NQVhfVkFMVUVfMzJCSVRTJiYodGhpcy5sb2NhbEhlYWRlck9mZnNldD1iLnJlYWRJbnQoOCkpLHRoaXMuZGlza051bWJlclN0YXJ0PT09Zi5NQVhfVkFMVUVfMzJCSVRTJiYodGhpcy5kaXNrTnVtYmVyU3RhcnQ9Yi5yZWFkSW50KDQpKX19LHJlYWRFeHRyYUZpZWxkczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT1hLmluZGV4K3RoaXMuZXh0cmFGaWVsZHNMZW5ndGg7Zm9yKHRoaXMuZXh0cmFGaWVsZHN8fCh0aGlzLmV4dHJhRmllbGRzPXt9KTthLmluZGV4PGU7KWI9YS5yZWFkSW50KDIpLGM9YS5yZWFkSW50KDIpLGQ9YS5yZWFkRGF0YShjKSx0aGlzLmV4dHJhRmllbGRzW2JdPXtpZDpiLGxlbmd0aDpjLHZhbHVlOmR9fSxoYW5kbGVVVEY4OmZ1bmN0aW9uKCl7dmFyIGE9ay51aW50OGFycmF5P1widWludDhhcnJheVwiOlwiYXJyYXlcIjtpZih0aGlzLnVzZVVURjgoKSl0aGlzLmZpbGVOYW1lU3RyPWkudXRmOGRlY29kZSh0aGlzLmZpbGVOYW1lKSx0aGlzLmZpbGVDb21tZW50U3RyPWkudXRmOGRlY29kZSh0aGlzLmZpbGVDb21tZW50KTtlbHNle3ZhciBiPXRoaXMuZmluZEV4dHJhRmllbGRVbmljb2RlUGF0aCgpO2lmKG51bGwhPT1iKXRoaXMuZmlsZU5hbWVTdHI9YjtlbHNle3ZhciBjPWYudHJhbnNmb3JtVG8oYSx0aGlzLmZpbGVOYW1lKTt0aGlzLmZpbGVOYW1lU3RyPXRoaXMubG9hZE9wdGlvbnMuZGVjb2RlRmlsZU5hbWUoYyl9dmFyIGQ9dGhpcy5maW5kRXh0cmFGaWVsZFVuaWNvZGVDb21tZW50KCk7aWYobnVsbCE9PWQpdGhpcy5maWxlQ29tbWVudFN0cj1kO2Vsc2V7dmFyIGU9Zi50cmFuc2Zvcm1UbyhhLHRoaXMuZmlsZUNvbW1lbnQpO3RoaXMuZmlsZUNvbW1lbnRTdHI9dGhpcy5sb2FkT3B0aW9ucy5kZWNvZGVGaWxlTmFtZShlKX19fSxmaW5kRXh0cmFGaWVsZFVuaWNvZGVQYXRoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5leHRyYUZpZWxkc1syODc4OV07aWYoYSl7dmFyIGI9ZShhLnZhbHVlKTtyZXR1cm4gMSE9PWIucmVhZEludCgxKT9udWxsOmgodGhpcy5maWxlTmFtZSkhPT1iLnJlYWRJbnQoNCk/bnVsbDppLnV0ZjhkZWNvZGUoYi5yZWFkRGF0YShhLmxlbmd0aC01KSl9cmV0dXJuIG51bGx9LGZpbmRFeHRyYUZpZWxkVW5pY29kZUNvbW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmV4dHJhRmllbGRzWzI1NDYxXTtpZihhKXt2YXIgYj1lKGEudmFsdWUpO3JldHVybiAxIT09Yi5yZWFkSW50KDEpP251bGw6aCh0aGlzLmZpbGVDb21tZW50KSE9PWIucmVhZEludCg0KT9udWxsOmkudXRmOGRlY29kZShiLnJlYWREYXRhKGEubGVuZ3RoLTUpKX1yZXR1cm4gbnVsbH19LGIuZXhwb3J0cz1kfSx7XCIuL2NvbXByZXNzZWRPYmplY3RcIjoyLFwiLi9jb21wcmVzc2lvbnNcIjozLFwiLi9jcmMzMlwiOjQsXCIuL3JlYWRlci9yZWFkZXJGb3JcIjoyMixcIi4vc3VwcG9ydFwiOjMwLFwiLi91dGY4XCI6MzEsXCIuL3V0aWxzXCI6MzJ9XSwzNTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO3ZhciBkPWEoXCIuL3N0cmVhbS9TdHJlYW1IZWxwZXJcIiksZT1hKFwiLi9zdHJlYW0vRGF0YVdvcmtlclwiKSxmPWEoXCIuL3V0ZjhcIiksZz1hKFwiLi9jb21wcmVzc2VkT2JqZWN0XCIpLGg9YShcIi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIiksaT1mdW5jdGlvbihhLGIsYyl7dGhpcy5uYW1lPWEsdGhpcy5kaXI9Yy5kaXIsdGhpcy5kYXRlPWMuZGF0ZSx0aGlzLmNvbW1lbnQ9Yy5jb21tZW50LHRoaXMudW5peFBlcm1pc3Npb25zPWMudW5peFBlcm1pc3Npb25zLHRoaXMuZG9zUGVybWlzc2lvbnM9Yy5kb3NQZXJtaXNzaW9ucyx0aGlzLl9kYXRhPWIsdGhpcy5fZGF0YUJpbmFyeT1jLmJpbmFyeSx0aGlzLm9wdGlvbnM9e2NvbXByZXNzaW9uOmMuY29tcHJlc3Npb24sY29tcHJlc3Npb25PcHRpb25zOmMuY29tcHJlc3Npb25PcHRpb25zfX07aS5wcm90b3R5cGU9e2ludGVybmFsU3RyZWFtOmZ1bmN0aW9uKGEpe3ZhciBiPW51bGwsYz1cInN0cmluZ1wiO3RyeXtpZighYSl0aHJvdyBuZXcgRXJyb3IoXCJObyBvdXRwdXQgdHlwZSBzcGVjaWZpZWQuXCIpO2M9YS50b0xvd2VyQ2FzZSgpO3ZhciBlPVwic3RyaW5nXCI9PT1jfHxcInRleHRcIj09PWM7XCJiaW5hcnlzdHJpbmdcIiE9PWMmJlwidGV4dFwiIT09Y3x8KGM9XCJzdHJpbmdcIiksYj10aGlzLl9kZWNvbXByZXNzV29ya2VyKCk7dmFyIGc9IXRoaXMuX2RhdGFCaW5hcnk7ZyYmIWUmJihiPWIucGlwZShuZXcgZi5VdGY4RW5jb2RlV29ya2VyKSksIWcmJmUmJihiPWIucGlwZShuZXcgZi5VdGY4RGVjb2RlV29ya2VyKSl9Y2F0Y2goaSl7Yj1uZXcgaChcImVycm9yXCIpLGIuZXJyb3IoaSl9cmV0dXJuIG5ldyBkKGIsYyxcIlwiKX0sYXN5bmM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbnRlcm5hbFN0cmVhbShhKS5hY2N1bXVsYXRlKGIpfSxub2RlU3RyZWFtOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW50ZXJuYWxTdHJlYW0oYXx8XCJub2RlYnVmZmVyXCIpLnRvTm9kZWpzU3RyZWFtKGIpfSxfY29tcHJlc3NXb3JrZXI6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLl9kYXRhIGluc3RhbmNlb2YgZyYmdGhpcy5fZGF0YS5jb21wcmVzc2lvbi5tYWdpYz09PWEubWFnaWMpcmV0dXJuIHRoaXMuX2RhdGEuZ2V0Q29tcHJlc3NlZFdvcmtlcigpO3ZhciBjPXRoaXMuX2RlY29tcHJlc3NXb3JrZXIoKTtyZXR1cm4gdGhpcy5fZGF0YUJpbmFyeXx8KGM9Yy5waXBlKG5ldyBmLlV0ZjhFbmNvZGVXb3JrZXIpKSxnLmNyZWF0ZVdvcmtlckZyb20oYyxhLGIpfSxfZGVjb21wcmVzc1dvcmtlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhIGluc3RhbmNlb2YgZz90aGlzLl9kYXRhLmdldENvbnRlbnRXb3JrZXIoKTp0aGlzLl9kYXRhIGluc3RhbmNlb2YgaD90aGlzLl9kYXRhOm5ldyBlKHRoaXMuX2RhdGEpfX07Zm9yKHZhciBqPVtcImFzVGV4dFwiLFwiYXNCaW5hcnlcIixcImFzTm9kZUJ1ZmZlclwiLFwiYXNVaW50OEFycmF5XCIsXCJhc0FycmF5QnVmZmVyXCJdLGs9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIG1ldGhvZCBoYXMgYmVlbiByZW1vdmVkIGluIEpTWmlwIDMuMCwgcGxlYXNlIGNoZWNrIHRoZSB1cGdyYWRlIGd1aWRlLlwiKX0sbD0wO2w8ai5sZW5ndGg7bCsrKWkucHJvdG90eXBlW2pbbF1dPWs7Yi5leHBvcnRzPWl9LHtcIi4vY29tcHJlc3NlZE9iamVjdFwiOjIsXCIuL3N0cmVhbS9EYXRhV29ya2VyXCI6MjcsXCIuL3N0cmVhbS9HZW5lcmljV29ya2VyXCI6MjgsXCIuL3N0cmVhbS9TdHJlYW1IZWxwZXJcIjoyOSxcIi4vdXRmOFwiOjMxfV0sMzY6W2Z1bmN0aW9uKGEsYixjKXthKFwiLi4vbW9kdWxlcy93ZWIuaW1tZWRpYXRlXCIpLGIuZXhwb3J0cz1hKFwiLi4vbW9kdWxlcy9fY29yZVwiKS5zZXRJbW1lZGlhdGV9LHtcIi4uL21vZHVsZXMvX2NvcmVcIjo0MCxcIi4uL21vZHVsZXMvd2ViLmltbWVkaWF0ZVwiOjU2fV0sMzc6W2Z1bmN0aW9uKGEsYixjKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgYSl0aHJvdyBUeXBlRXJyb3IoYStcIiBpcyBub3QgYSBmdW5jdGlvbiFcIik7cmV0dXJuIGF9fSx7fV0sMzg6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi9faXMtb2JqZWN0XCIpO2IuZXhwb3J0cz1mdW5jdGlvbihhKXtpZighZChhKSl0aHJvdyBUeXBlRXJyb3IoYStcIiBpcyBub3QgYW4gb2JqZWN0IVwiKTtyZXR1cm4gYX19LHtcIi4vX2lzLW9iamVjdFwiOjUxfV0sMzk6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD17fS50b1N0cmluZztiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7cmV0dXJuIGQuY2FsbChhKS5zbGljZSg4LC0xKX19LHt9XSw0MDpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWIuZXhwb3J0cz17dmVyc2lvbjpcIjIuMy4wXCJ9O1wibnVtYmVyXCI9PXR5cGVvZiBfX2UmJihfX2U9ZCl9LHt9XSw0MTpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuL19hLWZ1bmN0aW9uXCIpO2IuZXhwb3J0cz1mdW5jdGlvbihhLGIsYyl7aWYoZChhKSx2b2lkIDA9PT1iKXJldHVybiBhO3N3aXRjaChjKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBhLmNhbGwoYixjKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihjLGQpe3JldHVybiBhLmNhbGwoYixjLGQpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKGMsZCxlKXtyZXR1cm4gYS5jYWxsKGIsYyxkLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGFyZ3VtZW50cyl9fX0se1wiLi9fYS1mdW5jdGlvblwiOjM3fV0sNDI6W2Z1bmN0aW9uKGEsYixjKXtiLmV4cG9ydHM9IWEoXCIuL19mYWlsc1wiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0se1wiLi9fZmFpbHNcIjo0NX1dLDQzOltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4vX2lzLW9iamVjdFwiKSxlPWEoXCIuL19nbG9iYWxcIikuZG9jdW1lbnQsZj1kKGUpJiZkKGUuY3JlYXRlRWxlbWVudCk7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe3JldHVybiBmP2UuY3JlYXRlRWxlbWVudChhKTp7fX19LHtcIi4vX2dsb2JhbFwiOjQ2LFwiLi9faXMtb2JqZWN0XCI6NTF9XSw0NDpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuL19nbG9iYWxcIiksZT1hKFwiLi9fY29yZVwiKSxmPWEoXCIuL19jdHhcIiksZz1hKFwiLi9faGlkZVwiKSxoPVwicHJvdG90eXBlXCIsaT1mdW5jdGlvbihhLGIsYyl7dmFyIGosayxsLG09YSZpLkYsbj1hJmkuRyxvPWEmaS5TLHA9YSZpLlAscT1hJmkuQixyPWEmaS5XLHM9bj9lOmVbYl18fChlW2JdPXt9KSx0PXNbaF0sdT1uP2Q6bz9kW2JdOihkW2JdfHx7fSlbaF07biYmKGM9Yik7Zm9yKGogaW4gYylrPSFtJiZ1JiZ2b2lkIDAhPT11W2pdLGsmJmogaW4gc3x8KGw9az91W2pdOmNbal0sc1tqXT1uJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB1W2pdP2Nbal06cSYmaz9mKGwsZCk6ciYmdVtqXT09bD9mdW5jdGlvbihhKXt2YXIgYj1mdW5jdGlvbihiLGMsZCl7aWYodGhpcyBpbnN0YW5jZW9mIGEpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG5ldyBhO2Nhc2UgMTpyZXR1cm4gbmV3IGEoYik7Y2FzZSAyOnJldHVybiBuZXcgYShiLGMpfXJldHVybiBuZXcgYShiLGMsZCl9cmV0dXJuIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtyZXR1cm4gYltoXT1hW2hdLGJ9KGwpOnAmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGw/ZihGdW5jdGlvbi5jYWxsLGwpOmwscCYmKChzLnZpcnR1YWx8fChzLnZpcnR1YWw9e30pKVtqXT1sLGEmaS5SJiZ0JiYhdFtqXSYmZyh0LGosbCkpKX07aS5GPTEsaS5HPTIsaS5TPTQsaS5QPTgsaS5CPTE2LGkuVz0zMixpLlU9NjQsaS5SPTEyOCxiLmV4cG9ydHM9aX0se1wiLi9fY29yZVwiOjQwLFwiLi9fY3R4XCI6NDEsXCIuL19nbG9iYWxcIjo0NixcIi4vX2hpZGVcIjo0N31dLDQ1OltmdW5jdGlvbihhLGIsYyl7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4hIWEoKX1jYXRjaChiKXtyZXR1cm4hMH19fSx7fV0sNDY6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1iLmV4cG9ydHM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XCJudW1iZXJcIj09dHlwZW9mIF9fZyYmKF9fZz1kKX0se31dLDQ3OltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4vX29iamVjdC1kcFwiKSxlPWEoXCIuL19wcm9wZXJ0eS1kZXNjXCIpO2IuZXhwb3J0cz1hKFwiLi9fZGVzY3JpcHRvcnNcIik/ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBkLmYoYSxiLGUoMSxjKSl9OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYVtiXT1jLGF9fSx7XCIuL19kZXNjcmlwdG9yc1wiOjQyLFwiLi9fb2JqZWN0LWRwXCI6NTIsXCIuL19wcm9wZXJ0eS1kZXNjXCI6NTN9XSw0ODpbZnVuY3Rpb24oYSxiLGMpe2IuZXhwb3J0cz1hKFwiLi9fZ2xvYmFsXCIpLmRvY3VtZW50JiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9LHtcIi4vX2dsb2JhbFwiOjQ2fV0sNDk6W2Z1bmN0aW9uKGEsYixjKXtiLmV4cG9ydHM9IWEoXCIuL19kZXNjcmlwdG9yc1wiKSYmIWEoXCIuL19mYWlsc1wiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoYShcIi4vX2RvbS1jcmVhdGVcIikoXCJkaXZcIiksXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0se1wiLi9fZGVzY3JpcHRvcnNcIjo0MixcIi4vX2RvbS1jcmVhdGVcIjo0MyxcIi4vX2ZhaWxzXCI6NDV9XSw1MDpbZnVuY3Rpb24oYSxiLGMpe2IuZXhwb3J0cz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dm9pZCAwPT09Yztzd2l0Y2goYi5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gZD9hKCk6YS5jYWxsKGMpO2Nhc2UgMTpyZXR1cm4gZD9hKGJbMF0pOmEuY2FsbChjLGJbMF0pO2Nhc2UgMjpyZXR1cm4gZD9hKGJbMF0sYlsxXSk6YS5jYWxsKGMsYlswXSxiWzFdKTtjYXNlIDM6cmV0dXJuIGQ/YShiWzBdLGJbMV0sYlsyXSk6YS5jYWxsKGMsYlswXSxiWzFdLGJbMl0pO2Nhc2UgNDpyZXR1cm4gZD9hKGJbMF0sYlsxXSxiWzJdLGJbM10pOmEuY2FsbChjLGJbMF0sYlsxXSxiWzJdLGJbM10pfXJldHVybiBhLmFwcGx5KGMsYil9fSx7fV0sNTE6W2Z1bmN0aW9uKGEsYixjKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGE/bnVsbCE9PWE6XCJmdW5jdGlvblwiPT10eXBlb2YgYX19LHt9XSw1MjpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuL19hbi1vYmplY3RcIiksZT1hKFwiLi9faWU4LWRvbS1kZWZpbmVcIiksZj1hKFwiLi9fdG8tcHJpbWl0aXZlXCIpLGc9T2JqZWN0LmRlZmluZVByb3BlcnR5O2MuZj1hKFwiLi9fZGVzY3JpcHRvcnNcIik/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKGEsYixjKXtpZihkKGEpLGI9ZihiLCEwKSxkKGMpLGUpdHJ5e3JldHVybiBnKGEsYixjKX1jYXRjaChoKXt9aWYoXCJnZXRcImluIGN8fFwic2V0XCJpbiBjKXRocm93IFR5cGVFcnJvcihcIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIVwiKTtyZXR1cm5cInZhbHVlXCJpbiBjJiYoYVtiXT1jLnZhbHVlKSxhfX0se1wiLi9fYW4tb2JqZWN0XCI6MzgsXCIuL19kZXNjcmlwdG9yc1wiOjQyLFwiLi9faWU4LWRvbS1kZWZpbmVcIjo0OSxcIi4vX3RvLXByaW1pdGl2ZVwiOjU1fV0sNTM6W2Z1bmN0aW9uKGEsYixjKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiKXtyZXR1cm57ZW51bWVyYWJsZTohKDEmYSksY29uZmlndXJhYmxlOiEoMiZhKSx3cml0YWJsZTohKDQmYSksdmFsdWU6Yn19fSx7fV0sNTQ6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZz1hKFwiLi9fY3R4XCIpLGg9YShcIi4vX2ludm9rZVwiKSxpPWEoXCIuL19odG1sXCIpLGo9YShcIi4vX2RvbS1jcmVhdGVcIiksaz1hKFwiLi9fZ2xvYmFsXCIpLGw9ay5wcm9jZXNzLG09ay5zZXRJbW1lZGlhdGUsbj1rLmNsZWFySW1tZWRpYXRlLG89ay5NZXNzYWdlQ2hhbm5lbCxwPTAscT17fSxyPVwib25yZWFkeXN0YXRlY2hhbmdlXCIscz1mdW5jdGlvbigpe3ZhciBhPSt0aGlzO2lmKHEuaGFzT3duUHJvcGVydHkoYSkpe3ZhciBiPXFbYV07ZGVsZXRlIHFbYV0sYigpfX0sdD1mdW5jdGlvbihhKXtzLmNhbGwoYS5kYXRhKX07bSYmbnx8KG09ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MTthcmd1bWVudHMubGVuZ3RoPmM7KWIucHVzaChhcmd1bWVudHNbYysrXSk7cmV0dXJuIHFbKytwXT1mdW5jdGlvbigpe2goXCJmdW5jdGlvblwiPT10eXBlb2YgYT9hOkZ1bmN0aW9uKGEpLGIpfSxkKHApLHB9LG49ZnVuY3Rpb24oYSl7ZGVsZXRlIHFbYV19LFwicHJvY2Vzc1wiPT1hKFwiLi9fY29mXCIpKGwpP2Q9ZnVuY3Rpb24oYSl7bC5uZXh0VGljayhnKHMsYSwxKSl9Om8/KGU9bmV3IG8sZj1lLnBvcnQyLGUucG9ydDEub25tZXNzYWdlPXQsZD1nKGYucG9zdE1lc3NhZ2UsZiwxKSk6ay5hZGRFdmVudExpc3RlbmVyJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWsuaW1wb3J0U2NyaXB0cz8oZD1mdW5jdGlvbihhKXtrLnBvc3RNZXNzYWdlKGErXCJcIixcIipcIil9LGsuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIix0LCExKSk6ZD1yIGluIGooXCJzY3JpcHRcIik/ZnVuY3Rpb24oYSl7aS5hcHBlbmRDaGlsZChqKFwic2NyaXB0XCIpKVtyXT1mdW5jdGlvbigpe2kucmVtb3ZlQ2hpbGQodGhpcykscy5jYWxsKGEpfX06ZnVuY3Rpb24oYSl7c2V0VGltZW91dChnKHMsYSwxKSwwKX0pLGIuZXhwb3J0cz17c2V0Om0sY2xlYXI6bn19LHtcIi4vX2NvZlwiOjM5LFwiLi9fY3R4XCI6NDEsXCIuL19kb20tY3JlYXRlXCI6NDMsXCIuL19nbG9iYWxcIjo0NixcIi4vX2h0bWxcIjo0OCxcIi4vX2ludm9rZVwiOjUwfV0sNTU6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi9faXMtb2JqZWN0XCIpO2IuZXhwb3J0cz1mdW5jdGlvbihhLGIpe2lmKCFkKGEpKXJldHVybiBhO3ZhciBjLGU7aWYoYiYmXCJmdW5jdGlvblwiPT10eXBlb2YoYz1hLnRvU3RyaW5nKSYmIWQoZT1jLmNhbGwoYSkpKXJldHVybiBlO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mKGM9YS52YWx1ZU9mKSYmIWQoZT1jLmNhbGwoYSkpKXJldHVybiBlO2lmKCFiJiZcImZ1bmN0aW9uXCI9PXR5cGVvZihjPWEudG9TdHJpbmcpJiYhZChlPWMuY2FsbChhKSkpcmV0dXJuIGU7dGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpfX0se1wiLi9faXMtb2JqZWN0XCI6NTF9XSw1NjpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuL19leHBvcnRcIiksZT1hKFwiLi9fdGFza1wiKTtkKGQuRytkLkIse3NldEltbWVkaWF0ZTplLnNldCxjbGVhckltbWVkaWF0ZTplLmNsZWFyfSl9LHtcIi4vX2V4cG9ydFwiOjQ0LFwiLi9fdGFza1wiOjU0fV0sNTc6W2Z1bmN0aW9uKGEsYixjKXsoZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYygpe2s9ITA7Zm9yKHZhciBhLGIsYz1sLmxlbmd0aDtjOyl7Zm9yKGI9bCxsPVtdLGE9LTE7KythPGM7KWJbYV0oKTtjPWwubGVuZ3RofWs9ITF9ZnVuY3Rpb24gZChhKXsxIT09bC5wdXNoKGEpfHxrfHxlKCl9dmFyIGUsZj1hLk11dGF0aW9uT2JzZXJ2ZXJ8fGEuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtpZihmKXt2YXIgZz0wLGg9bmV3IGYoYyksaT1hLmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO2gub2JzZXJ2ZShpLHtjaGFyYWN0ZXJEYXRhOiEwfSksZT1mdW5jdGlvbigpe2kuZGF0YT1nPSsrZyUyfX1lbHNlIGlmKGEuc2V0SW1tZWRpYXRlfHxcInVuZGVmaW5lZFwiPT10eXBlb2YgYS5NZXNzYWdlQ2hhbm5lbCllPVwiZG9jdW1lbnRcImluIGEmJlwib25yZWFkeXN0YXRlY2hhbmdlXCJpbiBhLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik/ZnVuY3Rpb24oKXt2YXIgYj1hLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7Yi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtjKCksYi5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfSxhLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChiKX06ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGMsMCl9O2Vsc2V7dmFyIGo9bmV3IGEuTWVzc2FnZUNoYW5uZWw7ai5wb3J0MS5vbm1lc3NhZ2U9YyxlPWZ1bmN0aW9uKCl7ai5wb3J0Mi5wb3N0TWVzc2FnZSgwKX19dmFyIGssbD1bXTtiLmV4cG9ydHM9ZH0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se31dLDU4OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZCgpe31mdW5jdGlvbiBlKGEpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcInJlc29sdmVyIG11c3QgYmUgYSBmdW5jdGlvblwiKTt0aGlzLnN0YXRlPXMsdGhpcy5xdWV1ZT1bXSx0aGlzLm91dGNvbWU9dm9pZCAwLGEhPT1kJiZpKHRoaXMsYSl9ZnVuY3Rpb24gZihhLGIsYyl7dGhpcy5wcm9taXNlPWEsXCJmdW5jdGlvblwiPT10eXBlb2YgYiYmKHRoaXMub25GdWxmaWxsZWQ9Yix0aGlzLmNhbGxGdWxmaWxsZWQ9dGhpcy5vdGhlckNhbGxGdWxmaWxsZWQpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGMmJih0aGlzLm9uUmVqZWN0ZWQ9Yyx0aGlzLmNhbGxSZWplY3RlZD10aGlzLm90aGVyQ2FsbFJlamVjdGVkKX1mdW5jdGlvbiBnKGEsYixjKXtvKGZ1bmN0aW9uKCl7dmFyIGQ7dHJ5e2Q9YihjKX1jYXRjaChlKXtyZXR1cm4gcC5yZWplY3QoYSxlKX1kPT09YT9wLnJlamVjdChhLG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVzb2x2ZSBwcm9taXNlIHdpdGggaXRzZWxmXCIpKTpwLnJlc29sdmUoYSxkKX0pfWZ1bmN0aW9uIGgoYSl7dmFyIGI9YSYmYS50aGVuO2lmKGEmJihcIm9iamVjdFwiPT10eXBlb2YgYXx8XCJmdW5jdGlvblwiPT10eXBlb2YgYSkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGIpcmV0dXJuIGZ1bmN0aW9uKCl7Yi5hcHBseShhLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIGkoYSxiKXtmdW5jdGlvbiBjKGIpe2Z8fChmPSEwLHAucmVqZWN0KGEsYikpfWZ1bmN0aW9uIGQoYil7Znx8KGY9ITAscC5yZXNvbHZlKGEsYikpfWZ1bmN0aW9uIGUoKXtiKGQsYyl9dmFyIGY9ITEsZz1qKGUpO1wiZXJyb3JcIj09PWcuc3RhdHVzJiZjKGcudmFsdWUpfWZ1bmN0aW9uIGooYSxiKXt2YXIgYz17fTt0cnl7Yy52YWx1ZT1hKGIpLGMuc3RhdHVzPVwic3VjY2Vzc1wifWNhdGNoKGQpe2Muc3RhdHVzPVwiZXJyb3JcIixjLnZhbHVlPWR9cmV0dXJuIGN9ZnVuY3Rpb24gayhhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIHRoaXM/YTpwLnJlc29sdmUobmV3IHRoaXMoZCksYSl9ZnVuY3Rpb24gbChhKXt2YXIgYj1uZXcgdGhpcyhkKTtyZXR1cm4gcC5yZWplY3QoYixhKX1mdW5jdGlvbiBtKGEpe2Z1bmN0aW9uIGIoYSxiKXtmdW5jdGlvbiBkKGEpe2dbYl09YSwrK2ghPT1lfHxmfHwoZj0hMCxwLnJlc29sdmUoaixnKSl9Yy5yZXNvbHZlKGEpLnRoZW4oZCxmdW5jdGlvbihhKXtmfHwoZj0hMCxwLnJlamVjdChqLGEpKX0pfXZhciBjPXRoaXM7aWYoXCJbb2JqZWN0IEFycmF5XVwiIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpKXJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKFwibXVzdCBiZSBhbiBhcnJheVwiKSk7dmFyIGU9YS5sZW5ndGgsZj0hMTtpZighZSlyZXR1cm4gdGhpcy5yZXNvbHZlKFtdKTtmb3IodmFyIGc9bmV3IEFycmF5KGUpLGg9MCxpPS0xLGo9bmV3IHRoaXMoZCk7KytpPGU7KWIoYVtpXSxpKTtyZXR1cm4gan1mdW5jdGlvbiBuKGEpe2Z1bmN0aW9uIGIoYSl7Yy5yZXNvbHZlKGEpLnRoZW4oZnVuY3Rpb24oYSl7Znx8KGY9ITAscC5yZXNvbHZlKGgsYSkpfSxmdW5jdGlvbihhKXtmfHwoZj0hMCxwLnJlamVjdChoLGEpKX0pfXZhciBjPXRoaXM7aWYoXCJbb2JqZWN0IEFycmF5XVwiIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpKXJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKFwibXVzdCBiZSBhbiBhcnJheVwiKSk7dmFyIGU9YS5sZW5ndGgsZj0hMTtpZighZSlyZXR1cm4gdGhpcy5yZXNvbHZlKFtdKTtmb3IodmFyIGc9LTEsaD1uZXcgdGhpcyhkKTsrK2c8ZTspYihhW2ddKTtyZXR1cm4gaH12YXIgbz1hKFwiaW1tZWRpYXRlXCIpLHA9e30scT1bXCJSRUpFQ1RFRFwiXSxyPVtcIkZVTEZJTExFRFwiXSxzPVtcIlBFTkRJTkdcIl07Yi5leHBvcnRzPWUsZS5wcm90b3R5cGVbXCJjYXRjaFwiXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50aGVuKG51bGwsYSl9LGUucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24oYSxiKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBhJiZ0aGlzLnN0YXRlPT09cnx8XCJmdW5jdGlvblwiIT10eXBlb2YgYiYmdGhpcy5zdGF0ZT09PXEpcmV0dXJuIHRoaXM7dmFyIGM9bmV3IHRoaXMuY29uc3RydWN0b3IoZCk7aWYodGhpcy5zdGF0ZSE9PXMpe3ZhciBlPXRoaXMuc3RhdGU9PT1yP2E6YjtnKGMsZSx0aGlzLm91dGNvbWUpfWVsc2UgdGhpcy5xdWV1ZS5wdXNoKG5ldyBmKGMsYSxiKSk7cmV0dXJuIGN9LGYucHJvdG90eXBlLmNhbGxGdWxmaWxsZWQ9ZnVuY3Rpb24oYSl7cC5yZXNvbHZlKHRoaXMucHJvbWlzZSxhKX0sZi5wcm90b3R5cGUub3RoZXJDYWxsRnVsZmlsbGVkPWZ1bmN0aW9uKGEpe2codGhpcy5wcm9taXNlLHRoaXMub25GdWxmaWxsZWQsYSl9LGYucHJvdG90eXBlLmNhbGxSZWplY3RlZD1mdW5jdGlvbihhKXtwLnJlamVjdCh0aGlzLnByb21pc2UsYSl9LGYucHJvdG90eXBlLm90aGVyQ2FsbFJlamVjdGVkPWZ1bmN0aW9uKGEpe2codGhpcy5wcm9taXNlLHRoaXMub25SZWplY3RlZCxhKX0scC5yZXNvbHZlPWZ1bmN0aW9uKGEsYil7dmFyIGM9aihoLGIpO2lmKFwiZXJyb3JcIj09PWMuc3RhdHVzKXJldHVybiBwLnJlamVjdChhLGMudmFsdWUpO3ZhciBkPWMudmFsdWU7aWYoZClpKGEsZCk7ZWxzZXthLnN0YXRlPXIsYS5vdXRjb21lPWI7Zm9yKHZhciBlPS0xLGY9YS5xdWV1ZS5sZW5ndGg7KytlPGY7KWEucXVldWVbZV0uY2FsbEZ1bGZpbGxlZChiKX1yZXR1cm4gYX0scC5yZWplY3Q9ZnVuY3Rpb24oYSxiKXthLnN0YXRlPXEsYS5vdXRjb21lPWI7Zm9yKHZhciBjPS0xLGQ9YS5xdWV1ZS5sZW5ndGg7KytjPGQ7KWEucXVldWVbY10uY2FsbFJlamVjdGVkKGIpO3JldHVybiBhfSxlLnJlc29sdmU9ayxlLnJlamVjdD1sLGUuYWxsPW0sZS5yYWNlPW59LHtpbW1lZGlhdGU6NTd9XSw1OTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO3ZhciBkPWEoXCIuL2xpYi91dGlscy9jb21tb25cIikuYXNzaWduLGU9YShcIi4vbGliL2RlZmxhdGVcIiksZj1hKFwiLi9saWIvaW5mbGF0ZVwiKSxnPWEoXCIuL2xpYi96bGliL2NvbnN0YW50c1wiKSxoPXt9O2QoaCxlLGYsZyksYi5leHBvcnRzPWh9LHtcIi4vbGliL2RlZmxhdGVcIjo2MCxcIi4vbGliL2luZmxhdGVcIjo2MSxcIi4vbGliL3V0aWxzL2NvbW1vblwiOjYyLFwiLi9saWIvemxpYi9jb25zdGFudHNcIjo2NX1dLDYwOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXtpZighKHRoaXMgaW5zdGFuY2VvZiBkKSlyZXR1cm4gbmV3IGQoYSk7dGhpcy5vcHRpb25zPWkuYXNzaWduKHtsZXZlbDpzLG1ldGhvZDp1LGNodW5rU2l6ZToxNjM4NCx3aW5kb3dCaXRzOjE1LG1lbUxldmVsOjgsc3RyYXRlZ3k6dCx0bzpcIlwifSxhfHx7fSk7dmFyIGI9dGhpcy5vcHRpb25zO2IucmF3JiZiLndpbmRvd0JpdHM+MD9iLndpbmRvd0JpdHM9LWIud2luZG93Qml0czpiLmd6aXAmJmIud2luZG93Qml0cz4wJiZiLndpbmRvd0JpdHM8MTYmJihiLndpbmRvd0JpdHMrPTE2KSx0aGlzLmVycj0wLHRoaXMubXNnPVwiXCIsdGhpcy5lbmRlZD0hMSx0aGlzLmNodW5rcz1bXSx0aGlzLnN0cm09bmV3IGwsdGhpcy5zdHJtLmF2YWlsX291dD0wO3ZhciBjPWguZGVmbGF0ZUluaXQyKHRoaXMuc3RybSxiLmxldmVsLGIubWV0aG9kLGIud2luZG93Qml0cyxiLm1lbUxldmVsLGIuc3RyYXRlZ3kpO2lmKGMhPT1wKXRocm93IG5ldyBFcnJvcihrW2NdKTtpZihiLmhlYWRlciYmaC5kZWZsYXRlU2V0SGVhZGVyKHRoaXMuc3RybSxiLmhlYWRlciksYi5kaWN0aW9uYXJ5KXt2YXIgZTtpZihlPVwic3RyaW5nXCI9PXR5cGVvZiBiLmRpY3Rpb25hcnk/ai5zdHJpbmcyYnVmKGIuZGljdGlvbmFyeSk6XCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiPT09bS5jYWxsKGIuZGljdGlvbmFyeSk/bmV3IFVpbnQ4QXJyYXkoYi5kaWN0aW9uYXJ5KTpiLmRpY3Rpb25hcnksYz1oLmRlZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSxlKSxjIT09cCl0aHJvdyBuZXcgRXJyb3Ioa1tjXSk7dGhpcy5fZGljdF9zZXQ9ITB9fWZ1bmN0aW9uIGUoYSxiKXt2YXIgYz1uZXcgZChiKTtpZihjLnB1c2goYSwhMCksYy5lcnIpdGhyb3cgYy5tc2d8fGtbYy5lcnJdO3JldHVybiBjLnJlc3VsdH1mdW5jdGlvbiBmKGEsYil7cmV0dXJuIGI9Ynx8e30sYi5yYXc9ITAsZShhLGIpfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gYj1ifHx7fSxiLmd6aXA9ITAsZShhLGIpfXZhciBoPWEoXCIuL3psaWIvZGVmbGF0ZVwiKSxpPWEoXCIuL3V0aWxzL2NvbW1vblwiKSxqPWEoXCIuL3V0aWxzL3N0cmluZ3NcIiksaz1hKFwiLi96bGliL21lc3NhZ2VzXCIpLGw9YShcIi4vemxpYi96c3RyZWFtXCIpLG09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxuPTAsbz00LHA9MCxxPTEscj0yLHM9LTEsdD0wLHU9ODtkLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPXRoaXMuc3RybSxmPXRoaXMub3B0aW9ucy5jaHVua1NpemU7aWYodGhpcy5lbmRlZClyZXR1cm4hMTtkPWI9PT1+fmI/YjpiPT09ITA/bzpuLFwic3RyaW5nXCI9PXR5cGVvZiBhP2UuaW5wdXQ9ai5zdHJpbmcyYnVmKGEpOlwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIj09PW0uY2FsbChhKT9lLmlucHV0PW5ldyBVaW50OEFycmF5KGEpOmUuaW5wdXQ9YSxlLm5leHRfaW49MCxlLmF2YWlsX2luPWUuaW5wdXQubGVuZ3RoO2Rve2lmKDA9PT1lLmF2YWlsX291dCYmKGUub3V0cHV0PW5ldyBpLkJ1ZjgoZiksZS5uZXh0X291dD0wLGUuYXZhaWxfb3V0PWYpLGM9aC5kZWZsYXRlKGUsZCksYyE9PXEmJmMhPT1wKXJldHVybiB0aGlzLm9uRW5kKGMpLHRoaXMuZW5kZWQ9ITAsITE7MCE9PWUuYXZhaWxfb3V0JiYoMCE9PWUuYXZhaWxfaW58fGQhPT1vJiZkIT09cil8fChcInN0cmluZ1wiPT09dGhpcy5vcHRpb25zLnRvP3RoaXMub25EYXRhKGouYnVmMmJpbnN0cmluZyhpLnNocmlua0J1ZihlLm91dHB1dCxlLm5leHRfb3V0KSkpOnRoaXMub25EYXRhKGkuc2hyaW5rQnVmKGUub3V0cHV0LGUubmV4dF9vdXQpKSl9d2hpbGUoKGUuYXZhaWxfaW4+MHx8MD09PWUuYXZhaWxfb3V0KSYmYyE9PXEpO3JldHVybiBkPT09bz8oYz1oLmRlZmxhdGVFbmQodGhpcy5zdHJtKSx0aGlzLm9uRW5kKGMpLHRoaXMuZW5kZWQ9ITAsYz09PXApOmQhPT1yfHwodGhpcy5vbkVuZChwKSxlLmF2YWlsX291dD0wLCEwKX0sZC5wcm90b3R5cGUub25EYXRhPWZ1bmN0aW9uKGEpe3RoaXMuY2h1bmtzLnB1c2goYSl9LGQucHJvdG90eXBlLm9uRW5kPWZ1bmN0aW9uKGEpe2E9PT1wJiYoXCJzdHJpbmdcIj09PXRoaXMub3B0aW9ucy50bz90aGlzLnJlc3VsdD10aGlzLmNodW5rcy5qb2luKFwiXCIpOnRoaXMucmVzdWx0PWkuZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcykpLHRoaXMuY2h1bmtzPVtdLHRoaXMuZXJyPWEsdGhpcy5tc2c9dGhpcy5zdHJtLm1zZ30sYy5EZWZsYXRlPWQsYy5kZWZsYXRlPWUsYy5kZWZsYXRlUmF3PWYsYy5nemlwPWd9LHtcIi4vdXRpbHMvY29tbW9uXCI6NjIsXCIuL3V0aWxzL3N0cmluZ3NcIjo2MyxcIi4vemxpYi9kZWZsYXRlXCI6NjcsXCIuL3psaWIvbWVzc2FnZXNcIjo3MixcIi4vemxpYi96c3RyZWFtXCI6NzR9XSw2MTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7aWYoISh0aGlzIGluc3RhbmNlb2YgZCkpcmV0dXJuIG5ldyBkKGEpO3RoaXMub3B0aW9ucz1oLmFzc2lnbih7Y2h1bmtTaXplOjE2Mzg0LHdpbmRvd0JpdHM6MCx0bzpcIlwifSxhfHx7fSk7dmFyIGI9dGhpcy5vcHRpb25zO2IucmF3JiZiLndpbmRvd0JpdHM+PTAmJmIud2luZG93Qml0czwxNiYmKGIud2luZG93Qml0cz0tYi53aW5kb3dCaXRzLDA9PT1iLndpbmRvd0JpdHMmJihiLndpbmRvd0JpdHM9LTE1KSksIShiLndpbmRvd0JpdHM+PTAmJmIud2luZG93Qml0czwxNil8fGEmJmEud2luZG93Qml0c3x8KGIud2luZG93Qml0cys9MzIpLGIud2luZG93Qml0cz4xNSYmYi53aW5kb3dCaXRzPDQ4JiYwPT09KDE1JmIud2luZG93Qml0cykmJihiLndpbmRvd0JpdHN8PTE1KSx0aGlzLmVycj0wLHRoaXMubXNnPVwiXCIsdGhpcy5lbmRlZD0hMSx0aGlzLmNodW5rcz1bXSx0aGlzLnN0cm09bmV3IGwsdGhpcy5zdHJtLmF2YWlsX291dD0wO3ZhciBjPWcuaW5mbGF0ZUluaXQyKHRoaXMuc3RybSxiLndpbmRvd0JpdHMpO2lmKGMhPT1qLlpfT0spdGhyb3cgbmV3IEVycm9yKGtbY10pO3RoaXMuaGVhZGVyPW5ldyBtLGcuaW5mbGF0ZUdldEhlYWRlcih0aGlzLnN0cm0sdGhpcy5oZWFkZXIpfWZ1bmN0aW9uIGUoYSxiKXt2YXIgYz1uZXcgZChiKTtpZihjLnB1c2goYSwhMCksYy5lcnIpdGhyb3cgYy5tc2d8fGtbYy5lcnJdO3JldHVybiBjLnJlc3VsdH1mdW5jdGlvbiBmKGEsYil7cmV0dXJuIGI9Ynx8e30sYi5yYXc9ITAsZShhLGIpfXZhciBnPWEoXCIuL3psaWIvaW5mbGF0ZVwiKSxoPWEoXCIuL3V0aWxzL2NvbW1vblwiKSxpPWEoXCIuL3V0aWxzL3N0cmluZ3NcIiksaj1hKFwiLi96bGliL2NvbnN0YW50c1wiKSxrPWEoXCIuL3psaWIvbWVzc2FnZXNcIiksbD1hKFwiLi96bGliL3pzdHJlYW1cIiksbT1hKFwiLi96bGliL2d6aGVhZGVyXCIpLG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztkLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsayxsLG09dGhpcy5zdHJtLG89dGhpcy5vcHRpb25zLmNodW5rU2l6ZSxwPXRoaXMub3B0aW9ucy5kaWN0aW9uYXJ5LHE9ITE7aWYodGhpcy5lbmRlZClyZXR1cm4hMTtkPWI9PT1+fmI/YjpiPT09ITA/ai5aX0ZJTklTSDpqLlpfTk9fRkxVU0gsXCJzdHJpbmdcIj09dHlwZW9mIGE/bS5pbnB1dD1pLmJpbnN0cmluZzJidWYoYSk6XCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiPT09bi5jYWxsKGEpP20uaW5wdXQ9bmV3IFVpbnQ4QXJyYXkoYSk6bS5pbnB1dD1hLG0ubmV4dF9pbj0wLG0uYXZhaWxfaW49bS5pbnB1dC5sZW5ndGg7ZG97aWYoMD09PW0uYXZhaWxfb3V0JiYobS5vdXRwdXQ9bmV3IGguQnVmOChvKSxtLm5leHRfb3V0PTAsbS5hdmFpbF9vdXQ9byksYz1nLmluZmxhdGUobSxqLlpfTk9fRkxVU0gpLGM9PT1qLlpfTkVFRF9ESUNUJiZwJiYobD1cInN0cmluZ1wiPT10eXBlb2YgcD9pLnN0cmluZzJidWYocCk6XCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiPT09bi5jYWxsKHApP25ldyBVaW50OEFycmF5KHApOnAsYz1nLmluZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSxsKSksYz09PWouWl9CVUZfRVJST1ImJnE9PT0hMCYmKGM9ai5aX09LLHE9ITEpLGMhPT1qLlpfU1RSRUFNX0VORCYmYyE9PWouWl9PSylyZXR1cm4gdGhpcy5vbkVuZChjKSx0aGlzLmVuZGVkPSEwLCExO20ubmV4dF9vdXQmJigwIT09bS5hdmFpbF9vdXQmJmMhPT1qLlpfU1RSRUFNX0VORCYmKDAhPT1tLmF2YWlsX2lufHxkIT09ai5aX0ZJTklTSCYmZCE9PWouWl9TWU5DX0ZMVVNIKXx8KFwic3RyaW5nXCI9PT10aGlzLm9wdGlvbnMudG8/KGU9aS51dGY4Ym9yZGVyKG0ub3V0cHV0LG0ubmV4dF9vdXQpLGY9bS5uZXh0X291dC1lLGs9aS5idWYyc3RyaW5nKG0ub3V0cHV0LGUpLG0ubmV4dF9vdXQ9ZixtLmF2YWlsX291dD1vLWYsZiYmaC5hcnJheVNldChtLm91dHB1dCxtLm91dHB1dCxlLGYsMCksdGhpcy5vbkRhdGEoaykpOnRoaXMub25EYXRhKGguc2hyaW5rQnVmKG0ub3V0cHV0LG0ubmV4dF9vdXQpKSkpLDA9PT1tLmF2YWlsX2luJiYwPT09bS5hdmFpbF9vdXQmJihxPSEwKX13aGlsZSgobS5hdmFpbF9pbj4wfHwwPT09bS5hdmFpbF9vdXQpJiZjIT09ai5aX1NUUkVBTV9FTkQpO3JldHVybiBjPT09ai5aX1NUUkVBTV9FTkQmJihkPWouWl9GSU5JU0gpLGQ9PT1qLlpfRklOSVNIPyhjPWcuaW5mbGF0ZUVuZCh0aGlzLnN0cm0pLHRoaXMub25FbmQoYyksdGhpcy5lbmRlZD0hMCxjPT09ai5aX09LKTpkIT09ai5aX1NZTkNfRkxVU0h8fCh0aGlzLm9uRW5kKGouWl9PSyksbS5hdmFpbF9vdXQ9MCwhMCl9LGQucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbihhKXt0aGlzLmNodW5rcy5wdXNoKGEpfSxkLnByb3RvdHlwZS5vbkVuZD1mdW5jdGlvbihhKXthPT09ai5aX09LJiYoXCJzdHJpbmdcIj09PXRoaXMub3B0aW9ucy50bz90aGlzLnJlc3VsdD10aGlzLmNodW5rcy5qb2luKFwiXCIpOnRoaXMucmVzdWx0PWguZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcykpLHRoaXMuY2h1bmtzPVtdLHRoaXMuZXJyPWEsdGhpcy5tc2c9dGhpcy5zdHJtLm1zZ30sYy5JbmZsYXRlPWQsYy5pbmZsYXRlPWUsYy5pbmZsYXRlUmF3PWYsYy51bmd6aXA9ZX0se1wiLi91dGlscy9jb21tb25cIjo2MixcIi4vdXRpbHMvc3RyaW5nc1wiOjYzLFwiLi96bGliL2NvbnN0YW50c1wiOjY1LFwiLi96bGliL2d6aGVhZGVyXCI6NjgsXCIuL3psaWIvaW5mbGF0ZVwiOjcwLFwiLi96bGliL21lc3NhZ2VzXCI6NzIsXCIuL3psaWIvenN0cmVhbVwiOjc0fV0sNjI6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjt2YXIgZD1cInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQxNkFycmF5JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgSW50MzJBcnJheTtjLmFzc2lnbj1mdW5jdGlvbihhKXtmb3IodmFyIGI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2IubGVuZ3RoOyl7dmFyIGM9Yi5zaGlmdCgpO2lmKGMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBjKXRocm93IG5ldyBUeXBlRXJyb3IoYytcIm11c3QgYmUgbm9uLW9iamVjdFwiKTtmb3IodmFyIGQgaW4gYyljLmhhc093blByb3BlcnR5KGQpJiYoYVtkXT1jW2RdKX19cmV0dXJuIGF9LGMuc2hyaW5rQnVmPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubGVuZ3RoPT09Yj9hOmEuc3ViYXJyYXk/YS5zdWJhcnJheSgwLGIpOihhLmxlbmd0aD1iLGEpfTt2YXIgZT17YXJyYXlTZXQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXtpZihiLnN1YmFycmF5JiZhLnN1YmFycmF5KXJldHVybiB2b2lkIGEuc2V0KGIuc3ViYXJyYXkoYyxjK2QpLGUpO2Zvcih2YXIgZj0wO2Y8ZDtmKyspYVtlK2ZdPWJbYytmXX0sZmxhdHRlbkNodW5rczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGc7Zm9yKGQ9MCxiPTAsYz1hLmxlbmd0aDtiPGM7YisrKWQrPWFbYl0ubGVuZ3RoO2ZvcihnPW5ldyBVaW50OEFycmF5KGQpLGU9MCxiPTAsYz1hLmxlbmd0aDtiPGM7YisrKWY9YVtiXSxnLnNldChmLGUpLGUrPWYubGVuZ3RoO3JldHVybiBnfX0sZj17YXJyYXlTZXQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXtmb3IodmFyIGY9MDtmPGQ7ZisrKWFbZStmXT1iW2MrZl19LGZsYXR0ZW5DaHVua3M6ZnVuY3Rpb24oYSl7cmV0dXJuW10uY29uY2F0LmFwcGx5KFtdLGEpfX07Yy5zZXRUeXBlZD1mdW5jdGlvbihhKXthPyhjLkJ1Zjg9VWludDhBcnJheSxjLkJ1ZjE2PVVpbnQxNkFycmF5LGMuQnVmMzI9SW50MzJBcnJheSxjLmFzc2lnbihjLGUpKTooYy5CdWY4PUFycmF5LGMuQnVmMTY9QXJyYXksYy5CdWYzMj1BcnJheSxjLmFzc2lnbihjLGYpKX0sYy5zZXRUeXBlZChkKX0se31dLDYzOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhLGIpe2lmKGI8NjU1MzcmJihhLnN1YmFycmF5JiZnfHwhYS5zdWJhcnJheSYmZikpcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxlLnNocmlua0J1ZihhLGIpKTtmb3IodmFyIGM9XCJcIixkPTA7ZDxiO2QrKyljKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGFbZF0pO3JldHVybiBjfXZhciBlPWEoXCIuL2NvbW1vblwiKSxmPSEwLGc9ITA7dHJ5e1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxbMF0pfWNhdGNoKGgpe2Y9ITF9dHJ5e1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDhBcnJheSgxKSl9Y2F0Y2goaCl7Zz0hMX1mb3IodmFyIGk9bmV3IGUuQnVmOCgyNTYpLGo9MDtqPDI1NjtqKyspaVtqXT1qPj0yNTI/NjpqPj0yNDg/NTpqPj0yNDA/NDpqPj0yMjQ/MzpqPj0xOTI/MjoxO2lbMjU0XT1pWzI1NF09MSxjLnN0cmluZzJidWY9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGYsZyxoPWEubGVuZ3RoLGk9MDtmb3IoZj0wO2Y8aDtmKyspYz1hLmNoYXJDb2RlQXQoZiksNTUyOTY9PT0oNjQ1MTImYykmJmYrMTxoJiYoZD1hLmNoYXJDb2RlQXQoZisxKSw1NjMyMD09PSg2NDUxMiZkKSYmKGM9NjU1MzYrKGMtNTUyOTY8PDEwKSsoZC01NjMyMCksZisrKSksaSs9YzwxMjg/MTpjPDIwNDg/MjpjPDY1NTM2PzM6NDtmb3IoYj1uZXcgZS5CdWY4KGkpLGc9MCxmPTA7ZzxpO2YrKyljPWEuY2hhckNvZGVBdChmKSw1NTI5Nj09PSg2NDUxMiZjKSYmZisxPGgmJihkPWEuY2hhckNvZGVBdChmKzEpLDU2MzIwPT09KDY0NTEyJmQpJiYoYz02NTUzNisoYy01NTI5Njw8MTApKyhkLTU2MzIwKSxmKyspKSxjPDEyOD9iW2crK109YzpjPDIwNDg/KGJbZysrXT0xOTJ8Yz4+PjYsYltnKytdPTEyOHw2MyZjKTpjPDY1NTM2PyhiW2crK109MjI0fGM+Pj4xMixiW2crK109MTI4fGM+Pj42JjYzLGJbZysrXT0xMjh8NjMmYyk6KGJbZysrXT0yNDB8Yz4+PjE4LGJbZysrXT0xMjh8Yz4+PjEyJjYzLGJbZysrXT0xMjh8Yz4+PjYmNjMsYltnKytdPTEyOHw2MyZjKTtyZXR1cm4gYn0sYy5idWYyYmluc3RyaW5nPWZ1bmN0aW9uKGEpe3JldHVybiBkKGEsYS5sZW5ndGgpfSxjLmJpbnN0cmluZzJidWY9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW5ldyBlLkJ1ZjgoYS5sZW5ndGgpLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspYltjXT1hLmNoYXJDb2RlQXQoYyk7cmV0dXJuIGJ9LGMuYnVmMnN0cmluZz1mdW5jdGlvbihhLGIpe3ZhciBjLGUsZixnLGg9Ynx8YS5sZW5ndGgsaj1uZXcgQXJyYXkoMipoKTtmb3IoZT0wLGM9MDtjPGg7KWlmKGY9YVtjKytdLGY8MTI4KWpbZSsrXT1mO2Vsc2UgaWYoZz1pW2ZdLGc+NClqW2UrK109NjU1MzMsYys9Zy0xO2Vsc2V7Zm9yKGYmPTI9PT1nPzMxOjM9PT1nPzE1Ojc7Zz4xJiZjPGg7KWY9Zjw8Nnw2MyZhW2MrK10sZy0tO2c+MT9qW2UrK109NjU1MzM6Zjw2NTUzNj9qW2UrK109ZjooZi09NjU1MzYsaltlKytdPTU1Mjk2fGY+PjEwJjEwMjMsaltlKytdPTU2MzIwfDEwMjMmZil9cmV0dXJuIGQoaixlKX0sYy51dGY4Ym9yZGVyPWZ1bmN0aW9uKGEsYil7dmFyIGM7Zm9yKGI9Ynx8YS5sZW5ndGgsYj5hLmxlbmd0aCYmKGI9YS5sZW5ndGgpLGM9Yi0xO2M+PTAmJjEyOD09PSgxOTImYVtjXSk7KWMtLTtyZXR1cm4gYzwwP2I6MD09PWM/YjpjK2lbYVtjXV0+Yj9jOmJ9fSx7XCIuL2NvbW1vblwiOjYyfV0sNjQ6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEsYixjLGQpe2Zvcih2YXIgZT02NTUzNSZhfDAsZj1hPj4+MTYmNjU1MzV8MCxnPTA7MCE9PWM7KXtnPWM+MmUzPzJlMzpjLGMtPWc7ZG8gZT1lK2JbZCsrXXwwLGY9ZitlfDA7d2hpbGUoLS1nKTtlJT02NTUyMSxmJT02NTUyMX1yZXR1cm4gZXxmPDwxNnwwO1xufWIuZXhwb3J0cz1kfSx7fV0sNjU6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtiLmV4cG9ydHM9e1pfTk9fRkxVU0g6MCxaX1BBUlRJQUxfRkxVU0g6MSxaX1NZTkNfRkxVU0g6MixaX0ZVTExfRkxVU0g6MyxaX0ZJTklTSDo0LFpfQkxPQ0s6NSxaX1RSRUVTOjYsWl9PSzowLFpfU1RSRUFNX0VORDoxLFpfTkVFRF9ESUNUOjIsWl9FUlJOTzotMSxaX1NUUkVBTV9FUlJPUjotMixaX0RBVEFfRVJST1I6LTMsWl9CVUZfRVJST1I6LTUsWl9OT19DT01QUkVTU0lPTjowLFpfQkVTVF9TUEVFRDoxLFpfQkVTVF9DT01QUkVTU0lPTjo5LFpfREVGQVVMVF9DT01QUkVTU0lPTjotMSxaX0ZJTFRFUkVEOjEsWl9IVUZGTUFOX09OTFk6MixaX1JMRTozLFpfRklYRUQ6NCxaX0RFRkFVTFRfU1RSQVRFR1k6MCxaX0JJTkFSWTowLFpfVEVYVDoxLFpfVU5LTk9XTjoyLFpfREVGTEFURUQ6OH19LHt9XSw2NjpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoKXtmb3IodmFyIGEsYj1bXSxjPTA7YzwyNTY7YysrKXthPWM7Zm9yKHZhciBkPTA7ZDw4O2QrKylhPTEmYT8zOTg4MjkyMzg0XmE+Pj4xOmE+Pj4xO2JbY109YX1yZXR1cm4gYn1mdW5jdGlvbiBlKGEsYixjLGQpe3ZhciBlPWYsZz1kK2M7YV49LTE7Zm9yKHZhciBoPWQ7aDxnO2grKylhPWE+Pj44XmVbMjU1JihhXmJbaF0pXTtyZXR1cm4gYV4tMX12YXIgZj1kKCk7Yi5leHBvcnRzPWV9LHt9XSw2NzpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSxiKXtyZXR1cm4gYS5tc2c9SVtiXSxifWZ1bmN0aW9uIGUoYSl7cmV0dXJuKGE8PDEpLShhPjQ/OTowKX1mdW5jdGlvbiBmKGEpe2Zvcih2YXIgYj1hLmxlbmd0aDstLWI+PTA7KWFbYl09MH1mdW5jdGlvbiBnKGEpe3ZhciBiPWEuc3RhdGUsYz1iLnBlbmRpbmc7Yz5hLmF2YWlsX291dCYmKGM9YS5hdmFpbF9vdXQpLDAhPT1jJiYoRS5hcnJheVNldChhLm91dHB1dCxiLnBlbmRpbmdfYnVmLGIucGVuZGluZ19vdXQsYyxhLm5leHRfb3V0KSxhLm5leHRfb3V0Kz1jLGIucGVuZGluZ19vdXQrPWMsYS50b3RhbF9vdXQrPWMsYS5hdmFpbF9vdXQtPWMsYi5wZW5kaW5nLT1jLDA9PT1iLnBlbmRpbmcmJihiLnBlbmRpbmdfb3V0PTApKX1mdW5jdGlvbiBoKGEsYil7Ri5fdHJfZmx1c2hfYmxvY2soYSxhLmJsb2NrX3N0YXJ0Pj0wP2EuYmxvY2tfc3RhcnQ6LTEsYS5zdHJzdGFydC1hLmJsb2NrX3N0YXJ0LGIpLGEuYmxvY2tfc3RhcnQ9YS5zdHJzdGFydCxnKGEuc3RybSl9ZnVuY3Rpb24gaShhLGIpe2EucGVuZGluZ19idWZbYS5wZW5kaW5nKytdPWJ9ZnVuY3Rpb24gaihhLGIpe2EucGVuZGluZ19idWZbYS5wZW5kaW5nKytdPWI+Pj44JjI1NSxhLnBlbmRpbmdfYnVmW2EucGVuZGluZysrXT0yNTUmYn1mdW5jdGlvbiBrKGEsYixjLGQpe3ZhciBlPWEuYXZhaWxfaW47cmV0dXJuIGU+ZCYmKGU9ZCksMD09PWU/MDooYS5hdmFpbF9pbi09ZSxFLmFycmF5U2V0KGIsYS5pbnB1dCxhLm5leHRfaW4sZSxjKSwxPT09YS5zdGF0ZS53cmFwP2EuYWRsZXI9RyhhLmFkbGVyLGIsZSxjKToyPT09YS5zdGF0ZS53cmFwJiYoYS5hZGxlcj1IKGEuYWRsZXIsYixlLGMpKSxhLm5leHRfaW4rPWUsYS50b3RhbF9pbis9ZSxlKX1mdW5jdGlvbiBsKGEsYil7dmFyIGMsZCxlPWEubWF4X2NoYWluX2xlbmd0aCxmPWEuc3Ryc3RhcnQsZz1hLnByZXZfbGVuZ3RoLGg9YS5uaWNlX21hdGNoLGk9YS5zdHJzdGFydD5hLndfc2l6ZS1sYT9hLnN0cnN0YXJ0LShhLndfc2l6ZS1sYSk6MCxqPWEud2luZG93LGs9YS53X21hc2ssbD1hLnByZXYsbT1hLnN0cnN0YXJ0K2thLG49altmK2ctMV0sbz1qW2YrZ107YS5wcmV2X2xlbmd0aD49YS5nb29kX21hdGNoJiYoZT4+PTIpLGg+YS5sb29rYWhlYWQmJihoPWEubG9va2FoZWFkKTtkbyBpZihjPWIsaltjK2ddPT09byYmaltjK2ctMV09PT1uJiZqW2NdPT09altmXSYmalsrK2NdPT09altmKzFdKXtmKz0yLGMrKztkbzt3aGlsZShqWysrZl09PT1qWysrY10mJmpbKytmXT09PWpbKytjXSYmalsrK2ZdPT09alsrK2NdJiZqWysrZl09PT1qWysrY10mJmpbKytmXT09PWpbKytjXSYmalsrK2ZdPT09alsrK2NdJiZqWysrZl09PT1qWysrY10mJmpbKytmXT09PWpbKytjXSYmZjxtKTtpZihkPWthLShtLWYpLGY9bS1rYSxkPmcpe2lmKGEubWF0Y2hfc3RhcnQ9YixnPWQsZD49aClicmVhaztuPWpbZitnLTFdLG89altmK2ddfX13aGlsZSgoYj1sW2Ima10pPmkmJjAhPT0tLWUpO3JldHVybiBnPD1hLmxvb2thaGVhZD9nOmEubG9va2FoZWFkfWZ1bmN0aW9uIG0oYSl7dmFyIGIsYyxkLGUsZixnPWEud19zaXplO2Rve2lmKGU9YS53aW5kb3dfc2l6ZS1hLmxvb2thaGVhZC1hLnN0cnN0YXJ0LGEuc3Ryc3RhcnQ+PWcrKGctbGEpKXtFLmFycmF5U2V0KGEud2luZG93LGEud2luZG93LGcsZywwKSxhLm1hdGNoX3N0YXJ0LT1nLGEuc3Ryc3RhcnQtPWcsYS5ibG9ja19zdGFydC09ZyxjPWEuaGFzaF9zaXplLGI9YztkbyBkPWEuaGVhZFstLWJdLGEuaGVhZFtiXT1kPj1nP2QtZzowO3doaWxlKC0tYyk7Yz1nLGI9YztkbyBkPWEucHJldlstLWJdLGEucHJldltiXT1kPj1nP2QtZzowO3doaWxlKC0tYyk7ZSs9Z31pZigwPT09YS5zdHJtLmF2YWlsX2luKWJyZWFrO2lmKGM9ayhhLnN0cm0sYS53aW5kb3csYS5zdHJzdGFydCthLmxvb2thaGVhZCxlKSxhLmxvb2thaGVhZCs9YyxhLmxvb2thaGVhZCthLmluc2VydD49amEpZm9yKGY9YS5zdHJzdGFydC1hLmluc2VydCxhLmluc19oPWEud2luZG93W2ZdLGEuaW5zX2g9KGEuaW5zX2g8PGEuaGFzaF9zaGlmdF5hLndpbmRvd1tmKzFdKSZhLmhhc2hfbWFzazthLmluc2VydCYmKGEuaW5zX2g9KGEuaW5zX2g8PGEuaGFzaF9zaGlmdF5hLndpbmRvd1tmK2phLTFdKSZhLmhhc2hfbWFzayxhLnByZXZbZiZhLndfbWFza109YS5oZWFkW2EuaW5zX2hdLGEuaGVhZFthLmluc19oXT1mLGYrKyxhLmluc2VydC0tLCEoYS5sb29rYWhlYWQrYS5pbnNlcnQ8amEpKTspO313aGlsZShhLmxvb2thaGVhZDxsYSYmMCE9PWEuc3RybS5hdmFpbF9pbil9ZnVuY3Rpb24gbihhLGIpe3ZhciBjPTY1NTM1O2ZvcihjPmEucGVuZGluZ19idWZfc2l6ZS01JiYoYz1hLnBlbmRpbmdfYnVmX3NpemUtNSk7Oyl7aWYoYS5sb29rYWhlYWQ8PTEpe2lmKG0oYSksMD09PWEubG9va2FoZWFkJiZiPT09SilyZXR1cm4gdWE7aWYoMD09PWEubG9va2FoZWFkKWJyZWFrfWEuc3Ryc3RhcnQrPWEubG9va2FoZWFkLGEubG9va2FoZWFkPTA7dmFyIGQ9YS5ibG9ja19zdGFydCtjO2lmKCgwPT09YS5zdHJzdGFydHx8YS5zdHJzdGFydD49ZCkmJihhLmxvb2thaGVhZD1hLnN0cnN0YXJ0LWQsYS5zdHJzdGFydD1kLGgoYSwhMSksMD09PWEuc3RybS5hdmFpbF9vdXQpKXJldHVybiB1YTtpZihhLnN0cnN0YXJ0LWEuYmxvY2tfc3RhcnQ+PWEud19zaXplLWxhJiYoaChhLCExKSwwPT09YS5zdHJtLmF2YWlsX291dCkpcmV0dXJuIHVhfXJldHVybiBhLmluc2VydD0wLGI9PT1NPyhoKGEsITApLDA9PT1hLnN0cm0uYXZhaWxfb3V0P3dhOnhhKTphLnN0cnN0YXJ0PmEuYmxvY2tfc3RhcnQmJihoKGEsITEpLDA9PT1hLnN0cm0uYXZhaWxfb3V0KT91YTp1YX1mdW5jdGlvbiBvKGEsYil7Zm9yKHZhciBjLGQ7Oyl7aWYoYS5sb29rYWhlYWQ8bGEpe2lmKG0oYSksYS5sb29rYWhlYWQ8bGEmJmI9PT1KKXJldHVybiB1YTtpZigwPT09YS5sb29rYWhlYWQpYnJlYWt9aWYoYz0wLGEubG9va2FoZWFkPj1qYSYmKGEuaW5zX2g9KGEuaW5zX2g8PGEuaGFzaF9zaGlmdF5hLndpbmRvd1thLnN0cnN0YXJ0K2phLTFdKSZhLmhhc2hfbWFzayxjPWEucHJldlthLnN0cnN0YXJ0JmEud19tYXNrXT1hLmhlYWRbYS5pbnNfaF0sYS5oZWFkW2EuaW5zX2hdPWEuc3Ryc3RhcnQpLDAhPT1jJiZhLnN0cnN0YXJ0LWM8PWEud19zaXplLWxhJiYoYS5tYXRjaF9sZW5ndGg9bChhLGMpKSxhLm1hdGNoX2xlbmd0aD49amEpaWYoZD1GLl90cl90YWxseShhLGEuc3Ryc3RhcnQtYS5tYXRjaF9zdGFydCxhLm1hdGNoX2xlbmd0aC1qYSksYS5sb29rYWhlYWQtPWEubWF0Y2hfbGVuZ3RoLGEubWF0Y2hfbGVuZ3RoPD1hLm1heF9sYXp5X21hdGNoJiZhLmxvb2thaGVhZD49amEpe2EubWF0Y2hfbGVuZ3RoLS07ZG8gYS5zdHJzdGFydCsrLGEuaW5zX2g9KGEuaW5zX2g8PGEuaGFzaF9zaGlmdF5hLndpbmRvd1thLnN0cnN0YXJ0K2phLTFdKSZhLmhhc2hfbWFzayxjPWEucHJldlthLnN0cnN0YXJ0JmEud19tYXNrXT1hLmhlYWRbYS5pbnNfaF0sYS5oZWFkW2EuaW5zX2hdPWEuc3Ryc3RhcnQ7d2hpbGUoMCE9PS0tYS5tYXRjaF9sZW5ndGgpO2Euc3Ryc3RhcnQrK31lbHNlIGEuc3Ryc3RhcnQrPWEubWF0Y2hfbGVuZ3RoLGEubWF0Y2hfbGVuZ3RoPTAsYS5pbnNfaD1hLndpbmRvd1thLnN0cnN0YXJ0XSxhLmluc19oPShhLmluc19oPDxhLmhhc2hfc2hpZnReYS53aW5kb3dbYS5zdHJzdGFydCsxXSkmYS5oYXNoX21hc2s7ZWxzZSBkPUYuX3RyX3RhbGx5KGEsMCxhLndpbmRvd1thLnN0cnN0YXJ0XSksYS5sb29rYWhlYWQtLSxhLnN0cnN0YXJ0Kys7aWYoZCYmKGgoYSwhMSksMD09PWEuc3RybS5hdmFpbF9vdXQpKXJldHVybiB1YX1yZXR1cm4gYS5pbnNlcnQ9YS5zdHJzdGFydDxqYS0xP2Euc3Ryc3RhcnQ6amEtMSxiPT09TT8oaChhLCEwKSwwPT09YS5zdHJtLmF2YWlsX291dD93YTp4YSk6YS5sYXN0X2xpdCYmKGgoYSwhMSksMD09PWEuc3RybS5hdmFpbF9vdXQpP3VhOnZhfWZ1bmN0aW9uIHAoYSxiKXtmb3IodmFyIGMsZCxlOzspe2lmKGEubG9va2FoZWFkPGxhKXtpZihtKGEpLGEubG9va2FoZWFkPGxhJiZiPT09SilyZXR1cm4gdWE7aWYoMD09PWEubG9va2FoZWFkKWJyZWFrfWlmKGM9MCxhLmxvb2thaGVhZD49amEmJihhLmluc19oPShhLmluc19oPDxhLmhhc2hfc2hpZnReYS53aW5kb3dbYS5zdHJzdGFydCtqYS0xXSkmYS5oYXNoX21hc2ssYz1hLnByZXZbYS5zdHJzdGFydCZhLndfbWFza109YS5oZWFkW2EuaW5zX2hdLGEuaGVhZFthLmluc19oXT1hLnN0cnN0YXJ0KSxhLnByZXZfbGVuZ3RoPWEubWF0Y2hfbGVuZ3RoLGEucHJldl9tYXRjaD1hLm1hdGNoX3N0YXJ0LGEubWF0Y2hfbGVuZ3RoPWphLTEsMCE9PWMmJmEucHJldl9sZW5ndGg8YS5tYXhfbGF6eV9tYXRjaCYmYS5zdHJzdGFydC1jPD1hLndfc2l6ZS1sYSYmKGEubWF0Y2hfbGVuZ3RoPWwoYSxjKSxhLm1hdGNoX2xlbmd0aDw9NSYmKGEuc3RyYXRlZ3k9PT1VfHxhLm1hdGNoX2xlbmd0aD09PWphJiZhLnN0cnN0YXJ0LWEubWF0Y2hfc3RhcnQ+NDA5NikmJihhLm1hdGNoX2xlbmd0aD1qYS0xKSksYS5wcmV2X2xlbmd0aD49amEmJmEubWF0Y2hfbGVuZ3RoPD1hLnByZXZfbGVuZ3RoKXtlPWEuc3Ryc3RhcnQrYS5sb29rYWhlYWQtamEsZD1GLl90cl90YWxseShhLGEuc3Ryc3RhcnQtMS1hLnByZXZfbWF0Y2gsYS5wcmV2X2xlbmd0aC1qYSksYS5sb29rYWhlYWQtPWEucHJldl9sZW5ndGgtMSxhLnByZXZfbGVuZ3RoLT0yO2RvKythLnN0cnN0YXJ0PD1lJiYoYS5pbnNfaD0oYS5pbnNfaDw8YS5oYXNoX3NoaWZ0XmEud2luZG93W2Euc3Ryc3RhcnQramEtMV0pJmEuaGFzaF9tYXNrLGM9YS5wcmV2W2Euc3Ryc3RhcnQmYS53X21hc2tdPWEuaGVhZFthLmluc19oXSxhLmhlYWRbYS5pbnNfaF09YS5zdHJzdGFydCk7d2hpbGUoMCE9PS0tYS5wcmV2X2xlbmd0aCk7aWYoYS5tYXRjaF9hdmFpbGFibGU9MCxhLm1hdGNoX2xlbmd0aD1qYS0xLGEuc3Ryc3RhcnQrKyxkJiYoaChhLCExKSwwPT09YS5zdHJtLmF2YWlsX291dCkpcmV0dXJuIHVhfWVsc2UgaWYoYS5tYXRjaF9hdmFpbGFibGUpe2lmKGQ9Ri5fdHJfdGFsbHkoYSwwLGEud2luZG93W2Euc3Ryc3RhcnQtMV0pLGQmJmgoYSwhMSksYS5zdHJzdGFydCsrLGEubG9va2FoZWFkLS0sMD09PWEuc3RybS5hdmFpbF9vdXQpcmV0dXJuIHVhfWVsc2UgYS5tYXRjaF9hdmFpbGFibGU9MSxhLnN0cnN0YXJ0KyssYS5sb29rYWhlYWQtLX1yZXR1cm4gYS5tYXRjaF9hdmFpbGFibGUmJihkPUYuX3RyX3RhbGx5KGEsMCxhLndpbmRvd1thLnN0cnN0YXJ0LTFdKSxhLm1hdGNoX2F2YWlsYWJsZT0wKSxhLmluc2VydD1hLnN0cnN0YXJ0PGphLTE/YS5zdHJzdGFydDpqYS0xLGI9PT1NPyhoKGEsITApLDA9PT1hLnN0cm0uYXZhaWxfb3V0P3dhOnhhKTphLmxhc3RfbGl0JiYoaChhLCExKSwwPT09YS5zdHJtLmF2YWlsX291dCk/dWE6dmF9ZnVuY3Rpb24gcShhLGIpe2Zvcih2YXIgYyxkLGUsZixnPWEud2luZG93Ozspe2lmKGEubG9va2FoZWFkPD1rYSl7aWYobShhKSxhLmxvb2thaGVhZDw9a2EmJmI9PT1KKXJldHVybiB1YTtpZigwPT09YS5sb29rYWhlYWQpYnJlYWt9aWYoYS5tYXRjaF9sZW5ndGg9MCxhLmxvb2thaGVhZD49amEmJmEuc3Ryc3RhcnQ+MCYmKGU9YS5zdHJzdGFydC0xLGQ9Z1tlXSxkPT09Z1srK2VdJiZkPT09Z1srK2VdJiZkPT09Z1srK2VdKSl7Zj1hLnN0cnN0YXJ0K2thO2RvO3doaWxlKGQ9PT1nWysrZV0mJmQ9PT1nWysrZV0mJmQ9PT1nWysrZV0mJmQ9PT1nWysrZV0mJmQ9PT1nWysrZV0mJmQ9PT1nWysrZV0mJmQ9PT1nWysrZV0mJmQ9PT1nWysrZV0mJmU8Zik7YS5tYXRjaF9sZW5ndGg9a2EtKGYtZSksYS5tYXRjaF9sZW5ndGg+YS5sb29rYWhlYWQmJihhLm1hdGNoX2xlbmd0aD1hLmxvb2thaGVhZCl9aWYoYS5tYXRjaF9sZW5ndGg+PWphPyhjPUYuX3RyX3RhbGx5KGEsMSxhLm1hdGNoX2xlbmd0aC1qYSksYS5sb29rYWhlYWQtPWEubWF0Y2hfbGVuZ3RoLGEuc3Ryc3RhcnQrPWEubWF0Y2hfbGVuZ3RoLGEubWF0Y2hfbGVuZ3RoPTApOihjPUYuX3RyX3RhbGx5KGEsMCxhLndpbmRvd1thLnN0cnN0YXJ0XSksYS5sb29rYWhlYWQtLSxhLnN0cnN0YXJ0KyspLGMmJihoKGEsITEpLDA9PT1hLnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gdWF9cmV0dXJuIGEuaW5zZXJ0PTAsYj09PU0/KGgoYSwhMCksMD09PWEuc3RybS5hdmFpbF9vdXQ/d2E6eGEpOmEubGFzdF9saXQmJihoKGEsITEpLDA9PT1hLnN0cm0uYXZhaWxfb3V0KT91YTp2YX1mdW5jdGlvbiByKGEsYil7Zm9yKHZhciBjOzspe2lmKDA9PT1hLmxvb2thaGVhZCYmKG0oYSksMD09PWEubG9va2FoZWFkKSl7aWYoYj09PUopcmV0dXJuIHVhO2JyZWFrfWlmKGEubWF0Y2hfbGVuZ3RoPTAsYz1GLl90cl90YWxseShhLDAsYS53aW5kb3dbYS5zdHJzdGFydF0pLGEubG9va2FoZWFkLS0sYS5zdHJzdGFydCsrLGMmJihoKGEsITEpLDA9PT1hLnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gdWF9cmV0dXJuIGEuaW5zZXJ0PTAsYj09PU0/KGgoYSwhMCksMD09PWEuc3RybS5hdmFpbF9vdXQ/d2E6eGEpOmEubGFzdF9saXQmJihoKGEsITEpLDA9PT1hLnN0cm0uYXZhaWxfb3V0KT91YTp2YX1mdW5jdGlvbiBzKGEsYixjLGQsZSl7dGhpcy5nb29kX2xlbmd0aD1hLHRoaXMubWF4X2xhenk9Yix0aGlzLm5pY2VfbGVuZ3RoPWMsdGhpcy5tYXhfY2hhaW49ZCx0aGlzLmZ1bmM9ZX1mdW5jdGlvbiB0KGEpe2Eud2luZG93X3NpemU9MiphLndfc2l6ZSxmKGEuaGVhZCksYS5tYXhfbGF6eV9tYXRjaD1EW2EubGV2ZWxdLm1heF9sYXp5LGEuZ29vZF9tYXRjaD1EW2EubGV2ZWxdLmdvb2RfbGVuZ3RoLGEubmljZV9tYXRjaD1EW2EubGV2ZWxdLm5pY2VfbGVuZ3RoLGEubWF4X2NoYWluX2xlbmd0aD1EW2EubGV2ZWxdLm1heF9jaGFpbixhLnN0cnN0YXJ0PTAsYS5ibG9ja19zdGFydD0wLGEubG9va2FoZWFkPTAsYS5pbnNlcnQ9MCxhLm1hdGNoX2xlbmd0aD1hLnByZXZfbGVuZ3RoPWphLTEsYS5tYXRjaF9hdmFpbGFibGU9MCxhLmluc19oPTB9ZnVuY3Rpb24gdSgpe3RoaXMuc3RybT1udWxsLHRoaXMuc3RhdHVzPTAsdGhpcy5wZW5kaW5nX2J1Zj1udWxsLHRoaXMucGVuZGluZ19idWZfc2l6ZT0wLHRoaXMucGVuZGluZ19vdXQ9MCx0aGlzLnBlbmRpbmc9MCx0aGlzLndyYXA9MCx0aGlzLmd6aGVhZD1udWxsLHRoaXMuZ3ppbmRleD0wLHRoaXMubWV0aG9kPSQsdGhpcy5sYXN0X2ZsdXNoPS0xLHRoaXMud19zaXplPTAsdGhpcy53X2JpdHM9MCx0aGlzLndfbWFzaz0wLHRoaXMud2luZG93PW51bGwsdGhpcy53aW5kb3dfc2l6ZT0wLHRoaXMucHJldj1udWxsLHRoaXMuaGVhZD1udWxsLHRoaXMuaW5zX2g9MCx0aGlzLmhhc2hfc2l6ZT0wLHRoaXMuaGFzaF9iaXRzPTAsdGhpcy5oYXNoX21hc2s9MCx0aGlzLmhhc2hfc2hpZnQ9MCx0aGlzLmJsb2NrX3N0YXJ0PTAsdGhpcy5tYXRjaF9sZW5ndGg9MCx0aGlzLnByZXZfbWF0Y2g9MCx0aGlzLm1hdGNoX2F2YWlsYWJsZT0wLHRoaXMuc3Ryc3RhcnQ9MCx0aGlzLm1hdGNoX3N0YXJ0PTAsdGhpcy5sb29rYWhlYWQ9MCx0aGlzLnByZXZfbGVuZ3RoPTAsdGhpcy5tYXhfY2hhaW5fbGVuZ3RoPTAsdGhpcy5tYXhfbGF6eV9tYXRjaD0wLHRoaXMubGV2ZWw9MCx0aGlzLnN0cmF0ZWd5PTAsdGhpcy5nb29kX21hdGNoPTAsdGhpcy5uaWNlX21hdGNoPTAsdGhpcy5keW5fbHRyZWU9bmV3IEUuQnVmMTYoMipoYSksdGhpcy5keW5fZHRyZWU9bmV3IEUuQnVmMTYoMiooMipmYSsxKSksdGhpcy5ibF90cmVlPW5ldyBFLkJ1ZjE2KDIqKDIqZ2ErMSkpLGYodGhpcy5keW5fbHRyZWUpLGYodGhpcy5keW5fZHRyZWUpLGYodGhpcy5ibF90cmVlKSx0aGlzLmxfZGVzYz1udWxsLHRoaXMuZF9kZXNjPW51bGwsdGhpcy5ibF9kZXNjPW51bGwsdGhpcy5ibF9jb3VudD1uZXcgRS5CdWYxNihpYSsxKSx0aGlzLmhlYXA9bmV3IEUuQnVmMTYoMiplYSsxKSxmKHRoaXMuaGVhcCksdGhpcy5oZWFwX2xlbj0wLHRoaXMuaGVhcF9tYXg9MCx0aGlzLmRlcHRoPW5ldyBFLkJ1ZjE2KDIqZWErMSksZih0aGlzLmRlcHRoKSx0aGlzLmxfYnVmPTAsdGhpcy5saXRfYnVmc2l6ZT0wLHRoaXMubGFzdF9saXQ9MCx0aGlzLmRfYnVmPTAsdGhpcy5vcHRfbGVuPTAsdGhpcy5zdGF0aWNfbGVuPTAsdGhpcy5tYXRjaGVzPTAsdGhpcy5pbnNlcnQ9MCx0aGlzLmJpX2J1Zj0wLHRoaXMuYmlfdmFsaWQ9MH1mdW5jdGlvbiB2KGEpe3ZhciBiO3JldHVybiBhJiZhLnN0YXRlPyhhLnRvdGFsX2luPWEudG90YWxfb3V0PTAsYS5kYXRhX3R5cGU9WixiPWEuc3RhdGUsYi5wZW5kaW5nPTAsYi5wZW5kaW5nX291dD0wLGIud3JhcDwwJiYoYi53cmFwPS1iLndyYXApLGIuc3RhdHVzPWIud3JhcD9uYTpzYSxhLmFkbGVyPTI9PT1iLndyYXA/MDoxLGIubGFzdF9mbHVzaD1KLEYuX3RyX2luaXQoYiksTyk6ZChhLFEpfWZ1bmN0aW9uIHcoYSl7dmFyIGI9dihhKTtyZXR1cm4gYj09PU8mJnQoYS5zdGF0ZSksYn1mdW5jdGlvbiB4KGEsYil7cmV0dXJuIGEmJmEuc3RhdGU/MiE9PWEuc3RhdGUud3JhcD9ROihhLnN0YXRlLmd6aGVhZD1iLE8pOlF9ZnVuY3Rpb24geShhLGIsYyxlLGYsZyl7aWYoIWEpcmV0dXJuIFE7dmFyIGg9MTtpZihiPT09VCYmKGI9NiksZTwwPyhoPTAsZT0tZSk6ZT4xNSYmKGg9MixlLT0xNiksZjwxfHxmPl98fGMhPT0kfHxlPDh8fGU+MTV8fGI8MHx8Yj45fHxnPDB8fGc+WClyZXR1cm4gZChhLFEpOzg9PT1lJiYoZT05KTt2YXIgaT1uZXcgdTtyZXR1cm4gYS5zdGF0ZT1pLGkuc3RybT1hLGkud3JhcD1oLGkuZ3poZWFkPW51bGwsaS53X2JpdHM9ZSxpLndfc2l6ZT0xPDxpLndfYml0cyxpLndfbWFzaz1pLndfc2l6ZS0xLGkuaGFzaF9iaXRzPWYrNyxpLmhhc2hfc2l6ZT0xPDxpLmhhc2hfYml0cyxpLmhhc2hfbWFzaz1pLmhhc2hfc2l6ZS0xLGkuaGFzaF9zaGlmdD1+figoaS5oYXNoX2JpdHMramEtMSkvamEpLGkud2luZG93PW5ldyBFLkJ1ZjgoMippLndfc2l6ZSksaS5oZWFkPW5ldyBFLkJ1ZjE2KGkuaGFzaF9zaXplKSxpLnByZXY9bmV3IEUuQnVmMTYoaS53X3NpemUpLGkubGl0X2J1ZnNpemU9MTw8Zis2LGkucGVuZGluZ19idWZfc2l6ZT00KmkubGl0X2J1ZnNpemUsaS5wZW5kaW5nX2J1Zj1uZXcgRS5CdWY4KGkucGVuZGluZ19idWZfc2l6ZSksaS5kX2J1Zj0xKmkubGl0X2J1ZnNpemUsaS5sX2J1Zj0zKmkubGl0X2J1ZnNpemUsaS5sZXZlbD1iLGkuc3RyYXRlZ3k9ZyxpLm1ldGhvZD1jLHcoYSl9ZnVuY3Rpb24geihhLGIpe3JldHVybiB5KGEsYiwkLGFhLGJhLFkpfWZ1bmN0aW9uIEEoYSxiKXt2YXIgYyxoLGssbDtpZighYXx8IWEuc3RhdGV8fGI+Tnx8YjwwKXJldHVybiBhP2QoYSxRKTpRO2lmKGg9YS5zdGF0ZSwhYS5vdXRwdXR8fCFhLmlucHV0JiYwIT09YS5hdmFpbF9pbnx8aC5zdGF0dXM9PT10YSYmYiE9PU0pcmV0dXJuIGQoYSwwPT09YS5hdmFpbF9vdXQ/UzpRKTtpZihoLnN0cm09YSxjPWgubGFzdF9mbHVzaCxoLmxhc3RfZmx1c2g9YixoLnN0YXR1cz09PW5hKWlmKDI9PT1oLndyYXApYS5hZGxlcj0wLGkoaCwzMSksaShoLDEzOSksaShoLDgpLGguZ3poZWFkPyhpKGgsKGguZ3poZWFkLnRleHQ/MTowKSsoaC5nemhlYWQuaGNyYz8yOjApKyhoLmd6aGVhZC5leHRyYT80OjApKyhoLmd6aGVhZC5uYW1lPzg6MCkrKGguZ3poZWFkLmNvbW1lbnQ/MTY6MCkpLGkoaCwyNTUmaC5nemhlYWQudGltZSksaShoLGguZ3poZWFkLnRpbWU+PjgmMjU1KSxpKGgsaC5nemhlYWQudGltZT4+MTYmMjU1KSxpKGgsaC5nemhlYWQudGltZT4+MjQmMjU1KSxpKGgsOT09PWgubGV2ZWw/MjpoLnN0cmF0ZWd5Pj1WfHxoLmxldmVsPDI/NDowKSxpKGgsMjU1JmguZ3poZWFkLm9zKSxoLmd6aGVhZC5leHRyYSYmaC5nemhlYWQuZXh0cmEubGVuZ3RoJiYoaShoLDI1NSZoLmd6aGVhZC5leHRyYS5sZW5ndGgpLGkoaCxoLmd6aGVhZC5leHRyYS5sZW5ndGg+PjgmMjU1KSksaC5nemhlYWQuaGNyYyYmKGEuYWRsZXI9SChhLmFkbGVyLGgucGVuZGluZ19idWYsaC5wZW5kaW5nLDApKSxoLmd6aW5kZXg9MCxoLnN0YXR1cz1vYSk6KGkoaCwwKSxpKGgsMCksaShoLDApLGkoaCwwKSxpKGgsMCksaShoLDk9PT1oLmxldmVsPzI6aC5zdHJhdGVneT49Vnx8aC5sZXZlbDwyPzQ6MCksaShoLHlhKSxoLnN0YXR1cz1zYSk7ZWxzZXt2YXIgbT0kKyhoLndfYml0cy04PDw0KTw8OCxuPS0xO249aC5zdHJhdGVneT49Vnx8aC5sZXZlbDwyPzA6aC5sZXZlbDw2PzE6Nj09PWgubGV2ZWw/MjozLG18PW48PDYsMCE9PWguc3Ryc3RhcnQmJihtfD1tYSksbSs9MzEtbSUzMSxoLnN0YXR1cz1zYSxqKGgsbSksMCE9PWguc3Ryc3RhcnQmJihqKGgsYS5hZGxlcj4+PjE2KSxqKGgsNjU1MzUmYS5hZGxlcikpLGEuYWRsZXI9MX1pZihoLnN0YXR1cz09PW9hKWlmKGguZ3poZWFkLmV4dHJhKXtmb3Ioaz1oLnBlbmRpbmc7aC5nemluZGV4PCg2NTUzNSZoLmd6aGVhZC5leHRyYS5sZW5ndGgpJiYoaC5wZW5kaW5nIT09aC5wZW5kaW5nX2J1Zl9zaXplfHwoaC5nemhlYWQuaGNyYyYmaC5wZW5kaW5nPmsmJihhLmFkbGVyPUgoYS5hZGxlcixoLnBlbmRpbmdfYnVmLGgucGVuZGluZy1rLGspKSxnKGEpLGs9aC5wZW5kaW5nLGgucGVuZGluZyE9PWgucGVuZGluZ19idWZfc2l6ZSkpOylpKGgsMjU1JmguZ3poZWFkLmV4dHJhW2guZ3ppbmRleF0pLGguZ3ppbmRleCsrO2guZ3poZWFkLmhjcmMmJmgucGVuZGluZz5rJiYoYS5hZGxlcj1IKGEuYWRsZXIsaC5wZW5kaW5nX2J1ZixoLnBlbmRpbmctayxrKSksaC5nemluZGV4PT09aC5nemhlYWQuZXh0cmEubGVuZ3RoJiYoaC5nemluZGV4PTAsaC5zdGF0dXM9cGEpfWVsc2UgaC5zdGF0dXM9cGE7aWYoaC5zdGF0dXM9PT1wYSlpZihoLmd6aGVhZC5uYW1lKXtrPWgucGVuZGluZztkb3tpZihoLnBlbmRpbmc9PT1oLnBlbmRpbmdfYnVmX3NpemUmJihoLmd6aGVhZC5oY3JjJiZoLnBlbmRpbmc+ayYmKGEuYWRsZXI9SChhLmFkbGVyLGgucGVuZGluZ19idWYsaC5wZW5kaW5nLWssaykpLGcoYSksaz1oLnBlbmRpbmcsaC5wZW5kaW5nPT09aC5wZW5kaW5nX2J1Zl9zaXplKSl7bD0xO2JyZWFrfWw9aC5nemluZGV4PGguZ3poZWFkLm5hbWUubGVuZ3RoPzI1NSZoLmd6aGVhZC5uYW1lLmNoYXJDb2RlQXQoaC5nemluZGV4KyspOjAsaShoLGwpfXdoaWxlKDAhPT1sKTtoLmd6aGVhZC5oY3JjJiZoLnBlbmRpbmc+ayYmKGEuYWRsZXI9SChhLmFkbGVyLGgucGVuZGluZ19idWYsaC5wZW5kaW5nLWssaykpLDA9PT1sJiYoaC5nemluZGV4PTAsaC5zdGF0dXM9cWEpfWVsc2UgaC5zdGF0dXM9cWE7aWYoaC5zdGF0dXM9PT1xYSlpZihoLmd6aGVhZC5jb21tZW50KXtrPWgucGVuZGluZztkb3tpZihoLnBlbmRpbmc9PT1oLnBlbmRpbmdfYnVmX3NpemUmJihoLmd6aGVhZC5oY3JjJiZoLnBlbmRpbmc+ayYmKGEuYWRsZXI9SChhLmFkbGVyLGgucGVuZGluZ19idWYsaC5wZW5kaW5nLWssaykpLGcoYSksaz1oLnBlbmRpbmcsaC5wZW5kaW5nPT09aC5wZW5kaW5nX2J1Zl9zaXplKSl7bD0xO2JyZWFrfWw9aC5nemluZGV4PGguZ3poZWFkLmNvbW1lbnQubGVuZ3RoPzI1NSZoLmd6aGVhZC5jb21tZW50LmNoYXJDb2RlQXQoaC5nemluZGV4KyspOjAsaShoLGwpfXdoaWxlKDAhPT1sKTtoLmd6aGVhZC5oY3JjJiZoLnBlbmRpbmc+ayYmKGEuYWRsZXI9SChhLmFkbGVyLGgucGVuZGluZ19idWYsaC5wZW5kaW5nLWssaykpLDA9PT1sJiYoaC5zdGF0dXM9cmEpfWVsc2UgaC5zdGF0dXM9cmE7aWYoaC5zdGF0dXM9PT1yYSYmKGguZ3poZWFkLmhjcmM/KGgucGVuZGluZysyPmgucGVuZGluZ19idWZfc2l6ZSYmZyhhKSxoLnBlbmRpbmcrMjw9aC5wZW5kaW5nX2J1Zl9zaXplJiYoaShoLDI1NSZhLmFkbGVyKSxpKGgsYS5hZGxlcj4+OCYyNTUpLGEuYWRsZXI9MCxoLnN0YXR1cz1zYSkpOmguc3RhdHVzPXNhKSwwIT09aC5wZW5kaW5nKXtpZihnKGEpLDA9PT1hLmF2YWlsX291dClyZXR1cm4gaC5sYXN0X2ZsdXNoPS0xLE99ZWxzZSBpZigwPT09YS5hdmFpbF9pbiYmZShiKTw9ZShjKSYmYiE9PU0pcmV0dXJuIGQoYSxTKTtpZihoLnN0YXR1cz09PXRhJiYwIT09YS5hdmFpbF9pbilyZXR1cm4gZChhLFMpO2lmKDAhPT1hLmF2YWlsX2lufHwwIT09aC5sb29rYWhlYWR8fGIhPT1KJiZoLnN0YXR1cyE9PXRhKXt2YXIgbz1oLnN0cmF0ZWd5PT09Vj9yKGgsYik6aC5zdHJhdGVneT09PVc/cShoLGIpOkRbaC5sZXZlbF0uZnVuYyhoLGIpO2lmKG8hPT13YSYmbyE9PXhhfHwoaC5zdGF0dXM9dGEpLG89PT11YXx8bz09PXdhKXJldHVybiAwPT09YS5hdmFpbF9vdXQmJihoLmxhc3RfZmx1c2g9LTEpLE87aWYobz09PXZhJiYoYj09PUs/Ri5fdHJfYWxpZ24oaCk6YiE9PU4mJihGLl90cl9zdG9yZWRfYmxvY2soaCwwLDAsITEpLGI9PT1MJiYoZihoLmhlYWQpLDA9PT1oLmxvb2thaGVhZCYmKGguc3Ryc3RhcnQ9MCxoLmJsb2NrX3N0YXJ0PTAsaC5pbnNlcnQ9MCkpKSxnKGEpLDA9PT1hLmF2YWlsX291dCkpcmV0dXJuIGgubGFzdF9mbHVzaD0tMSxPfXJldHVybiBiIT09TT9POmgud3JhcDw9MD9QOigyPT09aC53cmFwPyhpKGgsMjU1JmEuYWRsZXIpLGkoaCxhLmFkbGVyPj44JjI1NSksaShoLGEuYWRsZXI+PjE2JjI1NSksaShoLGEuYWRsZXI+PjI0JjI1NSksaShoLDI1NSZhLnRvdGFsX2luKSxpKGgsYS50b3RhbF9pbj4+OCYyNTUpLGkoaCxhLnRvdGFsX2luPj4xNiYyNTUpLGkoaCxhLnRvdGFsX2luPj4yNCYyNTUpKTooaihoLGEuYWRsZXI+Pj4xNiksaihoLDY1NTM1JmEuYWRsZXIpKSxnKGEpLGgud3JhcD4wJiYoaC53cmFwPS1oLndyYXApLDAhPT1oLnBlbmRpbmc/TzpQKX1mdW5jdGlvbiBCKGEpe3ZhciBiO3JldHVybiBhJiZhLnN0YXRlPyhiPWEuc3RhdGUuc3RhdHVzLGIhPT1uYSYmYiE9PW9hJiZiIT09cGEmJmIhPT1xYSYmYiE9PXJhJiZiIT09c2EmJmIhPT10YT9kKGEsUSk6KGEuc3RhdGU9bnVsbCxiPT09c2E/ZChhLFIpOk8pKTpRfWZ1bmN0aW9uIEMoYSxiKXt2YXIgYyxkLGUsZyxoLGksaixrLGw9Yi5sZW5ndGg7aWYoIWF8fCFhLnN0YXRlKXJldHVybiBRO2lmKGM9YS5zdGF0ZSxnPWMud3JhcCwyPT09Z3x8MT09PWcmJmMuc3RhdHVzIT09bmF8fGMubG9va2FoZWFkKXJldHVybiBRO2ZvcigxPT09ZyYmKGEuYWRsZXI9RyhhLmFkbGVyLGIsbCwwKSksYy53cmFwPTAsbD49Yy53X3NpemUmJigwPT09ZyYmKGYoYy5oZWFkKSxjLnN0cnN0YXJ0PTAsYy5ibG9ja19zdGFydD0wLGMuaW5zZXJ0PTApLGs9bmV3IEUuQnVmOChjLndfc2l6ZSksRS5hcnJheVNldChrLGIsbC1jLndfc2l6ZSxjLndfc2l6ZSwwKSxiPWssbD1jLndfc2l6ZSksaD1hLmF2YWlsX2luLGk9YS5uZXh0X2luLGo9YS5pbnB1dCxhLmF2YWlsX2luPWwsYS5uZXh0X2luPTAsYS5pbnB1dD1iLG0oYyk7Yy5sb29rYWhlYWQ+PWphOyl7ZD1jLnN0cnN0YXJ0LGU9Yy5sb29rYWhlYWQtKGphLTEpO2RvIGMuaW5zX2g9KGMuaW5zX2g8PGMuaGFzaF9zaGlmdF5jLndpbmRvd1tkK2phLTFdKSZjLmhhc2hfbWFzayxjLnByZXZbZCZjLndfbWFza109Yy5oZWFkW2MuaW5zX2hdLGMuaGVhZFtjLmluc19oXT1kLGQrKzt3aGlsZSgtLWUpO2Muc3Ryc3RhcnQ9ZCxjLmxvb2thaGVhZD1qYS0xLG0oYyl9cmV0dXJuIGMuc3Ryc3RhcnQrPWMubG9va2FoZWFkLGMuYmxvY2tfc3RhcnQ9Yy5zdHJzdGFydCxjLmluc2VydD1jLmxvb2thaGVhZCxjLmxvb2thaGVhZD0wLGMubWF0Y2hfbGVuZ3RoPWMucHJldl9sZW5ndGg9amEtMSxjLm1hdGNoX2F2YWlsYWJsZT0wLGEubmV4dF9pbj1pLGEuaW5wdXQ9aixhLmF2YWlsX2luPWgsYy53cmFwPWcsT312YXIgRCxFPWEoXCIuLi91dGlscy9jb21tb25cIiksRj1hKFwiLi90cmVlc1wiKSxHPWEoXCIuL2FkbGVyMzJcIiksSD1hKFwiLi9jcmMzMlwiKSxJPWEoXCIuL21lc3NhZ2VzXCIpLEo9MCxLPTEsTD0zLE09NCxOPTUsTz0wLFA9MSxRPS0yLFI9LTMsUz0tNSxUPS0xLFU9MSxWPTIsVz0zLFg9NCxZPTAsWj0yLCQ9OCxfPTksYWE9MTUsYmE9OCxjYT0yOSxkYT0yNTYsZWE9ZGErMStjYSxmYT0zMCxnYT0xOSxoYT0yKmVhKzEsaWE9MTUsamE9MyxrYT0yNTgsbGE9a2EramErMSxtYT0zMixuYT00MixvYT02OSxwYT03MyxxYT05MSxyYT0xMDMsc2E9MTEzLHRhPTY2Nix1YT0xLHZhPTIsd2E9Myx4YT00LHlhPTM7RD1bbmV3IHMoMCwwLDAsMCxuKSxuZXcgcyg0LDQsOCw0LG8pLG5ldyBzKDQsNSwxNiw4LG8pLG5ldyBzKDQsNiwzMiwzMixvKSxuZXcgcyg0LDQsMTYsMTYscCksbmV3IHMoOCwxNiwzMiwzMixwKSxuZXcgcyg4LDE2LDEyOCwxMjgscCksbmV3IHMoOCwzMiwxMjgsMjU2LHApLG5ldyBzKDMyLDEyOCwyNTgsMTAyNCxwKSxuZXcgcygzMiwyNTgsMjU4LDQwOTYscCldLGMuZGVmbGF0ZUluaXQ9eixjLmRlZmxhdGVJbml0Mj15LGMuZGVmbGF0ZVJlc2V0PXcsYy5kZWZsYXRlUmVzZXRLZWVwPXYsYy5kZWZsYXRlU2V0SGVhZGVyPXgsYy5kZWZsYXRlPUEsYy5kZWZsYXRlRW5kPUIsYy5kZWZsYXRlU2V0RGljdGlvbmFyeT1DLGMuZGVmbGF0ZUluZm89XCJwYWtvIGRlZmxhdGUgKGZyb20gTm9kZWNhIHByb2plY3QpXCJ9LHtcIi4uL3V0aWxzL2NvbW1vblwiOjYyLFwiLi9hZGxlcjMyXCI6NjQsXCIuL2NyYzMyXCI6NjYsXCIuL21lc3NhZ2VzXCI6NzIsXCIuL3RyZWVzXCI6NzN9XSw2ODpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoKXt0aGlzLnRleHQ9MCx0aGlzLnRpbWU9MCx0aGlzLnhmbGFncz0wLHRoaXMub3M9MCx0aGlzLmV4dHJhPW51bGwsdGhpcy5leHRyYV9sZW49MCx0aGlzLm5hbWU9XCJcIix0aGlzLmNvbW1lbnQ9XCJcIix0aGlzLmhjcmM9MCx0aGlzLmRvbmU9ITF9Yi5leHBvcnRzPWR9LHt9XSw2OTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO3ZhciBkPTMwLGU9MTI7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYil7dmFyIGMsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdSx2LHcseCx5LHosQSxCLEM7Yz1hLnN0YXRlLGY9YS5uZXh0X2luLEI9YS5pbnB1dCxnPWYrKGEuYXZhaWxfaW4tNSksaD1hLm5leHRfb3V0LEM9YS5vdXRwdXQsaT1oLShiLWEuYXZhaWxfb3V0KSxqPWgrKGEuYXZhaWxfb3V0LTI1Nyksaz1jLmRtYXgsbD1jLndzaXplLG09Yy53aGF2ZSxuPWMud25leHQsbz1jLndpbmRvdyxwPWMuaG9sZCxxPWMuYml0cyxyPWMubGVuY29kZSxzPWMuZGlzdGNvZGUsdD0oMTw8Yy5sZW5iaXRzKS0xLHU9KDE8PGMuZGlzdGJpdHMpLTE7YTpkb3txPDE1JiYocCs9QltmKytdPDxxLHErPTgscCs9QltmKytdPDxxLHErPTgpLHY9cltwJnRdO2I6Zm9yKDs7KXtpZih3PXY+Pj4yNCxwPj4+PXcscS09dyx3PXY+Pj4xNiYyNTUsMD09PXcpQ1toKytdPTY1NTM1JnY7ZWxzZXtpZighKDE2JncpKXtpZigwPT09KDY0JncpKXt2PXJbKDY1NTM1JnYpKyhwJigxPDx3KS0xKV07Y29udGludWUgYn1pZigzMiZ3KXtjLm1vZGU9ZTticmVhayBhfWEubXNnPVwiaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlXCIsYy5tb2RlPWQ7YnJlYWsgYX14PTY1NTM1JnYsdyY9MTUsdyYmKHE8dyYmKHArPUJbZisrXTw8cSxxKz04KSx4Kz1wJigxPDx3KS0xLHA+Pj49dyxxLT13KSxxPDE1JiYocCs9QltmKytdPDxxLHErPTgscCs9QltmKytdPDxxLHErPTgpLHY9c1twJnVdO2M6Zm9yKDs7KXtpZih3PXY+Pj4yNCxwPj4+PXcscS09dyx3PXY+Pj4xNiYyNTUsISgxNiZ3KSl7aWYoMD09PSg2NCZ3KSl7dj1zWyg2NTUzNSZ2KSsocCYoMTw8dyktMSldO2NvbnRpbnVlIGN9YS5tc2c9XCJpbnZhbGlkIGRpc3RhbmNlIGNvZGVcIixjLm1vZGU9ZDticmVhayBhfWlmKHk9NjU1MzUmdix3Jj0xNSxxPHcmJihwKz1CW2YrK108PHEscSs9OCxxPHcmJihwKz1CW2YrK108PHEscSs9OCkpLHkrPXAmKDE8PHcpLTEseT5rKXthLm1zZz1cImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrXCIsYy5tb2RlPWQ7YnJlYWsgYX1pZihwPj4+PXcscS09dyx3PWgtaSx5Pncpe2lmKHc9eS13LHc+bSYmYy5zYW5lKXthLm1zZz1cImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrXCIsYy5tb2RlPWQ7YnJlYWsgYX1pZih6PTAsQT1vLDA9PT1uKXtpZih6Kz1sLXcsdzx4KXt4LT13O2RvIENbaCsrXT1vW3orK107d2hpbGUoLS13KTt6PWgteSxBPUN9fWVsc2UgaWYobjx3KXtpZih6Kz1sK24tdyx3LT1uLHc8eCl7eC09dztkbyBDW2grK109b1t6KytdO3doaWxlKC0tdyk7aWYoej0wLG48eCl7dz1uLHgtPXc7ZG8gQ1toKytdPW9beisrXTt3aGlsZSgtLXcpO3o9aC15LEE9Q319fWVsc2UgaWYoeis9bi13LHc8eCl7eC09dztkbyBDW2grK109b1t6KytdO3doaWxlKC0tdyk7ej1oLXksQT1DfWZvcig7eD4yOylDW2grK109QVt6KytdLENbaCsrXT1BW3orK10sQ1toKytdPUFbeisrXSx4LT0zO3gmJihDW2grK109QVt6KytdLHg+MSYmKENbaCsrXT1BW3orK10pKX1lbHNle3o9aC15O2RvIENbaCsrXT1DW3orK10sQ1toKytdPUNbeisrXSxDW2grK109Q1t6KytdLHgtPTM7d2hpbGUoeD4yKTt4JiYoQ1toKytdPUNbeisrXSx4PjEmJihDW2grK109Q1t6KytdKSl9YnJlYWt9fWJyZWFrfX13aGlsZShmPGcmJmg8aik7eD1xPj4zLGYtPXgscS09eDw8MyxwJj0oMTw8cSktMSxhLm5leHRfaW49ZixhLm5leHRfb3V0PWgsYS5hdmFpbF9pbj1mPGc/NSsoZy1mKTo1LShmLWcpLGEuYXZhaWxfb3V0PWg8aj8yNTcrKGotaCk6MjU3LShoLWopLGMuaG9sZD1wLGMuYml0cz1xfX0se31dLDcwOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4oYT4+PjI0JjI1NSkrKGE+Pj44JjY1MjgwKSsoKDY1MjgwJmEpPDw4KSsoKDI1NSZhKTw8MjQpfWZ1bmN0aW9uIGUoKXt0aGlzLm1vZGU9MCx0aGlzLmxhc3Q9ITEsdGhpcy53cmFwPTAsdGhpcy5oYXZlZGljdD0hMSx0aGlzLmZsYWdzPTAsdGhpcy5kbWF4PTAsdGhpcy5jaGVjaz0wLHRoaXMudG90YWw9MCx0aGlzLmhlYWQ9bnVsbCx0aGlzLndiaXRzPTAsdGhpcy53c2l6ZT0wLHRoaXMud2hhdmU9MCx0aGlzLnduZXh0PTAsdGhpcy53aW5kb3c9bnVsbCx0aGlzLmhvbGQ9MCx0aGlzLmJpdHM9MCx0aGlzLmxlbmd0aD0wLHRoaXMub2Zmc2V0PTAsdGhpcy5leHRyYT0wLHRoaXMubGVuY29kZT1udWxsLHRoaXMuZGlzdGNvZGU9bnVsbCx0aGlzLmxlbmJpdHM9MCx0aGlzLmRpc3RiaXRzPTAsdGhpcy5uY29kZT0wLHRoaXMubmxlbj0wLHRoaXMubmRpc3Q9MCx0aGlzLmhhdmU9MCx0aGlzLm5leHQ9bnVsbCx0aGlzLmxlbnM9bmV3IHMuQnVmMTYoMzIwKSx0aGlzLndvcms9bmV3IHMuQnVmMTYoMjg4KSx0aGlzLmxlbmR5bj1udWxsLHRoaXMuZGlzdGR5bj1udWxsLHRoaXMuc2FuZT0wLHRoaXMuYmFjaz0wLHRoaXMud2FzPTB9ZnVuY3Rpb24gZihhKXt2YXIgYjtyZXR1cm4gYSYmYS5zdGF0ZT8oYj1hLnN0YXRlLGEudG90YWxfaW49YS50b3RhbF9vdXQ9Yi50b3RhbD0wLGEubXNnPVwiXCIsYi53cmFwJiYoYS5hZGxlcj0xJmIud3JhcCksYi5tb2RlPUwsYi5sYXN0PTAsYi5oYXZlZGljdD0wLGIuZG1heD0zMjc2OCxiLmhlYWQ9bnVsbCxiLmhvbGQ9MCxiLmJpdHM9MCxiLmxlbmNvZGU9Yi5sZW5keW49bmV3IHMuQnVmMzIocGEpLGIuZGlzdGNvZGU9Yi5kaXN0ZHluPW5ldyBzLkJ1ZjMyKHFhKSxiLnNhbmU9MSxiLmJhY2s9LTEsRCk6R31mdW5jdGlvbiBnKGEpe3ZhciBiO3JldHVybiBhJiZhLnN0YXRlPyhiPWEuc3RhdGUsYi53c2l6ZT0wLGIud2hhdmU9MCxiLnduZXh0PTAsZihhKSk6R31mdW5jdGlvbiBoKGEsYil7dmFyIGMsZDtyZXR1cm4gYSYmYS5zdGF0ZT8oZD1hLnN0YXRlLGI8MD8oYz0wLGI9LWIpOihjPShiPj40KSsxLGI8NDgmJihiJj0xNSkpLGImJihiPDh8fGI+MTUpP0c6KG51bGwhPT1kLndpbmRvdyYmZC53Yml0cyE9PWImJihkLndpbmRvdz1udWxsKSxkLndyYXA9YyxkLndiaXRzPWIsZyhhKSkpOkd9ZnVuY3Rpb24gaShhLGIpe3ZhciBjLGQ7cmV0dXJuIGE/KGQ9bmV3IGUsYS5zdGF0ZT1kLGQud2luZG93PW51bGwsYz1oKGEsYiksYyE9PUQmJihhLnN0YXRlPW51bGwpLGMpOkd9ZnVuY3Rpb24gaihhKXtyZXR1cm4gaShhLHNhKX1mdW5jdGlvbiBrKGEpe2lmKHRhKXt2YXIgYjtmb3IocT1uZXcgcy5CdWYzMig1MTIpLHI9bmV3IHMuQnVmMzIoMzIpLGI9MDtiPDE0NDspYS5sZW5zW2IrK109ODtmb3IoO2I8MjU2OylhLmxlbnNbYisrXT05O2Zvcig7YjwyODA7KWEubGVuc1tiKytdPTc7Zm9yKDtiPDI4ODspYS5sZW5zW2IrK109ODtmb3Iodyh5LGEubGVucywwLDI4OCxxLDAsYS53b3JrLHtiaXRzOjl9KSxiPTA7YjwzMjspYS5sZW5zW2IrK109NTt3KHosYS5sZW5zLDAsMzIsciwwLGEud29yayx7Yml0czo1fSksdGE9ITF9YS5sZW5jb2RlPXEsYS5sZW5iaXRzPTksYS5kaXN0Y29kZT1yLGEuZGlzdGJpdHM9NX1mdW5jdGlvbiBsKGEsYixjLGQpe3ZhciBlLGY9YS5zdGF0ZTtyZXR1cm4gbnVsbD09PWYud2luZG93JiYoZi53c2l6ZT0xPDxmLndiaXRzLGYud25leHQ9MCxmLndoYXZlPTAsZi53aW5kb3c9bmV3IHMuQnVmOChmLndzaXplKSksZD49Zi53c2l6ZT8ocy5hcnJheVNldChmLndpbmRvdyxiLGMtZi53c2l6ZSxmLndzaXplLDApLGYud25leHQ9MCxmLndoYXZlPWYud3NpemUpOihlPWYud3NpemUtZi53bmV4dCxlPmQmJihlPWQpLHMuYXJyYXlTZXQoZi53aW5kb3csYixjLWQsZSxmLnduZXh0KSxkLT1lLGQ/KHMuYXJyYXlTZXQoZi53aW5kb3csYixjLWQsZCwwKSxmLnduZXh0PWQsZi53aGF2ZT1mLndzaXplKTooZi53bmV4dCs9ZSxmLnduZXh0PT09Zi53c2l6ZSYmKGYud25leHQ9MCksZi53aGF2ZTxmLndzaXplJiYoZi53aGF2ZSs9ZSkpKSwwfWZ1bmN0aW9uIG0oYSxiKXt2YXIgYyxlLGYsZyxoLGksaixtLG4sbyxwLHEscixwYSxxYSxyYSxzYSx0YSx1YSx2YSx3YSx4YSx5YSx6YSxBYT0wLEJhPW5ldyBzLkJ1ZjgoNCksQ2E9WzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdO2lmKCFhfHwhYS5zdGF0ZXx8IWEub3V0cHV0fHwhYS5pbnB1dCYmMCE9PWEuYXZhaWxfaW4pcmV0dXJuIEc7Yz1hLnN0YXRlLGMubW9kZT09PVcmJihjLm1vZGU9WCksaD1hLm5leHRfb3V0LGY9YS5vdXRwdXQsaj1hLmF2YWlsX291dCxnPWEubmV4dF9pbixlPWEuaW5wdXQsaT1hLmF2YWlsX2luLG09Yy5ob2xkLG49Yy5iaXRzLG89aSxwPWoseGE9RDthOmZvcig7Oylzd2l0Y2goYy5tb2RlKXtjYXNlIEw6aWYoMD09PWMud3JhcCl7Yy5tb2RlPVg7YnJlYWt9Zm9yKDtuPDE2Oyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9aWYoMiZjLndyYXAmJjM1NjE1PT09bSl7Yy5jaGVjaz0wLEJhWzBdPTI1NSZtLEJhWzFdPW0+Pj44JjI1NSxjLmNoZWNrPXUoYy5jaGVjayxCYSwyLDApLG09MCxuPTAsYy5tb2RlPU07YnJlYWt9aWYoYy5mbGFncz0wLGMuaGVhZCYmKGMuaGVhZC5kb25lPSExKSwhKDEmYy53cmFwKXx8KCgoMjU1Jm0pPDw4KSsobT4+OCkpJTMxKXthLm1zZz1cImluY29ycmVjdCBoZWFkZXIgY2hlY2tcIixjLm1vZGU9bWE7YnJlYWt9aWYoKDE1Jm0pIT09Syl7YS5tc2c9XCJ1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZFwiLGMubW9kZT1tYTticmVha31pZihtPj4+PTQsbi09NCx3YT0oMTUmbSkrOCwwPT09Yy53Yml0cyljLndiaXRzPXdhO2Vsc2UgaWYod2E+Yy53Yml0cyl7YS5tc2c9XCJpbnZhbGlkIHdpbmRvdyBzaXplXCIsYy5tb2RlPW1hO2JyZWFrfWMuZG1heD0xPDx3YSxhLmFkbGVyPWMuY2hlY2s9MSxjLm1vZGU9NTEyJm0/VTpXLG09MCxuPTA7YnJlYWs7Y2FzZSBNOmZvcig7bjwxNjspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWlmKGMuZmxhZ3M9bSwoMjU1JmMuZmxhZ3MpIT09Syl7YS5tc2c9XCJ1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZFwiLGMubW9kZT1tYTticmVha31pZig1NzM0NCZjLmZsYWdzKXthLm1zZz1cInVua25vd24gaGVhZGVyIGZsYWdzIHNldFwiLGMubW9kZT1tYTticmVha31jLmhlYWQmJihjLmhlYWQudGV4dD1tPj44JjEpLDUxMiZjLmZsYWdzJiYoQmFbMF09MjU1Jm0sQmFbMV09bT4+PjgmMjU1LGMuY2hlY2s9dShjLmNoZWNrLEJhLDIsMCkpLG09MCxuPTAsYy5tb2RlPU47Y2FzZSBOOmZvcig7bjwzMjspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWMuaGVhZCYmKGMuaGVhZC50aW1lPW0pLDUxMiZjLmZsYWdzJiYoQmFbMF09MjU1Jm0sQmFbMV09bT4+PjgmMjU1LEJhWzJdPW0+Pj4xNiYyNTUsQmFbM109bT4+PjI0JjI1NSxjLmNoZWNrPXUoYy5jaGVjayxCYSw0LDApKSxtPTAsbj0wLGMubW9kZT1PO2Nhc2UgTzpmb3IoO248MTY7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1jLmhlYWQmJihjLmhlYWQueGZsYWdzPTI1NSZtLGMuaGVhZC5vcz1tPj44KSw1MTImYy5mbGFncyYmKEJhWzBdPTI1NSZtLEJhWzFdPW0+Pj44JjI1NSxjLmNoZWNrPXUoYy5jaGVjayxCYSwyLDApKSxtPTAsbj0wLGMubW9kZT1QO2Nhc2UgUDppZigxMDI0JmMuZmxhZ3Mpe2Zvcig7bjwxNjspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWMubGVuZ3RoPW0sYy5oZWFkJiYoYy5oZWFkLmV4dHJhX2xlbj1tKSw1MTImYy5mbGFncyYmKEJhWzBdPTI1NSZtLEJhWzFdPW0+Pj44JjI1NSxjLmNoZWNrPXUoYy5jaGVjayxCYSwyLDApKSxtPTAsbj0wfWVsc2UgYy5oZWFkJiYoYy5oZWFkLmV4dHJhPW51bGwpO2MubW9kZT1RO2Nhc2UgUTppZigxMDI0JmMuZmxhZ3MmJihxPWMubGVuZ3RoLHE+aSYmKHE9aSkscSYmKGMuaGVhZCYmKHdhPWMuaGVhZC5leHRyYV9sZW4tYy5sZW5ndGgsYy5oZWFkLmV4dHJhfHwoYy5oZWFkLmV4dHJhPW5ldyBBcnJheShjLmhlYWQuZXh0cmFfbGVuKSkscy5hcnJheVNldChjLmhlYWQuZXh0cmEsZSxnLHEsd2EpKSw1MTImYy5mbGFncyYmKGMuY2hlY2s9dShjLmNoZWNrLGUscSxnKSksaS09cSxnKz1xLGMubGVuZ3RoLT1xKSxjLmxlbmd0aCkpYnJlYWsgYTtjLmxlbmd0aD0wLGMubW9kZT1SO2Nhc2UgUjppZigyMDQ4JmMuZmxhZ3Mpe2lmKDA9PT1pKWJyZWFrIGE7cT0wO2RvIHdhPWVbZytxKytdLGMuaGVhZCYmd2EmJmMubGVuZ3RoPDY1NTM2JiYoYy5oZWFkLm5hbWUrPVN0cmluZy5mcm9tQ2hhckNvZGUod2EpKTt3aGlsZSh3YSYmcTxpKTtpZig1MTImYy5mbGFncyYmKGMuY2hlY2s9dShjLmNoZWNrLGUscSxnKSksaS09cSxnKz1xLHdhKWJyZWFrIGF9ZWxzZSBjLmhlYWQmJihjLmhlYWQubmFtZT1udWxsKTtjLmxlbmd0aD0wLGMubW9kZT1TO2Nhc2UgUzppZig0MDk2JmMuZmxhZ3Mpe2lmKDA9PT1pKWJyZWFrIGE7cT0wO2RvIHdhPWVbZytxKytdLGMuaGVhZCYmd2EmJmMubGVuZ3RoPDY1NTM2JiYoYy5oZWFkLmNvbW1lbnQrPVN0cmluZy5mcm9tQ2hhckNvZGUod2EpKTt3aGlsZSh3YSYmcTxpKTtpZig1MTImYy5mbGFncyYmKGMuY2hlY2s9dShjLmNoZWNrLGUscSxnKSksaS09cSxnKz1xLHdhKWJyZWFrIGF9ZWxzZSBjLmhlYWQmJihjLmhlYWQuY29tbWVudD1udWxsKTtjLm1vZGU9VDtjYXNlIFQ6aWYoNTEyJmMuZmxhZ3Mpe2Zvcig7bjwxNjspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWlmKG0hPT0oNjU1MzUmYy5jaGVjaykpe2EubXNnPVwiaGVhZGVyIGNyYyBtaXNtYXRjaFwiLGMubW9kZT1tYTticmVha31tPTAsbj0wfWMuaGVhZCYmKGMuaGVhZC5oY3JjPWMuZmxhZ3M+PjkmMSxjLmhlYWQuZG9uZT0hMCksYS5hZGxlcj1jLmNoZWNrPTAsYy5tb2RlPVc7YnJlYWs7Y2FzZSBVOmZvcig7bjwzMjspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWEuYWRsZXI9Yy5jaGVjaz1kKG0pLG09MCxuPTAsYy5tb2RlPVY7Y2FzZSBWOmlmKDA9PT1jLmhhdmVkaWN0KXJldHVybiBhLm5leHRfb3V0PWgsYS5hdmFpbF9vdXQ9aixhLm5leHRfaW49ZyxhLmF2YWlsX2luPWksYy5ob2xkPW0sYy5iaXRzPW4sRjthLmFkbGVyPWMuY2hlY2s9MSxjLm1vZGU9VztjYXNlIFc6aWYoYj09PUJ8fGI9PT1DKWJyZWFrIGE7Y2FzZSBYOmlmKGMubGFzdCl7bT4+Pj03Jm4sbi09NyZuLGMubW9kZT1qYTticmVha31mb3IoO248Mzspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fXN3aXRjaChjLmxhc3Q9MSZtLG0+Pj49MSxuLT0xLDMmbSl7Y2FzZSAwOmMubW9kZT1ZO2JyZWFrO2Nhc2UgMTppZihrKGMpLGMubW9kZT1jYSxiPT09Qyl7bT4+Pj0yLG4tPTI7YnJlYWsgYX1icmVhaztjYXNlIDI6Yy5tb2RlPV87YnJlYWs7Y2FzZSAzOmEubXNnPVwiaW52YWxpZCBibG9jayB0eXBlXCIsYy5tb2RlPW1hfW0+Pj49MixuLT0yO2JyZWFrO2Nhc2UgWTpmb3IobT4+Pj03Jm4sbi09NyZuO248MzI7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1pZigoNjU1MzUmbSkhPT0obT4+PjE2XjY1NTM1KSl7YS5tc2c9XCJpbnZhbGlkIHN0b3JlZCBibG9jayBsZW5ndGhzXCIsYy5tb2RlPW1hO2JyZWFrfWlmKGMubGVuZ3RoPTY1NTM1Jm0sbT0wLG49MCxjLm1vZGU9WixiPT09QylicmVhayBhO2Nhc2UgWjpjLm1vZGU9JDtjYXNlICQ6aWYocT1jLmxlbmd0aCl7aWYocT5pJiYocT1pKSxxPmomJihxPWopLDA9PT1xKWJyZWFrIGE7cy5hcnJheVNldChmLGUsZyxxLGgpLGktPXEsZys9cSxqLT1xLGgrPXEsYy5sZW5ndGgtPXE7YnJlYWt9Yy5tb2RlPVc7YnJlYWs7Y2FzZSBfOmZvcig7bjwxNDspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWlmKGMubmxlbj0oMzEmbSkrMjU3LG0+Pj49NSxuLT01LGMubmRpc3Q9KDMxJm0pKzEsbT4+Pj01LG4tPTUsYy5uY29kZT0oMTUmbSkrNCxtPj4+PTQsbi09NCxjLm5sZW4+Mjg2fHxjLm5kaXN0PjMwKXthLm1zZz1cInRvbyBtYW55IGxlbmd0aCBvciBkaXN0YW5jZSBzeW1ib2xzXCIsYy5tb2RlPW1hO2JyZWFrfWMuaGF2ZT0wLGMubW9kZT1hYTtjYXNlIGFhOmZvcig7Yy5oYXZlPGMubmNvZGU7KXtmb3IoO248Mzspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWMubGVuc1tDYVtjLmhhdmUrK11dPTcmbSxtPj4+PTMsbi09M31mb3IoO2MuaGF2ZTwxOTspYy5sZW5zW0NhW2MuaGF2ZSsrXV09MDtpZihjLmxlbmNvZGU9Yy5sZW5keW4sYy5sZW5iaXRzPTcseWE9e2JpdHM6Yy5sZW5iaXRzfSx4YT13KHgsYy5sZW5zLDAsMTksYy5sZW5jb2RlLDAsYy53b3JrLHlhKSxjLmxlbmJpdHM9eWEuYml0cyx4YSl7YS5tc2c9XCJpbnZhbGlkIGNvZGUgbGVuZ3RocyBzZXRcIixjLm1vZGU9bWE7YnJlYWt9Yy5oYXZlPTAsYy5tb2RlPWJhO2Nhc2UgYmE6Zm9yKDtjLmhhdmU8Yy5ubGVuK2MubmRpc3Q7KXtmb3IoO0FhPWMubGVuY29kZVttJigxPDxjLmxlbmJpdHMpLTFdLHFhPUFhPj4+MjQscmE9QWE+Pj4xNiYyNTUsc2E9NjU1MzUmQWEsIShxYTw9bik7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1pZihzYTwxNiltPj4+PXFhLG4tPXFhLGMubGVuc1tjLmhhdmUrK109c2E7ZWxzZXtpZigxNj09PXNhKXtmb3IoemE9cWErMjtuPHphOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9aWYobT4+Pj1xYSxuLT1xYSwwPT09Yy5oYXZlKXthLm1zZz1cImludmFsaWQgYml0IGxlbmd0aCByZXBlYXRcIixjLm1vZGU9bWE7YnJlYWt9d2E9Yy5sZW5zW2MuaGF2ZS0xXSxxPTMrKDMmbSksbT4+Pj0yLG4tPTJ9ZWxzZSBpZigxNz09PXNhKXtmb3IoemE9cWErMztuPHphOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9bT4+Pj1xYSxuLT1xYSx3YT0wLHE9MysoNyZtKSxtPj4+PTMsbi09M31lbHNle2Zvcih6YT1xYSs3O248emE7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1tPj4+PXFhLG4tPXFhLHdhPTAscT0xMSsoMTI3Jm0pLG0+Pj49NyxuLT03fWlmKGMuaGF2ZStxPmMubmxlbitjLm5kaXN0KXthLm1zZz1cImludmFsaWQgYml0IGxlbmd0aCByZXBlYXRcIixjLm1vZGU9bWE7YnJlYWt9Zm9yKDtxLS07KWMubGVuc1tjLmhhdmUrK109d2F9fWlmKGMubW9kZT09PW1hKWJyZWFrO2lmKDA9PT1jLmxlbnNbMjU2XSl7YS5tc2c9XCJpbnZhbGlkIGNvZGUgLS0gbWlzc2luZyBlbmQtb2YtYmxvY2tcIixjLm1vZGU9bWE7YnJlYWt9aWYoYy5sZW5iaXRzPTkseWE9e2JpdHM6Yy5sZW5iaXRzfSx4YT13KHksYy5sZW5zLDAsYy5ubGVuLGMubGVuY29kZSwwLGMud29yayx5YSksYy5sZW5iaXRzPXlhLmJpdHMseGEpe2EubXNnPVwiaW52YWxpZCBsaXRlcmFsL2xlbmd0aHMgc2V0XCIsYy5tb2RlPW1hO2JyZWFrfWlmKGMuZGlzdGJpdHM9NixjLmRpc3Rjb2RlPWMuZGlzdGR5bix5YT17Yml0czpjLmRpc3RiaXRzfSx4YT13KHosYy5sZW5zLGMubmxlbixjLm5kaXN0LGMuZGlzdGNvZGUsMCxjLndvcmsseWEpLGMuZGlzdGJpdHM9eWEuYml0cyx4YSl7YS5tc2c9XCJpbnZhbGlkIGRpc3RhbmNlcyBzZXRcIixjLm1vZGU9bWE7YnJlYWt9aWYoYy5tb2RlPWNhLGI9PT1DKWJyZWFrIGE7Y2FzZSBjYTpjLm1vZGU9ZGE7Y2FzZSBkYTppZihpPj02JiZqPj0yNTgpe2EubmV4dF9vdXQ9aCxhLmF2YWlsX291dD1qLGEubmV4dF9pbj1nLGEuYXZhaWxfaW49aSxjLmhvbGQ9bSxjLmJpdHM9bix2KGEscCksaD1hLm5leHRfb3V0LGY9YS5vdXRwdXQsaj1hLmF2YWlsX291dCxnPWEubmV4dF9pbixlPWEuaW5wdXQsaT1hLmF2YWlsX2luLG09Yy5ob2xkLG49Yy5iaXRzLGMubW9kZT09PVcmJihjLmJhY2s9LTEpO2JyZWFrfWZvcihjLmJhY2s9MDtBYT1jLmxlbmNvZGVbbSYoMTw8Yy5sZW5iaXRzKS0xXSxxYT1BYT4+PjI0LHJhPUFhPj4+MTYmMjU1LHNhPTY1NTM1JkFhLCEocWE8PW4pOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9aWYocmEmJjA9PT0oMjQwJnJhKSl7Zm9yKHRhPXFhLHVhPXJhLHZhPXNhO0FhPWMubGVuY29kZVt2YSsoKG0mKDE8PHRhK3VhKS0xKT4+dGEpXSxxYT1BYT4+PjI0LHJhPUFhPj4+MTYmMjU1LHNhPTY1NTM1JkFhLCEodGErcWE8PW4pOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9bT4+Pj10YSxuLT10YSxjLmJhY2srPXRhfWlmKG0+Pj49cWEsbi09cWEsYy5iYWNrKz1xYSxjLmxlbmd0aD1zYSwwPT09cmEpe2MubW9kZT1pYTticmVha31pZigzMiZyYSl7Yy5iYWNrPS0xLGMubW9kZT1XO2JyZWFrfWlmKDY0JnJhKXthLm1zZz1cImludmFsaWQgbGl0ZXJhbC9sZW5ndGggY29kZVwiLGMubW9kZT1tYTticmVha31jLmV4dHJhPTE1JnJhLGMubW9kZT1lYTtjYXNlIGVhOmlmKGMuZXh0cmEpe2Zvcih6YT1jLmV4dHJhO248emE7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1jLmxlbmd0aCs9bSYoMTw8Yy5leHRyYSktMSxtPj4+PWMuZXh0cmEsbi09Yy5leHRyYSxjLmJhY2srPWMuZXh0cmF9Yy53YXM9Yy5sZW5ndGgsYy5tb2RlPWZhO2Nhc2UgZmE6Zm9yKDtBYT1jLmRpc3Rjb2RlW20mKDE8PGMuZGlzdGJpdHMpLTFdLHFhPUFhPj4+MjQscmE9QWE+Pj4xNiYyNTUsc2E9NjU1MzUmQWEsIShxYTw9bik7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1pZigwPT09KDI0MCZyYSkpe2Zvcih0YT1xYSx1YT1yYSx2YT1zYTtBYT1jLmRpc3Rjb2RlW3ZhKygobSYoMTw8dGErdWEpLTEpPj50YSldLHFhPUFhPj4+MjQscmE9QWE+Pj4xNiYyNTUsc2E9NjU1MzUmQWEsISh0YStxYTw9bik7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1tPj4+PXRhLG4tPXRhLGMuYmFjays9dGF9aWYobT4+Pj1xYSxuLT1xYSxjLmJhY2srPXFhLDY0JnJhKXthLm1zZz1cImludmFsaWQgZGlzdGFuY2UgY29kZVwiLGMubW9kZT1tYTticmVha31jLm9mZnNldD1zYSxjLmV4dHJhPTE1JnJhLGMubW9kZT1nYTtjYXNlIGdhOmlmKGMuZXh0cmEpe2Zvcih6YT1jLmV4dHJhO248emE7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1jLm9mZnNldCs9bSYoMTw8Yy5leHRyYSktMSxtPj4+PWMuZXh0cmEsbi09Yy5leHRyYSxjLmJhY2srPWMuZXh0cmF9aWYoYy5vZmZzZXQ+Yy5kbWF4KXthLm1zZz1cImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrXCIsYy5tb2RlPW1hO2JyZWFrfWMubW9kZT1oYTtjYXNlIGhhOmlmKDA9PT1qKWJyZWFrIGE7aWYocT1wLWosYy5vZmZzZXQ+cSl7aWYocT1jLm9mZnNldC1xLHE+Yy53aGF2ZSYmYy5zYW5lKXthLm1zZz1cImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrXCIsYy5tb2RlPW1hO2JyZWFrfXE+Yy53bmV4dD8ocS09Yy53bmV4dCxyPWMud3NpemUtcSk6cj1jLnduZXh0LXEscT5jLmxlbmd0aCYmKHE9Yy5sZW5ndGgpLHBhPWMud2luZG93fWVsc2UgcGE9ZixyPWgtYy5vZmZzZXQscT1jLmxlbmd0aDtxPmomJihxPWopLGotPXEsYy5sZW5ndGgtPXE7ZG8gZltoKytdPXBhW3IrK107d2hpbGUoLS1xKTswPT09Yy5sZW5ndGgmJihjLm1vZGU9ZGEpO2JyZWFrO2Nhc2UgaWE6aWYoMD09PWopYnJlYWsgYTtmW2grK109Yy5sZW5ndGgsai0tLGMubW9kZT1kYTticmVhaztjYXNlIGphOmlmKGMud3JhcCl7Zm9yKDtuPDMyOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbXw9ZVtnKytdPDxuLG4rPTh9aWYocC09aixhLnRvdGFsX291dCs9cCxjLnRvdGFsKz1wLHAmJihhLmFkbGVyPWMuY2hlY2s9Yy5mbGFncz91KGMuY2hlY2ssZixwLGgtcCk6dChjLmNoZWNrLGYscCxoLXApKSxwPWosKGMuZmxhZ3M/bTpkKG0pKSE9PWMuY2hlY2spe2EubXNnPVwiaW5jb3JyZWN0IGRhdGEgY2hlY2tcIixjLm1vZGU9bWE7YnJlYWt9bT0wLG49MH1jLm1vZGU9a2E7Y2FzZSBrYTppZihjLndyYXAmJmMuZmxhZ3Mpe2Zvcig7bjwzMjspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWlmKG0hPT0oNDI5NDk2NzI5NSZjLnRvdGFsKSl7YS5tc2c9XCJpbmNvcnJlY3QgbGVuZ3RoIGNoZWNrXCIsYy5tb2RlPW1hO2JyZWFrfW09MCxuPTB9Yy5tb2RlPWxhO2Nhc2UgbGE6eGE9RTticmVhayBhO2Nhc2UgbWE6eGE9SDticmVhayBhO2Nhc2UgbmE6cmV0dXJuIEk7Y2FzZSBvYTpkZWZhdWx0OnJldHVybiBHfXJldHVybiBhLm5leHRfb3V0PWgsYS5hdmFpbF9vdXQ9aixhLm5leHRfaW49ZyxhLmF2YWlsX2luPWksYy5ob2xkPW0sYy5iaXRzPW4sKGMud3NpemV8fHAhPT1hLmF2YWlsX291dCYmYy5tb2RlPG1hJiYoYy5tb2RlPGphfHxiIT09QSkpJiZsKGEsYS5vdXRwdXQsYS5uZXh0X291dCxwLWEuYXZhaWxfb3V0KT8oYy5tb2RlPW5hLEkpOihvLT1hLmF2YWlsX2luLHAtPWEuYXZhaWxfb3V0LGEudG90YWxfaW4rPW8sYS50b3RhbF9vdXQrPXAsYy50b3RhbCs9cCxjLndyYXAmJnAmJihhLmFkbGVyPWMuY2hlY2s9Yy5mbGFncz91KGMuY2hlY2ssZixwLGEubmV4dF9vdXQtcCk6dChjLmNoZWNrLGYscCxhLm5leHRfb3V0LXApKSxhLmRhdGFfdHlwZT1jLmJpdHMrKGMubGFzdD82NDowKSsoYy5tb2RlPT09Vz8xMjg6MCkrKGMubW9kZT09PWNhfHxjLm1vZGU9PT1aPzI1NjowKSwoMD09PW8mJjA9PT1wfHxiPT09QSkmJnhhPT09RCYmKHhhPUopLHhhKX1mdW5jdGlvbiBuKGEpe2lmKCFhfHwhYS5zdGF0ZSlyZXR1cm4gRzt2YXIgYj1hLnN0YXRlO3JldHVybiBiLndpbmRvdyYmKGIud2luZG93PW51bGwpLGEuc3RhdGU9bnVsbCxEfWZ1bmN0aW9uIG8oYSxiKXt2YXIgYztyZXR1cm4gYSYmYS5zdGF0ZT8oYz1hLnN0YXRlLDA9PT0oMiZjLndyYXApP0c6KGMuaGVhZD1iLGIuZG9uZT0hMSxEKSk6R31mdW5jdGlvbiBwKGEsYil7dmFyIGMsZCxlLGY9Yi5sZW5ndGg7cmV0dXJuIGEmJmEuc3RhdGU/KGM9YS5zdGF0ZSwwIT09Yy53cmFwJiZjLm1vZGUhPT1WP0c6Yy5tb2RlPT09ViYmKGQ9MSxkPXQoZCxiLGYsMCksZCE9PWMuY2hlY2spP0g6KGU9bChhLGIsZixmKSk/KGMubW9kZT1uYSxJKTooYy5oYXZlZGljdD0xLEQpKTpHfXZhciBxLHIscz1hKFwiLi4vdXRpbHMvY29tbW9uXCIpLHQ9YShcIi4vYWRsZXIzMlwiKSx1PWEoXCIuL2NyYzMyXCIpLHY9YShcIi4vaW5mZmFzdFwiKSx3PWEoXCIuL2luZnRyZWVzXCIpLHg9MCx5PTEsej0yLEE9NCxCPTUsQz02LEQ9MCxFPTEsRj0yLEc9LTIsSD0tMyxJPS00LEo9LTUsSz04LEw9MSxNPTIsTj0zLE89NCxQPTUsUT02LFI9NyxTPTgsVD05LFU9MTAsVj0xMSxXPTEyLFg9MTMsWT0xNCxaPTE1LCQ9MTYsXz0xNyxhYT0xOCxiYT0xOSxjYT0yMCxkYT0yMSxlYT0yMixmYT0yMyxnYT0yNCxoYT0yNSxpYT0yNixqYT0yNyxrYT0yOCxsYT0yOSxtYT0zMCxuYT0zMSxvYT0zMixwYT04NTIscWE9NTkyLHJhPTE1LHNhPXJhLHRhPSEwO2MuaW5mbGF0ZVJlc2V0PWcsYy5pbmZsYXRlUmVzZXQyPWgsYy5pbmZsYXRlUmVzZXRLZWVwPWYsYy5pbmZsYXRlSW5pdD1qLGMuaW5mbGF0ZUluaXQyPWksYy5pbmZsYXRlPW0sYy5pbmZsYXRlRW5kPW4sYy5pbmZsYXRlR2V0SGVhZGVyPW8sYy5pbmZsYXRlU2V0RGljdGlvbmFyeT1wLGMuaW5mbGF0ZUluZm89XCJwYWtvIGluZmxhdGUgKGZyb20gTm9kZWNhIHByb2plY3QpXCJ9LHtcIi4uL3V0aWxzL2NvbW1vblwiOjYyLFwiLi9hZGxlcjMyXCI6NjQsXCIuL2NyYzMyXCI6NjYsXCIuL2luZmZhc3RcIjo2OSxcIi4vaW5mdHJlZXNcIjo3MX1dLDcxOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGQ9YShcIi4uL3V0aWxzL2NvbW1vblwiKSxlPTE1LGY9ODUyLGc9NTkyLGg9MCxpPTEsaj0yLGs9WzMsNCw1LDYsNyw4LDksMTAsMTEsMTMsMTUsMTcsMTksMjMsMjcsMzEsMzUsNDMsNTEsNTksNjcsODMsOTksMTE1LDEzMSwxNjMsMTk1LDIyNywyNTgsMCwwXSxsPVsxNiwxNiwxNiwxNiwxNiwxNiwxNiwxNiwxNywxNywxNywxNywxOCwxOCwxOCwxOCwxOSwxOSwxOSwxOSwyMCwyMCwyMCwyMCwyMSwyMSwyMSwyMSwxNiw3Miw3OF0sbT1bMSwyLDMsNCw1LDcsOSwxMywxNywyNSwzMyw0OSw2NSw5NywxMjksMTkzLDI1NywzODUsNTEzLDc2OSwxMDI1LDE1MzcsMjA0OSwzMDczLDQwOTcsNjE0NSw4MTkzLDEyMjg5LDE2Mzg1LDI0NTc3LDAsMF0sbj1bMTYsMTYsMTYsMTYsMTcsMTcsMTgsMTgsMTksMTksMjAsMjAsMjEsMjEsMjIsMjIsMjMsMjMsMjQsMjQsMjUsMjUsMjYsMjYsMjcsMjcsMjgsMjgsMjksMjksNjQsNjRdO2IuZXhwb3J0cz1mdW5jdGlvbihhLGIsYyxvLHAscSxyLHMpe3ZhciB0LHUsdix3LHgseSx6LEEsQixDPXMuYml0cyxEPTAsRT0wLEY9MCxHPTAsSD0wLEk9MCxKPTAsSz0wLEw9MCxNPTAsTj1udWxsLE89MCxQPW5ldyBkLkJ1ZjE2KGUrMSksUT1uZXcgZC5CdWYxNihlKzEpLFI9bnVsbCxTPTA7Zm9yKEQ9MDtEPD1lO0QrKylQW0RdPTA7Zm9yKEU9MDtFPG87RSsrKVBbYltjK0VdXSsrO2ZvcihIPUMsRz1lO0c+PTEmJjA9PT1QW0ddO0ctLSk7aWYoSD5HJiYoSD1HKSwwPT09RylyZXR1cm4gcFtxKytdPTIwOTcxNTIwLHBbcSsrXT0yMDk3MTUyMCxzLmJpdHM9MSwwO2ZvcihGPTE7RjxHJiYwPT09UFtGXTtGKyspO2ZvcihIPEYmJihIPUYpLEs9MSxEPTE7RDw9ZTtEKyspaWYoSzw8PTEsSy09UFtEXSxLPDApcmV0dXJuLTE7aWYoSz4wJiYoYT09PWh8fDEhPT1HKSlyZXR1cm4tMTtmb3IoUVsxXT0wLEQ9MTtEPGU7RCsrKVFbRCsxXT1RW0RdK1BbRF07Zm9yKEU9MDtFPG87RSsrKTAhPT1iW2MrRV0mJihyW1FbYltjK0VdXSsrXT1FKTtpZihhPT09aD8oTj1SPXIseT0xOSk6YT09PWk/KE49ayxPLT0yNTcsUj1sLFMtPTI1Nyx5PTI1Nik6KE49bSxSPW4seT0tMSksTT0wLEU9MCxEPUYseD1xLEk9SCxKPTAsdj0tMSxMPTE8PEgsdz1MLTEsYT09PWkmJkw+Znx8YT09PWomJkw+ZylyZXR1cm4gMTtmb3IoOzspe3o9RC1KLHJbRV08eT8oQT0wLEI9cltFXSk6cltFXT55PyhBPVJbUytyW0VdXSxCPU5bTytyW0VdXSk6KEE9OTYsQj0wKSx0PTE8PEQtSix1PTE8PEksRj11O2RvIHUtPXQscFt4KyhNPj5KKSt1XT16PDwyNHxBPDwxNnxCfDA7d2hpbGUoMCE9PXUpO2Zvcih0PTE8PEQtMTtNJnQ7KXQ+Pj0xO2lmKDAhPT10PyhNJj10LTEsTSs9dCk6TT0wLEUrKywwPT09LS1QW0RdKXtpZihEPT09RylicmVhaztEPWJbYytyW0VdXX1pZihEPkgmJihNJncpIT09dil7Zm9yKDA9PT1KJiYoSj1IKSx4Kz1GLEk9RC1KLEs9MTw8STtJK0o8RyYmKEstPVBbSStKXSwhKEs8PTApKTspSSsrLEs8PD0xO2lmKEwrPTE8PEksYT09PWkmJkw+Znx8YT09PWomJkw+ZylyZXR1cm4gMTt2PU0mdyxwW3ZdPUg8PDI0fEk8PDE2fHgtcXwwfX1yZXR1cm4gMCE9PU0mJihwW3grTV09RC1KPDwyNHw2NDw8MTZ8MCkscy5iaXRzPUgsMH19LHtcIi4uL3V0aWxzL2NvbW1vblwiOjYyfV0sNzI6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtiLmV4cG9ydHM9ezI6XCJuZWVkIGRpY3Rpb25hcnlcIiwxOlwic3RyZWFtIGVuZFwiLDA6XCJcIixcIi0xXCI6XCJmaWxlIGVycm9yXCIsXCItMlwiOlwic3RyZWFtIGVycm9yXCIsXCItM1wiOlwiZGF0YSBlcnJvclwiLFwiLTRcIjpcImluc3VmZmljaWVudCBtZW1vcnlcIixcIi01XCI6XCJidWZmZXIgZXJyb3JcIixcIi02XCI6XCJpbmNvbXBhdGlibGUgdmVyc2lvblwifX0se31dLDczOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXtmb3IodmFyIGI9YS5sZW5ndGg7LS1iPj0wOylhW2JdPTB9ZnVuY3Rpb24gZShhLGIsYyxkLGUpe3RoaXMuc3RhdGljX3RyZWU9YSx0aGlzLmV4dHJhX2JpdHM9Yix0aGlzLmV4dHJhX2Jhc2U9Yyx0aGlzLmVsZW1zPWQsdGhpcy5tYXhfbGVuZ3RoPWUsdGhpcy5oYXNfc3RyZWU9YSYmYS5sZW5ndGh9ZnVuY3Rpb24gZihhLGIpe3RoaXMuZHluX3RyZWU9YSx0aGlzLm1heF9jb2RlPTAsdGhpcy5zdGF0X2Rlc2M9Yn1mdW5jdGlvbiBnKGEpe3JldHVybiBhPDI1Nj9pYVthXTppYVsyNTYrKGE+Pj43KV19ZnVuY3Rpb24gaChhLGIpe2EucGVuZGluZ19idWZbYS5wZW5kaW5nKytdPTI1NSZiLGEucGVuZGluZ19idWZbYS5wZW5kaW5nKytdPWI+Pj44JjI1NX1mdW5jdGlvbiBpKGEsYixjKXthLmJpX3ZhbGlkPlgtYz8oYS5iaV9idWZ8PWI8PGEuYmlfdmFsaWQmNjU1MzUsaChhLGEuYmlfYnVmKSxhLmJpX2J1Zj1iPj5YLWEuYmlfdmFsaWQsYS5iaV92YWxpZCs9Yy1YKTooYS5iaV9idWZ8PWI8PGEuYmlfdmFsaWQmNjU1MzUsYS5iaV92YWxpZCs9Yyl9ZnVuY3Rpb24gaihhLGIsYyl7aShhLGNbMipiXSxjWzIqYisxXSl9ZnVuY3Rpb24gayhhLGIpe3ZhciBjPTA7ZG8gY3w9MSZhLGE+Pj49MSxjPDw9MTt3aGlsZSgtLWI+MCk7cmV0dXJuIGM+Pj4xfWZ1bmN0aW9uIGwoYSl7MTY9PT1hLmJpX3ZhbGlkPyhoKGEsYS5iaV9idWYpLGEuYmlfYnVmPTAsYS5iaV92YWxpZD0wKTphLmJpX3ZhbGlkPj04JiYoYS5wZW5kaW5nX2J1ZlthLnBlbmRpbmcrK109MjU1JmEuYmlfYnVmLGEuYmlfYnVmPj49OCxhLmJpX3ZhbGlkLT04KX1mdW5jdGlvbiBtKGEsYil7dmFyIGMsZCxlLGYsZyxoLGk9Yi5keW5fdHJlZSxqPWIubWF4X2NvZGUsaz1iLnN0YXRfZGVzYy5zdGF0aWNfdHJlZSxsPWIuc3RhdF9kZXNjLmhhc19zdHJlZSxtPWIuc3RhdF9kZXNjLmV4dHJhX2JpdHMsbj1iLnN0YXRfZGVzYy5leHRyYV9iYXNlLG89Yi5zdGF0X2Rlc2MubWF4X2xlbmd0aCxwPTA7Zm9yKGY9MDtmPD1XO2YrKylhLmJsX2NvdW50W2ZdPTA7Zm9yKGlbMiphLmhlYXBbYS5oZWFwX21heF0rMV09MCxcbmM9YS5oZWFwX21heCsxO2M8VjtjKyspZD1hLmhlYXBbY10sZj1pWzIqaVsyKmQrMV0rMV0rMSxmPm8mJihmPW8scCsrKSxpWzIqZCsxXT1mLGQ+anx8KGEuYmxfY291bnRbZl0rKyxnPTAsZD49biYmKGc9bVtkLW5dKSxoPWlbMipkXSxhLm9wdF9sZW4rPWgqKGYrZyksbCYmKGEuc3RhdGljX2xlbis9aCooa1syKmQrMV0rZykpKTtpZigwIT09cCl7ZG97Zm9yKGY9by0xOzA9PT1hLmJsX2NvdW50W2ZdOylmLS07YS5ibF9jb3VudFtmXS0tLGEuYmxfY291bnRbZisxXSs9MixhLmJsX2NvdW50W29dLS0scC09Mn13aGlsZShwPjApO2ZvcihmPW87MCE9PWY7Zi0tKWZvcihkPWEuYmxfY291bnRbZl07MCE9PWQ7KWU9YS5oZWFwWy0tY10sZT5qfHwoaVsyKmUrMV0hPT1mJiYoYS5vcHRfbGVuKz0oZi1pWzIqZSsxXSkqaVsyKmVdLGlbMiplKzFdPWYpLGQtLSl9fWZ1bmN0aW9uIG4oYSxiLGMpe3ZhciBkLGUsZj1uZXcgQXJyYXkoVysxKSxnPTA7Zm9yKGQ9MTtkPD1XO2QrKylmW2RdPWc9ZytjW2QtMV08PDE7Zm9yKGU9MDtlPD1iO2UrKyl7dmFyIGg9YVsyKmUrMV07MCE9PWgmJihhWzIqZV09ayhmW2hdKyssaCkpfX1mdW5jdGlvbiBvKCl7dmFyIGEsYixjLGQsZixnPW5ldyBBcnJheShXKzEpO2ZvcihjPTAsZD0wO2Q8US0xO2QrKylmb3Ioa2FbZF09YyxhPTA7YTwxPDxiYVtkXTthKyspamFbYysrXT1kO2ZvcihqYVtjLTFdPWQsZj0wLGQ9MDtkPDE2O2QrKylmb3IobGFbZF09ZixhPTA7YTwxPDxjYVtkXTthKyspaWFbZisrXT1kO2ZvcihmPj49NztkPFQ7ZCsrKWZvcihsYVtkXT1mPDw3LGE9MDthPDE8PGNhW2RdLTc7YSsrKWlhWzI1NitmKytdPWQ7Zm9yKGI9MDtiPD1XO2IrKylnW2JdPTA7Zm9yKGE9MDthPD0xNDM7KWdhWzIqYSsxXT04LGErKyxnWzhdKys7Zm9yKDthPD0yNTU7KWdhWzIqYSsxXT05LGErKyxnWzldKys7Zm9yKDthPD0yNzk7KWdhWzIqYSsxXT03LGErKyxnWzddKys7Zm9yKDthPD0yODc7KWdhWzIqYSsxXT04LGErKyxnWzhdKys7Zm9yKG4oZ2EsUysxLGcpLGE9MDthPFQ7YSsrKWhhWzIqYSsxXT01LGhhWzIqYV09ayhhLDUpO21hPW5ldyBlKGdhLGJhLFIrMSxTLFcpLG5hPW5ldyBlKGhhLGNhLDAsVCxXKSxvYT1uZXcgZShuZXcgQXJyYXkoMCksZGEsMCxVLFkpfWZ1bmN0aW9uIHAoYSl7dmFyIGI7Zm9yKGI9MDtiPFM7YisrKWEuZHluX2x0cmVlWzIqYl09MDtmb3IoYj0wO2I8VDtiKyspYS5keW5fZHRyZWVbMipiXT0wO2ZvcihiPTA7YjxVO2IrKylhLmJsX3RyZWVbMipiXT0wO2EuZHluX2x0cmVlWzIqWl09MSxhLm9wdF9sZW49YS5zdGF0aWNfbGVuPTAsYS5sYXN0X2xpdD1hLm1hdGNoZXM9MH1mdW5jdGlvbiBxKGEpe2EuYmlfdmFsaWQ+OD9oKGEsYS5iaV9idWYpOmEuYmlfdmFsaWQ+MCYmKGEucGVuZGluZ19idWZbYS5wZW5kaW5nKytdPWEuYmlfYnVmKSxhLmJpX2J1Zj0wLGEuYmlfdmFsaWQ9MH1mdW5jdGlvbiByKGEsYixjLGQpe3EoYSksZCYmKGgoYSxjKSxoKGEsfmMpKSxHLmFycmF5U2V0KGEucGVuZGluZ19idWYsYS53aW5kb3csYixjLGEucGVuZGluZyksYS5wZW5kaW5nKz1jfWZ1bmN0aW9uIHMoYSxiLGMsZCl7dmFyIGU9MipiLGY9MipjO3JldHVybiBhW2VdPGFbZl18fGFbZV09PT1hW2ZdJiZkW2JdPD1kW2NdfWZ1bmN0aW9uIHQoYSxiLGMpe2Zvcih2YXIgZD1hLmhlYXBbY10sZT1jPDwxO2U8PWEuaGVhcF9sZW4mJihlPGEuaGVhcF9sZW4mJnMoYixhLmhlYXBbZSsxXSxhLmhlYXBbZV0sYS5kZXB0aCkmJmUrKywhcyhiLGQsYS5oZWFwW2VdLGEuZGVwdGgpKTspYS5oZWFwW2NdPWEuaGVhcFtlXSxjPWUsZTw8PTE7YS5oZWFwW2NdPWR9ZnVuY3Rpb24gdShhLGIsYyl7dmFyIGQsZSxmLGgsaz0wO2lmKDAhPT1hLmxhc3RfbGl0KWRvIGQ9YS5wZW5kaW5nX2J1ZlthLmRfYnVmKzIqa108PDh8YS5wZW5kaW5nX2J1ZlthLmRfYnVmKzIqaysxXSxlPWEucGVuZGluZ19idWZbYS5sX2J1ZitrXSxrKyssMD09PWQ/aihhLGUsYik6KGY9amFbZV0saihhLGYrUisxLGIpLGg9YmFbZl0sMCE9PWgmJihlLT1rYVtmXSxpKGEsZSxoKSksZC0tLGY9ZyhkKSxqKGEsZixjKSxoPWNhW2ZdLDAhPT1oJiYoZC09bGFbZl0saShhLGQsaCkpKTt3aGlsZShrPGEubGFzdF9saXQpO2ooYSxaLGIpfWZ1bmN0aW9uIHYoYSxiKXt2YXIgYyxkLGUsZj1iLmR5bl90cmVlLGc9Yi5zdGF0X2Rlc2Muc3RhdGljX3RyZWUsaD1iLnN0YXRfZGVzYy5oYXNfc3RyZWUsaT1iLnN0YXRfZGVzYy5lbGVtcyxqPS0xO2ZvcihhLmhlYXBfbGVuPTAsYS5oZWFwX21heD1WLGM9MDtjPGk7YysrKTAhPT1mWzIqY10/KGEuaGVhcFsrK2EuaGVhcF9sZW5dPWo9YyxhLmRlcHRoW2NdPTApOmZbMipjKzFdPTA7Zm9yKDthLmhlYXBfbGVuPDI7KWU9YS5oZWFwWysrYS5oZWFwX2xlbl09ajwyPysrajowLGZbMiplXT0xLGEuZGVwdGhbZV09MCxhLm9wdF9sZW4tLSxoJiYoYS5zdGF0aWNfbGVuLT1nWzIqZSsxXSk7Zm9yKGIubWF4X2NvZGU9aixjPWEuaGVhcF9sZW4+PjE7Yz49MTtjLS0pdChhLGYsYyk7ZT1pO2RvIGM9YS5oZWFwWzFdLGEuaGVhcFsxXT1hLmhlYXBbYS5oZWFwX2xlbi0tXSx0KGEsZiwxKSxkPWEuaGVhcFsxXSxhLmhlYXBbLS1hLmhlYXBfbWF4XT1jLGEuaGVhcFstLWEuaGVhcF9tYXhdPWQsZlsyKmVdPWZbMipjXStmWzIqZF0sYS5kZXB0aFtlXT0oYS5kZXB0aFtjXT49YS5kZXB0aFtkXT9hLmRlcHRoW2NdOmEuZGVwdGhbZF0pKzEsZlsyKmMrMV09ZlsyKmQrMV09ZSxhLmhlYXBbMV09ZSsrLHQoYSxmLDEpO3doaWxlKGEuaGVhcF9sZW4+PTIpO2EuaGVhcFstLWEuaGVhcF9tYXhdPWEuaGVhcFsxXSxtKGEsYiksbihmLGosYS5ibF9jb3VudCl9ZnVuY3Rpb24gdyhhLGIsYyl7dmFyIGQsZSxmPS0xLGc9YlsxXSxoPTAsaT03LGo9NDtmb3IoMD09PWcmJihpPTEzOCxqPTMpLGJbMiooYysxKSsxXT02NTUzNSxkPTA7ZDw9YztkKyspZT1nLGc9YlsyKihkKzEpKzFdLCsraDxpJiZlPT09Z3x8KGg8aj9hLmJsX3RyZWVbMiplXSs9aDowIT09ZT8oZSE9PWYmJmEuYmxfdHJlZVsyKmVdKyssYS5ibF90cmVlWzIqJF0rKyk6aDw9MTA/YS5ibF90cmVlWzIqX10rKzphLmJsX3RyZWVbMiphYV0rKyxoPTAsZj1lLDA9PT1nPyhpPTEzOCxqPTMpOmU9PT1nPyhpPTYsaj0zKTooaT03LGo9NCkpfWZ1bmN0aW9uIHgoYSxiLGMpe3ZhciBkLGUsZj0tMSxnPWJbMV0saD0wLGs9NyxsPTQ7Zm9yKDA9PT1nJiYoaz0xMzgsbD0zKSxkPTA7ZDw9YztkKyspaWYoZT1nLGc9YlsyKihkKzEpKzFdLCEoKytoPGsmJmU9PT1nKSl7aWYoaDxsKXtkbyBqKGEsZSxhLmJsX3RyZWUpO3doaWxlKDAhPT0tLWgpfWVsc2UgMCE9PWU/KGUhPT1mJiYoaihhLGUsYS5ibF90cmVlKSxoLS0pLGooYSwkLGEuYmxfdHJlZSksaShhLGgtMywyKSk6aDw9MTA/KGooYSxfLGEuYmxfdHJlZSksaShhLGgtMywzKSk6KGooYSxhYSxhLmJsX3RyZWUpLGkoYSxoLTExLDcpKTtoPTAsZj1lLDA9PT1nPyhrPTEzOCxsPTMpOmU9PT1nPyhrPTYsbD0zKTooaz03LGw9NCl9fWZ1bmN0aW9uIHkoYSl7dmFyIGI7Zm9yKHcoYSxhLmR5bl9sdHJlZSxhLmxfZGVzYy5tYXhfY29kZSksdyhhLGEuZHluX2R0cmVlLGEuZF9kZXNjLm1heF9jb2RlKSx2KGEsYS5ibF9kZXNjKSxiPVUtMTtiPj0zJiYwPT09YS5ibF90cmVlWzIqZWFbYl0rMV07Yi0tKTtyZXR1cm4gYS5vcHRfbGVuKz0zKihiKzEpKzUrNSs0LGJ9ZnVuY3Rpb24geihhLGIsYyxkKXt2YXIgZTtmb3IoaShhLGItMjU3LDUpLGkoYSxjLTEsNSksaShhLGQtNCw0KSxlPTA7ZTxkO2UrKylpKGEsYS5ibF90cmVlWzIqZWFbZV0rMV0sMyk7eChhLGEuZHluX2x0cmVlLGItMSkseChhLGEuZHluX2R0cmVlLGMtMSl9ZnVuY3Rpb24gQShhKXt2YXIgYixjPTQwOTM2MjQ0NDc7Zm9yKGI9MDtiPD0zMTtiKyssYz4+Pj0xKWlmKDEmYyYmMCE9PWEuZHluX2x0cmVlWzIqYl0pcmV0dXJuIEk7aWYoMCE9PWEuZHluX2x0cmVlWzE4XXx8MCE9PWEuZHluX2x0cmVlWzIwXXx8MCE9PWEuZHluX2x0cmVlWzI2XSlyZXR1cm4gSjtmb3IoYj0zMjtiPFI7YisrKWlmKDAhPT1hLmR5bl9sdHJlZVsyKmJdKXJldHVybiBKO3JldHVybiBJfWZ1bmN0aW9uIEIoYSl7cGF8fChvKCkscGE9ITApLGEubF9kZXNjPW5ldyBmKGEuZHluX2x0cmVlLG1hKSxhLmRfZGVzYz1uZXcgZihhLmR5bl9kdHJlZSxuYSksYS5ibF9kZXNjPW5ldyBmKGEuYmxfdHJlZSxvYSksYS5iaV9idWY9MCxhLmJpX3ZhbGlkPTAscChhKX1mdW5jdGlvbiBDKGEsYixjLGQpe2koYSwoTDw8MSkrKGQ/MTowKSwzKSxyKGEsYixjLCEwKX1mdW5jdGlvbiBEKGEpe2koYSxNPDwxLDMpLGooYSxaLGdhKSxsKGEpfWZ1bmN0aW9uIEUoYSxiLGMsZCl7dmFyIGUsZixnPTA7YS5sZXZlbD4wPyhhLnN0cm0uZGF0YV90eXBlPT09SyYmKGEuc3RybS5kYXRhX3R5cGU9QShhKSksdihhLGEubF9kZXNjKSx2KGEsYS5kX2Rlc2MpLGc9eShhKSxlPWEub3B0X2xlbiszKzc+Pj4zLGY9YS5zdGF0aWNfbGVuKzMrNz4+PjMsZjw9ZSYmKGU9ZikpOmU9Zj1jKzUsYys0PD1lJiZiIT09LTE/QyhhLGIsYyxkKTphLnN0cmF0ZWd5PT09SHx8Zj09PWU/KGkoYSwoTTw8MSkrKGQ/MTowKSwzKSx1KGEsZ2EsaGEpKTooaShhLChOPDwxKSsoZD8xOjApLDMpLHooYSxhLmxfZGVzYy5tYXhfY29kZSsxLGEuZF9kZXNjLm1heF9jb2RlKzEsZysxKSx1KGEsYS5keW5fbHRyZWUsYS5keW5fZHRyZWUpKSxwKGEpLGQmJnEoYSl9ZnVuY3Rpb24gRihhLGIsYyl7cmV0dXJuIGEucGVuZGluZ19idWZbYS5kX2J1ZisyKmEubGFzdF9saXRdPWI+Pj44JjI1NSxhLnBlbmRpbmdfYnVmW2EuZF9idWYrMiphLmxhc3RfbGl0KzFdPTI1NSZiLGEucGVuZGluZ19idWZbYS5sX2J1ZithLmxhc3RfbGl0XT0yNTUmYyxhLmxhc3RfbGl0KyssMD09PWI/YS5keW5fbHRyZWVbMipjXSsrOihhLm1hdGNoZXMrKyxiLS0sYS5keW5fbHRyZWVbMiooamFbY10rUisxKV0rKyxhLmR5bl9kdHJlZVsyKmcoYildKyspLGEubGFzdF9saXQ9PT1hLmxpdF9idWZzaXplLTF9dmFyIEc9YShcIi4uL3V0aWxzL2NvbW1vblwiKSxIPTQsST0wLEo9MSxLPTIsTD0wLE09MSxOPTIsTz0zLFA9MjU4LFE9MjksUj0yNTYsUz1SKzErUSxUPTMwLFU9MTksVj0yKlMrMSxXPTE1LFg9MTYsWT03LFo9MjU2LCQ9MTYsXz0xNyxhYT0xOCxiYT1bMCwwLDAsMCwwLDAsMCwwLDEsMSwxLDEsMiwyLDIsMiwzLDMsMywzLDQsNCw0LDQsNSw1LDUsNSwwXSxjYT1bMCwwLDAsMCwxLDEsMiwyLDMsMyw0LDQsNSw1LDYsNiw3LDcsOCw4LDksOSwxMCwxMCwxMSwxMSwxMiwxMiwxMywxM10sZGE9WzAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMiwzLDddLGVhPVsxNiwxNywxOCwwLDgsNyw5LDYsMTAsNSwxMSw0LDEyLDMsMTMsMiwxNCwxLDE1XSxmYT01MTIsZ2E9bmV3IEFycmF5KDIqKFMrMikpO2QoZ2EpO3ZhciBoYT1uZXcgQXJyYXkoMipUKTtkKGhhKTt2YXIgaWE9bmV3IEFycmF5KGZhKTtkKGlhKTt2YXIgamE9bmV3IEFycmF5KFAtTysxKTtkKGphKTt2YXIga2E9bmV3IEFycmF5KFEpO2Qoa2EpO3ZhciBsYT1uZXcgQXJyYXkoVCk7ZChsYSk7dmFyIG1hLG5hLG9hLHBhPSExO2MuX3RyX2luaXQ9QixjLl90cl9zdG9yZWRfYmxvY2s9QyxjLl90cl9mbHVzaF9ibG9jaz1FLGMuX3RyX3RhbGx5PUYsYy5fdHJfYWxpZ249RH0se1wiLi4vdXRpbHMvY29tbW9uXCI6NjJ9XSw3NDpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoKXt0aGlzLmlucHV0PW51bGwsdGhpcy5uZXh0X2luPTAsdGhpcy5hdmFpbF9pbj0wLHRoaXMudG90YWxfaW49MCx0aGlzLm91dHB1dD1udWxsLHRoaXMubmV4dF9vdXQ9MCx0aGlzLmF2YWlsX291dD0wLHRoaXMudG90YWxfb3V0PTAsdGhpcy5tc2c9XCJcIix0aGlzLnN0YXRlPW51bGwsdGhpcy5kYXRhX3R5cGU9Mix0aGlzLmFkbGVyPTB9Yi5leHBvcnRzPWR9LHt9XX0se30sWzEwXSkoMTApfSk7IiwiLyoqXG4qIEBhdXRob3I6IFJpbmF0IEcuIGh0dHA6Ly9jb2Rpbmcua3pcbiogQGNvcHlyaWdodDogQ29weXJpZ2h0IChjKSAyMDE5IFJpbmF0IEcuXG4qIEBsaWNlbnNlOiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuIFNlZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuKi9cblxuLy8gRm9sbG93aW5nIHRoZSBVTUQgdGVtcGxhdGUgaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci90ZW1wbGF0ZXMvcmV0dXJuRXhwb3J0c0dsb2JhbC5qc1xuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgIC8vIEFNRC4gTWFrZSBnbG9iYWx5IGF2YWlsYWJsZSBhcyB3ZWxsXG4gICAgICBkZWZpbmUoWydtb21lbnQnXSwgZnVuY3Rpb24gKG1vbWVudCkge1xuICAgICAgICAgIHJldHVybiBmYWN0b3J5KG1vbWVudCk7XG4gICAgICB9KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgLy8gTm9kZSAvIEJyb3dzZXJpZnlcbiAgICAgIHZhciBtb21lbnQgPSAodHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93Lm1vbWVudCAhPSAndW5kZWZpbmVkJykgPyB3aW5kb3cubW9tZW50IDogcmVxdWlyZSgnbW9tZW50Jyk7XG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkobW9tZW50KTtcbiAgfSBlbHNlIHtcbiAgICAgIC8vIEJyb3dzZXIgZ2xvYmFsc1xuICAgICAgcm9vdC5MaWdodHBpY2sgPSBmYWN0b3J5KHJvb3QubW9tZW50KTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbihtb21lbnQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudCxcblxuICBkZWZhdWx0cyA9IHtcbiAgICAgIGZpZWxkOiBudWxsLFxuICAgICAgc2Vjb25kRmllbGQ6IG51bGwsXG4gICAgICBmaXJzdERheTogMSxcbiAgICAgIHBhcmVudEVsOiAnYm9keScsXG4gICAgICBsYW5nOiAnYXV0bycsXG4gICAgICBmb3JtYXQ6ICdERC9NTS9ZWVlZJyxcbiAgICAgIHNlcGFyYXRvcjogJyAtICcsXG4gICAgICBudW1iZXJPZk1vbnRoczogMSxcbiAgICAgIG51bWJlck9mQ29sdW1uczogMixcbiAgICAgIHNpbmdsZURhdGU6IHRydWUsXG4gICAgICBhdXRvY2xvc2U6IHRydWUsXG4gICAgICByZXBpY2s6IGZhbHNlLFxuICAgICAgc3RhcnREYXRlOiBudWxsLFxuICAgICAgZW5kRGF0ZTogbnVsbCxcbiAgICAgIG1pbkRhdGU6IG51bGwsXG4gICAgICBtYXhEYXRlOiBudWxsLFxuICAgICAgZGlzYWJsZURhdGVzOiBudWxsLFxuICAgICAgc2VsZWN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICBzZWxlY3RCYWNrd2FyZDogZmFsc2UsXG4gICAgICBtaW5EYXlzOiBudWxsLFxuICAgICAgbWF4RGF5czogbnVsbCxcbiAgICAgIG9uU2VsZWN0OiBudWxsLFxuICAgICAgb25PcGVuOiBudWxsLFxuICAgICAgb25DbG9zZTogbnVsbCxcbiAgICAgIG9uRXJyb3I6IG51bGwsXG4gICAgICBob3ZlcmluZ1Rvb2x0aXA6IHRydWUsXG4gICAgICBoaWRlT25Cb2R5Q2xpY2s6IHRydWUsXG4gICAgICBmb290ZXI6IGZhbHNlLFxuICAgICAgZGlzYWJsZWREYXRlc0luUmFuZ2U6IHRydWUsXG4gICAgICB0b29sdGlwTmlnaHRzOiBmYWxzZSxcbiAgICAgIG9yaWVudGF0aW9uOiAnYXV0bycsXG4gICAgICBkaXNhYmxlV2Vla2VuZHM6IGZhbHNlLFxuICAgICAgbG9jYWxlOiB7XG4gICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgICBwcmV2OiAnJmxlZnRhcnJvdzsnLFxuICAgICAgICAgICAgICBuZXh0OiAnJnJpZ2h0YXJyb3c7JyxcbiAgICAgICAgICAgICAgY2xvc2U6ICcmdGltZXM7JyxcbiAgICAgICAgICAgICAgcmVzZXQ6ICdSZXNldCcsXG4gICAgICAgICAgICAgIGFwcGx5OiAnQXBwbHknLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdG9vbHRpcDoge1xuICAgICAgICAgICAgICBvbmU6ICdkYXknLFxuICAgICAgICAgICAgICBvdGhlcjogJ2RheXMnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdG9vbHRpcE9uRGlzYWJsZWQ6IG51bGwsXG4gICAgICAgICAgcGx1cmFsaXplOiBmdW5jdGlvbihpLCBsb2NhbGUpe1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIGkgPT09IFwic3RyaW5nXCIpIGkgPSBwYXJzZUludChpLCAxMCk7XG5cbiAgICAgICAgICAgICAgaWYgKGkgPT09IDEgJiYgJ29uZScgaW4gbG9jYWxlKSByZXR1cm4gbG9jYWxlLm9uZTtcbiAgICAgICAgICAgICAgaWYgKCdvdGhlcicgaW4gbG9jYWxlKSByZXR1cm4gbG9jYWxlLm90aGVyO1xuXG4gICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICB9XG4gICAgICB9XG4gIH0sXG5cbiAgcmVuZGVyVG9wQnV0dG9ucyA9IGZ1bmN0aW9uKG9wdHMsIHZpZXdNb2RlKVxuICB7XG4gICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJsaWdodHBpY2tfX3Rvb2xiYXJcIj4nXG4gICAgICAgICAgKyAnJ1xuICAgICAgICAgICsgJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwibGlnaHRwaWNrX19wcmV2aW91cy1hY3Rpb25cIiBkYXRhLXZpZXctbW9kZT1cIicgKyB2aWV3TW9kZSArICdcIj4nICsgb3B0cy5sb2NhbGUuYnV0dG9ucy5wcmV2ICsgJzwvYnV0dG9uPidcbiAgICAgICAgICArICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImxpZ2h0cGlja19fbmV4dC1hY3Rpb25cIiBkYXRhLXZpZXctbW9kZT1cIicgKyB2aWV3TW9kZSArICdcIj4nICsgb3B0cy5sb2NhbGUuYnV0dG9ucy5uZXh0ICsgJzwvYnV0dG9uPidcbiAgICAgICAgICArICghb3B0cy5hdXRvY2xvc2UgPyAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJsaWdodHBpY2tfX2Nsb3NlLWFjdGlvblwiPicgKyBvcHRzLmxvY2FsZS5idXR0b25zLmNsb3NlICsgJzwvYnV0dG9uPicgIDogJycpXG4gICAgICAgICAgKyAnPC9kaXY+JztcbiAgfSxcblxuICB3ZWVrZGF5TmFtZSA9IGZ1bmN0aW9uKG9wdHMsIGRheSwgc2hvcnQpXG4gIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZSgxOTcwLCAwLCBkYXkpLnRvTG9jYWxlU3RyaW5nKG9wdHMubGFuZywgeyB3ZWVrZGF5OiBzaG9ydCA/ICdzaG9ydCcgOiAnbG9uZycgfSlcbiAgfSxcblxuICByZW5kZXJEYXkgPSBmdW5jdGlvbihvcHRzLCBkYXRlLCBkdW1teSwgZXh0cmFDbGFzcylcbiAge1xuICAgICAgaWYgKGR1bW15KSByZXR1cm4gJzxkaXY+PC9kaXY+JztcblxuICAgICAgdmFyIGRhdGUgPSBtb21lbnQoZGF0ZSksXG4gICAgICAgICAgcHJldk1vbnRoID0gbW9tZW50KGRhdGUpLnN1YnRyYWN0KDEsICdtb250aCcpLFxuICAgICAgICAgIG5leHRNb250aCA9IG1vbWVudChkYXRlKS5hZGQoMSwgJ21vbnRoJyk7XG5cbiAgICAgIHZhciBkYXkgPSB7XG4gICAgICAgICAgdGltZTogbW9tZW50KGRhdGUpLnZhbHVlT2YoKSxcbiAgICAgICAgICBjbGFzc05hbWU6IFsnbGlnaHRwaWNrX19kYXknLCAnaXMtYXZhaWxhYmxlJ11cbiAgICAgIH07XG5cbiAgICAgIGlmIChleHRyYUNsYXNzIGluc3RhbmNlb2YgQXJyYXkgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGV4dHJhQ2xhc3MpID09PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICAgICAgZXh0cmFDbGFzcyA9IGV4dHJhQ2xhc3MuZmlsdGVyKCBmdW5jdGlvbiggZWwgKSB7XG4gICAgICAgICAgICAgIHJldHVybiBbJ2xpZ2h0cGlja19fZGF5JywgJ2lzLWF2YWlsYWJsZScsICdpcy1wcmV2aW91cy1tb250aCcsICdpcy1uZXh0LW1vbnRoJ10uaW5kZXhPZiggZWwgKSA+PSAwO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRheS5jbGFzc05hbWUgPSBkYXkuY2xhc3NOYW1lLmNvbmNhdChleHRyYUNsYXNzKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAgIGRheS5jbGFzc05hbWUucHVzaChleHRyYUNsYXNzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdHMuZGlzYWJsZURhdGVzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHRzLmRpc2FibGVEYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBpZiAob3B0cy5kaXNhYmxlRGF0ZXNbaV0gaW5zdGFuY2VvZiBBcnJheSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob3B0cy5kaXNhYmxlRGF0ZXNbaV0pID09PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgX2Zyb20gPSBtb21lbnQob3B0cy5kaXNhYmxlRGF0ZXNbaV1bMF0pLFxuICAgICAgICAgICAgICAgICAgICAgIF90byA9IG1vbWVudChvcHRzLmRpc2FibGVEYXRlc1tpXVsxXSk7XG5cbiAgICAgICAgICAgICAgICAgIGlmIChfZnJvbS5pc1ZhbGlkKCkgJiYgX3RvLmlzVmFsaWQoKSAmJiBkYXRlLmlzQmV0d2VlbihfZnJvbSwgX3RvLCAnZGF5JywgJ1tdJykpe1xuICAgICAgICAgICAgICAgICAgICAgIGRheS5jbGFzc05hbWUucHVzaCgnaXMtZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmIChtb21lbnQob3B0cy5kaXNhYmxlRGF0ZXNbaV0pLmlzVmFsaWQoKSAmJiBtb21lbnQob3B0cy5kaXNhYmxlRGF0ZXNbaV0pLmlzU2FtZShkYXRlLCAnZGF5JykpIHtcbiAgICAgICAgICAgICAgICAgIGRheS5jbGFzc05hbWUucHVzaCgnaXMtZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChkYXkuY2xhc3NOYW1lLmluZGV4T2YoJ2lzLWRpc2FibGVkJykgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgICBpZiAob3B0cy5sb2NhbGUudG9vbHRpcE9uRGlzYWJsZWQgJiYgKCFvcHRzLnN0YXJ0RGF0ZSB8fCBkYXRlLmlzQWZ0ZXIob3B0cy5zdGFydERhdGUpIHx8IG9wdHMuc3RhcnREYXRlICYmIG9wdHMuZW5kRGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBkYXkuY2xhc3NOYW1lLnB1c2goJ2Rpc2FibGVkLXRvb2x0aXAnKTtcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgaWYgKGRheS5jbGFzc05hbWUuaW5kZXhPZignaXMtc3RhcnQtZGF0ZScpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXJ0RGF0ZShudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEVuZERhdGUobnVsbCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBlbHNlIGlmIChkYXkuY2xhc3NOYW1lLmluZGV4T2YoJ2lzLWVuZC1kYXRlJykgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RW5kRGF0ZShudWxsKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG9wdHMubWluRGF5cyAmJiBvcHRzLnN0YXJ0RGF0ZSAmJiAhb3B0cy5lbmREYXRlKSB7XG4gICAgICAgICAgaWYgKGRhdGUuaXNCZXR3ZWVuKG1vbWVudChvcHRzLnN0YXJ0RGF0ZSkuc3VidHJhY3Qob3B0cy5taW5EYXlzIC0gMSwgJ2RheScpLCBtb21lbnQob3B0cy5zdGFydERhdGUpLmFkZChvcHRzLm1pbkRheXMgLSAxLCAnZGF5JyksICdkYXknKSkge1xuICAgICAgICAgICAgICBkYXkuY2xhc3NOYW1lLnB1c2goJ2lzLWRpc2FibGVkJyk7XG5cbiAgICAgICAgICAgICAgaWYgKG9wdHMuc2VsZWN0Rm9yd2FyZCAmJiBkYXRlLmlzU2FtZU9yQWZ0ZXIob3B0cy5zdGFydERhdGUpKSB7XG4gICAgICAgICAgICAgICAgICBkYXkuY2xhc3NOYW1lLnB1c2goJ2lzLWZvcndhcmQtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgIGRheS5jbGFzc05hbWUucHVzaCgnaXMtaW4tcmFuZ2UnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG9wdHMubWF4RGF5cyAmJiBvcHRzLnN0YXJ0RGF0ZSAmJiAhb3B0cy5lbmREYXRlKSB7XG4gICAgICAgICAgaWYgKGRhdGUuaXNTYW1lT3JCZWZvcmUobW9tZW50KG9wdHMuc3RhcnREYXRlKS5zdWJ0cmFjdChvcHRzLm1heERheXMsICdkYXknKSwgJ2RheScpKSB7XG4gICAgICAgICAgICAgIGRheS5jbGFzc05hbWUucHVzaCgnaXMtZGlzYWJsZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoZGF0ZS5pc1NhbWVPckFmdGVyKG1vbWVudChvcHRzLnN0YXJ0RGF0ZSkuYWRkKG9wdHMubWF4RGF5cywgJ2RheScpLCAnZGF5JykpIHtcbiAgICAgICAgICAgICAgZGF5LmNsYXNzTmFtZS5wdXNoKCdpcy1kaXNhYmxlZCcpO1xuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG9wdHMucmVwaWNrICYmIChvcHRzLm1pbkRheXMgfHwgb3B0cy5tYXhEYXlzKSAmJiBvcHRzLnN0YXJ0RGF0ZSAmJiBvcHRzLmVuZERhdGUpIHtcbiAgICAgICAgICB2YXIgdGVtcFN0YXJ0RGF0ZSA9IG1vbWVudChvcHRzLnJlcGlja1RyaWdnZXIgPT0gb3B0cy5maWVsZCA/IG9wdHMuZW5kRGF0ZSA6IG9wdHMuc3RhcnREYXRlKTtcblxuICAgICAgICAgIGlmIChvcHRzLm1pbkRheXMpIHtcbiAgICAgICAgICAgICAgaWYgKGRhdGUuaXNCZXR3ZWVuKG1vbWVudCh0ZW1wU3RhcnREYXRlKS5zdWJ0cmFjdChvcHRzLm1pbkRheXMgLSAxLCAnZGF5JyksIG1vbWVudCh0ZW1wU3RhcnREYXRlKS5hZGQob3B0cy5taW5EYXlzIC0gMSwgJ2RheScpLCAnZGF5JykpIHtcbiAgICAgICAgICAgICAgICAgIGRheS5jbGFzc05hbWUucHVzaCgnaXMtZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChvcHRzLm1heERheXMpIHtcbiAgICAgICAgICAgICAgaWYgKGRhdGUuaXNTYW1lT3JCZWZvcmUobW9tZW50KHRlbXBTdGFydERhdGUpLnN1YnRyYWN0KG9wdHMubWF4RGF5cywgJ2RheScpLCAnZGF5JykpIHtcbiAgICAgICAgICAgICAgICAgIGRheS5jbGFzc05hbWUucHVzaCgnaXMtZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmIChkYXRlLmlzU2FtZU9yQWZ0ZXIobW9tZW50KHRlbXBTdGFydERhdGUpLmFkZChvcHRzLm1heERheXMsICdkYXknKSwgJ2RheScpKSB7XG4gICAgICAgICAgICAgICAgICBkYXkuY2xhc3NOYW1lLnB1c2goJ2lzLWRpc2FibGVkJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRlLmlzU2FtZShuZXcgRGF0ZSgpLCAnZGF5JykpIHtcbiAgICAgICAgICBkYXkuY2xhc3NOYW1lLnB1c2goJ2lzLXRvZGF5Jyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRlLmlzU2FtZShvcHRzLnN0YXJ0RGF0ZSwgJ2RheScpKSB7XG4gICAgICAgICAgZGF5LmNsYXNzTmFtZS5wdXNoKCdpcy1zdGFydC1kYXRlJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRlLmlzU2FtZShvcHRzLmVuZERhdGUsICdkYXknKSkge1xuICAgICAgICAgIGRheS5jbGFzc05hbWUucHVzaCgnaXMtZW5kLWRhdGUnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdHMuc3RhcnREYXRlICYmIG9wdHMuZW5kRGF0ZSAmJiBkYXRlLmlzQmV0d2VlbihvcHRzLnN0YXJ0RGF0ZSwgb3B0cy5lbmREYXRlLCAnZGF5JywgJ1tdJykpIHtcbiAgICAgICAgICBkYXkuY2xhc3NOYW1lLnB1c2goJ2lzLWluLXJhbmdlJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChtb21lbnQoKS5pc1NhbWUoZGF0ZSwgJ21vbnRoJykpIHtcblxuICAgICAgfVxuICAgICAgZWxzZSBpZiAocHJldk1vbnRoLmlzU2FtZShkYXRlLCAnbW9udGgnKSkge1xuICAgICAgICAgIGRheS5jbGFzc05hbWUucHVzaCgnaXMtcHJldmlvdXMtbW9udGgnKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG5leHRNb250aC5pc1NhbWUoZGF0ZSwgJ21vbnRoJykpIHtcbiAgICAgICAgICBkYXkuY2xhc3NOYW1lLnB1c2goJ2lzLW5leHQtbW9udGgnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdHMubWluRGF0ZSAmJiBkYXRlLmlzQmVmb3JlKG9wdHMubWluRGF0ZSwgJ2RheScpKSB7XG4gICAgICAgICAgZGF5LmNsYXNzTmFtZS5wdXNoKCdpcy1kaXNhYmxlZCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0cy5tYXhEYXRlICYmIGRhdGUuaXNBZnRlcihvcHRzLm1heERhdGUsICdkYXknKSkge1xuICAgICAgICAgIGRheS5jbGFzc05hbWUucHVzaCgnaXMtZGlzYWJsZWQnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdHMuc2VsZWN0Rm9yd2FyZCAmJiAhb3B0cy5zaW5nbGVEYXRlICYmIG9wdHMuc3RhcnREYXRlICYmICFvcHRzLmVuZERhdGUgJiYgZGF0ZS5pc0JlZm9yZShvcHRzLnN0YXJ0RGF0ZSwgJ2RheScpKSB7XG4gICAgICAgICAgZGF5LmNsYXNzTmFtZS5wdXNoKCdpcy1kaXNhYmxlZCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0cy5zZWxlY3RCYWNrd2FyZCAmJiAhb3B0cy5zaW5nbGVEYXRlICYmIG9wdHMuc3RhcnREYXRlICYmICFvcHRzLmVuZERhdGUgJiYgZGF0ZS5pc0FmdGVyKG9wdHMuc3RhcnREYXRlLCAnZGF5JykpIHtcbiAgICAgICAgICBkYXkuY2xhc3NOYW1lLnB1c2goJ2lzLWRpc2FibGVkJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRzLmRpc2FibGVXZWVrZW5kcyAmJiAoZGF0ZS5pc29XZWVrZGF5KCkgPT0gNiB8fCBkYXRlLmlzb1dlZWtkYXkoKSA9PSA3KSkge1xuICAgICAgICAgIGRheS5jbGFzc05hbWUucHVzaCgnaXMtZGlzYWJsZWQnKTtcbiAgICAgIH1cblxuICAgICAgZGF5LmNsYXNzTmFtZSA9IGRheS5jbGFzc05hbWUuZmlsdGVyKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgc2VsZikge1xuICAgICAgICAgIHJldHVybiBzZWxmLmluZGV4T2YodmFsdWUpID09PSBpbmRleDtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZGF5LmNsYXNzTmFtZS5pbmRleE9mKCdpcy1kaXNhYmxlZCcpID49IDAgJiYgZGF5LmNsYXNzTmFtZS5pbmRleE9mKCdpcy1hdmFpbGFibGUnKSA+PSAwKSB7XG4gICAgICAgICAgZGF5LmNsYXNzTmFtZS5zcGxpY2UoZGF5LmNsYXNzTmFtZS5pbmRleE9mKCdpcy1hdmFpbGFibGUnKSwgMSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGRpdi5jbGFzc05hbWUgPSBkYXkuY2xhc3NOYW1lLmpvaW4oJyAnKTtcbiAgICAgIGRpdi5pbm5lckhUTUwgPSBkYXRlLmdldCgnZGF0ZScpO1xuICAgICAgZGl2LnNldEF0dHJpYnV0ZSgnZGF0YS10aW1lJywgZGF5LnRpbWUpO1xuXG4gICAgICByZXR1cm4gZGl2Lm91dGVySFRNTDtcbiAgfSxcblxuICByZW5kZXJDYWxlbmRhciA9IGZ1bmN0aW9uKGVsLCBvcHRzKVxuICB7XG4gICAgICB2YXIgaHRtbCA9ICcnLFxuICAgICAgICAgIG1vbnRoRGF0ZSA9IG1vbWVudChvcHRzLmNhbGVuZGFyWzBdKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHRzLm51bWJlck9mTW9udGhzOyBpKyspIHtcbiAgICAgICAgICB2YXIgZGF5ID0gbW9tZW50KG1vbnRoRGF0ZSk7XG5cbiAgICAgICAgICBodG1sICs9ICc8c2VjdGlvbiBjbGFzcz1cImxpZ2h0cGlja19fbW9udGhcIj4nO1xuICAgICAgICAgIGh0bWwgKz0gJzxoZWFkZXIgY2xhc3M9XCJsaWdodHBpY2tfX21vbnRoLXRpdGxlLWJhclwiPidcbiAgICAgICAgICBodG1sICs9ICc8aDEgY2xhc3M9XCJsaWdodHBpY2tfX21vbnRoLXRpdGxlXCIgZGF0YS15bT1cIicgKyBkYXkuZm9ybWF0KCdZWVlZLU1NJykgKyAnXCI+J1xuICAgICAgICAgICsgJzxiIGNsYXNzPVwibGlnaHRwaWNrX19tb250aC10aXRsZS1hY2NlbnRcIj4nICsgZGF5LnRvRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKG9wdHMubGFuZywgeyBtb250aDogJ2xvbmcnIH0pICsgJzwvYj4gJ1xuICAgICAgICAgICsgZGF5LmZvcm1hdCgnWVlZWScpXG4gICAgICAgICAgKyAnPC9oMT4nO1xuXG4gICAgICAgICAgaWYgKG9wdHMubnVtYmVyT2ZNb250aHMgPT09IDEpIHtcbiAgICAgICAgICAgICAgaHRtbCArPSByZW5kZXJUb3BCdXR0b25zKG9wdHMsICdkYXlzJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaHRtbCArPSAnPC9oZWFkZXI+JzsgLy8gbGlnaHRwaWNrX19tb250aC10aXRsZS1iYXJcblxuICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJsaWdodHBpY2tfX2RheXMtb2YtdGhlLXdlZWtcIj4nO1xuICAgICAgICAgIGZvciAodmFyIHcgPSBvcHRzLmZpcnN0RGF5ICsgNDsgdyA8IDcgKyBvcHRzLmZpcnN0RGF5ICsgNDsgKyt3KSB7XG4gICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJsaWdodHBpY2tfX2RheS1vZi10aGUtd2Vla1wiIHRpdGxlPVwiJyArIHdlZWtkYXlOYW1lKG9wdHMsIHcpICsgJ1wiPicgKyB3ZWVrZGF5TmFtZShvcHRzLCB3LCB0cnVlKSArICc8L2Rpdj4nO1xuICAgICAgICAgIH1cbiAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nOyAvLyBsaWdodHBpY2tfX2RheXMtb2YtdGhlLXdlZWtcblxuICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJsaWdodHBpY2tfX2RheXNcIj4nO1xuXG4gICAgICAgICAgaWYgKGRheS5pc29XZWVrZGF5KCkgIT09IG9wdHMuZmlyc3REYXkpIHtcbiAgICAgICAgICAgICAgdmFyIHByZXZEYXlzID0gZGF5Lmlzb1dlZWtkYXkoKSAtIG9wdHMuZmlyc3REYXkgPiAwID8gZGF5Lmlzb1dlZWtkYXkoKSAtIG9wdHMuZmlyc3REYXkgOiBkYXkuaXNvV2Vla2RheSgpLFxuICAgICAgICAgICAgICAgICAgcHJldk1vbnRoID0gbW9tZW50KGRheSkuc3VidHJhY3QocHJldkRheXMsICdkYXknKSxcbiAgICAgICAgICAgICAgICAgIGRheXNJbk1vbnRoID0gcHJldk1vbnRoLmRheXNJbk1vbnRoKCk7XG5cbiAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IHByZXZNb250aC5nZXQoJ2RhdGUnKTsgZCA8PSBkYXlzSW5Nb250aDsgZCsrKSB7XG4gICAgICAgICAgICAgICAgICBodG1sICs9IHJlbmRlckRheShvcHRzLCBwcmV2TW9udGgsIGkgPiAwLCAnaXMtcHJldmlvdXMtbW9udGgnKTtcblxuICAgICAgICAgICAgICAgICAgcHJldk1vbnRoLmFkZCgxLCAnZGF5Jyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgZGF5c0luTW9udGggPSBkYXkuZGF5c0luTW9udGgoKSxcbiAgICAgICAgICAgICAgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBkYXlzSW5Nb250aDsgZCsrKSB7XG4gICAgICAgICAgICAgIGh0bWwgKz0gcmVuZGVyRGF5KG9wdHMsIGRheSk7XG5cbiAgICAgICAgICAgICAgZGF5LmFkZCgxLCAnZGF5Jyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIG5leHRNb250aCA9IG1vbWVudChkYXkpLFxuICAgICAgICAgICAgICBuZXh0RGF5cyA9IDcgLSBuZXh0TW9udGguaXNvV2Vla2RheSgpICsgb3B0cy5maXJzdERheTtcblxuICAgICAgICAgIGlmIChuZXh0RGF5cyA8IDcpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IG5leHRNb250aC5nZXQoJ2RhdGUnKTsgZCA8PSBuZXh0RGF5czsgZCsrKSB7XG4gICAgICAgICAgICAgICAgICBodG1sICs9IHJlbmRlckRheShvcHRzLCBuZXh0TW9udGgsIGkgPCBvcHRzLm51bWJlck9mTW9udGhzIC0gMSwgJ2lzLW5leHQtbW9udGgnKTtcblxuICAgICAgICAgICAgICAgICAgbmV4dE1vbnRoLmFkZCgxLCAnZGF5Jyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nOyAvLyBsaWdodHBpY2tfX2RheXNcblxuICAgICAgICAgIGh0bWwgKz0gJzwvc2VjdGlvbj4nOyAvLyBsaWdodHBpY2tfX21vbnRoXG5cbiAgICAgICAgICBtb250aERhdGUuYWRkKDEsICdtb250aCcpO1xuICAgICAgfVxuXG4gICAgICBvcHRzLmNhbGVuZGFyWzFdID0gbW9tZW50KG1vbnRoRGF0ZSk7XG5cbiAgICAgIGVsLnF1ZXJ5U2VsZWN0b3IoJy5saWdodHBpY2tfX21vbnRocycpLmlubmVySFRNTCA9IGh0bWw7XG4gIH0sXG5cbiAgcmVuZGVyTW9udGhzT2ZZZWFyID0gZnVuY3Rpb24oZWwsIG9wdHMsIGRhdGUpXG4gIHtcbiAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgb3B0cy5jYWxlbmRhclswXSA9IG1vbWVudChkYXRlKTtcbiAgICAgIH1cbiAgICAgIHZhciB5bSA9IG1vbWVudChvcHRzLmNhbGVuZGFyWzBdKTtcblxuICAgICAgdmFyIGh0bWwgPSAnPGhlYWRlciBjbGFzcz1cImxpZ2h0cGlja19fbW9udGgtdGl0bGUtYmFyXCI+J1xuICAgICAgaHRtbCArPSAnPGgxIGNsYXNzPVwibGlnaHRwaWNrX19tb250aC10aXRsZVwiPicgKyB5bS5mb3JtYXQoJ1lZWVknKSArICAnPC9oMT4nO1xuICAgICAgaHRtbCArPSByZW5kZXJUb3BCdXR0b25zKG9wdHMsICdtb250aHMnKTtcbiAgICAgIGh0bWwgKz0gJzwvaGVhZGVyPic7XG5cbiAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJsaWdodHBpY2tfX21vbnRocy1vZi10aGUteWVhci1saXN0XCI+JztcblxuICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gMTI7IGkrKykge1xuICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJsaWdodHBpY2tfX21vbnRoLW9mLXRoZS15ZWFyXCIgZGF0YS1nb3RvLW1vbnRoPVwiJyArIHltLmZvcm1hdCgnWVlZWScpICsgJy0nICsgaSArICdcIj4nXG4gICAgICAgICAgICAgICArICc8ZGl2PicgKyBtb21lbnQoaSwgJ00nKS50b0RhdGUoKS50b0xvY2FsZVN0cmluZyhvcHRzLmxhbmcsIHsgbW9udGg6ICdsb25nJyB9KSArICc8L2Rpdj4nXG4gICAgICAgICAgICAgICArICc8ZGl2PicgKyB5bS5mb3JtYXQoJ1lZWVknKSArICc8L2Rpdj4nXG4gICAgICAgICAgICAgICArICc8L2Rpdj4nO1xuICAgICAgfVxuICAgICAgaHRtbCArPSAnPC9kaXY+JztcblxuICAgICAgZWwucXVlcnlTZWxlY3RvcignLmxpZ2h0cGlja19fbW9udGhzLW9mLXRoZS15ZWFyJykuaW5uZXJIVE1MID0gaHRtbDtcbiAgfSxcblxuICB1cGRhdGVEYXRlcyA9IGZ1bmN0aW9uKGVsLCBvcHRzKVxuICB7XG4gICAgICB2YXIgZGF5cyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5saWdodHBpY2tfX2RheScpO1xuICAgICAgW10uZm9yRWFjaC5jYWxsKGRheXMsIGZ1bmN0aW9uKGRheSkge1xuICAgICAgICAgIGRheS5vdXRlckhUTUwgPSByZW5kZXJEYXkob3B0cywgcGFyc2VJbnQoZGF5LmdldEF0dHJpYnV0ZSgnZGF0YS10aW1lJykpLCBmYWxzZSwgZGF5LmNsYXNzTmFtZS5zcGxpdCgnICcpKTtcbiAgICAgIH0pO1xuXG4gICAgICBjaGVja0Rpc2FibGVkRGF0ZXNJblJhbmdlKGVsLCBvcHRzKTtcbiAgfSxcblxuICBjaGVja0Rpc2FibGVkRGF0ZXNJblJhbmdlID0gZnVuY3Rpb24oZWwsIG9wdHMpXG4gIHtcbiAgICAgIGlmIChvcHRzLmRpc2FibGVkRGF0ZXNJblJhbmdlIHx8ICFvcHRzLnN0YXJ0RGF0ZSB8fCBvcHRzLmVuZERhdGUgfHwgIW9wdHMuZGlzYWJsZURhdGVzKSByZXR1cm47XG5cbiAgICAgIHZhciBkYXlzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnLmxpZ2h0cGlja19fZGF5JyksXG4gICAgICAgICAgZGlzYWJsZWRBcnJheSA9IG9wdHMuZGlzYWJsZURhdGVzLm1hcChmdW5jdGlvbihlbnRyeSl7XG4gICAgICAgICAgICAgIHJldHVybiBlbnRyeSBpbnN0YW5jZW9mIEFycmF5IHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlbnRyeSkgPT09ICdbb2JqZWN0IEFycmF5XScgPyBlbnRyeVswXSA6IGVudHJ5O1xuICAgICAgICAgIH0pLFxuICAgICAgICAgIGNsb3Nlc3RQcmV2ID0gbW9tZW50KGRpc2FibGVkQXJyYXkuZmlsdGVyKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG1vbWVudChkKS5pc0JlZm9yZShvcHRzLnN0YXJ0RGF0ZSk7XG4gICAgICAgICAgfSkuc29ydChmdW5jdGlvbihhLGIpe1xuICAgICAgICAgICAgICByZXR1cm4gbW9tZW50KGIpLmlzQWZ0ZXIobW9tZW50KGEpKTtcbiAgICAgICAgICB9KVswXSksXG4gICAgICAgICAgY2xvc2VzdE5leHQgPSBtb21lbnQoZGlzYWJsZWRBcnJheS5maWx0ZXIoZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXR1cm4gbW9tZW50KGQpLmlzQWZ0ZXIob3B0cy5zdGFydERhdGUpO1xuICAgICAgICAgIH0pLnNvcnQoZnVuY3Rpb24oYSxiKXtcbiAgICAgICAgICAgICAgcmV0dXJuIG1vbWVudChhKS5pc0FmdGVyKG1vbWVudChiKSk7XG4gICAgICAgICAgfSlbMF0pO1xuXG4gICAgICBbXS5mb3JFYWNoLmNhbGwoZGF5cywgZnVuY3Rpb24oZGF5Q2VsbCkge1xuICAgICAgICAgIHZhciBkYXkgPSBtb21lbnQocGFyc2VJbnQoZGF5Q2VsbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGltZScpKSk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAoY2xvc2VzdFByZXYgJiYgZGF5LmlzQmVmb3JlKGNsb3Nlc3RQcmV2KSAmJiBvcHRzLnN0YXJ0RGF0ZS5pc0FmdGVyKGNsb3Nlc3RQcmV2KSlcbiAgICAgICAgICAgICAgfHwgKGNsb3Nlc3ROZXh0ICYmIGRheS5pc0FmdGVyKGNsb3Nlc3ROZXh0KSAmJiBjbG9zZXN0TmV4dC5pc0FmdGVyKG9wdHMuc3RhcnREYXRlKSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgZGF5Q2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hdmFpbGFibGUnKTtcbiAgICAgICAgICAgICAgZGF5Q2VsbC5jbGFzc0xpc3QuYWRkKCdpcy1kaXNhYmxlZCcpO1xuICAgICAgICAgIH1cbiAgICAgIH0pO1xuICB9LFxuXG4gIExpZ2h0cGljayA9IGZ1bmN0aW9uKG9wdGlvbnMpXG4gIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgICBvcHRzID0gc2VsZi5jb25maWcob3B0aW9ucyk7XG5cbiAgICAgIHNlbGYuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWN0aW9uJyk7XG5cbiAgICAgIHNlbGYuZWwuY2xhc3NOYW1lID0gJ2xpZ2h0cGljayBsaWdodHBpY2stLScgKyBvcHRzLm51bWJlck9mQ29sdW1ucyArICctY29sdW1ucyBpcy1oaWRkZW4nO1xuXG4gICAgICBpZiAob3B0cy5wYXJlbnRFbCAhPT0gJ2JvZHknKSB7XG4gICAgICAgICAgc2VsZi5lbC5jbGFzc05hbWUgKz0gJyBsaWdodHBpY2stLWlubGluZWQnO1xuICAgICAgfVxuXG4gICAgICB2YXIgaHRtbCA9ICc8ZGl2IGNsYXNzPVwibGlnaHRwaWNrX19pbm5lclwiPidcbiAgICAgICsgKG9wdHMubnVtYmVyT2ZNb250aHMgPiAxID8gcmVuZGVyVG9wQnV0dG9ucyhvcHRzLCAnZGF5cycpIDogJycpXG4gICAgICArICc8ZGl2IGNsYXNzPVwibGlnaHRwaWNrX19tb250aHNcIj48L2Rpdj4nXG4gICAgICArICc8ZGl2IGNsYXNzPVwibGlnaHRwaWNrX190b29sdGlwXCIgc3R5bGU9XCJ2aXNpYmlsaXR5OiBoaWRkZW5cIj48L2Rpdj4nXG4gICAgICArICc8ZGl2IGNsYXNzPVwibGlnaHRwaWNrX19tb250aHMtb2YtdGhlLXllYXJcIj48L2Rpdj4nO1xuXG4gICAgICBpZiAob3B0cy5mb290ZXIpIHtcbiAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwibGlnaHRwaWNrX19mb290ZXJcIj4nO1xuICAgICAgICAgIGlmIChvcHRzLmZvb3RlciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICBodG1sICs9ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImxpZ2h0cGlja19fcmVzZXQtYWN0aW9uXCI+JyArIG9wdHMubG9jYWxlLmJ1dHRvbnMucmVzZXQgKyAnPC9idXR0b24+JztcbiAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImxpZ2h0cGlja19fZm9vdGVyLW1lc3NhZ2VcIj48L2Rpdj4nO1xuICAgICAgICAgICAgICBodG1sICs9ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImxpZ2h0cGlja19fYXBwbHktYWN0aW9uXCI+JyArIG9wdHMubG9jYWxlLmJ1dHRvbnMuYXBwbHkgKyAnPC9idXR0b24+JztcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIGh0bWwgKz0gb3B0cy5mb290ZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7XG4gICAgICB9XG5cbiAgICAgIGh0bWwgKz0gJzwvZGl2Pic7XG5cbiAgICAgIHNlbGYuZWwuaW5uZXJIVE1MID0gaHRtbDtcblxuXG4gICAgICBpZiAob3B0cy5wYXJlbnRFbCBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgICBvcHRzLnBhcmVudEVsLmFwcGVuZENoaWxkKHNlbGYuZWwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0cy5wYXJlbnRFbCkuYXBwZW5kQ2hpbGQoc2VsZi5lbCk7XG4gICAgICB9XG5cbiAgICAgIHNlbGYuX29uTW91c2VEb3duID0gZnVuY3Rpb24oZSlcbiAgICAgIHtcbiAgICAgICAgICBpZiAoIXNlbGYuaXNTaG93aW5nKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICB2YXIgb3B0cyA9IHNlbGYuX29wdHM7XG5cbiAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbGlnaHRwaWNrX19kYXknKSAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1hdmFpbGFibGUnKSkge1xuXG4gICAgICAgICAgICAgIHZhciBkYXkgPSBtb21lbnQocGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS10aW1lJykpKTtcblxuICAgICAgICAgICAgICBpZiAoIW9wdHMuZGlzYWJsZWREYXRlc0luUmFuZ2UgJiYgb3B0cy5kaXNhYmxlRGF0ZXMgJiYgb3B0cy5zdGFydERhdGUpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IGRheS5pc0FmdGVyKG9wdHMuc3RhcnREYXRlKSA/IG1vbWVudChvcHRzLnN0YXJ0RGF0ZSkgOiBtb21lbnQoZGF5KSxcbiAgICAgICAgICAgICAgICAgICAgICBlbmQgPSBkYXkuaXNBZnRlcihvcHRzLnN0YXJ0RGF0ZSkgPyBtb21lbnQoZGF5KSA6IG1vbWVudChvcHRzLnN0YXJ0RGF0ZSksXG5cbiAgICAgICAgICAgICAgICAgICAgICBpc0ludmFsaWRSYW5nZSA9IG9wdHMuZGlzYWJsZURhdGVzLmZpbHRlcihmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGQgaW5zdGFuY2VvZiBBcnJheSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZCkgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9mcm9tID0gbW9tZW50KGRbMF0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RvID0gbW9tZW50KGRbMV0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfZnJvbS5pc1ZhbGlkKCkgJiYgX3RvLmlzVmFsaWQoKSAmJiAoX2Zyb20uaXNCZXR3ZWVuKHN0YXJ0LCBlbmQsICdkYXknLCAnW10nKSB8fCBfdG8uaXNCZXR3ZWVuKHN0YXJ0LCBlbmQsICdkYXknLCAnW10nKSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vbWVudChkKS5pc0JldHdlZW4oc3RhcnQsIGVuZCwgJ2RheScsICdbXScpO1xuICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgIGlmIChpc0ludmFsaWRSYW5nZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFN0YXJ0RGF0ZShudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldEVuZERhdGUobnVsbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ21vdXNlZG93bicpKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmVsLnF1ZXJ5U2VsZWN0b3IoJy5saWdodHBpY2tfX3Rvb2x0aXAnKS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG5cbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVEYXRlcyhzZWxmLmVsLCBvcHRzKTtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAob3B0cy5zaW5nbGVEYXRlIHx8ICghb3B0cy5zdGFydERhdGUgJiYgIW9wdHMuZW5kRGF0ZSkgfHwgKG9wdHMuc3RhcnREYXRlICYmIG9wdHMuZW5kRGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChvcHRzLnJlcGljayAmJiBvcHRzLnN0YXJ0RGF0ZSAmJiBvcHRzLmVuZERhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5yZXBpY2tUcmlnZ2VyID09PSBvcHRzLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0U3RhcnREYXRlKGRheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdpcy1zdGFydC1kYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldEVuZERhdGUoZGF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2lzLWVuZC1kYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuc3RhcnREYXRlLmlzQWZ0ZXIob3B0cy5lbmREYXRlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnN3YXBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuYXV0b2Nsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFN0YXJ0RGF0ZShkYXkpO1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0RW5kRGF0ZShudWxsKTtcblxuICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdpcy1zdGFydC1kYXRlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5zaW5nbGVEYXRlICYmIG9wdHMuYXV0b2Nsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIW9wdHMuc2luZ2xlRGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVEYXRlcyhzZWxmLmVsLCBvcHRzKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiAob3B0cy5zdGFydERhdGUgJiYgIW9wdHMuZW5kRGF0ZSkge1xuICAgICAgICAgICAgICAgICAgc2VsZi5zZXRFbmREYXRlKGRheSk7XG5cbiAgICAgICAgICAgICAgICAgIGlmIChvcHRzLnN0YXJ0RGF0ZS5pc0FmdGVyKG9wdHMuZW5kRGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzZWxmLnN3YXBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdpcy1lbmQtZGF0ZScpO1xuXG5cbiAgICAgICAgICAgICAgICAgIGlmIChvcHRzLmF1dG9jbG9zZSkge1xuICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVEYXRlcyhzZWxmLmVsLCBvcHRzKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICghb3B0cy5kaXNhYmxlZERhdGVzSW5SYW5nZSkge1xuICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuZWwucXVlcnlTZWxlY3RvckFsbCgnLmxpZ2h0cGlja19fZGF5LmlzLWF2YWlsYWJsZScpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0U3RhcnREYXRlKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZURhdGVzKHNlbGYuZWwsIG9wdHMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuZm9vdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZi5fb3B0cy5vbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9vcHRzLm9uRXJyb3IuY2FsbChzZWxmLCAnSW52YWxpZCByYW5nZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZvb3Rlck1lc3NhZ2UgPSBzZWxmLmVsLnF1ZXJ5U2VsZWN0b3IoJy5saWdodHBpY2tfX2Zvb3Rlci1tZXNzYWdlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb290ZXJNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyTWVzc2FnZS5pbm5lckhUTUwgPSBvcHRzLmxvY2FsZS5ub3RfYWxsb3dlZF9yYW5nZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyTWVzc2FnZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdsaWdodHBpY2tfX3ByZXZpb3VzLWFjdGlvbicpKSB7XG4gICAgICAgICAgICAgIGlmICh0YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLXZpZXctbW9kZScpKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgdmlld01vZGUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXZpZXctbW9kZScpO1xuXG4gICAgICAgICAgICAgICAgICBzd2l0Y2ggKHZpZXdNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGF5cyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJldk1vbnRoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlICdtb250aHMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnByZXZZZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbGlnaHRwaWNrX19uZXh0LWFjdGlvbicpKSB7XG4gICAgICAgICAgICAgIGlmICh0YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLXZpZXctbW9kZScpKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgdmlld01vZGUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXZpZXctbW9kZScpO1xuXG4gICAgICAgICAgICAgICAgICBzd2l0Y2ggKHZpZXdNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGF5cyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubmV4dE1vbnRoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlICdtb250aHMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm5leHRZZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbGlnaHRwaWNrX19jbG9zZS1hY3Rpb24nKSB8fCB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdsaWdodHBpY2tfX2FwcGx5LWFjdGlvbicpKSB7XG4gICAgICAgICAgICAgIHNlbGYuaGlkZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdsaWdodHBpY2tfX3Jlc2V0LWFjdGlvbicpKSB7XG4gICAgICAgICAgICAgIHNlbGYucmVzZXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbGlnaHRwaWNrX19tb250aC10aXRsZScpKSB7XG4gICAgICAgICAgICAgIGlmICh0YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLXltJykpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBfdG9vbGJhciA9IHNlbGYuZWwucXVlcnlTZWxlY3RvcignLmxpZ2h0cGlja19faW5uZXIgPiAubGlnaHRwaWNrX190b29sYmFyJyk7XG4gICAgICAgICAgICAgICAgICBpZiAoX3Rvb2xiYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICBfdG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBzZWxmLmVsLnF1ZXJ5U2VsZWN0b3IoJy5saWdodHBpY2tfX21vbnRocycpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgICAgcmVuZGVyTW9udGhzT2ZZZWFyKHNlbGYuZWwsIG9wdHMsIHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteW0nKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAodGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1nb3RvLW1vbnRoJykpIHtcbiAgICAgICAgICAgICAgdmFyIG1vbnRoID0gbW9tZW50KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZ290by1tb250aCcpLCAnWVlZWS1NJyk7XG4gICAgICAgICAgICAgIGlmIChtb250aC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgIHNlbGYuZ290b0RhdGUobW9udGgpO1xuXG4gICAgICAgICAgICAgICAgICBzZWxmLmVsLnF1ZXJ5U2VsZWN0b3IoJy5saWdodHBpY2tfX21vbnRocy1vZi10aGUteWVhcicpLmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgICAgICAgICAgICB2YXIgX3Rvb2xiYXIgPSBzZWxmLmVsLnF1ZXJ5U2VsZWN0b3IoJy5saWdodHBpY2tfX2lubmVyID4gLmxpZ2h0cGlja19fdG9vbGJhcicpO1xuICAgICAgICAgICAgICAgICAgaWYgKF90b29sYmFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgX3Rvb2xiYXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgfTtcbiAgICAgIHNlbGYuX29uTW91c2VFbnRlciA9IGZ1bmN0aW9uKGUpXG4gICAgICB7XG4gICAgICAgICAgaWYgKCFzZWxmLmlzU2hvd2luZykge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG4gICAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBvcHRzID0gc2VsZi5fb3B0cztcblxuICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdsaWdodHBpY2tfX2RheScpICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkLXRvb2x0aXAnKSAmJiBvcHRzLmxvY2FsZS50b29sdGlwT25EaXNhYmxlZCkge1xuICAgICAgICAgICAgICBzZWxmLnNob3dUb29sdGlwKHRhcmdldCwgb3B0cy5sb2NhbGUudG9vbHRpcE9uRGlzYWJsZWQpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBzZWxmLmhpZGVUb29sdGlwKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG9wdHMuc2luZ2xlRGF0ZSB8fCAoIW9wdHMuc3RhcnREYXRlICYmICFvcHRzLmVuZERhdGUpKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2xpZ2h0cGlja19fZGF5JykgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWF2YWlsYWJsZScpKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoKG9wdHMuc3RhcnREYXRlICYmICFvcHRzLmVuZERhdGUpIHx8IG9wdHMucmVwaWNrKSB7XG4gICAgICAgICAgICAgIHZhciBob3ZlckRhdGUgPSBtb21lbnQocGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS10aW1lJykpKTtcblxuICAgICAgICAgICAgICBpZiAoIWhvdmVyRGF0ZS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHZhciBzdGFydERhdGUgPSAob3B0cy5zdGFydERhdGUgJiYgIW9wdHMuZW5kRGF0ZSkgfHwgKG9wdHMucmVwaWNrICYmIG9wdHMucmVwaWNrVHJpZ2dlciA9PT0gb3B0cy5zZWNvbmRGaWVsZCkgPyBvcHRzLnN0YXJ0RGF0ZSA6IG9wdHMuZW5kRGF0ZTtcblxuICAgICAgICAgICAgICB2YXIgZGF5cyA9IHNlbGYuZWwucXVlcnlTZWxlY3RvckFsbCgnLmxpZ2h0cGlja19fZGF5Jyk7XG4gICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChkYXlzLCBmdW5jdGlvbihkYXkpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBkdCA9IG1vbWVudChwYXJzZUludChkYXkuZ2V0QXR0cmlidXRlKCdkYXRhLXRpbWUnKSkpO1xuXG4gICAgICAgICAgICAgICAgICBkYXkuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZmxpcHBlZCcpO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoZHQuaXNWYWxpZCgpICYmIGR0LmlzU2FtZU9yQWZ0ZXIoc3RhcnREYXRlLCAnZGF5JykgJiYgZHQuaXNTYW1lT3JCZWZvcmUoaG92ZXJEYXRlLCAnZGF5JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICBkYXkuY2xhc3NMaXN0LmFkZCgnaXMtaW4tcmFuZ2UnKTtcblxuICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLnJlcGlja1RyaWdnZXIgPT09IG9wdHMuZmllbGQgJiYgZHQuaXNTYW1lT3JBZnRlcihvcHRzLmVuZERhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRheS5jbGFzc0xpc3QuYWRkKCdpcy1mbGlwcGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZHQuaXNWYWxpZCgpICYmIGR0LmlzU2FtZU9yQWZ0ZXIoaG92ZXJEYXRlLCAnZGF5JykgJiYgZHQuaXNTYW1lT3JCZWZvcmUoc3RhcnREYXRlLCAnZGF5JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICBkYXkuY2xhc3NMaXN0LmFkZCgnaXMtaW4tcmFuZ2UnKTtcblxuICAgICAgICAgICAgICAgICAgICAgIGlmICgoKG9wdHMuc3RhcnREYXRlICYmICFvcHRzLmVuZERhdGUpIHx8IG9wdHMucmVwaWNrVHJpZ2dlciA9PT0gb3B0cy5zZWNvbmRGaWVsZCkgJiYgZHQuaXNTYW1lT3JCZWZvcmUob3B0cy5zdGFydERhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRheS5jbGFzc0xpc3QuYWRkKCdpcy1mbGlwcGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgZGF5LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWluLXJhbmdlJyk7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGlmIChvcHRzLnN0YXJ0RGF0ZSAmJiBvcHRzLmVuZERhdGUgJiYgb3B0cy5yZXBpY2sgJiYgb3B0cy5yZXBpY2tUcmlnZ2VyID09PSBvcHRzLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZGF5LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLXN0YXJ0LWRhdGUnKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGRheS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1lbmQtZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBpZiAob3B0cy5ob3ZlcmluZ1Rvb2x0aXApIHtcbiAgICAgICAgICAgICAgICAgIGRheXMgPSBNYXRoLmFicyhob3ZlckRhdGUuaXNBZnRlcihzdGFydERhdGUpID8gaG92ZXJEYXRlLmRpZmYoc3RhcnREYXRlLCAnZGF5JykgOiBzdGFydERhdGUuZGlmZihob3ZlckRhdGUsICdkYXknKSk7XG5cbiAgICAgICAgICAgICAgICAgIGlmICghb3B0cy50b29sdGlwTmlnaHRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZGF5cyArPSAxO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICB2YXIgdG9vbHRpcCA9IHNlbGYuZWwucXVlcnlTZWxlY3RvcignLmxpZ2h0cGlja19fdG9vbHRpcCcpO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoZGF5cyA+IDAgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWRpc2FibGVkJykpIHtcblxuICAgICAgICAgICAgICAgICAgICAgIHZhciBwbHVyYWxUZXh0ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRzLmxvY2FsZS5wbHVyYWxpemUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1cmFsVGV4dCA9IG9wdHMubG9jYWxlLnBsdXJhbGl6ZS5jYWxsKHNlbGYsIGRheXMsIG9wdHMubG9jYWxlLnRvb2x0aXApO1xuICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd1Rvb2x0aXAodGFyZ2V0LCBkYXlzICsgJyAnICsgcGx1cmFsVGV4dCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZGVUb29sdGlwKCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAob3B0cy5zdGFydERhdGUgJiYgb3B0cy5lbmREYXRlICYmIG9wdHMucmVwaWNrICYmIG9wdHMucmVwaWNrVHJpZ2dlciA9PT0gb3B0cy5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2lzLXN0YXJ0LWRhdGUnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdpcy1lbmQtZGF0ZScpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHNlbGYuX29uQ2hhbmdlID0gZnVuY3Rpb24oZSlcbiAgICAgIHtcbiAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLXNlbGVjdGVkLWxpZ2h0cGljay1tb250aCcpKSB7XG4gICAgICAgICAgICAgIHNlbGYuZ290b01vbnRoKHRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLXNlbGVjdGVkLWxpZ2h0cGljay15ZWFyJykpIHtcbiAgICAgICAgICAgICAgc2VsZi5nb3RvWWVhcih0YXJnZXQudmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHNlbGYuX29uSW5wdXRDaGFuZ2UgPSBmdW5jdGlvbihlKVxuICAgICAge1xuICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG5cbiAgICAgICAgICBpZiAoc2VsZi5fb3B0cy5zaW5nbGVEYXRlKSB7XG4gICAgICAgICAgICAgIGlmICghc2VsZi5fb3B0cy5hdXRvY2xvc2UpIHtcbiAgICAgICAgICAgICAgICAgIHNlbGYuZ290b0RhdGUob3B0cy5maWVsZC52YWx1ZSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBzZWxmLnNldFN0YXJ0RGF0ZShvcHRzLmZpZWxkLnZhbHVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXNlbGYuaXNTaG93aW5nKSB7XG4gICAgICAgICAgICAgIHNlbGYuc2hvdygpO1xuICAgICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHNlbGYuX29uSW5wdXRGb2N1cyA9IGZ1bmN0aW9uKGUpXG4gICAgICB7XG4gICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcblxuICAgICAgICAgIHNlbGYuc2hvdyh0YXJnZXQpO1xuICAgICAgfTtcblxuICAgICAgc2VsZi5fb25JbnB1dENsaWNrID0gZnVuY3Rpb24oZSlcbiAgICAgIHtcbiAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuXG4gICAgICAgICAgc2VsZi5zaG93KHRhcmdldCk7XG4gICAgICB9O1xuXG4gICAgICBzZWxmLl9vbkNsaWNrID0gZnVuY3Rpb24oZSlcbiAgICAgIHtcbiAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudCxcbiAgICAgICAgICAgICAgcGFyZW50RWwgPSB0YXJnZXQ7XG5cbiAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICBpZiAoKHBhcmVudEVsLmNsYXNzTGlzdCAmJiBwYXJlbnRFbC5jbGFzc0xpc3QuY29udGFpbnMoJ2xpZ2h0cGljaycpKSB8fCBwYXJlbnRFbCA9PT0gb3B0cy5maWVsZCB8fCAob3B0cy5zZWNvbmRGaWVsZCAmJiBwYXJlbnRFbCA9PT0gb3B0cy5zZWNvbmRGaWVsZCkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB3aGlsZSAoKHBhcmVudEVsID0gcGFyZW50RWwucGFyZW50Tm9kZSkpO1xuXG4gICAgICAgICAgaWYgKHNlbGYuaXNTaG93aW5nICYmIG9wdHMuaGlkZU9uQm9keUNsaWNrICYmIHRhcmdldCAhPT0gb3B0cy5maWVsZCAmJiBwYXJlbnRFbCAhPT0gb3B0cy5maWVsZCkge1xuICAgICAgICAgICAgICBzZWxmLmhpZGUoKTtcbiAgICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBzZWxmLnNob3dUb29sdGlwID0gZnVuY3Rpb24odGFyZ2V0LCB0ZXh0KVxuICAgICAge1xuICAgICAgICAgIHZhciB0b29sdGlwID0gc2VsZi5lbC5xdWVyeVNlbGVjdG9yKCcubGlnaHRwaWNrX190b29sdGlwJyk7XG5cbiAgICAgICAgICB2YXIgaGFzUGFyZW50RWwgPSBzZWxmLmVsLmNsYXNzTGlzdC5jb250YWlucygnbGlnaHRwaWNrLS1pbmxpbmVkJyksXG4gICAgICAgICAgZGF5Qm91bmRpbmcgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgcGlja2VyQm91ZGluZyA9IGhhc1BhcmVudEVsID8gc2VsZi5lbC5wYXJlbnROb2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogc2VsZi5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICBfbGVmdCA9IChkYXlCb3VuZGluZy5sZWZ0IC0gcGlja2VyQm91ZGluZy5sZWZ0KSArIChkYXlCb3VuZGluZy53aWR0aCAvIDIpLFxuICAgICAgICAgIF90b3AgPSBkYXlCb3VuZGluZy50b3AgLSBwaWNrZXJCb3VkaW5nLnRvcDtcblxuICAgICAgICAgIHRvb2x0aXAuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgICB0b29sdGlwLnRleHRDb250ZW50ID0gdGV4dDtcblxuICAgICAgICAgIHZhciB0b29sdGlwQm91bmRpbmcgPSB0b29sdGlwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgICAgX3RvcCAtPSB0b29sdGlwQm91bmRpbmcuaGVpZ2h0O1xuICAgICAgICAgIF9sZWZ0IC09ICh0b29sdGlwQm91bmRpbmcud2lkdGggLyAyKTtcblxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgdG9vbHRpcC5zdHlsZS50b3AgPSBfdG9wICsgJ3B4JztcbiAgICAgICAgICAgICAgdG9vbHRpcC5zdHlsZS5sZWZ0ID0gX2xlZnQgKyAncHgnO1xuICAgICAgICAgIH0sIDEwKTtcbiAgICAgIH07XG5cbiAgICAgIHNlbGYuaGlkZVRvb2x0aXAgPSBmdW5jdGlvbigpXG4gICAgICB7XG4gICAgICAgICAgdmFyIHRvb2x0aXAgPSBzZWxmLmVsLnF1ZXJ5U2VsZWN0b3IoJy5saWdodHBpY2tfX3Rvb2x0aXAnKTtcbiAgICAgICAgICB0b29sdGlwLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgIH07XG5cbiAgICAgIHNlbGYuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgc2VsZi5fb25Nb3VzZURvd24sIHRydWUpO1xuICAgICAgc2VsZi5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgc2VsZi5fb25Nb3VzZUVudGVyLCB0cnVlKTtcbiAgICAgIHNlbGYuZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBzZWxmLl9vbk1vdXNlRG93biwgdHJ1ZSk7XG5cbiAgICAgIHNlbGYuaGlkZSgpO1xuXG4gICAgICBvcHRzLmZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHNlbGYuX29uSW5wdXRDaGFuZ2UpO1xuICAgICAgb3B0cy5maWVsZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNlbGYuX29uSW5wdXRDbGljayk7XG4gICAgICBvcHRzLmZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgc2VsZi5fb25JbnB1dEZvY3VzKTtcblxuICAgICAgaWYgKG9wdHMuc2Vjb25kRmllbGQpIHtcbiAgICAgICAgICBvcHRzLnNlY29uZEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHNlbGYuX29uSW5wdXRDaGFuZ2UpO1xuICAgICAgICAgIG9wdHMuc2Vjb25kRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxmLl9vbklucHV0Q2xpY2spO1xuICAgICAgICAgIG9wdHMuc2Vjb25kRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBzZWxmLl9vbklucHV0Rm9jdXMpO1xuICAgICAgfVxuICB9O1xuXG4gIExpZ2h0cGljay5wcm90b3R5cGUgPSB7XG4gICAgICBjb25maWc6IGZ1bmN0aW9uKG9wdGlvbnMpXG4gICAgICB7XG4gICAgICAgICAgdmFyIG9wdHMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgICAgICBvcHRzLmZpZWxkID0gKG9wdHMuZmllbGQgJiYgb3B0cy5maWVsZC5ub2RlTmFtZSkgPyBvcHRzLmZpZWxkIDogbnVsbDtcblxuICAgICAgICAgIG9wdHMuY2FsZW5kYXIgPSBbbW9tZW50KCkuc2V0KCdkYXRlJywgMSldO1xuXG4gICAgICAgICAgaWYgKG9wdHMubnVtYmVyT2ZNb250aHMgPT09IDEgJiYgb3B0cy5udW1iZXJPZkNvbHVtbnMgPiAxKSB7XG4gICAgICAgICAgICAgIG9wdHMubnVtYmVyT2ZDb2x1bW5zID0gMTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBvcHRzLm1pbkRhdGUgPSBvcHRzLm1pbkRhdGUgJiYgbW9tZW50KG9wdHMubWluRGF0ZSkuaXNWYWxpZCgpID8gbW9tZW50KG9wdHMubWluRGF0ZSkgOiBudWxsO1xuXG4gICAgICAgICAgb3B0cy5tYXhEYXRlID0gb3B0cy5tYXhEYXRlICYmIG1vbWVudChvcHRzLm1heERhdGUpLmlzVmFsaWQoKSA/IG1vbWVudChvcHRzLm1heERhdGUpIDogbnVsbDtcblxuICAgICAgICAgIGlmIChvcHRzLmxhbmcgPT09ICdhdXRvJykge1xuICAgICAgICAgICAgICB2YXIgYnJvd3NlckxhbmcgPSBuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgbmF2aWdhdG9yLnVzZXJMYW5ndWFnZTtcbiAgICAgICAgICAgICAgaWYgKGJyb3dzZXJMYW5nKSB7XG4gICAgICAgICAgICAgICAgICBvcHRzLmxhbmcgPSBicm93c2VyTGFuZztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG9wdHMubGFuZyA9ICdlbi1VUyc7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAob3B0cy5zZWNvbmRGaWVsZCAmJiBvcHRzLnNpbmdsZURhdGUpIHtcbiAgICAgICAgICAgICAgb3B0cy5zaW5nbGVEYXRlID0gZmFsc2U7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG9wdHMuaG92ZXJpbmdUb29sdGlwICYmIG9wdHMuc2luZ2xlRGF0ZSkge1xuICAgICAgICAgICAgICBvcHRzLmhvdmVyaW5nVG9vbHRpcCA9IGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob3B0aW9ucy5sb2NhbGUpID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgICAgICAgICBvcHRzLmxvY2FsZSA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRzLmxvY2FsZSwgb3B0aW9ucy5sb2NhbGUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IDQ4MCAmJiBvcHRzLm51bWJlck9mTW9udGhzID4gMSkge1xuICAgICAgICAgICAgICBvcHRzLm51bWJlck9mTW9udGhzID0gMTtcbiAgICAgICAgICAgICAgb3B0cy5udW1iZXJPZkNvbHVtbnMgPSAxO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChvcHRzLnJlcGljayAmJiAhb3B0cy5zZWNvbmRGaWVsZCkge1xuICAgICAgICAgICAgICBvcHRzLnJlcGljayA9IGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuX29wdHMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRzKTtcblxuICAgICAgICAgIGlmICh0aGlzLmdldFN0YXJ0RGF0ZSgpID09PSBudWxsICYmIG1vbWVudCh0aGlzLl9vcHRzLmZpZWxkLnZhbHVlLCB0aGlzLl9vcHRzLmZvcm1hdCkuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgIHRoaXMuX29wdHMuc3RhcnREYXRlID0gbW9tZW50KHRoaXMuX29wdHMuZmllbGQudmFsdWUsIHRoaXMuX29wdHMuZm9ybWF0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy5nZXRFbmREYXRlKCkgPT09IG51bGwgJiYgdGhpcy5fb3B0cy5zZWNvbmRGaWVsZCAmJiBtb21lbnQodGhpcy5fb3B0cy5zZWNvbmRGaWVsZC52YWx1ZSwgdGhpcy5fb3B0cy5mb3JtYXQpLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICB0aGlzLl9vcHRzLmVuZERhdGUgPSBtb21lbnQodGhpcy5fb3B0cy5zZWNvbmRGaWVsZC52YWx1ZSwgdGhpcy5fb3B0cy5mb3JtYXQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuc2V0U3RhcnREYXRlKHRoaXMuX29wdHMuc3RhcnREYXRlLCB0cnVlKTtcbiAgICAgICAgICB0aGlzLnNldEVuZERhdGUodGhpcy5fb3B0cy5lbmREYXRlLCB0cnVlKTtcblxuICAgICAgICAgIHJldHVybiB0aGlzLl9vcHRzO1xuICAgICAgfSxcblxuICAgICAgc3dhcERhdGU6IGZ1bmN0aW9uKClcbiAgICAgIHtcbiAgICAgICAgICB2YXIgdG1wID0gbW9tZW50KHRoaXMuX29wdHMuc3RhcnREYXRlKTtcbiAgICAgICAgICB0aGlzLnNldERhdGVSYW5nZSh0aGlzLl9vcHRzLmVuZERhdGUsIHRtcCk7XG4gICAgICB9LFxuXG4gICAgICBnb3RvVG9kYXk6IGZ1bmN0aW9uKClcbiAgICAgIHtcbiAgICAgICAgICB0aGlzLmdvdG9EYXRlKG5ldyBEYXRlKCkpO1xuICAgICAgfSxcblxuICAgICAgZ290b0RhdGU6IGZ1bmN0aW9uKGRhdGUpXG4gICAgICB7XG4gICAgICAgICAgdmFyIGRhdGUgPSBtb21lbnQoZGF0ZSk7XG5cbiAgICAgICAgICBpZiAoIWRhdGUuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgIGRhdGUgPSBtb21lbnQoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkYXRlLnNldCgnZGF0ZScsIDEpO1xuXG4gICAgICAgICAgdGhpcy5fb3B0cy5jYWxlbmRhciA9IFttb21lbnQoZGF0ZSldO1xuXG4gICAgICAgICAgcmVuZGVyQ2FsZW5kYXIodGhpcy5lbCwgdGhpcy5fb3B0cyk7XG4gICAgICB9LFxuXG4gICAgICBnb3RvTW9udGg6IGZ1bmN0aW9uKG1vbnRoKVxuICAgICAge1xuICAgICAgICAgIGlmIChpc05hTihtb250aCkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuX29wdHMuY2FsZW5kYXJbMF0uc2V0KCdtb250aCcsIG1vbnRoKTtcblxuICAgICAgICAgIHJlbmRlckNhbGVuZGFyKHRoaXMuZWwsIHRoaXMuX29wdHMpO1xuICAgICAgfSxcblxuICAgICAgcHJldk1vbnRoOiBmdW5jdGlvbigpXG4gICAgICB7XG4gICAgICAgICAgdGhpcy5fb3B0cy5jYWxlbmRhclswXSA9IG1vbWVudCh0aGlzLl9vcHRzLmNhbGVuZGFyWzBdKS5zdWJ0cmFjdCh0aGlzLl9vcHRzLm51bWJlck9mTW9udGhzLCAnbW9udGgnKTtcblxuICAgICAgICAgIHJlbmRlckNhbGVuZGFyKHRoaXMuZWwsIHRoaXMuX29wdHMpO1xuXG4gICAgICAgICAgY2hlY2tEaXNhYmxlZERhdGVzSW5SYW5nZSh0aGlzLmVsLCB0aGlzLl9vcHRzKTtcbiAgICAgIH0sXG5cbiAgICAgIG5leHRNb250aDogZnVuY3Rpb24oKVxuICAgICAge1xuICAgICAgICAgIHRoaXMuX29wdHMuY2FsZW5kYXJbMF0gPSBtb21lbnQodGhpcy5fb3B0cy5jYWxlbmRhclsxXSk7XG5cbiAgICAgICAgICByZW5kZXJDYWxlbmRhcih0aGlzLmVsLCB0aGlzLl9vcHRzKTtcblxuICAgICAgICAgIGNoZWNrRGlzYWJsZWREYXRlc0luUmFuZ2UodGhpcy5lbCwgdGhpcy5fb3B0cyk7XG4gICAgICB9LFxuXG4gICAgICBwcmV2WWVhcjogZnVuY3Rpb24oKVxuICAgICAge1xuICAgICAgICAgIHRoaXMuX29wdHMuY2FsZW5kYXJbMF0gPSBtb21lbnQodGhpcy5fb3B0cy5jYWxlbmRhclswXSkuc3VidHJhY3QoMSwgJ3llYXInKTtcblxuICAgICAgICAgIHJlbmRlck1vbnRoc09mWWVhcih0aGlzLmVsLCB0aGlzLl9vcHRzKTtcbiAgICAgIH0sXG5cbiAgICAgIG5leHRZZWFyOiBmdW5jdGlvbigpXG4gICAgICB7XG4gICAgICAgICAgdGhpcy5fb3B0cy5jYWxlbmRhclswXSA9IG1vbWVudCh0aGlzLl9vcHRzLmNhbGVuZGFyWzBdKS5hZGQoMSwgJ3llYXInKTtcblxuICAgICAgICAgIHJlbmRlck1vbnRoc09mWWVhcih0aGlzLmVsLCB0aGlzLl9vcHRzKTtcbiAgICAgIH0sXG5cbiAgICAgIHVwZGF0ZVBvc2l0aW9uOiBmdW5jdGlvbigpXG4gICAgICB7XG4gICAgICAgICAgaWYgKHRoaXMuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdsaWdodHBpY2stLWlubGluZWQnKSkgcmV0dXJuO1xuXG4gICAgICAgICAgLy8gcmVtb3ZlIGBpcy1oaWRkZW5gIGNsYXNzIGZvciBnZXRCb3VuZGluZ0NsaWVudFJlY3RcbiAgICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWhpZGRlbicpO1xuXG4gICAgICAgICAgdmFyIHJlY3QgPSB0aGlzLl9vcHRzLmZpZWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgICAgICBjYWxSZWN0ID0gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgICAgb3JpZW50YXRpb24gPSB0aGlzLl9vcHRzLm9yaWVudGF0aW9uLnNwbGl0KCcgJyksXG4gICAgICAgICAgICAgIHRvcCA9IDAsXG4gICAgICAgICAgICAgIGxlZnQgPSAwO1xuXG4gICAgICAgICAgaWYgKG9yaWVudGF0aW9uWzBdID09ICdhdXRvJyB8fCAhKC90b3B8Ym90dG9tLy50ZXN0KG9yaWVudGF0aW9uWzBdKSkpIHtcbiAgICAgICAgICAgICAgaWYgKHJlY3QuYm90dG9tICsgY2FsUmVjdC5oZWlnaHQgPiB3aW5kb3cuaW5uZXJIZWlnaHQgJiYgd2luZG93LnBhZ2VZT2Zmc2V0ID4gY2FsUmVjdC5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgIHRvcCA9IChyZWN0LnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldCkgLSBjYWxSZWN0LmhlaWdodDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHRvcCA9IHJlY3QuYm90dG9tICsgd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICB0b3AgPSByZWN0W29yaWVudGF0aW9uWzBdXSArIHdpbmRvdy5wYWdlWU9mZnNldDtcblxuICAgICAgICAgICAgICBpZiAob3JpZW50YXRpb25bMF0gPT0gJ3RvcCcpIHtcbiAgICAgICAgICAgICAgICAgIHRvcCAtPSBjYWxSZWN0LmhlaWdodDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghKC9sZWZ0fHJpZ2h0Ly50ZXN0KG9yaWVudGF0aW9uWzBdKSkgJiYgKCFvcmllbnRhdGlvblsxXSB8fCBvcmllbnRhdGlvblsxXSA9PSAnYXV0bycgfHwgISgvbGVmdHxyaWdodC8udGVzdChvcmllbnRhdGlvblsxXSkpKSkge1xuICAgICAgICAgICAgICBpZiAocmVjdC5sZWZ0ICsgY2FsUmVjdC53aWR0aCA+IHdpbmRvdy5pbm5lcldpZHRoKSB7XG4gICAgICAgICAgICAgICAgICBsZWZ0ID0gKHJlY3QucmlnaHQgKyB3aW5kb3cucGFnZVhPZmZzZXQpIC0gY2FsUmVjdC53aWR0aDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGxlZnQgPSByZWN0LmxlZnQgKyB3aW5kb3cucGFnZVhPZmZzZXQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIGlmICgvbGVmdHxyaWdodC8udGVzdChvcmllbnRhdGlvblswXSkpIHtcbiAgICAgICAgICAgICAgICAgIGxlZnQgPSByZWN0W29yaWVudGF0aW9uWzBdXSArIHdpbmRvdy5wYWdlWE9mZnNldDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGxlZnQgPSByZWN0W29yaWVudGF0aW9uWzFdXSArIHdpbmRvdy5wYWdlWE9mZnNldDtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChvcmllbnRhdGlvblswXSA9PSAncmlnaHQnIHx8IG9yaWVudGF0aW9uWzFdID09ICdyaWdodCcpIHtcbiAgICAgICAgICAgICAgICAgIGxlZnQgLT0gY2FsUmVjdC53aWR0aDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnaXMtaGlkZGVuJyk7XG5cbiAgICAgICAgICB0aGlzLmVsLnN0eWxlLnRvcCA9IHRvcCArICdweCc7XG4gICAgICAgICAgdGhpcy5lbC5zdHlsZS5sZWZ0ID0gbGVmdCArICdweCc7XG4gICAgICB9LFxuXG4gICAgICBzZXRTdGFydERhdGU6IGZ1bmN0aW9uKGRhdGUsIHByZXZlbnRPblNlbGVjdClcbiAgICAgIHtcbiAgICAgICAgICB2YXIgZGF0ZUlTTyA9IG1vbWVudChkYXRlLCBtb21lbnQuSVNPXzg2MDEpLFxuICAgICAgICAgICAgICBkYXRlT3B0Rm9ybWF0ID0gbW9tZW50KGRhdGUsIHRoaXMuX29wdHMuZm9ybWF0KTtcblxuICAgICAgICAgIGlmICghZGF0ZUlTTy5pc1ZhbGlkKCkgJiYgIWRhdGVPcHRGb3JtYXQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgIHRoaXMuX29wdHMuc3RhcnREYXRlID0gbnVsbDtcbiAgICAgICAgICAgICAgdGhpcy5fb3B0cy5maWVsZC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5fb3B0cy5zdGFydERhdGUgPSBtb21lbnQoZGF0ZUlTTy5pc1ZhbGlkKCkgPyBkYXRlSVNPIDogZGF0ZU9wdEZvcm1hdCk7XG5cbiAgICAgICAgICBpZiAodGhpcy5fb3B0cy5zaW5nbGVEYXRlIHx8IHRoaXMuX29wdHMuc2Vjb25kRmllbGQpIHtcbiAgICAgICAgICAgICAgdGhpcy5fb3B0cy5maWVsZC52YWx1ZSA9IHRoaXMuX29wdHMuc3RhcnREYXRlLmZvcm1hdCh0aGlzLl9vcHRzLmZvcm1hdCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLl9vcHRzLmZpZWxkLnZhbHVlID0gdGhpcy5fb3B0cy5zdGFydERhdGUuZm9ybWF0KHRoaXMuX29wdHMuZm9ybWF0KSArIHRoaXMuX29wdHMuc2VwYXJhdG9yICsgJy4uLidcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXByZXZlbnRPblNlbGVjdCAmJiB0eXBlb2YgdGhpcy5fb3B0cy5vblNlbGVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICB0aGlzLl9vcHRzLm9uU2VsZWN0LmNhbGwodGhpcywgdGhpcy5nZXRTdGFydERhdGUoKSwgdGhpcy5nZXRFbmREYXRlKCkpO1xuICAgICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHNldEVuZERhdGU6IGZ1bmN0aW9uKGRhdGUsIHByZXZlbnRPblNlbGVjdClcbiAgICAgIHtcbiAgICAgICAgICB2YXIgZGF0ZUlTTyA9IG1vbWVudChkYXRlLCBtb21lbnQuSVNPXzg2MDEpLFxuICAgICAgICAgICAgICBkYXRlT3B0Rm9ybWF0ID0gbW9tZW50KGRhdGUsIHRoaXMuX29wdHMuZm9ybWF0KTtcblxuICAgICAgICAgIGlmICghZGF0ZUlTTy5pc1ZhbGlkKCkgJiYgIWRhdGVPcHRGb3JtYXQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgIHRoaXMuX29wdHMuZW5kRGF0ZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgaWYgKHRoaXMuX29wdHMuc2Vjb25kRmllbGQpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX29wdHMuc2Vjb25kRmllbGQudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmICghdGhpcy5fb3B0cy5zaW5nbGVEYXRlICYmIHRoaXMuX29wdHMuc3RhcnREYXRlKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9vcHRzLmZpZWxkLnZhbHVlID0gdGhpcy5fb3B0cy5zdGFydERhdGUuZm9ybWF0KHRoaXMuX29wdHMuZm9ybWF0KSArIHRoaXMuX29wdHMuc2VwYXJhdG9yICsgJy4uLidcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5fb3B0cy5lbmREYXRlID0gbW9tZW50KGRhdGVJU08uaXNWYWxpZCgpID8gZGF0ZUlTTyA6IGRhdGVPcHRGb3JtYXQpO1xuXG4gICAgICAgICAgaWYgKHRoaXMuX29wdHMuc2Vjb25kRmllbGQpIHtcbiAgICAgICAgICAgICAgdGhpcy5fb3B0cy5maWVsZC52YWx1ZSA9IHRoaXMuX29wdHMuc3RhcnREYXRlLmZvcm1hdCh0aGlzLl9vcHRzLmZvcm1hdCk7XG4gICAgICAgICAgICAgIHRoaXMuX29wdHMuc2Vjb25kRmllbGQudmFsdWUgPSB0aGlzLl9vcHRzLmVuZERhdGUuZm9ybWF0KHRoaXMuX29wdHMuZm9ybWF0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuX29wdHMuZmllbGQudmFsdWUgPSB0aGlzLl9vcHRzLnN0YXJ0RGF0ZS5mb3JtYXQodGhpcy5fb3B0cy5mb3JtYXQpICsgdGhpcy5fb3B0cy5zZXBhcmF0b3IgKyB0aGlzLl9vcHRzLmVuZERhdGUuZm9ybWF0KHRoaXMuX29wdHMuZm9ybWF0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXByZXZlbnRPblNlbGVjdCAmJiB0eXBlb2YgdGhpcy5fb3B0cy5vblNlbGVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICB0aGlzLl9vcHRzLm9uU2VsZWN0LmNhbGwodGhpcywgdGhpcy5nZXRTdGFydERhdGUoKSwgdGhpcy5nZXRFbmREYXRlKCkpO1xuICAgICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHNldERhdGU6IGZ1bmN0aW9uKGRhdGUpXG4gICAgICB7XG4gICAgICAgICAgaWYgKCF0aGlzLl9vcHRzLnNpbmdsZURhdGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNldFN0YXJ0RGF0ZShkYXRlLCB0cnVlKTtcbiAgICAgIH0sXG5cbiAgICAgIHNldERhdGVSYW5nZTogZnVuY3Rpb24oc3RhcnQsIGVuZCwgcHJldmVudE9uU2VsZWN0KVxuICAgICAge1xuICAgICAgICAgIGlmICh0aGlzLl9vcHRzLnNpbmdsZURhdGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNldFN0YXJ0RGF0ZShzdGFydCwgdHJ1ZSk7XG4gICAgICAgICAgdGhpcy5zZXRFbmREYXRlKGVuZCwgdHJ1ZSk7XG5cbiAgICAgICAgICBpZiAodGhpcy5pc1Nob3dpbmcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0ZXModGhpcy5lbCwgdGhpcy5fb3B0cyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFwcmV2ZW50T25TZWxlY3QgJiYgdHlwZW9mIHRoaXMuX29wdHMub25TZWxlY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgdGhpcy5fb3B0cy5vblNlbGVjdC5jYWxsKHRoaXMsIHRoaXMuZ2V0U3RhcnREYXRlKCksIHRoaXMuZ2V0RW5kRGF0ZSgpKTtcbiAgICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBzZXREaXNhYmxlRGF0ZXM6IGZ1bmN0aW9uKGRhdGVzKVxuICAgICAge1xuICAgICAgICAgIHRoaXMuX29wdHMuZGlzYWJsZURhdGVzID0gZGF0ZXM7XG5cbiAgICAgICAgICBpZiAodGhpcy5pc1Nob3dpbmcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0ZXModGhpcy5lbCwgdGhpcy5fb3B0cyk7XG4gICAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgZ2V0U3RhcnREYXRlOiBmdW5jdGlvbigpXG4gICAgICB7XG4gICAgICAgICAgcmV0dXJuIG1vbWVudCh0aGlzLl9vcHRzLnN0YXJ0RGF0ZSkuaXNWYWxpZCgpID8gdGhpcy5fb3B0cy5zdGFydERhdGUgOiBudWxsO1xuICAgICAgfSxcblxuICAgICAgZ2V0RW5kRGF0ZTogZnVuY3Rpb24oKVxuICAgICAge1xuICAgICAgICAgIHJldHVybiBtb21lbnQodGhpcy5fb3B0cy5lbmREYXRlKS5pc1ZhbGlkKCkgPyB0aGlzLl9vcHRzLmVuZERhdGUgOiBudWxsO1xuICAgICAgfSxcblxuICAgICAgZ2V0RGF0ZTogZnVuY3Rpb24oKVxuICAgICAge1xuICAgICAgICAgIHJldHVybiBtb21lbnQodGhpcy5fb3B0cy5zdGFydERhdGUpLmlzVmFsaWQoKSA/IHRoaXMuX29wdHMuc3RhcnREYXRlIDogbnVsbDtcbiAgICAgIH0sXG5cbiAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbihmb3JtYXQpXG4gICAgICB7XG4gICAgICAgICAgaWYgKHRoaXMuX29wdHMuc2luZ2xlRGF0ZSkge1xuICAgICAgICAgICAgICByZXR1cm4gbW9tZW50KHRoaXMuX29wdHMuc3RhcnREYXRlKS5pc1ZhbGlkKCkgPyB0aGlzLl9vcHRzLnN0YXJ0RGF0ZS5mb3JtYXQoZm9ybWF0KSA6ICcnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChtb21lbnQodGhpcy5fb3B0cy5zdGFydERhdGUpLmlzVmFsaWQoKSAmJiBtb21lbnQodGhpcy5fb3B0cy5lbmREYXRlKS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29wdHMuc3RhcnREYXRlLmZvcm1hdChmb3JtYXQpICsgdGhpcy5fb3B0cy5zZXBhcmF0b3IgKyB0aGlzLl9vcHRzLmVuZERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG1vbWVudCh0aGlzLl9vcHRzLnN0YXJ0RGF0ZSkuaXNWYWxpZCgpICYmICFtb21lbnQodGhpcy5fb3B0cy5lbmREYXRlKS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29wdHMuc3RhcnREYXRlLmZvcm1hdChmb3JtYXQpICsgdGhpcy5fb3B0cy5zZXBhcmF0b3IgKyAnLi4uJztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIW1vbWVudCh0aGlzLl9vcHRzLnN0YXJ0RGF0ZSkuaXNWYWxpZCgpICYmIG1vbWVudCh0aGlzLl9vcHRzLmVuZERhdGUpLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICByZXR1cm4gJy4uLicgKyB0aGlzLl9vcHRzLnNlcGFyYXRvciArIHRoaXMuX29wdHMuZW5kRGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9LFxuXG4gICAgICBzaG93OiBmdW5jdGlvbih0YXJnZXQpXG4gICAgICB7XG4gICAgICAgICAgaWYgKCF0aGlzLmlzU2hvd2luZykge1xuICAgICAgICAgICAgICB0aGlzLmlzU2hvd2luZyA9IHRydWU7XG5cbiAgICAgICAgICAgICAgaWYgKHRoaXMuX29wdHMucmVwaWNrKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9vcHRzLnJlcGlja1RyaWdnZXIgPSB0YXJnZXQ7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodGhpcy5fb3B0cy5zZWNvbmRGaWVsZCAmJiB0aGlzLl9vcHRzLnNlY29uZEZpZWxkID09PSB0YXJnZXQgJiYgdGhpcy5fb3B0cy5lbmREYXRlKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmdvdG9EYXRlKHRoaXMuX29wdHMuZW5kRGF0ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmdvdG9EYXRlKHRoaXMuX29wdHMuc3RhcnREYXRlKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbGljayk7XG5cbiAgICAgICAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbigpO1xuXG4gICAgICAgICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtaGlkZGVuJyk7XG5cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9vcHRzLm9uT3BlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgdGhpcy5fb3B0cy5vbk9wZW4uY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHRoaXMuZWwucXVlcnlTZWxlY3RvcignLmxpZ2h0cGlja19fbW9udGhzLW9mLXRoZS15ZWFyJykuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIGhpZGU6IGZ1bmN0aW9uKClcbiAgICAgIHtcbiAgICAgICAgICBpZiAodGhpcy5pc1Nob3dpbmcpIHtcbiAgICAgICAgICAgICAgdGhpcy5pc1Nob3dpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX29uQ2xpY2spO1xuXG4gICAgICAgICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnaXMtaGlkZGVuJyk7XG5cbiAgICAgICAgICAgICAgdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcubGlnaHRwaWNrX190b29sdGlwJykuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuXG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5fb3B0cy5vbkNsb3NlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9vcHRzLm9uQ2xvc2UuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKClcbiAgICAgIHtcbiAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMuX29wdHM7XG5cbiAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX29uTW91c2VEb3duLCB0cnVlKTtcbiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5fb25Nb3VzZURvd24sIHRydWUpO1xuICAgICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5fb25DaGFuZ2UsIHRydWUpO1xuXG4gICAgICAgICAgb3B0cy5maWVsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLl9vbklucHV0Q2hhbmdlKTtcbiAgICAgICAgICBvcHRzLmZpZWxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25JbnB1dENsaWNrKTtcbiAgICAgICAgICBvcHRzLmZpZWxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fb25JbnB1dEZvY3VzKTtcblxuICAgICAgICAgIGlmIChvcHRzLnNlY29uZEZpZWxkKSB7XG4gICAgICAgICAgICAgIG9wdHMuc2Vjb25kRmllbGQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5fb25JbnB1dENoYW5nZSk7XG4gICAgICAgICAgICAgIG9wdHMuc2Vjb25kRmllbGQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9vbklucHV0Q2xpY2spO1xuICAgICAgICAgICAgICBvcHRzLnNlY29uZEZpZWxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fb25JbnB1dEZvY3VzKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy5lbC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgIHRoaXMuZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsKTtcbiAgICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICByZXNldDogZnVuY3Rpb24oKVxuICAgICAge1xuICAgICAgICAgIHRoaXMuc2V0U3RhcnREYXRlKG51bGwsIHRydWUpO1xuICAgICAgICAgIHRoaXMuc2V0RW5kRGF0ZShudWxsLCB0cnVlKTtcblxuICAgICAgICAgIHVwZGF0ZURhdGVzKHRoaXMuZWwsIHRoaXMuX29wdHMpO1xuXG4gICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9vcHRzLm9uU2VsZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIHRoaXMuX29wdHMub25TZWxlY3QuY2FsbCh0aGlzLCB0aGlzLmdldFN0YXJ0RGF0ZSgpLCB0aGlzLmdldEVuZERhdGUoKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcubGlnaHRwaWNrX190b29sdGlwJykuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgfSxcblxuICAgICAgcmVsb2FkT3B0aW9uczogZnVuY3Rpb24ob3B0aW9ucylcbiAgICAgIHtcbiAgICAgICAgICB0aGlzLl9vcHRzID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fb3B0cywgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgfTtcblxuICByZXR1cm4gTGlnaHRwaWNrO1xufSkpO1xuIiwiIWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUodCk6ZS5tb21lbnQ9dCgpfSh0aGlzLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGUsaTtmdW5jdGlvbiBjKCl7cmV0dXJuIGUuYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBBcnJheXx8XCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfWZ1bmN0aW9uIHUoZSl7cmV0dXJuIG51bGwhPWUmJlwiW29iamVjdCBPYmplY3RdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9ZnVuY3Rpb24gbChlKXtyZXR1cm4gdm9pZCAwPT09ZX1mdW5jdGlvbiBkKGUpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlfHxcIltvYmplY3QgTnVtYmVyXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfWZ1bmN0aW9uIGgoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBEYXRlfHxcIltvYmplY3QgRGF0ZV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX1mdW5jdGlvbiBmKGUsdCl7dmFyIG4scz1bXTtmb3Iobj0wO248ZS5sZW5ndGg7KytuKXMucHVzaCh0KGVbbl0sbikpO3JldHVybiBzfWZ1bmN0aW9uIG0oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9ZnVuY3Rpb24gXyhlLHQpe2Zvcih2YXIgbiBpbiB0KW0odCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIG0odCxcInRvU3RyaW5nXCIpJiYoZS50b1N0cmluZz10LnRvU3RyaW5nKSxtKHQsXCJ2YWx1ZU9mXCIpJiYoZS52YWx1ZU9mPXQudmFsdWVPZiksZX1mdW5jdGlvbiB5KGUsdCxuLHMpe3JldHVybiBPdChlLHQsbixzLCEwKS51dGMoKX1mdW5jdGlvbiBnKGUpe3JldHVybiBudWxsPT1lLl9wZiYmKGUuX3BmPXtlbXB0eTohMSx1bnVzZWRUb2tlbnM6W10sdW51c2VkSW5wdXQ6W10sb3ZlcmZsb3c6LTIsY2hhcnNMZWZ0T3ZlcjowLG51bGxJbnB1dDohMSxpbnZhbGlkTW9udGg6bnVsbCxpbnZhbGlkRm9ybWF0OiExLHVzZXJJbnZhbGlkYXRlZDohMSxpc286ITEscGFyc2VkRGF0ZVBhcnRzOltdLG1lcmlkaWVtOm51bGwscmZjMjgyMjohMSx3ZWVrZGF5TWlzbWF0Y2g6ITF9KSxlLl9wZn1mdW5jdGlvbiBwKGUpe2lmKG51bGw9PWUuX2lzVmFsaWQpe3ZhciB0PWcoZSksbj1pLmNhbGwodC5wYXJzZWREYXRlUGFydHMsZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWV9KSxzPSFpc05hTihlLl9kLmdldFRpbWUoKSkmJnQub3ZlcmZsb3c8MCYmIXQuZW1wdHkmJiF0LmludmFsaWRNb250aCYmIXQuaW52YWxpZFdlZWtkYXkmJiF0LndlZWtkYXlNaXNtYXRjaCYmIXQubnVsbElucHV0JiYhdC5pbnZhbGlkRm9ybWF0JiYhdC51c2VySW52YWxpZGF0ZWQmJighdC5tZXJpZGllbXx8dC5tZXJpZGllbSYmbik7aWYoZS5fc3RyaWN0JiYocz1zJiYwPT09dC5jaGFyc0xlZnRPdmVyJiYwPT09dC51bnVzZWRUb2tlbnMubGVuZ3RoJiZ2b2lkIDA9PT10LmJpZ0hvdXIpLG51bGwhPU9iamVjdC5pc0Zyb3plbiYmT2JqZWN0LmlzRnJvemVuKGUpKXJldHVybiBzO2UuX2lzVmFsaWQ9c31yZXR1cm4gZS5faXNWYWxpZH1mdW5jdGlvbiB2KGUpe3ZhciB0PXkoTmFOKTtyZXR1cm4gbnVsbCE9ZT9fKGcodCksZSk6Zyh0KS51c2VySW52YWxpZGF0ZWQ9ITAsdH1pPUFycmF5LnByb3RvdHlwZS5zb21lP0FycmF5LnByb3RvdHlwZS5zb21lOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1PYmplY3QodGhpcyksbj10Lmxlbmd0aD4+PjAscz0wO3M8bjtzKyspaWYocyBpbiB0JiZlLmNhbGwodGhpcyx0W3NdLHMsdCkpcmV0dXJuITA7cmV0dXJuITF9O3ZhciByPWMubW9tZW50UHJvcGVydGllcz1bXTtmdW5jdGlvbiB3KGUsdCl7dmFyIG4scyxpO2lmKGwodC5faXNBTW9tZW50T2JqZWN0KXx8KGUuX2lzQU1vbWVudE9iamVjdD10Ll9pc0FNb21lbnRPYmplY3QpLGwodC5faSl8fChlLl9pPXQuX2kpLGwodC5fZil8fChlLl9mPXQuX2YpLGwodC5fbCl8fChlLl9sPXQuX2wpLGwodC5fc3RyaWN0KXx8KGUuX3N0cmljdD10Ll9zdHJpY3QpLGwodC5fdHptKXx8KGUuX3R6bT10Ll90em0pLGwodC5faXNVVEMpfHwoZS5faXNVVEM9dC5faXNVVEMpLGwodC5fb2Zmc2V0KXx8KGUuX29mZnNldD10Ll9vZmZzZXQpLGwodC5fcGYpfHwoZS5fcGY9Zyh0KSksbCh0Ll9sb2NhbGUpfHwoZS5fbG9jYWxlPXQuX2xvY2FsZSksMDxyLmxlbmd0aClmb3Iobj0wO248ci5sZW5ndGg7bisrKWwoaT10W3M9cltuXV0pfHwoZVtzXT1pKTtyZXR1cm4gZX12YXIgdD0hMTtmdW5jdGlvbiBNKGUpe3codGhpcyxlKSx0aGlzLl9kPW5ldyBEYXRlKG51bGwhPWUuX2Q/ZS5fZC5nZXRUaW1lKCk6TmFOKSx0aGlzLmlzVmFsaWQoKXx8KHRoaXMuX2Q9bmV3IERhdGUoTmFOKSksITE9PT10JiYodD0hMCxjLnVwZGF0ZU9mZnNldCh0aGlzKSx0PSExKX1mdW5jdGlvbiBTKGUpe3JldHVybiBlIGluc3RhbmNlb2YgTXx8bnVsbCE9ZSYmbnVsbCE9ZS5faXNBTW9tZW50T2JqZWN0fWZ1bmN0aW9uIEQoZSl7cmV0dXJuIGU8MD9NYXRoLmNlaWwoZSl8fDA6TWF0aC5mbG9vcihlKX1mdW5jdGlvbiBrKGUpe3ZhciB0PStlLG49MDtyZXR1cm4gMCE9PXQmJmlzRmluaXRlKHQpJiYobj1EKHQpKSxufWZ1bmN0aW9uIGEoZSx0LG4pe3ZhciBzLGk9TWF0aC5taW4oZS5sZW5ndGgsdC5sZW5ndGgpLHI9TWF0aC5hYnMoZS5sZW5ndGgtdC5sZW5ndGgpLGE9MDtmb3Iocz0wO3M8aTtzKyspKG4mJmVbc10hPT10W3NdfHwhbiYmayhlW3NdKSE9PWsodFtzXSkpJiZhKys7cmV0dXJuIGErcn1mdW5jdGlvbiBZKGUpeyExPT09Yy5zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZ3MmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBjb25zb2xlJiZjb25zb2xlLndhcm4mJmNvbnNvbGUud2FybihcIkRlcHJlY2F0aW9uIHdhcm5pbmc6IFwiK2UpfWZ1bmN0aW9uIG4oaSxyKXt2YXIgYT0hMDtyZXR1cm4gXyhmdW5jdGlvbigpe2lmKG51bGwhPWMuZGVwcmVjYXRpb25IYW5kbGVyJiZjLmRlcHJlY2F0aW9uSGFuZGxlcihudWxsLGkpLGEpe2Zvcih2YXIgZSx0PVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXtpZihlPVwiXCIsXCJvYmplY3RcIj09dHlwZW9mIGFyZ3VtZW50c1tuXSl7Zm9yKHZhciBzIGluIGUrPVwiXFxuW1wiK24rXCJdIFwiLGFyZ3VtZW50c1swXSllKz1zK1wiOiBcIithcmd1bWVudHNbMF1bc10rXCIsIFwiO2U9ZS5zbGljZSgwLC0yKX1lbHNlIGU9YXJndW1lbnRzW25dO3QucHVzaChlKX1ZKGkrXCJcXG5Bcmd1bWVudHM6IFwiK0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpLmpvaW4oXCJcIikrXCJcXG5cIisobmV3IEVycm9yKS5zdGFjayksYT0hMX1yZXR1cm4gci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHIpfXZhciBzLE89e307ZnVuY3Rpb24gVChlLHQpe251bGwhPWMuZGVwcmVjYXRpb25IYW5kbGVyJiZjLmRlcHJlY2F0aW9uSGFuZGxlcihlLHQpLE9bZV18fChZKHQpLE9bZV09ITApfWZ1bmN0aW9uIHgoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBGdW5jdGlvbnx8XCJbb2JqZWN0IEZ1bmN0aW9uXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfWZ1bmN0aW9uIGIoZSx0KXt2YXIgbixzPV8oe30sZSk7Zm9yKG4gaW4gdCltKHQsbikmJih1KGVbbl0pJiZ1KHRbbl0pPyhzW25dPXt9LF8oc1tuXSxlW25dKSxfKHNbbl0sdFtuXSkpOm51bGwhPXRbbl0/c1tuXT10W25dOmRlbGV0ZSBzW25dKTtmb3IobiBpbiBlKW0oZSxuKSYmIW0odCxuKSYmdShlW25dKSYmKHNbbl09Xyh7fSxzW25dKSk7cmV0dXJuIHN9ZnVuY3Rpb24gUChlKXtudWxsIT1lJiZ0aGlzLnNldChlKX1jLnN1cHByZXNzRGVwcmVjYXRpb25XYXJuaW5ncz0hMSxjLmRlcHJlY2F0aW9uSGFuZGxlcj1udWxsLHM9T2JqZWN0LmtleXM/T2JqZWN0LmtleXM6ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXTtmb3IodCBpbiBlKW0oZSx0KSYmbi5wdXNoKHQpO3JldHVybiBufTt2YXIgVz17fTtmdW5jdGlvbiBIKGUsdCl7dmFyIG49ZS50b0xvd2VyQ2FzZSgpO1dbbl09V1tuK1wic1wiXT1XW3RdPWV9ZnVuY3Rpb24gUihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZT9XW2VdfHxXW2UudG9Mb3dlckNhc2UoKV06dm9pZCAwfWZ1bmN0aW9uIEMoZSl7dmFyIHQsbixzPXt9O2ZvcihuIGluIGUpbShlLG4pJiYodD1SKG4pKSYmKHNbdF09ZVtuXSk7cmV0dXJuIHN9dmFyIEY9e307ZnVuY3Rpb24gTChlLHQpe0ZbZV09dH1mdW5jdGlvbiBVKGUsdCxuKXt2YXIgcz1cIlwiK01hdGguYWJzKGUpLGk9dC1zLmxlbmd0aDtyZXR1cm4oMDw9ZT9uP1wiK1wiOlwiXCI6XCItXCIpK01hdGgucG93KDEwLE1hdGgubWF4KDAsaSkpLnRvU3RyaW5nKCkuc3Vic3RyKDEpK3N9dmFyIE49LyhcXFtbXlxcW10qXFxdKXwoXFxcXCk/KFtIaF1tbShzcyk/fE1vfE1NP00/TT98RG98REREb3xERD9EP0Q/fGRkZD9kP3xkbz98d1tvfHddP3xXW298V10/fFFvP3xZWVlZWVl8WVlZWVl8WVlZWXxZWXxnZyhnZ2c/KT98R0coR0dHPyk/fGV8RXxhfEF8aGg/fEhIP3xraz98bW0/fHNzP3xTezEsOX18eHxYfHp6P3xaWj98LikvZyxHPS8oXFxbW15cXFtdKlxcXSl8KFxcXFwpPyhMVFN8TFR8TEw/TD9MP3xsezEsNH0pL2csVj17fSxFPXt9O2Z1bmN0aW9uIEkoZSx0LG4scyl7dmFyIGk9cztcInN0cmluZ1wiPT10eXBlb2YgcyYmKGk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tzXSgpfSksZSYmKEVbZV09aSksdCYmKEVbdFswXV09ZnVuY3Rpb24oKXtyZXR1cm4gVShpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0WzFdLHRbMl0pfSksbiYmKEVbbl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkub3JkaW5hbChpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlKX0pfWZ1bmN0aW9uIEEoZSx0KXtyZXR1cm4gZS5pc1ZhbGlkKCk/KHQ9aih0LGUubG9jYWxlRGF0YSgpKSxWW3RdPVZbdF18fGZ1bmN0aW9uKHMpe3ZhciBlLGksdCxyPXMubWF0Y2goTik7Zm9yKGU9MCxpPXIubGVuZ3RoO2U8aTtlKyspRVtyW2VdXT9yW2VdPUVbcltlXV06cltlXT0odD1yW2VdKS5tYXRjaCgvXFxbW1xcc1xcU10vKT90LnJlcGxhY2UoL15cXFt8XFxdJC9nLFwiXCIpOnQucmVwbGFjZSgvXFxcXC9nLFwiXCIpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdCxuPVwiXCI7Zm9yKHQ9MDt0PGk7dCsrKW4rPXgoclt0XSk/clt0XS5jYWxsKGUscyk6clt0XTtyZXR1cm4gbn19KHQpLFZbdF0oZSkpOmUubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCl9ZnVuY3Rpb24gaihlLHQpe3ZhciBuPTU7ZnVuY3Rpb24gcyhlKXtyZXR1cm4gdC5sb25nRGF0ZUZvcm1hdChlKXx8ZX1mb3IoRy5sYXN0SW5kZXg9MDswPD1uJiZHLnRlc3QoZSk7KWU9ZS5yZXBsYWNlKEcscyksRy5sYXN0SW5kZXg9MCxuLT0xO3JldHVybiBlfXZhciBaPS9cXGQvLHo9L1xcZFxcZC8sJD0vXFxkezN9LyxxPS9cXGR7NH0vLEo9L1srLV0/XFxkezZ9LyxCPS9cXGRcXGQ/LyxRPS9cXGRcXGRcXGRcXGQ/LyxYPS9cXGRcXGRcXGRcXGRcXGRcXGQ/LyxLPS9cXGR7MSwzfS8sZWU9L1xcZHsxLDR9Lyx0ZT0vWystXT9cXGR7MSw2fS8sbmU9L1xcZCsvLHNlPS9bKy1dP1xcZCsvLGllPS9afFsrLV1cXGRcXGQ6P1xcZFxcZC9naSxyZT0vWnxbKy1dXFxkXFxkKD86Oj9cXGRcXGQpPy9naSxhZT0vWzAtOV17MCwyNTZ9WydhLXpcXHUwMEEwLVxcdTA1RkZcXHUwNzAwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGMDdcXHVGRjEwLVxcdUZGRUZdezEsMjU2fXxbXFx1MDYwMC1cXHUwNkZGXFwvXXsxLDI1Nn0oXFxzKj9bXFx1MDYwMC1cXHUwNkZGXXsxLDI1Nn0pezEsMn0vaSxvZT17fTtmdW5jdGlvbiB1ZShlLG4scyl7b2VbZV09eChuKT9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUmJnM/czpufX1mdW5jdGlvbiBsZShlLHQpe3JldHVybiBtKG9lLGUpP29lW2VdKHQuX3N0cmljdCx0Ll9sb2NhbGUpOm5ldyBSZWdFeHAoZGUoZS5yZXBsYWNlKFwiXFxcXFwiLFwiXCIpLnJlcGxhY2UoL1xcXFwoXFxbKXxcXFxcKFxcXSl8XFxbKFteXFxdXFxbXSopXFxdfFxcXFwoLikvZyxmdW5jdGlvbihlLHQsbixzLGkpe3JldHVybiB0fHxufHxzfHxpfSkpKX1mdW5jdGlvbiBkZShlKXtyZXR1cm4gZS5yZXBsYWNlKC9bLVxcL1xcXFxeJCorPy4oKXxbXFxde31dL2csXCJcXFxcJCZcIil9dmFyIGhlPXt9O2Z1bmN0aW9uIGNlKGUsbil7dmFyIHQscz1uO2ZvcihcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9W2VdKSxkKG4pJiYocz1mdW5jdGlvbihlLHQpe3Rbbl09ayhlKX0pLHQ9MDt0PGUubGVuZ3RoO3QrKyloZVtlW3RdXT1zfWZ1bmN0aW9uIGZlKGUsaSl7Y2UoZSxmdW5jdGlvbihlLHQsbixzKXtuLl93PW4uX3d8fHt9LGkoZSxuLl93LG4scyl9KX12YXIgbWU9MCxfZT0xLHllPTIsZ2U9MyxwZT00LHZlPTUsd2U9NixNZT03LFNlPTg7ZnVuY3Rpb24gRGUoZSl7cmV0dXJuIGtlKGUpPzM2NjozNjV9ZnVuY3Rpb24ga2UoZSl7cmV0dXJuIGUlND09MCYmZSUxMDAhPTB8fGUlNDAwPT0wfUkoXCJZXCIsMCwwLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy55ZWFyKCk7cmV0dXJuIGU8PTk5OTk/XCJcIitlOlwiK1wiK2V9KSxJKDAsW1wiWVlcIiwyXSwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueWVhcigpJTEwMH0pLEkoMCxbXCJZWVlZXCIsNF0sMCxcInllYXJcIiksSSgwLFtcIllZWVlZXCIsNV0sMCxcInllYXJcIiksSSgwLFtcIllZWVlZWVwiLDYsITBdLDAsXCJ5ZWFyXCIpLEgoXCJ5ZWFyXCIsXCJ5XCIpLEwoXCJ5ZWFyXCIsMSksdWUoXCJZXCIsc2UpLHVlKFwiWVlcIixCLHopLHVlKFwiWVlZWVwiLGVlLHEpLHVlKFwiWVlZWVlcIix0ZSxKKSx1ZShcIllZWVlZWVwiLHRlLEopLGNlKFtcIllZWVlZXCIsXCJZWVlZWVlcIl0sbWUpLGNlKFwiWVlZWVwiLGZ1bmN0aW9uKGUsdCl7dFttZV09Mj09PWUubGVuZ3RoP2MucGFyc2VUd29EaWdpdFllYXIoZSk6ayhlKX0pLGNlKFwiWVlcIixmdW5jdGlvbihlLHQpe3RbbWVdPWMucGFyc2VUd29EaWdpdFllYXIoZSl9KSxjZShcIllcIixmdW5jdGlvbihlLHQpe3RbbWVdPXBhcnNlSW50KGUsMTApfSksYy5wYXJzZVR3b0RpZ2l0WWVhcj1mdW5jdGlvbihlKXtyZXR1cm4gayhlKSsoNjg8ayhlKT8xOTAwOjJlMyl9O3ZhciBZZSxPZT1UZShcIkZ1bGxZZWFyXCIsITApO2Z1bmN0aW9uIFRlKHQsbil7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lPyhiZSh0aGlzLHQsZSksYy51cGRhdGVPZmZzZXQodGhpcyxuKSx0aGlzKTp4ZSh0aGlzLHQpfX1mdW5jdGlvbiB4ZShlLHQpe3JldHVybiBlLmlzVmFsaWQoKT9lLl9kW1wiZ2V0XCIrKGUuX2lzVVRDP1wiVVRDXCI6XCJcIikrdF0oKTpOYU59ZnVuY3Rpb24gYmUoZSx0LG4pe2UuaXNWYWxpZCgpJiYhaXNOYU4obikmJihcIkZ1bGxZZWFyXCI9PT10JiZrZShlLnllYXIoKSkmJjE9PT1lLm1vbnRoKCkmJjI5PT09ZS5kYXRlKCk/ZS5fZFtcInNldFwiKyhlLl9pc1VUQz9cIlVUQ1wiOlwiXCIpK3RdKG4sZS5tb250aCgpLFBlKG4sZS5tb250aCgpKSk6ZS5fZFtcInNldFwiKyhlLl9pc1VUQz9cIlVUQ1wiOlwiXCIpK3RdKG4pKX1mdW5jdGlvbiBQZShlLHQpe2lmKGlzTmFOKGUpfHxpc05hTih0KSlyZXR1cm4gTmFOO3ZhciBuLHM9KHQlKG49MTIpK24pJW47cmV0dXJuIGUrPSh0LXMpLzEyLDE9PT1zP2tlKGUpPzI5OjI4OjMxLXMlNyUyfVllPUFycmF5LnByb3RvdHlwZS5pbmRleE9mP0FycmF5LnByb3RvdHlwZS5pbmRleE9mOmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0PTA7dDx0aGlzLmxlbmd0aDsrK3QpaWYodGhpc1t0XT09PWUpcmV0dXJuIHQ7cmV0dXJuLTF9LEkoXCJNXCIsW1wiTU1cIiwyXSxcIk1vXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb250aCgpKzF9KSxJKFwiTU1NXCIsMCwwLGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tb250aHNTaG9ydCh0aGlzLGUpfSksSShcIk1NTU1cIiwwLDAsZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1vbnRocyh0aGlzLGUpfSksSChcIm1vbnRoXCIsXCJNXCIpLEwoXCJtb250aFwiLDgpLHVlKFwiTVwiLEIpLHVlKFwiTU1cIixCLHopLHVlKFwiTU1NXCIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5tb250aHNTaG9ydFJlZ2V4KGUpfSksdWUoXCJNTU1NXCIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5tb250aHNSZWdleChlKX0pLGNlKFtcIk1cIixcIk1NXCJdLGZ1bmN0aW9uKGUsdCl7dFtfZV09ayhlKS0xfSksY2UoW1wiTU1NXCIsXCJNTU1NXCJdLGZ1bmN0aW9uKGUsdCxuLHMpe3ZhciBpPW4uX2xvY2FsZS5tb250aHNQYXJzZShlLHMsbi5fc3RyaWN0KTtudWxsIT1pP3RbX2VdPWk6ZyhuKS5pbnZhbGlkTW9udGg9ZX0pO3ZhciBXZT0vRFtvRF0/KFxcW1teXFxbXFxdXSpcXF18XFxzKStNTU1NPy8sSGU9XCJKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyXCIuc3BsaXQoXCJfXCIpO3ZhciBSZT1cIkphbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjXCIuc3BsaXQoXCJfXCIpO2Z1bmN0aW9uIENlKGUsdCl7dmFyIG47aWYoIWUuaXNWYWxpZCgpKXJldHVybiBlO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KWlmKC9eXFxkKyQvLnRlc3QodCkpdD1rKHQpO2Vsc2UgaWYoIWQodD1lLmxvY2FsZURhdGEoKS5tb250aHNQYXJzZSh0KSkpcmV0dXJuIGU7cmV0dXJuIG49TWF0aC5taW4oZS5kYXRlKCksUGUoZS55ZWFyKCksdCkpLGUuX2RbXCJzZXRcIisoZS5faXNVVEM/XCJVVENcIjpcIlwiKStcIk1vbnRoXCJdKHQsbiksZX1mdW5jdGlvbiBGZShlKXtyZXR1cm4gbnVsbCE9ZT8oQ2UodGhpcyxlKSxjLnVwZGF0ZU9mZnNldCh0aGlzLCEwKSx0aGlzKTp4ZSh0aGlzLFwiTW9udGhcIil9dmFyIExlPWFlO3ZhciBVZT1hZTtmdW5jdGlvbiBOZSgpe2Z1bmN0aW9uIGUoZSx0KXtyZXR1cm4gdC5sZW5ndGgtZS5sZW5ndGh9dmFyIHQsbixzPVtdLGk9W10scj1bXTtmb3IodD0wO3Q8MTI7dCsrKW49eShbMmUzLHRdKSxzLnB1c2godGhpcy5tb250aHNTaG9ydChuLFwiXCIpKSxpLnB1c2godGhpcy5tb250aHMobixcIlwiKSksci5wdXNoKHRoaXMubW9udGhzKG4sXCJcIikpLHIucHVzaCh0aGlzLm1vbnRoc1Nob3J0KG4sXCJcIikpO2ZvcihzLnNvcnQoZSksaS5zb3J0KGUpLHIuc29ydChlKSx0PTA7dDwxMjt0Kyspc1t0XT1kZShzW3RdKSxpW3RdPWRlKGlbdF0pO2Zvcih0PTA7dDwyNDt0Kyspclt0XT1kZShyW3RdKTt0aGlzLl9tb250aHNSZWdleD1uZXcgUmVnRXhwKFwiXihcIityLmpvaW4oXCJ8XCIpK1wiKVwiLFwiaVwiKSx0aGlzLl9tb250aHNTaG9ydFJlZ2V4PXRoaXMuX21vbnRoc1JlZ2V4LHRoaXMuX21vbnRoc1N0cmljdFJlZ2V4PW5ldyBSZWdFeHAoXCJeKFwiK2kuam9pbihcInxcIikrXCIpXCIsXCJpXCIpLHRoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXg9bmV3IFJlZ0V4cChcIl4oXCIrcy5qb2luKFwifFwiKStcIilcIixcImlcIil9ZnVuY3Rpb24gR2UoZSl7dmFyIHQ9bmV3IERhdGUoRGF0ZS5VVEMuYXBwbHkobnVsbCxhcmd1bWVudHMpKTtyZXR1cm4gZTwxMDAmJjA8PWUmJmlzRmluaXRlKHQuZ2V0VVRDRnVsbFllYXIoKSkmJnQuc2V0VVRDRnVsbFllYXIoZSksdH1mdW5jdGlvbiBWZShlLHQsbil7dmFyIHM9Nyt0LW47cmV0dXJuLSgoNytHZShlLDAscykuZ2V0VVRDRGF5KCktdCklNykrcy0xfWZ1bmN0aW9uIEVlKGUsdCxuLHMsaSl7dmFyIHIsYSxvPTErNyoodC0xKSsoNytuLXMpJTcrVmUoZSxzLGkpO3JldHVybiBvPD0wP2E9RGUocj1lLTEpK286bz5EZShlKT8ocj1lKzEsYT1vLURlKGUpKToocj1lLGE9bykse3llYXI6cixkYXlPZlllYXI6YX19ZnVuY3Rpb24gSWUoZSx0LG4pe3ZhciBzLGkscj1WZShlLnllYXIoKSx0LG4pLGE9TWF0aC5mbG9vcigoZS5kYXlPZlllYXIoKS1yLTEpLzcpKzE7cmV0dXJuIGE8MT9zPWErQWUoaT1lLnllYXIoKS0xLHQsbik6YT5BZShlLnllYXIoKSx0LG4pPyhzPWEtQWUoZS55ZWFyKCksdCxuKSxpPWUueWVhcigpKzEpOihpPWUueWVhcigpLHM9YSkse3dlZWs6cyx5ZWFyOml9fWZ1bmN0aW9uIEFlKGUsdCxuKXt2YXIgcz1WZShlLHQsbiksaT1WZShlKzEsdCxuKTtyZXR1cm4oRGUoZSktcytpKS83fUkoXCJ3XCIsW1wid3dcIiwyXSxcIndvXCIsXCJ3ZWVrXCIpLEkoXCJXXCIsW1wiV1dcIiwyXSxcIldvXCIsXCJpc29XZWVrXCIpLEgoXCJ3ZWVrXCIsXCJ3XCIpLEgoXCJpc29XZWVrXCIsXCJXXCIpLEwoXCJ3ZWVrXCIsNSksTChcImlzb1dlZWtcIiw1KSx1ZShcIndcIixCKSx1ZShcInd3XCIsQix6KSx1ZShcIldcIixCKSx1ZShcIldXXCIsQix6KSxmZShbXCJ3XCIsXCJ3d1wiLFwiV1wiLFwiV1dcIl0sZnVuY3Rpb24oZSx0LG4scyl7dFtzLnN1YnN0cigwLDEpXT1rKGUpfSk7SShcImRcIiwwLFwiZG9cIixcImRheVwiKSxJKFwiZGRcIiwwLDAsZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzTWluKHRoaXMsZSl9KSxJKFwiZGRkXCIsMCwwLGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5c1Nob3J0KHRoaXMsZSl9KSxJKFwiZGRkZFwiLDAsMCxmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXModGhpcyxlKX0pLEkoXCJlXCIsMCwwLFwid2Vla2RheVwiKSxJKFwiRVwiLDAsMCxcImlzb1dlZWtkYXlcIiksSChcImRheVwiLFwiZFwiKSxIKFwid2Vla2RheVwiLFwiZVwiKSxIKFwiaXNvV2Vla2RheVwiLFwiRVwiKSxMKFwiZGF5XCIsMTEpLEwoXCJ3ZWVrZGF5XCIsMTEpLEwoXCJpc29XZWVrZGF5XCIsMTEpLHVlKFwiZFwiLEIpLHVlKFwiZVwiLEIpLHVlKFwiRVwiLEIpLHVlKFwiZGRcIixmdW5jdGlvbihlLHQpe3JldHVybiB0LndlZWtkYXlzTWluUmVnZXgoZSl9KSx1ZShcImRkZFwiLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQud2Vla2RheXNTaG9ydFJlZ2V4KGUpfSksdWUoXCJkZGRkXCIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC53ZWVrZGF5c1JlZ2V4KGUpfSksZmUoW1wiZGRcIixcImRkZFwiLFwiZGRkZFwiXSxmdW5jdGlvbihlLHQsbixzKXt2YXIgaT1uLl9sb2NhbGUud2Vla2RheXNQYXJzZShlLHMsbi5fc3RyaWN0KTtudWxsIT1pP3QuZD1pOmcobikuaW52YWxpZFdlZWtkYXk9ZX0pLGZlKFtcImRcIixcImVcIixcIkVcIl0sZnVuY3Rpb24oZSx0LG4scyl7dFtzXT1rKGUpfSk7dmFyIGplPVwiU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXlcIi5zcGxpdChcIl9cIik7dmFyIFplPVwiU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0XCIuc3BsaXQoXCJfXCIpO3ZhciB6ZT1cIlN1X01vX1R1X1dlX1RoX0ZyX1NhXCIuc3BsaXQoXCJfXCIpO3ZhciAkZT1hZTt2YXIgcWU9YWU7dmFyIEplPWFlO2Z1bmN0aW9uIEJlKCl7ZnVuY3Rpb24gZShlLHQpe3JldHVybiB0Lmxlbmd0aC1lLmxlbmd0aH12YXIgdCxuLHMsaSxyLGE9W10sbz1bXSx1PVtdLGw9W107Zm9yKHQ9MDt0PDc7dCsrKW49eShbMmUzLDFdKS5kYXkodCkscz10aGlzLndlZWtkYXlzTWluKG4sXCJcIiksaT10aGlzLndlZWtkYXlzU2hvcnQobixcIlwiKSxyPXRoaXMud2Vla2RheXMobixcIlwiKSxhLnB1c2gocyksby5wdXNoKGkpLHUucHVzaChyKSxsLnB1c2gocyksbC5wdXNoKGkpLGwucHVzaChyKTtmb3IoYS5zb3J0KGUpLG8uc29ydChlKSx1LnNvcnQoZSksbC5zb3J0KGUpLHQ9MDt0PDc7dCsrKW9bdF09ZGUob1t0XSksdVt0XT1kZSh1W3RdKSxsW3RdPWRlKGxbdF0pO3RoaXMuX3dlZWtkYXlzUmVnZXg9bmV3IFJlZ0V4cChcIl4oXCIrbC5qb2luKFwifFwiKStcIilcIixcImlcIiksdGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4PXRoaXMuX3dlZWtkYXlzUmVnZXgsdGhpcy5fd2Vla2RheXNNaW5SZWdleD10aGlzLl93ZWVrZGF5c1JlZ2V4LHRoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXg9bmV3IFJlZ0V4cChcIl4oXCIrdS5qb2luKFwifFwiKStcIilcIixcImlcIiksdGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4PW5ldyBSZWdFeHAoXCJeKFwiK28uam9pbihcInxcIikrXCIpXCIsXCJpXCIpLHRoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXg9bmV3IFJlZ0V4cChcIl4oXCIrYS5qb2luKFwifFwiKStcIilcIixcImlcIil9ZnVuY3Rpb24gUWUoKXtyZXR1cm4gdGhpcy5ob3VycygpJTEyfHwxMn1mdW5jdGlvbiBYZShlLHQpe0koZSwwLDAsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubWVyaWRpZW0odGhpcy5ob3VycygpLHRoaXMubWludXRlcygpLHQpfSl9ZnVuY3Rpb24gS2UoZSx0KXtyZXR1cm4gdC5fbWVyaWRpZW1QYXJzZX1JKFwiSFwiLFtcIkhIXCIsMl0sMCxcImhvdXJcIiksSShcImhcIixbXCJoaFwiLDJdLDAsUWUpLEkoXCJrXCIsW1wia2tcIiwyXSwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaG91cnMoKXx8MjR9KSxJKFwiaG1tXCIsMCwwLGZ1bmN0aW9uKCl7cmV0dXJuXCJcIitRZS5hcHBseSh0aGlzKStVKHRoaXMubWludXRlcygpLDIpfSksSShcImhtbXNzXCIsMCwwLGZ1bmN0aW9uKCl7cmV0dXJuXCJcIitRZS5hcHBseSh0aGlzKStVKHRoaXMubWludXRlcygpLDIpK1UodGhpcy5zZWNvbmRzKCksMil9KSxJKFwiSG1tXCIsMCwwLGZ1bmN0aW9uKCl7cmV0dXJuXCJcIit0aGlzLmhvdXJzKCkrVSh0aGlzLm1pbnV0ZXMoKSwyKX0pLEkoXCJIbW1zc1wiLDAsMCxmdW5jdGlvbigpe3JldHVyblwiXCIrdGhpcy5ob3VycygpK1UodGhpcy5taW51dGVzKCksMikrVSh0aGlzLnNlY29uZHMoKSwyKX0pLFhlKFwiYVwiLCEwKSxYZShcIkFcIiwhMSksSChcImhvdXJcIixcImhcIiksTChcImhvdXJcIiwxMyksdWUoXCJhXCIsS2UpLHVlKFwiQVwiLEtlKSx1ZShcIkhcIixCKSx1ZShcImhcIixCKSx1ZShcImtcIixCKSx1ZShcIkhIXCIsQix6KSx1ZShcImhoXCIsQix6KSx1ZShcImtrXCIsQix6KSx1ZShcImhtbVwiLFEpLHVlKFwiaG1tc3NcIixYKSx1ZShcIkhtbVwiLFEpLHVlKFwiSG1tc3NcIixYKSxjZShbXCJIXCIsXCJISFwiXSxnZSksY2UoW1wia1wiLFwia2tcIl0sZnVuY3Rpb24oZSx0LG4pe3ZhciBzPWsoZSk7dFtnZV09MjQ9PT1zPzA6c30pLGNlKFtcImFcIixcIkFcIl0sZnVuY3Rpb24oZSx0LG4pe24uX2lzUG09bi5fbG9jYWxlLmlzUE0oZSksbi5fbWVyaWRpZW09ZX0pLGNlKFtcImhcIixcImhoXCJdLGZ1bmN0aW9uKGUsdCxuKXt0W2dlXT1rKGUpLGcobikuYmlnSG91cj0hMH0pLGNlKFwiaG1tXCIsZnVuY3Rpb24oZSx0LG4pe3ZhciBzPWUubGVuZ3RoLTI7dFtnZV09ayhlLnN1YnN0cigwLHMpKSx0W3BlXT1rKGUuc3Vic3RyKHMpKSxnKG4pLmJpZ0hvdXI9ITB9KSxjZShcImhtbXNzXCIsZnVuY3Rpb24oZSx0LG4pe3ZhciBzPWUubGVuZ3RoLTQsaT1lLmxlbmd0aC0yO3RbZ2VdPWsoZS5zdWJzdHIoMCxzKSksdFtwZV09ayhlLnN1YnN0cihzLDIpKSx0W3ZlXT1rKGUuc3Vic3RyKGkpKSxnKG4pLmJpZ0hvdXI9ITB9KSxjZShcIkhtbVwiLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcz1lLmxlbmd0aC0yO3RbZ2VdPWsoZS5zdWJzdHIoMCxzKSksdFtwZV09ayhlLnN1YnN0cihzKSl9KSxjZShcIkhtbXNzXCIsZnVuY3Rpb24oZSx0LG4pe3ZhciBzPWUubGVuZ3RoLTQsaT1lLmxlbmd0aC0yO3RbZ2VdPWsoZS5zdWJzdHIoMCxzKSksdFtwZV09ayhlLnN1YnN0cihzLDIpKSx0W3ZlXT1rKGUuc3Vic3RyKGkpKX0pO3ZhciBldCx0dD1UZShcIkhvdXJzXCIsITApLG50PXtjYWxlbmRhcjp7c2FtZURheTpcIltUb2RheSBhdF0gTFRcIixuZXh0RGF5OlwiW1RvbW9ycm93IGF0XSBMVFwiLG5leHRXZWVrOlwiZGRkZCBbYXRdIExUXCIsbGFzdERheTpcIltZZXN0ZXJkYXkgYXRdIExUXCIsbGFzdFdlZWs6XCJbTGFzdF0gZGRkZCBbYXRdIExUXCIsc2FtZUVsc2U6XCJMXCJ9LGxvbmdEYXRlRm9ybWF0OntMVFM6XCJoOm1tOnNzIEFcIixMVDpcImg6bW0gQVwiLEw6XCJNTS9ERC9ZWVlZXCIsTEw6XCJNTU1NIEQsIFlZWVlcIixMTEw6XCJNTU1NIEQsIFlZWVkgaDptbSBBXCIsTExMTDpcImRkZGQsIE1NTU0gRCwgWVlZWSBoOm1tIEFcIn0saW52YWxpZERhdGU6XCJJbnZhbGlkIGRhdGVcIixvcmRpbmFsOlwiJWRcIixkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cXGR7MSwyfS8scmVsYXRpdmVUaW1lOntmdXR1cmU6XCJpbiAlc1wiLHBhc3Q6XCIlcyBhZ29cIixzOlwiYSBmZXcgc2Vjb25kc1wiLHNzOlwiJWQgc2Vjb25kc1wiLG06XCJhIG1pbnV0ZVwiLG1tOlwiJWQgbWludXRlc1wiLGg6XCJhbiBob3VyXCIsaGg6XCIlZCBob3Vyc1wiLGQ6XCJhIGRheVwiLGRkOlwiJWQgZGF5c1wiLE06XCJhIG1vbnRoXCIsTU06XCIlZCBtb250aHNcIix5OlwiYSB5ZWFyXCIseXk6XCIlZCB5ZWFyc1wifSxtb250aHM6SGUsbW9udGhzU2hvcnQ6UmUsd2Vlazp7ZG93OjAsZG95OjZ9LHdlZWtkYXlzOmplLHdlZWtkYXlzTWluOnplLHdlZWtkYXlzU2hvcnQ6WmUsbWVyaWRpZW1QYXJzZTovW2FwXVxcLj9tP1xcLj8vaX0sc3Q9e30saXQ9e307ZnVuY3Rpb24gcnQoZSl7cmV0dXJuIGU/ZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoXCJfXCIsXCItXCIpOmV9ZnVuY3Rpb24gYXQoZSl7dmFyIHQ9bnVsbDtpZighc3RbZV0mJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZSYmbW9kdWxlLmV4cG9ydHMpdHJ5e3Q9ZXQuX2FiYnIscmVxdWlyZShcIi4vbG9jYWxlL1wiK2UpLG90KHQpfWNhdGNoKGUpe31yZXR1cm4gc3RbZV19ZnVuY3Rpb24gb3QoZSx0KXt2YXIgbjtyZXR1cm4gZSYmKChuPWwodCk/bHQoZSk6dXQoZSx0KSk/ZXQ9bjpcInVuZGVmaW5lZFwiIT10eXBlb2YgY29uc29sZSYmY29uc29sZS53YXJuJiZjb25zb2xlLndhcm4oXCJMb2NhbGUgXCIrZStcIiBub3QgZm91bmQuIERpZCB5b3UgZm9yZ2V0IHRvIGxvYWQgaXQ/XCIpKSxldC5fYWJicn1mdW5jdGlvbiB1dChlLHQpe2lmKG51bGwhPT10KXt2YXIgbixzPW50O2lmKHQuYWJicj1lLG51bGwhPXN0W2VdKVQoXCJkZWZpbmVMb2NhbGVPdmVycmlkZVwiLFwidXNlIG1vbWVudC51cGRhdGVMb2NhbGUobG9jYWxlTmFtZSwgY29uZmlnKSB0byBjaGFuZ2UgYW4gZXhpc3RpbmcgbG9jYWxlLiBtb21lbnQuZGVmaW5lTG9jYWxlKGxvY2FsZU5hbWUsIGNvbmZpZykgc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgY3JlYXRpbmcgYSBuZXcgbG9jYWxlIFNlZSBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2RlZmluZS1sb2NhbGUvIGZvciBtb3JlIGluZm8uXCIpLHM9c3RbZV0uX2NvbmZpZztlbHNlIGlmKG51bGwhPXQucGFyZW50TG9jYWxlKWlmKG51bGwhPXN0W3QucGFyZW50TG9jYWxlXSlzPXN0W3QucGFyZW50TG9jYWxlXS5fY29uZmlnO2Vsc2V7aWYobnVsbD09KG49YXQodC5wYXJlbnRMb2NhbGUpKSlyZXR1cm4gaXRbdC5wYXJlbnRMb2NhbGVdfHwoaXRbdC5wYXJlbnRMb2NhbGVdPVtdKSxpdFt0LnBhcmVudExvY2FsZV0ucHVzaCh7bmFtZTplLGNvbmZpZzp0fSksbnVsbDtzPW4uX2NvbmZpZ31yZXR1cm4gc3RbZV09bmV3IFAoYihzLHQpKSxpdFtlXSYmaXRbZV0uZm9yRWFjaChmdW5jdGlvbihlKXt1dChlLm5hbWUsZS5jb25maWcpfSksb3QoZSksc3RbZV19cmV0dXJuIGRlbGV0ZSBzdFtlXSxudWxsfWZ1bmN0aW9uIGx0KGUpe3ZhciB0O2lmKGUmJmUuX2xvY2FsZSYmZS5fbG9jYWxlLl9hYmJyJiYoZT1lLl9sb2NhbGUuX2FiYnIpLCFlKXJldHVybiBldDtpZighbyhlKSl7aWYodD1hdChlKSlyZXR1cm4gdDtlPVtlXX1yZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4scyxpLHI9MDtyPGUubGVuZ3RoOyl7Zm9yKHQ9KGk9cnQoZVtyXSkuc3BsaXQoXCItXCIpKS5sZW5ndGgsbj0obj1ydChlW3IrMV0pKT9uLnNwbGl0KFwiLVwiKTpudWxsOzA8dDspe2lmKHM9YXQoaS5zbGljZSgwLHQpLmpvaW4oXCItXCIpKSlyZXR1cm4gcztpZihuJiZuLmxlbmd0aD49dCYmYShpLG4sITApPj10LTEpYnJlYWs7dC0tfXIrK31yZXR1cm4gZXR9KGUpfWZ1bmN0aW9uIGR0KGUpe3ZhciB0LG49ZS5fYTtyZXR1cm4gbiYmLTI9PT1nKGUpLm92ZXJmbG93JiYodD1uW19lXTwwfHwxMTxuW19lXT9fZTpuW3llXTwxfHxuW3llXT5QZShuW21lXSxuW19lXSk/eWU6bltnZV08MHx8MjQ8bltnZV18fDI0PT09bltnZV0mJigwIT09bltwZV18fDAhPT1uW3ZlXXx8MCE9PW5bd2VdKT9nZTpuW3BlXTwwfHw1OTxuW3BlXT9wZTpuW3ZlXTwwfHw1OTxuW3ZlXT92ZTpuW3dlXTwwfHw5OTk8blt3ZV0/d2U6LTEsZyhlKS5fb3ZlcmZsb3dEYXlPZlllYXImJih0PG1lfHx5ZTx0KSYmKHQ9eWUpLGcoZSkuX292ZXJmbG93V2Vla3MmJi0xPT09dCYmKHQ9TWUpLGcoZSkuX292ZXJmbG93V2Vla2RheSYmLTE9PT10JiYodD1TZSksZyhlKS5vdmVyZmxvdz10KSxlfWZ1bmN0aW9uIGh0KGUsdCxuKXtyZXR1cm4gbnVsbCE9ZT9lOm51bGwhPXQ/dDpufWZ1bmN0aW9uIGN0KGUpe3ZhciB0LG4scyxpLHIsYT1bXTtpZighZS5fZCl7dmFyIG8sdTtmb3Iobz1lLHU9bmV3IERhdGUoYy5ub3coKSkscz1vLl91c2VVVEM/W3UuZ2V0VVRDRnVsbFllYXIoKSx1LmdldFVUQ01vbnRoKCksdS5nZXRVVENEYXRlKCldOlt1LmdldEZ1bGxZZWFyKCksdS5nZXRNb250aCgpLHUuZ2V0RGF0ZSgpXSxlLl93JiZudWxsPT1lLl9hW3llXSYmbnVsbD09ZS5fYVtfZV0mJmZ1bmN0aW9uKGUpe3ZhciB0LG4scyxpLHIsYSxvLHU7aWYobnVsbCE9KHQ9ZS5fdykuR0d8fG51bGwhPXQuV3x8bnVsbCE9dC5FKXI9MSxhPTQsbj1odCh0LkdHLGUuX2FbbWVdLEllKFR0KCksMSw0KS55ZWFyKSxzPWh0KHQuVywxKSwoKGk9aHQodC5FLDEpKTwxfHw3PGkpJiYodT0hMCk7ZWxzZXtyPWUuX2xvY2FsZS5fd2Vlay5kb3csYT1lLl9sb2NhbGUuX3dlZWsuZG95O3ZhciBsPUllKFR0KCkscixhKTtuPWh0KHQuZ2csZS5fYVttZV0sbC55ZWFyKSxzPWh0KHQudyxsLndlZWspLG51bGwhPXQuZD8oKGk9dC5kKTwwfHw2PGkpJiYodT0hMCk6bnVsbCE9dC5lPyhpPXQuZStyLCh0LmU8MHx8Njx0LmUpJiYodT0hMCkpOmk9cn1zPDF8fHM+QWUobixyLGEpP2coZSkuX292ZXJmbG93V2Vla3M9ITA6bnVsbCE9dT9nKGUpLl9vdmVyZmxvd1dlZWtkYXk9ITA6KG89RWUobixzLGkscixhKSxlLl9hW21lXT1vLnllYXIsZS5fZGF5T2ZZZWFyPW8uZGF5T2ZZZWFyKX0oZSksbnVsbCE9ZS5fZGF5T2ZZZWFyJiYocj1odChlLl9hW21lXSxzW21lXSksKGUuX2RheU9mWWVhcj5EZShyKXx8MD09PWUuX2RheU9mWWVhcikmJihnKGUpLl9vdmVyZmxvd0RheU9mWWVhcj0hMCksbj1HZShyLDAsZS5fZGF5T2ZZZWFyKSxlLl9hW19lXT1uLmdldFVUQ01vbnRoKCksZS5fYVt5ZV09bi5nZXRVVENEYXRlKCkpLHQ9MDt0PDMmJm51bGw9PWUuX2FbdF07Kyt0KWUuX2FbdF09YVt0XT1zW3RdO2Zvcig7dDw3O3QrKyllLl9hW3RdPWFbdF09bnVsbD09ZS5fYVt0XT8yPT09dD8xOjA6ZS5fYVt0XTsyND09PWUuX2FbZ2VdJiYwPT09ZS5fYVtwZV0mJjA9PT1lLl9hW3ZlXSYmMD09PWUuX2Fbd2VdJiYoZS5fbmV4dERheT0hMCxlLl9hW2dlXT0wKSxlLl9kPShlLl91c2VVVEM/R2U6ZnVuY3Rpb24oZSx0LG4scyxpLHIsYSl7dmFyIG89bmV3IERhdGUoZSx0LG4scyxpLHIsYSk7cmV0dXJuIGU8MTAwJiYwPD1lJiZpc0Zpbml0ZShvLmdldEZ1bGxZZWFyKCkpJiZvLnNldEZ1bGxZZWFyKGUpLG99KS5hcHBseShudWxsLGEpLGk9ZS5fdXNlVVRDP2UuX2QuZ2V0VVRDRGF5KCk6ZS5fZC5nZXREYXkoKSxudWxsIT1lLl90em0mJmUuX2Quc2V0VVRDTWludXRlcyhlLl9kLmdldFVUQ01pbnV0ZXMoKS1lLl90em0pLGUuX25leHREYXkmJihlLl9hW2dlXT0yNCksZS5fdyYmdm9pZCAwIT09ZS5fdy5kJiZlLl93LmQhPT1pJiYoZyhlKS53ZWVrZGF5TWlzbWF0Y2g9ITApfX12YXIgZnQ9L15cXHMqKCg/OlsrLV1cXGR7Nn18XFxkezR9KS0oPzpcXGRcXGQtXFxkXFxkfFdcXGRcXGQtXFxkfFdcXGRcXGR8XFxkXFxkXFxkfFxcZFxcZCkpKD86KFR8ICkoXFxkXFxkKD86OlxcZFxcZCg/OjpcXGRcXGQoPzpbLixdXFxkKyk/KT8pPykoW1xcK1xcLV1cXGRcXGQoPzo6P1xcZFxcZCk/fFxccypaKT8pPyQvLG10PS9eXFxzKigoPzpbKy1dXFxkezZ9fFxcZHs0fSkoPzpcXGRcXGRcXGRcXGR8V1xcZFxcZFxcZHxXXFxkXFxkfFxcZFxcZFxcZHxcXGRcXGQpKSg/OihUfCApKFxcZFxcZCg/OlxcZFxcZCg/OlxcZFxcZCg/OlsuLF1cXGQrKT8pPyk/KShbXFwrXFwtXVxcZFxcZCg/Ojo/XFxkXFxkKT98XFxzKlopPyk/JC8sX3Q9L1p8WystXVxcZFxcZCg/Ojo/XFxkXFxkKT8vLHl0PVtbXCJZWVlZWVktTU0tRERcIiwvWystXVxcZHs2fS1cXGRcXGQtXFxkXFxkL10sW1wiWVlZWS1NTS1ERFwiLC9cXGR7NH0tXFxkXFxkLVxcZFxcZC9dLFtcIkdHR0ctW1ddV1ctRVwiLC9cXGR7NH0tV1xcZFxcZC1cXGQvXSxbXCJHR0dHLVtXXVdXXCIsL1xcZHs0fS1XXFxkXFxkLywhMV0sW1wiWVlZWS1ERERcIiwvXFxkezR9LVxcZHszfS9dLFtcIllZWVktTU1cIiwvXFxkezR9LVxcZFxcZC8sITFdLFtcIllZWVlZWU1NRERcIiwvWystXVxcZHsxMH0vXSxbXCJZWVlZTU1ERFwiLC9cXGR7OH0vXSxbXCJHR0dHW1ddV1dFXCIsL1xcZHs0fVdcXGR7M30vXSxbXCJHR0dHW1ddV1dcIiwvXFxkezR9V1xcZHsyfS8sITFdLFtcIllZWVlERERcIiwvXFxkezd9L11dLGd0PVtbXCJISDptbTpzcy5TU1NTXCIsL1xcZFxcZDpcXGRcXGQ6XFxkXFxkXFwuXFxkKy9dLFtcIkhIOm1tOnNzLFNTU1NcIiwvXFxkXFxkOlxcZFxcZDpcXGRcXGQsXFxkKy9dLFtcIkhIOm1tOnNzXCIsL1xcZFxcZDpcXGRcXGQ6XFxkXFxkL10sW1wiSEg6bW1cIiwvXFxkXFxkOlxcZFxcZC9dLFtcIkhIbW1zcy5TU1NTXCIsL1xcZFxcZFxcZFxcZFxcZFxcZFxcLlxcZCsvXSxbXCJISG1tc3MsU1NTU1wiLC9cXGRcXGRcXGRcXGRcXGRcXGQsXFxkKy9dLFtcIkhIbW1zc1wiLC9cXGRcXGRcXGRcXGRcXGRcXGQvXSxbXCJISG1tXCIsL1xcZFxcZFxcZFxcZC9dLFtcIkhIXCIsL1xcZFxcZC9dXSxwdD0vXlxcLz9EYXRlXFwoKFxcLT9cXGQrKS9pO2Z1bmN0aW9uIHZ0KGUpe3ZhciB0LG4scyxpLHIsYSxvPWUuX2ksdT1mdC5leGVjKG8pfHxtdC5leGVjKG8pO2lmKHUpe2ZvcihnKGUpLmlzbz0hMCx0PTAsbj15dC5sZW5ndGg7dDxuO3QrKylpZih5dFt0XVsxXS5leGVjKHVbMV0pKXtpPXl0W3RdWzBdLHM9ITEhPT15dFt0XVsyXTticmVha31pZihudWxsPT1pKXJldHVybiB2b2lkKGUuX2lzVmFsaWQ9ITEpO2lmKHVbM10pe2Zvcih0PTAsbj1ndC5sZW5ndGg7dDxuO3QrKylpZihndFt0XVsxXS5leGVjKHVbM10pKXtyPSh1WzJdfHxcIiBcIikrZ3RbdF1bMF07YnJlYWt9aWYobnVsbD09cilyZXR1cm4gdm9pZChlLl9pc1ZhbGlkPSExKX1pZighcyYmbnVsbCE9cilyZXR1cm4gdm9pZChlLl9pc1ZhbGlkPSExKTtpZih1WzRdKXtpZighX3QuZXhlYyh1WzRdKSlyZXR1cm4gdm9pZChlLl9pc1ZhbGlkPSExKTthPVwiWlwifWUuX2Y9aSsocnx8XCJcIikrKGF8fFwiXCIpLGt0KGUpfWVsc2UgZS5faXNWYWxpZD0hMX12YXIgd3Q9L14oPzooTW9ufFR1ZXxXZWR8VGh1fEZyaXxTYXR8U3VuKSw/XFxzKT8oXFxkezEsMn0pXFxzKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKVxccyhcXGR7Miw0fSlcXHMoXFxkXFxkKTooXFxkXFxkKSg/OjooXFxkXFxkKSk/XFxzKD86KFVUfEdNVHxbRUNNUF1bU0RdVCl8KFtael0pfChbKy1dXFxkezR9KSkkLztmdW5jdGlvbiBNdChlLHQsbixzLGkscil7dmFyIGE9W2Z1bmN0aW9uKGUpe3ZhciB0PXBhcnNlSW50KGUsMTApO3tpZih0PD00OSlyZXR1cm4gMmUzK3Q7aWYodDw9OTk5KXJldHVybiAxOTAwK3R9cmV0dXJuIHR9KGUpLFJlLmluZGV4T2YodCkscGFyc2VJbnQobiwxMCkscGFyc2VJbnQocywxMCkscGFyc2VJbnQoaSwxMCldO3JldHVybiByJiZhLnB1c2gocGFyc2VJbnQociwxMCkpLGF9dmFyIFN0PXtVVDowLEdNVDowLEVEVDotMjQwLEVTVDotMzAwLENEVDotMzAwLENTVDotMzYwLE1EVDotMzYwLE1TVDotNDIwLFBEVDotNDIwLFBTVDotNDgwfTtmdW5jdGlvbiBEdChlKXt2YXIgdCxuLHMsaT13dC5leGVjKGUuX2kucmVwbGFjZSgvXFwoW14pXSpcXCl8W1xcblxcdF0vZyxcIiBcIikucmVwbGFjZSgvKFxcc1xccyspL2csXCIgXCIpLnRyaW0oKSk7aWYoaSl7dmFyIHI9TXQoaVs0XSxpWzNdLGlbMl0saVs1XSxpWzZdLGlbN10pO2lmKHQ9aVsxXSxuPXIscz1lLHQmJlplLmluZGV4T2YodCkhPT1uZXcgRGF0ZShuWzBdLG5bMV0sblsyXSkuZ2V0RGF5KCkmJihnKHMpLndlZWtkYXlNaXNtYXRjaD0hMCwhKHMuX2lzVmFsaWQ9ITEpKSlyZXR1cm47ZS5fYT1yLGUuX3R6bT1mdW5jdGlvbihlLHQsbil7aWYoZSlyZXR1cm4gU3RbZV07aWYodClyZXR1cm4gMDt2YXIgcz1wYXJzZUludChuLDEwKSxpPXMlMTAwO3JldHVybihzLWkpLzEwMCo2MCtpfShpWzhdLGlbOV0saVsxMF0pLGUuX2Q9R2UuYXBwbHkobnVsbCxlLl9hKSxlLl9kLnNldFVUQ01pbnV0ZXMoZS5fZC5nZXRVVENNaW51dGVzKCktZS5fdHptKSxnKGUpLnJmYzI4MjI9ITB9ZWxzZSBlLl9pc1ZhbGlkPSExfWZ1bmN0aW9uIGt0KGUpe2lmKGUuX2YhPT1jLklTT184NjAxKWlmKGUuX2YhPT1jLlJGQ18yODIyKXtlLl9hPVtdLGcoZSkuZW1wdHk9ITA7dmFyIHQsbixzLGkscixhLG8sdSxsPVwiXCIrZS5faSxkPWwubGVuZ3RoLGg9MDtmb3Iocz1qKGUuX2YsZS5fbG9jYWxlKS5tYXRjaChOKXx8W10sdD0wO3Q8cy5sZW5ndGg7dCsrKWk9c1t0XSwobj0obC5tYXRjaChsZShpLGUpKXx8W10pWzBdKSYmKDA8KHI9bC5zdWJzdHIoMCxsLmluZGV4T2YobikpKS5sZW5ndGgmJmcoZSkudW51c2VkSW5wdXQucHVzaChyKSxsPWwuc2xpY2UobC5pbmRleE9mKG4pK24ubGVuZ3RoKSxoKz1uLmxlbmd0aCksRVtpXT8obj9nKGUpLmVtcHR5PSExOmcoZSkudW51c2VkVG9rZW5zLnB1c2goaSksYT1pLHU9ZSxudWxsIT0obz1uKSYmbShoZSxhKSYmaGVbYV0obyx1Ll9hLHUsYSkpOmUuX3N0cmljdCYmIW4mJmcoZSkudW51c2VkVG9rZW5zLnB1c2goaSk7ZyhlKS5jaGFyc0xlZnRPdmVyPWQtaCwwPGwubGVuZ3RoJiZnKGUpLnVudXNlZElucHV0LnB1c2gobCksZS5fYVtnZV08PTEyJiYhMD09PWcoZSkuYmlnSG91ciYmMDxlLl9hW2dlXSYmKGcoZSkuYmlnSG91cj12b2lkIDApLGcoZSkucGFyc2VkRGF0ZVBhcnRzPWUuX2Euc2xpY2UoMCksZyhlKS5tZXJpZGllbT1lLl9tZXJpZGllbSxlLl9hW2dlXT1mdW5jdGlvbihlLHQsbil7dmFyIHM7aWYobnVsbD09bilyZXR1cm4gdDtyZXR1cm4gbnVsbCE9ZS5tZXJpZGllbUhvdXI/ZS5tZXJpZGllbUhvdXIodCxuKToobnVsbCE9ZS5pc1BNJiYoKHM9ZS5pc1BNKG4pKSYmdDwxMiYmKHQrPTEyKSxzfHwxMiE9PXR8fCh0PTApKSx0KX0oZS5fbG9jYWxlLGUuX2FbZ2VdLGUuX21lcmlkaWVtKSxjdChlKSxkdChlKX1lbHNlIER0KGUpO2Vsc2UgdnQoZSl9ZnVuY3Rpb24gWXQoZSl7dmFyIHQsbixzLGkscj1lLl9pLGE9ZS5fZjtyZXR1cm4gZS5fbG9jYWxlPWUuX2xvY2FsZXx8bHQoZS5fbCksbnVsbD09PXJ8fHZvaWQgMD09PWEmJlwiXCI9PT1yP3Yoe251bGxJbnB1dDohMH0pOihcInN0cmluZ1wiPT10eXBlb2YgciYmKGUuX2k9cj1lLl9sb2NhbGUucHJlcGFyc2UocikpLFMocik/bmV3IE0oZHQocikpOihoKHIpP2UuX2Q9cjpvKGEpP2Z1bmN0aW9uKGUpe3ZhciB0LG4scyxpLHI7aWYoMD09PWUuX2YubGVuZ3RoKXJldHVybiBnKGUpLmludmFsaWRGb3JtYXQ9ITAsZS5fZD1uZXcgRGF0ZShOYU4pO2ZvcihpPTA7aTxlLl9mLmxlbmd0aDtpKyspcj0wLHQ9dyh7fSxlKSxudWxsIT1lLl91c2VVVEMmJih0Ll91c2VVVEM9ZS5fdXNlVVRDKSx0Ll9mPWUuX2ZbaV0sa3QodCkscCh0KSYmKHIrPWcodCkuY2hhcnNMZWZ0T3ZlcixyKz0xMCpnKHQpLnVudXNlZFRva2Vucy5sZW5ndGgsZyh0KS5zY29yZT1yLChudWxsPT1zfHxyPHMpJiYocz1yLG49dCkpO18oZSxufHx0KX0oZSk6YT9rdChlKTpsKG49KHQ9ZSkuX2kpP3QuX2Q9bmV3IERhdGUoYy5ub3coKSk6aChuKT90Ll9kPW5ldyBEYXRlKG4udmFsdWVPZigpKTpcInN0cmluZ1wiPT10eXBlb2Ygbj8ocz10LG51bGw9PT0oaT1wdC5leGVjKHMuX2kpKT8odnQocyksITE9PT1zLl9pc1ZhbGlkJiYoZGVsZXRlIHMuX2lzVmFsaWQsRHQocyksITE9PT1zLl9pc1ZhbGlkJiYoZGVsZXRlIHMuX2lzVmFsaWQsYy5jcmVhdGVGcm9tSW5wdXRGYWxsYmFjayhzKSkpKTpzLl9kPW5ldyBEYXRlKCtpWzFdKSk6byhuKT8odC5fYT1mKG4uc2xpY2UoMCksZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlSW50KGUsMTApfSksY3QodCkpOnUobik/ZnVuY3Rpb24oZSl7aWYoIWUuX2Qpe3ZhciB0PUMoZS5faSk7ZS5fYT1mKFt0LnllYXIsdC5tb250aCx0LmRheXx8dC5kYXRlLHQuaG91cix0Lm1pbnV0ZSx0LnNlY29uZCx0Lm1pbGxpc2Vjb25kXSxmdW5jdGlvbihlKXtyZXR1cm4gZSYmcGFyc2VJbnQoZSwxMCl9KSxjdChlKX19KHQpOmQobik/dC5fZD1uZXcgRGF0ZShuKTpjLmNyZWF0ZUZyb21JbnB1dEZhbGxiYWNrKHQpLHAoZSl8fChlLl9kPW51bGwpLGUpKX1mdW5jdGlvbiBPdChlLHQsbixzLGkpe3ZhciByLGE9e307cmV0dXJuITAhPT1uJiYhMSE9PW58fChzPW4sbj12b2lkIDApLCh1KGUpJiZmdW5jdGlvbihlKXtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcylyZXR1cm4gMD09PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpLmxlbmd0aDt2YXIgdDtmb3IodCBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkodCkpcmV0dXJuITE7cmV0dXJuITB9KGUpfHxvKGUpJiYwPT09ZS5sZW5ndGgpJiYoZT12b2lkIDApLGEuX2lzQU1vbWVudE9iamVjdD0hMCxhLl91c2VVVEM9YS5faXNVVEM9aSxhLl9sPW4sYS5faT1lLGEuX2Y9dCxhLl9zdHJpY3Q9cywocj1uZXcgTShkdChZdChhKSkpKS5fbmV4dERheSYmKHIuYWRkKDEsXCJkXCIpLHIuX25leHREYXk9dm9pZCAwKSxyfWZ1bmN0aW9uIFR0KGUsdCxuLHMpe3JldHVybiBPdChlLHQsbixzLCExKX1jLmNyZWF0ZUZyb21JbnB1dEZhbGxiYWNrPW4oXCJ2YWx1ZSBwcm92aWRlZCBpcyBub3QgaW4gYSByZWNvZ25pemVkIFJGQzI4MjIgb3IgSVNPIGZvcm1hdC4gbW9tZW50IGNvbnN0cnVjdGlvbiBmYWxscyBiYWNrIHRvIGpzIERhdGUoKSwgd2hpY2ggaXMgbm90IHJlbGlhYmxlIGFjcm9zcyBhbGwgYnJvd3NlcnMgYW5kIHZlcnNpb25zLiBOb24gUkZDMjgyMi9JU08gZGF0ZSBmb3JtYXRzIGFyZSBkaXNjb3VyYWdlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGFuIHVwY29taW5nIG1ham9yIHJlbGVhc2UuIFBsZWFzZSByZWZlciB0byBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2pzLWRhdGUvIGZvciBtb3JlIGluZm8uXCIsZnVuY3Rpb24oZSl7ZS5fZD1uZXcgRGF0ZShlLl9pKyhlLl91c2VVVEM/XCIgVVRDXCI6XCJcIikpfSksYy5JU09fODYwMT1mdW5jdGlvbigpe30sYy5SRkNfMjgyMj1mdW5jdGlvbigpe307dmFyIHh0PW4oXCJtb21lbnQoKS5taW4gaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudC5tYXggaW5zdGVhZC4gaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy9taW4tbWF4L1wiLGZ1bmN0aW9uKCl7dmFyIGU9VHQuYXBwbHkobnVsbCxhcmd1bWVudHMpO3JldHVybiB0aGlzLmlzVmFsaWQoKSYmZS5pc1ZhbGlkKCk/ZTx0aGlzP3RoaXM6ZTp2KCl9KSxidD1uKFwibW9tZW50KCkubWF4IGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQubWluIGluc3RlYWQuIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvbWluLW1heC9cIixmdW5jdGlvbigpe3ZhciBlPVR0LmFwcGx5KG51bGwsYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5pc1ZhbGlkKCkmJmUuaXNWYWxpZCgpP3RoaXM8ZT90aGlzOmU6digpfSk7ZnVuY3Rpb24gUHQoZSx0KXt2YXIgbixzO2lmKDE9PT10Lmxlbmd0aCYmbyh0WzBdKSYmKHQ9dFswXSksIXQubGVuZ3RoKXJldHVybiBUdCgpO2ZvcihuPXRbMF0scz0xO3M8dC5sZW5ndGg7KytzKXRbc10uaXNWYWxpZCgpJiYhdFtzXVtlXShuKXx8KG49dFtzXSk7cmV0dXJuIG59dmFyIFd0PVtcInllYXJcIixcInF1YXJ0ZXJcIixcIm1vbnRoXCIsXCJ3ZWVrXCIsXCJkYXlcIixcImhvdXJcIixcIm1pbnV0ZVwiLFwic2Vjb25kXCIsXCJtaWxsaXNlY29uZFwiXTtmdW5jdGlvbiBIdChlKXt2YXIgdD1DKGUpLG49dC55ZWFyfHwwLHM9dC5xdWFydGVyfHwwLGk9dC5tb250aHx8MCxyPXQud2Vla3x8MCxhPXQuZGF5fHwwLG89dC5ob3VyfHwwLHU9dC5taW51dGV8fDAsbD10LnNlY29uZHx8MCxkPXQubWlsbGlzZWNvbmR8fDA7dGhpcy5faXNWYWxpZD1mdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSlpZigtMT09PVllLmNhbGwoV3QsdCl8fG51bGwhPWVbdF0mJmlzTmFOKGVbdF0pKXJldHVybiExO2Zvcih2YXIgbj0hMSxzPTA7czxXdC5sZW5ndGg7KytzKWlmKGVbV3Rbc11dKXtpZihuKXJldHVybiExO3BhcnNlRmxvYXQoZVtXdFtzXV0pIT09ayhlW1d0W3NdXSkmJihuPSEwKX1yZXR1cm4hMH0odCksdGhpcy5fbWlsbGlzZWNvbmRzPStkKzFlMypsKzZlNCp1KzFlMypvKjYwKjYwLHRoaXMuX2RheXM9K2ErNypyLHRoaXMuX21vbnRocz0raSszKnMrMTIqbix0aGlzLl9kYXRhPXt9LHRoaXMuX2xvY2FsZT1sdCgpLHRoaXMuX2J1YmJsZSgpfWZ1bmN0aW9uIFJ0KGUpe3JldHVybiBlIGluc3RhbmNlb2YgSHR9ZnVuY3Rpb24gQ3QoZSl7cmV0dXJuIGU8MD8tMSpNYXRoLnJvdW5kKC0xKmUpOk1hdGgucm91bmQoZSl9ZnVuY3Rpb24gRnQoZSxuKXtJKGUsMCwwLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy51dGNPZmZzZXQoKSx0PVwiK1wiO3JldHVybiBlPDAmJihlPS1lLHQ9XCItXCIpLHQrVSh+fihlLzYwKSwyKStuK1Uofn5lJTYwLDIpfSl9RnQoXCJaXCIsXCI6XCIpLEZ0KFwiWlpcIixcIlwiKSx1ZShcIlpcIixyZSksdWUoXCJaWlwiLHJlKSxjZShbXCJaXCIsXCJaWlwiXSxmdW5jdGlvbihlLHQsbil7bi5fdXNlVVRDPSEwLG4uX3R6bT1VdChyZSxlKX0pO3ZhciBMdD0vKFtcXCtcXC1dfFxcZFxcZCkvZ2k7ZnVuY3Rpb24gVXQoZSx0KXt2YXIgbj0odHx8XCJcIikubWF0Y2goZSk7aWYobnVsbD09PW4pcmV0dXJuIG51bGw7dmFyIHM9KChuW24ubGVuZ3RoLTFdfHxbXSkrXCJcIikubWF0Y2goTHQpfHxbXCItXCIsMCwwXSxpPTYwKnNbMV0rayhzWzJdKTtyZXR1cm4gMD09PWk/MDpcIitcIj09PXNbMF0/aTotaX1mdW5jdGlvbiBOdChlLHQpe3ZhciBuLHM7cmV0dXJuIHQuX2lzVVRDPyhuPXQuY2xvbmUoKSxzPShTKGUpfHxoKGUpP2UudmFsdWVPZigpOlR0KGUpLnZhbHVlT2YoKSktbi52YWx1ZU9mKCksbi5fZC5zZXRUaW1lKG4uX2QudmFsdWVPZigpK3MpLGMudXBkYXRlT2Zmc2V0KG4sITEpLG4pOlR0KGUpLmxvY2FsKCl9ZnVuY3Rpb24gR3QoZSl7cmV0dXJuIDE1Ki1NYXRoLnJvdW5kKGUuX2QuZ2V0VGltZXpvbmVPZmZzZXQoKS8xNSl9ZnVuY3Rpb24gVnQoKXtyZXR1cm4hIXRoaXMuaXNWYWxpZCgpJiYodGhpcy5faXNVVEMmJjA9PT10aGlzLl9vZmZzZXQpfWMudXBkYXRlT2Zmc2V0PWZ1bmN0aW9uKCl7fTt2YXIgRXQ9L14oXFwtfFxcKyk/KD86KFxcZCopWy4gXSk/KFxcZCspXFw6KFxcZCspKD86XFw6KFxcZCspKFxcLlxcZCopPyk/JC8sSXQ9L14oLXxcXCspP1AoPzooWy0rXT9bMC05LC5dKilZKT8oPzooWy0rXT9bMC05LC5dKilNKT8oPzooWy0rXT9bMC05LC5dKilXKT8oPzooWy0rXT9bMC05LC5dKilEKT8oPzpUKD86KFstK10/WzAtOSwuXSopSCk/KD86KFstK10/WzAtOSwuXSopTSk/KD86KFstK10/WzAtOSwuXSopUyk/KT8kLztmdW5jdGlvbiBBdChlLHQpe3ZhciBuLHMsaSxyPWUsYT1udWxsO3JldHVybiBSdChlKT9yPXttczplLl9taWxsaXNlY29uZHMsZDplLl9kYXlzLE06ZS5fbW9udGhzfTpkKGUpPyhyPXt9LHQ/clt0XT1lOnIubWlsbGlzZWNvbmRzPWUpOihhPUV0LmV4ZWMoZSkpPyhuPVwiLVwiPT09YVsxXT8tMToxLHI9e3k6MCxkOmsoYVt5ZV0pKm4saDprKGFbZ2VdKSpuLG06ayhhW3BlXSkqbixzOmsoYVt2ZV0pKm4sbXM6ayhDdCgxZTMqYVt3ZV0pKSpufSk6KGE9SXQuZXhlYyhlKSk/KG49XCItXCI9PT1hWzFdPy0xOihhWzFdLDEpLHI9e3k6anQoYVsyXSxuKSxNOmp0KGFbM10sbiksdzpqdChhWzRdLG4pLGQ6anQoYVs1XSxuKSxoOmp0KGFbNl0sbiksbTpqdChhWzddLG4pLHM6anQoYVs4XSxuKX0pOm51bGw9PXI/cj17fTpcIm9iamVjdFwiPT10eXBlb2YgciYmKFwiZnJvbVwiaW4gcnx8XCJ0b1wiaW4gcikmJihpPWZ1bmN0aW9uKGUsdCl7dmFyIG47aWYoIWUuaXNWYWxpZCgpfHwhdC5pc1ZhbGlkKCkpcmV0dXJue21pbGxpc2Vjb25kczowLG1vbnRoczowfTt0PU50KHQsZSksZS5pc0JlZm9yZSh0KT9uPVp0KGUsdCk6KChuPVp0KHQsZSkpLm1pbGxpc2Vjb25kcz0tbi5taWxsaXNlY29uZHMsbi5tb250aHM9LW4ubW9udGhzKTtyZXR1cm4gbn0oVHQoci5mcm9tKSxUdChyLnRvKSksKHI9e30pLm1zPWkubWlsbGlzZWNvbmRzLHIuTT1pLm1vbnRocykscz1uZXcgSHQociksUnQoZSkmJm0oZSxcIl9sb2NhbGVcIikmJihzLl9sb2NhbGU9ZS5fbG9jYWxlKSxzfWZ1bmN0aW9uIGp0KGUsdCl7dmFyIG49ZSYmcGFyc2VGbG9hdChlLnJlcGxhY2UoXCIsXCIsXCIuXCIpKTtyZXR1cm4oaXNOYU4obik/MDpuKSp0fWZ1bmN0aW9uIFp0KGUsdCl7dmFyIG49e21pbGxpc2Vjb25kczowLG1vbnRoczowfTtyZXR1cm4gbi5tb250aHM9dC5tb250aCgpLWUubW9udGgoKSsxMioodC55ZWFyKCktZS55ZWFyKCkpLGUuY2xvbmUoKS5hZGQobi5tb250aHMsXCJNXCIpLmlzQWZ0ZXIodCkmJi0tbi5tb250aHMsbi5taWxsaXNlY29uZHM9K3QtK2UuY2xvbmUoKS5hZGQobi5tb250aHMsXCJNXCIpLG59ZnVuY3Rpb24genQocyxpKXtyZXR1cm4gZnVuY3Rpb24oZSx0KXt2YXIgbjtyZXR1cm4gbnVsbD09PXR8fGlzTmFOKCt0KXx8KFQoaSxcIm1vbWVudCgpLlwiK2krXCIocGVyaW9kLCBudW1iZXIpIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgbW9tZW50KCkuXCIraStcIihudW1iZXIsIHBlcmlvZCkuIFNlZSBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2FkZC1pbnZlcnRlZC1wYXJhbS8gZm9yIG1vcmUgaW5mby5cIiksbj1lLGU9dCx0PW4pLCR0KHRoaXMsQXQoZT1cInN0cmluZ1wiPT10eXBlb2YgZT8rZTplLHQpLHMpLHRoaXN9fWZ1bmN0aW9uICR0KGUsdCxuLHMpe3ZhciBpPXQuX21pbGxpc2Vjb25kcyxyPUN0KHQuX2RheXMpLGE9Q3QodC5fbW9udGhzKTtlLmlzVmFsaWQoKSYmKHM9bnVsbD09c3x8cyxhJiZDZShlLHhlKGUsXCJNb250aFwiKSthKm4pLHImJmJlKGUsXCJEYXRlXCIseGUoZSxcIkRhdGVcIikrcipuKSxpJiZlLl9kLnNldFRpbWUoZS5fZC52YWx1ZU9mKCkraSpuKSxzJiZjLnVwZGF0ZU9mZnNldChlLHJ8fGEpKX1BdC5mbj1IdC5wcm90b3R5cGUsQXQuaW52YWxpZD1mdW5jdGlvbigpe3JldHVybiBBdChOYU4pfTt2YXIgcXQ9enQoMSxcImFkZFwiKSxKdD16dCgtMSxcInN1YnRyYWN0XCIpO2Z1bmN0aW9uIEJ0KGUsdCl7dmFyIG49MTIqKHQueWVhcigpLWUueWVhcigpKSsodC5tb250aCgpLWUubW9udGgoKSkscz1lLmNsb25lKCkuYWRkKG4sXCJtb250aHNcIik7cmV0dXJuLShuKyh0LXM8MD8odC1zKS8ocy1lLmNsb25lKCkuYWRkKG4tMSxcIm1vbnRoc1wiKSk6KHQtcykvKGUuY2xvbmUoKS5hZGQobisxLFwibW9udGhzXCIpLXMpKSl8fDB9ZnVuY3Rpb24gUXQoZSl7dmFyIHQ7cmV0dXJuIHZvaWQgMD09PWU/dGhpcy5fbG9jYWxlLl9hYmJyOihudWxsIT0odD1sdChlKSkmJih0aGlzLl9sb2NhbGU9dCksdGhpcyl9Yy5kZWZhdWx0Rm9ybWF0PVwiWVlZWS1NTS1ERFRISDptbTpzc1pcIixjLmRlZmF1bHRGb3JtYXRVdGM9XCJZWVlZLU1NLUREVEhIOm1tOnNzW1pdXCI7dmFyIFh0PW4oXCJtb21lbnQoKS5sYW5nKCkgaXMgZGVwcmVjYXRlZC4gSW5zdGVhZCwgdXNlIG1vbWVudCgpLmxvY2FsZURhdGEoKSB0byBnZXQgdGhlIGxhbmd1YWdlIGNvbmZpZ3VyYXRpb24uIFVzZSBtb21lbnQoKS5sb2NhbGUoKSB0byBjaGFuZ2UgbGFuZ3VhZ2VzLlwiLGZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP3RoaXMubG9jYWxlRGF0YSgpOnRoaXMubG9jYWxlKGUpfSk7ZnVuY3Rpb24gS3QoKXtyZXR1cm4gdGhpcy5fbG9jYWxlfWZ1bmN0aW9uIGVuKGUsdCl7SSgwLFtlLGUubGVuZ3RoXSwwLHQpfWZ1bmN0aW9uIHRuKGUsdCxuLHMsaSl7dmFyIHI7cmV0dXJuIG51bGw9PWU/SWUodGhpcyxzLGkpLnllYXI6KChyPUFlKGUscyxpKSk8dCYmKHQ9ciksZnVuY3Rpb24oZSx0LG4scyxpKXt2YXIgcj1FZShlLHQsbixzLGkpLGE9R2Uoci55ZWFyLDAsci5kYXlPZlllYXIpO3JldHVybiB0aGlzLnllYXIoYS5nZXRVVENGdWxsWWVhcigpKSx0aGlzLm1vbnRoKGEuZ2V0VVRDTW9udGgoKSksdGhpcy5kYXRlKGEuZ2V0VVRDRGF0ZSgpKSx0aGlzfS5jYWxsKHRoaXMsZSx0LG4scyxpKSl9SSgwLFtcImdnXCIsMl0sMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLndlZWtZZWFyKCklMTAwfSksSSgwLFtcIkdHXCIsMl0sMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzb1dlZWtZZWFyKCklMTAwfSksZW4oXCJnZ2dnXCIsXCJ3ZWVrWWVhclwiKSxlbihcImdnZ2dnXCIsXCJ3ZWVrWWVhclwiKSxlbihcIkdHR0dcIixcImlzb1dlZWtZZWFyXCIpLGVuKFwiR0dHR0dcIixcImlzb1dlZWtZZWFyXCIpLEgoXCJ3ZWVrWWVhclwiLFwiZ2dcIiksSChcImlzb1dlZWtZZWFyXCIsXCJHR1wiKSxMKFwid2Vla1llYXJcIiwxKSxMKFwiaXNvV2Vla1llYXJcIiwxKSx1ZShcIkdcIixzZSksdWUoXCJnXCIsc2UpLHVlKFwiR0dcIixCLHopLHVlKFwiZ2dcIixCLHopLHVlKFwiR0dHR1wiLGVlLHEpLHVlKFwiZ2dnZ1wiLGVlLHEpLHVlKFwiR0dHR0dcIix0ZSxKKSx1ZShcImdnZ2dnXCIsdGUsSiksZmUoW1wiZ2dnZ1wiLFwiZ2dnZ2dcIixcIkdHR0dcIixcIkdHR0dHXCJdLGZ1bmN0aW9uKGUsdCxuLHMpe3Rbcy5zdWJzdHIoMCwyKV09ayhlKX0pLGZlKFtcImdnXCIsXCJHR1wiXSxmdW5jdGlvbihlLHQsbixzKXt0W3NdPWMucGFyc2VUd29EaWdpdFllYXIoZSl9KSxJKFwiUVwiLDAsXCJRb1wiLFwicXVhcnRlclwiKSxIKFwicXVhcnRlclwiLFwiUVwiKSxMKFwicXVhcnRlclwiLDcpLHVlKFwiUVwiLFopLGNlKFwiUVwiLGZ1bmN0aW9uKGUsdCl7dFtfZV09MyooayhlKS0xKX0pLEkoXCJEXCIsW1wiRERcIiwyXSxcIkRvXCIsXCJkYXRlXCIpLEgoXCJkYXRlXCIsXCJEXCIpLEwoXCJkYXRlXCIsOSksdWUoXCJEXCIsQiksdWUoXCJERFwiLEIseiksdWUoXCJEb1wiLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU/dC5fZGF5T2ZNb250aE9yZGluYWxQYXJzZXx8dC5fb3JkaW5hbFBhcnNlOnQuX2RheU9mTW9udGhPcmRpbmFsUGFyc2VMZW5pZW50fSksY2UoW1wiRFwiLFwiRERcIl0seWUpLGNlKFwiRG9cIixmdW5jdGlvbihlLHQpe3RbeWVdPWsoZS5tYXRjaChCKVswXSl9KTt2YXIgbm49VGUoXCJEYXRlXCIsITApO0koXCJERERcIixbXCJEREREXCIsM10sXCJERERvXCIsXCJkYXlPZlllYXJcIiksSChcImRheU9mWWVhclwiLFwiREREXCIpLEwoXCJkYXlPZlllYXJcIiw0KSx1ZShcIkRERFwiLEspLHVlKFwiRERERFwiLCQpLGNlKFtcIkRERFwiLFwiRERERFwiXSxmdW5jdGlvbihlLHQsbil7bi5fZGF5T2ZZZWFyPWsoZSl9KSxJKFwibVwiLFtcIm1tXCIsMl0sMCxcIm1pbnV0ZVwiKSxIKFwibWludXRlXCIsXCJtXCIpLEwoXCJtaW51dGVcIiwxNCksdWUoXCJtXCIsQiksdWUoXCJtbVwiLEIseiksY2UoW1wibVwiLFwibW1cIl0scGUpO3ZhciBzbj1UZShcIk1pbnV0ZXNcIiwhMSk7SShcInNcIixbXCJzc1wiLDJdLDAsXCJzZWNvbmRcIiksSChcInNlY29uZFwiLFwic1wiKSxMKFwic2Vjb25kXCIsMTUpLHVlKFwic1wiLEIpLHVlKFwic3NcIixCLHopLGNlKFtcInNcIixcInNzXCJdLHZlKTt2YXIgcm4sYW49VGUoXCJTZWNvbmRzXCIsITEpO2ZvcihJKFwiU1wiLDAsMCxmdW5jdGlvbigpe3JldHVybn5+KHRoaXMubWlsbGlzZWNvbmQoKS8xMDApfSksSSgwLFtcIlNTXCIsMl0sMCxmdW5jdGlvbigpe3JldHVybn5+KHRoaXMubWlsbGlzZWNvbmQoKS8xMCl9KSxJKDAsW1wiU1NTXCIsM10sMCxcIm1pbGxpc2Vjb25kXCIpLEkoMCxbXCJTU1NTXCIsNF0sMCxmdW5jdGlvbigpe3JldHVybiAxMCp0aGlzLm1pbGxpc2Vjb25kKCl9KSxJKDAsW1wiU1NTU1NcIiw1XSwwLGZ1bmN0aW9uKCl7cmV0dXJuIDEwMCp0aGlzLm1pbGxpc2Vjb25kKCl9KSxJKDAsW1wiU1NTU1NTXCIsNl0sMCxmdW5jdGlvbigpe3JldHVybiAxZTMqdGhpcy5taWxsaXNlY29uZCgpfSksSSgwLFtcIlNTU1NTU1NcIiw3XSwwLGZ1bmN0aW9uKCl7cmV0dXJuIDFlNCp0aGlzLm1pbGxpc2Vjb25kKCl9KSxJKDAsW1wiU1NTU1NTU1NcIiw4XSwwLGZ1bmN0aW9uKCl7cmV0dXJuIDFlNSp0aGlzLm1pbGxpc2Vjb25kKCl9KSxJKDAsW1wiU1NTU1NTU1NTXCIsOV0sMCxmdW5jdGlvbigpe3JldHVybiAxZTYqdGhpcy5taWxsaXNlY29uZCgpfSksSChcIm1pbGxpc2Vjb25kXCIsXCJtc1wiKSxMKFwibWlsbGlzZWNvbmRcIiwxNiksdWUoXCJTXCIsSyxaKSx1ZShcIlNTXCIsSyx6KSx1ZShcIlNTU1wiLEssJCkscm49XCJTU1NTXCI7cm4ubGVuZ3RoPD05O3JuKz1cIlNcIil1ZShybixuZSk7ZnVuY3Rpb24gb24oZSx0KXt0W3dlXT1rKDFlMyooXCIwLlwiK2UpKX1mb3Iocm49XCJTXCI7cm4ubGVuZ3RoPD05O3JuKz1cIlNcIiljZShybixvbik7dmFyIHVuPVRlKFwiTWlsbGlzZWNvbmRzXCIsITEpO0koXCJ6XCIsMCwwLFwiem9uZUFiYnJcIiksSShcInp6XCIsMCwwLFwiem9uZU5hbWVcIik7dmFyIGxuPU0ucHJvdG90eXBlO2Z1bmN0aW9uIGRuKGUpe3JldHVybiBlfWxuLmFkZD1xdCxsbi5jYWxlbmRhcj1mdW5jdGlvbihlLHQpe3ZhciBuPWV8fFR0KCkscz1OdChuLHRoaXMpLnN0YXJ0T2YoXCJkYXlcIiksaT1jLmNhbGVuZGFyRm9ybWF0KHRoaXMscyl8fFwic2FtZUVsc2VcIixyPXQmJih4KHRbaV0pP3RbaV0uY2FsbCh0aGlzLG4pOnRbaV0pO3JldHVybiB0aGlzLmZvcm1hdChyfHx0aGlzLmxvY2FsZURhdGEoKS5jYWxlbmRhcihpLHRoaXMsVHQobikpKX0sbG4uY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE0odGhpcyl9LGxuLmRpZmY9ZnVuY3Rpb24oZSx0LG4pe3ZhciBzLGkscjtpZighdGhpcy5pc1ZhbGlkKCkpcmV0dXJuIE5hTjtpZighKHM9TnQoZSx0aGlzKSkuaXNWYWxpZCgpKXJldHVybiBOYU47c3dpdGNoKGk9NmU0KihzLnV0Y09mZnNldCgpLXRoaXMudXRjT2Zmc2V0KCkpLHQ9Uih0KSl7Y2FzZVwieWVhclwiOnI9QnQodGhpcyxzKS8xMjticmVhaztjYXNlXCJtb250aFwiOnI9QnQodGhpcyxzKTticmVhaztjYXNlXCJxdWFydGVyXCI6cj1CdCh0aGlzLHMpLzM7YnJlYWs7Y2FzZVwic2Vjb25kXCI6cj0odGhpcy1zKS8xZTM7YnJlYWs7Y2FzZVwibWludXRlXCI6cj0odGhpcy1zKS82ZTQ7YnJlYWs7Y2FzZVwiaG91clwiOnI9KHRoaXMtcykvMzZlNTticmVhaztjYXNlXCJkYXlcIjpyPSh0aGlzLXMtaSkvODY0ZTU7YnJlYWs7Y2FzZVwid2Vla1wiOnI9KHRoaXMtcy1pKS82MDQ4ZTU7YnJlYWs7ZGVmYXVsdDpyPXRoaXMtc31yZXR1cm4gbj9yOkQocil9LGxuLmVuZE9mPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT0oZT1SKGUpKXx8XCJtaWxsaXNlY29uZFwiPT09ZT90aGlzOihcImRhdGVcIj09PWUmJihlPVwiZGF5XCIpLHRoaXMuc3RhcnRPZihlKS5hZGQoMSxcImlzb1dlZWtcIj09PWU/XCJ3ZWVrXCI6ZSkuc3VidHJhY3QoMSxcIm1zXCIpKX0sbG4uZm9ybWF0PWZ1bmN0aW9uKGUpe2V8fChlPXRoaXMuaXNVdGMoKT9jLmRlZmF1bHRGb3JtYXRVdGM6Yy5kZWZhdWx0Rm9ybWF0KTt2YXIgdD1BKHRoaXMsZSk7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLnBvc3Rmb3JtYXQodCl9LGxuLmZyb209ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCkmJihTKGUpJiZlLmlzVmFsaWQoKXx8VHQoZSkuaXNWYWxpZCgpKT9BdCh7dG86dGhpcyxmcm9tOmV9KS5sb2NhbGUodGhpcy5sb2NhbGUoKSkuaHVtYW5pemUoIXQpOnRoaXMubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCl9LGxuLmZyb21Ob3c9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZnJvbShUdCgpLGUpfSxsbi50bz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmlzVmFsaWQoKSYmKFMoZSkmJmUuaXNWYWxpZCgpfHxUdChlKS5pc1ZhbGlkKCkpP0F0KHtmcm9tOnRoaXMsdG86ZX0pLmxvY2FsZSh0aGlzLmxvY2FsZSgpKS5odW1hbml6ZSghdCk6dGhpcy5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKX0sbG4udG9Ob3c9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudG8oVHQoKSxlKX0sbG4uZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiB4KHRoaXNbZT1SKGUpXSk/dGhpc1tlXSgpOnRoaXN9LGxuLmludmFsaWRBdD1mdW5jdGlvbigpe3JldHVybiBnKHRoaXMpLm92ZXJmbG93fSxsbi5pc0FmdGVyPWZ1bmN0aW9uKGUsdCl7dmFyIG49UyhlKT9lOlR0KGUpO3JldHVybiEoIXRoaXMuaXNWYWxpZCgpfHwhbi5pc1ZhbGlkKCkpJiYoXCJtaWxsaXNlY29uZFwiPT09KHQ9UihsKHQpP1wibWlsbGlzZWNvbmRcIjp0KSk/dGhpcy52YWx1ZU9mKCk+bi52YWx1ZU9mKCk6bi52YWx1ZU9mKCk8dGhpcy5jbG9uZSgpLnN0YXJ0T2YodCkudmFsdWVPZigpKX0sbG4uaXNCZWZvcmU9ZnVuY3Rpb24oZSx0KXt2YXIgbj1TKGUpP2U6VHQoZSk7cmV0dXJuISghdGhpcy5pc1ZhbGlkKCl8fCFuLmlzVmFsaWQoKSkmJihcIm1pbGxpc2Vjb25kXCI9PT0odD1SKGwodCk/XCJtaWxsaXNlY29uZFwiOnQpKT90aGlzLnZhbHVlT2YoKTxuLnZhbHVlT2YoKTp0aGlzLmNsb25lKCkuZW5kT2YodCkudmFsdWVPZigpPG4udmFsdWVPZigpKX0sbG4uaXNCZXR3ZWVuPWZ1bmN0aW9uKGUsdCxuLHMpe3JldHVybihcIihcIj09PShzPXN8fFwiKClcIilbMF0/dGhpcy5pc0FmdGVyKGUsbik6IXRoaXMuaXNCZWZvcmUoZSxuKSkmJihcIilcIj09PXNbMV0/dGhpcy5pc0JlZm9yZSh0LG4pOiF0aGlzLmlzQWZ0ZXIodCxuKSl9LGxuLmlzU2FtZT1mdW5jdGlvbihlLHQpe3ZhciBuLHM9UyhlKT9lOlR0KGUpO3JldHVybiEoIXRoaXMuaXNWYWxpZCgpfHwhcy5pc1ZhbGlkKCkpJiYoXCJtaWxsaXNlY29uZFwiPT09KHQ9Uih0fHxcIm1pbGxpc2Vjb25kXCIpKT90aGlzLnZhbHVlT2YoKT09PXMudmFsdWVPZigpOihuPXMudmFsdWVPZigpLHRoaXMuY2xvbmUoKS5zdGFydE9mKHQpLnZhbHVlT2YoKTw9biYmbjw9dGhpcy5jbG9uZSgpLmVuZE9mKHQpLnZhbHVlT2YoKSkpfSxsbi5pc1NhbWVPckFmdGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuaXNTYW1lKGUsdCl8fHRoaXMuaXNBZnRlcihlLHQpfSxsbi5pc1NhbWVPckJlZm9yZT1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmlzU2FtZShlLHQpfHx0aGlzLmlzQmVmb3JlKGUsdCl9LGxuLmlzVmFsaWQ9ZnVuY3Rpb24oKXtyZXR1cm4gcCh0aGlzKX0sbG4ubGFuZz1YdCxsbi5sb2NhbGU9UXQsbG4ubG9jYWxlRGF0YT1LdCxsbi5tYXg9YnQsbG4ubWluPXh0LGxuLnBhcnNpbmdGbGFncz1mdW5jdGlvbigpe3JldHVybiBfKHt9LGcodGhpcykpfSxsbi5zZXQ9ZnVuY3Rpb24oZSx0KXtpZihcIm9iamVjdFwiPT10eXBlb2YgZSlmb3IodmFyIG49ZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZhciBuIGluIGUpdC5wdXNoKHt1bml0Om4scHJpb3JpdHk6RltuXX0pO3JldHVybiB0LnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5wcmlvcml0eS10LnByaW9yaXR5fSksdH0oZT1DKGUpKSxzPTA7czxuLmxlbmd0aDtzKyspdGhpc1tuW3NdLnVuaXRdKGVbbltzXS51bml0XSk7ZWxzZSBpZih4KHRoaXNbZT1SKGUpXSkpcmV0dXJuIHRoaXNbZV0odCk7cmV0dXJuIHRoaXN9LGxuLnN0YXJ0T2Y9ZnVuY3Rpb24oZSl7c3dpdGNoKGU9UihlKSl7Y2FzZVwieWVhclwiOnRoaXMubW9udGgoMCk7Y2FzZVwicXVhcnRlclwiOmNhc2VcIm1vbnRoXCI6dGhpcy5kYXRlKDEpO2Nhc2VcIndlZWtcIjpjYXNlXCJpc29XZWVrXCI6Y2FzZVwiZGF5XCI6Y2FzZVwiZGF0ZVwiOnRoaXMuaG91cnMoMCk7Y2FzZVwiaG91clwiOnRoaXMubWludXRlcygwKTtjYXNlXCJtaW51dGVcIjp0aGlzLnNlY29uZHMoMCk7Y2FzZVwic2Vjb25kXCI6dGhpcy5taWxsaXNlY29uZHMoMCl9cmV0dXJuXCJ3ZWVrXCI9PT1lJiZ0aGlzLndlZWtkYXkoMCksXCJpc29XZWVrXCI9PT1lJiZ0aGlzLmlzb1dlZWtkYXkoMSksXCJxdWFydGVyXCI9PT1lJiZ0aGlzLm1vbnRoKDMqTWF0aC5mbG9vcih0aGlzLm1vbnRoKCkvMykpLHRoaXN9LGxuLnN1YnRyYWN0PUp0LGxuLnRvQXJyYXk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybltlLnllYXIoKSxlLm1vbnRoKCksZS5kYXRlKCksZS5ob3VyKCksZS5taW51dGUoKSxlLnNlY29uZCgpLGUubWlsbGlzZWNvbmQoKV19LGxuLnRvT2JqZWN0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm57eWVhcnM6ZS55ZWFyKCksbW9udGhzOmUubW9udGgoKSxkYXRlOmUuZGF0ZSgpLGhvdXJzOmUuaG91cnMoKSxtaW51dGVzOmUubWludXRlcygpLHNlY29uZHM6ZS5zZWNvbmRzKCksbWlsbGlzZWNvbmRzOmUubWlsbGlzZWNvbmRzKCl9fSxsbi50b0RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IERhdGUodGhpcy52YWx1ZU9mKCkpfSxsbi50b0lTT1N0cmluZz1mdW5jdGlvbihlKXtpZighdGhpcy5pc1ZhbGlkKCkpcmV0dXJuIG51bGw7dmFyIHQ9ITAhPT1lLG49dD90aGlzLmNsb25lKCkudXRjKCk6dGhpcztyZXR1cm4gbi55ZWFyKCk8MHx8OTk5OTxuLnllYXIoKT9BKG4sdD9cIllZWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1taXVwiOlwiWVlZWVlZLU1NLUREW1RdSEg6bW06c3MuU1NTWlwiKTp4KERhdGUucHJvdG90eXBlLnRvSVNPU3RyaW5nKT90P3RoaXMudG9EYXRlKCkudG9JU09TdHJpbmcoKTpuZXcgRGF0ZSh0aGlzLnZhbHVlT2YoKSs2MCp0aGlzLnV0Y09mZnNldCgpKjFlMykudG9JU09TdHJpbmcoKS5yZXBsYWNlKFwiWlwiLEEobixcIlpcIikpOkEobix0P1wiWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1taXVwiOlwiWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1pcIil9LGxuLmluc3BlY3Q9ZnVuY3Rpb24oKXtpZighdGhpcy5pc1ZhbGlkKCkpcmV0dXJuXCJtb21lbnQuaW52YWxpZCgvKiBcIit0aGlzLl9pK1wiICovKVwiO3ZhciBlPVwibW9tZW50XCIsdD1cIlwiO3RoaXMuaXNMb2NhbCgpfHwoZT0wPT09dGhpcy51dGNPZmZzZXQoKT9cIm1vbWVudC51dGNcIjpcIm1vbWVudC5wYXJzZVpvbmVcIix0PVwiWlwiKTt2YXIgbj1cIltcIitlKycoXCJdJyxzPTA8PXRoaXMueWVhcigpJiZ0aGlzLnllYXIoKTw9OTk5OT9cIllZWVlcIjpcIllZWVlZWVwiLGk9dCsnW1wiKV0nO3JldHVybiB0aGlzLmZvcm1hdChuK3MrXCItTU0tRERbVF1ISDptbTpzcy5TU1NcIitpKX0sbG4udG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpP3RoaXMudG9JU09TdHJpbmcoKTpudWxsfSxsbi50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNsb25lKCkubG9jYWxlKFwiZW5cIikuZm9ybWF0KFwiZGRkIE1NTSBERCBZWVlZIEhIOm1tOnNzIFtHTVRdWlpcIil9LGxuLnVuaXg9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5mbG9vcih0aGlzLnZhbHVlT2YoKS8xZTMpfSxsbi52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2QudmFsdWVPZigpLTZlNCoodGhpcy5fb2Zmc2V0fHwwKX0sbG4uY3JlYXRpb25EYXRhPWZ1bmN0aW9uKCl7cmV0dXJue2lucHV0OnRoaXMuX2ksZm9ybWF0OnRoaXMuX2YsbG9jYWxlOnRoaXMuX2xvY2FsZSxpc1VUQzp0aGlzLl9pc1VUQyxzdHJpY3Q6dGhpcy5fc3RyaWN0fX0sbG4ueWVhcj1PZSxsbi5pc0xlYXBZZWFyPWZ1bmN0aW9uKCl7cmV0dXJuIGtlKHRoaXMueWVhcigpKX0sbG4ud2Vla1llYXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRuLmNhbGwodGhpcyxlLHRoaXMud2VlaygpLHRoaXMud2Vla2RheSgpLHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdyx0aGlzLmxvY2FsZURhdGEoKS5fd2Vlay5kb3kpfSxsbi5pc29XZWVrWWVhcj1mdW5jdGlvbihlKXtyZXR1cm4gdG4uY2FsbCh0aGlzLGUsdGhpcy5pc29XZWVrKCksdGhpcy5pc29XZWVrZGF5KCksMSw0KX0sbG4ucXVhcnRlcj1sbi5xdWFydGVycz1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9NYXRoLmNlaWwoKHRoaXMubW9udGgoKSsxKS8zKTp0aGlzLm1vbnRoKDMqKGUtMSkrdGhpcy5tb250aCgpJTMpfSxsbi5tb250aD1GZSxsbi5kYXlzSW5Nb250aD1mdW5jdGlvbigpe3JldHVybiBQZSh0aGlzLnllYXIoKSx0aGlzLm1vbnRoKCkpfSxsbi53ZWVrPWxuLndlZWtzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubG9jYWxlRGF0YSgpLndlZWsodGhpcyk7cmV0dXJuIG51bGw9PWU/dDp0aGlzLmFkZCg3KihlLXQpLFwiZFwiKX0sbG4uaXNvV2Vlaz1sbi5pc29XZWVrcz1mdW5jdGlvbihlKXt2YXIgdD1JZSh0aGlzLDEsNCkud2VlaztyZXR1cm4gbnVsbD09ZT90OnRoaXMuYWRkKDcqKGUtdCksXCJkXCIpfSxsbi53ZWVrc0luWWVhcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMubG9jYWxlRGF0YSgpLl93ZWVrO3JldHVybiBBZSh0aGlzLnllYXIoKSxlLmRvdyxlLmRveSl9LGxuLmlzb1dlZWtzSW5ZZWFyPWZ1bmN0aW9uKCl7cmV0dXJuIEFlKHRoaXMueWVhcigpLDEsNCl9LGxuLmRhdGU9bm4sbG4uZGF5PWxuLmRheXM9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNWYWxpZCgpKXJldHVybiBudWxsIT1lP3RoaXM6TmFOO3ZhciB0LG4scz10aGlzLl9pc1VUQz90aGlzLl9kLmdldFVUQ0RheSgpOnRoaXMuX2QuZ2V0RGF5KCk7cmV0dXJuIG51bGwhPWU/KHQ9ZSxuPXRoaXMubG9jYWxlRGF0YSgpLGU9XCJzdHJpbmdcIiE9dHlwZW9mIHQ/dDppc05hTih0KT9cIm51bWJlclwiPT10eXBlb2YodD1uLndlZWtkYXlzUGFyc2UodCkpP3Q6bnVsbDpwYXJzZUludCh0LDEwKSx0aGlzLmFkZChlLXMsXCJkXCIpKTpzfSxsbi53ZWVrZGF5PWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzVmFsaWQoKSlyZXR1cm4gbnVsbCE9ZT90aGlzOk5hTjt2YXIgdD0odGhpcy5kYXkoKSs3LXRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdyklNztyZXR1cm4gbnVsbD09ZT90OnRoaXMuYWRkKGUtdCxcImRcIil9LGxuLmlzb1dlZWtkYXk9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNWYWxpZCgpKXJldHVybiBudWxsIT1lP3RoaXM6TmFOO2lmKG51bGwhPWUpe3ZhciB0PShuPWUscz10aGlzLmxvY2FsZURhdGEoKSxcInN0cmluZ1wiPT10eXBlb2Ygbj9zLndlZWtkYXlzUGFyc2UobiklN3x8Nzppc05hTihuKT9udWxsOm4pO3JldHVybiB0aGlzLmRheSh0aGlzLmRheSgpJTc/dDp0LTcpfXJldHVybiB0aGlzLmRheSgpfHw3O3ZhciBuLHN9LGxuLmRheU9mWWVhcj1mdW5jdGlvbihlKXt2YXIgdD1NYXRoLnJvdW5kKCh0aGlzLmNsb25lKCkuc3RhcnRPZihcImRheVwiKS10aGlzLmNsb25lKCkuc3RhcnRPZihcInllYXJcIikpLzg2NGU1KSsxO3JldHVybiBudWxsPT1lP3Q6dGhpcy5hZGQoZS10LFwiZFwiKX0sbG4uaG91cj1sbi5ob3Vycz10dCxsbi5taW51dGU9bG4ubWludXRlcz1zbixsbi5zZWNvbmQ9bG4uc2Vjb25kcz1hbixsbi5taWxsaXNlY29uZD1sbi5taWxsaXNlY29uZHM9dW4sbG4udXRjT2Zmc2V0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcyxpPXRoaXMuX29mZnNldHx8MDtpZighdGhpcy5pc1ZhbGlkKCkpcmV0dXJuIG51bGwhPWU/dGhpczpOYU47aWYobnVsbCE9ZSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpe2lmKG51bGw9PT0oZT1VdChyZSxlKSkpcmV0dXJuIHRoaXN9ZWxzZSBNYXRoLmFicyhlKTwxNiYmIW4mJihlKj02MCk7cmV0dXJuIXRoaXMuX2lzVVRDJiZ0JiYocz1HdCh0aGlzKSksdGhpcy5fb2Zmc2V0PWUsdGhpcy5faXNVVEM9ITAsbnVsbCE9cyYmdGhpcy5hZGQocyxcIm1cIiksaSE9PWUmJighdHx8dGhpcy5fY2hhbmdlSW5Qcm9ncmVzcz8kdCh0aGlzLEF0KGUtaSxcIm1cIiksMSwhMSk6dGhpcy5fY2hhbmdlSW5Qcm9ncmVzc3x8KHRoaXMuX2NoYW5nZUluUHJvZ3Jlc3M9ITAsYy51cGRhdGVPZmZzZXQodGhpcywhMCksdGhpcy5fY2hhbmdlSW5Qcm9ncmVzcz1udWxsKSksdGhpc31yZXR1cm4gdGhpcy5faXNVVEM/aTpHdCh0aGlzKX0sbG4udXRjPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnV0Y09mZnNldCgwLGUpfSxsbi5sb2NhbD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5faXNVVEMmJih0aGlzLnV0Y09mZnNldCgwLGUpLHRoaXMuX2lzVVRDPSExLGUmJnRoaXMuc3VidHJhY3QoR3QodGhpcyksXCJtXCIpKSx0aGlzfSxsbi5wYXJzZVpvbmU9ZnVuY3Rpb24oKXtpZihudWxsIT10aGlzLl90em0pdGhpcy51dGNPZmZzZXQodGhpcy5fdHptLCExLCEwKTtlbHNlIGlmKFwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLl9pKXt2YXIgZT1VdChpZSx0aGlzLl9pKTtudWxsIT1lP3RoaXMudXRjT2Zmc2V0KGUpOnRoaXMudXRjT2Zmc2V0KDAsITApfXJldHVybiB0aGlzfSxsbi5oYXNBbGlnbmVkSG91ck9mZnNldD1mdW5jdGlvbihlKXtyZXR1cm4hIXRoaXMuaXNWYWxpZCgpJiYoZT1lP1R0KGUpLnV0Y09mZnNldCgpOjAsKHRoaXMudXRjT2Zmc2V0KCktZSklNjA9PTApfSxsbi5pc0RTVD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnV0Y09mZnNldCgpPnRoaXMuY2xvbmUoKS5tb250aCgwKS51dGNPZmZzZXQoKXx8dGhpcy51dGNPZmZzZXQoKT50aGlzLmNsb25lKCkubW9udGgoNSkudXRjT2Zmc2V0KCl9LGxuLmlzTG9jYWw9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuaXNWYWxpZCgpJiYhdGhpcy5faXNVVEN9LGxuLmlzVXRjT2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmlzVmFsaWQoKSYmdGhpcy5faXNVVEN9LGxuLmlzVXRjPVZ0LGxuLmlzVVRDPVZ0LGxuLnpvbmVBYmJyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVVRDP1wiVVRDXCI6XCJcIn0sbG4uem9uZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNVVEM/XCJDb29yZGluYXRlZCBVbml2ZXJzYWwgVGltZVwiOlwiXCJ9LGxuLmRhdGVzPW4oXCJkYXRlcyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgZGF0ZSBpbnN0ZWFkLlwiLG5uKSxsbi5tb250aHM9bihcIm1vbnRocyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgbW9udGggaW5zdGVhZFwiLEZlKSxsbi55ZWFycz1uKFwieWVhcnMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIHllYXIgaW5zdGVhZFwiLE9lKSxsbi56b25lPW4oXCJtb21lbnQoKS56b25lIGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQoKS51dGNPZmZzZXQgaW5zdGVhZC4gaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy96b25lL1wiLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG51bGwhPWU/KFwic3RyaW5nXCIhPXR5cGVvZiBlJiYoZT0tZSksdGhpcy51dGNPZmZzZXQoZSx0KSx0aGlzKTotdGhpcy51dGNPZmZzZXQoKX0pLGxuLmlzRFNUU2hpZnRlZD1uKFwiaXNEU1RTaGlmdGVkIGlzIGRlcHJlY2F0ZWQuIFNlZSBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2RzdC1zaGlmdGVkLyBmb3IgbW9yZSBpbmZvcm1hdGlvblwiLGZ1bmN0aW9uKCl7aWYoIWwodGhpcy5faXNEU1RTaGlmdGVkKSlyZXR1cm4gdGhpcy5faXNEU1RTaGlmdGVkO3ZhciBlPXt9O2lmKHcoZSx0aGlzKSwoZT1ZdChlKSkuX2Epe3ZhciB0PWUuX2lzVVRDP3koZS5fYSk6VHQoZS5fYSk7dGhpcy5faXNEU1RTaGlmdGVkPXRoaXMuaXNWYWxpZCgpJiYwPGEoZS5fYSx0LnRvQXJyYXkoKSl9ZWxzZSB0aGlzLl9pc0RTVFNoaWZ0ZWQ9ITE7cmV0dXJuIHRoaXMuX2lzRFNUU2hpZnRlZH0pO3ZhciBobj1QLnByb3RvdHlwZTtmdW5jdGlvbiBjbihlLHQsbixzKXt2YXIgaT1sdCgpLHI9eSgpLnNldChzLHQpO3JldHVybiBpW25dKHIsZSl9ZnVuY3Rpb24gZm4oZSx0LG4pe2lmKGQoZSkmJih0PWUsZT12b2lkIDApLGU9ZXx8XCJcIixudWxsIT10KXJldHVybiBjbihlLHQsbixcIm1vbnRoXCIpO3ZhciBzLGk9W107Zm9yKHM9MDtzPDEyO3MrKylpW3NdPWNuKGUscyxuLFwibW9udGhcIik7cmV0dXJuIGl9ZnVuY3Rpb24gbW4oZSx0LG4scyl7XCJib29sZWFuXCI9PXR5cGVvZiBlP2QodCkmJihuPXQsdD12b2lkIDApOih0PWUsZT0hMSxkKG49dCkmJihuPXQsdD12b2lkIDApKSx0PXR8fFwiXCI7dmFyIGkscj1sdCgpLGE9ZT9yLl93ZWVrLmRvdzowO2lmKG51bGwhPW4pcmV0dXJuIGNuKHQsKG4rYSklNyxzLFwiZGF5XCIpO3ZhciBvPVtdO2ZvcihpPTA7aTw3O2krKylvW2ldPWNuKHQsKGkrYSklNyxzLFwiZGF5XCIpO3JldHVybiBvfWhuLmNhbGVuZGFyPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcz10aGlzLl9jYWxlbmRhcltlXXx8dGhpcy5fY2FsZW5kYXIuc2FtZUVsc2U7cmV0dXJuIHgocyk/cy5jYWxsKHQsbik6c30saG4ubG9uZ0RhdGVGb3JtYXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbG9uZ0RhdGVGb3JtYXRbZV0sbj10aGlzLl9sb25nRGF0ZUZvcm1hdFtlLnRvVXBwZXJDYXNlKCldO3JldHVybiB0fHwhbj90Oih0aGlzLl9sb25nRGF0ZUZvcm1hdFtlXT1uLnJlcGxhY2UoL01NTU18TU18RER8ZGRkZC9nLGZ1bmN0aW9uKGUpe3JldHVybiBlLnNsaWNlKDEpfSksdGhpcy5fbG9uZ0RhdGVGb3JtYXRbZV0pfSxobi5pbnZhbGlkRGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbnZhbGlkRGF0ZX0saG4ub3JkaW5hbD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb3JkaW5hbC5yZXBsYWNlKFwiJWRcIixlKX0saG4ucHJlcGFyc2U9ZG4saG4ucG9zdGZvcm1hdD1kbixobi5yZWxhdGl2ZVRpbWU9ZnVuY3Rpb24oZSx0LG4scyl7dmFyIGk9dGhpcy5fcmVsYXRpdmVUaW1lW25dO3JldHVybiB4KGkpP2koZSx0LG4scyk6aS5yZXBsYWNlKC8lZC9pLGUpfSxobi5wYXN0RnV0dXJlPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fcmVsYXRpdmVUaW1lWzA8ZT9cImZ1dHVyZVwiOlwicGFzdFwiXTtyZXR1cm4geChuKT9uKHQpOm4ucmVwbGFjZSgvJXMvaSx0KX0saG4uc2V0PWZ1bmN0aW9uKGUpe3ZhciB0LG47Zm9yKG4gaW4gZSl4KHQ9ZVtuXSk/dGhpc1tuXT10OnRoaXNbXCJfXCIrbl09dDt0aGlzLl9jb25maWc9ZSx0aGlzLl9kYXlPZk1vbnRoT3JkaW5hbFBhcnNlTGVuaWVudD1uZXcgUmVnRXhwKCh0aGlzLl9kYXlPZk1vbnRoT3JkaW5hbFBhcnNlLnNvdXJjZXx8dGhpcy5fb3JkaW5hbFBhcnNlLnNvdXJjZSkrXCJ8XCIrL1xcZHsxLDJ9Ly5zb3VyY2UpfSxobi5tb250aHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT9vKHRoaXMuX21vbnRocyk/dGhpcy5fbW9udGhzW2UubW9udGgoKV06dGhpcy5fbW9udGhzWyh0aGlzLl9tb250aHMuaXNGb3JtYXR8fFdlKS50ZXN0KHQpP1wiZm9ybWF0XCI6XCJzdGFuZGFsb25lXCJdW2UubW9udGgoKV06byh0aGlzLl9tb250aHMpP3RoaXMuX21vbnRoczp0aGlzLl9tb250aHMuc3RhbmRhbG9uZX0saG4ubW9udGhzU2hvcnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT9vKHRoaXMuX21vbnRoc1Nob3J0KT90aGlzLl9tb250aHNTaG9ydFtlLm1vbnRoKCldOnRoaXMuX21vbnRoc1Nob3J0W1dlLnRlc3QodCk/XCJmb3JtYXRcIjpcInN0YW5kYWxvbmVcIl1bZS5tb250aCgpXTpvKHRoaXMuX21vbnRoc1Nob3J0KT90aGlzLl9tb250aHNTaG9ydDp0aGlzLl9tb250aHNTaG9ydC5zdGFuZGFsb25lfSxobi5tb250aHNQYXJzZT1mdW5jdGlvbihlLHQsbil7dmFyIHMsaSxyO2lmKHRoaXMuX21vbnRoc1BhcnNlRXhhY3QpcmV0dXJuIGZ1bmN0aW9uKGUsdCxuKXt2YXIgcyxpLHIsYT1lLnRvTG9jYWxlTG93ZXJDYXNlKCk7aWYoIXRoaXMuX21vbnRoc1BhcnNlKWZvcih0aGlzLl9tb250aHNQYXJzZT1bXSx0aGlzLl9sb25nTW9udGhzUGFyc2U9W10sdGhpcy5fc2hvcnRNb250aHNQYXJzZT1bXSxzPTA7czwxMjsrK3Mpcj15KFsyZTMsc10pLHRoaXMuX3Nob3J0TW9udGhzUGFyc2Vbc109dGhpcy5tb250aHNTaG9ydChyLFwiXCIpLnRvTG9jYWxlTG93ZXJDYXNlKCksdGhpcy5fbG9uZ01vbnRoc1BhcnNlW3NdPXRoaXMubW9udGhzKHIsXCJcIikudG9Mb2NhbGVMb3dlckNhc2UoKTtyZXR1cm4gbj9cIk1NTVwiPT09dD8tMSE9PShpPVllLmNhbGwodGhpcy5fc2hvcnRNb250aHNQYXJzZSxhKSk/aTpudWxsOi0xIT09KGk9WWUuY2FsbCh0aGlzLl9sb25nTW9udGhzUGFyc2UsYSkpP2k6bnVsbDpcIk1NTVwiPT09dD8tMSE9PShpPVllLmNhbGwodGhpcy5fc2hvcnRNb250aHNQYXJzZSxhKSk/aTotMSE9PShpPVllLmNhbGwodGhpcy5fbG9uZ01vbnRoc1BhcnNlLGEpKT9pOm51bGw6LTEhPT0oaT1ZZS5jYWxsKHRoaXMuX2xvbmdNb250aHNQYXJzZSxhKSk/aTotMSE9PShpPVllLmNhbGwodGhpcy5fc2hvcnRNb250aHNQYXJzZSxhKSk/aTpudWxsfS5jYWxsKHRoaXMsZSx0LG4pO2Zvcih0aGlzLl9tb250aHNQYXJzZXx8KHRoaXMuX21vbnRoc1BhcnNlPVtdLHRoaXMuX2xvbmdNb250aHNQYXJzZT1bXSx0aGlzLl9zaG9ydE1vbnRoc1BhcnNlPVtdKSxzPTA7czwxMjtzKyspe2lmKGk9eShbMmUzLHNdKSxuJiYhdGhpcy5fbG9uZ01vbnRoc1BhcnNlW3NdJiYodGhpcy5fbG9uZ01vbnRoc1BhcnNlW3NdPW5ldyBSZWdFeHAoXCJeXCIrdGhpcy5tb250aHMoaSxcIlwiKS5yZXBsYWNlKFwiLlwiLFwiXCIpK1wiJFwiLFwiaVwiKSx0aGlzLl9zaG9ydE1vbnRoc1BhcnNlW3NdPW5ldyBSZWdFeHAoXCJeXCIrdGhpcy5tb250aHNTaG9ydChpLFwiXCIpLnJlcGxhY2UoXCIuXCIsXCJcIikrXCIkXCIsXCJpXCIpKSxufHx0aGlzLl9tb250aHNQYXJzZVtzXXx8KHI9XCJeXCIrdGhpcy5tb250aHMoaSxcIlwiKStcInxeXCIrdGhpcy5tb250aHNTaG9ydChpLFwiXCIpLHRoaXMuX21vbnRoc1BhcnNlW3NdPW5ldyBSZWdFeHAoci5yZXBsYWNlKFwiLlwiLFwiXCIpLFwiaVwiKSksbiYmXCJNTU1NXCI9PT10JiZ0aGlzLl9sb25nTW9udGhzUGFyc2Vbc10udGVzdChlKSlyZXR1cm4gcztpZihuJiZcIk1NTVwiPT09dCYmdGhpcy5fc2hvcnRNb250aHNQYXJzZVtzXS50ZXN0KGUpKXJldHVybiBzO2lmKCFuJiZ0aGlzLl9tb250aHNQYXJzZVtzXS50ZXN0KGUpKXJldHVybiBzfX0saG4ubW9udGhzUmVnZXg9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vbnRoc1BhcnNlRXhhY3Q/KG0odGhpcyxcIl9tb250aHNSZWdleFwiKXx8TmUuY2FsbCh0aGlzKSxlP3RoaXMuX21vbnRoc1N0cmljdFJlZ2V4OnRoaXMuX21vbnRoc1JlZ2V4KToobSh0aGlzLFwiX21vbnRoc1JlZ2V4XCIpfHwodGhpcy5fbW9udGhzUmVnZXg9VWUpLHRoaXMuX21vbnRoc1N0cmljdFJlZ2V4JiZlP3RoaXMuX21vbnRoc1N0cmljdFJlZ2V4OnRoaXMuX21vbnRoc1JlZ2V4KX0saG4ubW9udGhzU2hvcnRSZWdleD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9udGhzUGFyc2VFeGFjdD8obSh0aGlzLFwiX21vbnRoc1JlZ2V4XCIpfHxOZS5jYWxsKHRoaXMpLGU/dGhpcy5fbW9udGhzU2hvcnRTdHJpY3RSZWdleDp0aGlzLl9tb250aHNTaG9ydFJlZ2V4KToobSh0aGlzLFwiX21vbnRoc1Nob3J0UmVnZXhcIil8fCh0aGlzLl9tb250aHNTaG9ydFJlZ2V4PUxlKSx0aGlzLl9tb250aHNTaG9ydFN0cmljdFJlZ2V4JiZlP3RoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXg6dGhpcy5fbW9udGhzU2hvcnRSZWdleCl9LGhuLndlZWs9ZnVuY3Rpb24oZSl7cmV0dXJuIEllKGUsdGhpcy5fd2Vlay5kb3csdGhpcy5fd2Vlay5kb3kpLndlZWt9LGhuLmZpcnN0RGF5T2ZZZWFyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dlZWsuZG95fSxobi5maXJzdERheU9mV2Vlaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl93ZWVrLmRvd30saG4ud2Vla2RheXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT9vKHRoaXMuX3dlZWtkYXlzKT90aGlzLl93ZWVrZGF5c1tlLmRheSgpXTp0aGlzLl93ZWVrZGF5c1t0aGlzLl93ZWVrZGF5cy5pc0Zvcm1hdC50ZXN0KHQpP1wiZm9ybWF0XCI6XCJzdGFuZGFsb25lXCJdW2UuZGF5KCldOm8odGhpcy5fd2Vla2RheXMpP3RoaXMuX3dlZWtkYXlzOnRoaXMuX3dlZWtkYXlzLnN0YW5kYWxvbmV9LGhuLndlZWtkYXlzTWluPWZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMuX3dlZWtkYXlzTWluW2UuZGF5KCldOnRoaXMuX3dlZWtkYXlzTWlufSxobi53ZWVrZGF5c1Nob3J0PWZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMuX3dlZWtkYXlzU2hvcnRbZS5kYXkoKV06dGhpcy5fd2Vla2RheXNTaG9ydH0saG4ud2Vla2RheXNQYXJzZT1mdW5jdGlvbihlLHQsbil7dmFyIHMsaSxyO2lmKHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdClyZXR1cm4gZnVuY3Rpb24oZSx0LG4pe3ZhciBzLGkscixhPWUudG9Mb2NhbGVMb3dlckNhc2UoKTtpZighdGhpcy5fd2Vla2RheXNQYXJzZSlmb3IodGhpcy5fd2Vla2RheXNQYXJzZT1bXSx0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2U9W10sdGhpcy5fbWluV2Vla2RheXNQYXJzZT1bXSxzPTA7czw3OysrcylyPXkoWzJlMywxXSkuZGF5KHMpLHRoaXMuX21pbldlZWtkYXlzUGFyc2Vbc109dGhpcy53ZWVrZGF5c01pbihyLFwiXCIpLnRvTG9jYWxlTG93ZXJDYXNlKCksdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlW3NdPXRoaXMud2Vla2RheXNTaG9ydChyLFwiXCIpLnRvTG9jYWxlTG93ZXJDYXNlKCksdGhpcy5fd2Vla2RheXNQYXJzZVtzXT10aGlzLndlZWtkYXlzKHIsXCJcIikudG9Mb2NhbGVMb3dlckNhc2UoKTtyZXR1cm4gbj9cImRkZGRcIj09PXQ/LTEhPT0oaT1ZZS5jYWxsKHRoaXMuX3dlZWtkYXlzUGFyc2UsYSkpP2k6bnVsbDpcImRkZFwiPT09dD8tMSE9PShpPVllLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLGEpKT9pOm51bGw6LTEhPT0oaT1ZZS5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsYSkpP2k6bnVsbDpcImRkZGRcIj09PXQ/LTEhPT0oaT1ZZS5jYWxsKHRoaXMuX3dlZWtkYXlzUGFyc2UsYSkpP2k6LTEhPT0oaT1ZZS5jYWxsKHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSxhKSk/aTotMSE9PShpPVllLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSxhKSk/aTpudWxsOlwiZGRkXCI9PT10Py0xIT09KGk9WWUuY2FsbCh0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2UsYSkpP2k6LTEhPT0oaT1ZZS5jYWxsKHRoaXMuX3dlZWtkYXlzUGFyc2UsYSkpP2k6LTEhPT0oaT1ZZS5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsYSkpP2k6bnVsbDotMSE9PShpPVllLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSxhKSk/aTotMSE9PShpPVllLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSxhKSk/aTotMSE9PShpPVllLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLGEpKT9pOm51bGx9LmNhbGwodGhpcyxlLHQsbik7Zm9yKHRoaXMuX3dlZWtkYXlzUGFyc2V8fCh0aGlzLl93ZWVrZGF5c1BhcnNlPVtdLHRoaXMuX21pbldlZWtkYXlzUGFyc2U9W10sdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlPVtdLHRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlPVtdKSxzPTA7czw3O3MrKyl7aWYoaT15KFsyZTMsMV0pLmRheShzKSxuJiYhdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2Vbc10mJih0aGlzLl9mdWxsV2Vla2RheXNQYXJzZVtzXT1uZXcgUmVnRXhwKFwiXlwiK3RoaXMud2Vla2RheXMoaSxcIlwiKS5yZXBsYWNlKFwiLlwiLFwiLj9cIikrXCIkXCIsXCJpXCIpLHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtzXT1uZXcgUmVnRXhwKFwiXlwiK3RoaXMud2Vla2RheXNTaG9ydChpLFwiXCIpLnJlcGxhY2UoXCIuXCIsXCIuP1wiKStcIiRcIixcImlcIiksdGhpcy5fbWluV2Vla2RheXNQYXJzZVtzXT1uZXcgUmVnRXhwKFwiXlwiK3RoaXMud2Vla2RheXNNaW4oaSxcIlwiKS5yZXBsYWNlKFwiLlwiLFwiLj9cIikrXCIkXCIsXCJpXCIpKSx0aGlzLl93ZWVrZGF5c1BhcnNlW3NdfHwocj1cIl5cIit0aGlzLndlZWtkYXlzKGksXCJcIikrXCJ8XlwiK3RoaXMud2Vla2RheXNTaG9ydChpLFwiXCIpK1wifF5cIit0aGlzLndlZWtkYXlzTWluKGksXCJcIiksdGhpcy5fd2Vla2RheXNQYXJzZVtzXT1uZXcgUmVnRXhwKHIucmVwbGFjZShcIi5cIixcIlwiKSxcImlcIikpLG4mJlwiZGRkZFwiPT09dCYmdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2Vbc10udGVzdChlKSlyZXR1cm4gcztpZihuJiZcImRkZFwiPT09dCYmdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlW3NdLnRlc3QoZSkpcmV0dXJuIHM7aWYobiYmXCJkZFwiPT09dCYmdGhpcy5fbWluV2Vla2RheXNQYXJzZVtzXS50ZXN0KGUpKXJldHVybiBzO2lmKCFuJiZ0aGlzLl93ZWVrZGF5c1BhcnNlW3NdLnRlc3QoZSkpcmV0dXJuIHN9fSxobi53ZWVrZGF5c1JlZ2V4PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl93ZWVrZGF5c1BhcnNlRXhhY3Q/KG0odGhpcyxcIl93ZWVrZGF5c1JlZ2V4XCIpfHxCZS5jYWxsKHRoaXMpLGU/dGhpcy5fd2Vla2RheXNTdHJpY3RSZWdleDp0aGlzLl93ZWVrZGF5c1JlZ2V4KToobSh0aGlzLFwiX3dlZWtkYXlzUmVnZXhcIil8fCh0aGlzLl93ZWVrZGF5c1JlZ2V4PSRlKSx0aGlzLl93ZWVrZGF5c1N0cmljdFJlZ2V4JiZlP3RoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXg6dGhpcy5fd2Vla2RheXNSZWdleCl9LGhuLndlZWtkYXlzU2hvcnRSZWdleD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fd2Vla2RheXNQYXJzZUV4YWN0PyhtKHRoaXMsXCJfd2Vla2RheXNSZWdleFwiKXx8QmUuY2FsbCh0aGlzKSxlP3RoaXMuX3dlZWtkYXlzU2hvcnRTdHJpY3RSZWdleDp0aGlzLl93ZWVrZGF5c1Nob3J0UmVnZXgpOihtKHRoaXMsXCJfd2Vla2RheXNTaG9ydFJlZ2V4XCIpfHwodGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4PXFlKSx0aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXgmJmU/dGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4OnRoaXMuX3dlZWtkYXlzU2hvcnRSZWdleCl9LGhuLndlZWtkYXlzTWluUmVnZXg9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdD8obSh0aGlzLFwiX3dlZWtkYXlzUmVnZXhcIil8fEJlLmNhbGwodGhpcyksZT90aGlzLl93ZWVrZGF5c01pblN0cmljdFJlZ2V4OnRoaXMuX3dlZWtkYXlzTWluUmVnZXgpOihtKHRoaXMsXCJfd2Vla2RheXNNaW5SZWdleFwiKXx8KHRoaXMuX3dlZWtkYXlzTWluUmVnZXg9SmUpLHRoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXgmJmU/dGhpcy5fd2Vla2RheXNNaW5TdHJpY3RSZWdleDp0aGlzLl93ZWVrZGF5c01pblJlZ2V4KX0saG4uaXNQTT1mdW5jdGlvbihlKXtyZXR1cm5cInBcIj09PShlK1wiXCIpLnRvTG93ZXJDYXNlKCkuY2hhckF0KDApfSxobi5tZXJpZGllbT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIDExPGU/bj9cInBtXCI6XCJQTVwiOm4/XCJhbVwiOlwiQU1cIn0sb3QoXCJlblwiLHtkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cXGR7MSwyfSh0aHxzdHxuZHxyZCkvLG9yZGluYWw6ZnVuY3Rpb24oZSl7dmFyIHQ9ZSUxMDtyZXR1cm4gZSsoMT09PWsoZSUxMDAvMTApP1widGhcIjoxPT09dD9cInN0XCI6Mj09PXQ/XCJuZFwiOjM9PT10P1wicmRcIjpcInRoXCIpfX0pLGMubGFuZz1uKFwibW9tZW50LmxhbmcgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbWVudC5sb2NhbGUgaW5zdGVhZC5cIixvdCksYy5sYW5nRGF0YT1uKFwibW9tZW50LmxhbmdEYXRhIGlzIGRlcHJlY2F0ZWQuIFVzZSBtb21lbnQubG9jYWxlRGF0YSBpbnN0ZWFkLlwiLGx0KTt2YXIgX249TWF0aC5hYnM7ZnVuY3Rpb24geW4oZSx0LG4scyl7dmFyIGk9QXQodCxuKTtyZXR1cm4gZS5fbWlsbGlzZWNvbmRzKz1zKmkuX21pbGxpc2Vjb25kcyxlLl9kYXlzKz1zKmkuX2RheXMsZS5fbW9udGhzKz1zKmkuX21vbnRocyxlLl9idWJibGUoKX1mdW5jdGlvbiBnbihlKXtyZXR1cm4gZTwwP01hdGguZmxvb3IoZSk6TWF0aC5jZWlsKGUpfWZ1bmN0aW9uIHBuKGUpe3JldHVybiA0ODAwKmUvMTQ2MDk3fWZ1bmN0aW9uIHZuKGUpe3JldHVybiAxNDYwOTcqZS80ODAwfWZ1bmN0aW9uIHduKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzLmFzKGUpfX12YXIgTW49d24oXCJtc1wiKSxTbj13bihcInNcIiksRG49d24oXCJtXCIpLGtuPXduKFwiaFwiKSxZbj13bihcImRcIiksT249d24oXCJ3XCIpLFRuPXduKFwiTVwiKSx4bj13bihcInlcIik7ZnVuY3Rpb24gYm4oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpP3RoaXMuX2RhdGFbZV06TmFOfX12YXIgUG49Ym4oXCJtaWxsaXNlY29uZHNcIiksV249Ym4oXCJzZWNvbmRzXCIpLEhuPWJuKFwibWludXRlc1wiKSxSbj1ibihcImhvdXJzXCIpLENuPWJuKFwiZGF5c1wiKSxGbj1ibihcIm1vbnRoc1wiKSxMbj1ibihcInllYXJzXCIpO3ZhciBVbj1NYXRoLnJvdW5kLE5uPXtzczo0NCxzOjQ1LG06NDUsaDoyMixkOjI2LE06MTF9O3ZhciBHbj1NYXRoLmFicztmdW5jdGlvbiBWbihlKXtyZXR1cm4oMDxlKS0oZTwwKXx8K2V9ZnVuY3Rpb24gRW4oKXtpZighdGhpcy5pc1ZhbGlkKCkpcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCk7dmFyIGUsdCxuPUduKHRoaXMuX21pbGxpc2Vjb25kcykvMWUzLHM9R24odGhpcy5fZGF5cyksaT1Hbih0aGlzLl9tb250aHMpO3Q9RCgoZT1EKG4vNjApKS82MCksbiU9NjAsZSU9NjA7dmFyIHI9RChpLzEyKSxhPWklPTEyLG89cyx1PXQsbD1lLGQ9bj9uLnRvRml4ZWQoMykucmVwbGFjZSgvXFwuPzArJC8sXCJcIik6XCJcIixoPXRoaXMuYXNTZWNvbmRzKCk7aWYoIWgpcmV0dXJuXCJQMERcIjt2YXIgYz1oPDA/XCItXCI6XCJcIixmPVZuKHRoaXMuX21vbnRocykhPT1WbihoKT9cIi1cIjpcIlwiLG09Vm4odGhpcy5fZGF5cykhPT1WbihoKT9cIi1cIjpcIlwiLF89Vm4odGhpcy5fbWlsbGlzZWNvbmRzKSE9PVZuKGgpP1wiLVwiOlwiXCI7cmV0dXJuIGMrXCJQXCIrKHI/ZityK1wiWVwiOlwiXCIpKyhhP2YrYStcIk1cIjpcIlwiKSsobz9tK28rXCJEXCI6XCJcIikrKHV8fGx8fGQ/XCJUXCI6XCJcIikrKHU/Xyt1K1wiSFwiOlwiXCIpKyhsP18rbCtcIk1cIjpcIlwiKSsoZD9fK2QrXCJTXCI6XCJcIil9dmFyIEluPUh0LnByb3RvdHlwZTtyZXR1cm4gSW4uaXNWYWxpZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1ZhbGlkfSxJbi5hYnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9kYXRhO3JldHVybiB0aGlzLl9taWxsaXNlY29uZHM9X24odGhpcy5fbWlsbGlzZWNvbmRzKSx0aGlzLl9kYXlzPV9uKHRoaXMuX2RheXMpLHRoaXMuX21vbnRocz1fbih0aGlzLl9tb250aHMpLGUubWlsbGlzZWNvbmRzPV9uKGUubWlsbGlzZWNvbmRzKSxlLnNlY29uZHM9X24oZS5zZWNvbmRzKSxlLm1pbnV0ZXM9X24oZS5taW51dGVzKSxlLmhvdXJzPV9uKGUuaG91cnMpLGUubW9udGhzPV9uKGUubW9udGhzKSxlLnllYXJzPV9uKGUueWVhcnMpLHRoaXN9LEluLmFkZD1mdW5jdGlvbihlLHQpe3JldHVybiB5bih0aGlzLGUsdCwxKX0sSW4uc3VidHJhY3Q9ZnVuY3Rpb24oZSx0KXtyZXR1cm4geW4odGhpcyxlLHQsLTEpfSxJbi5hcz1mdW5jdGlvbihlKXtpZighdGhpcy5pc1ZhbGlkKCkpcmV0dXJuIE5hTjt2YXIgdCxuLHM9dGhpcy5fbWlsbGlzZWNvbmRzO2lmKFwibW9udGhcIj09PShlPVIoZSkpfHxcInllYXJcIj09PWUpcmV0dXJuIHQ9dGhpcy5fZGF5cytzLzg2NGU1LG49dGhpcy5fbW9udGhzK3BuKHQpLFwibW9udGhcIj09PWU/bjpuLzEyO3N3aXRjaCh0PXRoaXMuX2RheXMrTWF0aC5yb3VuZCh2bih0aGlzLl9tb250aHMpKSxlKXtjYXNlXCJ3ZWVrXCI6cmV0dXJuIHQvNytzLzYwNDhlNTtjYXNlXCJkYXlcIjpyZXR1cm4gdCtzLzg2NGU1O2Nhc2VcImhvdXJcIjpyZXR1cm4gMjQqdCtzLzM2ZTU7Y2FzZVwibWludXRlXCI6cmV0dXJuIDE0NDAqdCtzLzZlNDtjYXNlXCJzZWNvbmRcIjpyZXR1cm4gODY0MDAqdCtzLzFlMztjYXNlXCJtaWxsaXNlY29uZFwiOnJldHVybiBNYXRoLmZsb29yKDg2NGU1KnQpK3M7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHVuaXQgXCIrZSl9fSxJbi5hc01pbGxpc2Vjb25kcz1NbixJbi5hc1NlY29uZHM9U24sSW4uYXNNaW51dGVzPURuLEluLmFzSG91cnM9a24sSW4uYXNEYXlzPVluLEluLmFzV2Vla3M9T24sSW4uYXNNb250aHM9VG4sSW4uYXNZZWFycz14bixJbi52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpP3RoaXMuX21pbGxpc2Vjb25kcys4NjRlNSp0aGlzLl9kYXlzK3RoaXMuX21vbnRocyUxMioyNTkyZTYrMzE1MzZlNiprKHRoaXMuX21vbnRocy8xMik6TmFOfSxJbi5fYnViYmxlPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHMsaSxyPXRoaXMuX21pbGxpc2Vjb25kcyxhPXRoaXMuX2RheXMsbz10aGlzLl9tb250aHMsdT10aGlzLl9kYXRhO3JldHVybiAwPD1yJiYwPD1hJiYwPD1vfHxyPD0wJiZhPD0wJiZvPD0wfHwocis9ODY0ZTUqZ24odm4obykrYSksbz1hPTApLHUubWlsbGlzZWNvbmRzPXIlMWUzLGU9RChyLzFlMyksdS5zZWNvbmRzPWUlNjAsdD1EKGUvNjApLHUubWludXRlcz10JTYwLG49RCh0LzYwKSx1LmhvdXJzPW4lMjQsbys9aT1EKHBuKGErPUQobi8yNCkpKSxhLT1nbih2bihpKSkscz1EKG8vMTIpLG8lPTEyLHUuZGF5cz1hLHUubW9udGhzPW8sdS55ZWFycz1zLHRoaXN9LEluLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIEF0KHRoaXMpfSxJbi5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9UihlKSx0aGlzLmlzVmFsaWQoKT90aGlzW2UrXCJzXCJdKCk6TmFOfSxJbi5taWxsaXNlY29uZHM9UG4sSW4uc2Vjb25kcz1XbixJbi5taW51dGVzPUhuLEluLmhvdXJzPVJuLEluLmRheXM9Q24sSW4ud2Vla3M9ZnVuY3Rpb24oKXtyZXR1cm4gRCh0aGlzLmRheXMoKS83KX0sSW4ubW9udGhzPUZuLEluLnllYXJzPUxuLEluLmh1bWFuaXplPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzVmFsaWQoKSlyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKTt2YXIgdCxuLHMsaSxyLGEsbyx1LGwsZCxoLGM9dGhpcy5sb2NhbGVEYXRhKCksZj0obj0hZSxzPWMsaT1BdCh0PXRoaXMpLmFicygpLHI9VW4oaS5hcyhcInNcIikpLGE9VW4oaS5hcyhcIm1cIikpLG89VW4oaS5hcyhcImhcIikpLHU9VW4oaS5hcyhcImRcIikpLGw9VW4oaS5hcyhcIk1cIikpLGQ9VW4oaS5hcyhcInlcIikpLChoPXI8PU5uLnNzJiZbXCJzXCIscl18fHI8Tm4ucyYmW1wic3NcIixyXXx8YTw9MSYmW1wibVwiXXx8YTxObi5tJiZbXCJtbVwiLGFdfHxvPD0xJiZbXCJoXCJdfHxvPE5uLmgmJltcImhoXCIsb118fHU8PTEmJltcImRcIl18fHU8Tm4uZCYmW1wiZGRcIix1XXx8bDw9MSYmW1wiTVwiXXx8bDxObi5NJiZbXCJNTVwiLGxdfHxkPD0xJiZbXCJ5XCJdfHxbXCJ5eVwiLGRdKVsyXT1uLGhbM109MDwrdCxoWzRdPXMsZnVuY3Rpb24oZSx0LG4scyxpKXtyZXR1cm4gaS5yZWxhdGl2ZVRpbWUodHx8MSwhIW4sZSxzKX0uYXBwbHkobnVsbCxoKSk7cmV0dXJuIGUmJihmPWMucGFzdEZ1dHVyZSgrdGhpcyxmKSksYy5wb3N0Zm9ybWF0KGYpfSxJbi50b0lTT1N0cmluZz1FbixJbi50b1N0cmluZz1FbixJbi50b0pTT049RW4sSW4ubG9jYWxlPVF0LEluLmxvY2FsZURhdGE9S3QsSW4udG9Jc29TdHJpbmc9bihcInRvSXNvU3RyaW5nKCkgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSB0b0lTT1N0cmluZygpIGluc3RlYWQgKG5vdGljZSB0aGUgY2FwaXRhbHMpXCIsRW4pLEluLmxhbmc9WHQsSShcIlhcIiwwLDAsXCJ1bml4XCIpLEkoXCJ4XCIsMCwwLFwidmFsdWVPZlwiKSx1ZShcInhcIixzZSksdWUoXCJYXCIsL1srLV0/XFxkKyhcXC5cXGR7MSwzfSk/LyksY2UoXCJYXCIsZnVuY3Rpb24oZSx0LG4pe24uX2Q9bmV3IERhdGUoMWUzKnBhcnNlRmxvYXQoZSwxMCkpfSksY2UoXCJ4XCIsZnVuY3Rpb24oZSx0LG4pe24uX2Q9bmV3IERhdGUoayhlKSl9KSxjLnZlcnNpb249XCIyLjIyLjFcIixlPVR0LGMuZm49bG4sYy5taW49ZnVuY3Rpb24oKXtyZXR1cm4gUHQoXCJpc0JlZm9yZVwiLFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApKX0sYy5tYXg9ZnVuY3Rpb24oKXtyZXR1cm4gUHQoXCJpc0FmdGVyXCIsW10uc2xpY2UuY2FsbChhcmd1bWVudHMsMCkpfSxjLm5vdz1mdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdz9EYXRlLm5vdygpOituZXcgRGF0ZX0sYy51dGM9eSxjLnVuaXg9ZnVuY3Rpb24oZSl7cmV0dXJuIFR0KDFlMyplKX0sYy5tb250aHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZm4oZSx0LFwibW9udGhzXCIpfSxjLmlzRGF0ZT1oLGMubG9jYWxlPW90LGMuaW52YWxpZD12LGMuZHVyYXRpb249QXQsYy5pc01vbWVudD1TLGMud2Vla2RheXM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBtbihlLHQsbixcIndlZWtkYXlzXCIpfSxjLnBhcnNlWm9uZT1mdW5jdGlvbigpe3JldHVybiBUdC5hcHBseShudWxsLGFyZ3VtZW50cykucGFyc2Vab25lKCl9LGMubG9jYWxlRGF0YT1sdCxjLmlzRHVyYXRpb249UnQsYy5tb250aHNTaG9ydD1mdW5jdGlvbihlLHQpe3JldHVybiBmbihlLHQsXCJtb250aHNTaG9ydFwiKX0sYy53ZWVrZGF5c01pbj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG1uKGUsdCxuLFwid2Vla2RheXNNaW5cIil9LGMuZGVmaW5lTG9jYWxlPXV0LGMudXBkYXRlTG9jYWxlPWZ1bmN0aW9uKGUsdCl7aWYobnVsbCE9dCl7dmFyIG4scyxpPW50O251bGwhPShzPWF0KGUpKSYmKGk9cy5fY29uZmlnKSwobj1uZXcgUCh0PWIoaSx0KSkpLnBhcmVudExvY2FsZT1zdFtlXSxzdFtlXT1uLG90KGUpfWVsc2UgbnVsbCE9c3RbZV0mJihudWxsIT1zdFtlXS5wYXJlbnRMb2NhbGU/c3RbZV09c3RbZV0ucGFyZW50TG9jYWxlOm51bGwhPXN0W2VdJiZkZWxldGUgc3RbZV0pO3JldHVybiBzdFtlXX0sYy5sb2NhbGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHMoc3QpfSxjLndlZWtkYXlzU2hvcnQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBtbihlLHQsbixcIndlZWtkYXlzU2hvcnRcIil9LGMubm9ybWFsaXplVW5pdHM9UixjLnJlbGF0aXZlVGltZVJvdW5kaW5nPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP1VuOlwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJihVbj1lLCEwKX0sYy5yZWxhdGl2ZVRpbWVUaHJlc2hvbGQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwIT09Tm5bZV0mJih2b2lkIDA9PT10P05uW2VdOihObltlXT10LFwic1wiPT09ZSYmKE5uLnNzPXQtMSksITApKX0sYy5jYWxlbmRhckZvcm1hdD1mdW5jdGlvbihlLHQpe3ZhciBuPWUuZGlmZih0LFwiZGF5c1wiLCEwKTtyZXR1cm4gbjwtNj9cInNhbWVFbHNlXCI6bjwtMT9cImxhc3RXZWVrXCI6bjwwP1wibGFzdERheVwiOm48MT9cInNhbWVEYXlcIjpuPDI/XCJuZXh0RGF5XCI6bjw3P1wibmV4dFdlZWtcIjpcInNhbWVFbHNlXCJ9LGMucHJvdG90eXBlPWxuLGMuSFRNTDVfRk1UPXtEQVRFVElNRV9MT0NBTDpcIllZWVktTU0tRERUSEg6bW1cIixEQVRFVElNRV9MT0NBTF9TRUNPTkRTOlwiWVlZWS1NTS1ERFRISDptbTpzc1wiLERBVEVUSU1FX0xPQ0FMX01TOlwiWVlZWS1NTS1ERFRISDptbTpzcy5TU1NcIixEQVRFOlwiWVlZWS1NTS1ERFwiLFRJTUU6XCJISDptbVwiLFRJTUVfU0VDT05EUzpcIkhIOm1tOnNzXCIsVElNRV9NUzpcIkhIOm1tOnNzLlNTU1wiLFdFRUs6XCJZWVlZLVtXXVdXXCIsTU9OVEg6XCJZWVlZLU1NXCJ9LGN9KTsiLCIvKipcbiAqIE9iamVjdC1maXQgSW1hZ2VzIGZvciBJRTExXG4gKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vcmVuYW5zYW4vb2JqZWN0LWZpdC1pbWFnZXNcbiAqIEBsaW5rIG5wbS5pbS9vYmplY3QtZml0LWltYWdlcyAzLjIuNFxuICpcbiAqIFRoZSBwcm9qZWN0J3MgYXJjaGl2ZWQgYnkgdGhlIG93bmVyLCBzbyB3ZSBtYWRlIGNoYW5nZXMgZGlyZWN0bHkgaW4gdGhpcyBmaWxlLiBNb3JlIGluZm86XG4gKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vYmZyZWQtaXQvb2JqZWN0LWZpdC1pbWFnZXMvaXNzdWVzLzEwNCNpc3N1ZWNvbW1lbnQtNDM3NTcyNDYzXG4gKi9cbiB2YXIgb2JqZWN0Rml0SW1hZ2VzPWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCh0LGUpe3JldHVyblwiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSdcIit0K1wiJyBoZWlnaHQ9J1wiK2UrXCInJTNFJTNDL3N2ZyUzRVwifWZ1bmN0aW9uIGUodCl7aWYodC5zcmNzZXQmJiFtJiZ3aW5kb3cucGljdHVyZWZpbGwpe3ZhciBlPXdpbmRvdy5waWN0dXJlZmlsbC5fO3RbZS5uc10mJnRbZS5uc10uZXZhbGVkfHxlLmZpbGxJbWcodCx7cmVzZWxlY3Q6ITB9KSx0W2UubnNdLmN1clNyY3x8KHRbZS5uc10uc3VwcG9ydGVkPSExLGUuZmlsbEltZyh0LHtyZXNlbGVjdDohMH0pKSx0LmN1cnJlbnRTcmM9dFtlLm5zXS5jdXJTcmN8fHQuc3JjfX1mdW5jdGlvbiByKHQpe2Zvcih2YXIgZSxyPWdldENvbXB1dGVkU3R5bGUodCkuZm9udEZhbWlseSxpPXt9O251bGwhPT0oZT11LmV4ZWMocikpOylpW2VbMV1dPWVbMl07cmV0dXJuIGl9ZnVuY3Rpb24gaShlLHIsaSl7dmFyIG49dChyfHwxLGl8fDApO3AuY2FsbChlLFwic3JjXCIpIT09biYmYi5jYWxsKGUsXCJzcmNcIixuKX1mdW5jdGlvbiBuKHQsZSl7dC5uYXR1cmFsV2lkdGg/ZSh0KTpzZXRUaW1lb3V0KG4sMTAwLHQsZSl9ZnVuY3Rpb24gYyh0KXt2YXIgYz1yKHQpLG89dFthXTtpZih0Lm5hdHVyYWxXaWR0aCl7aWYoY1tcIm9iamVjdC1maXRcIl09Y1tcIm9iamVjdC1maXRcIl18fFwiZmlsbFwiLCFvLmltZyl7aWYoXCJmaWxsXCI9PT1jW1wib2JqZWN0LWZpdFwiXSlyZXR1cm47aWYoIW8uc2tpcFRlc3QmJmcmJiFjW1wib2JqZWN0LXBvc2l0aW9uXCJdKXJldHVybn1pZighby5pbWcpe28uaW1nPW5ldyBJbWFnZSh0LndpZHRoLHQuaGVpZ2h0KSxvLmltZy5zcmNzZXQ9cC5jYWxsKHQsXCJkYXRhLW9maS1zcmNzZXRcIil8fHQuc3Jjc2V0O3ZhciB1PXAuY2FsbCh0LFwiZGF0YS1vZmktc3JjXCIpfHx0LnNyYzt1JiYoby5pbWcuc3JjPXUpLGIuY2FsbCh0LFwiZGF0YS1vZmktc3JjXCIsdC5zcmMpLHQuc3Jjc2V0JiZiLmNhbGwodCxcImRhdGEtb2ZpLXNyY3NldFwiLHQuc3Jjc2V0KSxpKHQsdC5uYXR1cmFsV2lkdGh8fHQud2lkdGgsdC5uYXR1cmFsSGVpZ2h0fHx0LmhlaWdodCksdC5zcmNzZXQmJih0LnNyY3NldD1cIlwiKTt0cnl7cyh0KX1jYXRjaCh0KXt3aW5kb3cuY29uc29sZSYmY29uc29sZS53YXJuKFwiaHR0cHM6Ly9iaXQubHkvb2ZpLW9sZC1icm93c2VyXCIpfX1lKG8uaW1nKTsoby5pbWcuY3VycmVudFNyY3x8by5pbWcuc3JjKSYmKHQuc3R5bGUuYmFja2dyb3VuZEltYWdlPSd1cmwoXCInKyhvLmltZy5jdXJyZW50U3JjfHxvLmltZy5zcmMpLnJlcGxhY2UoL1wiL2csJ1xcXFxcIicpKydcIiknKSx0LnN0eWxlLmJhY2tncm91bmRJbWFnZT0ndXJsKFwiJysoby5pbWcuY3VycmVudFNyY3x8by5pbWcuc3JjKS5yZXBsYWNlKC9cIi9nLCdcXFxcXCInKSsnXCIpJyx0LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbj1jW1wib2JqZWN0LXBvc2l0aW9uXCJdfHxcImNlbnRlclwiLHQuc3R5bGUuYmFja2dyb3VuZFJlcGVhdD1cIm5vLXJlcGVhdFwiLHQuc3R5bGUuYmFja2dyb3VuZE9yaWdpbj1cImNvbnRlbnQtYm94XCIsL3NjYWxlLWRvd24vLnRlc3QoY1tcIm9iamVjdC1maXRcIl0pP24oby5pbWcsZnVuY3Rpb24oKXtvLmltZy5uYXR1cmFsV2lkdGg+dC53aWR0aHx8by5pbWcubmF0dXJhbEhlaWdodD50LmhlaWdodD90LnN0eWxlLmJhY2tncm91bmRTaXplPVwiY29udGFpblwiOnQuc3R5bGUuYmFja2dyb3VuZFNpemU9XCJhdXRvXCJ9KTp0LnN0eWxlLmJhY2tncm91bmRTaXplPWNbXCJvYmplY3QtZml0XCJdLnJlcGxhY2UoXCJub25lXCIsXCJhdXRvXCIpLnJlcGxhY2UoXCJmaWxsXCIsXCIxMDAlIDEwMCVcIiksbihvLmltZyxmdW5jdGlvbihlKXtpKHQsZS5uYXR1cmFsV2lkdGgsZS5uYXR1cmFsSGVpZ2h0KX0pfX1mdW5jdGlvbiBzKHQpe3ZhciBlPXtnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRbYV0uaW1nW2V8fFwic3JjXCJdfSxzZXQ6ZnVuY3Rpb24oZSxyKXtyZXR1cm4gdFthXS5pbWdbcnx8XCJzcmNcIl09ZSxiLmNhbGwodCxcImRhdGEtb2ZpLVwiK3IsZSksYyh0KSxlfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJzcmNcIixlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcImN1cnJlbnRTcmNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuZ2V0KFwiY3VycmVudFNyY1wiKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcInNyY3NldFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXQoXCJzcmNzZXRcIil9LHNldDpmdW5jdGlvbih0KXtyZXR1cm4gZS5zZXQodCxcInNyY3NldFwiKX19KX1mdW5jdGlvbiBvKHQsZSl7dmFyIHI9IWgmJiF0O2lmKGU9ZXx8e30sdD10fHxcImltZ1wiLGYmJiFlLnNraXBUZXN0fHwhZClyZXR1cm4hMTtcImltZ1wiPT09dD90PWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW1nXCIpOlwic3RyaW5nXCI9PXR5cGVvZiB0P3Q9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0KTpcImxlbmd0aFwiaW4gdHx8KHQ9W3RdKTtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyl0W2ldW2FdPXRbaV1bYV18fHtza2lwVGVzdDplLnNraXBUZXN0fSxjKHRbaV0pO3ImJihkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24odCl7XCJJTUdcIj09PXQudGFyZ2V0LnRhZ05hbWUmJm8odC50YXJnZXQse3NraXBUZXN0OmUuc2tpcFRlc3R9KX0sITApLGg9ITAsdD1cImltZ1wiKSxlLndhdGNoTVEmJndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsby5iaW5kKG51bGwsdCx7c2tpcFRlc3Q6ZS5za2lwVGVzdH0pKX12YXIgYT1cImJmcmVkLWl0Om9iamVjdC1maXQtaW1hZ2VzXCIsdT0vKG9iamVjdC1maXR8b2JqZWN0LXBvc2l0aW9uKVxccyo6XFxzKihbLS5cXHdcXHMlXSspL2csbD1cInVuZGVmaW5lZFwiPT10eXBlb2YgSW1hZ2U/e3N0eWxlOntcIm9iamVjdC1wb3NpdGlvblwiOjF9fTpuZXcgSW1hZ2UsZz1cIm9iamVjdC1maXRcImluIGwuc3R5bGUsZj1cIm9iamVjdC1wb3NpdGlvblwiaW4gbC5zdHlsZSxkPVwiYmFja2dyb3VuZC1zaXplXCJpbiBsLnN0eWxlLG09XCJzdHJpbmdcIj09dHlwZW9mIGwuY3VycmVudFNyYyxwPWwuZ2V0QXR0cmlidXRlLGI9bC5zZXRBdHRyaWJ1dGUsaD0hMTtyZXR1cm4gby5zdXBwb3J0c09iamVjdEZpdD1nLG8uc3VwcG9ydHNPYmplY3RQb3NpdGlvbj1mLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3JldHVybiB0W2FdJiZ0W2FdLmltZyYmKFwic3JjXCI9PT1lfHxcInNyY3NldFwiPT09ZSk/dFthXS5pbWc6dH1mfHwoSFRNTEltYWdlRWxlbWVudC5wcm90b3R5cGUuZ2V0QXR0cmlidXRlPWZ1bmN0aW9uKGUpe3JldHVybiBwLmNhbGwodCh0aGlzLGUpLGUpfSxIVE1MSW1hZ2VFbGVtZW50LnByb3RvdHlwZS5zZXRBdHRyaWJ1dGU9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gYi5jYWxsKHQodGhpcyxlKSxlLFN0cmluZyhyKSl9KX0oKSxvfSgpO1xuIiwiLyohXG4gKiBQYWNrZXJ5IGxheW91dCBtb2RlIFBBQ0tBR0VEIHYyLjAuMVxuICogc3ViLWNsYXNzZXMgUGFja2VyeVxuICovXG5cbiFmdW5jdGlvbihhLGIpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJwYWNrZXJ5L2pzL3JlY3RcIixiKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iKCk6KGEuUGFja2VyeT1hLlBhY2tlcnl8fHt9LGEuUGFja2VyeS5SZWN0PWIoKSl9KHdpbmRvdyxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYil7Zm9yKHZhciBjIGluIGEuZGVmYXVsdHMpdGhpc1tjXT1hLmRlZmF1bHRzW2NdO2ZvcihjIGluIGIpdGhpc1tjXT1iW2NdfWEuZGVmYXVsdHM9e3g6MCx5OjAsd2lkdGg6MCxoZWlnaHQ6MH07dmFyIGI9YS5wcm90b3R5cGU7cmV0dXJuIGIuY29udGFpbnM9ZnVuY3Rpb24oYSl7dmFyIGI9YS53aWR0aHx8MCxjPWEuaGVpZ2h0fHwwO3JldHVybiB0aGlzLng8PWEueCYmdGhpcy55PD1hLnkmJnRoaXMueCt0aGlzLndpZHRoPj1hLngrYiYmdGhpcy55K3RoaXMuaGVpZ2h0Pj1hLnkrY30sYi5vdmVybGFwcz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLngrdGhpcy53aWR0aCxjPXRoaXMueSt0aGlzLmhlaWdodCxkPWEueCthLndpZHRoLGU9YS55K2EuaGVpZ2h0O3JldHVybiB0aGlzLng8ZCYmYj5hLngmJnRoaXMueTxlJiZjPmEueX0sYi5nZXRNYXhpbWFsRnJlZVJlY3RzPWZ1bmN0aW9uKGIpe2lmKCF0aGlzLm92ZXJsYXBzKGIpKXJldHVybiExO3ZhciBjLGQ9W10sZT10aGlzLngrdGhpcy53aWR0aCxmPXRoaXMueSt0aGlzLmhlaWdodCxnPWIueCtiLndpZHRoLGg9Yi55K2IuaGVpZ2h0O3JldHVybiB0aGlzLnk8Yi55JiYoYz1uZXcgYSh7eDp0aGlzLngseTp0aGlzLnksd2lkdGg6dGhpcy53aWR0aCxoZWlnaHQ6Yi55LXRoaXMueX0pLGQucHVzaChjKSksZT5nJiYoYz1uZXcgYSh7eDpnLHk6dGhpcy55LHdpZHRoOmUtZyxoZWlnaHQ6dGhpcy5oZWlnaHR9KSxkLnB1c2goYykpLGY+aCYmKGM9bmV3IGEoe3g6dGhpcy54LHk6aCx3aWR0aDp0aGlzLndpZHRoLGhlaWdodDpmLWh9KSxkLnB1c2goYykpLHRoaXMueDxiLngmJihjPW5ldyBhKHt4OnRoaXMueCx5OnRoaXMueSx3aWR0aDpiLngtdGhpcy54LGhlaWdodDp0aGlzLmhlaWdodH0pLGQucHVzaChjKSksZH0sYi5jYW5GaXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMud2lkdGg+PWEud2lkdGgmJnRoaXMuaGVpZ2h0Pj1hLmhlaWdodH0sYX0pLGZ1bmN0aW9uKGEsYil7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShcInBhY2tlcnkvanMvcGFja2VyXCIsW1wiLi9yZWN0XCJdLGIpO2Vsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHMpbW9kdWxlLmV4cG9ydHM9YihyZXF1aXJlKFwiLi9yZWN0XCIpKTtlbHNle3ZhciBjPWEuUGFja2VyeT1hLlBhY2tlcnl8fHt9O2MuUGFja2VyPWIoYy5SZWN0KX19KHdpbmRvdyxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjKXt0aGlzLndpZHRoPWF8fDAsdGhpcy5oZWlnaHQ9Ynx8MCx0aGlzLnNvcnREaXJlY3Rpb249Y3x8XCJkb3dud2FyZExlZnRUb1JpZ2h0XCIsdGhpcy5yZXNldCgpfXZhciBjPWIucHJvdG90eXBlO2MucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLnNwYWNlcz1bXTt2YXIgYj1uZXcgYSh7eDowLHk6MCx3aWR0aDp0aGlzLndpZHRoLGhlaWdodDp0aGlzLmhlaWdodH0pO3RoaXMuc3BhY2VzLnB1c2goYiksdGhpcy5zb3J0ZXI9ZFt0aGlzLnNvcnREaXJlY3Rpb25dfHxkLmRvd253YXJkTGVmdFRvUmlnaHR9LGMucGFjaz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHRoaXMuc3BhY2VzLmxlbmd0aDtiKyspe3ZhciBjPXRoaXMuc3BhY2VzW2JdO2lmKGMuY2FuRml0KGEpKXt0aGlzLnBsYWNlSW5TcGFjZShhLGMpO2JyZWFrfX19LGMuY29sdW1uUGFjaz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHRoaXMuc3BhY2VzLmxlbmd0aDtiKyspe3ZhciBjPXRoaXMuc3BhY2VzW2JdLGQ9Yy54PD1hLngmJmMueCtjLndpZHRoPj1hLngrYS53aWR0aCYmYy5oZWlnaHQ+PWEuaGVpZ2h0LS4wMTtpZihkKXthLnk9Yy55LHRoaXMucGxhY2VkKGEpO2JyZWFrfX19LGMucm93UGFjaz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHRoaXMuc3BhY2VzLmxlbmd0aDtiKyspe3ZhciBjPXRoaXMuc3BhY2VzW2JdLGQ9Yy55PD1hLnkmJmMueStjLmhlaWdodD49YS55K2EuaGVpZ2h0JiZjLndpZHRoPj1hLndpZHRoLS4wMTtpZihkKXthLng9Yy54LHRoaXMucGxhY2VkKGEpO2JyZWFrfX19LGMucGxhY2VJblNwYWNlPWZ1bmN0aW9uKGEsYil7YS54PWIueCxhLnk9Yi55LHRoaXMucGxhY2VkKGEpfSxjLnBsYWNlZD1mdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wO2M8dGhpcy5zcGFjZXMubGVuZ3RoO2MrKyl7dmFyIGQ9dGhpcy5zcGFjZXNbY10sZT1kLmdldE1heGltYWxGcmVlUmVjdHMoYSk7ZT9iLnB1c2guYXBwbHkoYixlKTpiLnB1c2goZCl9dGhpcy5zcGFjZXM9Yix0aGlzLm1lcmdlU29ydFNwYWNlcygpfSxjLm1lcmdlU29ydFNwYWNlcz1mdW5jdGlvbigpe2IubWVyZ2VSZWN0cyh0aGlzLnNwYWNlcyksdGhpcy5zcGFjZXMuc29ydCh0aGlzLnNvcnRlcil9LGMuYWRkU3BhY2U9ZnVuY3Rpb24oYSl7dGhpcy5zcGFjZXMucHVzaChhKSx0aGlzLm1lcmdlU29ydFNwYWNlcygpfSxiLm1lcmdlUmVjdHM9ZnVuY3Rpb24oYSl7dmFyIGI9MCxjPWFbYl07YTpmb3IoO2M7KXtmb3IodmFyIGQ9MCxlPWFbYitkXTtlOyl7aWYoZT09YylkKys7ZWxzZXtpZihlLmNvbnRhaW5zKGMpKXthLnNwbGljZShiLDEpLGM9YVtiXTtjb250aW51ZSBhfWMuY29udGFpbnMoZSk/YS5zcGxpY2UoYitkLDEpOmQrK31lPWFbYitkXX1iKyssYz1hW2JdfXJldHVybiBhfTt2YXIgZD17ZG93bndhcmRMZWZ0VG9SaWdodDpmdW5jdGlvbihhLGIpe3JldHVybiBhLnktYi55fHxhLngtYi54fSxyaWdodHdhcmRUb3BUb0JvdHRvbTpmdW5jdGlvbihhLGIpe3JldHVybiBhLngtYi54fHxhLnktYi55fX07cmV0dXJuIGJ9KSxmdW5jdGlvbihhLGIpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJwYWNrZXJ5L2pzL2l0ZW1cIixbXCJvdXRsYXllci9vdXRsYXllclwiLFwiLi9yZWN0XCJdLGIpOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWIocmVxdWlyZShcIm91dGxheWVyXCIpLHJlcXVpcmUoXCIuL3JlY3RcIikpOmEuUGFja2VyeS5JdGVtPWIoYS5PdXRsYXllcixhLlBhY2tlcnkuUmVjdCl9KHdpbmRvdyxmdW5jdGlvbihhLGIpe3ZhciBjPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSxkPVwic3RyaW5nXCI9PXR5cGVvZiBjLnRyYW5zZm9ybT9cInRyYW5zZm9ybVwiOlwiV2Via2l0VHJhbnNmb3JtXCIsZT1mdW5jdGlvbigpe2EuSXRlbS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGY9ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShhLkl0ZW0ucHJvdG90eXBlKSxnPWYuX2NyZWF0ZTtmLl9jcmVhdGU9ZnVuY3Rpb24oKXtnLmNhbGwodGhpcyksdGhpcy5yZWN0PW5ldyBifTt2YXIgaD1mLm1vdmVUbztyZXR1cm4gZi5tb3ZlVG89ZnVuY3Rpb24oYSxiKXt2YXIgYz1NYXRoLmFicyh0aGlzLnBvc2l0aW9uLngtYSksZD1NYXRoLmFicyh0aGlzLnBvc2l0aW9uLnktYiksZT10aGlzLmxheW91dC5kcmFnSXRlbUNvdW50JiYhdGhpcy5pc1BsYWNpbmcmJiF0aGlzLmlzVHJhbnNpdGlvbmluZyYmMT5jJiYxPmQ7cmV0dXJuIGU/dm9pZCB0aGlzLmdvVG8oYSxiKTp2b2lkIGguYXBwbHkodGhpcyxhcmd1bWVudHMpfSxmLmVuYWJsZVBsYWNpbmc9ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZVRyYW5zaXRpb25TdHlsZXMoKSx0aGlzLmlzVHJhbnNpdGlvbmluZyYmZCYmKHRoaXMuZWxlbWVudC5zdHlsZVtkXT1cIm5vbmVcIiksdGhpcy5pc1RyYW5zaXRpb25pbmc9ITEsdGhpcy5nZXRTaXplKCksdGhpcy5sYXlvdXQuX3NldFJlY3RTaXplKHRoaXMuZWxlbWVudCx0aGlzLnJlY3QpLHRoaXMuaXNQbGFjaW5nPSEwfSxmLmRpc2FibGVQbGFjaW5nPWZ1bmN0aW9uKCl7dGhpcy5pc1BsYWNpbmc9ITF9LGYucmVtb3ZlRWxlbT1mdW5jdGlvbigpe3RoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksdGhpcy5sYXlvdXQucGFja2VyLmFkZFNwYWNlKHRoaXMucmVjdCksdGhpcy5lbWl0RXZlbnQoXCJyZW1vdmVcIixbdGhpc10pfSxmLnNob3dEcm9wUGxhY2Vob2xkZXI9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmRyb3BQbGFjZWhvbGRlcjthfHwoYT10aGlzLmRyb3BQbGFjZWhvbGRlcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGEuY2xhc3NOYW1lPVwicGFja2VyeS1kcm9wLXBsYWNlaG9sZGVyXCIsYS5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIpLGEuc3R5bGUud2lkdGg9dGhpcy5zaXplLndpZHRoK1wicHhcIixhLnN0eWxlLmhlaWdodD10aGlzLnNpemUuaGVpZ2h0K1wicHhcIix0aGlzLnBvc2l0aW9uRHJvcFBsYWNlaG9sZGVyKCksdGhpcy5sYXlvdXQuZWxlbWVudC5hcHBlbmRDaGlsZChhKX0sZi5wb3NpdGlvbkRyb3BQbGFjZWhvbGRlcj1mdW5jdGlvbigpe3RoaXMuZHJvcFBsYWNlaG9sZGVyLnN0eWxlW2RdPVwidHJhbnNsYXRlKFwiK3RoaXMucmVjdC54K1wicHgsIFwiK3RoaXMucmVjdC55K1wicHgpXCJ9LGYuaGlkZURyb3BQbGFjZWhvbGRlcj1mdW5jdGlvbigpe3RoaXMubGF5b3V0LmVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5kcm9wUGxhY2Vob2xkZXIpfSxlfSksZnVuY3Rpb24oYSxiKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwicGFja2VyeS9qcy9wYWNrZXJ5XCIsW1wiZ2V0LXNpemUvZ2V0LXNpemVcIixcIm91dGxheWVyL291dGxheWVyXCIsXCIuL3JlY3RcIixcIi4vcGFja2VyXCIsXCIuL2l0ZW1cIl0sYik6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YihyZXF1aXJlKFwiZ2V0LXNpemVcIikscmVxdWlyZShcIm91dGxheWVyXCIpLHJlcXVpcmUoXCIuL3JlY3RcIikscmVxdWlyZShcIi4vcGFja2VyXCIpLHJlcXVpcmUoXCIuL2l0ZW1cIikpOmEuUGFja2VyeT1iKGEuZ2V0U2l6ZSxhLk91dGxheWVyLGEuUGFja2VyeS5SZWN0LGEuUGFja2VyeS5QYWNrZXIsYS5QYWNrZXJ5Lkl0ZW0pfSh3aW5kb3csZnVuY3Rpb24oYSxiLGMsZCxlKXtmdW5jdGlvbiBmKGEsYil7cmV0dXJuIGEucG9zaXRpb24ueS1iLnBvc2l0aW9uLnl8fGEucG9zaXRpb24ueC1iLnBvc2l0aW9uLnh9ZnVuY3Rpb24gZyhhLGIpe3JldHVybiBhLnBvc2l0aW9uLngtYi5wb3NpdGlvbi54fHxhLnBvc2l0aW9uLnktYi5wb3NpdGlvbi55fWZ1bmN0aW9uIGgoYSxiKXt2YXIgYz1iLngtYS54LGQ9Yi55LWEueTtyZXR1cm4gTWF0aC5zcXJ0KGMqYytkKmQpfWMucHJvdG90eXBlLmNhbkZpdD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53aWR0aD49YS53aWR0aC0xJiZ0aGlzLmhlaWdodD49YS5oZWlnaHQtMX07dmFyIGk9Yi5jcmVhdGUoXCJwYWNrZXJ5XCIpO2kuSXRlbT1lO3ZhciBqPWkucHJvdG90eXBlO2ouX2NyZWF0ZT1mdW5jdGlvbigpe2IucHJvdG90eXBlLl9jcmVhdGUuY2FsbCh0aGlzKSx0aGlzLnBhY2tlcj1uZXcgZCx0aGlzLnNoaWZ0UGFja2VyPW5ldyBkLHRoaXMuaXNFbmFibGVkPSEwLHRoaXMuZHJhZ0l0ZW1Db3VudD0wO3ZhciBhPXRoaXM7dGhpcy5oYW5kbGVEcmFnZ2FiaWxseT17ZHJhZ1N0YXJ0OmZ1bmN0aW9uKCl7YS5pdGVtRHJhZ1N0YXJ0KHRoaXMuZWxlbWVudCl9LGRyYWdNb3ZlOmZ1bmN0aW9uKCl7YS5pdGVtRHJhZ01vdmUodGhpcy5lbGVtZW50LHRoaXMucG9zaXRpb24ueCx0aGlzLnBvc2l0aW9uLnkpfSxkcmFnRW5kOmZ1bmN0aW9uKCl7YS5pdGVtRHJhZ0VuZCh0aGlzLmVsZW1lbnQpfX0sdGhpcy5oYW5kbGVVSURyYWdnYWJsZT17c3RhcnQ6ZnVuY3Rpb24oYixjKXtjJiZhLml0ZW1EcmFnU3RhcnQoYi5jdXJyZW50VGFyZ2V0KX0sZHJhZzpmdW5jdGlvbihiLGMpe2MmJmEuaXRlbURyYWdNb3ZlKGIuY3VycmVudFRhcmdldCxjLnBvc2l0aW9uLmxlZnQsYy5wb3NpdGlvbi50b3ApfSxzdG9wOmZ1bmN0aW9uKGIsYyl7YyYmYS5pdGVtRHJhZ0VuZChiLmN1cnJlbnRUYXJnZXQpfX19LGouX3Jlc2V0TGF5b3V0PWZ1bmN0aW9uKCl7dGhpcy5nZXRTaXplKCksdGhpcy5fZ2V0TWVhc3VyZW1lbnRzKCk7dmFyIGEsYixjO3RoaXMuX2dldE9wdGlvbihcImhvcml6b250YWxcIik/KGE9MS8wLGI9dGhpcy5zaXplLmlubmVySGVpZ2h0K3RoaXMuZ3V0dGVyLGM9XCJyaWdodHdhcmRUb3BUb0JvdHRvbVwiKTooYT10aGlzLnNpemUuaW5uZXJXaWR0aCt0aGlzLmd1dHRlcixiPTEvMCxjPVwiZG93bndhcmRMZWZ0VG9SaWdodFwiKSx0aGlzLnBhY2tlci53aWR0aD10aGlzLnNoaWZ0UGFja2VyLndpZHRoPWEsdGhpcy5wYWNrZXIuaGVpZ2h0PXRoaXMuc2hpZnRQYWNrZXIuaGVpZ2h0PWIsdGhpcy5wYWNrZXIuc29ydERpcmVjdGlvbj10aGlzLnNoaWZ0UGFja2VyLnNvcnREaXJlY3Rpb249Yyx0aGlzLnBhY2tlci5yZXNldCgpLHRoaXMubWF4WT0wLHRoaXMubWF4WD0wfSxqLl9nZXRNZWFzdXJlbWVudHM9ZnVuY3Rpb24oKXt0aGlzLl9nZXRNZWFzdXJlbWVudChcImNvbHVtbldpZHRoXCIsXCJ3aWR0aFwiKSx0aGlzLl9nZXRNZWFzdXJlbWVudChcInJvd0hlaWdodFwiLFwiaGVpZ2h0XCIpLHRoaXMuX2dldE1lYXN1cmVtZW50KFwiZ3V0dGVyXCIsXCJ3aWR0aFwiKX0sai5fZ2V0SXRlbUxheW91dFBvc2l0aW9uPWZ1bmN0aW9uKGEpe2lmKHRoaXMuX3NldFJlY3RTaXplKGEuZWxlbWVudCxhLnJlY3QpLHRoaXMuaXNTaGlmdGluZ3x8dGhpcy5kcmFnSXRlbUNvdW50PjApe3ZhciBiPXRoaXMuX2dldFBhY2tNZXRob2QoKTt0aGlzLnBhY2tlcltiXShhLnJlY3QpfWVsc2UgdGhpcy5wYWNrZXIucGFjayhhLnJlY3QpO3JldHVybiB0aGlzLl9zZXRNYXhYWShhLnJlY3QpLGEucmVjdH0sai5zaGlmdExheW91dD1mdW5jdGlvbigpe3RoaXMuaXNTaGlmdGluZz0hMCx0aGlzLmxheW91dCgpLGRlbGV0ZSB0aGlzLmlzU2hpZnRpbmd9LGouX2dldFBhY2tNZXRob2Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0T3B0aW9uKFwiaG9yaXpvbnRhbFwiKT9cInJvd1BhY2tcIjpcImNvbHVtblBhY2tcIn0sai5fc2V0TWF4WFk9ZnVuY3Rpb24oYSl7dGhpcy5tYXhYPU1hdGgubWF4KGEueCthLndpZHRoLHRoaXMubWF4WCksdGhpcy5tYXhZPU1hdGgubWF4KGEueSthLmhlaWdodCx0aGlzLm1heFkpfSxqLl9zZXRSZWN0U2l6ZT1mdW5jdGlvbihiLGMpe3ZhciBkPWEoYiksZT1kLm91dGVyV2lkdGgsZj1kLm91dGVySGVpZ2h0OyhlfHxmKSYmKGU9dGhpcy5fYXBwbHlHcmlkR3V0dGVyKGUsdGhpcy5jb2x1bW5XaWR0aCksZj10aGlzLl9hcHBseUdyaWRHdXR0ZXIoZix0aGlzLnJvd0hlaWdodCkpLGMud2lkdGg9TWF0aC5taW4oZSx0aGlzLnBhY2tlci53aWR0aCksYy5oZWlnaHQ9TWF0aC5taW4oZix0aGlzLnBhY2tlci5oZWlnaHQpfSxqLl9hcHBseUdyaWRHdXR0ZXI9ZnVuY3Rpb24oYSxiKXtpZighYilyZXR1cm4gYSt0aGlzLmd1dHRlcjtiKz10aGlzLmd1dHRlcjt2YXIgYz1hJWIsZD1jJiYxPmM/XCJyb3VuZFwiOlwiY2VpbFwiO3JldHVybiBhPU1hdGhbZF0oYS9iKSpifSxqLl9nZXRDb250YWluZXJTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldE9wdGlvbihcImhvcml6b250YWxcIik/e3dpZHRoOnRoaXMubWF4WC10aGlzLmd1dHRlcn06e2hlaWdodDp0aGlzLm1heFktdGhpcy5ndXR0ZXJ9fSxqLl9tYW5hZ2VTdGFtcD1mdW5jdGlvbihhKXt2YXIgYixkPXRoaXMuZ2V0SXRlbShhKTtpZihkJiZkLmlzUGxhY2luZyliPWQucmVjdDtlbHNle3ZhciBlPXRoaXMuX2dldEVsZW1lbnRPZmZzZXQoYSk7Yj1uZXcgYyh7eDp0aGlzLl9nZXRPcHRpb24oXCJvcmlnaW5MZWZ0XCIpP2UubGVmdDplLnJpZ2h0LHk6dGhpcy5fZ2V0T3B0aW9uKFwib3JpZ2luVG9wXCIpP2UudG9wOmUuYm90dG9tfSl9dGhpcy5fc2V0UmVjdFNpemUoYSxiKSx0aGlzLnBhY2tlci5wbGFjZWQoYiksdGhpcy5fc2V0TWF4WFkoYil9LGouc29ydEl0ZW1zQnlQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuX2dldE9wdGlvbihcImhvcml6b250YWxcIik/ZzpmO3RoaXMuaXRlbXMuc29ydChhKX0sai5maXQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZ2V0SXRlbShhKTtkJiYodGhpcy5zdGFtcChkLmVsZW1lbnQpLGQuZW5hYmxlUGxhY2luZygpLHRoaXMudXBkYXRlU2hpZnRUYXJnZXRzKGQpLGI9dm9pZCAwPT09Yj9kLnJlY3QueDpiLGM9dm9pZCAwPT09Yz9kLnJlY3QueTpjLHRoaXMuc2hpZnQoZCxiLGMpLHRoaXMuX2JpbmRGaXRFdmVudHMoZCksZC5tb3ZlVG8oZC5yZWN0LngsZC5yZWN0LnkpLHRoaXMuc2hpZnRMYXlvdXQoKSx0aGlzLnVuc3RhbXAoZC5lbGVtZW50KSx0aGlzLnNvcnRJdGVtc0J5UG9zaXRpb24oKSxkLmRpc2FibGVQbGFjaW5nKCkpfSxqLl9iaW5kRml0RXZlbnRzPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtkKyssMj09ZCYmYy5kaXNwYXRjaEV2ZW50KFwiZml0Q29tcGxldGVcIixudWxsLFthXSl9dmFyIGM9dGhpcyxkPTA7YS5vbmNlKFwibGF5b3V0XCIsYiksdGhpcy5vbmNlKFwibGF5b3V0Q29tcGxldGVcIixiKX0sai5yZXNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzUmVzaXplQm91bmQmJnRoaXMubmVlZHNSZXNpemVMYXlvdXQoKSYmKHRoaXMub3B0aW9ucy5zaGlmdFBlcmNlbnRSZXNpemU/dGhpcy5yZXNpemVTaGlmdFBlcmNlbnRMYXlvdXQoKTp0aGlzLmxheW91dCgpKX0sai5uZWVkc1Jlc2l6ZUxheW91dD1mdW5jdGlvbigpe3ZhciBiPWEodGhpcy5lbGVtZW50KSxjPXRoaXMuX2dldE9wdGlvbihcImhvcml6b250YWxcIik/XCJpbm5lckhlaWdodFwiOlwiaW5uZXJXaWR0aFwiO3JldHVybiBiW2NdIT10aGlzLnNpemVbY119LGoucmVzaXplU2hpZnRQZXJjZW50TGF5b3V0PWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fZ2V0SXRlbXNGb3JMYXlvdXQodGhpcy5pdGVtcyksYz10aGlzLl9nZXRPcHRpb24oXCJob3Jpem9udGFsXCIpLGQ9Yz9cInlcIjpcInhcIixlPWM/XCJoZWlnaHRcIjpcIndpZHRoXCIsZj1jP1wicm93SGVpZ2h0XCI6XCJjb2x1bW5XaWR0aFwiLGc9Yz9cImlubmVySGVpZ2h0XCI6XCJpbm5lcldpZHRoXCIsaD10aGlzW2ZdO2lmKGg9aCYmaCt0aGlzLmd1dHRlcil7dGhpcy5fZ2V0TWVhc3VyZW1lbnRzKCk7dmFyIGk9dGhpc1tmXSt0aGlzLmd1dHRlcjtiLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9TWF0aC5yb3VuZChhLnJlY3RbZF0vaCk7YS5yZWN0W2RdPWIqaX0pfWVsc2V7dmFyIGo9YSh0aGlzLmVsZW1lbnQpW2ddK3RoaXMuZ3V0dGVyLGs9dGhpcy5wYWNrZXJbZV07Yi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVjdFtkXT1hLnJlY3RbZF0vaypqfSl9dGhpcy5zaGlmdExheW91dCgpfSxqLml0ZW1EcmFnU3RhcnQ9ZnVuY3Rpb24oYSl7aWYodGhpcy5pc0VuYWJsZWQpe3RoaXMuc3RhbXAoYSk7dmFyIGI9dGhpcy5nZXRJdGVtKGEpO2ImJihiLmVuYWJsZVBsYWNpbmcoKSxiLnNob3dEcm9wUGxhY2Vob2xkZXIoKSx0aGlzLmRyYWdJdGVtQ291bnQrKyx0aGlzLnVwZGF0ZVNoaWZ0VGFyZ2V0cyhiKSl9fSxqLnVwZGF0ZVNoaWZ0VGFyZ2V0cz1mdW5jdGlvbihhKXt0aGlzLnNoaWZ0UGFja2VyLnJlc2V0KCksdGhpcy5fZ2V0Qm91bmRpbmdSZWN0KCk7dmFyIGI9dGhpcy5fZ2V0T3B0aW9uKFwib3JpZ2luTGVmdFwiKSxkPXRoaXMuX2dldE9wdGlvbihcIm9yaWdpblRvcFwiKTt0aGlzLnN0YW1wcy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBlPXRoaXMuZ2V0SXRlbShhKTtpZighZXx8IWUuaXNQbGFjaW5nKXt2YXIgZj10aGlzLl9nZXRFbGVtZW50T2Zmc2V0KGEpLGc9bmV3IGMoe3g6Yj9mLmxlZnQ6Zi5yaWdodCx5OmQ/Zi50b3A6Zi5ib3R0b219KTt0aGlzLl9zZXRSZWN0U2l6ZShhLGcpLHRoaXMuc2hpZnRQYWNrZXIucGxhY2VkKGcpfX0sdGhpcyk7dmFyIGU9dGhpcy5fZ2V0T3B0aW9uKFwiaG9yaXpvbnRhbFwiKSxmPWU/XCJyb3dIZWlnaHRcIjpcImNvbHVtbldpZHRoXCIsZz1lP1wiaGVpZ2h0XCI6XCJ3aWR0aFwiO3RoaXMuc2hpZnRUYXJnZXRLZXlzPVtdLHRoaXMuc2hpZnRUYXJnZXRzPVtdO3ZhciBoLGk9dGhpc1tmXTtpZihpPWkmJmkrdGhpcy5ndXR0ZXIpe3ZhciBqPU1hdGguY2VpbChhLnJlY3RbZ10vaSksaz1NYXRoLmZsb29yKCh0aGlzLnNoaWZ0UGFja2VyW2ddK3RoaXMuZ3V0dGVyKS9pKTtoPShrLWopKmk7Zm9yKHZhciBsPTA7az5sO2wrKyl0aGlzLl9hZGRTaGlmdFRhcmdldChsKmksMCxoKX1lbHNlIGg9dGhpcy5zaGlmdFBhY2tlcltnXSt0aGlzLmd1dHRlci1hLnJlY3RbZ10sdGhpcy5fYWRkU2hpZnRUYXJnZXQoMCwwLGgpO3ZhciBtPXRoaXMuX2dldEl0ZW1zRm9yTGF5b3V0KHRoaXMuaXRlbXMpLG49dGhpcy5fZ2V0UGFja01ldGhvZCgpO20uZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLnJlY3Q7dGhpcy5fc2V0UmVjdFNpemUoYS5lbGVtZW50LGIpLHRoaXMuc2hpZnRQYWNrZXJbbl0oYiksdGhpcy5fYWRkU2hpZnRUYXJnZXQoYi54LGIueSxoKTt2YXIgYz1lP2IueCtiLndpZHRoOmIueCxkPWU/Yi55OmIueStiLmhlaWdodDtpZih0aGlzLl9hZGRTaGlmdFRhcmdldChjLGQsaCksaSlmb3IodmFyIGY9TWF0aC5yb3VuZChiW2ddL2kpLGo9MTtmPmo7aisrKXt2YXIgaz1lP2M6Yi54K2kqaixsPWU/Yi55K2kqajpkO3RoaXMuX2FkZFNoaWZ0VGFyZ2V0KGssbCxoKX19LHRoaXMpfSxqLl9hZGRTaGlmdFRhcmdldD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5fZ2V0T3B0aW9uKFwiaG9yaXpvbnRhbFwiKT9iOmE7aWYoISgwIT09ZCYmZD5jKSl7dmFyIGU9YStcIixcIitiLGY9LTEhPXRoaXMuc2hpZnRUYXJnZXRLZXlzLmluZGV4T2YoZSk7Znx8KHRoaXMuc2hpZnRUYXJnZXRLZXlzLnB1c2goZSksdGhpcy5zaGlmdFRhcmdldHMucHVzaCh7eDphLHk6Yn0pKX19LGouc2hpZnQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9MS8wLGY9e3g6Yix5OmN9O3RoaXMuc2hpZnRUYXJnZXRzLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9aChhLGYpO2U+YiYmKGQ9YSxlPWIpfSksYS5yZWN0Lng9ZC54LGEucmVjdC55PWQueX07dmFyIGs9MTIwO2ouaXRlbURyYWdNb3ZlPWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7Zi5zaGlmdChlLGIsYyksZS5wb3NpdGlvbkRyb3BQbGFjZWhvbGRlcigpLGYubGF5b3V0KCl9dmFyIGU9dGhpcy5pc0VuYWJsZWQmJnRoaXMuZ2V0SXRlbShhKTtpZihlKXtiLT10aGlzLnNpemUucGFkZGluZ0xlZnQsYy09dGhpcy5zaXplLnBhZGRpbmdUb3A7dmFyIGY9dGhpcyxnPW5ldyBEYXRlO3RoaXMuX2l0ZW1EcmFnVGltZSYmZy10aGlzLl9pdGVtRHJhZ1RpbWU8az8oY2xlYXJUaW1lb3V0KHRoaXMuZHJhZ1RpbWVvdXQpLHRoaXMuZHJhZ1RpbWVvdXQ9c2V0VGltZW91dChkLGspKTooZCgpLHRoaXMuX2l0ZW1EcmFnVGltZT1nKX19LGouaXRlbURyYWdFbmQ9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2QrKywyPT1kJiYoYy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1wb3NpdGlvbmluZy1wb3N0LWRyYWdcIiksYy5oaWRlRHJvcFBsYWNlaG9sZGVyKCksZS5kaXNwYXRjaEV2ZW50KFwiZHJhZ0l0ZW1Qb3NpdGlvbmVkXCIsbnVsbCxbY10pKX12YXIgYz10aGlzLmlzRW5hYmxlZCYmdGhpcy5nZXRJdGVtKGEpO2lmKGMpe2NsZWFyVGltZW91dCh0aGlzLmRyYWdUaW1lb3V0KSxjLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImlzLXBvc2l0aW9uaW5nLXBvc3QtZHJhZ1wiKTt2YXIgZD0wLGU9dGhpcztjLm9uY2UoXCJsYXlvdXRcIixiKSx0aGlzLm9uY2UoXCJsYXlvdXRDb21wbGV0ZVwiLGIpLGMubW92ZVRvKGMucmVjdC54LGMucmVjdC55KSx0aGlzLmxheW91dCgpLHRoaXMuZHJhZ0l0ZW1Db3VudD1NYXRoLm1heCgwLHRoaXMuZHJhZ0l0ZW1Db3VudC0xKSx0aGlzLnNvcnRJdGVtc0J5UG9zaXRpb24oKSxjLmRpc2FibGVQbGFjaW5nKCksdGhpcy51bnN0YW1wKGMuZWxlbWVudCl9fSxqLmJpbmREcmFnZ2FiaWxseUV2ZW50cz1mdW5jdGlvbihhKXt0aGlzLl9iaW5kRHJhZ2dhYmlsbHlFdmVudHMoYSxcIm9uXCIpfSxqLnVuYmluZERyYWdnYWJpbGx5RXZlbnRzPWZ1bmN0aW9uKGEpe3RoaXMuX2JpbmREcmFnZ2FiaWxseUV2ZW50cyhhLFwib2ZmXCIpfSxqLl9iaW5kRHJhZ2dhYmlsbHlFdmVudHM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmhhbmRsZURyYWdnYWJpbGx5O2FbYl0oXCJkcmFnU3RhcnRcIixjLmRyYWdTdGFydCksYVtiXShcImRyYWdNb3ZlXCIsYy5kcmFnTW92ZSksYVtiXShcImRyYWdFbmRcIixjLmRyYWdFbmQpfSxqLmJpbmRVSURyYWdnYWJsZUV2ZW50cz1mdW5jdGlvbihhKXt0aGlzLl9iaW5kVUlEcmFnZ2FibGVFdmVudHMoYSxcIm9uXCIpfSxqLnVuYmluZFVJRHJhZ2dhYmxlRXZlbnRzPWZ1bmN0aW9uKGEpe3RoaXMuX2JpbmRVSURyYWdnYWJsZUV2ZW50cyhhLFwib2ZmXCIpfSxqLl9iaW5kVUlEcmFnZ2FibGVFdmVudHM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmhhbmRsZVVJRHJhZ2dhYmxlO2FbYl0oXCJkcmFnc3RhcnRcIixjLnN0YXJ0KVtiXShcImRyYWdcIixjLmRyYWcpW2JdKFwiZHJhZ3N0b3BcIixjLnN0b3ApfTt2YXIgbD1qLmRlc3Ryb3k7cmV0dXJuIGouZGVzdHJveT1mdW5jdGlvbigpe2wuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuaXNFbmFibGVkPSExfSxpLlJlY3Q9YyxpLlBhY2tlcj1kLGl9KSxmdW5jdGlvbihhLGIpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wiaXNvdG9wZS1sYXlvdXQvanMvbGF5b3V0LW1vZGVcIixcInBhY2tlcnkvanMvcGFja2VyeVwiXSxiKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iKHJlcXVpcmUoXCJpc290b3BlLWxheW91dC9qcy9sYXlvdXQtbW9kZVwiKSxyZXF1aXJlKFwicGFja2VyeVwiKSk6YihhLklzb3RvcGUuTGF5b3V0TW9kZSxhLlBhY2tlcnkpfSh3aW5kb3csZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNyZWF0ZShcInBhY2tlcnlcIiksZD1jLnByb3RvdHlwZSxlPXtfZ2V0RWxlbWVudE9mZnNldDohMCxfZ2V0TWVhc3VyZW1lbnQ6ITB9O2Zvcih2YXIgZiBpbiBiLnByb3RvdHlwZSllW2ZdfHwoZFtmXT1iLnByb3RvdHlwZVtmXSk7dmFyIGc9ZC5fcmVzZXRMYXlvdXQ7ZC5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLnBhY2tlcj10aGlzLnBhY2tlcnx8bmV3IGIuUGFja2VyLHRoaXMuc2hpZnRQYWNrZXI9dGhpcy5zaGlmdFBhY2tlcnx8bmV3IGIuUGFja2VyLGcuYXBwbHkodGhpcyxhcmd1bWVudHMpfTt2YXIgaD1kLl9nZXRJdGVtTGF5b3V0UG9zaXRpb247ZC5fZ2V0SXRlbUxheW91dFBvc2l0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiBhLnJlY3Q9YS5yZWN0fHxuZXcgYi5SZWN0LGguY2FsbCh0aGlzLGEpfTt2YXIgaT1kLm5lZWRzUmVzaXplTGF5b3V0O2QubmVlZHNSZXNpemVMYXlvdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0T3B0aW9uKFwiaG9yaXpvbnRhbFwiKT90aGlzLm5lZWRzVmVydGljYWxSZXNpemVMYXlvdXQoKTppLmNhbGwodGhpcyl9O3ZhciBqPWQuX2dldE9wdGlvbjtyZXR1cm4gZC5fZ2V0T3B0aW9uPWZ1bmN0aW9uKGEpe3JldHVyblwiaG9yaXpvbnRhbFwiPT1hP3ZvaWQgMCE9PXRoaXMub3B0aW9ucy5pc0hvcml6b250YWw/dGhpcy5vcHRpb25zLmlzSG9yaXpvbnRhbDp0aGlzLm9wdGlvbnMuaG9yaXpvbnRhbDpqLmFwcGx5KHRoaXMuaXNvdG9wZSxhcmd1bWVudHMpfSxjfSk7XG4iLCIvKiEgcGljdHVyZWZpbGwgLSB2My4wLjIgLSAyMDE2LTAyLTEyXHJcbiAqIGh0dHBzOi8vc2NvdHRqZWhsLmdpdGh1Yi5pby9waWN0dXJlZmlsbC9cclxuICogQ29weXJpZ2h0IChjKSAyMDE2IGh0dHBzOi8vZ2l0aHViLmNvbS9zY290dGplaGwvcGljdHVyZWZpbGwvYmxvYi9tYXN0ZXIvQXV0aG9ycy50eHQ7IExpY2Vuc2VkIE1JVFxyXG4gKi9cclxuIWZ1bmN0aW9uKGEpe3ZhciBiPW5hdmlnYXRvci51c2VyQWdlbnQ7YS5IVE1MUGljdHVyZUVsZW1lbnQmJi9lY2tvLy50ZXN0KGIpJiZiLm1hdGNoKC9ydlxcOihcXGQrKS8pJiZSZWdFeHAuJDE8NDUmJmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIixmdW5jdGlvbigpe3ZhciBiLGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNvdXJjZVwiKSxkPWZ1bmN0aW9uKGEpe3ZhciBiLGQsZT1hLnBhcmVudE5vZGU7XCJQSUNUVVJFXCI9PT1lLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk/KGI9Yy5jbG9uZU5vZGUoKSxlLmluc2VydEJlZm9yZShiLGUuZmlyc3RFbGVtZW50Q2hpbGQpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLnJlbW92ZUNoaWxkKGIpfSkpOighYS5fcGZMYXN0U2l6ZXx8YS5vZmZzZXRXaWR0aD5hLl9wZkxhc3RTaXplKSYmKGEuX3BmTGFzdFNpemU9YS5vZmZzZXRXaWR0aCxkPWEuc2l6ZXMsYS5zaXplcys9XCIsMTAwdndcIixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5zaXplcz1kfSkpfSxlPWZ1bmN0aW9uKCl7dmFyIGEsYj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwicGljdHVyZSA+IGltZywgaW1nW3NyY3NldF1bc2l6ZXNdXCIpO2ZvcihhPTA7YTxiLmxlbmd0aDthKyspZChiW2FdKX0sZj1mdW5jdGlvbigpe2NsZWFyVGltZW91dChiKSxiPXNldFRpbWVvdXQoZSw5OSl9LGc9YS5tYXRjaE1lZGlhJiZtYXRjaE1lZGlhKFwiKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpXCIpLGg9ZnVuY3Rpb24oKXtmKCksZyYmZy5hZGRMaXN0ZW5lciYmZy5hZGRMaXN0ZW5lcihmKX07cmV0dXJuIGMuc3Jjc2V0PVwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFBQUFBQ0g1QkFFS0FBRUFMQUFBQUFBQkFBRUFBQUlDVEFFQU93PT1cIiwvXltjfGldfGQkLy50ZXN0KGRvY3VtZW50LnJlYWR5U3RhdGV8fFwiXCIpP2goKTpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLGgpLGZ9KCkpfSh3aW5kb3cpLGZ1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEpe3JldHVyblwiIFwiPT09YXx8XCJcdFwiPT09YXx8XCJcXG5cIj09PWF8fFwiXFxmXCI9PT1hfHxcIlxcclwiPT09YX1mdW5jdGlvbiBlKGIsYyl7dmFyIGQ9bmV3IGEuSW1hZ2U7cmV0dXJuIGQub25lcnJvcj1mdW5jdGlvbigpe0FbYl09ITEsYmEoKX0sZC5vbmxvYWQ9ZnVuY3Rpb24oKXtBW2JdPTE9PT1kLndpZHRoLGJhKCl9LGQuc3JjPWMsXCJwZW5kaW5nXCJ9ZnVuY3Rpb24gZigpe009ITEsUD1hLmRldmljZVBpeGVsUmF0aW8sTj17fSxPPXt9LHMuRFBSPVB8fDEsUS53aWR0aD1NYXRoLm1heChhLmlubmVyV2lkdGh8fDAsei5jbGllbnRXaWR0aCksUS5oZWlnaHQ9TWF0aC5tYXgoYS5pbm5lckhlaWdodHx8MCx6LmNsaWVudEhlaWdodCksUS52dz1RLndpZHRoLzEwMCxRLnZoPVEuaGVpZ2h0LzEwMCxyPVtRLmhlaWdodCxRLndpZHRoLFBdLmpvaW4oXCItXCIpLFEuZW09cy5nZXRFbVZhbHVlKCksUS5yZW09US5lbX1mdW5jdGlvbiBnKGEsYixjLGQpe3ZhciBlLGYsZyxoO3JldHVyblwic2F2ZURhdGFcIj09PUIuYWxnb3JpdGhtP2E+Mi43P2g9YysxOihmPWItYyxlPU1hdGgucG93KGEtLjYsMS41KSxnPWYqZSxkJiYoZys9LjEqZSksaD1hK2cpOmg9Yz4xP01hdGguc3FydChhKmIpOmEsaD5jfWZ1bmN0aW9uIGgoYSl7dmFyIGIsYz1zLmdldFNldChhKSxkPSExO1wicGVuZGluZ1wiIT09YyYmKGQ9cixjJiYoYj1zLnNldFJlcyhjKSxzLmFwcGx5U2V0Q2FuZGlkYXRlKGIsYSkpKSxhW3MubnNdLmV2YWxlZD1kfWZ1bmN0aW9uIGkoYSxiKXtyZXR1cm4gYS5yZXMtYi5yZXN9ZnVuY3Rpb24gaihhLGIsYyl7dmFyIGQ7cmV0dXJuIWMmJmImJihjPWFbcy5uc10uc2V0cyxjPWMmJmNbYy5sZW5ndGgtMV0pLGQ9ayhiLGMpLGQmJihiPXMubWFrZVVybChiKSxhW3MubnNdLmN1clNyYz1iLGFbcy5uc10uY3VyQ2FuPWQsZC5yZXN8fGFhKGQsZC5zZXQuc2l6ZXMpKSxkfWZ1bmN0aW9uIGsoYSxiKXt2YXIgYyxkLGU7aWYoYSYmYilmb3IoZT1zLnBhcnNlU2V0KGIpLGE9cy5tYWtlVXJsKGEpLGM9MDtjPGUubGVuZ3RoO2MrKylpZihhPT09cy5tYWtlVXJsKGVbY10udXJsKSl7ZD1lW2NdO2JyZWFrfXJldHVybiBkfWZ1bmN0aW9uIGwoYSxiKXt2YXIgYyxkLGUsZixnPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzb3VyY2VcIik7Zm9yKGM9MCxkPWcubGVuZ3RoO2Q+YztjKyspZT1nW2NdLGVbcy5uc109ITAsZj1lLmdldEF0dHJpYnV0ZShcInNyY3NldFwiKSxmJiZiLnB1c2goe3NyY3NldDpmLG1lZGlhOmUuZ2V0QXR0cmlidXRlKFwibWVkaWFcIiksdHlwZTplLmdldEF0dHJpYnV0ZShcInR5cGVcIiksc2l6ZXM6ZS5nZXRBdHRyaWJ1dGUoXCJzaXplc1wiKX0pfWZ1bmN0aW9uIG0oYSxiKXtmdW5jdGlvbiBjKGIpe3ZhciBjLGQ9Yi5leGVjKGEuc3Vic3RyaW5nKG0pKTtyZXR1cm4gZD8oYz1kWzBdLG0rPWMubGVuZ3RoLGMpOnZvaWQgMH1mdW5jdGlvbiBlKCl7dmFyIGEsYyxkLGUsZixpLGosayxsLG09ITEsbz17fTtmb3IoZT0wO2U8aC5sZW5ndGg7ZSsrKWY9aFtlXSxpPWZbZi5sZW5ndGgtMV0saj1mLnN1YnN0cmluZygwLGYubGVuZ3RoLTEpLGs9cGFyc2VJbnQoaiwxMCksbD1wYXJzZUZsb2F0KGopLFgudGVzdChqKSYmXCJ3XCI9PT1pPygoYXx8YykmJihtPSEwKSwwPT09az9tPSEwOmE9ayk6WS50ZXN0KGopJiZcInhcIj09PWk/KChhfHxjfHxkKSYmKG09ITApLDA+bD9tPSEwOmM9bCk6WC50ZXN0KGopJiZcImhcIj09PWk/KChkfHxjKSYmKG09ITApLDA9PT1rP209ITA6ZD1rKTptPSEwO218fChvLnVybD1nLGEmJihvLnc9YSksYyYmKG8uZD1jKSxkJiYoby5oPWQpLGR8fGN8fGF8fChvLmQ9MSksMT09PW8uZCYmKGIuaGFzMXg9ITApLG8uc2V0PWIsbi5wdXNoKG8pKX1mdW5jdGlvbiBmKCl7Zm9yKGMoVCksaT1cIlwiLGo9XCJpbiBkZXNjcmlwdG9yXCI7Oyl7aWYoaz1hLmNoYXJBdChtKSxcImluIGRlc2NyaXB0b3JcIj09PWopaWYoZChrKSlpJiYoaC5wdXNoKGkpLGk9XCJcIixqPVwiYWZ0ZXIgZGVzY3JpcHRvclwiKTtlbHNle2lmKFwiLFwiPT09aylyZXR1cm4gbSs9MSxpJiZoLnB1c2goaSksdm9pZCBlKCk7aWYoXCIoXCI9PT1rKWkrPWssaj1cImluIHBhcmVuc1wiO2Vsc2V7aWYoXCJcIj09PWspcmV0dXJuIGkmJmgucHVzaChpKSx2b2lkIGUoKTtpKz1rfX1lbHNlIGlmKFwiaW4gcGFyZW5zXCI9PT1qKWlmKFwiKVwiPT09aylpKz1rLGo9XCJpbiBkZXNjcmlwdG9yXCI7ZWxzZXtpZihcIlwiPT09aylyZXR1cm4gaC5wdXNoKGkpLHZvaWQgZSgpO2krPWt9ZWxzZSBpZihcImFmdGVyIGRlc2NyaXB0b3JcIj09PWopaWYoZChrKSk7ZWxzZXtpZihcIlwiPT09aylyZXR1cm4gdm9pZCBlKCk7aj1cImluIGRlc2NyaXB0b3JcIixtLT0xfW0rPTF9fWZvcih2YXIgZyxoLGksaixrLGw9YS5sZW5ndGgsbT0wLG49W107Oyl7aWYoYyhVKSxtPj1sKXJldHVybiBuO2c9YyhWKSxoPVtdLFwiLFwiPT09Zy5zbGljZSgtMSk/KGc9Zy5yZXBsYWNlKFcsXCJcIiksZSgpKTpmKCl9fWZ1bmN0aW9uIG4oYSl7ZnVuY3Rpb24gYihhKXtmdW5jdGlvbiBiKCl7ZiYmKGcucHVzaChmKSxmPVwiXCIpfWZ1bmN0aW9uIGMoKXtnWzBdJiYoaC5wdXNoKGcpLGc9W10pfWZvcih2YXIgZSxmPVwiXCIsZz1bXSxoPVtdLGk9MCxqPTAsaz0hMTs7KXtpZihlPWEuY2hhckF0KGopLFwiXCI9PT1lKXJldHVybiBiKCksYygpLGg7aWYoayl7aWYoXCIqXCI9PT1lJiZcIi9cIj09PWFbaisxXSl7az0hMSxqKz0yLGIoKTtjb250aW51ZX1qKz0xfWVsc2V7aWYoZChlKSl7aWYoYS5jaGFyQXQoai0xKSYmZChhLmNoYXJBdChqLTEpKXx8IWYpe2orPTE7Y29udGludWV9aWYoMD09PWkpe2IoKSxqKz0xO2NvbnRpbnVlfWU9XCIgXCJ9ZWxzZSBpZihcIihcIj09PWUpaSs9MTtlbHNlIGlmKFwiKVwiPT09ZSlpLT0xO2Vsc2V7aWYoXCIsXCI9PT1lKXtiKCksYygpLGorPTE7Y29udGludWV9aWYoXCIvXCI9PT1lJiZcIipcIj09PWEuY2hhckF0KGorMSkpe2s9ITAsais9Mjtjb250aW51ZX19Zis9ZSxqKz0xfX19ZnVuY3Rpb24gYyhhKXtyZXR1cm4gay50ZXN0KGEpJiZwYXJzZUZsb2F0KGEpPj0wPyEwOmwudGVzdChhKT8hMDpcIjBcIj09PWF8fFwiLTBcIj09PWF8fFwiKzBcIj09PWE/ITA6ITF9dmFyIGUsZixnLGgsaSxqLGs9L14oPzpbKy1dP1swLTldK3xbMC05XSpcXC5bMC05XSspKD86W2VFXVsrLV0/WzAtOV0rKT8oPzpjaHxjbXxlbXxleHxpbnxtbXxwY3xwdHxweHxyZW18dmh8dm1pbnx2bWF4fHZ3KSQvaSxsPS9eY2FsY1xcKCg/OlswLTlhLXogXFwuXFwrXFwtXFwqXFwvXFwoXFwpXSspXFwpJC9pO2ZvcihmPWIoYSksZz1mLmxlbmd0aCxlPTA7Zz5lO2UrKylpZihoPWZbZV0saT1oW2gubGVuZ3RoLTFdLGMoaSkpe2lmKGo9aSxoLnBvcCgpLDA9PT1oLmxlbmd0aClyZXR1cm4gajtpZihoPWguam9pbihcIiBcIikscy5tYXRjaGVzTWVkaWEoaCkpcmV0dXJuIGp9cmV0dXJuXCIxMDB2d1wifWIuY3JlYXRlRWxlbWVudChcInBpY3R1cmVcIik7dmFyIG8scCxxLHIscz17fSx0PSExLHU9ZnVuY3Rpb24oKXt9LHY9Yi5jcmVhdGVFbGVtZW50KFwiaW1nXCIpLHc9di5nZXRBdHRyaWJ1dGUseD12LnNldEF0dHJpYnV0ZSx5PXYucmVtb3ZlQXR0cmlidXRlLHo9Yi5kb2N1bWVudEVsZW1lbnQsQT17fSxCPXthbGdvcml0aG06XCJcIn0sQz1cImRhdGEtcGZzcmNcIixEPUMrXCJzZXRcIixFPW5hdmlnYXRvci51c2VyQWdlbnQsRj0vcmlkZW50Ly50ZXN0KEUpfHwvZWNrby8udGVzdChFKSYmRS5tYXRjaCgvcnZcXDooXFxkKykvKSYmUmVnRXhwLiQxPjM1LEc9XCJjdXJyZW50U3JjXCIsSD0vXFxzK1xcKz9cXGQrKGVcXGQrKT93LyxJPS8oXFwoW14pXStcXCkpP1xccyooLispLyxKPWEucGljdHVyZWZpbGxDRkcsSz1cInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt2aXNpYmlsaXR5OmhpZGRlbjtkaXNwbGF5OmJsb2NrO3BhZGRpbmc6MDtib3JkZXI6bm9uZTtmb250LXNpemU6MWVtO3dpZHRoOjFlbTtvdmVyZmxvdzpoaWRkZW47Y2xpcDpyZWN0KDBweCwgMHB4LCAwcHgsIDBweClcIixMPVwiZm9udC1zaXplOjEwMCUhaW1wb3J0YW50O1wiLE09ITAsTj17fSxPPXt9LFA9YS5kZXZpY2VQaXhlbFJhdGlvLFE9e3B4OjEsXCJpblwiOjk2fSxSPWIuY3JlYXRlRWxlbWVudChcImFcIiksUz0hMSxUPS9eWyBcXHRcXG5cXHJcXHUwMDBjXSsvLFU9L15bLCBcXHRcXG5cXHJcXHUwMDBjXSsvLFY9L15bXiBcXHRcXG5cXHJcXHUwMDBjXSsvLFc9L1ssXSskLyxYPS9eXFxkKyQvLFk9L14tPyg/OlswLTldK3xbMC05XSpcXC5bMC05XSspKD86W2VFXVsrLV0/WzAtOV0rKT8kLyxaPWZ1bmN0aW9uKGEsYixjLGQpe2EuYWRkRXZlbnRMaXN0ZW5lcj9hLmFkZEV2ZW50TGlzdGVuZXIoYixjLGR8fCExKTphLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KFwib25cIitiLGMpfSwkPWZ1bmN0aW9uKGEpe3ZhciBiPXt9O3JldHVybiBmdW5jdGlvbihjKXtyZXR1cm4gYyBpbiBifHwoYltjXT1hKGMpKSxiW2NdfX0sXz1mdW5jdGlvbigpe3ZhciBhPS9eKFtcXGRcXC5dKykoZW18dnd8cHgpJC8sYj1mdW5jdGlvbigpe2Zvcih2YXIgYT1hcmd1bWVudHMsYj0wLGM9YVswXTsrK2IgaW4gYTspYz1jLnJlcGxhY2UoYVtiXSxhWysrYl0pO3JldHVybiBjfSxjPSQoZnVuY3Rpb24oYSl7cmV0dXJuXCJyZXR1cm4gXCIrYigoYXx8XCJcIikudG9Mb3dlckNhc2UoKSwvXFxiYW5kXFxiL2csXCImJlwiLC8sL2csXCJ8fFwiLC9taW4tKFthLXotXFxzXSspOi9nLFwiZS4kMT49XCIsL21heC0oW2Etei1cXHNdKyk6L2csXCJlLiQxPD1cIiwvY2FsYyhbXildKykvZyxcIigkMSlcIiwvKFxcZCtbXFwuXSpbXFxkXSopKFthLXpdKykvZyxcIigkMSAqIGUuJDIpXCIsL14oPyEoZS5bYS16XXxbMC05XFwuJj18PjxcXCtcXC1cXCpcXChcXClcXC9dKSkuKi9naSxcIlwiKStcIjtcIn0pO3JldHVybiBmdW5jdGlvbihiLGQpe3ZhciBlO2lmKCEoYiBpbiBOKSlpZihOW2JdPSExLGQmJihlPWIubWF0Y2goYSkpKU5bYl09ZVsxXSpRW2VbMl1dO2Vsc2UgdHJ5e05bYl09bmV3IEZ1bmN0aW9uKFwiZVwiLGMoYikpKFEpfWNhdGNoKGYpe31yZXR1cm4gTltiXX19KCksYWE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS53PyhhLmNXaWR0aD1zLmNhbGNMaXN0TGVuZ3RoKGJ8fFwiMTAwdndcIiksYS5yZXM9YS53L2EuY1dpZHRoKTphLnJlcz1hLmQsYX0sYmE9ZnVuY3Rpb24oYSl7aWYodCl7dmFyIGMsZCxlLGY9YXx8e307aWYoZi5lbGVtZW50cyYmMT09PWYuZWxlbWVudHMubm9kZVR5cGUmJihcIklNR1wiPT09Zi5lbGVtZW50cy5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpP2YuZWxlbWVudHM9W2YuZWxlbWVudHNdOihmLmNvbnRleHQ9Zi5lbGVtZW50cyxmLmVsZW1lbnRzPW51bGwpKSxjPWYuZWxlbWVudHN8fHMucXNhKGYuY29udGV4dHx8YixmLnJlZXZhbHVhdGV8fGYucmVzZWxlY3Q/cy5zZWw6cy5zZWxTaG9ydCksZT1jLmxlbmd0aCl7Zm9yKHMuc2V0dXBSdW4oZiksUz0hMCxkPTA7ZT5kO2QrKylzLmZpbGxJbWcoY1tkXSxmKTtzLnRlYXJkb3duUnVuKGYpfX19O289YS5jb25zb2xlJiZjb25zb2xlLndhcm4/ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKGEpfTp1LEcgaW4gdnx8KEc9XCJzcmNcIiksQVtcImltYWdlL2pwZWdcIl09ITAsQVtcImltYWdlL2dpZlwiXT0hMCxBW1wiaW1hZ2UvcG5nXCJdPSEwLEFbXCJpbWFnZS9zdmcreG1sXCJdPWIuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZShcImh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjSW1hZ2VcIixcIjEuMVwiKSxzLm5zPShcInBmXCIrKG5ldyBEYXRlKS5nZXRUaW1lKCkpLnN1YnN0cigwLDkpLHMuc3VwU3Jjc2V0PVwic3Jjc2V0XCJpbiB2LHMuc3VwU2l6ZXM9XCJzaXplc1wiaW4gdixzLnN1cFBpY3R1cmU9ISFhLkhUTUxQaWN0dXJlRWxlbWVudCxzLnN1cFNyY3NldCYmcy5zdXBQaWN0dXJlJiYhcy5zdXBTaXplcyYmIWZ1bmN0aW9uKGEpe3Yuc3Jjc2V0PVwiZGF0YTosYVwiLGEuc3JjPVwiZGF0YTosYVwiLHMuc3VwU3Jjc2V0PXYuY29tcGxldGU9PT1hLmNvbXBsZXRlLHMuc3VwUGljdHVyZT1zLnN1cFNyY3NldCYmcy5zdXBQaWN0dXJlfShiLmNyZWF0ZUVsZW1lbnQoXCJpbWdcIikpLHMuc3VwU3Jjc2V0JiYhcy5zdXBTaXplcz8hZnVuY3Rpb24oKXt2YXIgYT1cImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFnQUJBUEFBQVAvLy93QUFBQ0g1QkFBQUFBQUFMQUFBQUFBQ0FBRUFBQUlDQkFvQU93PT1cIixjPVwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFBQUFBQ0g1QkFFS0FBRUFMQUFBQUFBQkFBRUFBQUlDVEFFQU93PT1cIixkPWIuY3JlYXRlRWxlbWVudChcImltZ1wiKSxlPWZ1bmN0aW9uKCl7dmFyIGE9ZC53aWR0aDsyPT09YSYmKHMuc3VwU2l6ZXM9ITApLHE9cy5zdXBTcmNzZXQmJiFzLnN1cFNpemVzLHQ9ITAsc2V0VGltZW91dChiYSl9O2Qub25sb2FkPWUsZC5vbmVycm9yPWUsZC5zZXRBdHRyaWJ1dGUoXCJzaXplc1wiLFwiOXB4XCIpLGQuc3Jjc2V0PWMrXCIgMXcsXCIrYStcIiA5d1wiLGQuc3JjPWN9KCk6dD0hMCxzLnNlbFNob3J0PVwicGljdHVyZT5pbWcsaW1nW3NyY3NldF1cIixzLnNlbD1zLnNlbFNob3J0LHMuY2ZnPUIscy5EUFI9UHx8MSxzLnU9USxzLnR5cGVzPUEscy5zZXRTaXplPXUscy5tYWtlVXJsPSQoZnVuY3Rpb24oYSl7cmV0dXJuIFIuaHJlZj1hLFIuaHJlZn0pLHMucXNhPWZ1bmN0aW9uKGEsYil7cmV0dXJuXCJxdWVyeVNlbGVjdG9yXCJpbiBhP2EucXVlcnlTZWxlY3RvckFsbChiKTpbXX0scy5tYXRjaGVzTWVkaWE9ZnVuY3Rpb24oKXtyZXR1cm4gYS5tYXRjaE1lZGlhJiYobWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDAuMWVtKVwiKXx8e30pLm1hdGNoZXM/cy5tYXRjaGVzTWVkaWE9ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fG1hdGNoTWVkaWEoYSkubWF0Y2hlc306cy5tYXRjaGVzTWVkaWE9cy5tTVEscy5tYXRjaGVzTWVkaWEuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzLm1NUT1mdW5jdGlvbihhKXtyZXR1cm4gYT9fKGEpOiEwfSxzLmNhbGNMZW5ndGg9ZnVuY3Rpb24oYSl7dmFyIGI9XyhhLCEwKXx8ITE7cmV0dXJuIDA+YiYmKGI9ITEpLGJ9LHMuc3VwcG9ydHNUeXBlPWZ1bmN0aW9uKGEpe3JldHVybiBhP0FbYV06ITB9LHMucGFyc2VTaXplPSQoZnVuY3Rpb24oYSl7dmFyIGI9KGF8fFwiXCIpLm1hdGNoKEkpO3JldHVybnttZWRpYTpiJiZiWzFdLGxlbmd0aDpiJiZiWzJdfX0pLHMucGFyc2VTZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2FuZHN8fChhLmNhbmRzPW0oYS5zcmNzZXQsYSkpLGEuY2FuZHN9LHMuZ2V0RW1WYWx1ZT1mdW5jdGlvbigpe3ZhciBhO2lmKCFwJiYoYT1iLmJvZHkpKXt2YXIgYz1iLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZD16LnN0eWxlLmNzc1RleHQsZT1hLnN0eWxlLmNzc1RleHQ7Yy5zdHlsZS5jc3NUZXh0PUssei5zdHlsZS5jc3NUZXh0PUwsYS5zdHlsZS5jc3NUZXh0PUwsYS5hcHBlbmRDaGlsZChjKSxwPWMub2Zmc2V0V2lkdGgsYS5yZW1vdmVDaGlsZChjKSxwPXBhcnNlRmxvYXQocCwxMCksei5zdHlsZS5jc3NUZXh0PWQsYS5zdHlsZS5jc3NUZXh0PWV9cmV0dXJuIHB8fDE2fSxzLmNhbGNMaXN0TGVuZ3RoPWZ1bmN0aW9uKGEpe2lmKCEoYSBpbiBPKXx8Qi51VCl7dmFyIGI9cy5jYWxjTGVuZ3RoKG4oYSkpO09bYV09Yj9iOlEud2lkdGh9cmV0dXJuIE9bYV19LHMuc2V0UmVzPWZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpe2I9cy5wYXJzZVNldChhKTtmb3IodmFyIGM9MCxkPWIubGVuZ3RoO2Q+YztjKyspYWEoYltjXSxhLnNpemVzKX1yZXR1cm4gYn0scy5zZXRSZXMucmVzPWFhLHMuYXBwbHlTZXRDYW5kaWRhdGU9ZnVuY3Rpb24oYSxiKXtpZihhLmxlbmd0aCl7dmFyIGMsZCxlLGYsaCxrLGwsbSxuLG89YltzLm5zXSxwPXMuRFBSO2lmKGs9by5jdXJTcmN8fGJbR10sbD1vLmN1ckNhbnx8aihiLGssYVswXS5zZXQpLGwmJmwuc2V0PT09YVswXS5zZXQmJihuPUYmJiFiLmNvbXBsZXRlJiZsLnJlcy0uMT5wLG58fChsLmNhY2hlZD0hMCxsLnJlcz49cCYmKGg9bCkpKSwhaClmb3IoYS5zb3J0KGkpLGY9YS5sZW5ndGgsaD1hW2YtMV0sZD0wO2Y+ZDtkKyspaWYoYz1hW2RdLGMucmVzPj1wKXtlPWQtMSxoPWFbZV0mJihufHxrIT09cy5tYWtlVXJsKGMudXJsKSkmJmcoYVtlXS5yZXMsYy5yZXMscCxhW2VdLmNhY2hlZCk/YVtlXTpjO2JyZWFrfWgmJihtPXMubWFrZVVybChoLnVybCksby5jdXJTcmM9bSxvLmN1ckNhbj1oLG0hPT1rJiZzLnNldFNyYyhiLGgpLHMuc2V0U2l6ZShiKSl9fSxzLnNldFNyYz1mdW5jdGlvbihhLGIpe3ZhciBjO2Euc3JjPWIudXJsLFwiaW1hZ2Uvc3ZnK3htbFwiPT09Yi5zZXQudHlwZSYmKGM9YS5zdHlsZS53aWR0aCxhLnN0eWxlLndpZHRoPWEub2Zmc2V0V2lkdGgrMStcInB4XCIsYS5vZmZzZXRXaWR0aCsxJiYoYS5zdHlsZS53aWR0aD1jKSl9LHMuZ2V0U2V0PWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPSExLGY9YVtzLm5zXS5zZXRzO2ZvcihiPTA7YjxmLmxlbmd0aCYmIWU7YisrKWlmKGM9ZltiXSxjLnNyY3NldCYmcy5tYXRjaGVzTWVkaWEoYy5tZWRpYSkmJihkPXMuc3VwcG9ydHNUeXBlKGMudHlwZSkpKXtcInBlbmRpbmdcIj09PWQmJihjPWQpLGU9YzticmVha31yZXR1cm4gZX0scy5wYXJzZVNldHM9ZnVuY3Rpb24oYSxiLGQpe3ZhciBlLGYsZyxoLGk9YiYmXCJQSUNUVVJFXCI9PT1iLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCksaj1hW3MubnNdOyhqLnNyYz09PWN8fGQuc3JjKSYmKGouc3JjPXcuY2FsbChhLFwic3JjXCIpLGouc3JjP3guY2FsbChhLEMsai5zcmMpOnkuY2FsbChhLEMpKSwoai5zcmNzZXQ9PT1jfHxkLnNyY3NldHx8IXMuc3VwU3Jjc2V0fHxhLnNyY3NldCkmJihlPXcuY2FsbChhLFwic3Jjc2V0XCIpLGouc3Jjc2V0PWUsaD0hMCksai5zZXRzPVtdLGkmJihqLnBpYz0hMCxsKGIsai5zZXRzKSksai5zcmNzZXQ/KGY9e3NyY3NldDpqLnNyY3NldCxzaXplczp3LmNhbGwoYSxcInNpemVzXCIpfSxqLnNldHMucHVzaChmKSxnPShxfHxqLnNyYykmJkgudGVzdChqLnNyY3NldHx8XCJcIiksZ3x8IWouc3JjfHxrKGouc3JjLGYpfHxmLmhhczF4fHwoZi5zcmNzZXQrPVwiLCBcIitqLnNyYyxmLmNhbmRzLnB1c2goe3VybDpqLnNyYyxkOjEsc2V0OmZ9KSkpOmouc3JjJiZqLnNldHMucHVzaCh7c3Jjc2V0Omouc3JjLHNpemVzOm51bGx9KSxqLmN1ckNhbj1udWxsLGouY3VyU3JjPWMsai5zdXBwb3J0ZWQ9IShpfHxmJiYhcy5zdXBTcmNzZXR8fGcmJiFzLnN1cFNpemVzKSxoJiZzLnN1cFNyY3NldCYmIWouc3VwcG9ydGVkJiYoZT8oeC5jYWxsKGEsRCxlKSxhLnNyY3NldD1cIlwiKTp5LmNhbGwoYSxEKSksai5zdXBwb3J0ZWQmJiFqLnNyY3NldCYmKCFqLnNyYyYmYS5zcmN8fGEuc3JjIT09cy5tYWtlVXJsKGouc3JjKSkmJihudWxsPT09ai5zcmM/YS5yZW1vdmVBdHRyaWJ1dGUoXCJzcmNcIik6YS5zcmM9ai5zcmMpLGoucGFyc2VkPSEwfSxzLmZpbGxJbWc9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPWIucmVzZWxlY3R8fGIucmVldmFsdWF0ZTthW3MubnNdfHwoYVtzLm5zXT17fSksYz1hW3MubnNdLChkfHxjLmV2YWxlZCE9PXIpJiYoKCFjLnBhcnNlZHx8Yi5yZWV2YWx1YXRlKSYmcy5wYXJzZVNldHMoYSxhLnBhcmVudE5vZGUsYiksYy5zdXBwb3J0ZWQ/Yy5ldmFsZWQ9cjpoKGEpKX0scy5zZXR1cFJ1bj1mdW5jdGlvbigpeyghU3x8TXx8UCE9PWEuZGV2aWNlUGl4ZWxSYXRpbykmJmYoKX0scy5zdXBQaWN0dXJlPyhiYT11LHMuZmlsbEltZz11KTohZnVuY3Rpb24oKXt2YXIgYyxkPWEuYXR0YWNoRXZlbnQ/L2QkfF5jLzovZCR8XmN8XmkvLGU9ZnVuY3Rpb24oKXt2YXIgYT1iLnJlYWR5U3RhdGV8fFwiXCI7Zj1zZXRUaW1lb3V0KGUsXCJsb2FkaW5nXCI9PT1hPzIwMDo5OTkpLGIuYm9keSYmKHMuZmlsbEltZ3MoKSxjPWN8fGQudGVzdChhKSxjJiZjbGVhclRpbWVvdXQoZikpfSxmPXNldFRpbWVvdXQoZSxiLmJvZHk/OTo5OSksZz1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1mdW5jdGlvbigpe3ZhciBmPW5ldyBEYXRlLWQ7Yj5mP2M9c2V0VGltZW91dChlLGItZik6KGM9bnVsbCxhKCkpfTtyZXR1cm4gZnVuY3Rpb24oKXtkPW5ldyBEYXRlLGN8fChjPXNldFRpbWVvdXQoZSxiKSl9fSxoPXouY2xpZW50SGVpZ2h0LGk9ZnVuY3Rpb24oKXtNPU1hdGgubWF4KGEuaW5uZXJXaWR0aHx8MCx6LmNsaWVudFdpZHRoKSE9PVEud2lkdGh8fHouY2xpZW50SGVpZ2h0IT09aCxoPXouY2xpZW50SGVpZ2h0LE0mJnMuZmlsbEltZ3MoKX07WihhLFwicmVzaXplXCIsZyhpLDk5KSksWihiLFwicmVhZHlzdGF0ZWNoYW5nZVwiLGUpfSgpLHMucGljdHVyZWZpbGw9YmEscy5maWxsSW1ncz1iYSxzLnRlYXJkb3duUnVuPXUsYmEuXz1zLGEucGljdHVyZWZpbGxDRkc9e3BmOnMscHVzaDpmdW5jdGlvbihhKXt2YXIgYj1hLnNoaWZ0KCk7XCJmdW5jdGlvblwiPT10eXBlb2Ygc1tiXT9zW2JdLmFwcGx5KHMsYSk6KEJbYl09YVswXSxTJiZzLmZpbGxJbWdzKHtyZXNlbGVjdDohMH0pKX19O2Zvcig7SiYmSi5sZW5ndGg7KWEucGljdHVyZWZpbGxDRkcucHVzaChKLnNoaWZ0KCkpO2EucGljdHVyZWZpbGw9YmEsXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWJhOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKFwicGljdHVyZWZpbGxcIixmdW5jdGlvbigpe3JldHVybiBiYX0pLHMuc3VwUGljdHVyZXx8KEFbXCJpbWFnZS93ZWJwXCJdPWUoXCJpbWFnZS93ZWJwXCIsXCJkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFVrbEdSa29BQUFCWFJVSlFWbEE0V0FvQUFBQVFBQUFBQUFBQUFBQUFRVXhRU0F3QUFBQUJCeEFSL1E5RVJQOERBQUJXVURnZ0dBQUFBREFCQUowQktnRUFBUUFEQURRbHBBQURjQUQrKy8xUUFBPT1cIikpfSh3aW5kb3csZG9jdW1lbnQpO1xuIiwiLyohXG4gKiBQaWthZGF5XG4gKlxuICogQ29weXJpZ2h0IMKpIDIwMTQgRGF2aWQgQnVzaGVsbCB8IEJTRCAmIE1JVCBsaWNlbnNlIHwgaHR0cHM6Ly9naXRodWIuY29tL2RidXNoZWxsL1Bpa2FkYXlcbiAqL1xuXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpXG57XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIG1vbWVudDtcbiAgICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIENvbW1vbkpTIG1vZHVsZVxuICAgICAgICAvLyBMb2FkIG1vbWVudC5qcyBhcyBhbiBvcHRpb25hbCBkZXBlbmRlbmN5XG4gICAgICAgIHRyeSB7IG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpOyB9IGNhdGNoIChlKSB7fVxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkobW9tZW50KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgICAgIGRlZmluZShmdW5jdGlvbiAocmVxKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBMb2FkIG1vbWVudC5qcyBhcyBhbiBvcHRpb25hbCBkZXBlbmRlbmN5XG4gICAgICAgICAgICB2YXIgaWQgPSAnbW9tZW50JztcbiAgICAgICAgICAgIHRyeSB7IG1vbWVudCA9IHJlcShpZCk7IH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgICAgICByZXR1cm4gZmFjdG9yeShtb21lbnQpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByb290LlBpa2FkYXkgPSBmYWN0b3J5KHJvb3QubW9tZW50KTtcbiAgICB9XG59KHRoaXMsIGZ1bmN0aW9uIChtb21lbnQpXG57XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLyoqXG4gICAgICogZmVhdHVyZSBkZXRlY3Rpb24gYW5kIGhlbHBlciBmdW5jdGlvbnNcbiAgICAgKi9cbiAgICB2YXIgaGFzTW9tZW50ID0gdHlwZW9mIG1vbWVudCA9PT0gJ2Z1bmN0aW9uJyxcblxuICAgIGhhc0V2ZW50TGlzdGVuZXJzID0gISF3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcixcblxuICAgIGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50LFxuXG4gICAgc3RvID0gd2luZG93LnNldFRpbWVvdXQsXG5cbiAgICBhZGRFdmVudCA9IGZ1bmN0aW9uKGVsLCBlLCBjYWxsYmFjaywgY2FwdHVyZSlcbiAgICB7XG4gICAgICAgIGlmIChoYXNFdmVudExpc3RlbmVycykge1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihlLCBjYWxsYmFjaywgISFjYXB0dXJlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsLmF0dGFjaEV2ZW50KCdvbicgKyBlLCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVtb3ZlRXZlbnQgPSBmdW5jdGlvbihlbCwgZSwgY2FsbGJhY2ssIGNhcHR1cmUpXG4gICAge1xuICAgICAgICBpZiAoaGFzRXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSwgY2FsbGJhY2ssICEhY2FwdHVyZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbC5kZXRhY2hFdmVudCgnb24nICsgZSwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHRyaW0gPSBmdW5jdGlvbihzdHIpXG4gICAge1xuICAgICAgICByZXR1cm4gc3RyLnRyaW0gPyBzdHIudHJpbSgpIDogc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csJycpO1xuICAgIH0sXG5cbiAgICBoYXNDbGFzcyA9IGZ1bmN0aW9uKGVsLCBjbilcbiAgICB7XG4gICAgICAgIHJldHVybiAoJyAnICsgZWwuY2xhc3NOYW1lICsgJyAnKS5pbmRleE9mKCcgJyArIGNuICsgJyAnKSAhPT0gLTE7XG4gICAgfSxcblxuICAgIGFkZENsYXNzID0gZnVuY3Rpb24oZWwsIGNuKVxuICAgIHtcbiAgICAgICAgaWYgKCFoYXNDbGFzcyhlbCwgY24pKSB7XG4gICAgICAgICAgICBlbC5jbGFzc05hbWUgPSAoZWwuY2xhc3NOYW1lID09PSAnJykgPyBjbiA6IGVsLmNsYXNzTmFtZSArICcgJyArIGNuO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZUNsYXNzID0gZnVuY3Rpb24oZWwsIGNuKVxuICAgIHtcbiAgICAgICAgZWwuY2xhc3NOYW1lID0gdHJpbSgoJyAnICsgZWwuY2xhc3NOYW1lICsgJyAnKS5yZXBsYWNlKCcgJyArIGNuICsgJyAnLCAnICcpKTtcbiAgICB9LFxuXG4gICAgaXNBcnJheSA9IGZ1bmN0aW9uKG9iailcbiAgICB7XG4gICAgICAgIHJldHVybiAoL0FycmF5LykudGVzdChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSk7XG4gICAgfSxcblxuICAgIGlzRGF0ZSA9IGZ1bmN0aW9uKG9iailcbiAgICB7XG4gICAgICAgIHJldHVybiAoL0RhdGUvKS50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopKSAmJiAhaXNOYU4ob2JqLmdldFRpbWUoKSk7XG4gICAgfSxcblxuICAgIGlzV2Vla2VuZCA9IGZ1bmN0aW9uKGRhdGUpXG4gICAge1xuICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcbiAgICAgICAgcmV0dXJuIGRheSA9PT0gMCB8fCBkYXkgPT09IDY7XG4gICAgfSxcblxuICAgIGlzTGVhcFllYXIgPSBmdW5jdGlvbih5ZWFyKVxuICAgIHtcbiAgICAgICAgLy8gc29sdXRpb24gYnkgTWF0dGkgVmlya2t1bmVuOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80ODgxOTUxXG4gICAgICAgIHJldHVybiB5ZWFyICUgNCA9PT0gMCAmJiB5ZWFyICUgMTAwICE9PSAwIHx8IHllYXIgJSA0MDAgPT09IDA7XG4gICAgfSxcblxuICAgIGdldERheXNJbk1vbnRoID0gZnVuY3Rpb24oeWVhciwgbW9udGgpXG4gICAge1xuICAgICAgICByZXR1cm4gWzMxLCBpc0xlYXBZZWFyKHllYXIpID8gMjkgOiAyOCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdW21vbnRoXTtcbiAgICB9LFxuXG4gICAgc2V0VG9TdGFydE9mRGF5ID0gZnVuY3Rpb24oZGF0ZSlcbiAgICB7XG4gICAgICAgIGlmIChpc0RhdGUoZGF0ZSkpIGRhdGUuc2V0SG91cnMoMCwwLDAsMCk7XG4gICAgfSxcblxuICAgIGNvbXBhcmVEYXRlcyA9IGZ1bmN0aW9uKGEsYilcbiAgICB7XG4gICAgICAgIC8vIHdlYWsgZGF0ZSBjb21wYXJpc29uICh1c2Ugc2V0VG9TdGFydE9mRGF5KGRhdGUpIHRvIGVuc3VyZSBjb3JyZWN0IHJlc3VsdClcbiAgICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpID09PSBiLmdldFRpbWUoKTtcbiAgICB9LFxuXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24odG8sIGZyb20sIG92ZXJ3cml0ZSlcbiAgICB7XG4gICAgICAgIHZhciBwcm9wLCBoYXNQcm9wO1xuICAgICAgICBmb3IgKHByb3AgaW4gZnJvbSkge1xuICAgICAgICAgICAgaGFzUHJvcCA9IHRvW3Byb3BdICE9PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoaGFzUHJvcCAmJiB0eXBlb2YgZnJvbVtwcm9wXSA9PT0gJ29iamVjdCcgJiYgZnJvbVtwcm9wXSAhPT0gbnVsbCAmJiBmcm9tW3Byb3BdLm5vZGVOYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNEYXRlKGZyb21bcHJvcF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdmVyd3JpdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvW3Byb3BdID0gbmV3IERhdGUoZnJvbVtwcm9wXS5nZXRUaW1lKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzQXJyYXkoZnJvbVtwcm9wXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG92ZXJ3cml0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9bcHJvcF0gPSBmcm9tW3Byb3BdLnNsaWNlKDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9bcHJvcF0gPSBleHRlbmQoe30sIGZyb21bcHJvcF0sIG92ZXJ3cml0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChvdmVyd3JpdGUgfHwgIWhhc1Byb3ApIHtcbiAgICAgICAgICAgICAgICB0b1twcm9wXSA9IGZyb21bcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvO1xuICAgIH0sXG5cbiAgICBmaXJlRXZlbnQgPSBmdW5jdGlvbihlbCwgZXZlbnROYW1lLCBkYXRhKVxuICAgIHtcbiAgICAgICAgdmFyIGV2O1xuXG4gICAgICAgIGlmIChkb2N1bWVudC5jcmVhdGVFdmVudCkge1xuICAgICAgICAgICAgZXYgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpO1xuICAgICAgICAgICAgZXYuaW5pdEV2ZW50KGV2ZW50TmFtZSwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgZXYgPSBleHRlbmQoZXYsIGRhdGEpO1xuICAgICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChldik7XG4gICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QpIHtcbiAgICAgICAgICAgIGV2ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgICAgICAgICAgIGV2ID0gZXh0ZW5kKGV2LCBkYXRhKTtcbiAgICAgICAgICAgIGVsLmZpcmVFdmVudCgnb24nICsgZXZlbnROYW1lLCBldik7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgYWRqdXN0Q2FsZW5kYXIgPSBmdW5jdGlvbihjYWxlbmRhcikge1xuICAgICAgICBpZiAoY2FsZW5kYXIubW9udGggPCAwKSB7XG4gICAgICAgICAgICBjYWxlbmRhci55ZWFyIC09IE1hdGguY2VpbChNYXRoLmFicyhjYWxlbmRhci5tb250aCkvMTIpO1xuICAgICAgICAgICAgY2FsZW5kYXIubW9udGggKz0gMTI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhbGVuZGFyLm1vbnRoID4gMTEpIHtcbiAgICAgICAgICAgIGNhbGVuZGFyLnllYXIgKz0gTWF0aC5mbG9vcihNYXRoLmFicyhjYWxlbmRhci5tb250aCkvMTIpO1xuICAgICAgICAgICAgY2FsZW5kYXIubW9udGggLT0gMTI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGVuZGFyO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBkZWZhdWx0cyBhbmQgbG9jYWxpc2F0aW9uXG4gICAgICovXG4gICAgZGVmYXVsdHMgPSB7XG5cbiAgICAgICAgLy8gYmluZCB0aGUgcGlja2VyIHRvIGEgZm9ybSBmaWVsZFxuICAgICAgICBmaWVsZDogbnVsbCxcblxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IHNob3cvaGlkZSB0aGUgcGlja2VyIG9uIGBmaWVsZGAgZm9jdXMgKGRlZmF1bHQgYHRydWVgIGlmIGBmaWVsZGAgaXMgc2V0KVxuICAgICAgICBib3VuZDogdW5kZWZpbmVkLFxuXG4gICAgICAgIC8vIHBvc2l0aW9uIG9mIHRoZSBkYXRlcGlja2VyLCByZWxhdGl2ZSB0byB0aGUgZmllbGQgKGRlZmF1bHQgdG8gYm90dG9tICYgbGVmdClcbiAgICAgICAgLy8gKCdib3R0b20nICYgJ2xlZnQnIGtleXdvcmRzIGFyZSBub3QgdXNlZCwgJ3RvcCcgJiAncmlnaHQnIGFyZSBtb2RpZmllciBvbiB0aGUgYm90dG9tL2xlZnQgcG9zaXRpb24pXG4gICAgICAgIHBvc2l0aW9uOiAnYm90dG9tIGxlZnQnLFxuXG4gICAgICAgIC8vIGF1dG9tYXRpY2FsbHkgZml0IGluIHRoZSB2aWV3cG9ydCBldmVuIGlmIGl0IG1lYW5zIHJlcG9zaXRpb25pbmcgZnJvbSB0aGUgcG9zaXRpb24gb3B0aW9uXG4gICAgICAgIHJlcG9zaXRpb246IHRydWUsXG5cbiAgICAgICAgLy8gdGhlIGRlZmF1bHQgb3V0cHV0IGZvcm1hdCBmb3IgYC50b1N0cmluZygpYCBhbmQgYGZpZWxkYCB2YWx1ZVxuICAgICAgICBmb3JtYXQ6ICdZWVlZLU1NLUREJyxcblxuICAgICAgICAvLyB0aGUgdG9TdHJpbmcgZnVuY3Rpb24gd2hpY2ggZ2V0cyBwYXNzZWQgYSBjdXJyZW50IGRhdGUgb2JqZWN0IGFuZCBmb3JtYXRcbiAgICAgICAgLy8gYW5kIHJldHVybnMgYSBzdHJpbmdcbiAgICAgICAgdG9TdHJpbmc6IG51bGwsXG5cbiAgICAgICAgLy8gdXNlZCB0byBjcmVhdGUgZGF0ZSBvYmplY3QgZnJvbSBjdXJyZW50IGlucHV0IHN0cmluZ1xuICAgICAgICBwYXJzZTogbnVsbCxcblxuICAgICAgICAvLyB0aGUgaW5pdGlhbCBkYXRlIHRvIHZpZXcgd2hlbiBmaXJzdCBvcGVuZWRcbiAgICAgICAgZGVmYXVsdERhdGU6IG51bGwsXG5cbiAgICAgICAgLy8gbWFrZSB0aGUgYGRlZmF1bHREYXRlYCB0aGUgaW5pdGlhbCBzZWxlY3RlZCB2YWx1ZVxuICAgICAgICBzZXREZWZhdWx0RGF0ZTogZmFsc2UsXG5cbiAgICAgICAgLy8gZmlyc3QgZGF5IG9mIHdlZWsgKDA6IFN1bmRheSwgMTogTW9uZGF5IGV0YylcbiAgICAgICAgZmlyc3REYXk6IDAsXG5cbiAgICAgICAgLy8gdGhlIGRlZmF1bHQgZmxhZyBmb3IgbW9tZW50J3Mgc3RyaWN0IGRhdGUgcGFyc2luZ1xuICAgICAgICBmb3JtYXRTdHJpY3Q6IGZhbHNlLFxuXG4gICAgICAgIC8vIHRoZSBtaW5pbXVtL2VhcmxpZXN0IGRhdGUgdGhhdCBjYW4gYmUgc2VsZWN0ZWRcbiAgICAgICAgbWluRGF0ZTogbnVsbCxcbiAgICAgICAgLy8gdGhlIG1heGltdW0vbGF0ZXN0IGRhdGUgdGhhdCBjYW4gYmUgc2VsZWN0ZWRcbiAgICAgICAgbWF4RGF0ZTogbnVsbCxcblxuICAgICAgICAvLyBudW1iZXIgb2YgeWVhcnMgZWl0aGVyIHNpZGUsIG9yIGFycmF5IG9mIHVwcGVyL2xvd2VyIHJhbmdlXG4gICAgICAgIHllYXJSYW5nZTogMTAsXG5cbiAgICAgICAgLy8gc2hvdyB3ZWVrIG51bWJlcnMgYXQgaGVhZCBvZiByb3dcbiAgICAgICAgc2hvd1dlZWtOdW1iZXI6IGZhbHNlLFxuXG4gICAgICAgIC8vIFdlZWsgcGlja2VyIG1vZGVcbiAgICAgICAgcGlja1dob2xlV2VlazogZmFsc2UsXG5cbiAgICAgICAgLy8gdXNlZCBpbnRlcm5hbGx5IChkb24ndCBjb25maWcgb3V0c2lkZSlcbiAgICAgICAgbWluWWVhcjogMCxcbiAgICAgICAgbWF4WWVhcjogOTk5OSxcbiAgICAgICAgbWluTW9udGg6IHVuZGVmaW5lZCxcbiAgICAgICAgbWF4TW9udGg6IHVuZGVmaW5lZCxcblxuICAgICAgICBzdGFydFJhbmdlOiBudWxsLFxuICAgICAgICBlbmRSYW5nZTogbnVsbCxcblxuICAgICAgICBpc1JUTDogZmFsc2UsXG5cbiAgICAgICAgLy8gQWRkaXRpb25hbCB0ZXh0IHRvIGFwcGVuZCB0byB0aGUgeWVhciBpbiB0aGUgY2FsZW5kYXIgdGl0bGVcbiAgICAgICAgeWVhclN1ZmZpeDogJycsXG5cbiAgICAgICAgLy8gUmVuZGVyIHRoZSBtb250aCBhZnRlciB5ZWFyIGluIHRoZSBjYWxlbmRhciB0aXRsZVxuICAgICAgICBzaG93TW9udGhBZnRlclllYXI6IGZhbHNlLFxuXG4gICAgICAgIC8vIFJlbmRlciBkYXlzIG9mIHRoZSBjYWxlbmRhciBncmlkIHRoYXQgZmFsbCBpbiB0aGUgbmV4dCBvciBwcmV2aW91cyBtb250aFxuICAgICAgICBzaG93RGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzOiBmYWxzZSxcblxuICAgICAgICAvLyBob3cgbWFueSBtb250aHMgYXJlIHZpc2libGVcbiAgICAgICAgbnVtYmVyT2ZNb250aHM6IDEsXG5cbiAgICAgICAgLy8gd2hlbiBudW1iZXJPZk1vbnRocyBpcyB1c2VkLCB0aGlzIHdpbGwgaGVscCB5b3UgdG8gY2hvb3NlIHdoZXJlIHRoZSBtYWluIGNhbGVuZGFyIHdpbGwgYmUgKGRlZmF1bHQgYGxlZnRgLCBjYW4gYmUgc2V0IHRvIGByaWdodGApXG4gICAgICAgIC8vIG9ubHkgdXNlZCBmb3IgdGhlIGZpcnN0IGRpc3BsYXkgb3Igd2hlbiBhIHNlbGVjdGVkIGRhdGUgaXMgbm90IHZpc2libGVcbiAgICAgICAgbWFpbkNhbGVuZGFyOiAnbGVmdCcsXG5cbiAgICAgICAgLy8gU3BlY2lmeSBhIERPTSBlbGVtZW50IHRvIHJlbmRlciB0aGUgY2FsZW5kYXIgaW5cbiAgICAgICAgY29udGFpbmVyOiB1bmRlZmluZWQsXG5cbiAgICAgICAgLy8gQmx1ciBmaWVsZCB3aGVuIGRhdGUgaXMgc2VsZWN0ZWRcbiAgICAgICAgYmx1ckZpZWxkT25TZWxlY3QgOiB0cnVlLFxuXG4gICAgICAgIC8vIGludGVybmF0aW9uYWxpemF0aW9uXG4gICAgICAgIGkxOG46IHtcbiAgICAgICAgICAgIHByZXZpb3VzTW9udGggOiAnUHJldmlvdXMgTW9udGgnLFxuICAgICAgICAgICAgbmV4dE1vbnRoICAgICA6ICdOZXh0IE1vbnRoJyxcbiAgICAgICAgICAgIG1vbnRocyAgICAgICAgOiBbJ0phbnVhcnknLCdGZWJydWFyeScsJ01hcmNoJywnQXByaWwnLCdNYXknLCdKdW5lJywnSnVseScsJ0F1Z3VzdCcsJ1NlcHRlbWJlcicsJ09jdG9iZXInLCdOb3ZlbWJlcicsJ0RlY2VtYmVyJ10sXG4gICAgICAgICAgICB3ZWVrZGF5cyAgICAgIDogWydTdW5kYXknLCdNb25kYXknLCdUdWVzZGF5JywnV2VkbmVzZGF5JywnVGh1cnNkYXknLCdGcmlkYXknLCdTYXR1cmRheSddLFxuICAgICAgICAgICAgd2Vla2RheXNTaG9ydCA6IFsnU3VuJywnTW9uJywnVHVlJywnV2VkJywnVGh1JywnRnJpJywnU2F0J11cbiAgICAgICAgfSxcblxuICAgICAgICAvLyBUaGVtZSBDbGFzc25hbWVcbiAgICAgICAgdGhlbWU6IG51bGwsXG5cbiAgICAgICAgLy8gZXZlbnRzIGFycmF5XG4gICAgICAgIGV2ZW50czogW10sXG5cbiAgICAgICAgLy8gY2FsbGJhY2sgZnVuY3Rpb25cbiAgICAgICAgb25TZWxlY3Q6IG51bGwsXG4gICAgICAgIG9uT3BlbjogbnVsbCxcbiAgICAgICAgb25DbG9zZTogbnVsbCxcbiAgICAgICAgb25EcmF3OiBudWxsXG4gICAgfSxcblxuXG4gICAgLyoqXG4gICAgICogdGVtcGxhdGluZyBmdW5jdGlvbnMgdG8gYWJzdHJhY3QgSFRNTCByZW5kZXJpbmdcbiAgICAgKi9cbiAgICByZW5kZXJEYXlOYW1lID0gZnVuY3Rpb24ob3B0cywgZGF5LCBhYmJyKVxuICAgIHtcbiAgICAgICAgZGF5ICs9IG9wdHMuZmlyc3REYXk7XG4gICAgICAgIHdoaWxlIChkYXkgPj0gNykge1xuICAgICAgICAgICAgZGF5IC09IDc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFiYnIgPyBvcHRzLmkxOG4ud2Vla2RheXNTaG9ydFtkYXldIDogb3B0cy5pMThuLndlZWtkYXlzW2RheV07XG4gICAgfSxcblxuICAgIHJlbmRlckRheSA9IGZ1bmN0aW9uKG9wdHMpXG4gICAge1xuICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgIHZhciBhcmlhU2VsZWN0ZWQgPSAnZmFsc2UnO1xuICAgICAgICBpZiAob3B0cy5pc0VtcHR5KSB7XG4gICAgICAgICAgICBpZiAob3B0cy5zaG93RGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzKSB7XG4gICAgICAgICAgICAgICAgYXJyLnB1c2goJ2lzLW91dHNpZGUtY3VycmVudC1tb250aCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJzx0ZCBjbGFzcz1cImlzLWVtcHR5XCI+PC90ZD4nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmlzRGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGFyci5wdXNoKCdpcy1kaXNhYmxlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmlzVG9kYXkpIHtcbiAgICAgICAgICAgIGFyci5wdXNoKCdpcy10b2RheScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGFyci5wdXNoKCdpcy1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgYXJpYVNlbGVjdGVkID0gJ3RydWUnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmhhc0V2ZW50KSB7XG4gICAgICAgICAgICBhcnIucHVzaCgnaGFzLWV2ZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMuaXNJblJhbmdlKSB7XG4gICAgICAgICAgICBhcnIucHVzaCgnaXMtaW5yYW5nZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmlzU3RhcnRSYW5nZSkge1xuICAgICAgICAgICAgYXJyLnB1c2goJ2lzLXN0YXJ0cmFuZ2UnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5pc0VuZFJhbmdlKSB7XG4gICAgICAgICAgICBhcnIucHVzaCgnaXMtZW5kcmFuZ2UnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJzx0ZCBkYXRhLWRheT1cIicgKyBvcHRzLmRheSArICdcIiBjbGFzcz1cIicgKyBhcnIuam9pbignICcpICsgJ1wiIGFyaWEtc2VsZWN0ZWQ9XCInICsgYXJpYVNlbGVjdGVkICsgJ1wiPicgK1xuICAgICAgICAgICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cInBpa2EtYnV0dG9uIHBpa2EtZGF5XCIgdHlwZT1cImJ1dHRvblwiICcgK1xuICAgICAgICAgICAgICAgICAgICAnZGF0YS1waWthLXllYXI9XCInICsgb3B0cy55ZWFyICsgJ1wiIGRhdGEtcGlrYS1tb250aD1cIicgKyBvcHRzLm1vbnRoICsgJ1wiIGRhdGEtcGlrYS1kYXk9XCInICsgb3B0cy5kYXkgKyAnXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRzLmRheSArXG4gICAgICAgICAgICAgICAgICc8L2J1dHRvbj4nICtcbiAgICAgICAgICAgICAgICc8L3RkPic7XG4gICAgfSxcblxuICAgIHJlbmRlcldlZWsgPSBmdW5jdGlvbiAoZCwgbSwgeSkge1xuICAgICAgICAvLyBMaWZ0ZWQgZnJvbSBodHRwOi8vamF2YXNjcmlwdC5hYm91dC5jb20vbGlicmFyeS9ibHdlZWt5ZWFyLmh0bSwgbGlnaHRseSBtb2RpZmllZC5cbiAgICAgICAgdmFyIG9uZWphbiA9IG5ldyBEYXRlKHksIDAsIDEpLFxuICAgICAgICAgICAgd2Vla051bSA9IE1hdGguY2VpbCgoKChuZXcgRGF0ZSh5LCBtLCBkKSAtIG9uZWphbikgLyA4NjQwMDAwMCkgKyBvbmVqYW4uZ2V0RGF5KCkrMSkvNyk7XG4gICAgICAgIHJldHVybiAnPHRkIGNsYXNzPVwicGlrYS13ZWVrXCI+JyArIHdlZWtOdW0gKyAnPC90ZD4nO1xuICAgIH0sXG5cbiAgICByZW5kZXJSb3cgPSBmdW5jdGlvbihkYXlzLCBpc1JUTCwgcGlja1dob2xlV2VlaywgaXNSb3dTZWxlY3RlZClcbiAgICB7XG4gICAgICAgIHJldHVybiAnPHRyIGNsYXNzPVwicGlrYS1yb3cnICsgKHBpY2tXaG9sZVdlZWsgPyAnIHBpY2std2hvbGUtd2VlaycgOiAnJykgKyAoaXNSb3dTZWxlY3RlZCA/ICcgaXMtc2VsZWN0ZWQnIDogJycpICsgJ1wiPicgKyAoaXNSVEwgPyBkYXlzLnJldmVyc2UoKSA6IGRheXMpLmpvaW4oJycpICsgJzwvdHI+JztcbiAgICB9LFxuXG4gICAgcmVuZGVyQm9keSA9IGZ1bmN0aW9uKHJvd3MpXG4gICAge1xuICAgICAgICByZXR1cm4gJzx0Ym9keT4nICsgcm93cy5qb2luKCcnKSArICc8L3Rib2R5Pic7XG4gICAgfSxcblxuICAgIHJlbmRlckhlYWQgPSBmdW5jdGlvbihvcHRzKVxuICAgIHtcbiAgICAgICAgdmFyIGksIGFyciA9IFtdO1xuICAgICAgICBpZiAob3B0cy5zaG93V2Vla051bWJlcikge1xuICAgICAgICAgICAgYXJyLnB1c2goJzx0aD48L3RoPicpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCA3OyBpKyspIHtcbiAgICAgICAgICAgIGFyci5wdXNoKCc8dGggc2NvcGU9XCJjb2xcIj48YWJiciB0aXRsZT1cIicgKyByZW5kZXJEYXlOYW1lKG9wdHMsIGkpICsgJ1wiPicgKyByZW5kZXJEYXlOYW1lKG9wdHMsIGksIHRydWUpICsgJzwvYWJicj48L3RoPicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnPHRoZWFkPjx0cj4nICsgKG9wdHMuaXNSVEwgPyBhcnIucmV2ZXJzZSgpIDogYXJyKS5qb2luKCcnKSArICc8L3RyPjwvdGhlYWQ+JztcbiAgICB9LFxuXG4gICAgcmVuZGVyVGl0bGUgPSBmdW5jdGlvbihpbnN0YW5jZSwgYywgeWVhciwgbW9udGgsIHJlZlllYXIsIHJhbmRJZClcbiAgICB7XG4gICAgICAgIHZhciBpLCBqLCBhcnIsXG4gICAgICAgICAgICBvcHRzID0gaW5zdGFuY2UuX28sXG4gICAgICAgICAgICBpc01pblllYXIgPSB5ZWFyID09PSBvcHRzLm1pblllYXIsXG4gICAgICAgICAgICBpc01heFllYXIgPSB5ZWFyID09PSBvcHRzLm1heFllYXIsXG4gICAgICAgICAgICBodG1sID0gJzxkaXYgaWQ9XCInICsgcmFuZElkICsgJ1wiIGNsYXNzPVwicGlrYS10aXRsZVwiIHJvbGU9XCJoZWFkaW5nXCIgYXJpYS1saXZlPVwiYXNzZXJ0aXZlXCI+JyxcbiAgICAgICAgICAgIG1vbnRoSHRtbCxcbiAgICAgICAgICAgIHllYXJIdG1sLFxuICAgICAgICAgICAgcHJldiA9IHRydWUsXG4gICAgICAgICAgICBuZXh0ID0gdHJ1ZTtcblxuICAgICAgICBmb3IgKGFyciA9IFtdLCBpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICAgICAgICAgIGFyci5wdXNoKCc8b3B0aW9uIHZhbHVlPVwiJyArICh5ZWFyID09PSByZWZZZWFyID8gaSAtIGMgOiAxMiArIGkgLSBjKSArICdcIicgK1xuICAgICAgICAgICAgICAgIChpID09PSBtb250aCA/ICcgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiJzogJycpICtcbiAgICAgICAgICAgICAgICAoKGlzTWluWWVhciAmJiBpIDwgb3B0cy5taW5Nb250aCkgfHwgKGlzTWF4WWVhciAmJiBpID4gb3B0cy5tYXhNb250aCkgPyAnZGlzYWJsZWQ9XCJkaXNhYmxlZFwiJyA6ICcnKSArICc+JyArXG4gICAgICAgICAgICAgICAgb3B0cy5pMThuLm1vbnRoc1tpXSArICc8L29wdGlvbj4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vbnRoSHRtbCA9ICc8ZGl2IGNsYXNzPVwicGlrYS1sYWJlbFwiPicgKyBvcHRzLmkxOG4ubW9udGhzW21vbnRoXSArICc8c2VsZWN0IGNsYXNzPVwicGlrYS1zZWxlY3QgcGlrYS1zZWxlY3QtbW9udGhcIiB0YWJpbmRleD1cIi0xXCI+JyArIGFyci5qb2luKCcnKSArICc8L3NlbGVjdD48L2Rpdj4nO1xuXG4gICAgICAgIGlmIChpc0FycmF5KG9wdHMueWVhclJhbmdlKSkge1xuICAgICAgICAgICAgaSA9IG9wdHMueWVhclJhbmdlWzBdO1xuICAgICAgICAgICAgaiA9IG9wdHMueWVhclJhbmdlWzFdICsgMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGkgPSB5ZWFyIC0gb3B0cy55ZWFyUmFuZ2U7XG4gICAgICAgICAgICBqID0gMSArIHllYXIgKyBvcHRzLnllYXJSYW5nZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoYXJyID0gW107IGkgPCBqICYmIGkgPD0gb3B0cy5tYXhZZWFyOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpID49IG9wdHMubWluWWVhcikge1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKCc8b3B0aW9uIHZhbHVlPVwiJyArIGkgKyAnXCInICsgKGkgPT09IHllYXIgPyAnIHNlbGVjdGVkPVwic2VsZWN0ZWRcIic6ICcnKSArICc+JyArIChpKSArICc8L29wdGlvbj4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB5ZWFySHRtbCA9ICc8ZGl2IGNsYXNzPVwicGlrYS1sYWJlbFwiPicgKyB5ZWFyICsgb3B0cy55ZWFyU3VmZml4ICsgJzxzZWxlY3QgY2xhc3M9XCJwaWthLXNlbGVjdCBwaWthLXNlbGVjdC15ZWFyXCIgdGFiaW5kZXg9XCItMVwiPicgKyBhcnIuam9pbignJykgKyAnPC9zZWxlY3Q+PC9kaXY+JztcblxuICAgICAgICBpZiAob3B0cy5zaG93TW9udGhBZnRlclllYXIpIHtcbiAgICAgICAgICAgIGh0bWwgKz0geWVhckh0bWwgKyBtb250aEh0bWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBodG1sICs9IG1vbnRoSHRtbCArIHllYXJIdG1sO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzTWluWWVhciAmJiAobW9udGggPT09IDAgfHwgb3B0cy5taW5Nb250aCA+PSBtb250aCkpIHtcbiAgICAgICAgICAgIHByZXYgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc01heFllYXIgJiYgKG1vbnRoID09PSAxMSB8fCBvcHRzLm1heE1vbnRoIDw9IG1vbnRoKSkge1xuICAgICAgICAgICAgbmV4dCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGMgPT09IDApIHtcbiAgICAgICAgICAgIGh0bWwgKz0gJzxidXR0b24gY2xhc3M9XCJwaWthLXByZXYnICsgKHByZXYgPyAnJyA6ICcgaXMtZGlzYWJsZWQnKSArICdcIiB0eXBlPVwiYnV0dG9uXCI+JyArIG9wdHMuaTE4bi5wcmV2aW91c01vbnRoICsgJzwvYnV0dG9uPic7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGMgPT09IChpbnN0YW5jZS5fby5udW1iZXJPZk1vbnRocyAtIDEpICkge1xuICAgICAgICAgICAgaHRtbCArPSAnPGJ1dHRvbiBjbGFzcz1cInBpa2EtbmV4dCcgKyAobmV4dCA/ICcnIDogJyBpcy1kaXNhYmxlZCcpICsgJ1wiIHR5cGU9XCJidXR0b25cIj4nICsgb3B0cy5pMThuLm5leHRNb250aCArICc8L2J1dHRvbj4nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGh0bWwgKz0gJzwvZGl2Pic7XG4gICAgfSxcblxuICAgIHJlbmRlclRhYmxlID0gZnVuY3Rpb24ob3B0cywgZGF0YSwgcmFuZElkKVxuICAgIHtcbiAgICAgICAgcmV0dXJuICc8dGFibGUgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgY2xhc3M9XCJwaWthLXRhYmxlXCIgcm9sZT1cImdyaWRcIiBhcmlhLWxhYmVsbGVkYnk9XCInICsgcmFuZElkICsgJ1wiPicgKyByZW5kZXJIZWFkKG9wdHMpICsgcmVuZGVyQm9keShkYXRhKSArICc8L3RhYmxlPic7XG4gICAgfSxcblxuXG4gICAgLyoqXG4gICAgICogUGlrYWRheSBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIFBpa2FkYXkgPSBmdW5jdGlvbihvcHRpb25zKVxuICAgIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICAgICAgb3B0cyA9IHNlbGYuY29uZmlnKG9wdGlvbnMpO1xuXG4gICAgICAgIHNlbGYuX29uTW91c2VEb3duID0gZnVuY3Rpb24oZSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCFzZWxmLl92KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWhhc0NsYXNzKHRhcmdldCwgJ2lzLWRpc2FibGVkJykpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzQ2xhc3ModGFyZ2V0LCAncGlrYS1idXR0b24nKSAmJiAhaGFzQ2xhc3ModGFyZ2V0LCAnaXMtZW1wdHknKSAmJiAhaGFzQ2xhc3ModGFyZ2V0LnBhcmVudE5vZGUsICdpcy1kaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0RGF0ZShuZXcgRGF0ZSh0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXBpa2EteWVhcicpLCB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXBpa2EtbW9udGgnKSwgdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1waWthLWRheScpKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLmJvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG8oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuYmx1ckZpZWxkT25TZWxlY3QgJiYgb3B0cy5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRzLmZpZWxkLmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhhc0NsYXNzKHRhcmdldCwgJ3Bpa2EtcHJldicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucHJldk1vbnRoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhhc0NsYXNzKHRhcmdldCwgJ3Bpa2EtbmV4dCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubmV4dE1vbnRoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFoYXNDbGFzcyh0YXJnZXQsICdwaWthLXNlbGVjdCcpKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyB0b3VjaCBldmVudCBwcmV2ZW50IG1vdXNlIGV2ZW50cyBlbXVsYXRpb25cbiAgICAgICAgICAgICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLl9jID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLl9vbkNoYW5nZSA9IGZ1bmN0aW9uKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXNDbGFzcyh0YXJnZXQsICdwaWthLXNlbGVjdC1tb250aCcpKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5nb3RvTW9udGgodGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhhc0NsYXNzKHRhcmdldCwgJ3Bpa2Etc2VsZWN0LXllYXInKSkge1xuICAgICAgICAgICAgICAgIHNlbGYuZ290b1llYXIodGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLl9vbktleUNoYW5nZSA9IGZ1bmN0aW9uKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcblxuICAgICAgICAgICAgaWYgKHNlbGYuaXNWaXNpYmxlKCkpIHtcblxuICAgICAgICAgICAgICAgIHN3aXRjaChlLmtleUNvZGUpe1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRzLmZpZWxkLmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGp1c3REYXRlKCdzdWJ0cmFjdCcsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFkanVzdERhdGUoJ3N1YnRyYWN0JywgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYWRqdXN0RGF0ZSgnYWRkJywgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYWRqdXN0RGF0ZSgnYWRkJywgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5fb25JbnB1dENoYW5nZSA9IGZ1bmN0aW9uKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBkYXRlO1xuXG4gICAgICAgICAgICBpZiAoZS5maXJlZEJ5ID09PSBzZWxmKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdHMucGFyc2UpIHtcbiAgICAgICAgICAgICAgICBkYXRlID0gb3B0cy5wYXJzZShvcHRzLmZpZWxkLnZhbHVlLCBvcHRzLmZvcm1hdCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGhhc01vbWVudCkge1xuICAgICAgICAgICAgICAgIGRhdGUgPSBtb21lbnQob3B0cy5maWVsZC52YWx1ZSwgb3B0cy5mb3JtYXQsIG9wdHMuZm9ybWF0U3RyaWN0KTtcbiAgICAgICAgICAgICAgICBkYXRlID0gKGRhdGUgJiYgZGF0ZS5pc1ZhbGlkKCkpID8gZGF0ZS50b0RhdGUoKSA6IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoRGF0ZS5wYXJzZShvcHRzLmZpZWxkLnZhbHVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNEYXRlKGRhdGUpKSB7XG4gICAgICAgICAgICAgIHNlbGYuc2V0RGF0ZShkYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghc2VsZi5fdikge1xuICAgICAgICAgICAgICAgIHNlbGYuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYuX29uSW5wdXRGb2N1cyA9IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgc2VsZi5zaG93KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5fb25JbnB1dENsaWNrID0gZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICBzZWxmLnNob3coKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLl9vbklucHV0Qmx1ciA9IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gSUUgYWxsb3dzIHBpa2EgZGl2IHRvIGdhaW4gZm9jdXM7IGNhdGNoIGJsdXIgdGhlIGlucHV0IGZpZWxkXG4gICAgICAgICAgICB2YXIgcEVsID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzQ2xhc3MocEVsLCAncGlrYS1zaW5nbGUnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKChwRWwgPSBwRWwucGFyZW50Tm9kZSkpO1xuXG4gICAgICAgICAgICBpZiAoIXNlbGYuX2MpIHtcbiAgICAgICAgICAgICAgICBzZWxmLl9iID0gc3RvKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLl9jID0gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5fb25DbGljayA9IGZ1bmN0aW9uKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQsXG4gICAgICAgICAgICAgICAgcEVsID0gdGFyZ2V0O1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWhhc0V2ZW50TGlzdGVuZXJzICYmIGhhc0NsYXNzKHRhcmdldCwgJ3Bpa2Etc2VsZWN0JykpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldC5vbmNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCdvbmNoYW5nZScsICdyZXR1cm47Jyk7XG4gICAgICAgICAgICAgICAgICAgIGFkZEV2ZW50KHRhcmdldCwgJ2NoYW5nZScsIHNlbGYuX29uQ2hhbmdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc0NsYXNzKHBFbCwgJ3Bpa2Etc2luZ2xlJykgfHwgcEVsID09PSBvcHRzLnRyaWdnZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlICgocEVsID0gcEVsLnBhcmVudE5vZGUpKTtcbiAgICAgICAgICAgIGlmIChzZWxmLl92ICYmIHRhcmdldCAhPT0gb3B0cy50cmlnZ2VyICYmIHBFbCAhPT0gb3B0cy50cmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBzZWxmLmVsLmNsYXNzTmFtZSA9ICdwaWthLXNpbmdsZScgKyAob3B0cy5pc1JUTCA/ICcgaXMtcnRsJyA6ICcnKSArIChvcHRzLnRoZW1lID8gJyAnICsgb3B0cy50aGVtZSA6ICcnKTtcblxuICAgICAgICBhZGRFdmVudChzZWxmLmVsLCAnbW91c2Vkb3duJywgc2VsZi5fb25Nb3VzZURvd24sIHRydWUpO1xuICAgICAgICBhZGRFdmVudChzZWxmLmVsLCAndG91Y2hlbmQnLCBzZWxmLl9vbk1vdXNlRG93biwgdHJ1ZSk7XG4gICAgICAgIGFkZEV2ZW50KHNlbGYuZWwsICdjaGFuZ2UnLCBzZWxmLl9vbkNoYW5nZSk7XG4gICAgICAgIGFkZEV2ZW50KGRvY3VtZW50LCAna2V5ZG93bicsIHNlbGYuX29uS2V5Q2hhbmdlKTtcblxuICAgICAgICBpZiAob3B0cy5maWVsZCkge1xuICAgICAgICAgICAgaWYgKG9wdHMuY29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgb3B0cy5jb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5lbCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdHMuYm91bmQpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNlbGYuZWwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHRzLmZpZWxkLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYuZWwsIG9wdHMuZmllbGQubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWRkRXZlbnQob3B0cy5maWVsZCwgJ2NoYW5nZScsIHNlbGYuX29uSW5wdXRDaGFuZ2UpO1xuXG4gICAgICAgICAgICBpZiAoIW9wdHMuZGVmYXVsdERhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzTW9tZW50ICYmIG9wdHMuZmllbGQudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5kZWZhdWx0RGF0ZSA9IG1vbWVudChvcHRzLmZpZWxkLnZhbHVlLCBvcHRzLmZvcm1hdCkudG9EYXRlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5kZWZhdWx0RGF0ZSA9IG5ldyBEYXRlKERhdGUucGFyc2Uob3B0cy5maWVsZC52YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRzLnNldERlZmF1bHREYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWZEYXRlID0gb3B0cy5kZWZhdWx0RGF0ZTtcblxuICAgICAgICBpZiAoaXNEYXRlKGRlZkRhdGUpKSB7XG4gICAgICAgICAgICBpZiAob3B0cy5zZXREZWZhdWx0RGF0ZSkge1xuICAgICAgICAgICAgICAgIHNlbGYuc2V0RGF0ZShkZWZEYXRlLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5nb3RvRGF0ZShkZWZEYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuZ290b0RhdGUobmV3IERhdGUoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0cy5ib3VuZCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICBzZWxmLmVsLmNsYXNzTmFtZSArPSAnIGlzLWJvdW5kJztcbiAgICAgICAgICAgIGFkZEV2ZW50KG9wdHMudHJpZ2dlciwgJ2NsaWNrJywgc2VsZi5fb25JbnB1dENsaWNrKTtcbiAgICAgICAgICAgIGFkZEV2ZW50KG9wdHMudHJpZ2dlciwgJ2ZvY3VzJywgc2VsZi5fb25JbnB1dEZvY3VzKTtcbiAgICAgICAgICAgIGFkZEV2ZW50KG9wdHMudHJpZ2dlciwgJ2JsdXInLCBzZWxmLl9vbklucHV0Qmx1cik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIC8qKlxuICAgICAqIHB1YmxpYyBQaWthZGF5IEFQSVxuICAgICAqL1xuICAgIFBpa2FkYXkucHJvdG90eXBlID0ge1xuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNvbmZpZ3VyZSBmdW5jdGlvbmFsaXR5XG4gICAgICAgICAqL1xuICAgICAgICBjb25maWc6IGZ1bmN0aW9uKG9wdGlvbnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fbykge1xuICAgICAgICAgICAgICAgIHRoaXMuX28gPSBleHRlbmQoe30sIGRlZmF1bHRzLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIG9wdHMgPSBleHRlbmQodGhpcy5fbywgb3B0aW9ucywgdHJ1ZSk7XG5cbiAgICAgICAgICAgIG9wdHMuaXNSVEwgPSAhIW9wdHMuaXNSVEw7XG5cbiAgICAgICAgICAgIG9wdHMuZmllbGQgPSAob3B0cy5maWVsZCAmJiBvcHRzLmZpZWxkLm5vZGVOYW1lKSA/IG9wdHMuZmllbGQgOiBudWxsO1xuXG4gICAgICAgICAgICBvcHRzLnRoZW1lID0gKHR5cGVvZiBvcHRzLnRoZW1lKSA9PT0gJ3N0cmluZycgJiYgb3B0cy50aGVtZSA/IG9wdHMudGhlbWUgOiBudWxsO1xuXG4gICAgICAgICAgICBvcHRzLmJvdW5kID0gISEob3B0cy5ib3VuZCAhPT0gdW5kZWZpbmVkID8gb3B0cy5maWVsZCAmJiBvcHRzLmJvdW5kIDogb3B0cy5maWVsZCk7XG5cbiAgICAgICAgICAgIG9wdHMudHJpZ2dlciA9IChvcHRzLnRyaWdnZXIgJiYgb3B0cy50cmlnZ2VyLm5vZGVOYW1lKSA/IG9wdHMudHJpZ2dlciA6IG9wdHMuZmllbGQ7XG5cbiAgICAgICAgICAgIG9wdHMuZGlzYWJsZVdlZWtlbmRzID0gISFvcHRzLmRpc2FibGVXZWVrZW5kcztcblxuICAgICAgICAgICAgb3B0cy5kaXNhYmxlRGF5Rm4gPSAodHlwZW9mIG9wdHMuZGlzYWJsZURheUZuKSA9PT0gJ2Z1bmN0aW9uJyA/IG9wdHMuZGlzYWJsZURheUZuIDogbnVsbDtcblxuICAgICAgICAgICAgdmFyIG5vbSA9IHBhcnNlSW50KG9wdHMubnVtYmVyT2ZNb250aHMsIDEwKSB8fCAxO1xuICAgICAgICAgICAgb3B0cy5udW1iZXJPZk1vbnRocyA9IG5vbSA+IDQgPyA0IDogbm9tO1xuXG4gICAgICAgICAgICBpZiAoIWlzRGF0ZShvcHRzLm1pbkRhdGUpKSB7XG4gICAgICAgICAgICAgICAgb3B0cy5taW5EYXRlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzRGF0ZShvcHRzLm1heERhdGUpKSB7XG4gICAgICAgICAgICAgICAgb3B0cy5tYXhEYXRlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKG9wdHMubWluRGF0ZSAmJiBvcHRzLm1heERhdGUpICYmIG9wdHMubWF4RGF0ZSA8IG9wdHMubWluRGF0ZSkge1xuICAgICAgICAgICAgICAgIG9wdHMubWF4RGF0ZSA9IG9wdHMubWluRGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdHMubWluRGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0TWluRGF0ZShvcHRzLm1pbkRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdHMubWF4RGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0TWF4RGF0ZShvcHRzLm1heERhdGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNBcnJheShvcHRzLnllYXJSYW5nZSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmFsbGJhY2sgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgLSAxMDtcbiAgICAgICAgICAgICAgICBvcHRzLnllYXJSYW5nZVswXSA9IHBhcnNlSW50KG9wdHMueWVhclJhbmdlWzBdLCAxMCkgfHwgZmFsbGJhY2s7XG4gICAgICAgICAgICAgICAgb3B0cy55ZWFyUmFuZ2VbMV0gPSBwYXJzZUludChvcHRzLnllYXJSYW5nZVsxXSwgMTApIHx8IGZhbGxiYWNrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHRzLnllYXJSYW5nZSA9IE1hdGguYWJzKHBhcnNlSW50KG9wdHMueWVhclJhbmdlLCAxMCkpIHx8IGRlZmF1bHRzLnllYXJSYW5nZTtcbiAgICAgICAgICAgICAgICBpZiAob3B0cy55ZWFyUmFuZ2UgPiAxMDApIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0cy55ZWFyUmFuZ2UgPSAxMDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb3B0cztcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcmV0dXJuIGEgZm9ybWF0dGVkIHN0cmluZyBvZiB0aGUgY3VycmVudCBzZWxlY3Rpb24gKHVzaW5nIE1vbWVudC5qcyBpZiBhdmFpbGFibGUpXG4gICAgICAgICAqL1xuICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24oZm9ybWF0KVxuICAgICAgICB7XG4gICAgICAgICAgICBmb3JtYXQgPSBmb3JtYXQgfHwgdGhpcy5fby5mb3JtYXQ7XG4gICAgICAgICAgICBpZiAoIWlzRGF0ZSh0aGlzLl9kKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9vLnRvU3RyaW5nKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vLnRvU3RyaW5nKHRoaXMuX2QsIGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGFzTW9tZW50KSB7XG4gICAgICAgICAgICAgIHJldHVybiBtb21lbnQodGhpcy5fZCkuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZC50b0RhdGVTdHJpbmcoKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcmV0dXJuIGEgTW9tZW50LmpzIG9iamVjdCBvZiB0aGUgY3VycmVudCBzZWxlY3Rpb24gKGlmIGF2YWlsYWJsZSlcbiAgICAgICAgICovXG4gICAgICAgIGdldE1vbWVudDogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gaGFzTW9tZW50ID8gbW9tZW50KHRoaXMuX2QpIDogbnVsbDtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogc2V0IHRoZSBjdXJyZW50IHNlbGVjdGlvbiBmcm9tIGEgTW9tZW50LmpzIG9iamVjdCAoaWYgYXZhaWxhYmxlKVxuICAgICAgICAgKi9cbiAgICAgICAgc2V0TW9tZW50OiBmdW5jdGlvbihkYXRlLCBwcmV2ZW50T25TZWxlY3QpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChoYXNNb21lbnQgJiYgbW9tZW50LmlzTW9tZW50KGRhdGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlKGRhdGUudG9EYXRlKCksIHByZXZlbnRPblNlbGVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJldHVybiBhIERhdGUgb2JqZWN0IG9mIHRoZSBjdXJyZW50IHNlbGVjdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0RGF0ZTogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gaXNEYXRlKHRoaXMuX2QpID8gbmV3IERhdGUodGhpcy5fZC5nZXRUaW1lKCkpIDogbnVsbDtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogc2V0IHRoZSBjdXJyZW50IHNlbGVjdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgc2V0RGF0ZTogZnVuY3Rpb24oZGF0ZSwgcHJldmVudE9uU2VsZWN0KVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIWRhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX28uZmllbGQudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgZmlyZUV2ZW50KHRoaXMuX28uZmllbGQsICdjaGFuZ2UnLCB7IGZpcmVkQnk6IHRoaXMgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHJhdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKGRhdGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNEYXRlKGRhdGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbWluID0gdGhpcy5fby5taW5EYXRlLFxuICAgICAgICAgICAgICAgIG1heCA9IHRoaXMuX28ubWF4RGF0ZTtcblxuICAgICAgICAgICAgaWYgKGlzRGF0ZShtaW4pICYmIGRhdGUgPCBtaW4pIHtcbiAgICAgICAgICAgICAgICBkYXRlID0gbWluO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0RhdGUobWF4KSAmJiBkYXRlID4gbWF4KSB7XG4gICAgICAgICAgICAgICAgZGF0ZSA9IG1heDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fZCA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTtcbiAgICAgICAgICAgIHNldFRvU3RhcnRPZkRheSh0aGlzLl9kKTtcbiAgICAgICAgICAgIHRoaXMuZ290b0RhdGUodGhpcy5fZCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9vLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5maWVsZC52YWx1ZSA9IHRoaXMudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBmaXJlRXZlbnQodGhpcy5fby5maWVsZCwgJ2NoYW5nZScsIHsgZmlyZWRCeTogdGhpcyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcHJldmVudE9uU2VsZWN0ICYmIHR5cGVvZiB0aGlzLl9vLm9uU2VsZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5vblNlbGVjdC5jYWxsKHRoaXMsIHRoaXMuZ2V0RGF0ZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY2hhbmdlIHZpZXcgdG8gYSBzcGVjaWZpYyBkYXRlXG4gICAgICAgICAqL1xuICAgICAgICBnb3RvRGF0ZTogZnVuY3Rpb24oZGF0ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIG5ld0NhbGVuZGFyID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKCFpc0RhdGUoZGF0ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmNhbGVuZGFycykge1xuICAgICAgICAgICAgICAgIHZhciBmaXJzdFZpc2libGVEYXRlID0gbmV3IERhdGUodGhpcy5jYWxlbmRhcnNbMF0ueWVhciwgdGhpcy5jYWxlbmRhcnNbMF0ubW9udGgsIDEpLFxuICAgICAgICAgICAgICAgICAgICBsYXN0VmlzaWJsZURhdGUgPSBuZXcgRGF0ZSh0aGlzLmNhbGVuZGFyc1t0aGlzLmNhbGVuZGFycy5sZW5ndGgtMV0ueWVhciwgdGhpcy5jYWxlbmRhcnNbdGhpcy5jYWxlbmRhcnMubGVuZ3RoLTFdLm1vbnRoLCAxKSxcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZURhdGUgPSBkYXRlLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIGVuZCBvZiB0aGUgbW9udGhcbiAgICAgICAgICAgICAgICBsYXN0VmlzaWJsZURhdGUuc2V0TW9udGgobGFzdFZpc2libGVEYXRlLmdldE1vbnRoKCkrMSk7XG4gICAgICAgICAgICAgICAgbGFzdFZpc2libGVEYXRlLnNldERhdGUobGFzdFZpc2libGVEYXRlLmdldERhdGUoKS0xKTtcbiAgICAgICAgICAgICAgICBuZXdDYWxlbmRhciA9ICh2aXNpYmxlRGF0ZSA8IGZpcnN0VmlzaWJsZURhdGUuZ2V0VGltZSgpIHx8IGxhc3RWaXNpYmxlRGF0ZS5nZXRUaW1lKCkgPCB2aXNpYmxlRGF0ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChuZXdDYWxlbmRhcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJzID0gW3tcbiAgICAgICAgICAgICAgICAgICAgbW9udGg6IGRhdGUuZ2V0TW9udGgoKSxcbiAgICAgICAgICAgICAgICAgICAgeWVhcjogZGF0ZS5nZXRGdWxsWWVhcigpXG4gICAgICAgICAgICAgICAgfV07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX28ubWFpbkNhbGVuZGFyID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJzWzBdLm1vbnRoICs9IDEgLSB0aGlzLl9vLm51bWJlck9mTW9udGhzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5hZGp1c3RDYWxlbmRhcnMoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGp1c3REYXRlOiBmdW5jdGlvbihzaWduLCBkYXlzKSB7XG5cbiAgICAgICAgICAgIHZhciBkYXkgPSB0aGlzLmdldERhdGUoKSB8fCBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgdmFyIGRpZmZlcmVuY2UgPSBwYXJzZUludChkYXlzKSoyNCo2MCo2MCoxMDAwO1xuXG4gICAgICAgICAgICB2YXIgbmV3RGF5O1xuXG4gICAgICAgICAgICBpZiAoc2lnbiA9PT0gJ2FkZCcpIHtcbiAgICAgICAgICAgICAgICBuZXdEYXkgPSBuZXcgRGF0ZShkYXkudmFsdWVPZigpICsgZGlmZmVyZW5jZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNpZ24gPT09ICdzdWJ0cmFjdCcpIHtcbiAgICAgICAgICAgICAgICBuZXdEYXkgPSBuZXcgRGF0ZShkYXkudmFsdWVPZigpIC0gZGlmZmVyZW5jZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2V0RGF0ZShuZXdEYXkpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGFkanVzdENhbGVuZGFyczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFyc1swXSA9IGFkanVzdENhbGVuZGFyKHRoaXMuY2FsZW5kYXJzWzBdKTtcbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAxOyBjIDwgdGhpcy5fby5udW1iZXJPZk1vbnRoczsgYysrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhcnNbY10gPSBhZGp1c3RDYWxlbmRhcih7XG4gICAgICAgICAgICAgICAgICAgIG1vbnRoOiB0aGlzLmNhbGVuZGFyc1swXS5tb250aCArIGMsXG4gICAgICAgICAgICAgICAgICAgIHllYXI6IHRoaXMuY2FsZW5kYXJzWzBdLnllYXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZHJhdygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdvdG9Ub2RheTogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmdvdG9EYXRlKG5ldyBEYXRlKCkpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjaGFuZ2UgdmlldyB0byBhIHNwZWNpZmljIG1vbnRoICh6ZXJvLWluZGV4LCBlLmcuIDA6IEphbnVhcnkpXG4gICAgICAgICAqL1xuICAgICAgICBnb3RvTW9udGg6IGZ1bmN0aW9uKG1vbnRoKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKG1vbnRoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJzWzBdLm1vbnRoID0gcGFyc2VJbnQobW9udGgsIDEwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkanVzdENhbGVuZGFycygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIG5leHRNb250aDogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFyc1swXS5tb250aCsrO1xuICAgICAgICAgICAgdGhpcy5hZGp1c3RDYWxlbmRhcnMoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBwcmV2TW9udGg6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5jYWxlbmRhcnNbMF0ubW9udGgtLTtcbiAgICAgICAgICAgIHRoaXMuYWRqdXN0Q2FsZW5kYXJzKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNoYW5nZSB2aWV3IHRvIGEgc3BlY2lmaWMgZnVsbCB5ZWFyIChlLmcuIFwiMjAxMlwiKVxuICAgICAgICAgKi9cbiAgICAgICAgZ290b1llYXI6IGZ1bmN0aW9uKHllYXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghaXNOYU4oeWVhcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGVuZGFyc1swXS55ZWFyID0gcGFyc2VJbnQoeWVhciwgMTApO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRqdXN0Q2FsZW5kYXJzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNoYW5nZSB0aGUgbWluRGF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgc2V0TWluRGF0ZTogZnVuY3Rpb24odmFsdWUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHNldFRvU3RhcnRPZkRheSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5taW5EYXRlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5taW5ZZWFyICA9IHZhbHVlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5taW5Nb250aCA9IHZhbHVlLmdldE1vbnRoKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX28ubWluRGF0ZSA9IGRlZmF1bHRzLm1pbkRhdGU7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5taW5ZZWFyICA9IGRlZmF1bHRzLm1pblllYXI7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5taW5Nb250aCA9IGRlZmF1bHRzLm1pbk1vbnRoO1xuICAgICAgICAgICAgICAgIHRoaXMuX28uc3RhcnRSYW5nZSA9IGRlZmF1bHRzLnN0YXJ0UmFuZ2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuZHJhdygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjaGFuZ2UgdGhlIG1heERhdGVcbiAgICAgICAgICovXG4gICAgICAgIHNldE1heERhdGU6IGZ1bmN0aW9uKHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZih2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICBzZXRUb1N0YXJ0T2ZEYXkodmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX28ubWF4RGF0ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMuX28ubWF4WWVhciA9IHZhbHVlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5tYXhNb250aCA9IHZhbHVlLmdldE1vbnRoKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX28ubWF4RGF0ZSA9IGRlZmF1bHRzLm1heERhdGU7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5tYXhZZWFyID0gZGVmYXVsdHMubWF4WWVhcjtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLm1heE1vbnRoID0gZGVmYXVsdHMubWF4TW9udGg7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5lbmRSYW5nZSA9IGRlZmF1bHRzLmVuZFJhbmdlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmRyYXcoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRTdGFydFJhbmdlOiBmdW5jdGlvbih2YWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fby5zdGFydFJhbmdlID0gdmFsdWU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0RW5kUmFuZ2U6IGZ1bmN0aW9uKHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9vLmVuZFJhbmdlID0gdmFsdWU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJlZnJlc2ggdGhlIEhUTUxcbiAgICAgICAgICovXG4gICAgICAgIGRyYXc6IGZ1bmN0aW9uKGZvcmNlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3YgJiYgIWZvcmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9wdHMgPSB0aGlzLl9vLFxuICAgICAgICAgICAgICAgIG1pblllYXIgPSBvcHRzLm1pblllYXIsXG4gICAgICAgICAgICAgICAgbWF4WWVhciA9IG9wdHMubWF4WWVhcixcbiAgICAgICAgICAgICAgICBtaW5Nb250aCA9IG9wdHMubWluTW9udGgsXG4gICAgICAgICAgICAgICAgbWF4TW9udGggPSBvcHRzLm1heE1vbnRoLFxuICAgICAgICAgICAgICAgIGh0bWwgPSAnJyxcbiAgICAgICAgICAgICAgICByYW5kSWQ7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl95IDw9IG1pblllYXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl95ID0gbWluWWVhcjtcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKG1pbk1vbnRoKSAmJiB0aGlzLl9tIDwgbWluTW9udGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbSA9IG1pbk1vbnRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl95ID49IG1heFllYXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl95ID0gbWF4WWVhcjtcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKG1heE1vbnRoKSAmJiB0aGlzLl9tID4gbWF4TW9udGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbSA9IG1heE1vbnRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmFuZElkID0gJ3Bpa2EtdGl0bGUtJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnJlcGxhY2UoL1teYS16XSsvZywgJycpLnN1YnN0cigwLCAyKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBvcHRzLm51bWJlck9mTW9udGhzOyBjKyspIHtcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwicGlrYS1sZW5kYXJcIj4nICsgcmVuZGVyVGl0bGUodGhpcywgYywgdGhpcy5jYWxlbmRhcnNbY10ueWVhciwgdGhpcy5jYWxlbmRhcnNbY10ubW9udGgsIHRoaXMuY2FsZW5kYXJzWzBdLnllYXIsIHJhbmRJZCkgKyB0aGlzLnJlbmRlcih0aGlzLmNhbGVuZGFyc1tjXS55ZWFyLCB0aGlzLmNhbGVuZGFyc1tjXS5tb250aCwgcmFuZElkKSArICc8L2Rpdj4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmVsLmlubmVySFRNTCA9IGh0bWw7XG5cbiAgICAgICAgICAgIGlmIChvcHRzLmJvdW5kKSB7XG4gICAgICAgICAgICAgICAgaWYob3B0cy5maWVsZC50eXBlICE9PSAnaGlkZGVuJykge1xuICAgICAgICAgICAgICAgICAgICBzdG8oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRzLnRyaWdnZXIuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuX28ub25EcmF3ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5vbkRyYXcodGhpcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRzLmJvdW5kKSB7XG4gICAgICAgICAgICAgICAgLy8gbGV0IHRoZSBzY3JlZW4gcmVhZGVyIHVzZXIga25vdyB0byB1c2UgYXJyb3cga2V5c1xuICAgICAgICAgICAgICAgIG9wdHMuZmllbGQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ1VzZSB0aGUgYXJyb3cga2V5cyB0byBwaWNrIGEgZGF0ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGFkanVzdFBvc2l0aW9uOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBmaWVsZCwgcEVsLCB3aWR0aCwgaGVpZ2h0LCB2aWV3cG9ydFdpZHRoLCB2aWV3cG9ydEhlaWdodCwgc2Nyb2xsVG9wLCBsZWZ0LCB0b3AsIGNsaWVudFJlY3Q7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9vLmNvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLmVsLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblxuICAgICAgICAgICAgZmllbGQgPSB0aGlzLl9vLnRyaWdnZXI7XG4gICAgICAgICAgICBwRWwgPSBmaWVsZDtcbiAgICAgICAgICAgIHdpZHRoID0gdGhpcy5lbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIGhlaWdodCA9IHRoaXMuZWwub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgdmlld3BvcnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgIHZpZXdwb3J0SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICBzY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWVsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjbGllbnRSZWN0ID0gZmllbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgbGVmdCA9IGNsaWVudFJlY3QubGVmdCArIHdpbmRvdy5wYWdlWE9mZnNldDtcbiAgICAgICAgICAgICAgICB0b3AgPSBjbGllbnRSZWN0LmJvdHRvbSArIHdpbmRvdy5wYWdlWU9mZnNldDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGVmdCA9IHBFbC5vZmZzZXRMZWZ0O1xuICAgICAgICAgICAgICAgIHRvcCAgPSBwRWwub2Zmc2V0VG9wICsgcEVsLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICB3aGlsZSgocEVsID0gcEVsLm9mZnNldFBhcmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdCArPSBwRWwub2Zmc2V0TGVmdDtcbiAgICAgICAgICAgICAgICAgICAgdG9wICArPSBwRWwub2Zmc2V0VG9wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZGVmYXVsdCBwb3NpdGlvbiBpcyBib3R0b20gJiBsZWZ0XG4gICAgICAgICAgICBpZiAoKHRoaXMuX28ucmVwb3NpdGlvbiAmJiBsZWZ0ICsgd2lkdGggPiB2aWV3cG9ydFdpZHRoKSB8fFxuICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fby5wb3NpdGlvbi5pbmRleE9mKCdyaWdodCcpID4gLTEgJiZcbiAgICAgICAgICAgICAgICAgICAgbGVmdCAtIHdpZHRoICsgZmllbGQub2Zmc2V0V2lkdGggPiAwXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgbGVmdCA9IGxlZnQgLSB3aWR0aCArIGZpZWxkLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCh0aGlzLl9vLnJlcG9zaXRpb24gJiYgdG9wICsgaGVpZ2h0ID4gdmlld3BvcnRIZWlnaHQgKyBzY3JvbGxUb3ApIHx8XG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vLnBvc2l0aW9uLmluZGV4T2YoJ3RvcCcpID4gLTEgJiZcbiAgICAgICAgICAgICAgICAgICAgdG9wIC0gaGVpZ2h0IC0gZmllbGQub2Zmc2V0SGVpZ2h0ID4gMFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRvcCA9IHRvcCAtIGhlaWdodCAtIGZpZWxkLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5lbC5zdHlsZS5sZWZ0ID0gbGVmdCArICdweCc7XG4gICAgICAgICAgICB0aGlzLmVsLnN0eWxlLnRvcCA9IHRvcCArICdweCc7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJlbmRlciBIVE1MIGZvciBhIHBhcnRpY3VsYXIgbW9udGhcbiAgICAgICAgICovXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24oeWVhciwgbW9udGgsIHJhbmRJZClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIG9wdHMgICA9IHRoaXMuX28sXG4gICAgICAgICAgICAgICAgbm93ICAgID0gbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICBkYXlzICAgPSBnZXREYXlzSW5Nb250aCh5ZWFyLCBtb250aCksXG4gICAgICAgICAgICAgICAgYmVmb3JlID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDEpLmdldERheSgpLFxuICAgICAgICAgICAgICAgIGRhdGEgICA9IFtdLFxuICAgICAgICAgICAgICAgIHJvdyAgICA9IFtdO1xuICAgICAgICAgICAgc2V0VG9TdGFydE9mRGF5KG5vdyk7XG4gICAgICAgICAgICBpZiAob3B0cy5maXJzdERheSA+IDApIHtcbiAgICAgICAgICAgICAgICBiZWZvcmUgLT0gb3B0cy5maXJzdERheTtcbiAgICAgICAgICAgICAgICBpZiAoYmVmb3JlIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBiZWZvcmUgKz0gNztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJldmlvdXNNb250aCA9IG1vbnRoID09PSAwID8gMTEgOiBtb250aCAtIDEsXG4gICAgICAgICAgICAgICAgbmV4dE1vbnRoID0gbW9udGggPT09IDExID8gMCA6IG1vbnRoICsgMSxcbiAgICAgICAgICAgICAgICB5ZWFyT2ZQcmV2aW91c01vbnRoID0gbW9udGggPT09IDAgPyB5ZWFyIC0gMSA6IHllYXIsXG4gICAgICAgICAgICAgICAgeWVhck9mTmV4dE1vbnRoID0gbW9udGggPT09IDExID8geWVhciArIDEgOiB5ZWFyLFxuICAgICAgICAgICAgICAgIGRheXNJblByZXZpb3VzTW9udGggPSBnZXREYXlzSW5Nb250aCh5ZWFyT2ZQcmV2aW91c01vbnRoLCBwcmV2aW91c01vbnRoKTtcbiAgICAgICAgICAgIHZhciBjZWxscyA9IGRheXMgKyBiZWZvcmUsXG4gICAgICAgICAgICAgICAgYWZ0ZXIgPSBjZWxscztcbiAgICAgICAgICAgIHdoaWxlKGFmdGVyID4gNykge1xuICAgICAgICAgICAgICAgIGFmdGVyIC09IDc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjZWxscyArPSA3IC0gYWZ0ZXI7XG4gICAgICAgICAgICB2YXIgaXNXZWVrU2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCByID0gMDsgaSA8IGNlbGxzOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFyIGRheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxICsgKGkgLSBiZWZvcmUpKSxcbiAgICAgICAgICAgICAgICAgICAgaXNTZWxlY3RlZCA9IGlzRGF0ZSh0aGlzLl9kKSA/IGNvbXBhcmVEYXRlcyhkYXksIHRoaXMuX2QpIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzVG9kYXkgPSBjb21wYXJlRGF0ZXMoZGF5LCBub3cpLFxuICAgICAgICAgICAgICAgICAgICBoYXNFdmVudCA9IG9wdHMuZXZlbnRzLmluZGV4T2YoZGF5LnRvRGF0ZVN0cmluZygpKSAhPT0gLTEgPyB0cnVlIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzRW1wdHkgPSBpIDwgYmVmb3JlIHx8IGkgPj0gKGRheXMgKyBiZWZvcmUpLFxuICAgICAgICAgICAgICAgICAgICBkYXlOdW1iZXIgPSAxICsgKGkgLSBiZWZvcmUpLFxuICAgICAgICAgICAgICAgICAgICBtb250aE51bWJlciA9IG1vbnRoLFxuICAgICAgICAgICAgICAgICAgICB5ZWFyTnVtYmVyID0geWVhcixcbiAgICAgICAgICAgICAgICAgICAgaXNTdGFydFJhbmdlID0gb3B0cy5zdGFydFJhbmdlICYmIGNvbXBhcmVEYXRlcyhvcHRzLnN0YXJ0UmFuZ2UsIGRheSksXG4gICAgICAgICAgICAgICAgICAgIGlzRW5kUmFuZ2UgPSBvcHRzLmVuZFJhbmdlICYmIGNvbXBhcmVEYXRlcyhvcHRzLmVuZFJhbmdlLCBkYXkpLFxuICAgICAgICAgICAgICAgICAgICBpc0luUmFuZ2UgPSBvcHRzLnN0YXJ0UmFuZ2UgJiYgb3B0cy5lbmRSYW5nZSAmJiBvcHRzLnN0YXJ0UmFuZ2UgPCBkYXkgJiYgZGF5IDwgb3B0cy5lbmRSYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgaXNEaXNhYmxlZCA9IChvcHRzLm1pbkRhdGUgJiYgZGF5IDwgb3B0cy5taW5EYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9wdHMubWF4RGF0ZSAmJiBkYXkgPiBvcHRzLm1heERhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAob3B0cy5kaXNhYmxlV2Vla2VuZHMgJiYgaXNXZWVrZW5kKGRheSkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAob3B0cy5kaXNhYmxlRGF5Rm4gJiYgb3B0cy5kaXNhYmxlRGF5Rm4oZGF5KSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IGJlZm9yZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF5TnVtYmVyID0gZGF5c0luUHJldmlvdXNNb250aCArIGRheU51bWJlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoTnVtYmVyID0gcHJldmlvdXNNb250aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHllYXJOdW1iZXIgPSB5ZWFyT2ZQcmV2aW91c01vbnRoO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF5TnVtYmVyID0gZGF5TnVtYmVyIC0gZGF5cztcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoTnVtYmVyID0gbmV4dE1vbnRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgeWVhck51bWJlciA9IHllYXJPZk5leHRNb250aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBkYXlDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXk6IGRheU51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoOiBtb250aE51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6IHllYXJOdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNFdmVudDogaGFzRXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkOiBpc1NlbGVjdGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNUb2RheTogaXNUb2RheSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRGlzYWJsZWQ6IGlzRGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0VtcHR5OiBpc0VtcHR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTdGFydFJhbmdlOiBpc1N0YXJ0UmFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0VuZFJhbmdlOiBpc0VuZFJhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNJblJhbmdlOiBpc0luUmFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93RGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzOiBvcHRzLnNob3dEYXlzSW5OZXh0QW5kUHJldmlvdXNNb250aHNcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmIChvcHRzLnBpY2tXaG9sZVdlZWsgJiYgaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBpc1dlZWtTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcm93LnB1c2gocmVuZGVyRGF5KGRheUNvbmZpZykpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCsrciA9PT0gNykge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5zaG93V2Vla051bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93LnVuc2hpZnQocmVuZGVyV2VlayhpIC0gYmVmb3JlLCBtb250aCwgeWVhcikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChyZW5kZXJSb3cocm93LCBvcHRzLmlzUlRMLCBvcHRzLnBpY2tXaG9sZVdlZWssIGlzV2Vla1NlbGVjdGVkKSk7XG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICByID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaXNXZWVrU2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyVGFibGUob3B0cywgZGF0YSwgcmFuZElkKTtcbiAgICAgICAgfSxcblxuICAgICAgICBpc1Zpc2libGU6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Y7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2hvdzogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNWaXNpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl92ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcbiAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCAnaXMtaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX28uYm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkRXZlbnQoZG9jdW1lbnQsICdjbGljaycsIHRoaXMuX29uQ2xpY2spO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkanVzdFBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5fby5vbk9wZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fby5vbk9wZW4uY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGlkZTogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgdiA9IHRoaXMuX3Y7XG4gICAgICAgICAgICBpZiAodiAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fby5ib3VuZCkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVFdmVudChkb2N1bWVudCwgJ2NsaWNrJywgdGhpcy5fb25DbGljayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZWwuc3R5bGUucG9zaXRpb24gPSAnc3RhdGljJzsgLy8gcmVzZXRcbiAgICAgICAgICAgICAgICB0aGlzLmVsLnN0eWxlLmxlZnQgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgdGhpcy5lbC5zdHlsZS50b3AgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgYWRkQ2xhc3ModGhpcy5lbCwgJ2lzLWhpZGRlbicpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3YgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAodiAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB0aGlzLl9vLm9uQ2xvc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fby5vbkNsb3NlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHQU1FIE9WRVJcbiAgICAgICAgICovXG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICByZW1vdmVFdmVudCh0aGlzLmVsLCAnbW91c2Vkb3duJywgdGhpcy5fb25Nb3VzZURvd24sIHRydWUpO1xuICAgICAgICAgICAgcmVtb3ZlRXZlbnQodGhpcy5lbCwgJ3RvdWNoZW5kJywgdGhpcy5fb25Nb3VzZURvd24sIHRydWUpO1xuICAgICAgICAgICAgcmVtb3ZlRXZlbnQodGhpcy5lbCwgJ2NoYW5nZScsIHRoaXMuX29uQ2hhbmdlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlRXZlbnQodGhpcy5fby5maWVsZCwgJ2NoYW5nZScsIHRoaXMuX29uSW5wdXRDaGFuZ2UpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vLmJvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUV2ZW50KHRoaXMuX28udHJpZ2dlciwgJ2NsaWNrJywgdGhpcy5fb25JbnB1dENsaWNrKTtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRXZlbnQodGhpcy5fby50cmlnZ2VyLCAnZm9jdXMnLCB0aGlzLl9vbklucHV0Rm9jdXMpO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVFdmVudCh0aGlzLl9vLnRyaWdnZXIsICdibHVyJywgdGhpcy5fb25JbnB1dEJsdXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVsLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICByZXR1cm4gUGlrYWRheTtcblxufSkpO1xuIiwiIWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShuKXtyZXR1cm5cInVuZGVmaW5lZFwiPT10eXBlb2YgdGhpc3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpIT09ZS5wcm90b3R5cGU/bmV3IGUobik6KE89dGhpcyxPLnZlcnNpb249XCIzLjMuNlwiLE8udG9vbHM9bmV3IEUsTy5pc1N1cHBvcnRlZCgpPyhPLnRvb2xzLmV4dGVuZChPLmRlZmF1bHRzLG58fHt9KSxPLmRlZmF1bHRzLmNvbnRhaW5lcj10KE8uZGVmYXVsdHMpLE8uc3RvcmU9e2VsZW1lbnRzOnt9LGNvbnRhaW5lcnM6W119LE8uc2VxdWVuY2VzPXt9LE8uaGlzdG9yeT1bXSxPLnVpZD0wLE8uaW5pdGlhbGl6ZWQ9ITEpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBjb25zb2xlJiZudWxsIT09Y29uc29sZSxPKX1mdW5jdGlvbiB0KGUpe2lmKGUmJmUuY29udGFpbmVyKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZS5jb250YWluZXIpcmV0dXJuIHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihlLmNvbnRhaW5lcik7aWYoTy50b29scy5pc05vZGUoZS5jb250YWluZXIpKXJldHVybiBlLmNvbnRhaW5lcn1yZXR1cm4gTy5kZWZhdWx0cy5jb250YWluZXJ9ZnVuY3Rpb24gbihlLHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlP0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQucXVlcnlTZWxlY3RvckFsbChlKSk6Ty50b29scy5pc05vZGUoZSk/W2VdOk8udG9vbHMuaXNOb2RlTGlzdChlKT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlKTpbXX1mdW5jdGlvbiBpKCl7cmV0dXJuKytPLnVpZH1mdW5jdGlvbiBvKGUsdCxuKXt0LmNvbnRhaW5lciYmKHQuY29udGFpbmVyPW4pLGUuY29uZmlnP2UuY29uZmlnPU8udG9vbHMuZXh0ZW5kQ2xvbmUoZS5jb25maWcsdCk6ZS5jb25maWc9Ty50b29scy5leHRlbmRDbG9uZShPLmRlZmF1bHRzLHQpLFwidG9wXCI9PT1lLmNvbmZpZy5vcmlnaW58fFwiYm90dG9tXCI9PT1lLmNvbmZpZy5vcmlnaW4/ZS5jb25maWcuYXhpcz1cIllcIjplLmNvbmZpZy5heGlzPVwiWFwifWZ1bmN0aW9uIHIoZSl7dmFyIHQ9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZS5kb21FbCk7ZS5zdHlsZXN8fChlLnN0eWxlcz17dHJhbnNpdGlvbjp7fSx0cmFuc2Zvcm06e30sY29tcHV0ZWQ6e319LGUuc3R5bGVzLmlubGluZT1lLmRvbUVsLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpfHxcIlwiLGUuc3R5bGVzLmlubGluZSs9XCI7IHZpc2liaWxpdHk6IHZpc2libGU7IFwiLGUuc3R5bGVzLmNvbXB1dGVkLm9wYWNpdHk9dC5vcGFjaXR5LHQudHJhbnNpdGlvbiYmXCJhbGwgMHMgZWFzZSAwc1wiIT09dC50cmFuc2l0aW9uP2Uuc3R5bGVzLmNvbXB1dGVkLnRyYW5zaXRpb249dC50cmFuc2l0aW9uK1wiLCBcIjplLnN0eWxlcy5jb21wdXRlZC50cmFuc2l0aW9uPVwiXCIpLGUuc3R5bGVzLnRyYW5zaXRpb24uaW5zdGFudD1zKGUsMCksZS5zdHlsZXMudHJhbnNpdGlvbi5kZWxheWVkPXMoZSxlLmNvbmZpZy5kZWxheSksZS5zdHlsZXMudHJhbnNmb3JtLmluaXRpYWw9XCIgLXdlYmtpdC10cmFuc2Zvcm06XCIsZS5zdHlsZXMudHJhbnNmb3JtLnRhcmdldD1cIiAtd2Via2l0LXRyYW5zZm9ybTpcIixhKGUpLGUuc3R5bGVzLnRyYW5zZm9ybS5pbml0aWFsKz1cInRyYW5zZm9ybTpcIixlLnN0eWxlcy50cmFuc2Zvcm0udGFyZ2V0Kz1cInRyYW5zZm9ybTpcIixhKGUpfWZ1bmN0aW9uIHMoZSx0KXt2YXIgbj1lLmNvbmZpZztyZXR1cm5cIi13ZWJraXQtdHJhbnNpdGlvbjogXCIrZS5zdHlsZXMuY29tcHV0ZWQudHJhbnNpdGlvbitcIi13ZWJraXQtdHJhbnNmb3JtIFwiK24uZHVyYXRpb24vMWUzK1wicyBcIituLmVhc2luZytcIiBcIit0LzFlMytcInMsIG9wYWNpdHkgXCIrbi5kdXJhdGlvbi8xZTMrXCJzIFwiK24uZWFzaW5nK1wiIFwiK3QvMWUzK1wiczsgdHJhbnNpdGlvbjogXCIrZS5zdHlsZXMuY29tcHV0ZWQudHJhbnNpdGlvbitcInRyYW5zZm9ybSBcIituLmR1cmF0aW9uLzFlMytcInMgXCIrbi5lYXNpbmcrXCIgXCIrdC8xZTMrXCJzLCBvcGFjaXR5IFwiK24uZHVyYXRpb24vMWUzK1wicyBcIituLmVhc2luZytcIiBcIit0LzFlMytcInM7IFwifWZ1bmN0aW9uIGEoZSl7dmFyIHQsbj1lLmNvbmZpZyxpPWUuc3R5bGVzLnRyYW5zZm9ybTt0PVwidG9wXCI9PT1uLm9yaWdpbnx8XCJsZWZ0XCI9PT1uLm9yaWdpbj8vXi0vLnRlc3Qobi5kaXN0YW5jZSk/bi5kaXN0YW5jZS5zdWJzdHIoMSk6XCItXCIrbi5kaXN0YW5jZTpuLmRpc3RhbmNlLHBhcnNlSW50KG4uZGlzdGFuY2UpJiYoaS5pbml0aWFsKz1cIiB0cmFuc2xhdGVcIituLmF4aXMrXCIoXCIrdCtcIilcIixpLnRhcmdldCs9XCIgdHJhbnNsYXRlXCIrbi5heGlzK1wiKDApXCIpLG4uc2NhbGUmJihpLmluaXRpYWwrPVwiIHNjYWxlKFwiK24uc2NhbGUrXCIpXCIsaS50YXJnZXQrPVwiIHNjYWxlKDEpXCIpLG4ucm90YXRlLngmJihpLmluaXRpYWwrPVwiIHJvdGF0ZVgoXCIrbi5yb3RhdGUueCtcImRlZylcIixpLnRhcmdldCs9XCIgcm90YXRlWCgwKVwiKSxuLnJvdGF0ZS55JiYoaS5pbml0aWFsKz1cIiByb3RhdGVZKFwiK24ucm90YXRlLnkrXCJkZWcpXCIsaS50YXJnZXQrPVwiIHJvdGF0ZVkoMClcIiksbi5yb3RhdGUueiYmKGkuaW5pdGlhbCs9XCIgcm90YXRlWihcIituLnJvdGF0ZS56K1wiZGVnKVwiLGkudGFyZ2V0Kz1cIiByb3RhdGVaKDApXCIpLGkuaW5pdGlhbCs9XCI7IG9wYWNpdHk6IFwiK24ub3BhY2l0eStcIjtcIixpLnRhcmdldCs9XCI7IG9wYWNpdHk6IFwiK2Uuc3R5bGVzLmNvbXB1dGVkLm9wYWNpdHkrXCI7XCJ9ZnVuY3Rpb24gbChlKXt2YXIgdD1lLmNvbmZpZy5jb250YWluZXI7dCYmTy5zdG9yZS5jb250YWluZXJzLmluZGV4T2YodCk9PT0tMSYmTy5zdG9yZS5jb250YWluZXJzLnB1c2goZS5jb25maWcuY29udGFpbmVyKSxPLnN0b3JlLmVsZW1lbnRzW2UuaWRdPWV9ZnVuY3Rpb24gYyhlLHQsbil7dmFyIGk9e3RhcmdldDplLGNvbmZpZzp0LGludGVydmFsOm59O08uaGlzdG9yeS5wdXNoKGkpfWZ1bmN0aW9uIGYoKXtpZihPLmlzU3VwcG9ydGVkKCkpe3koKTtmb3IodmFyIGU9MDtlPE8uc3RvcmUuY29udGFpbmVycy5sZW5ndGg7ZSsrKU8uc3RvcmUuY29udGFpbmVyc1tlXS5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsZCksTy5zdG9yZS5jb250YWluZXJzW2VdLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIixkKTtPLmluaXRpYWxpemVkfHwod2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIixkKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLGQpLE8uaW5pdGlhbGl6ZWQ9ITApfXJldHVybiBPfWZ1bmN0aW9uIGQoKXtUKHkpfWZ1bmN0aW9uIHUoKXt2YXIgZSx0LG4saTtPLnRvb2xzLmZvck93bihPLnNlcXVlbmNlcyxmdW5jdGlvbihvKXtpPU8uc2VxdWVuY2VzW29dLGU9ITE7Zm9yKHZhciByPTA7cjxpLmVsZW1JZHMubGVuZ3RoO3IrKyluPWkuZWxlbUlkc1tyXSx0PU8uc3RvcmUuZWxlbWVudHNbbl0scSh0KSYmIWUmJihlPSEwKTtpLmFjdGl2ZT1lfSl9ZnVuY3Rpb24geSgpe3ZhciBlLHQ7dSgpLE8udG9vbHMuZm9yT3duKE8uc3RvcmUuZWxlbWVudHMsZnVuY3Rpb24obil7dD1PLnN0b3JlLmVsZW1lbnRzW25dLGU9dyh0KSxnKHQpPyh0LmNvbmZpZy5iZWZvcmVSZXZlYWwodC5kb21FbCksZT90LmRvbUVsLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsdC5zdHlsZXMuaW5saW5lK3Quc3R5bGVzLnRyYW5zZm9ybS50YXJnZXQrdC5zdHlsZXMudHJhbnNpdGlvbi5kZWxheWVkKTp0LmRvbUVsLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsdC5zdHlsZXMuaW5saW5lK3Quc3R5bGVzLnRyYW5zZm9ybS50YXJnZXQrdC5zdHlsZXMudHJhbnNpdGlvbi5pbnN0YW50KSxwKFwicmV2ZWFsXCIsdCxlKSx0LnJldmVhbGluZz0hMCx0LnNlZW49ITAsdC5zZXF1ZW5jZSYmbSh0LGUpKTp2KHQpJiYodC5jb25maWcuYmVmb3JlUmVzZXQodC5kb21FbCksdC5kb21FbC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLHQuc3R5bGVzLmlubGluZSt0LnN0eWxlcy50cmFuc2Zvcm0uaW5pdGlhbCt0LnN0eWxlcy50cmFuc2l0aW9uLmluc3RhbnQpLHAoXCJyZXNldFwiLHQpLHQucmV2ZWFsaW5nPSExKX0pfWZ1bmN0aW9uIG0oZSx0KXt2YXIgbj0wLGk9MCxvPU8uc2VxdWVuY2VzW2Uuc2VxdWVuY2UuaWRdO28uYmxvY2tlZD0hMCx0JiZcIm9ubG9hZFwiPT09ZS5jb25maWcudXNlRGVsYXkmJihpPWUuY29uZmlnLmRlbGF5KSxlLnNlcXVlbmNlLnRpbWVyJiYobj1NYXRoLmFicyhlLnNlcXVlbmNlLnRpbWVyLnN0YXJ0ZWQtbmV3IERhdGUpLHdpbmRvdy5jbGVhclRpbWVvdXQoZS5zZXF1ZW5jZS50aW1lcikpLGUuc2VxdWVuY2UudGltZXI9e3N0YXJ0ZWQ6bmV3IERhdGV9LGUuc2VxdWVuY2UudGltZXIuY2xvY2s9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtvLmJsb2NrZWQ9ITEsZS5zZXF1ZW5jZS50aW1lcj1udWxsLGQoKX0sTWF0aC5hYnMoby5pbnRlcnZhbCkraS1uKX1mdW5jdGlvbiBwKGUsdCxuKXt2YXIgaT0wLG89MCxyPVwiYWZ0ZXJcIjtzd2l0Y2goZSl7Y2FzZVwicmV2ZWFsXCI6bz10LmNvbmZpZy5kdXJhdGlvbixuJiYobys9dC5jb25maWcuZGVsYXkpLHIrPVwiUmV2ZWFsXCI7YnJlYWs7Y2FzZVwicmVzZXRcIjpvPXQuY29uZmlnLmR1cmF0aW9uLHIrPVwiUmVzZXRcIn10LnRpbWVyJiYoaT1NYXRoLmFicyh0LnRpbWVyLnN0YXJ0ZWQtbmV3IERhdGUpLHdpbmRvdy5jbGVhclRpbWVvdXQodC50aW1lci5jbG9jaykpLHQudGltZXI9e3N0YXJ0ZWQ6bmV3IERhdGV9LHQudGltZXIuY2xvY2s9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmNvbmZpZ1tyXSh0LmRvbUVsKSx0LnRpbWVyPW51bGx9LG8taSl9ZnVuY3Rpb24gZyhlKXtpZihlLnNlcXVlbmNlKXt2YXIgdD1PLnNlcXVlbmNlc1tlLnNlcXVlbmNlLmlkXTtyZXR1cm4gdC5hY3RpdmUmJiF0LmJsb2NrZWQmJiFlLnJldmVhbGluZyYmIWUuZGlzYWJsZWR9cmV0dXJuIHEoZSkmJiFlLnJldmVhbGluZyYmIWUuZGlzYWJsZWR9ZnVuY3Rpb24gdyhlKXt2YXIgdD1lLmNvbmZpZy51c2VEZWxheTtyZXR1cm5cImFsd2F5c1wiPT09dHx8XCJvbmxvYWRcIj09PXQmJiFPLmluaXRpYWxpemVkfHxcIm9uY2VcIj09PXQmJiFlLnNlZW59ZnVuY3Rpb24gdihlKXtpZihlLnNlcXVlbmNlKXt2YXIgdD1PLnNlcXVlbmNlc1tlLnNlcXVlbmNlLmlkXTtyZXR1cm4hdC5hY3RpdmUmJmUuY29uZmlnLnJlc2V0JiZlLnJldmVhbGluZyYmIWUuZGlzYWJsZWR9cmV0dXJuIXEoZSkmJmUuY29uZmlnLnJlc2V0JiZlLnJldmVhbGluZyYmIWUuZGlzYWJsZWR9ZnVuY3Rpb24gYihlKXtyZXR1cm57d2lkdGg6ZS5jbGllbnRXaWR0aCxoZWlnaHQ6ZS5jbGllbnRIZWlnaHR9fWZ1bmN0aW9uIGgoZSl7aWYoZSYmZSE9PXdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpe3ZhciB0PXgoZSk7cmV0dXJue3g6ZS5zY3JvbGxMZWZ0K3QubGVmdCx5OmUuc2Nyb2xsVG9wK3QudG9wfX1yZXR1cm57eDp3aW5kb3cucGFnZVhPZmZzZXQseTp3aW5kb3cucGFnZVlPZmZzZXR9fWZ1bmN0aW9uIHgoZSl7dmFyIHQ9MCxuPTAsaT1lLm9mZnNldEhlaWdodCxvPWUub2Zmc2V0V2lkdGg7ZG8gaXNOYU4oZS5vZmZzZXRUb3ApfHwodCs9ZS5vZmZzZXRUb3ApLGlzTmFOKGUub2Zmc2V0TGVmdCl8fChuKz1lLm9mZnNldExlZnQpLGU9ZS5vZmZzZXRQYXJlbnQ7d2hpbGUoZSk7cmV0dXJue3RvcDp0LGxlZnQ6bixoZWlnaHQ6aSx3aWR0aDpvfX1mdW5jdGlvbiBxKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1jK2EqcyxuPWYrbCpzLGk9ZC1hKnMseT11LWwqcyxtPXIueStlLmNvbmZpZy52aWV3T2Zmc2V0LnRvcCxwPXIueCtlLmNvbmZpZy52aWV3T2Zmc2V0LmxlZnQsZz1yLnktZS5jb25maWcudmlld09mZnNldC5ib3R0b20rby5oZWlnaHQsdz1yLngtZS5jb25maWcudmlld09mZnNldC5yaWdodCtvLndpZHRoO3JldHVybiB0PGcmJmk+bSYmbjx3JiZ5PnB9ZnVuY3Rpb24gbigpe3JldHVyblwiZml4ZWRcIj09PXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGUuZG9tRWwpLnBvc2l0aW9ufXZhciBpPXgoZS5kb21FbCksbz1iKGUuY29uZmlnLmNvbnRhaW5lcikscj1oKGUuY29uZmlnLmNvbnRhaW5lcikscz1lLmNvbmZpZy52aWV3RmFjdG9yLGE9aS5oZWlnaHQsbD1pLndpZHRoLGM9aS50b3AsZj1pLmxlZnQsZD1jK2EsdT1mK2w7cmV0dXJuIHQoKXx8bigpfWZ1bmN0aW9uIEUoKXt9dmFyIE8sVDtlLnByb3RvdHlwZS5kZWZhdWx0cz17b3JpZ2luOlwiYm90dG9tXCIsZGlzdGFuY2U6XCIyMHB4XCIsZHVyYXRpb246NTAwLGRlbGF5OjAscm90YXRlOnt4OjAseTowLHo6MH0sb3BhY2l0eTowLHNjYWxlOi45LGVhc2luZzpcImN1YmljLWJlemllcigwLjYsIDAuMiwgMC4xLCAxKVwiLGNvbnRhaW5lcjp3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LG1vYmlsZTohMCxyZXNldDohMSx1c2VEZWxheTpcImFsd2F5c1wiLHZpZXdGYWN0b3I6LjIsdmlld09mZnNldDp7dG9wOjAscmlnaHQ6MCxib3R0b206MCxsZWZ0OjB9LGJlZm9yZVJldmVhbDpmdW5jdGlvbihlKXt9LGJlZm9yZVJlc2V0OmZ1bmN0aW9uKGUpe30sYWZ0ZXJSZXZlYWw6ZnVuY3Rpb24oZSl7fSxhZnRlclJlc2V0OmZ1bmN0aW9uKGUpe319LGUucHJvdG90eXBlLmlzU3VwcG9ydGVkPWZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlO3JldHVyblwiV2Via2l0VHJhbnNpdGlvblwiaW4gZSYmXCJXZWJraXRUcmFuc2Zvcm1cImluIGV8fFwidHJhbnNpdGlvblwiaW4gZSYmXCJ0cmFuc2Zvcm1cImluIGV9LGUucHJvdG90eXBlLnJldmVhbD1mdW5jdGlvbihlLHMsYSxkKXt2YXIgdSx5LG0scCxnLHc7aWYodm9pZCAwIT09cyYmXCJudW1iZXJcIj09dHlwZW9mIHM/KGE9cyxzPXt9KTp2b2lkIDAhPT1zJiZudWxsIT09c3x8KHM9e30pLHU9dChzKSx5PW4oZSx1KSwheS5sZW5ndGgpcmV0dXJuIE87YSYmXCJudW1iZXJcIj09dHlwZW9mIGEmJih3PWkoKSxnPU8uc2VxdWVuY2VzW3ddPXtpZDp3LGludGVydmFsOmEsZWxlbUlkczpbXSxhY3RpdmU6ITF9KTtmb3IodmFyIHY9MDt2PHkubGVuZ3RoO3YrKylwPXlbdl0uZ2V0QXR0cmlidXRlKFwiZGF0YS1zci1pZFwiKSxwP209Ty5zdG9yZS5lbGVtZW50c1twXToobT17aWQ6aSgpLGRvbUVsOnlbdl0sc2VlbjohMSxyZXZlYWxpbmc6ITF9LG0uZG9tRWwuc2V0QXR0cmlidXRlKFwiZGF0YS1zci1pZFwiLG0uaWQpKSxnJiYobS5zZXF1ZW5jZT17aWQ6Zy5pZCxpbmRleDpnLmVsZW1JZHMubGVuZ3RofSxnLmVsZW1JZHMucHVzaChtLmlkKSksbyhtLHMsdSkscihtKSxsKG0pLE8udG9vbHMuaXNNb2JpbGUoKSYmIW0uY29uZmlnLm1vYmlsZXx8IU8uaXNTdXBwb3J0ZWQoKT8obS5kb21FbC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLG0uc3R5bGVzLmlubGluZSksbS5kaXNhYmxlZD0hMCk6bS5yZXZlYWxpbmd8fG0uZG9tRWwuc2V0QXR0cmlidXRlKFwic3R5bGVcIixtLnN0eWxlcy5pbmxpbmUrbS5zdHlsZXMudHJhbnNmb3JtLmluaXRpYWwpO3JldHVybiFkJiZPLmlzU3VwcG9ydGVkKCkmJihjKGUscyxhKSxPLmluaXRUaW1lb3V0JiZ3aW5kb3cuY2xlYXJUaW1lb3V0KE8uaW5pdFRpbWVvdXQpLE8uaW5pdFRpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQoZiwwKSksT30sZS5wcm90b3R5cGUuc3luYz1mdW5jdGlvbigpe2lmKE8uaGlzdG9yeS5sZW5ndGgmJk8uaXNTdXBwb3J0ZWQoKSl7Zm9yKHZhciBlPTA7ZTxPLmhpc3RvcnkubGVuZ3RoO2UrKyl7dmFyIHQ9Ty5oaXN0b3J5W2VdO08ucmV2ZWFsKHQudGFyZ2V0LHQuY29uZmlnLHQuaW50ZXJ2YWwsITApfWYoKX1yZXR1cm4gT30sRS5wcm90b3R5cGUuaXNPYmplY3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT1lJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmZS5jb25zdHJ1Y3Rvcj09PU9iamVjdH0sRS5wcm90b3R5cGUuaXNOb2RlPWZ1bmN0aW9uKGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cuTm9kZT9lIGluc3RhbmNlb2Ygd2luZG93Lk5vZGU6ZSYmXCJvYmplY3RcIj09dHlwZW9mIGUmJlwibnVtYmVyXCI9PXR5cGVvZiBlLm5vZGVUeXBlJiZcInN0cmluZ1wiPT10eXBlb2YgZS5ub2RlTmFtZX0sRS5wcm90b3R5cGUuaXNOb2RlTGlzdD1mdW5jdGlvbihlKXt2YXIgdD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSksbj0vXlxcW29iamVjdCAoSFRNTENvbGxlY3Rpb258Tm9kZUxpc3R8T2JqZWN0KVxcXSQvO3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cuTm9kZUxpc3Q/ZSBpbnN0YW5jZW9mIHdpbmRvdy5Ob2RlTGlzdDplJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmbi50ZXN0KHQpJiZcIm51bWJlclwiPT10eXBlb2YgZS5sZW5ndGgmJigwPT09ZS5sZW5ndGh8fHRoaXMuaXNOb2RlKGVbMF0pKX0sRS5wcm90b3R5cGUuZm9yT3duPWZ1bmN0aW9uKGUsdCl7aWYoIXRoaXMuaXNPYmplY3QoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgXCJvYmplY3RcIiwgYnV0IHJlY2VpdmVkIFwiJyt0eXBlb2YgZSsnXCIuJyk7Zm9yKHZhciBuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmdChuKX0sRS5wcm90b3R5cGUuZXh0ZW5kPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZm9yT3duKHQsZnVuY3Rpb24obil7dGhpcy5pc09iamVjdCh0W25dKT8oZVtuXSYmdGhpcy5pc09iamVjdChlW25dKXx8KGVbbl09e30pLHRoaXMuZXh0ZW5kKGVbbl0sdFtuXSkpOmVbbl09dFtuXX0uYmluZCh0aGlzKSksZX0sRS5wcm90b3R5cGUuZXh0ZW5kQ2xvbmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5leHRlbmQodGhpcy5leHRlbmQoe30sZSksdCl9LEUucHJvdG90eXBlLmlzTW9iaWxlPWZ1bmN0aW9uKCl7cmV0dXJuL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpfSxUPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKGUpe3dpbmRvdy5zZXRUaW1lb3V0KGUsMWUzLzYwKX0sXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZcIm9iamVjdFwiPT10eXBlb2YgZGVmaW5lLmFtZCYmZGVmaW5lLmFtZD9kZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gZX0pOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWU6d2luZG93LlNjcm9sbFJldmVhbD1lfSgpO1xuIiwiLyoqXG4gKiBzaGF2ZSAtIFNoYXZlIGlzIGEgamF2YXNjcmlwdCBwbHVnaW4gdGhhdCB0cnVuY2F0ZXMgbXVsdGktbGluZSB0ZXh0IHdpdGhpbiBhIGh0bWwgZWxlbWVudCBiYXNlZCBvbiBzZXQgbWF4IGhlaWdodFxuICogQHZlcnNpb24gdjIuMS43XG4gKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vZG9sbGFyc2hhdmVjbHViL3NoYXZlI3JlYWRtZVxuICogQGF1dGhvciBKZWZmIFdhaW53cmlnaHQgPGpqd2FpbndyaWdodDJAZ21haWwuY29tPiAoamVmZnJ5LmluKVxuICogQGxpY2Vuc2UgTUlUICovXG4hZnVuY3Rpb24oZSx0KXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZSh0KTplLnNoYXZlPXQoKX0odGhpcyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoZSx0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307aWYoIXQpdGhyb3cgRXJyb3IoXCJtYXhIZWlnaHQgaXMgcmVxdWlyZWRcIik7dmFyIGk9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlKTplO2lmKGkpe3ZhciByPW4uY2hhcmFjdGVyfHxcIuKAplwiLHM9bi5jbGFzc25hbWV8fFwianMtc2hhdmVcIixhPW4uc3BhY2VzfHwhMCxvPSc8c3BhbiBjbGFzcz1cImpzLXNoYXZlLWNoYXJcIj4nK3IrXCI8L3NwYW4+XCI7XCJsZW5ndGhcImluIGl8fChpPVtpXSk7Zm9yKHZhciBoPTA7aDxpLmxlbmd0aDtoKz0xKXt2YXIgYz1pW2hdLGw9Yy5zdHlsZSxmPWMucXVlcnlTZWxlY3RvcihcIi5cIitzKSxkPXZvaWQgMD09PWMudGV4dENvbnRlbnQ/XCJpbm5lclRleHRcIjpcInRleHRDb250ZW50XCI7ZiYmKGMucmVtb3ZlQ2hpbGQoYy5xdWVyeVNlbGVjdG9yKFwiLmpzLXNoYXZlLWNoYXJcIikpLGNbZF09Y1tkXSk7dmFyIHY9Y1tkXSxnPWE/djp2LnNwbGl0KFwiIFwiKTtpZighKGcubGVuZ3RoPDIpKXt2YXIgdT1sLmhlaWdodDtsLmhlaWdodD1cImF1dG9cIjt2YXIgcD1sLm1heEhlaWdodDtpZihsLm1heEhlaWdodD1cIm5vbmVcIixjLm9mZnNldEhlaWdodDw9dClsLmhlaWdodD11LGwubWF4SGVpZ2h0PXA7ZWxzZXtmb3IodmFyIG09Zy5sZW5ndGgtMSxqPTAseD12b2lkIDA7ajxtOyl4PWorbSsxPj4xLGNbZF09YT9nLnNsaWNlKDAseCk6Zy5zbGljZSgwLHgpLmpvaW4oXCIgXCIpLGMuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsbyksYy5vZmZzZXRIZWlnaHQ+dD9tPWE/eC0yOngtMTpqPXg7Y1tkXT1hP2cuc2xpY2UoMCxtKTpnLnNsaWNlKDAsbSkuam9pbihcIiBcIiksYy5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIixvKTt2YXIgeT1hP2cuc2xpY2UobSk6Zy5zbGljZShtKS5qb2luKFwiIFwiKTtjLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCc8c3BhbiBjbGFzcz1cIicrcysnXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCI+Jyt5K1wiPC9zcGFuPlwiKSxsLmhlaWdodD11LGwubWF4SGVpZ2h0PXB9fX19fXJldHVybiBlfSk7IiwiLyoqXG4gKiBTaW1wbGUgTWFzayBNb25leSAoZWRpdGVkKVxuICogUGVndWVpIG8gY8OzZGlnbyBvcmlnaW5hbCwgY29udmVydGkgcHJhIDxlczYgbm8gYmFiZWxcbiAqIGUgZml6IGFsZ3VtYXMgbW9kaWZpY2HDp8O1ZXMgcHJhIGZ1bmNpb25hci5cbiAqIEBsaW5rOiBodHRwczovL2dpdGh1Yi5jb20vY29kZXJtYXJjb3Mvc2ltcGxlLW1hc2stbW9uZXkvYmxvYi9tYXN0ZXIvbGliL3NpbXBsZS1tYXNrLW1vbmV5LmpzXG4gKiBAcmV0dXJuIHtTdHJpbmd9IE1vbmV5IGZvcm1hdGVkXG4gKi9cbnZhciBTaW1wbGVNYXNrTW9uZXkgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBhcmdzID0ge1xuICAgIHByZWZpeDogJycsXG4gICAgc3VmZml4OiAnJyxcbiAgICBmaXhlZDogdHJ1ZSxcbiAgICBmcmFjdGlvbkRpZ2l0czogMixcbiAgICBkZWNpbWFsU2VwYXJhdG9yOiAnLCcsXG4gICAgdGhvdXNhbmRzU2VwYXJhdG9yOiAnLicsXG4gICAgYXV0b0NvbXBsZXRlRGVjaW1hbDogZmFsc2UsXG4gICAgZW1wdHlPckludmFsaWQ6IGZ1bmN0aW9uIGVtcHR5T3JJbnZhbGlkKCkge1xuICAgICAgcmV0dXJuIGFyZ3MuZml4ZWQgPyAnMCcgKyBhcmdzLmRlY2ltYWxTZXBhcmF0b3IgKyAnMDAnIDogJ18nICsgYXJncy5kZWNpbWFsU2VwYXJhdG9yICsgJ19fJztcbiAgICB9XG4gIH07XG5cbiAgdmFyIGZ1bmN0aW9ucyA9IHtcbiAgICBnZXQgYXJncygpIHtcbiAgICAgIHJldHVybiBhcmdzO1xuICAgIH0sXG4gICAgc2V0IGFyZ3ModmFsdWUpIHtcbiAgICAgIGFyZ3MgPSBPYmplY3QuYXNzaWduKGFyZ3MsIHZhbHVlKTtcbiAgICAgIGFyZ3MucHJlZml4ID0gdmFsdWUucHJlZml4IHx8IHZhbHVlLnByZWZmaXg7XG4gICAgfSxcblxuICAgIG9ubHlOdW1iZXI6IGZ1bmN0aW9uIG9ubHlOdW1iZXIodmFsdWUpIHtcbiAgICAgIHZhciByZXRvcm5vID0gJyc7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlzRmluaXRlKHZhbHVlW2ldKSkge1xuICAgICAgICAgIHJldG9ybm8gKz0gdmFsdWVbaV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJldG9ybm87XG4gICAgfSxcblxuICAgIGFkZGluZ1ByZWZpeDogZnVuY3Rpb24gYWRkaW5nUHJlZml4KHZhbHVlKSB7XG4gICAgICByZXR1cm4gJycgKyBhcmdzLnByZWZpeCArIHZhbHVlO1xuICAgIH0sXG4gICAgcmVtb3ZpbmdQcmVmaXg6IGZ1bmN0aW9uIHJlbW92aW5nUHJlZml4KHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUucmVwbGFjZShhcmdzLnByZWZpeCwgJycpO1xuICAgIH0sXG5cbiAgICBhZGRpbmdTdWZmaXg6IGZ1bmN0aW9uIGFkZGluZ1N1ZmZpeCh2YWx1ZSkge1xuICAgICAgcmV0dXJuICcnICsgdmFsdWUgKyBhcmdzLnN1ZmZpeDtcbiAgICB9LFxuICAgIHJlbW92aW5nU3VmZml4OiBmdW5jdGlvbiByZW1vdmluZ1N1ZmZpeCh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlLmluY2x1ZGVzKGFyZ3Muc3VmZml4LCB2YWx1ZS5sZW5ndGggLSBhcmdzLmZyYWN0aW9uRGlnaXRzKSkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoYXJncy5zdWZmaXgsICcnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDAsIHZhbHVlLmxlbmd0aCAtIDEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG5cbiAgICBhZGRpbmdDb21wbGV0ZXJGcm9tU3RhcnQ6IGZ1bmN0aW9uIGFkZGluZ0NvbXBsZXRlckZyb21TdGFydCh2YWx1ZSwgY29tcGxldGVyKSB7XG4gICAgICB3aGlsZSAodmFsdWUubGVuZ3RoIDwgYXJncy5mcmFjdGlvbkRpZ2l0cykge1xuICAgICAgICB2YWx1ZSA9ICcnICsgY29tcGxldGVyICsgdmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcblxuICAgIGFkZGluZ0NvbXBsZXRlckZyb21FbmQ6IGZ1bmN0aW9uIGFkZGluZ0NvbXBsZXRlckZyb21FbmQodmFsdWUsIGNvbXBsZXRlcikge1xuICAgICAgd2hpbGUgKHZhbHVlLmxlbmd0aCA8IGFyZ3MuZnJhY3Rpb25EaWdpdHMpIHtcbiAgICAgICAgdmFsdWUgPSAnJyArIHZhbHVlICsgY29tcGxldGVyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG5cbiAgICByZW1vdmluZ0NvbXBsZXRlckZyb21TdGFydDogZnVuY3Rpb24gcmVtb3ZpbmdDb21wbGV0ZXJGcm9tU3RhcnQodmFsdWUsIGNvbXBsZXRlcikge1xuICAgICAgd2hpbGUgKHZhbHVlWzBdID09PSBjb21wbGV0ZXIpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKGNvbXBsZXRlciwgJycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG5cbiAgICByZW1vdmluZ0NvbXBsZXRlckZyb21FbmQ6IGZ1bmN0aW9uIHJlbW92aW5nQ29tcGxldGVyRnJvbUVuZCh2YWx1ZSwgY29tcGxldGVyKSB7XG4gICAgICB3aGlsZSAodmFsdWVbdmFsdWUubGVuZ3RoIC0gMV0gPT09IGNvbXBsZXRlcikge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygwLCB2YWx1ZS5sZW5ndGggLSAxKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuXG4gICAgYWRkaW5nQXV0b0NvbXBsZXRlOiBmdW5jdGlvbiBhZGRpbmdBdXRvQ29tcGxldGUodmFsdWUpIHtcbiAgICAgIHZhciBuID0gJycgKyB2YWx1ZSArIGZ1bmN0aW9ucy5hZGRpbmdDb21wbGV0ZXJGcm9tRW5kKCcnLCAnMCcpO1xuICAgICAgcmV0dXJuIG47XG4gICAgfSxcblxuICAgIGF1dG9Db21wbGV0ZTogZnVuY3Rpb24gYXV0b0NvbXBsZXRlKHZhbHVlKSB7XG4gICAgICB2YXIgYXJyYXkgPSB2YWx1ZS5tYXRjaChuZXcgUmVnRXhwKCdcXFxcJyArIGFyZ3MuZGVjaW1hbFNlcGFyYXRvciwgJ2cnKSkgfHwgW107XG4gICAgICBpZiAoYXJyYXkubGVuZ3RoID4gMSkge1xuICAgICAgICB2YWx1ZSA9IGZ1bmN0aW9ucy5hZGRpbmdBdXRvQ29tcGxldGUodmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG5cbiAgICBhZGRpbmdEZWNpbWFsU2VwYXJhdG9yOiBmdW5jdGlvbiBhZGRpbmdEZWNpbWFsU2VwYXJhdG9yKHZhbHVlLCBjb21wbGV0ZXIsIHNlcGFyYXRvcikge1xuICAgICAgdmFyIGxlbmd0aCA9IHZhbHVlLmxlbmd0aCAtIGFyZ3MuZnJhY3Rpb25EaWdpdHM7XG5cbiAgICAgIHZhciByZWdleHBGcmFjdGlvbiA9IHZvaWQgMDtcbiAgICAgIHZhciBkZWNpbWFscyA9ICckMSc7XG4gICAgICB2YXIgZGV6ZW5hcyA9IGNvbXBsZXRlcjtcbiAgICAgIHZhciBjaGFyYWN0ZXIgPSBpc0Zpbml0ZShjb21wbGV0ZXIpID8gJ2QnIDogJ3cnO1xuXG4gICAgICByZWdleHBGcmFjdGlvbiA9ICcoXFxcXCcgKyBjaGFyYWN0ZXIgKyAneycgKyBhcmdzLmZyYWN0aW9uRGlnaXRzICsgJ30pJztcbiAgICAgIGlmIChsZW5ndGggPiAwKSB7XG4gICAgICAgIHJlZ2V4cEZyYWN0aW9uID0gJyhcXFxcJyArIGNoYXJhY3RlciArICd7JyArIGxlbmd0aCArICd9KScgKyByZWdleHBGcmFjdGlvbjtcbiAgICAgICAgZGV6ZW5hcyA9IGRlY2ltYWxzO1xuICAgICAgICBkZWNpbWFscyA9ICckMic7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKG5ldyBSZWdFeHAocmVnZXhwRnJhY3Rpb24pLCAnJyArIGRlemVuYXMgKyBzZXBhcmF0b3IgKyBkZWNpbWFscyk7XG4gICAgfSxcblxuICAgIGFkZGluZ0h1bmRyZWRzU2VwYXJhdG9yOiBmdW5jdGlvbiBhZGRpbmdIdW5kcmVkc1NlcGFyYXRvcih2YWx1ZSkge1xuICAgICAgdmFyIHNpemUgPSB2YWx1ZS5sZW5ndGggLSBhcmdzLmZyYWN0aW9uRGlnaXRzO1xuICAgICAgdmFyIGh1bmRyZWRzID0gTWF0aC5jZWlsKHNpemUgLyAzKTtcbiAgICAgIHZhciByZWdleHBIdW5kcmVkcyA9ICcoXFxcXGQpJztcblxuICAgICAgdmFyIHJlcGxhY2VtZW50ID0gYXJncy5kZWNpbWFsU2VwYXJhdG9yICsgJyQnICsgKGh1bmRyZWRzICsgMSk7XG5cbiAgICAgIGZvciAodmFyIGkgPSBodW5kcmVkczsgaSAhPT0gMDsgaS0tKSB7XG4gICAgICAgIGlmIChzaXplID49IDMpIHtcbiAgICAgICAgICByZWdleHBIdW5kcmVkcyA9ICcoXFxcXGR7M30pJyArIHJlZ2V4cEh1bmRyZWRzO1xuICAgICAgICAgIHNpemUgLT0gMztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZWdleHBIdW5kcmVkcyA9ICcoXFxcXGR7JyArIHNpemUgKyAnfSknICsgcmVnZXhwSHVuZHJlZHM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaSA+IDEpIHtcbiAgICAgICAgICByZXBsYWNlbWVudCA9IGFyZ3MudGhvdXNhbmRzU2VwYXJhdG9yICsgJyQnICsgaSArIHJlcGxhY2VtZW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcGxhY2VtZW50ID0gJyQnICsgaSArIHJlcGxhY2VtZW50O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKG5ldyBSZWdFeHAocmVnZXhwSHVuZHJlZHMpLCByZXBsYWNlbWVudCk7XG4gICAgfSxcbiAgICByZW1vdmVTZXBhcmF0b3I6IGZ1bmN0aW9uIHJlbW92ZVNlcGFyYXRvcih2YWx1ZSwgc2VwYXJhdG9yKSB7XG4gICAgICByZXR1cm4gdmFsdWUucmVwbGFjZShuZXcgUmVnRXhwKCdcXFxcJyArIHNlcGFyYXRvciwgJ2cnKSwgJycpO1xuICAgIH0sXG4gICAgZm9ybWF0RGVjaW1hbDogZnVuY3Rpb24gZm9ybWF0RGVjaW1hbCh2YWx1ZSwgY29tcGxldGVyLCBzZXBhcmF0b3IpIHtcbiAgICAgIHZhbHVlID0gZnVuY3Rpb25zLmFkZGluZ0NvbXBsZXRlckZyb21TdGFydCh2YWx1ZSwgY29tcGxldGVyKTtcbiAgICAgIHZhbHVlID0gZnVuY3Rpb25zLmFkZGluZ0RlY2ltYWxTZXBhcmF0b3IodmFsdWUsIGNvbXBsZXRlciwgc2VwYXJhdG9yKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuXG4gICAgdGV4dFRvTnVtYmVyOiBmdW5jdGlvbiB0ZXh0VG9OdW1iZXIoaW5wdXQpIHtcbiAgICAgIHZhciByZXRvcm5vID0gaW5wdXQudG9TdHJpbmcoKTtcbiAgICAgIHZhciBjb21wbGV0ZXIgPSBhcmdzLmZpeGVkID8gJzAnIDogJ18nO1xuXG4gICAgICBpZiAoYXJncy5wcmVmaXgpIHtcbiAgICAgICAgcmV0b3JubyA9IGZ1bmN0aW9ucy5yZW1vdmluZ1ByZWZpeChyZXRvcm5vKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGFyZ3Muc3VmZml4KSB7XG4gICAgICAgIHJldG9ybm8gPSBmdW5jdGlvbnMucmVtb3ZpbmdTdWZmaXgocmV0b3Jubyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChhcmdzLmF1dG9Db21wbGV0ZURlY2ltYWwpIHtcbiAgICAgICAgcmV0b3JubyA9IGZ1bmN0aW9ucy5hdXRvQ29tcGxldGUocmV0b3Jubyk7XG4gICAgICB9XG5cbiAgICAgIHJldG9ybm8gPSBmdW5jdGlvbnMucmVtb3ZlU2VwYXJhdG9yKHJldG9ybm8sIGFyZ3MudGhvdXNhbmRzU2VwYXJhdG9yKTtcbiAgICAgIHJldG9ybm8gPSBmdW5jdGlvbnMucmVtb3ZlU2VwYXJhdG9yKHJldG9ybm8sIGFyZ3MuZGVjaW1hbFNlcGFyYXRvcik7XG5cbiAgICAgIHJldG9ybm8gPSBmdW5jdGlvbnMub25seU51bWJlcihyZXRvcm5vKTtcblxuICAgICAgcmV0b3JubyA9IGZ1bmN0aW9ucy5yZW1vdmluZ0NvbXBsZXRlckZyb21TdGFydChyZXRvcm5vLCBjb21wbGV0ZXIpO1xuXG4gICAgICByZXR1cm4gcmV0b3JubyB8fCAoYXJncy5maXhlZCA/ICcwJyA6ICcnKTtcbiAgICB9LFxuXG4gICAgbnVtYmVyVG9UZXh0OiBmdW5jdGlvbiBudW1iZXJUb1RleHQoaW5wdXQpIHtcbiAgICAgIHZhciByZXRvcm5vID0gYXJncy5lbXB0eU9ySW52YWxpZCgpO1xuXG4gICAgICBpZiAocGFyc2VGbG9hdChpbnB1dCkgIT09ICdOYU4nKSB7XG4gICAgICAgIGlmIChpbnB1dC5sZW5ndGggPD0gYXJncy5mcmFjdGlvbkRpZ2l0cykge1xuICAgICAgICAgIHJldG9ybm8gPSBmdW5jdGlvbnMuZm9ybWF0RGVjaW1hbChpbnB1dCwgYXJncy5maXhlZCA/ICcwJyA6ICdfJywgYXJncy5kZWNpbWFsU2VwYXJhdG9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXRvcm5vID0gZnVuY3Rpb25zLmFkZGluZ0h1bmRyZWRzU2VwYXJhdG9yKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoYXJncy5wcmVmaXgpIHtcbiAgICAgICAgcmV0b3JubyA9IGZ1bmN0aW9ucy5hZGRpbmdQcmVmaXgocmV0b3Jubyk7XG4gICAgICB9XG4gICAgICBpZiAoYXJncy5zdWZmaXgpIHtcbiAgICAgICAgcmV0b3JubyA9IGZ1bmN0aW9ucy5hZGRpbmdTdWZmaXgocmV0b3Jubyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXRvcm5vO1xuICAgIH0sXG5cbiAgICBmb3JtYXQ6IGZ1bmN0aW9uIGZvcm1hdCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9ucy5udW1iZXJUb1RleHQoZnVuY3Rpb25zLnRleHRUb051bWJlcih2YWx1ZSkpO1xuICAgIH0sXG5cbiAgICBmb3JtYXRUb051bWJlcjogZnVuY3Rpb24gZm9ybWF0VG9OdW1iZXIoaW5wdXQpIHtcbiAgICAgIHZhciByZXRvcm5vID0gJzAnO1xuICAgICAgdmFyIHZhbHVlID0gZnVuY3Rpb25zLnRleHRUb051bWJlcihpbnB1dCk7XG5cbiAgICAgIGlmIChwYXJzZUZsb2F0KHZhbHVlKSAhPT0gJ05hTicpIHtcbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA8PSBhcmdzLmZyYWN0aW9uRGlnaXRzKSB7XG4gICAgICAgICAgdmFsdWUgPSBmdW5jdGlvbnMuZm9ybWF0RGVjaW1hbCh2YWx1ZSwgJzAnLCAnLicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBsZW5ndGhXaXRob3V0RGVjaW1hbHMgPSB2YWx1ZS5sZW5ndGggLSBhcmdzLmZyYWN0aW9uRGlnaXRzO1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShuZXcgUmVnRXhwKCcoXFxcXGR7JyArIGxlbmd0aFdpdGhvdXREZWNpbWFscyArICd9KShcXFxcZHsnICsgYXJncy5mcmFjdGlvbkRpZ2l0cyArICd9KScpLCAnJDEuJDInKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldG9ybm8gPSB2YWx1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBhcnNlRmxvYXQocmV0b3Jubyk7XG4gICAgfSxcblxuICAgIHNldE1hc2s6IGZ1bmN0aW9uIHNldE1hc2soZWxlbWVudCwgYXJncykge1xuICAgICAgdmFyIGlucHV0ID0gdHlwZW9mIGVsZW1lbnQgPT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnQpIDogZWxlbWVudDtcblxuICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgYXJncyA9IGFyZ3M7XG4gICAgICB9XG5cbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpbnB1dC52YWx1ZSA9IGZ1bmN0aW9ucy5mb3JtYXQoaW5wdXQudmFsdWUpO1xuICAgICAgfSk7XG4gICAgICBpbnB1dFsnZm9ybWF0VG9OdW1iZXInXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9ucy5mb3JtYXRUb051bWJlcihpbnB1dC52YWx1ZSk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gaW5wdXQudmFsdWU7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBmdW5jdGlvbnM7XG59KCk7XG4iLCIvKiEgc21vb3RoLXNjcm9sbCB2MTQuMi4xIHwgKGMpIDIwMTggQ2hyaXMgRmVyZGluYW5kaSB8IE1JVCBMaWNlbnNlIHwgaHR0cDovL2dpdGh1Yi5jb20vY2ZlcmRpbmFuZGkvc21vb3RoLXNjcm9sbCAqL1xud2luZG93LkVsZW1lbnQmJiFFbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0JiYoRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdD1mdW5jdGlvbihlKXt2YXIgdCxuPSh0aGlzLmRvY3VtZW50fHx0aGlzLm93bmVyRG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwoZSksbz10aGlzO2Rve2Zvcih0PW4ubGVuZ3RoOy0tdD49MCYmbi5pdGVtKHQpIT09bzspO313aGlsZSh0PDAmJihvPW8ucGFyZW50RWxlbWVudCkpO3JldHVybiBvfSksKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3Q9dHx8e2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMSxkZXRhaWw6dm9pZCAwfTt2YXIgbj1kb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpO3JldHVybiBuLmluaXRDdXN0b21FdmVudChlLHQuYnViYmxlcyx0LmNhbmNlbGFibGUsdC5kZXRhaWwpLG59aWYoXCJmdW5jdGlvblwiPT10eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50KXJldHVybiExO2UucHJvdG90eXBlPXdpbmRvdy5FdmVudC5wcm90b3R5cGUsd2luZG93LkN1c3RvbUV2ZW50PWV9KSgpLChmdW5jdGlvbigpe2Zvcih2YXIgZT0wLHQ9W1wibXNcIixcIm1velwiLFwid2Via2l0XCIsXCJvXCJdLG49MDtuPHQubGVuZ3RoJiYhd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTsrK24pd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT13aW5kb3dbdFtuXStcIlJlcXVlc3RBbmltYXRpb25GcmFtZVwiXSx3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWU9d2luZG93W3Rbbl0rXCJDYW5jZWxBbmltYXRpb25GcmFtZVwiXXx8d2luZG93W3Rbbl0rXCJDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8KHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24odCxuKXt2YXIgbz0obmV3IERhdGUpLmdldFRpbWUoKSxpPU1hdGgubWF4KDAsMTYtKG8tZSkpLHI9d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dChvK2kpfSksaSk7cmV0dXJuIGU9bytpLHJ9KSx3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fCh3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oZSl7Y2xlYXJUaW1lb3V0KGUpfSl9KSgpLChmdW5jdGlvbihlLHQpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sKGZ1bmN0aW9uKCl7cmV0dXJuIHQoZSl9KSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9dChlKTplLlNtb290aFNjcm9sbD10KGUpfSkoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcywoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHQ9e2lnbm9yZTpcIltkYXRhLXNjcm9sbC1pZ25vcmVdXCIsaGVhZGVyOm51bGwsdG9wT25FbXB0eUhhc2g6ITAsc3BlZWQ6NTAwLGNsaXA6ITAsb2Zmc2V0OjAsZWFzaW5nOlwiZWFzZUluT3V0Q3ViaWNcIixjdXN0b21FYXNpbmc6bnVsbCx1cGRhdGVVUkw6ITAscG9wc3RhdGU6ITAsZW1pdEV2ZW50czohMH0sbj1mdW5jdGlvbigpe3JldHVyblwicXVlcnlTZWxlY3RvclwiaW4gZG9jdW1lbnQmJlwiYWRkRXZlbnRMaXN0ZW5lclwiaW4gZSYmXCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWVcImluIGUmJlwiY2xvc2VzdFwiaW4gZS5FbGVtZW50LnByb3RvdHlwZX0sbz1mdW5jdGlvbigpe2Zvcih2YXIgZT17fSx0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKykhKGZ1bmN0aW9uKHQpe2Zvcih2YXIgbiBpbiB0KXQuaGFzT3duUHJvcGVydHkobikmJihlW25dPXRbbl0pfSkoYXJndW1lbnRzW3RdKTtyZXR1cm4gZX0saT1mdW5jdGlvbih0KXtyZXR1cm4hIShcIm1hdGNoTWVkaWFcImluIGUmJmUubWF0Y2hNZWRpYShcIihwcmVmZXJzLXJlZHVjZWQtbW90aW9uKVwiKS5tYXRjaGVzKX0scj1mdW5jdGlvbih0KXtyZXR1cm4gcGFyc2VJbnQoZS5nZXRDb21wdXRlZFN0eWxlKHQpLmhlaWdodCwxMCl9LGE9ZnVuY3Rpb24oZSl7dmFyIHQ7dHJ5e3Q9ZGVjb2RlVVJJQ29tcG9uZW50KGUpfWNhdGNoKG4pe3Q9ZX1yZXR1cm4gdH0sdT1mdW5jdGlvbihlKXtcIiNcIj09PWUuY2hhckF0KDApJiYoZT1lLnN1YnN0cigxKSk7Zm9yKHZhciB0LG49U3RyaW5nKGUpLG89bi5sZW5ndGgsaT0tMSxyPVwiXCIsYT1uLmNoYXJDb2RlQXQoMCk7KytpPG87KXtpZigwPT09KHQ9bi5jaGFyQ29kZUF0KGkpKSl0aHJvdyBuZXcgSW52YWxpZENoYXJhY3RlckVycm9yKFwiSW52YWxpZCBjaGFyYWN0ZXI6IHRoZSBpbnB1dCBjb250YWlucyBVKzAwMDAuXCIpO3Q+PTEmJnQ8PTMxfHwxMjc9PXR8fDA9PT1pJiZ0Pj00OCYmdDw9NTd8fDE9PT1pJiZ0Pj00OCYmdDw9NTcmJjQ1PT09YT9yKz1cIlxcXFxcIit0LnRvU3RyaW5nKDE2KStcIiBcIjpyKz10Pj0xMjh8fDQ1PT09dHx8OTU9PT10fHx0Pj00OCYmdDw9NTd8fHQ+PTY1JiZ0PD05MHx8dD49OTcmJnQ8PTEyMj9uLmNoYXJBdChpKTpcIlxcXFxcIituLmNoYXJBdChpKX12YXIgdTt0cnl7dT1kZWNvZGVVUklDb21wb25lbnQoXCIjXCIrcil9Y2F0Y2goZSl7dT1cIiNcIityfXJldHVybiB1fSxjPWZ1bmN0aW9uKGUsdCl7dmFyIG47cmV0dXJuXCJlYXNlSW5RdWFkXCI9PT1lLmVhc2luZyYmKG49dCp0KSxcImVhc2VPdXRRdWFkXCI9PT1lLmVhc2luZyYmKG49dCooMi10KSksXCJlYXNlSW5PdXRRdWFkXCI9PT1lLmVhc2luZyYmKG49dDwuNT8yKnQqdDooNC0yKnQpKnQtMSksXCJlYXNlSW5DdWJpY1wiPT09ZS5lYXNpbmcmJihuPXQqdCp0KSxcImVhc2VPdXRDdWJpY1wiPT09ZS5lYXNpbmcmJihuPS0tdCp0KnQrMSksXCJlYXNlSW5PdXRDdWJpY1wiPT09ZS5lYXNpbmcmJihuPXQ8LjU/NCp0KnQqdDoodC0xKSooMip0LTIpKigyKnQtMikrMSksXCJlYXNlSW5RdWFydFwiPT09ZS5lYXNpbmcmJihuPXQqdCp0KnQpLFwiZWFzZU91dFF1YXJ0XCI9PT1lLmVhc2luZyYmKG49MS0gLS10KnQqdCp0KSxcImVhc2VJbk91dFF1YXJ0XCI9PT1lLmVhc2luZyYmKG49dDwuNT84KnQqdCp0KnQ6MS04Ki0tdCp0KnQqdCksXCJlYXNlSW5RdWludFwiPT09ZS5lYXNpbmcmJihuPXQqdCp0KnQqdCksXCJlYXNlT3V0UXVpbnRcIj09PWUuZWFzaW5nJiYobj0xKy0tdCp0KnQqdCp0KSxcImVhc2VJbk91dFF1aW50XCI9PT1lLmVhc2luZyYmKG49dDwuNT8xNip0KnQqdCp0KnQ6MSsxNiotLXQqdCp0KnQqdCksZS5jdXN0b21FYXNpbmcmJihuPWUuY3VzdG9tRWFzaW5nKHQpKSxufHx0fSxzPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQsZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQsZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodCxkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KX0sbD1mdW5jdGlvbih0LG4sbyxpKXt2YXIgcj0wO2lmKHQub2Zmc2V0UGFyZW50KWRve3IrPXQub2Zmc2V0VG9wLHQ9dC5vZmZzZXRQYXJlbnR9d2hpbGUodCk7cmV0dXJuIHI9TWF0aC5tYXgoci1uLW8sMCksaSYmKHI9TWF0aC5taW4ocixzKCktZS5pbm5lckhlaWdodCkpLHJ9LG09ZnVuY3Rpb24oZSl7cmV0dXJuIGU/cihlKStlLm9mZnNldFRvcDowfSxkPWZ1bmN0aW9uKGUsdCxuKXt0fHxoaXN0b3J5LnB1c2hTdGF0ZSYmbi51cGRhdGVVUkwmJmhpc3RvcnkucHVzaFN0YXRlKHtzbW9vdGhTY3JvbGw6SlNPTi5zdHJpbmdpZnkobiksYW5jaG9yOmUuaWR9LGRvY3VtZW50LnRpdGxlLGU9PT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ/XCIjdG9wXCI6XCIjXCIrZS5pZCl9LGY9ZnVuY3Rpb24odCxuLG8pezA9PT10JiZkb2N1bWVudC5ib2R5LmZvY3VzKCksb3x8KHQuZm9jdXMoKSxkb2N1bWVudC5hY3RpdmVFbGVtZW50IT09dCYmKHQuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIixcIi0xXCIpLHQuZm9jdXMoKSx0LnN0eWxlLm91dGxpbmU9XCJub25lXCIpLGUuc2Nyb2xsVG8oMCxuKSl9LGg9ZnVuY3Rpb24odCxuLG8saSl7aWYobi5lbWl0RXZlbnRzJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLkN1c3RvbUV2ZW50KXt2YXIgcj1uZXcgQ3VzdG9tRXZlbnQodCx7YnViYmxlczohMCxkZXRhaWw6e2FuY2hvcjpvLHRvZ2dsZTppfX0pO2RvY3VtZW50LmRpc3BhdGNoRXZlbnQocil9fTtyZXR1cm4gZnVuY3Rpb24ocixwKXt2YXIgZyx2LHcseSxFLGIsUyxBPXt9O0EuY2FuY2VsU2Nyb2xsPWZ1bmN0aW9uKGUpe2NhbmNlbEFuaW1hdGlvbkZyYW1lKFMpLFM9bnVsbCxlfHxoKFwic2Nyb2xsQ2FuY2VsXCIsZyl9LEEuYW5pbWF0ZVNjcm9sbD1mdW5jdGlvbihuLGkscil7dmFyIGE9byhnfHx0LHJ8fHt9KSx1PVwiW29iamVjdCBOdW1iZXJdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobikscD11fHwhbi50YWdOYW1lP251bGw6bjtpZih1fHxwKXt2YXIgdj1lLnBhZ2VZT2Zmc2V0O2EuaGVhZGVyJiYheSYmKHk9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhLmhlYWRlcikpLEV8fChFPW0oeSkpO3ZhciB3LGIsQyxPPXU/bjpsKHAsRSxwYXJzZUludChcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLm9mZnNldD9hLm9mZnNldChuLGkpOmEub2Zmc2V0LDEwKSxhLmNsaXApLEk9Ty12LHE9cygpLEY9MCxMPWZ1bmN0aW9uKHQsbyl7dmFyIHI9ZS5wYWdlWU9mZnNldDtpZih0PT1vfHxyPT1vfHwodjxvJiZlLmlubmVySGVpZ2h0K3IpPj1xKXJldHVybiBBLmNhbmNlbFNjcm9sbCghMCksZihuLG8sdSksaChcInNjcm9sbFN0b3BcIixhLG4saSksdz1udWxsLFM9bnVsbCwhMH0sSD1mdW5jdGlvbih0KXt3fHwodz10KSxGKz10LXcsYj1GL3BhcnNlSW50KGEuc3BlZWQsMTApLGI9Yj4xPzE6YixDPXYrSSpjKGEsYiksZS5zY3JvbGxUbygwLE1hdGguZmxvb3IoQykpLEwoQyxPKXx8KFM9ZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoSCksdz10KX07MD09PWUucGFnZVlPZmZzZXQmJmUuc2Nyb2xsVG8oMCwwKSxkKG4sdSxhKSxoKFwic2Nyb2xsU3RhcnRcIixhLG4saSksQS5jYW5jZWxTY3JvbGwoITApLGUucmVxdWVzdEFuaW1hdGlvbkZyYW1lKEgpfX07dmFyIEM9ZnVuY3Rpb24odCl7aWYoIWkoKSYmMD09PXQuYnV0dG9uJiYhdC5tZXRhS2V5JiYhdC5jdHJsS2V5JiZcImNsb3Nlc3RcImluIHQudGFyZ2V0JiYodz10LnRhcmdldC5jbG9zZXN0KHIpKSYmXCJhXCI9PT13LnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmIXQudGFyZ2V0LmNsb3Nlc3QoZy5pZ25vcmUpJiZ3Lmhvc3RuYW1lPT09ZS5sb2NhdGlvbi5ob3N0bmFtZSYmdy5wYXRobmFtZT09PWUubG9jYXRpb24ucGF0aG5hbWUmJi8jLy50ZXN0KHcuaHJlZikpe3ZhciBuPXUoYSh3Lmhhc2gpKSxvPWcudG9wT25FbXB0eUhhc2gmJlwiI1wiPT09bj9kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ6ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuKTtvPW98fFwiI3RvcFwiIT09bj9vOmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxvJiYodC5wcmV2ZW50RGVmYXVsdCgpLEEuYW5pbWF0ZVNjcm9sbChvLHcpKX19LE89ZnVuY3Rpb24oZSl7aWYobnVsbCE9PWhpc3Rvcnkuc3RhdGUmJmhpc3Rvcnkuc3RhdGUuc21vb3RoU2Nyb2xsJiZoaXN0b3J5LnN0YXRlLnNtb290aFNjcm9sbD09PUpTT04uc3RyaW5naWZ5KGcpJiZoaXN0b3J5LnN0YXRlLmFuY2hvcil7dmFyIHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1KGEoaGlzdG9yeS5zdGF0ZS5hbmNob3IpKSk7dCYmQS5hbmltYXRlU2Nyb2xsKHQsbnVsbCx7dXBkYXRlVVJMOiExfSl9fSxJPWZ1bmN0aW9uKGUpe2J8fChiPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7Yj1udWxsLEU9bSh5KX0pLDY2KSl9O3JldHVybiBBLmRlc3Ryb3k9ZnVuY3Rpb24oKXtnJiYoZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsQywhMSksZS5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsSSwhMSksZS5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIixPLCExKSxBLmNhbmNlbFNjcm9sbCgpLGc9bnVsbCx2PW51bGwsdz1udWxsLHk9bnVsbCxFPW51bGwsYj1udWxsLFM9bnVsbCl9LEEuaW5pdD1mdW5jdGlvbihpKXtpZighbigpKXRocm93XCJTbW9vdGggU2Nyb2xsOiBUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgcmVxdWlyZWQgSmF2YVNjcmlwdCBtZXRob2RzIGFuZCBicm93c2VyIEFQSXMuXCI7QS5kZXN0cm95KCksZz1vKHQsaXx8e30pLHk9Zy5oZWFkZXI/ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihnLmhlYWRlcik6bnVsbCxFPW0oeSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsQywhMSkseSYmZS5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsSSwhMSksZy51cGRhdGVVUkwmJmcucG9wc3RhdGUmJmUuYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsTywhMSl9LEEuaW5pdChwKSxBfX0pKTtcbiIsIi8qIVxuICogdGFibGVzb3J0IHY1LjAuMiAoMjAxNy0xMS0xMilcbiAqIGh0dHA6Ly90cmlzdGVuLmNhL3RhYmxlc29ydC9kZW1vL1xuICogQ29weXJpZ2h0IChjKSAyMDE3IDsgTGljZW5zZWQgTUlUXG4qLyFmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYixjKXtpZighKHRoaXMgaW5zdGFuY2VvZiBhKSlyZXR1cm4gbmV3IGEoYixjKTtpZighYnx8XCJUQUJMRVwiIT09Yi50YWdOYW1lKXRocm93IG5ldyBFcnJvcihcIkVsZW1lbnQgbXVzdCBiZSBhIHRhYmxlXCIpO3RoaXMuaW5pdChiLGN8fHt9KX12YXIgYj1bXSxjPWZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiB3aW5kb3cuQ3VzdG9tRXZlbnQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudD9iPW5ldyBDdXN0b21FdmVudChhKTooYj1kb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpLGIuaW5pdEN1c3RvbUV2ZW50KGEsITEsITEsdm9pZCAwKSksYn0sZD1mdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNvcnRcIil8fGEudGV4dENvbnRlbnR8fGEuaW5uZXJUZXh0fHxcIlwifSxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9YS50cmltKCkudG9Mb3dlckNhc2UoKSxiPWIudHJpbSgpLnRvTG93ZXJDYXNlKCksYT09PWI/MDphPGI/MTotMX0sZj1mdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPWEoYy50ZCxkLnRkKTtyZXR1cm4gMD09PWU/Yj9kLmluZGV4LWMuaW5kZXg6Yy5pbmRleC1kLmluZGV4OmV9fTthLmV4dGVuZD1mdW5jdGlvbihhLGMsZCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgY3x8XCJmdW5jdGlvblwiIT10eXBlb2YgZCl0aHJvdyBuZXcgRXJyb3IoXCJQYXR0ZXJuIGFuZCBzb3J0IG11c3QgYmUgYSBmdW5jdGlvblwiKTtiLnB1c2goe25hbWU6YSxwYXR0ZXJuOmMsc29ydDpkfSl9LGEucHJvdG90eXBlPXtpbml0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZz10aGlzO2lmKGcudGFibGU9YSxnLnRoZWFkPSExLGcub3B0aW9ucz1iLGEucm93cyYmYS5yb3dzLmxlbmd0aD4wKWlmKGEudEhlYWQmJmEudEhlYWQucm93cy5sZW5ndGg+MCl7Zm9yKGU9MDtlPGEudEhlYWQucm93cy5sZW5ndGg7ZSsrKWlmKFwidGhlYWRcIj09PWEudEhlYWQucm93c1tlXS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNvcnQtbWV0aG9kXCIpKXtjPWEudEhlYWQucm93c1tlXTticmVha31jfHwoYz1hLnRIZWFkLnJvd3NbYS50SGVhZC5yb3dzLmxlbmd0aC0xXSksZy50aGVhZD0hMH1lbHNlIGM9YS5yb3dzWzBdO2lmKGMpe3ZhciBoPWZ1bmN0aW9uKCl7Zy5jdXJyZW50JiZnLmN1cnJlbnQhPT10aGlzJiZnLmN1cnJlbnQucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1zb3J0XCIpLGcuY3VycmVudD10aGlzLGcuc29ydFRhYmxlKHRoaXMpfTtmb3IoZT0wO2U8Yy5jZWxscy5sZW5ndGg7ZSsrKWY9Yy5jZWxsc1tlXSxmLnNldEF0dHJpYnV0ZShcInJvbGVcIixcImNvbHVtbmhlYWRlclwiKSxcIm5vbmVcIiE9PWYuZ2V0QXR0cmlidXRlKFwiZGF0YS1zb3J0LW1ldGhvZFwiKSYmKGYudGFiaW5kZXg9MCxmLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGgsITEpLG51bGwhPT1mLmdldEF0dHJpYnV0ZShcImRhdGEtc29ydC1kZWZhdWx0XCIpJiYoZD1mKSk7ZCYmKGcuY3VycmVudD1kLGcuc29ydFRhYmxlKGQpKX19LHNvcnRUYWJsZTpmdW5jdGlvbihhLGcpe3ZhciBoPXRoaXMsaT1hLmNlbGxJbmRleCxqPWUsaz1cIlwiLGw9W10sbT1oLnRoZWFkPzA6MSxuPWEuZ2V0QXR0cmlidXRlKFwiZGF0YS1zb3J0LW1ldGhvZFwiKSxvPWEuZ2V0QXR0cmlidXRlKFwiYXJpYS1zb3J0XCIpO2lmKGgudGFibGUuZGlzcGF0Y2hFdmVudChjKFwiYmVmb3JlU29ydFwiKSksZ3x8KG89XCJhc2NlbmRpbmdcIj09PW8/XCJkZXNjZW5kaW5nXCI6XCJkZXNjZW5kaW5nXCI9PT1vP1wiYXNjZW5kaW5nXCI6aC5vcHRpb25zLmRlc2NlbmRpbmc/XCJkZXNjZW5kaW5nXCI6XCJhc2NlbmRpbmdcIixhLnNldEF0dHJpYnV0ZShcImFyaWEtc29ydFwiLG8pKSwhKGgudGFibGUucm93cy5sZW5ndGg8Mikpe2lmKCFuKXtmb3IoO2wubGVuZ3RoPDMmJm08aC50YWJsZS50Qm9kaWVzWzBdLnJvd3MubGVuZ3RoOylrPWQoaC50YWJsZS50Qm9kaWVzWzBdLnJvd3NbbV0uY2VsbHNbaV0pLGs9ay50cmltKCksay5sZW5ndGg+MCYmbC5wdXNoKGspLG0rKztpZighbClyZXR1cm59Zm9yKG09MDttPGIubGVuZ3RoO20rKylpZihrPWJbbV0sbil7aWYoay5uYW1lPT09bil7aj1rLnNvcnQ7YnJlYWt9fWVsc2UgaWYobC5ldmVyeShrLnBhdHRlcm4pKXtqPWsuc29ydDticmVha31mb3IoaC5jb2w9aSxtPTA7bTxoLnRhYmxlLnRCb2RpZXMubGVuZ3RoO20rKyl7dmFyIHAscT1bXSxyPXt9LHM9MCx0PTA7aWYoIShoLnRhYmxlLnRCb2RpZXNbbV0ucm93cy5sZW5ndGg8Mikpe2ZvcihwPTA7cDxoLnRhYmxlLnRCb2RpZXNbbV0ucm93cy5sZW5ndGg7cCsrKWs9aC50YWJsZS50Qm9kaWVzW21dLnJvd3NbcF0sXCJub25lXCI9PT1rLmdldEF0dHJpYnV0ZShcImRhdGEtc29ydC1tZXRob2RcIik/cltzXT1rOnEucHVzaCh7dHI6ayx0ZDpkKGsuY2VsbHNbaC5jb2xdKSxpbmRleDpzfSkscysrO2ZvcihcImRlc2NlbmRpbmdcIj09PW8/cS5zb3J0KGYoaiwhMCkpOihxLnNvcnQoZihqLCExKSkscS5yZXZlcnNlKCkpLHA9MDtwPHM7cCsrKXJbcF0/KGs9cltwXSx0KyspOms9cVtwLXRdLnRyLGgudGFibGUudEJvZGllc1ttXS5hcHBlbmRDaGlsZChrKX19aC50YWJsZS5kaXNwYXRjaEV2ZW50KGMoXCJhZnRlclNvcnRcIikpfX0scmVmcmVzaDpmdW5jdGlvbigpe3ZvaWQgMCE9PXRoaXMuY3VycmVudCYmdGhpcy5zb3J0VGFibGUodGhpcy5jdXJyZW50LCEwKX19LFwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWE6d2luZG93LlRhYmxlc29ydD1hfSgpO1xuXG4vKiFcbiAqIHRhYmxlc29ydCB2NS4wLjIgKDIwMTctMTEtMTIpXG4gKiBodHRwOi8vdHJpc3Rlbi5jYS90YWJsZXNvcnQvZGVtby9cbiAqIENvcHlyaWdodCAoYykgMjAxNyA7IExpY2Vuc2VkIE1JVFxuKi8hZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoL1xcLS9nLFwiL1wiKSxhPWEucmVwbGFjZSgvKFxcZHsxLDJ9KVtcXC9cXC1dKFxcZHsxLDJ9KVtcXC9cXC1dKFxcZHsyfSkvLFwiJDEvJDIvJDNcIiksbmV3IERhdGUoYSkuZ2V0VGltZSgpfHwtMX07VGFibGVzb3J0LmV4dGVuZChcImRhdGVcIixmdW5jdGlvbihiKXtyZXR1cm4oYi5zZWFyY2goLyhNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pXFwuP1xcLD9cXHMqL2kpIT09LTF8fGIuc2VhcmNoKC9cXGR7MSwyfVtcXC9cXC1dXFxkezEsMn1bXFwvXFwtXVxcZHsyLDR9LykhPT0tMXx8Yi5zZWFyY2goLyhKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYykvaSkhPT0tMSkmJiFpc05hTihhKGIpKX0sZnVuY3Rpb24oYixjKXtyZXR1cm4gYj1iLnRvTG93ZXJDYXNlKCksYz1jLnRvTG93ZXJDYXNlKCksYShjKS1hKGIpfSl9KCk7XG4iLCIoZnVuY3Rpb24oZSx0KXsnb2JqZWN0Jz09dHlwZW9mIGV4cG9ydHMmJid1bmRlZmluZWQnIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKTonZnVuY3Rpb24nPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZSh0KTplLnRpcHB5PXQoKX0pKHRoaXMsZnVuY3Rpb24oKXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gZShlKXtyZXR1cm4gZSYmJ1tvYmplY3QgRnVuY3Rpb25dJz09PXt9LnRvU3RyaW5nLmNhbGwoZSl9ZnVuY3Rpb24gdChlLHQpe2lmKDEhPT1lLm5vZGVUeXBlKXJldHVybltdO3ZhciByPWUub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyxhPXIuZ2V0Q29tcHV0ZWRTdHlsZShlLG51bGwpO3JldHVybiB0P2FbdF06YX1mdW5jdGlvbiByKGUpe3JldHVybidIVE1MJz09PWUubm9kZU5hbWU/ZTplLnBhcmVudE5vZGV8fGUuaG9zdH1mdW5jdGlvbiBhKGUpe2lmKCFlKXJldHVybiBkb2N1bWVudC5ib2R5O3N3aXRjaChlLm5vZGVOYW1lKXtjYXNlJ0hUTUwnOmNhc2UnQk9EWSc6cmV0dXJuIGUub3duZXJEb2N1bWVudC5ib2R5O2Nhc2UnI2RvY3VtZW50JzpyZXR1cm4gZS5ib2R5O312YXIgcD10KGUpLG89cC5vdmVyZmxvdyxpPXAub3ZlcmZsb3dYLG49cC5vdmVyZmxvd1k7cmV0dXJuIC8oYXV0b3xzY3JvbGx8b3ZlcmxheSkvLnRlc3QobytuK2kpP2U6YShyKGUpKX1mdW5jdGlvbiBwKGUpe3JldHVybiAxMT09PWU/YnQ6MTA9PT1lP3l0OmJ0fHx5dH1mdW5jdGlvbiBvKGUpe2lmKCFlKXJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7Zm9yKHZhciByPXAoMTApP2RvY3VtZW50LmJvZHk6bnVsbCxhPWUub2Zmc2V0UGFyZW50fHxudWxsO2E9PT1yJiZlLm5leHRFbGVtZW50U2libGluZzspYT0oZT1lLm5leHRFbGVtZW50U2libGluZykub2Zmc2V0UGFyZW50O3ZhciBpPWEmJmEubm9kZU5hbWU7cmV0dXJuIGkmJidCT0RZJyE9PWkmJidIVE1MJyE9PWk/LTEhPT1bJ1RIJywnVEQnLCdUQUJMRSddLmluZGV4T2YoYS5ub2RlTmFtZSkmJidzdGF0aWMnPT09dChhLCdwb3NpdGlvbicpP28oYSk6YTplP2Uub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ6ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fWZ1bmN0aW9uIG4oZSl7dmFyIHQ9ZS5ub2RlTmFtZTtyZXR1cm4nQk9EWSchPT10JiYoJ0hUTUwnPT09dHx8byhlLmZpcnN0RWxlbWVudENoaWxkKT09PWUpfWZ1bmN0aW9uIHMoZSl7cmV0dXJuIG51bGw9PT1lLnBhcmVudE5vZGU/ZTpzKGUucGFyZW50Tm9kZSl9ZnVuY3Rpb24gbChlLHQpe2lmKCFlfHwhZS5ub2RlVHlwZXx8IXR8fCF0Lm5vZGVUeXBlKXJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7dmFyIHI9ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0KSZOb2RlLkRPQ1VNRU5UX1BPU0lUSU9OX0ZPTExPV0lORyxhPXI/ZTp0LHA9cj90OmUsaT1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO2kuc2V0U3RhcnQoYSwwKSxpLnNldEVuZChwLDApO3ZhciBkPWkuY29tbW9uQW5jZXN0b3JDb250YWluZXI7aWYoZSE9PWQmJnQhPT1kfHxhLmNvbnRhaW5zKHApKXJldHVybiBuKGQpP2Q6byhkKTt2YXIgYz1zKGUpO3JldHVybiBjLmhvc3Q/bChjLmhvc3QsdCk6bChlLHModCkuaG9zdCl9ZnVuY3Rpb24gZChlKXt2YXIgdD0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06J3RvcCcscj0ndG9wJz09PXQ/J3Njcm9sbFRvcCc6J3Njcm9sbExlZnQnLGE9ZS5ub2RlTmFtZTtpZignQk9EWSc9PT1hfHwnSFRNTCc9PT1hKXt2YXIgcD1lLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LG89ZS5vd25lckRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnR8fHA7cmV0dXJuIG9bcl19cmV0dXJuIGVbcl19ZnVuY3Rpb24gYyhlLHQpe3ZhciByPSEhKDI8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzJdKSYmYXJndW1lbnRzWzJdLGE9ZCh0LCd0b3AnKSxwPWQodCwnbGVmdCcpLG89cj8tMToxO3JldHVybiBlLnRvcCs9YSpvLGUuYm90dG9tKz1hKm8sZS5sZWZ0Kz1wKm8sZS5yaWdodCs9cCpvLGV9ZnVuY3Rpb24gbShlLHQpe3ZhciByPSd4Jz09PXQ/J0xlZnQnOidUb3AnLGE9J0xlZnQnPT09cj8nUmlnaHQnOidCb3R0b20nO3JldHVybiBwYXJzZUZsb2F0KGVbJ2JvcmRlcicrcisnV2lkdGgnXSwxMCkrcGFyc2VGbG9hdChlWydib3JkZXInK2ErJ1dpZHRoJ10sMTApfWZ1bmN0aW9uIGYoZSx0LHIsYSl7cmV0dXJuIFplKHRbJ29mZnNldCcrZV0sdFsnc2Nyb2xsJytlXSxyWydjbGllbnQnK2VdLHJbJ29mZnNldCcrZV0sclsnc2Nyb2xsJytlXSxwKDEwKT9wYXJzZUludChyWydvZmZzZXQnK2VdKStwYXJzZUludChhWydtYXJnaW4nKygnSGVpZ2h0Jz09PWU/J1RvcCc6J0xlZnQnKV0pK3BhcnNlSW50KGFbJ21hcmdpbicrKCdIZWlnaHQnPT09ZT8nQm90dG9tJzonUmlnaHQnKV0pOjApfWZ1bmN0aW9uIGgoZSl7dmFyIHQ9ZS5ib2R5LHI9ZS5kb2N1bWVudEVsZW1lbnQsYT1wKDEwKSYmZ2V0Q29tcHV0ZWRTdHlsZShyKTtyZXR1cm57aGVpZ2h0OmYoJ0hlaWdodCcsdCxyLGEpLHdpZHRoOmYoJ1dpZHRoJyx0LHIsYSl9fWZ1bmN0aW9uIGIoZSl7cmV0dXJuIHd0KHt9LGUse3JpZ2h0OmUubGVmdCtlLndpZHRoLGJvdHRvbTplLnRvcCtlLmhlaWdodH0pfWZ1bmN0aW9uIHUoZSl7dmFyIHI9e307dHJ5e2lmKHAoMTApKXtyPWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dmFyIGE9ZChlLCd0b3AnKSxvPWQoZSwnbGVmdCcpO3IudG9wKz1hLHIubGVmdCs9byxyLmJvdHRvbSs9YSxyLnJpZ2h0Kz1vfWVsc2Ugcj1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWNhdGNoKHQpe312YXIgaT17bGVmdDpyLmxlZnQsdG9wOnIudG9wLHdpZHRoOnIucmlnaHQtci5sZWZ0LGhlaWdodDpyLmJvdHRvbS1yLnRvcH0sbj0nSFRNTCc9PT1lLm5vZGVOYW1lP2goZS5vd25lckRvY3VtZW50KTp7fSxzPW4ud2lkdGh8fGUuY2xpZW50V2lkdGh8fGkucmlnaHQtaS5sZWZ0LGw9bi5oZWlnaHR8fGUuY2xpZW50SGVpZ2h0fHxpLmJvdHRvbS1pLnRvcCxjPWUub2Zmc2V0V2lkdGgtcyxmPWUub2Zmc2V0SGVpZ2h0LWw7aWYoY3x8Zil7dmFyIHk9dChlKTtjLT1tKHksJ3gnKSxmLT1tKHksJ3knKSxpLndpZHRoLT1jLGkuaGVpZ2h0LT1mfXJldHVybiBiKGkpfWZ1bmN0aW9uIHkoZSxyKXt2YXIgbz0hISgyPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1syXSkmJmFyZ3VtZW50c1syXSxpPXAoMTApLG49J0hUTUwnPT09ci5ub2RlTmFtZSxzPXUoZSksbD11KHIpLGQ9YShlKSxtPXQociksZj1wYXJzZUZsb2F0KG0uYm9yZGVyVG9wV2lkdGgsMTApLGg9cGFyc2VGbG9hdChtLmJvcmRlckxlZnRXaWR0aCwxMCk7byYmbiYmKGwudG9wPVplKGwudG9wLDApLGwubGVmdD1aZShsLmxlZnQsMCkpO3ZhciB5PWIoe3RvcDpzLnRvcC1sLnRvcC1mLGxlZnQ6cy5sZWZ0LWwubGVmdC1oLHdpZHRoOnMud2lkdGgsaGVpZ2h0OnMuaGVpZ2h0fSk7aWYoeS5tYXJnaW5Ub3A9MCx5Lm1hcmdpbkxlZnQ9MCwhaSYmbil7dmFyIGc9cGFyc2VGbG9hdChtLm1hcmdpblRvcCwxMCkseD1wYXJzZUZsb2F0KG0ubWFyZ2luTGVmdCwxMCk7eS50b3AtPWYtZyx5LmJvdHRvbS09Zi1nLHkubGVmdC09aC14LHkucmlnaHQtPWgteCx5Lm1hcmdpblRvcD1nLHkubWFyZ2luTGVmdD14fXJldHVybihpJiYhbz9yLmNvbnRhaW5zKGQpOnI9PT1kJiYnQk9EWSchPT1kLm5vZGVOYW1lKSYmKHk9Yyh5LHIpKSx5fWZ1bmN0aW9uIGcoZSl7dmFyIHQ9ISEoMTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pJiZhcmd1bWVudHNbMV0scj1lLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGE9eShlLHIpLHA9WmUoci5jbGllbnRXaWR0aCx3aW5kb3cuaW5uZXJXaWR0aHx8MCksbz1aZShyLmNsaWVudEhlaWdodCx3aW5kb3cuaW5uZXJIZWlnaHR8fDApLGk9dD8wOmQociksbj10PzA6ZChyLCdsZWZ0Jykscz17dG9wOmktYS50b3ArYS5tYXJnaW5Ub3AsbGVmdDpuLWEubGVmdCthLm1hcmdpbkxlZnQsd2lkdGg6cCxoZWlnaHQ6b307cmV0dXJuIGIocyl9ZnVuY3Rpb24geChlKXt2YXIgYT1lLm5vZGVOYW1lO3JldHVybidCT0RZJyE9PWEmJidIVE1MJyE9PWEmJignZml4ZWQnPT09dChlLCdwb3NpdGlvbicpfHx4KHIoZSkpKX1mdW5jdGlvbiB3KGUpe2lmKCFlfHwhZS5wYXJlbnRFbGVtZW50fHxwKCkpcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtmb3IodmFyIHI9ZS5wYXJlbnRFbGVtZW50O3ImJidub25lJz09PXQociwndHJhbnNmb3JtJyk7KXI9ci5wYXJlbnRFbGVtZW50O3JldHVybiByfHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9ZnVuY3Rpb24gdihlLHQscCxvKXt2YXIgaT0hISg0PGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSkmJmFyZ3VtZW50c1s0XSxuPXt0b3A6MCxsZWZ0OjB9LHM9aT93KGUpOmwoZSx0KTtpZigndmlld3BvcnQnPT09byluPWcocyxpKTtlbHNle3ZhciBkOydzY3JvbGxQYXJlbnQnPT09bz8oZD1hKHIodCkpLCdCT0RZJz09PWQubm9kZU5hbWUmJihkPWUub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpKTond2luZG93Jz09PW8/ZD1lLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OmQ9bzt2YXIgYz15KGQscyxpKTtpZignSFRNTCc9PT1kLm5vZGVOYW1lJiYheChzKSl7dmFyIG09aChlLm93bmVyRG9jdW1lbnQpLGY9bS5oZWlnaHQsYj1tLndpZHRoO24udG9wKz1jLnRvcC1jLm1hcmdpblRvcCxuLmJvdHRvbT1mK2MudG9wLG4ubGVmdCs9Yy5sZWZ0LWMubWFyZ2luTGVmdCxuLnJpZ2h0PWIrYy5sZWZ0fWVsc2Ugbj1jfXA9cHx8MDt2YXIgdT0nbnVtYmVyJz09dHlwZW9mIHA7cmV0dXJuIG4ubGVmdCs9dT9wOnAubGVmdHx8MCxuLnRvcCs9dT9wOnAudG9wfHwwLG4ucmlnaHQtPXU/cDpwLnJpZ2h0fHwwLG4uYm90dG9tLT11P3A6cC5ib3R0b218fDAsbn1mdW5jdGlvbiBrKGUpe3ZhciB0PWUud2lkdGgscj1lLmhlaWdodDtyZXR1cm4gdCpyfWZ1bmN0aW9uIEUoZSx0LHIsYSxwKXt2YXIgbz01PGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1s1XT9hcmd1bWVudHNbNV06MDtpZigtMT09PWUuaW5kZXhPZignYXV0bycpKXJldHVybiBlO3ZhciBpPXYocixhLG8scCksbj17dG9wOnt3aWR0aDppLndpZHRoLGhlaWdodDp0LnRvcC1pLnRvcH0scmlnaHQ6e3dpZHRoOmkucmlnaHQtdC5yaWdodCxoZWlnaHQ6aS5oZWlnaHR9LGJvdHRvbTp7d2lkdGg6aS53aWR0aCxoZWlnaHQ6aS5ib3R0b20tdC5ib3R0b219LGxlZnQ6e3dpZHRoOnQubGVmdC1pLmxlZnQsaGVpZ2h0OmkuaGVpZ2h0fX0scz1PYmplY3Qua2V5cyhuKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHd0KHtrZXk6ZX0sbltlXSx7YXJlYTprKG5bZV0pfSl9KS5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuYXJlYS1lLmFyZWF9KSxsPXMuZmlsdGVyKGZ1bmN0aW9uKGUpe3ZhciB0PWUud2lkdGgsYT1lLmhlaWdodDtyZXR1cm4gdD49ci5jbGllbnRXaWR0aCYmYT49ci5jbGllbnRIZWlnaHR9KSxkPTA8bC5sZW5ndGg/bFswXS5rZXk6c1swXS5rZXksYz1lLnNwbGl0KCctJylbMV07cmV0dXJuIGQrKGM/Jy0nK2M6JycpfWZ1bmN0aW9uIEMoZSx0LHIpe3ZhciBhPTM8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzNdP2FyZ3VtZW50c1szXTpudWxsLHA9YT93KHQpOmwodCxyKTtyZXR1cm4geShyLHAsYSl9ZnVuY3Rpb24gTChlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcscj10LmdldENvbXB1dGVkU3R5bGUoZSksYT1wYXJzZUZsb2F0KHIubWFyZ2luVG9wfHwwKStwYXJzZUZsb2F0KHIubWFyZ2luQm90dG9tfHwwKSxwPXBhcnNlRmxvYXQoci5tYXJnaW5MZWZ0fHwwKStwYXJzZUZsb2F0KHIubWFyZ2luUmlnaHR8fDApLG89e3dpZHRoOmUub2Zmc2V0V2lkdGgrcCxoZWlnaHQ6ZS5vZmZzZXRIZWlnaHQrYX07cmV0dXJuIG99ZnVuY3Rpb24gTyhlKXt2YXIgdD17bGVmdDoncmlnaHQnLHJpZ2h0OidsZWZ0Jyxib3R0b206J3RvcCcsdG9wOidib3R0b20nfTtyZXR1cm4gZS5yZXBsYWNlKC9sZWZ0fHJpZ2h0fGJvdHRvbXx0b3AvZyxmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0pfWZ1bmN0aW9uIFQoZSx0LHIpe3I9ci5zcGxpdCgnLScpWzBdO3ZhciBhPUwoZSkscD17d2lkdGg6YS53aWR0aCxoZWlnaHQ6YS5oZWlnaHR9LG89LTEhPT1bJ3JpZ2h0JywnbGVmdCddLmluZGV4T2YociksaT1vPyd0b3AnOidsZWZ0JyxuPW8/J2xlZnQnOid0b3AnLHM9bz8naGVpZ2h0Jzond2lkdGgnLGw9bz8nd2lkdGgnOidoZWlnaHQnO3JldHVybiBwW2ldPXRbaV0rdFtzXS8yLWFbc10vMixwW25dPXI9PT1uP3Rbbl0tYVtsXTp0W08obildLHB9ZnVuY3Rpb24gUyhlLHQpe3JldHVybiBBcnJheS5wcm90b3R5cGUuZmluZD9lLmZpbmQodCk6ZS5maWx0ZXIodClbMF19ZnVuY3Rpb24gQShlLHQscil7aWYoQXJyYXkucHJvdG90eXBlLmZpbmRJbmRleClyZXR1cm4gZS5maW5kSW5kZXgoZnVuY3Rpb24oZSl7cmV0dXJuIGVbdF09PT1yfSk7dmFyIGE9UyhlLGZ1bmN0aW9uKGUpe3JldHVybiBlW3RdPT09cn0pO3JldHVybiBlLmluZGV4T2YoYSl9ZnVuY3Rpb24gWSh0LHIsYSl7dmFyIHA9dm9pZCAwPT09YT90OnQuc2xpY2UoMCxBKHQsJ25hbWUnLGEpKTtyZXR1cm4gcC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3RbJ2Z1bmN0aW9uJ10mJmNvbnNvbGUud2FybignYG1vZGlmaWVyLmZ1bmN0aW9uYCBpcyBkZXByZWNhdGVkLCB1c2UgYG1vZGlmaWVyLmZuYCEnKTt2YXIgYT10WydmdW5jdGlvbiddfHx0LmZuO3QuZW5hYmxlZCYmZShhKSYmKHIub2Zmc2V0cy5wb3BwZXI9YihyLm9mZnNldHMucG9wcGVyKSxyLm9mZnNldHMucmVmZXJlbmNlPWIoci5vZmZzZXRzLnJlZmVyZW5jZSkscj1hKHIsdCkpfSkscn1mdW5jdGlvbiBQKCl7aWYoIXRoaXMuc3RhdGUuaXNEZXN0cm95ZWQpe3ZhciBlPXtpbnN0YW5jZTp0aGlzLHN0eWxlczp7fSxhcnJvd1N0eWxlczp7fSxhdHRyaWJ1dGVzOnt9LGZsaXBwZWQ6ITEsb2Zmc2V0czp7fX07ZS5vZmZzZXRzLnJlZmVyZW5jZT1DKHRoaXMuc3RhdGUsdGhpcy5wb3BwZXIsdGhpcy5yZWZlcmVuY2UsdGhpcy5vcHRpb25zLnBvc2l0aW9uRml4ZWQpLGUucGxhY2VtZW50PUUodGhpcy5vcHRpb25zLnBsYWNlbWVudCxlLm9mZnNldHMucmVmZXJlbmNlLHRoaXMucG9wcGVyLHRoaXMucmVmZXJlbmNlLHRoaXMub3B0aW9ucy5tb2RpZmllcnMuZmxpcC5ib3VuZGFyaWVzRWxlbWVudCx0aGlzLm9wdGlvbnMubW9kaWZpZXJzLmZsaXAucGFkZGluZyksZS5vcmlnaW5hbFBsYWNlbWVudD1lLnBsYWNlbWVudCxlLnBvc2l0aW9uRml4ZWQ9dGhpcy5vcHRpb25zLnBvc2l0aW9uRml4ZWQsZS5vZmZzZXRzLnBvcHBlcj1UKHRoaXMucG9wcGVyLGUub2Zmc2V0cy5yZWZlcmVuY2UsZS5wbGFjZW1lbnQpLGUub2Zmc2V0cy5wb3BwZXIucG9zaXRpb249dGhpcy5vcHRpb25zLnBvc2l0aW9uRml4ZWQ/J2ZpeGVkJzonYWJzb2x1dGUnLGU9WSh0aGlzLm1vZGlmaWVycyxlKSx0aGlzLnN0YXRlLmlzQ3JlYXRlZD90aGlzLm9wdGlvbnMub25VcGRhdGUoZSk6KHRoaXMuc3RhdGUuaXNDcmVhdGVkPSEwLHRoaXMub3B0aW9ucy5vbkNyZWF0ZShlKSl9fWZ1bmN0aW9uIEQoZSx0KXtyZXR1cm4gZS5zb21lKGZ1bmN0aW9uKGUpe3ZhciByPWUubmFtZSxhPWUuZW5hYmxlZDtyZXR1cm4gYSYmcj09PXR9KX1mdW5jdGlvbiBYKGUpe2Zvcih2YXIgdD1bITEsJ21zJywnV2Via2l0JywnTW96JywnTyddLHI9ZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStlLnNsaWNlKDEpLGE9MDthPHQubGVuZ3RoO2ErKyl7dmFyIHA9dFthXSxvPXA/JycrcCtyOmU7aWYoJ3VuZGVmaW5lZCchPXR5cGVvZiBkb2N1bWVudC5ib2R5LnN0eWxlW29dKXJldHVybiBvfXJldHVybiBudWxsfWZ1bmN0aW9uIEkoKXtyZXR1cm4gdGhpcy5zdGF0ZS5pc0Rlc3Ryb3llZD0hMCxEKHRoaXMubW9kaWZpZXJzLCdhcHBseVN0eWxlJykmJih0aGlzLnBvcHBlci5yZW1vdmVBdHRyaWJ1dGUoJ3gtcGxhY2VtZW50JyksdGhpcy5wb3BwZXIuc3R5bGUucG9zaXRpb249JycsdGhpcy5wb3BwZXIuc3R5bGUudG9wPScnLHRoaXMucG9wcGVyLnN0eWxlLmxlZnQ9JycsdGhpcy5wb3BwZXIuc3R5bGUucmlnaHQ9JycsdGhpcy5wb3BwZXIuc3R5bGUuYm90dG9tPScnLHRoaXMucG9wcGVyLnN0eWxlLndpbGxDaGFuZ2U9JycsdGhpcy5wb3BwZXIuc3R5bGVbWCgndHJhbnNmb3JtJyldPScnKSx0aGlzLmRpc2FibGVFdmVudExpc3RlbmVycygpLHRoaXMub3B0aW9ucy5yZW1vdmVPbkRlc3Ryb3kmJnRoaXMucG9wcGVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5wb3BwZXIpLHRoaXN9ZnVuY3Rpb24gTihlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnQ7cmV0dXJuIHQ/dC5kZWZhdWx0Vmlldzp3aW5kb3d9ZnVuY3Rpb24gSChlLHQscixwKXt2YXIgbz0nQk9EWSc9PT1lLm5vZGVOYW1lLGk9bz9lLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc6ZTtpLmFkZEV2ZW50TGlzdGVuZXIodCxyLHtwYXNzaXZlOiEwfSksb3x8SChhKGkucGFyZW50Tm9kZSksdCxyLHApLHAucHVzaChpKX1mdW5jdGlvbiBXKGUsdCxyLHApe3IudXBkYXRlQm91bmQ9cCxOKGUpLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsci51cGRhdGVCb3VuZCx7cGFzc2l2ZTohMH0pO3ZhciBvPWEoZSk7cmV0dXJuIEgobywnc2Nyb2xsJyxyLnVwZGF0ZUJvdW5kLHIuc2Nyb2xsUGFyZW50cyksci5zY3JvbGxFbGVtZW50PW8sci5ldmVudHNFbmFibGVkPSEwLHJ9ZnVuY3Rpb24gTSgpe3RoaXMuc3RhdGUuZXZlbnRzRW5hYmxlZHx8KHRoaXMuc3RhdGU9Vyh0aGlzLnJlZmVyZW5jZSx0aGlzLm9wdGlvbnMsdGhpcy5zdGF0ZSx0aGlzLnNjaGVkdWxlVXBkYXRlKSl9ZnVuY3Rpb24gQihlLHQpe3JldHVybiBOKGUpLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsdC51cGRhdGVCb3VuZCksdC5zY3JvbGxQYXJlbnRzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLHQudXBkYXRlQm91bmQpfSksdC51cGRhdGVCb3VuZD1udWxsLHQuc2Nyb2xsUGFyZW50cz1bXSx0LnNjcm9sbEVsZW1lbnQ9bnVsbCx0LmV2ZW50c0VuYWJsZWQ9ITEsdH1mdW5jdGlvbiBSKCl7dGhpcy5zdGF0ZS5ldmVudHNFbmFibGVkJiYoY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5zY2hlZHVsZVVwZGF0ZSksdGhpcy5zdGF0ZT1CKHRoaXMucmVmZXJlbmNlLHRoaXMuc3RhdGUpKX1mdW5jdGlvbiB6KGUpe3JldHVybicnIT09ZSYmIWlzTmFOKHBhcnNlRmxvYXQoZSkpJiZpc0Zpbml0ZShlKX1mdW5jdGlvbiBGKGUsdCl7T2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgYT0nJzstMSE9PVsnd2lkdGgnLCdoZWlnaHQnLCd0b3AnLCdyaWdodCcsJ2JvdHRvbScsJ2xlZnQnXS5pbmRleE9mKHIpJiZ6KHRbcl0pJiYoYT0ncHgnKSxlLnN0eWxlW3JdPXRbcl0rYX0pfWZ1bmN0aW9uIF8oZSx0KXtPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBhPXRbcl07ITE9PT1hP2UucmVtb3ZlQXR0cmlidXRlKHIpOmUuc2V0QXR0cmlidXRlKHIsdFtyXSl9KX1mdW5jdGlvbiBVKGUsdCl7dmFyIHI9ZS5vZmZzZXRzLGE9ci5wb3BwZXIscD1yLnJlZmVyZW5jZSxvPVFlLGk9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LG49byhhLndpZHRoKSxzPW8ocC53aWR0aCksbD0tMSE9PVsnbGVmdCcsJ3JpZ2h0J10uaW5kZXhPZihlLnBsYWNlbWVudCksZD0tMSE9PWUucGxhY2VtZW50LmluZGV4T2YoJy0nKSxjPXQ/bHx8ZHx8cyUyPT1uJTI/bzpKZTppLG09dD9vOmk7cmV0dXJue2xlZnQ6YygxPT1zJTImJjE9PW4lMiYmIWQmJnQ/YS5sZWZ0LTE6YS5sZWZ0KSx0b3A6bShhLnRvcCksYm90dG9tOm0oYS5ib3R0b20pLHJpZ2h0OmMoYS5yaWdodCl9fWZ1bmN0aW9uIFYoZSx0LHIpe3ZhciBhPVMoZSxmdW5jdGlvbihlKXt2YXIgcj1lLm5hbWU7cmV0dXJuIHI9PT10fSkscD0hIWEmJmUuc29tZShmdW5jdGlvbihlKXtyZXR1cm4gZS5uYW1lPT09ciYmZS5lbmFibGVkJiZlLm9yZGVyPGEub3JkZXJ9KTtpZighcCl7dmFyIG89J2AnK3QrJ2AnO2NvbnNvbGUud2FybignYCcrcisnYCcrJyBtb2RpZmllciBpcyByZXF1aXJlZCBieSAnK28rJyBtb2RpZmllciBpbiBvcmRlciB0byB3b3JrLCBiZSBzdXJlIHRvIGluY2x1ZGUgaXQgYmVmb3JlICcrbysnIScpfXJldHVybiBwfWZ1bmN0aW9uIHEoZSl7cmV0dXJuJ2VuZCc9PT1lPydzdGFydCc6J3N0YXJ0Jz09PWU/J2VuZCc6ZX1mdW5jdGlvbiBqKGUpe3ZhciB0PSEhKDE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzFdKSYmYXJndW1lbnRzWzFdLHI9RXQuaW5kZXhPZihlKSxhPUV0LnNsaWNlKHIrMSkuY29uY2F0KEV0LnNsaWNlKDAscikpO3JldHVybiB0P2EucmV2ZXJzZSgpOmF9ZnVuY3Rpb24gSyhlLHQscixhKXt2YXIgcD1lLm1hdGNoKC8oKD86XFwtfFxcKyk/XFxkKlxcLj9cXGQqKSguKikvKSxvPStwWzFdLGk9cFsyXTtpZighbylyZXR1cm4gZTtpZigwPT09aS5pbmRleE9mKCclJykpe3ZhciBuO3N3aXRjaChpKXtjYXNlJyVwJzpuPXI7YnJlYWs7Y2FzZSclJzpjYXNlJyVyJzpkZWZhdWx0Om49YTt9dmFyIHM9YihuKTtyZXR1cm4gc1t0XS8xMDAqb31pZigndmgnPT09aXx8J3Z3Jz09PWkpe3ZhciBsO3JldHVybiBsPSd2aCc9PT1pP1plKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQsd2luZG93LmlubmVySGVpZ2h0fHwwKTpaZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsd2luZG93LmlubmVyV2lkdGh8fDApLGwvMTAwKm99cmV0dXJuIG99ZnVuY3Rpb24gRyhlLHQscixhKXt2YXIgcD1bMCwwXSxvPS0xIT09WydyaWdodCcsJ2xlZnQnXS5pbmRleE9mKGEpLGk9ZS5zcGxpdCgvKFxcK3xcXC0pLykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyaW0oKX0pLG49aS5pbmRleE9mKFMoaSxmdW5jdGlvbihlKXtyZXR1cm4tMSE9PWUuc2VhcmNoKC8sfFxccy8pfSkpO2lbbl0mJi0xPT09aVtuXS5pbmRleE9mKCcsJykmJmNvbnNvbGUud2FybignT2Zmc2V0cyBzZXBhcmF0ZWQgYnkgd2hpdGUgc3BhY2UocykgYXJlIGRlcHJlY2F0ZWQsIHVzZSBhIGNvbW1hICgsKSBpbnN0ZWFkLicpO3ZhciBzPS9cXHMqLFxccyp8XFxzKy8sbD0tMT09PW4/W2ldOltpLnNsaWNlKDAsbikuY29uY2F0KFtpW25dLnNwbGl0KHMpWzBdXSksW2lbbl0uc3BsaXQocylbMV1dLmNvbmNhdChpLnNsaWNlKG4rMSkpXTtyZXR1cm4gbD1sLm1hcChmdW5jdGlvbihlLGEpe3ZhciBwPSgxPT09YT8hbzpvKT8naGVpZ2h0Jzond2lkdGgnLGk9ITE7cmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuJyc9PT1lW2UubGVuZ3RoLTFdJiYtMSE9PVsnKycsJy0nXS5pbmRleE9mKHQpPyhlW2UubGVuZ3RoLTFdPXQsaT0hMCxlKTppPyhlW2UubGVuZ3RoLTFdKz10LGk9ITEsZSk6ZS5jb25jYXQodCl9LFtdKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIEsoZSxwLHQscil9KX0pLGwuZm9yRWFjaChmdW5jdGlvbihlLHQpe2UuZm9yRWFjaChmdW5jdGlvbihyLGEpe3oocikmJihwW3RdKz1yKignLSc9PT1lW2EtMV0/LTE6MSkpfSl9KSxwfWZ1bmN0aW9uIEooZSx0KXt2YXIgcj10Lm9mZnNldCxhPWUucGxhY2VtZW50LHA9ZS5vZmZzZXRzLG89cC5wb3BwZXIsaT1wLnJlZmVyZW5jZSxuPWEuc3BsaXQoJy0nKVswXSxzPXZvaWQgMDtyZXR1cm4gcz16KCtyKT9bK3IsMF06RyhyLG8saSxuKSwnbGVmdCc9PT1uPyhvLnRvcCs9c1swXSxvLmxlZnQtPXNbMV0pOidyaWdodCc9PT1uPyhvLnRvcCs9c1swXSxvLmxlZnQrPXNbMV0pOid0b3AnPT09bj8oby5sZWZ0Kz1zWzBdLG8udG9wLT1zWzFdKTonYm90dG9tJz09PW4mJihvLmxlZnQrPXNbMF0sby50b3ArPXNbMV0pLGUucG9wcGVyPW8sZX1mdW5jdGlvbiBRKGUpe3JldHVybltdLnNsaWNlLmNhbGwoZSl9ZnVuY3Rpb24gWihlLHQpe3JldHVybihUdC5jbG9zZXN0fHxmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpczt0Oyl7aWYoU3QuY2FsbCh0LGUpKXJldHVybiB0O3Q9dC5wYXJlbnRFbGVtZW50fX0pLmNhbGwoZSx0KX1mdW5jdGlvbiAkKGUsdCl7Zm9yKDtlOyl7aWYodChlKSlyZXR1cm4gZTtlPWUucGFyZW50RWxlbWVudH19ZnVuY3Rpb24gZWUoKXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyl9ZnVuY3Rpb24gdGUoZSx0KXtlW1l0LngmJidpbm5lckhUTUwnXT10IGluc3RhbmNlb2YgRWxlbWVudD90W1l0LngmJidpbm5lckhUTUwnXTp0fWZ1bmN0aW9uIHJlKGUsdCl7dC5jb250ZW50IGluc3RhbmNlb2YgRWxlbWVudD8odGUoZSwnJyksZS5hcHBlbmRDaGlsZCh0LmNvbnRlbnQpKTplW3QuYWxsb3dIVE1MPydpbm5lckhUTUwnOid0ZXh0Q29udGVudCddPXQuY29udGVudH1mdW5jdGlvbiBhZShlKXtyZXR1cm57dG9vbHRpcDplLnF1ZXJ5U2VsZWN0b3IoT3QuVE9PTFRJUCksYmFja2Ryb3A6ZS5xdWVyeVNlbGVjdG9yKE90LkJBQ0tEUk9QKSxjb250ZW50OmUucXVlcnlTZWxlY3RvcihPdC5DT05URU5UKSxhcnJvdzplLnF1ZXJ5U2VsZWN0b3IoT3QuQVJST1cpfHxlLnF1ZXJ5U2VsZWN0b3IoT3QuUk9VTkRfQVJST1cpfX1mdW5jdGlvbiBwZShlKXtlLnNldEF0dHJpYnV0ZSgnZGF0YS1pbmVydGlhJywnJyl9ZnVuY3Rpb24gb2UoZSl7ZS5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtaW5lcnRpYScpfWZ1bmN0aW9uIGllKGUpe3ZhciB0PWVlKCk7cmV0dXJuJ3JvdW5kJz09PWU/KHQuY2xhc3NOYW1lPSd0aXBweS1yb3VuZGFycm93Jyx0ZSh0LCc8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgOFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTMgOHMyLjAyMS0uMDE1IDUuMjUzLTQuMjE4QzkuNTg0IDIuMDUxIDEwLjc5NyAxLjAwNyAxMiAxYzEuMjAzLS4wMDcgMi40MTYgMS4wMzUgMy43NjEgMi43ODJDMTkuMDEyIDguMDA1IDIxIDggMjEgOEgzelwiLz48L3N2Zz4nKSk6dC5jbGFzc05hbWU9J3RpcHB5LWFycm93Jyx0fWZ1bmN0aW9uIG5lKCl7dmFyIGU9ZWUoKTtyZXR1cm4gZS5jbGFzc05hbWU9J3RpcHB5LWJhY2tkcm9wJyxlLnNldEF0dHJpYnV0ZSgnZGF0YS1zdGF0ZScsJ2hpZGRlbicpLGV9ZnVuY3Rpb24gc2UoZSx0KXtlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCctMScpLHQuc2V0QXR0cmlidXRlKCdkYXRhLWludGVyYWN0aXZlJywnJyl9ZnVuY3Rpb24gbGUoZSx0KXtlLnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKSx0LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1pbnRlcmFjdGl2ZScpfWZ1bmN0aW9uIGRlKGUsdCl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UmJihlLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbj10KydtcycpfSl9ZnVuY3Rpb24gY2UoZSx0LHIpe2VbdCsnRXZlbnRMaXN0ZW5lciddKCd0cmFuc2l0aW9uZW5kJyxyKX1mdW5jdGlvbiBtZShlKXt2YXIgdD1lLmdldEF0dHJpYnV0ZSgneC1wbGFjZW1lbnQnKTtyZXR1cm4gdD90LnNwbGl0KCctJylbMF06Jyd9ZnVuY3Rpb24gZmUoZSx0KXtlLmZvckVhY2goZnVuY3Rpb24oZSl7ZSYmZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3RhdGUnLHQpfSl9ZnVuY3Rpb24gaGUoZSl7dm9pZCBlLm9mZnNldEhlaWdodH1mdW5jdGlvbiBiZShlLHQpe3ZhciByPWVlKCk7ci5jbGFzc05hbWU9J3RpcHB5LXBvcHBlcicsci5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCd0b29sdGlwJyksci5pZD0ndGlwcHktJytlLHIuc3R5bGUuekluZGV4PXQuekluZGV4O3ZhciBhPWVlKCk7YS5jbGFzc05hbWU9J3RpcHB5LXRvb2x0aXAnLGEuc3R5bGUubWF4V2lkdGg9dC5tYXhXaWR0aCsoJ251bWJlcic9PXR5cGVvZiB0Lm1heFdpZHRoPydweCc6JycpLGEuc2V0QXR0cmlidXRlKCdkYXRhLXNpemUnLHQuc2l6ZSksYS5zZXRBdHRyaWJ1dGUoJ2RhdGEtYW5pbWF0aW9uJyx0LmFuaW1hdGlvbiksYS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3RhdGUnLCdoaWRkZW4nKSx0LnRoZW1lLnNwbGl0KCcgJykuZm9yRWFjaChmdW5jdGlvbihlKXthLmNsYXNzTGlzdC5hZGQoZSsnLXRoZW1lJyl9KTt2YXIgcD1lZSgpO3JldHVybiBwLmNsYXNzTmFtZT0ndGlwcHktY29udGVudCcscC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3RhdGUnLCdoaWRkZW4nKSx0LmludGVyYWN0aXZlJiZzZShyLGEpLHQuYXJyb3cmJmEuYXBwZW5kQ2hpbGQoaWUodC5hcnJvd1R5cGUpKSx0LmFuaW1hdGVGaWxsJiYoYS5hcHBlbmRDaGlsZChuZSgpKSxhLnNldEF0dHJpYnV0ZSgnZGF0YS1hbmltYXRlZmlsbCcsJycpKSx0LmluZXJ0aWEmJnBlKGEpLHJlKHAsdCksYS5hcHBlbmRDaGlsZChwKSxyLmFwcGVuZENoaWxkKGEpLHIuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLGZ1bmN0aW9uKHQpe3QucmVsYXRlZFRhcmdldCYmci5fdGlwcHkmJiEkKHQucmVsYXRlZFRhcmdldCxmdW5jdGlvbihlKXtyZXR1cm4gZT09PXJ9KSYmdC5yZWxhdGVkVGFyZ2V0IT09ci5fdGlwcHkucmVmZXJlbmNlJiZyLl90aXBweS5wcm9wcy5zaG91bGRQb3BwZXJIaWRlT25CbHVyKHQpJiZyLl90aXBweS5oaWRlKCl9KSxyfWZ1bmN0aW9uIHllKGUsdCxyKXt2YXIgYT1hZShlKSxwPWEudG9vbHRpcCxvPWEuY29udGVudCxpPWEuYmFja2Ryb3Asbj1hLmFycm93O2Uuc3R5bGUuekluZGV4PXIuekluZGV4LHAuc2V0QXR0cmlidXRlKCdkYXRhLXNpemUnLHIuc2l6ZSkscC5zZXRBdHRyaWJ1dGUoJ2RhdGEtYW5pbWF0aW9uJyxyLmFuaW1hdGlvbikscC5zdHlsZS5tYXhXaWR0aD1yLm1heFdpZHRoKygnbnVtYmVyJz09dHlwZW9mIHIubWF4V2lkdGg/J3B4JzonJyksdC5jb250ZW50IT09ci5jb250ZW50JiZyZShvLHIpLCF0LmFuaW1hdGVGaWxsJiZyLmFuaW1hdGVGaWxsPyhwLmFwcGVuZENoaWxkKG5lKCkpLHAuc2V0QXR0cmlidXRlKCdkYXRhLWFuaW1hdGVmaWxsJywnJykpOnQuYW5pbWF0ZUZpbGwmJiFyLmFuaW1hdGVGaWxsJiYocC5yZW1vdmVDaGlsZChpKSxwLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1hbmltYXRlZmlsbCcpKSwhdC5hcnJvdyYmci5hcnJvdz9wLmFwcGVuZENoaWxkKGllKHIuYXJyb3dUeXBlKSk6dC5hcnJvdyYmIXIuYXJyb3cmJnAucmVtb3ZlQ2hpbGQobiksdC5hcnJvdyYmci5hcnJvdyYmdC5hcnJvd1R5cGUhPT1yLmFycm93VHlwZSYmcC5yZXBsYWNlQ2hpbGQoaWUoci5hcnJvd1R5cGUpLG4pLCF0LmludGVyYWN0aXZlJiZyLmludGVyYWN0aXZlP3NlKGUscCk6dC5pbnRlcmFjdGl2ZSYmIXIuaW50ZXJhY3RpdmUmJmxlKGUscCksIXQuaW5lcnRpYSYmci5pbmVydGlhP3BlKHApOnQuaW5lcnRpYSYmIXIuaW5lcnRpYSYmb2UocCksdC50aGVtZSE9PXIudGhlbWUmJih0LnRoZW1lLnNwbGl0KCcgJykuZm9yRWFjaChmdW5jdGlvbihlKXtwLmNsYXNzTGlzdC5yZW1vdmUoZSsnLXRoZW1lJyl9KSxyLnRoZW1lLnNwbGl0KCcgJykuZm9yRWFjaChmdW5jdGlvbihlKXtwLmNsYXNzTGlzdC5hZGQoZSsnLXRoZW1lJyl9KSl9ZnVuY3Rpb24gdWUoZSx0KXt2YXIgcj1lLnBvcHBlcixhPWUub3B0aW9ucyxwPWEub25DcmVhdGUsbz1hLm9uVXBkYXRlO2Eub25DcmVhdGU9YS5vblVwZGF0ZT1mdW5jdGlvbigpe2hlKHIpLHQoKSxvKCksYS5vbkNyZWF0ZT1wLGEub25VcGRhdGU9b319ZnVuY3Rpb24gZ2UoZSl7UShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKE90LlBPUFBFUikpLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIHI9dC5fdGlwcHk7ciYmITA9PT1yLnByb3BzLmhpZGVPbkNsaWNrJiYoIWV8fHQhPT1lLnBvcHBlcikmJnIuaGlkZSgpfSl9ZnVuY3Rpb24geGUoZSx0LHIsYSl7aWYoIWUpcmV0dXJuITA7dmFyIHA9ci5jbGllbnRYLG89ci5jbGllbnRZLGk9YS5pbnRlcmFjdGl2ZUJvcmRlcixuPWEuZGlzdGFuY2Uscz10LnRvcC1vPigndG9wJz09PWU/aStuOmkpLGw9by10LmJvdHRvbT4oJ2JvdHRvbSc9PT1lP2krbjppKSxkPXQubGVmdC1wPignbGVmdCc9PT1lP2krbjppKSxjPXAtdC5yaWdodD4oJ3JpZ2h0Jz09PWU/aStuOmkpO3JldHVybiBzfHxsfHxkfHxjfWZ1bmN0aW9uIHdlKGUsdCl7cmV0dXJuLShlLXQpKydweCd9ZnVuY3Rpb24gdmUoZSl7cmV0dXJuJ1tvYmplY3QgT2JqZWN0XSc9PT17fS50b1N0cmluZy5jYWxsKGUpfWZ1bmN0aW9uIGtlKGUsdCl7cmV0dXJue30uaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfWZ1bmN0aW9uIEVlKGUpe3JldHVybiFpc05hTihlKSYmIWlzTmFOKHBhcnNlRmxvYXQoZSkpfWZ1bmN0aW9uIENlKGUpe2lmKGUgaW5zdGFuY2VvZiBFbGVtZW50fHx2ZShlKSlyZXR1cm5bZV07aWYoZSBpbnN0YW5jZW9mIE5vZGVMaXN0KXJldHVybiBRKGUpO2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGU7dHJ5e3JldHVybiBRKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZSkpfWNhdGNoKHQpe3JldHVybltdfX1mdW5jdGlvbiBMZShlLHQscil7aWYoQXJyYXkuaXNBcnJheShlKSl7dmFyIGE9ZVt0XTtyZXR1cm4gbnVsbD09YT9yOmF9cmV0dXJuIGV9ZnVuY3Rpb24gT2UoZSl7dmFyIHQ9d2luZG93LnNjcm9sbFh8fHdpbmRvdy5wYWdlWE9mZnNldCxyPXdpbmRvdy5zY3JvbGxZfHx3aW5kb3cucGFnZVlPZmZzZXQ7ZS5mb2N1cygpLHNjcm9sbCh0LHIpfWZ1bmN0aW9uIFRlKGUpe3NldFRpbWVvdXQoZSwxKX1mdW5jdGlvbiBTZShlLHQpe3ZhciByO3JldHVybiBmdW5jdGlvbigpe3ZhciBhPXRoaXMscD1hcmd1bWVudHM7Y2xlYXJUaW1lb3V0KHIpLHI9c2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KGEscCl9LHQpfX1mdW5jdGlvbiBBZShlLHQpe3JldHVybiBlJiZlLm1vZGlmaWVycyYmZS5tb2RpZmllcnNbdF19ZnVuY3Rpb24gWWUoZSx0KXtyZXR1cm4tMTxlLmluZGV4T2YodCl9ZnVuY3Rpb24gUGUoKXtQdHx8KFB0PSEwLGl0JiZkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3RpcHB5LWlPUycpLHdpbmRvdy5wZXJmb3JtYW5jZSYmZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyxEZSkpfWZ1bmN0aW9uIERlKCl7dmFyIGU9cGVyZm9ybWFuY2Uubm93KCk7MjA+ZS1EdCYmKFB0PSExLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsRGUpLCFpdCYmZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCd0aXBweS1pT1MnKSksRHQ9ZX1mdW5jdGlvbiBYZShlKXt2YXIgdD1lLnRhcmdldDtpZighKHQgaW5zdGFuY2VvZiBFbGVtZW50KSlyZXR1cm4gZ2UoKTt2YXIgcj1aKHQsT3QuUE9QUEVSKTtpZighKHImJnIuX3RpcHB5JiZyLl90aXBweS5wcm9wcy5pbnRlcmFjdGl2ZSkpe3ZhciBhPSQodCxmdW5jdGlvbihlKXtyZXR1cm4gZS5fdGlwcHkmJmUuX3RpcHB5LnJlZmVyZW5jZT09PWV9KTtpZihhKXt2YXIgcD1hLl90aXBweSxvPVllKHAucHJvcHMudHJpZ2dlciwnY2xpY2snKTtpZihQdHx8bylyZXR1cm4gZ2UocCk7aWYoITAhPT1wLnByb3BzLmhpZGVPbkNsaWNrfHxvKXJldHVybjtwLmNsZWFyRGVsYXlUaW1lb3V0cygpfWdlKCl9fWZ1bmN0aW9uIEllKCl7dmFyIGU9ZG9jdW1lbnQsdD1lLmFjdGl2ZUVsZW1lbnQ7dCYmdC5ibHVyJiZ0Ll90aXBweSYmdC5ibHVyKCl9ZnVuY3Rpb24gTmUoKXtRKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoT3QuUE9QUEVSKSkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1lLl90aXBweTt0LnByb3BzLmxpdmVQbGFjZW1lbnR8fHQucG9wcGVySW5zdGFuY2Uuc2NoZWR1bGVVcGRhdGUoKX0pfWZ1bmN0aW9uIEhlKCl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLFhlLCEwKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JyxQZSxBdCksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLEllKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJyxOZSksIW50JiYobmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzfHxuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cykmJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJyxQZSl9ZnVuY3Rpb24gV2UoZSl7cmV0dXJuIShlIGluc3RhbmNlb2YgRWxlbWVudCl8fFN0LmNhbGwoZSwnYVtocmVmXSxhcmVhW2hyZWZdLGJ1dHRvbixkZXRhaWxzLGlucHV0LHRleHRhcmVhLHNlbGVjdCxpZnJhbWUsW3RhYmluZGV4XScpJiYhZS5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJyl9ZnVuY3Rpb24gTWUoZSl7cmV0dXJuIFh0LnJlZHVjZShmdW5jdGlvbih0LHIpe3ZhciBhPShlLmdldEF0dHJpYnV0ZSgnZGF0YS10aXBweS0nK3IpfHwnJykudHJpbSgpO3JldHVybiBhPyh0W3JdPSdjb250ZW50Jz09PXI/YTondHJ1ZSc9PT1hfHwnZmFsc2UnIT09YSYmKEVlKGEpPythOidbJz09PWFbMF18fCd7Jz09PWFbMF0/SlNPTi5wYXJzZShhKTphKSx0KTp0fSx7fSl9ZnVuY3Rpb24gQmUoZSl7dmFyIHQ9e2lzVmlydHVhbDohMCxhdHRyaWJ1dGVzOmUuYXR0cmlidXRlc3x8e30sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKHQscil7ZS5hdHRyaWJ1dGVzW3RdPXJ9LGdldEF0dHJpYnV0ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5hdHRyaWJ1dGVzW3RdfSxyZW1vdmVBdHRyaWJ1dGU6ZnVuY3Rpb24odCl7ZGVsZXRlIGUuYXR0cmlidXRlc1t0XX0saGFzQXR0cmlidXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0IGluIGUuYXR0cmlidXRlc30sYWRkRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbigpe30scmVtb3ZlRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbigpe30sY2xhc3NMaXN0OntjbGFzc05hbWVzOnt9LGFkZDpmdW5jdGlvbih0KXtlLmNsYXNzTGlzdC5jbGFzc05hbWVzW3RdPSEwfSxyZW1vdmU6ZnVuY3Rpb24odCl7ZGVsZXRlIGUuY2xhc3NMaXN0LmNsYXNzTmFtZXNbdF19LGNvbnRhaW5zOmZ1bmN0aW9uKHQpe3JldHVybiB0IGluIGUuY2xhc3NMaXN0LmNsYXNzTmFtZXN9fX07Zm9yKHZhciByIGluIHQpZVtyXT10W3JdfWZ1bmN0aW9uIFJlKGUsdCl7dmFyIHI9SXQoe30sdCx0LnBlcmZvcm1hbmNlP3t9Ok1lKGUpKTtyZXR1cm4gci5hcnJvdyYmKHIuYW5pbWF0ZUZpbGw9ITEpLCdmdW5jdGlvbic9PXR5cGVvZiByLmFwcGVuZFRvJiYoci5hcHBlbmRUbz10LmFwcGVuZFRvKGUpKSwnZnVuY3Rpb24nPT10eXBlb2Ygci5jb250ZW50JiYoci5jb250ZW50PXQuY29udGVudChlKSkscn1mdW5jdGlvbiB6ZSgpe3ZhciBlPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSx0PWFyZ3VtZW50c1sxXTtPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKCFrZSh0LGUpKXRocm93IG5ldyBFcnJvcignW3RpcHB5XTogYCcrZSsnYCBpcyBub3QgYSB2YWxpZCBvcHRpb24nKX0pfWZ1bmN0aW9uIEZlKGUsdCl7cmV0dXJuKHQ/ZTp7WDonWScsWTonWCd9W2VdKXx8Jyd9ZnVuY3Rpb24gX2UoZSx0LHIscCl7dmFyIG89dFswXSxpPXRbMV07aWYoIW8mJiFpKXJldHVybicnO3ZhciBuPXtzY2FsZTpmdW5jdGlvbigpe3JldHVybiBpP3I/bysnLCAnK2k6aSsnLCAnK286Jycrb30oKSx0cmFuc2xhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gaT9yP3A/bysncHgsICcrLWkrJ3B4JzpvKydweCwgJytpKydweCc6cD8taSsncHgsICcrbysncHgnOmkrJ3B4LCAnK28rJ3B4JzpwPy1vKydweCc6bysncHgnfSgpfTtyZXR1cm4gbltlXX1mdW5jdGlvbiBVZShlLHQpe3ZhciByPWUubWF0Y2gobmV3IFJlZ0V4cCh0KycoW1hZXSknKSk7cmV0dXJuIHI/clsxXTonJ31mdW5jdGlvbiBWZShlLHQpe3ZhciByPWUubWF0Y2godCk7cmV0dXJuIHI/clsxXS5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VGbG9hdChlLDEwKX0pOltdfWZ1bmN0aW9uIHFlKGUsdCl7dmFyIHI9bWUoWihlLE90LlBPUFBFUikpLGE9WWUoWyd0b3AnLCdib3R0b20nXSxyKSxwPVllKFsncmlnaHQnLCdib3R0b20nXSxyKSxvPXt0cmFuc2xhdGU6e2F4aXM6VWUodCwndHJhbnNsYXRlJyksbnVtYmVyczpWZSh0LE50LnRyYW5zbGF0ZSl9LHNjYWxlOntheGlzOlVlKHQsJ3NjYWxlJyksbnVtYmVyczpWZSh0LE50LnNjYWxlKX19LGk9dC5yZXBsYWNlKE50LnRyYW5zbGF0ZSwndHJhbnNsYXRlJytGZShvLnRyYW5zbGF0ZS5heGlzLGEpKycoJytfZSgndHJhbnNsYXRlJyxvLnRyYW5zbGF0ZS5udW1iZXJzLGEscCkrJyknKS5yZXBsYWNlKE50LnNjYWxlLCdzY2FsZScrRmUoby5zY2FsZS5heGlzLGEpKycoJytfZSgnc2NhbGUnLG8uc2NhbGUubnVtYmVycyxhLHApKycpJyk7ZS5zdHlsZVsndW5kZWZpbmVkJz09dHlwZW9mIGRvY3VtZW50LmJvZHkuc3R5bGUudHJhbnNmb3JtPyd3ZWJraXRUcmFuc2Zvcm0nOid0cmFuc2Zvcm0nXT1pfWZ1bmN0aW9uIGplKGUsdCl7ZnVuY3Rpb24gcigpe1RlKGZ1bmN0aW9uKCl7ej0hMX0pfWZ1bmN0aW9uIGEoKXtYPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKCl7cS5wb3BwZXJJbnN0YW5jZS51cGRhdGUoKX0pLFgub2JzZXJ2ZShVLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMCxjaGFyYWN0ZXJEYXRhOiEwfSl9ZnVuY3Rpb24gcChlKXt2YXIgdD1OPWUscj10LmNsaWVudFgsYT10LmNsaWVudFk7aWYocS5wb3BwZXJJbnN0YW5jZSl7dmFyIHA9bWUocS5wb3BwZXIpLG89cS5wb3BwZXJDaGlsZHJlbi5hcnJvdz8yMDo1LGk9WWUoWyd0b3AnLCdib3R0b20nXSxwKSxuPVllKFsnbGVmdCcsJ3JpZ2h0J10scCksbD1pP1plKG8scik6cixkPW4/WmUobyxhKTphO2kmJmw+byYmKGw9R2Uocix3aW5kb3cuaW5uZXJXaWR0aC1vKSksbiYmZD5vJiYoZD1HZShhLHdpbmRvdy5pbm5lckhlaWdodC1vKSk7dmFyIGM9cS5yZWZlcmVuY2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbT1xLnByb3BzLmZvbGxvd0N1cnNvcixmPSdob3Jpem9udGFsJz09PW0saD0ndmVydGljYWwnPT09bTtxLnBvcHBlckluc3RhbmNlLnJlZmVyZW5jZT17Z2V0Qm91bmRpbmdDbGllbnRSZWN0OmZ1bmN0aW9uKCl7cmV0dXJue3dpZHRoOjAsaGVpZ2h0OjAsdG9wOmY/Yy50b3A6ZCxib3R0b206Zj9jLmJvdHRvbTpkLGxlZnQ6aD9jLmxlZnQ6bCxyaWdodDpoP2MucmlnaHQ6bH19LGNsaWVudFdpZHRoOjAsY2xpZW50SGVpZ2h0OjB9LHEucG9wcGVySW5zdGFuY2Uuc2NoZWR1bGVVcGRhdGUoKSwnaW5pdGlhbCc9PT1tJiZxLnN0YXRlLmlzVmlzaWJsZSYmcygpfX1mdW5jdGlvbiBvKGUpe3ZhciB0PVooZS50YXJnZXQscS5wcm9wcy50YXJnZXQpO3QmJiF0Ll90aXBweSYmKGplKHQsSXQoe30scS5wcm9wcyx7dGFyZ2V0OicnLHNob3dPbkluaXQ6ITB9KSksaShlKSl9ZnVuY3Rpb24gaShlKXtpZihUKCksIXEuc3RhdGUuaXNWaXNpYmxlKXtpZihxLnByb3BzLnRhcmdldClyZXR1cm4gbyhlKTtpZihNPSEwLHEucHJvcHMud2FpdClyZXR1cm4gcS5wcm9wcy53YWl0KHEsZSk7eCgpJiYhcS5zdGF0ZS5pc01vdW50ZWQmJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScscCk7dmFyIHQ9TGUocS5wcm9wcy5kZWxheSwwLHN0LmRlbGF5KTt0P0g9c2V0VGltZW91dChmdW5jdGlvbigpe0EoKX0sdCk6QSgpfX1mdW5jdGlvbiBuKCl7aWYoVCgpLCFxLnN0YXRlLmlzVmlzaWJsZSlyZXR1cm4gcygpO009ITE7dmFyIGU9TGUocS5wcm9wcy5kZWxheSwxLHN0LmRlbGF5KTtlP1c9c2V0VGltZW91dChmdW5jdGlvbigpe3Euc3RhdGUuaXNWaXNpYmxlJiZZKCl9LGUpOlkoKX1mdW5jdGlvbiBzKCl7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyxwKSxOPW51bGx9ZnVuY3Rpb24gbCgpe2RvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsbiksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyxGKX1mdW5jdGlvbiBkKGUpeyFxLnN0YXRlLmlzRW5hYmxlZHx8eShlKXx8KCFxLnN0YXRlLmlzVmlzaWJsZSYmKEk9ZSksJ2NsaWNrJz09PWUudHlwZSYmITEhPT1xLnByb3BzLmhpZGVPbkNsaWNrJiZxLnN0YXRlLmlzVmlzaWJsZT9uKCk6aShlKSl9ZnVuY3Rpb24gYyhlKXt2YXIgdD0kKGUudGFyZ2V0LGZ1bmN0aW9uKGUpe3JldHVybiBlLl90aXBweX0pLHI9WihlLnRhcmdldCxPdC5QT1BQRVIpPT09cS5wb3BwZXIsYT10PT09cS5yZWZlcmVuY2U7cnx8YXx8eGUobWUocS5wb3BwZXIpLHEucG9wcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGUscS5wcm9wcykmJihsKCksbigpKX1mdW5jdGlvbiBtKGUpe3JldHVybiB5KGUpP3ZvaWQgMDpxLnByb3BzLmludGVyYWN0aXZlPyhkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLG4pLHZvaWQgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyxGKSk6dm9pZCBuKCl9ZnVuY3Rpb24gZihlKXtpZihlLnRhcmdldD09PXEucmVmZXJlbmNlKXtpZihxLnByb3BzLmludGVyYWN0aXZlKXtpZighZS5yZWxhdGVkVGFyZ2V0KXJldHVybjtpZihaKGUucmVsYXRlZFRhcmdldCxPdC5QT1BQRVIpKXJldHVybn1uKCl9fWZ1bmN0aW9uIGgoZSl7WihlLnRhcmdldCxxLnByb3BzLnRhcmdldCkmJmkoZSl9ZnVuY3Rpb24gYihlKXtaKGUudGFyZ2V0LHEucHJvcHMudGFyZ2V0KSYmbigpfWZ1bmN0aW9uIHkoZSl7dmFyIHQ9WWUoZS50eXBlLCd0b3VjaCcpLHI9bnQmJlB0JiZxLnByb3BzLnRvdWNoSG9sZCYmIXQsYT1QdCYmIXEucHJvcHMudG91Y2hIb2xkJiZ0O3JldHVybiByfHxhfWZ1bmN0aW9uIHUoKXt2YXIgZT1xLnByb3BzLnBvcHBlck9wdGlvbnMsdD1xLnBvcHBlckNoaWxkcmVuLHI9dC50b29sdGlwLGE9dC5hcnJvdztyZXR1cm4gbmV3IEx0KHEucmVmZXJlbmNlLHEucG9wcGVyLEl0KHtwbGFjZW1lbnQ6cS5wcm9wcy5wbGFjZW1lbnR9LGUse21vZGlmaWVyczpJdCh7fSxlP2UubW9kaWZpZXJzOnt9LHtwcmV2ZW50T3ZlcmZsb3c6SXQoe2JvdW5kYXJpZXNFbGVtZW50OnEucHJvcHMuYm91bmRhcnl9LEFlKGUsJ3ByZXZlbnRPdmVyZmxvdycpKSxhcnJvdzpJdCh7ZWxlbWVudDphLGVuYWJsZWQ6ISFhfSxBZShlLCdhcnJvdycpKSxmbGlwOkl0KHtlbmFibGVkOnEucHJvcHMuZmxpcCxwYWRkaW5nOnEucHJvcHMuZGlzdGFuY2UrNSxiZWhhdmlvcjpxLnByb3BzLmZsaXBCZWhhdmlvcn0sQWUoZSwnZmxpcCcpKSxvZmZzZXQ6SXQoe29mZnNldDpxLnByb3BzLm9mZnNldH0sQWUoZSwnb2Zmc2V0JykpfSksb25DcmVhdGU6ZnVuY3Rpb24oKXtyLnN0eWxlW21lKHEucG9wcGVyKV09d2UocS5wcm9wcy5kaXN0YW5jZSxzdC5kaXN0YW5jZSksYSYmcS5wcm9wcy5hcnJvd1RyYW5zZm9ybSYmcWUoYSxxLnByb3BzLmFycm93VHJhbnNmb3JtKX0sb25VcGRhdGU6ZnVuY3Rpb24oKXt2YXIgZT1yLnN0eWxlO2UudG9wPScnLGUuYm90dG9tPScnLGUubGVmdD0nJyxlLnJpZ2h0PScnLGVbbWUocS5wb3BwZXIpXT13ZShxLnByb3BzLmRpc3RhbmNlLHN0LmRpc3RhbmNlKSxhJiZxLnByb3BzLmFycm93VHJhbnNmb3JtJiZxZShhLHEucHJvcHMuYXJyb3dUcmFuc2Zvcm0pfX0pKX1mdW5jdGlvbiBnKGUpe3EucG9wcGVySW5zdGFuY2U/IXgoKSYmKHEucG9wcGVySW5zdGFuY2Uuc2NoZWR1bGVVcGRhdGUoKSxxLnByb3BzLmxpdmVQbGFjZW1lbnQmJnEucG9wcGVySW5zdGFuY2UuZW5hYmxlRXZlbnRMaXN0ZW5lcnMoKSk6KHEucG9wcGVySW5zdGFuY2U9dSgpLGEoKSwoIXEucHJvcHMubGl2ZVBsYWNlbWVudHx8eCgpKSYmcS5wb3BwZXJJbnN0YW5jZS5kaXNhYmxlRXZlbnRMaXN0ZW5lcnMoKSkscS5wb3BwZXJJbnN0YW5jZS5yZWZlcmVuY2U9cS5yZWZlcmVuY2U7dmFyIHQ9cS5wb3BwZXJDaGlsZHJlbi5hcnJvdztpZih4KCkpe3QmJih0LnN0eWxlLm1hcmdpbj0nMCcpO3ZhciByPUxlKHEucHJvcHMuZGVsYXksMCxzdC5kZWxheSk7SS50eXBlJiZwKHImJk4/TjpJKX1lbHNlIHQmJih0LnN0eWxlLm1hcmdpbj0nJyk7dWUocS5wb3BwZXJJbnN0YW5jZSxlKSxxLnByb3BzLmFwcGVuZFRvLmNvbnRhaW5zKHEucG9wcGVyKXx8KHEucHJvcHMuYXBwZW5kVG8uYXBwZW5kQ2hpbGQocS5wb3BwZXIpLHEucHJvcHMub25Nb3VudChxKSxxLnN0YXRlLmlzTW91bnRlZD0hMCl9ZnVuY3Rpb24geCgpe3JldHVybiBxLnByb3BzLmZvbGxvd0N1cnNvciYmIVB0JiYnZm9jdXMnIT09SS50eXBlfWZ1bmN0aW9uIHcoKXtkZShbcS5wb3BwZXJdLG90PzA6cS5wcm9wcy51cGRhdGVEdXJhdGlvbik7KGZ1bmN0aW9uIGUoKXtxLnBvcHBlckluc3RhbmNlJiZxLnBvcHBlckluc3RhbmNlLnNjaGVkdWxlVXBkYXRlKCkscS5zdGF0ZS5pc01vdW50ZWQ/cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGUpOmRlKFtxLnBvcHBlcl0sMCl9KSgpfWZ1bmN0aW9uIHYoZSx0KXtFKGUsZnVuY3Rpb24oKXshcS5zdGF0ZS5pc1Zpc2libGUmJnEucHJvcHMuYXBwZW5kVG8uY29udGFpbnMocS5wb3BwZXIpJiZ0KCl9KX1mdW5jdGlvbiBrKGUsdCl7RShlLHQpfWZ1bmN0aW9uIEUoZSx0KXtpZigwPT09ZSlyZXR1cm4gdCgpO3ZhciByPXEucG9wcGVyQ2hpbGRyZW4udG9vbHRpcCxhPWZ1bmN0aW9uIGEocCl7cC50YXJnZXQ9PT1yJiYoY2UociwncmVtb3ZlJyxhKSx0KCkpfTtjZShyLCdyZW1vdmUnLEIpLGNlKHIsJ2FkZCcsYSksQj1hfWZ1bmN0aW9uIEMoZSx0KXt2YXIgcj0hISgyPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1syXSkmJmFyZ3VtZW50c1syXTtxLnJlZmVyZW5jZS5hZGRFdmVudExpc3RlbmVyKGUsdCxyKSxSLnB1c2goe2V2ZW50VHlwZTplLGhhbmRsZXI6dCxvcHRpb25zOnJ9KX1mdW5jdGlvbiBMKCl7cS5wcm9wcy50b3VjaEhvbGQmJiFxLnByb3BzLnRhcmdldCYmKEMoJ3RvdWNoc3RhcnQnLGQsQXQpLEMoJ3RvdWNoZW5kJyxtLEF0KSkscS5wcm9wcy50cmlnZ2VyLnRyaW0oKS5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24oZSl7J21hbnVhbCc9PT1lfHwocS5wcm9wcy50YXJnZXQ/J21vdXNlZW50ZXInPT09ZT8oQygnbW91c2VvdmVyJyxoKSxDKCdtb3VzZW91dCcsYikpOidmb2N1cyc9PT1lPyhDKCdmb2N1c2luJyxoKSxDKCdmb2N1c291dCcsYikpOidjbGljayc9PT1lP0MoZSxoKTp2b2lkIDA6KEMoZSxkKSwnbW91c2VlbnRlcic9PT1lP0MoJ21vdXNlbGVhdmUnLG0pOidmb2N1cyc9PT1lP0Mob3Q/J2ZvY3Vzb3V0JzonYmx1cicsZik6dm9pZCAwKSl9KX1mdW5jdGlvbiBPKCl7Ui5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PWUuZXZlbnRUeXBlLHI9ZS5oYW5kbGVyLGE9ZS5vcHRpb25zO3EucmVmZXJlbmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxyLGEpfSksUj1bXX1mdW5jdGlvbiBUKCl7Y2xlYXJUaW1lb3V0KEgpLGNsZWFyVGltZW91dChXKX1mdW5jdGlvbiBTKCl7dmFyIGU9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3plKGUsc3QpO3ZhciB0PXEucHJvcHMscj1SZShxLnJlZmVyZW5jZSxJdCh7fSxxLnByb3BzLGUse3BlcmZvcm1hbmNlOiEwfSkpO3IucGVyZm9ybWFuY2U9a2UoZSwncGVyZm9ybWFuY2UnKT9lLnBlcmZvcm1hbmNlOnQucGVyZm9ybWFuY2UscS5wcm9wcz1yLChrZShlLCd0cmlnZ2VyJyl8fGtlKGUsJ3RvdWNoSG9sZCcpKSYmKE8oKSxMKCkpLGtlKGUsJ2ludGVyYWN0aXZlRGVib3VuY2UnKSYmKGwoKSxGPVNlKGMsZS5pbnRlcmFjdGl2ZURlYm91bmNlKSkseWUocS5wb3BwZXIsdCxyKSxxLnBvcHBlckNoaWxkcmVuPWFlKHEucG9wcGVyKSxxLnBvcHBlckluc3RhbmNlJiZsdC5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiBrZShlLHQpfSkmJihxLnBvcHBlckluc3RhbmNlLmRlc3Ryb3koKSxxLnBvcHBlckluc3RhbmNlPXUoKSwhcS5zdGF0ZS5pc1Zpc2libGUmJnEucG9wcGVySW5zdGFuY2UuZGlzYWJsZUV2ZW50TGlzdGVuZXJzKCkscS5wcm9wcy5mb2xsb3dDdXJzb3ImJk4mJnAoTikpfWZ1bmN0aW9uIEEoKXt2YXIgZT0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06TGUocS5wcm9wcy5kdXJhdGlvbiwwLHN0LmR1cmF0aW9uWzBdKTtyZXR1cm4gcS5zdGF0ZS5pc0Rlc3Ryb3llZHx8IXEuc3RhdGUuaXNFbmFibGVkfHxQdCYmIXEucHJvcHMudG91Y2g/dm9pZCAwOnEucmVmZXJlbmNlLmlzVmlydHVhbHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKHEucmVmZXJlbmNlKT9xLnJlZmVyZW5jZS5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk/dm9pZCAwOno/dm9pZCh6PSExKTp2b2lkKCExPT09cS5wcm9wcy5vblNob3cocSl8fChxLnBvcHBlci5zdHlsZS52aXNpYmlsaXR5PSd2aXNpYmxlJyxxLnN0YXRlLmlzVmlzaWJsZT0hMCxkZShbcS5wb3BwZXIscS5wb3BwZXJDaGlsZHJlbi50b29sdGlwLHEucG9wcGVyQ2hpbGRyZW4uYmFja2Ryb3BdLDApLGcoZnVuY3Rpb24oKXtxLnN0YXRlLmlzVmlzaWJsZSYmKCF4KCkmJnEucG9wcGVySW5zdGFuY2UudXBkYXRlKCksZGUoW3EucG9wcGVyQ2hpbGRyZW4udG9vbHRpcCxxLnBvcHBlckNoaWxkcmVuLmJhY2tkcm9wLHEucG9wcGVyQ2hpbGRyZW4uY29udGVudF0sZSkscS5wb3BwZXJDaGlsZHJlbi5iYWNrZHJvcCYmKHEucG9wcGVyQ2hpbGRyZW4uY29udGVudC5zdHlsZS50cmFuc2l0aW9uRGVsYXk9UWUoZS82KSsnbXMnKSxxLnByb3BzLmludGVyYWN0aXZlJiZxLnJlZmVyZW5jZS5jbGFzc0xpc3QuYWRkKCd0aXBweS1hY3RpdmUnKSxxLnByb3BzLnN0aWNreSYmdygpLGZlKFtxLnBvcHBlckNoaWxkcmVuLnRvb2x0aXAscS5wb3BwZXJDaGlsZHJlbi5iYWNrZHJvcCxxLnBvcHBlckNoaWxkcmVuLmNvbnRlbnRdLCd2aXNpYmxlJyksayhlLGZ1bmN0aW9uKCl7MD09PXEucHJvcHMudXBkYXRlRHVyYXRpb24mJnEucG9wcGVyQ2hpbGRyZW4udG9vbHRpcC5jbGFzc0xpc3QuYWRkKCd0aXBweS1ub3RyYW5zaXRpb24nKSxxLnByb3BzLmF1dG9Gb2N1cyYmcS5wcm9wcy5pbnRlcmFjdGl2ZSYmWWUoWydmb2N1cycsJ2NsaWNrJ10sSS50eXBlKSYmT2UocS5wb3BwZXIpLHEucHJvcHMuYXJpYSYmcS5yZWZlcmVuY2Uuc2V0QXR0cmlidXRlKCdhcmlhLScrcS5wcm9wcy5hcmlhLHEucG9wcGVyLmlkKSxxLnByb3BzLm9uU2hvd24ocSkscS5zdGF0ZS5pc1Nob3duPSEwfSkpfSkpKTpQKCl9ZnVuY3Rpb24gWSgpe3ZhciBlPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpMZShxLnByb3BzLmR1cmF0aW9uLDEsc3QuZHVyYXRpb25bMV0pO3Euc3RhdGUuaXNEZXN0cm95ZWR8fCFxLnN0YXRlLmlzRW5hYmxlZHx8ITE9PT1xLnByb3BzLm9uSGlkZShxKXx8KDA9PT1xLnByb3BzLnVwZGF0ZUR1cmF0aW9uJiZxLnBvcHBlckNoaWxkcmVuLnRvb2x0aXAuY2xhc3NMaXN0LnJlbW92ZSgndGlwcHktbm90cmFuc2l0aW9uJykscS5wcm9wcy5pbnRlcmFjdGl2ZSYmcS5yZWZlcmVuY2UuY2xhc3NMaXN0LnJlbW92ZSgndGlwcHktYWN0aXZlJykscS5wb3BwZXIuc3R5bGUudmlzaWJpbGl0eT0naGlkZGVuJyxxLnN0YXRlLmlzVmlzaWJsZT0hMSxxLnN0YXRlLmlzU2hvd249ITEsZGUoW3EucG9wcGVyQ2hpbGRyZW4udG9vbHRpcCxxLnBvcHBlckNoaWxkcmVuLmJhY2tkcm9wLHEucG9wcGVyQ2hpbGRyZW4uY29udGVudF0sZSksZmUoW3EucG9wcGVyQ2hpbGRyZW4udG9vbHRpcCxxLnBvcHBlckNoaWxkcmVuLmJhY2tkcm9wLHEucG9wcGVyQ2hpbGRyZW4uY29udGVudF0sJ2hpZGRlbicpLHEucHJvcHMuYXV0b0ZvY3VzJiZxLnByb3BzLmludGVyYWN0aXZlJiYheiYmWWUoWydmb2N1cycsJ2NsaWNrJ10sSS50eXBlKSYmKCdmb2N1cyc9PT1JLnR5cGUmJih6PSEwKSxPZShxLnJlZmVyZW5jZSkpLHYoZSxmdW5jdGlvbigpe018fHMoKSxxLnByb3BzLmFyaWEmJnEucmVmZXJlbmNlLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS0nK3EucHJvcHMuYXJpYSkscS5wb3BwZXJJbnN0YW5jZS5kaXNhYmxlRXZlbnRMaXN0ZW5lcnMoKSxxLnByb3BzLmFwcGVuZFRvLnJlbW92ZUNoaWxkKHEucG9wcGVyKSxxLnN0YXRlLmlzTW91bnRlZD0hMSxxLnByb3BzLm9uSGlkZGVuKHEpfSkpfWZ1bmN0aW9uIFAoZSl7cS5zdGF0ZS5pc0Rlc3Ryb3llZHx8KHEuc3RhdGUuaXNNb3VudGVkJiZZKDApLE8oKSxxLnJlZmVyZW5jZS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsciksZGVsZXRlIHEucmVmZXJlbmNlLl90aXBweSxxLnByb3BzLnRhcmdldCYmZSYmUShxLnJlZmVyZW5jZS5xdWVyeVNlbGVjdG9yQWxsKHEucHJvcHMudGFyZ2V0KSkuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gZS5fdGlwcHkmJmUuX3RpcHB5LmRlc3Ryb3koKX0pLHEucG9wcGVySW5zdGFuY2UmJnEucG9wcGVySW5zdGFuY2UuZGVzdHJveSgpLFgmJlguZGlzY29ubmVjdCgpLHEuc3RhdGUuaXNEZXN0cm95ZWQ9ITApfXZhciBEPVJlKGUsdCk7aWYoIUQubXVsdGlwbGUmJmUuX3RpcHB5KXJldHVybiBudWxsO3ZhciBYPW51bGwsST17fSxOPW51bGwsSD0wLFc9MCxNPSExLEI9ZnVuY3Rpb24oKXt9LFI9W10sej0hMSxGPTA8RC5pbnRlcmFjdGl2ZURlYm91bmNlP1NlKGMsRC5pbnRlcmFjdGl2ZURlYm91bmNlKTpjLF89SHQrKyxVPWJlKF8sRCk7VS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJyxmdW5jdGlvbihlKXtxLnByb3BzLmludGVyYWN0aXZlJiZxLnN0YXRlLmlzVmlzaWJsZSYmJ21vdXNlZW50ZXInPT09SS50eXBlJiZpKGUpfSksVS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxmdW5jdGlvbihlKXtxLnByb3BzLmludGVyYWN0aXZlJiYnbW91c2VlbnRlcic9PT1JLnR5cGUmJjA9PT1xLnByb3BzLmludGVyYWN0aXZlRGVib3VuY2UmJnhlKG1lKFUpLFUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZSxxLnByb3BzKSYmbigpfSk7dmFyIFY9YWUoVSkscT17aWQ6XyxyZWZlcmVuY2U6ZSxwb3BwZXI6VSxwb3BwZXJDaGlsZHJlbjpWLHBvcHBlckluc3RhbmNlOm51bGwscHJvcHM6RCxzdGF0ZTp7aXNFbmFibGVkOiEwLGlzVmlzaWJsZTohMSxpc0Rlc3Ryb3llZDohMSxpc01vdW50ZWQ6ITEsaXNTaG93bjohMX0sY2xlYXJEZWxheVRpbWVvdXRzOlQsc2V0OlMsc2V0Q29udGVudDpmdW5jdGlvbihlKXtTKHtjb250ZW50OmV9KX0sc2hvdzpBLGhpZGU6WSxlbmFibGU6ZnVuY3Rpb24oKXtxLnN0YXRlLmlzRW5hYmxlZD0hMH0sZGlzYWJsZTpmdW5jdGlvbigpe3Euc3RhdGUuaXNFbmFibGVkPSExfSxkZXN0cm95OlB9O3JldHVybiBMKCksZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsciksRC5sYXp5fHwocS5wb3BwZXJJbnN0YW5jZT11KCkscS5wb3BwZXJJbnN0YW5jZS5kaXNhYmxlRXZlbnRMaXN0ZW5lcnMoKSksRC5zaG93T25Jbml0JiZpKCksIUQuYTExeXx8RC50YXJnZXR8fFdlKGUpfHxlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCcwJyksZS5fdGlwcHk9cSxVLl90aXBweT1xLHF9ZnVuY3Rpb24gS2UoZSx0LHIpe3plKHQsc3QpLFd0fHwoSGUoKSxXdD0hMCk7dmFyIGE9SXQoe30sc3QsdCk7dmUoZSkmJkJlKGUpO3ZhciBwPUNlKGUpLG89cFswXSxpPShyJiZvP1tvXTpwKS5yZWR1Y2UoZnVuY3Rpb24oZSx0KXt2YXIgcj10JiZqZSh0LGEpO3JldHVybiByJiZlLnB1c2gociksZX0sW10pLG49e3RhcmdldHM6ZSxwcm9wczphLGluc3RhbmNlczppLGRlc3Ryb3lBbGw6ZnVuY3Rpb24oKXtuLmluc3RhbmNlcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuZGVzdHJveSgpfSksbi5pbnN0YW5jZXM9W119fTtyZXR1cm4gbn1mb3IodmFyIEdlPU1hdGgubWluLEplPU1hdGguZmxvb3IsUWU9TWF0aC5yb3VuZCxaZT1NYXRoLm1heCwkZT0nLnRpcHB5LWlPU3tjdXJzb3I6cG9pbnRlciFpbXBvcnRhbnR9LnRpcHB5LW5vdHJhbnNpdGlvbnt0cmFuc2l0aW9uOm5vbmUhaW1wb3J0YW50fS50aXBweS1wb3BwZXJ7LXdlYmtpdC1wZXJzcGVjdGl2ZTo3MDBweDtwZXJzcGVjdGl2ZTo3MDBweDt6LWluZGV4Ojk5OTk7b3V0bGluZTowO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllciguMTY1LC44NCwuNDQsMSk7cG9pbnRlci1ldmVudHM6bm9uZTtsaW5lLWhlaWdodDoxLjQ7bWF4LXdpZHRoOmNhbGMoMTAwJSAtIDEwcHgpfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePXRvcF0gLnRpcHB5LWJhY2tkcm9we2JvcmRlci1yYWRpdXM6NDAlIDQwJSAwIDB9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49dG9wXSAudGlwcHktcm91bmRhcnJvd3tib3R0b206LThweDstd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46NTAlIDA7dHJhbnNmb3JtLW9yaWdpbjo1MCUgMH0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj10b3BdIC50aXBweS1yb3VuZGFycm93IHN2Z3twb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDE4MGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgxODBkZWcpfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePXRvcF0gLnRpcHB5LWFycm93e2JvcmRlci10b3A6OHB4IHNvbGlkICMzMzM7Ym9yZGVyLXJpZ2h0OjhweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItbGVmdDo4cHggc29saWQgdHJhbnNwYXJlbnQ7Ym90dG9tOi03cHg7bWFyZ2luOjAgNnB4Oy13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjo1MCUgMDt0cmFuc2Zvcm0tb3JpZ2luOjUwJSAwfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePXRvcF0gLnRpcHB5LWJhY2tkcm9wey13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjowIDI1JTt0cmFuc2Zvcm0tb3JpZ2luOjAgMjUlfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePXRvcF0gLnRpcHB5LWJhY2tkcm9wW2RhdGEtc3RhdGU9dmlzaWJsZV17LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMSkgdHJhbnNsYXRlKC01MCUsLTU1JSk7dHJhbnNmb3JtOnNjYWxlKDEpIHRyYW5zbGF0ZSgtNTAlLC01NSUpfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePXRvcF0gLnRpcHB5LWJhY2tkcm9wW2RhdGEtc3RhdGU9aGlkZGVuXXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSguMikgdHJhbnNsYXRlKC01MCUsLTQ1JSk7dHJhbnNmb3JtOnNjYWxlKC4yKSB0cmFuc2xhdGUoLTUwJSwtNDUlKTtvcGFjaXR5OjB9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49dG9wXSBbZGF0YS1hbmltYXRpb249c2hpZnQtdG93YXJkXVtkYXRhLXN0YXRlPXZpc2libGVdey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTEwcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0xMHB4KX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj10b3BdIFtkYXRhLWFuaW1hdGlvbj1zaGlmdC10b3dhcmRdW2RhdGEtc3RhdGU9aGlkZGVuXXtvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgtMjBweCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTIwcHgpfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePXRvcF0gW2RhdGEtYW5pbWF0aW9uPXBlcnNwZWN0aXZlXXstd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46Ym90dG9tO3RyYW5zZm9ybS1vcmlnaW46Ym90dG9tfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePXRvcF0gW2RhdGEtYW5pbWF0aW9uPXBlcnNwZWN0aXZlXVtkYXRhLXN0YXRlPXZpc2libGVdey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTEwcHgpIHJvdGF0ZVgoMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTEwcHgpIHJvdGF0ZVgoMCl9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49dG9wXSBbZGF0YS1hbmltYXRpb249cGVyc3BlY3RpdmVdW2RhdGEtc3RhdGU9aGlkZGVuXXtvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgwKSByb3RhdGVYKDYwZGVnKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKSByb3RhdGVYKDYwZGVnKX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj10b3BdIFtkYXRhLWFuaW1hdGlvbj1mYWRlXVtkYXRhLXN0YXRlPXZpc2libGVdey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTEwcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0xMHB4KX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj10b3BdIFtkYXRhLWFuaW1hdGlvbj1mYWRlXVtkYXRhLXN0YXRlPWhpZGRlbl17b3BhY2l0eTowOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTEwcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0xMHB4KX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj10b3BdIFtkYXRhLWFuaW1hdGlvbj1zaGlmdC1hd2F5XVtkYXRhLXN0YXRlPXZpc2libGVdey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTEwcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0xMHB4KX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj10b3BdIFtkYXRhLWFuaW1hdGlvbj1zaGlmdC1hd2F5XVtkYXRhLXN0YXRlPWhpZGRlbl17b3BhY2l0eTowOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCl9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49dG9wXSBbZGF0YS1hbmltYXRpb249c2NhbGVdW2RhdGEtc3RhdGU9dmlzaWJsZV17LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgtMTBweCkgc2NhbGUoMSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTEwcHgpIHNjYWxlKDEpfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePXRvcF0gW2RhdGEtYW5pbWF0aW9uPXNjYWxlXVtkYXRhLXN0YXRlPWhpZGRlbl17b3BhY2l0eTowOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCkgc2NhbGUoLjUpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApIHNjYWxlKC41KX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1ib3R0b21dIC50aXBweS1iYWNrZHJvcHtib3JkZXItcmFkaXVzOjAgMCAzMCUgMzAlfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePWJvdHRvbV0gLnRpcHB5LXJvdW5kYXJyb3d7dG9wOi04cHg7LXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOjUwJSAxMDAlO3RyYW5zZm9ybS1vcmlnaW46NTAlIDEwMCV9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49Ym90dG9tXSAudGlwcHktcm91bmRhcnJvdyBzdmd7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowOy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgwKTt0cmFuc2Zvcm06cm90YXRlKDApfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePWJvdHRvbV0gLnRpcHB5LWFycm93e2JvcmRlci1ib3R0b206OHB4IHNvbGlkICMzMzM7Ym9yZGVyLXJpZ2h0OjhweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItbGVmdDo4cHggc29saWQgdHJhbnNwYXJlbnQ7dG9wOi03cHg7bWFyZ2luOjAgNnB4Oy13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjo1MCUgMTAwJTt0cmFuc2Zvcm0tb3JpZ2luOjUwJSAxMDAlfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePWJvdHRvbV0gLnRpcHB5LWJhY2tkcm9wey13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjowIC01MCU7dHJhbnNmb3JtLW9yaWdpbjowIC01MCV9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49Ym90dG9tXSAudGlwcHktYmFja2Ryb3BbZGF0YS1zdGF0ZT12aXNpYmxlXXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKSB0cmFuc2xhdGUoLTUwJSwtNDUlKTt0cmFuc2Zvcm06c2NhbGUoMSkgdHJhbnNsYXRlKC01MCUsLTQ1JSl9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49Ym90dG9tXSAudGlwcHktYmFja2Ryb3BbZGF0YS1zdGF0ZT1oaWRkZW5dey13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKC4yKSB0cmFuc2xhdGUoLTUwJSk7dHJhbnNmb3JtOnNjYWxlKC4yKSB0cmFuc2xhdGUoLTUwJSk7b3BhY2l0eTowfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePWJvdHRvbV0gW2RhdGEtYW5pbWF0aW9uPXNoaWZ0LXRvd2FyZF1bZGF0YS1zdGF0ZT12aXNpYmxlXXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDEwcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDEwcHgpfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePWJvdHRvbV0gW2RhdGEtYW5pbWF0aW9uPXNoaWZ0LXRvd2FyZF1bZGF0YS1zdGF0ZT1oaWRkZW5de29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDIwcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDIwcHgpfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePWJvdHRvbV0gW2RhdGEtYW5pbWF0aW9uPXBlcnNwZWN0aXZlXXstd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46dG9wO3RyYW5zZm9ybS1vcmlnaW46dG9wfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePWJvdHRvbV0gW2RhdGEtYW5pbWF0aW9uPXBlcnNwZWN0aXZlXVtkYXRhLXN0YXRlPXZpc2libGVdey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTBweCkgcm90YXRlWCgwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxMHB4KSByb3RhdGVYKDApfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePWJvdHRvbV0gW2RhdGEtYW5pbWF0aW9uPXBlcnNwZWN0aXZlXVtkYXRhLXN0YXRlPWhpZGRlbl17b3BhY2l0eTowOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCkgcm90YXRlWCgtNjBkZWcpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApIHJvdGF0ZVgoLTYwZGVnKX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1ib3R0b21dIFtkYXRhLWFuaW1hdGlvbj1mYWRlXVtkYXRhLXN0YXRlPXZpc2libGVdey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTBweCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTBweCl9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49Ym90dG9tXSBbZGF0YS1hbmltYXRpb249ZmFkZV1bZGF0YS1zdGF0ZT1oaWRkZW5de29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDEwcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDEwcHgpfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePWJvdHRvbV0gW2RhdGEtYW5pbWF0aW9uPXNoaWZ0LWF3YXldW2RhdGEtc3RhdGU9dmlzaWJsZV17LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgxMHB4KTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxMHB4KX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1ib3R0b21dIFtkYXRhLWFuaW1hdGlvbj1zaGlmdC1hd2F5XVtkYXRhLXN0YXRlPWhpZGRlbl17b3BhY2l0eTowOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCl9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49Ym90dG9tXSBbZGF0YS1hbmltYXRpb249c2NhbGVdW2RhdGEtc3RhdGU9dmlzaWJsZV17LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgxMHB4KSBzY2FsZSgxKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxMHB4KSBzY2FsZSgxKX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1ib3R0b21dIFtkYXRhLWFuaW1hdGlvbj1zY2FsZV1bZGF0YS1zdGF0ZT1oaWRkZW5de29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDApIHNjYWxlKC41KTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKSBzY2FsZSguNSl9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49bGVmdF0gLnRpcHB5LWJhY2tkcm9we2JvcmRlci1yYWRpdXM6NTAlIDAgMCA1MCV9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49bGVmdF0gLnRpcHB5LXJvdW5kYXJyb3d7cmlnaHQ6LTE2cHg7LXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOjMzLjMzMzMzMzMzJSA1MCU7dHJhbnNmb3JtLW9yaWdpbjozMy4zMzMzMzMzMyUgNTAlfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePWxlZnRdIC50aXBweS1yb3VuZGFycm93IHN2Z3twb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDkwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDkwZGVnKX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1sZWZ0XSAudGlwcHktYXJyb3d7Ym9yZGVyLWxlZnQ6OHB4IHNvbGlkICMzMzM7Ym9yZGVyLXRvcDo4cHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLWJvdHRvbTo4cHggc29saWQgdHJhbnNwYXJlbnQ7cmlnaHQ6LTdweDttYXJnaW46M3B4IDA7LXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOjAgNTAlO3RyYW5zZm9ybS1vcmlnaW46MCA1MCV9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49bGVmdF0gLnRpcHB5LWJhY2tkcm9wey13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjo1MCUgMDt0cmFuc2Zvcm0tb3JpZ2luOjUwJSAwfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePWxlZnRdIC50aXBweS1iYWNrZHJvcFtkYXRhLXN0YXRlPXZpc2libGVdey13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpIHRyYW5zbGF0ZSgtNTAlLC01MCUpO3RyYW5zZm9ybTpzY2FsZSgxKSB0cmFuc2xhdGUoLTUwJSwtNTAlKX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1sZWZ0XSAudGlwcHktYmFja2Ryb3BbZGF0YS1zdGF0ZT1oaWRkZW5dey13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKC4yKSB0cmFuc2xhdGUoLTc1JSwtNTAlKTt0cmFuc2Zvcm06c2NhbGUoLjIpIHRyYW5zbGF0ZSgtNzUlLC01MCUpO29wYWNpdHk6MH0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1sZWZ0XSBbZGF0YS1hbmltYXRpb249c2hpZnQtdG93YXJkXVtkYXRhLXN0YXRlPXZpc2libGVdey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTEwcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0xMHB4KX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1sZWZ0XSBbZGF0YS1hbmltYXRpb249c2hpZnQtdG93YXJkXVtkYXRhLXN0YXRlPWhpZGRlbl17b3BhY2l0eTowOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTIwcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0yMHB4KX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1sZWZ0XSBbZGF0YS1hbmltYXRpb249cGVyc3BlY3RpdmVdey13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjpyaWdodDt0cmFuc2Zvcm0tb3JpZ2luOnJpZ2h0fS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePWxlZnRdIFtkYXRhLWFuaW1hdGlvbj1wZXJzcGVjdGl2ZV1bZGF0YS1zdGF0ZT12aXNpYmxlXXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKC0xMHB4KSByb3RhdGVZKDApO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0xMHB4KSByb3RhdGVZKDApfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePWxlZnRdIFtkYXRhLWFuaW1hdGlvbj1wZXJzcGVjdGl2ZV1bZGF0YS1zdGF0ZT1oaWRkZW5de29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKDApIHJvdGF0ZVkoLTYwZGVnKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgwKSByb3RhdGVZKC02MGRlZyl9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49bGVmdF0gW2RhdGEtYW5pbWF0aW9uPWZhZGVdW2RhdGEtc3RhdGU9dmlzaWJsZV17LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgtMTBweCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTEwcHgpfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePWxlZnRdIFtkYXRhLWFuaW1hdGlvbj1mYWRlXVtkYXRhLXN0YXRlPWhpZGRlbl17b3BhY2l0eTowOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTEwcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0xMHB4KX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1sZWZ0XSBbZGF0YS1hbmltYXRpb249c2hpZnQtYXdheV1bZGF0YS1zdGF0ZT12aXNpYmxlXXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKC0xMHB4KTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtMTBweCl9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49bGVmdF0gW2RhdGEtYW5pbWF0aW9uPXNoaWZ0LWF3YXldW2RhdGEtc3RhdGU9aGlkZGVuXXtvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgwKX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1sZWZ0XSBbZGF0YS1hbmltYXRpb249c2NhbGVdW2RhdGEtc3RhdGU9dmlzaWJsZV17LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgtMTBweCkgc2NhbGUoMSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTEwcHgpIHNjYWxlKDEpfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePWxlZnRdIFtkYXRhLWFuaW1hdGlvbj1zY2FsZV1bZGF0YS1zdGF0ZT1oaWRkZW5de29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKDApIHNjYWxlKC41KTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgwKSBzY2FsZSguNSl9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49cmlnaHRdIC50aXBweS1iYWNrZHJvcHtib3JkZXItcmFkaXVzOjAgNTAlIDUwJSAwfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePXJpZ2h0XSAudGlwcHktcm91bmRhcnJvd3tsZWZ0Oi0xNnB4Oy13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjo2Ni42NjY2NjY2NiUgNTAlO3RyYW5zZm9ybS1vcmlnaW46NjYuNjY2NjY2NjYlIDUwJX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1yaWdodF0gLnRpcHB5LXJvdW5kYXJyb3cgc3Zne3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTkwZGVnKTt0cmFuc2Zvcm06cm90YXRlKC05MGRlZyl9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49cmlnaHRdIC50aXBweS1hcnJvd3tib3JkZXItcmlnaHQ6OHB4IHNvbGlkICMzMzM7Ym9yZGVyLXRvcDo4cHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLWJvdHRvbTo4cHggc29saWQgdHJhbnNwYXJlbnQ7bGVmdDotN3B4O21hcmdpbjozcHggMDstd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46MTAwJSA1MCU7dHJhbnNmb3JtLW9yaWdpbjoxMDAlIDUwJX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1yaWdodF0gLnRpcHB5LWJhY2tkcm9wey13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjotNTAlIDA7dHJhbnNmb3JtLW9yaWdpbjotNTAlIDB9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49cmlnaHRdIC50aXBweS1iYWNrZHJvcFtkYXRhLXN0YXRlPXZpc2libGVdey13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpIHRyYW5zbGF0ZSgtNTAlLC01MCUpO3RyYW5zZm9ybTpzY2FsZSgxKSB0cmFuc2xhdGUoLTUwJSwtNTAlKX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1yaWdodF0gLnRpcHB5LWJhY2tkcm9wW2RhdGEtc3RhdGU9aGlkZGVuXXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSguMikgdHJhbnNsYXRlKC0yNSUsLTUwJSk7dHJhbnNmb3JtOnNjYWxlKC4yKSB0cmFuc2xhdGUoLTI1JSwtNTAlKTtvcGFjaXR5OjB9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49cmlnaHRdIFtkYXRhLWFuaW1hdGlvbj1zaGlmdC10b3dhcmRdW2RhdGEtc3RhdGU9dmlzaWJsZV17LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgxMHB4KTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgxMHB4KX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1yaWdodF0gW2RhdGEtYW5pbWF0aW9uPXNoaWZ0LXRvd2FyZF1bZGF0YS1zdGF0ZT1oaWRkZW5de29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKDIwcHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDIwcHgpfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePXJpZ2h0XSBbZGF0YS1hbmltYXRpb249cGVyc3BlY3RpdmVdey13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjpsZWZ0O3RyYW5zZm9ybS1vcmlnaW46bGVmdH0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1yaWdodF0gW2RhdGEtYW5pbWF0aW9uPXBlcnNwZWN0aXZlXVtkYXRhLXN0YXRlPXZpc2libGVdey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoMTBweCkgcm90YXRlWSgwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgxMHB4KSByb3RhdGVZKDApfS50aXBweS1wb3BwZXJbeC1wbGFjZW1lbnRePXJpZ2h0XSBbZGF0YS1hbmltYXRpb249cGVyc3BlY3RpdmVdW2RhdGEtc3RhdGU9aGlkZGVuXXtvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgwKSByb3RhdGVZKDYwZGVnKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgwKSByb3RhdGVZKDYwZGVnKX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1yaWdodF0gW2RhdGEtYW5pbWF0aW9uPWZhZGVdW2RhdGEtc3RhdGU9dmlzaWJsZV17LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgxMHB4KTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgxMHB4KX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1yaWdodF0gW2RhdGEtYW5pbWF0aW9uPWZhZGVdW2RhdGEtc3RhdGU9aGlkZGVuXXtvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgxMHB4KTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgxMHB4KX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1yaWdodF0gW2RhdGEtYW5pbWF0aW9uPXNoaWZ0LWF3YXldW2RhdGEtc3RhdGU9dmlzaWJsZV17LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgxMHB4KTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgxMHB4KX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1yaWdodF0gW2RhdGEtYW5pbWF0aW9uPXNoaWZ0LWF3YXldW2RhdGEtc3RhdGU9aGlkZGVuXXtvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgwKX0udGlwcHktcG9wcGVyW3gtcGxhY2VtZW50Xj1yaWdodF0gW2RhdGEtYW5pbWF0aW9uPXNjYWxlXVtkYXRhLXN0YXRlPXZpc2libGVdey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoMTBweCkgc2NhbGUoMSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMTBweCkgc2NhbGUoMSl9LnRpcHB5LXBvcHBlclt4LXBsYWNlbWVudF49cmlnaHRdIFtkYXRhLWFuaW1hdGlvbj1zY2FsZV1bZGF0YS1zdGF0ZT1oaWRkZW5de29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKDApIHNjYWxlKC41KTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgwKSBzY2FsZSguNSl9LnRpcHB5LXRvb2x0aXB7cG9zaXRpb246cmVsYXRpdmU7Y29sb3I6I2ZmZjtib3JkZXItcmFkaXVzOjRweDtmb250LXNpemU6LjlyZW07cGFkZGluZzouM3JlbSAuNnJlbTttYXgtd2lkdGg6MzUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7d2lsbC1jaGFuZ2U6dHJhbnNmb3JtOy13ZWJraXQtZm9udC1zbW9vdGhpbmc6YW50aWFsaWFzZWQ7LW1vei1vc3gtZm9udC1zbW9vdGhpbmc6Z3JheXNjYWxlO2JhY2tncm91bmQtY29sb3I6IzMzM30udGlwcHktdG9vbHRpcFtkYXRhLXNpemU9c21hbGxde3BhZGRpbmc6LjJyZW0gLjRyZW07Zm9udC1zaXplOi43NXJlbX0udGlwcHktdG9vbHRpcFtkYXRhLXNpemU9bGFyZ2Vde3BhZGRpbmc6LjRyZW0gLjhyZW07Zm9udC1zaXplOjFyZW19LnRpcHB5LXRvb2x0aXBbZGF0YS1hbmltYXRlZmlsbF17b3ZlcmZsb3c6aGlkZGVuO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnR9LnRpcHB5LXRvb2x0aXBbZGF0YS1pbnRlcmFjdGl2ZV0sLnRpcHB5LXRvb2x0aXBbZGF0YS1pbnRlcmFjdGl2ZV0gcGF0aHtwb2ludGVyLWV2ZW50czphdXRvfS50aXBweS10b29sdGlwW2RhdGEtaW5lcnRpYV1bZGF0YS1zdGF0ZT12aXNpYmxlXXt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoLjU0LDEuNSwuMzgsMS4xMSl9LnRpcHB5LXRvb2x0aXBbZGF0YS1pbmVydGlhXVtkYXRhLXN0YXRlPWhpZGRlbl17dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZX0udGlwcHktYXJyb3csLnRpcHB5LXJvdW5kYXJyb3d7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MDtoZWlnaHQ6MH0udGlwcHktcm91bmRhcnJvd3t3aWR0aDoyNHB4O2hlaWdodDo4cHg7ZmlsbDojMzMzO3BvaW50ZXItZXZlbnRzOm5vbmV9LnRpcHB5LWJhY2tkcm9we3Bvc2l0aW9uOmFic29sdXRlO3dpbGwtY2hhbmdlOnRyYW5zZm9ybTtiYWNrZ3JvdW5kLWNvbG9yOiMzMzM7Ym9yZGVyLXJhZGl1czo1MCU7d2lkdGg6Y2FsYygxMTAlICsgMnJlbSk7bGVmdDo1MCU7dG9wOjUwJTt6LWluZGV4Oi0xO3RyYW5zaXRpb246YWxsIGN1YmljLWJlemllciguNDYsLjEsLjUyLC45OCk7LXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OmhpZGRlbjtiYWNrZmFjZS12aXNpYmlsaXR5OmhpZGRlbn0udGlwcHktYmFja2Ryb3A6YWZ0ZXJ7Y29udGVudDpcIlwiO2Zsb2F0OmxlZnQ7cGFkZGluZy10b3A6MTAwJX0udGlwcHktYmFja2Ryb3ArLnRpcHB5LWNvbnRlbnR7dHJhbnNpdGlvbi1wcm9wZXJ0eTpvcGFjaXR5O3dpbGwtY2hhbmdlOm9wYWNpdHl9LnRpcHB5LWJhY2tkcm9wKy50aXBweS1jb250ZW50W2RhdGEtc3RhdGU9dmlzaWJsZV17b3BhY2l0eToxfS50aXBweS1iYWNrZHJvcCsudGlwcHktY29udGVudFtkYXRhLXN0YXRlPWhpZGRlbl17b3BhY2l0eTowfScsZXQ9JzMuNC4xJyx0dD0ndW5kZWZpbmVkJyE9dHlwZW9mIHdpbmRvdyxydD10dD9uYXZpZ2F0b3I6e30sYXQ9dHQ/d2luZG93Ont9LHB0PSgnTXV0YXRpb25PYnNlcnZlcidpbiBhdCksb3Q9L01TSUUgfFRyaWRlbnRcXC8vLnRlc3QocnQudXNlckFnZW50KSxpdD0vaVBob25lfGlQYWR8aVBvZC8udGVzdChydC5wbGF0Zm9ybSkmJiFhdC5NU1N0cmVhbSxudD0oJ29udG91Y2hzdGFydCdpbiBhdCksc3Q9e2ExMXk6ITAsYWxsb3dIVE1MOiEwLGFuaW1hdGVGaWxsOiEwLGFuaW1hdGlvbjonc2hpZnQtYXdheScsYXBwZW5kVG86ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuYm9keX0sYXJpYTonZGVzY3JpYmVkYnknLGFycm93OiExLGFycm93VHJhbnNmb3JtOicnLGFycm93VHlwZTonc2hhcnAnLGF1dG9Gb2N1czohMCxib3VuZGFyeTonc2Nyb2xsUGFyZW50Jyxjb250ZW50OicnLGRlbGF5OlswLDIwXSxkaXN0YW5jZToxMCxkdXJhdGlvbjpbMzI1LDI3NV0sZmxpcDohMCxmbGlwQmVoYXZpb3I6J2ZsaXAnLGZvbGxvd0N1cnNvcjohMSxoaWRlT25DbGljazohMCxpbmVydGlhOiExLGludGVyYWN0aXZlOiExLGludGVyYWN0aXZlQm9yZGVyOjIsaW50ZXJhY3RpdmVEZWJvdW5jZTowLGxhenk6ITAsbGl2ZVBsYWNlbWVudDohMCxtYXhXaWR0aDonJyxtdWx0aXBsZTohMSxvZmZzZXQ6MCxvbkhpZGRlbjpmdW5jdGlvbigpe30sb25IaWRlOmZ1bmN0aW9uKCl7fSxvbk1vdW50OmZ1bmN0aW9uKCl7fSxvblNob3c6ZnVuY3Rpb24oKXt9LG9uU2hvd246ZnVuY3Rpb24oKXt9LHBlcmZvcm1hbmNlOiExLHBsYWNlbWVudDondG9wJyxwb3BwZXJPcHRpb25zOnt9LHNob3VsZFBvcHBlckhpZGVPbkJsdXI6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sc2hvd09uSW5pdDohMSxzaXplOidyZWd1bGFyJyxzdGlja3k6ITEsdGFyZ2V0OicnLHRoZW1lOidkYXJrJyx0b3VjaDohMCx0b3VjaEhvbGQ6ITEsdHJpZ2dlcjonbW91c2VlbnRlciBmb2N1cycsdXBkYXRlRHVyYXRpb246MjAwLHdhaXQ6bnVsbCx6SW5kZXg6OTk5OX0sbHQ9WydhcnJvdycsJ2Fycm93VHlwZScsJ2Rpc3RhbmNlJywnZmxpcCcsJ2ZsaXBCZWhhdmlvcicsJ29mZnNldCcsJ3BsYWNlbWVudCcsJ3BvcHBlck9wdGlvbnMnXSxkdD0ndW5kZWZpbmVkJyE9dHlwZW9mIHdpbmRvdyYmJ3VuZGVmaW5lZCchPXR5cGVvZiBkb2N1bWVudCxjdD1bJ0VkZ2UnLCdUcmlkZW50JywnRmlyZWZveCddLG10PTAsZnQ9MDtmdDxjdC5sZW5ndGg7ZnQrPTEpaWYoZHQmJjA8PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihjdFtmdF0pKXttdD0xO2JyZWFrfXZhciBpPWR0JiZ3aW5kb3cuUHJvbWlzZSxodD1pP2Z1bmN0aW9uKGUpe3ZhciB0PSExO3JldHVybiBmdW5jdGlvbigpe3R8fCh0PSEwLHdpbmRvdy5Qcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7dD0hMSxlKCl9KSl9fTpmdW5jdGlvbihlKXt2YXIgdD0hMTtyZXR1cm4gZnVuY3Rpb24oKXt0fHwodD0hMCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dD0hMSxlKCl9LG10KSl9fSxidD1kdCYmISEod2luZG93Lk1TSW5wdXRNZXRob2RDb250ZXh0JiZkb2N1bWVudC5kb2N1bWVudE1vZGUpLHl0PWR0JiYvTVNJRSAxMC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSx1dD1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpfSxndD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHIsYT0wO2E8dC5sZW5ndGg7YSsrKXI9dFthXSxyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwndmFsdWUnaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfXJldHVybiBmdW5jdGlvbih0LHIsYSl7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksYSYmZSh0LGEpLHR9fSgpLHh0PWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdCBpbiBlP09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3ZhbHVlOnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTplW3RdPXIsZX0sd3Q9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKWZvcih2YXIgYSBpbiB0PWFyZ3VtZW50c1tyXSx0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGEpJiYoZVthXT10W2FdKTtyZXR1cm4gZX0sdnQ9ZHQmJi9GaXJlZm94L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxrdD1bJ2F1dG8tc3RhcnQnLCdhdXRvJywnYXV0by1lbmQnLCd0b3Atc3RhcnQnLCd0b3AnLCd0b3AtZW5kJywncmlnaHQtc3RhcnQnLCdyaWdodCcsJ3JpZ2h0LWVuZCcsJ2JvdHRvbS1lbmQnLCdib3R0b20nLCdib3R0b20tc3RhcnQnLCdsZWZ0LWVuZCcsJ2xlZnQnLCdsZWZ0LXN0YXJ0J10sRXQ9a3Quc2xpY2UoMyksQ3Q9e0ZMSVA6J2ZsaXAnLENMT0NLV0lTRTonY2xvY2t3aXNlJyxDT1VOVEVSQ0xPQ0tXSVNFOidjb3VudGVyY2xvY2t3aXNlJ30sTHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHIsYSl7dmFyIHA9dGhpcyxvPTI8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fTt1dCh0aGlzLHQpLHRoaXMuc2NoZWR1bGVVcGRhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHAudXBkYXRlKX0sdGhpcy51cGRhdGU9aHQodGhpcy51cGRhdGUuYmluZCh0aGlzKSksdGhpcy5vcHRpb25zPXd0KHt9LHQuRGVmYXVsdHMsbyksdGhpcy5zdGF0ZT17aXNEZXN0cm95ZWQ6ITEsaXNDcmVhdGVkOiExLHNjcm9sbFBhcmVudHM6W119LHRoaXMucmVmZXJlbmNlPXImJnIuanF1ZXJ5P3JbMF06cix0aGlzLnBvcHBlcj1hJiZhLmpxdWVyeT9hWzBdOmEsdGhpcy5vcHRpb25zLm1vZGlmaWVycz17fSxPYmplY3Qua2V5cyh3dCh7fSx0LkRlZmF1bHRzLm1vZGlmaWVycyxvLm1vZGlmaWVycykpLmZvckVhY2goZnVuY3Rpb24oZSl7cC5vcHRpb25zLm1vZGlmaWVyc1tlXT13dCh7fSx0LkRlZmF1bHRzLm1vZGlmaWVyc1tlXXx8e30sby5tb2RpZmllcnM/by5tb2RpZmllcnNbZV06e30pfSksdGhpcy5tb2RpZmllcnM9T2JqZWN0LmtleXModGhpcy5vcHRpb25zLm1vZGlmaWVycykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB3dCh7bmFtZTplfSxwLm9wdGlvbnMubW9kaWZpZXJzW2VdKX0pLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5vcmRlci10Lm9yZGVyfSksdGhpcy5tb2RpZmllcnMuZm9yRWFjaChmdW5jdGlvbih0KXt0LmVuYWJsZWQmJmUodC5vbkxvYWQpJiZ0Lm9uTG9hZChwLnJlZmVyZW5jZSxwLnBvcHBlcixwLm9wdGlvbnMsdCxwLnN0YXRlKX0pLHRoaXMudXBkYXRlKCk7dmFyIGk9dGhpcy5vcHRpb25zLmV2ZW50c0VuYWJsZWQ7aSYmdGhpcy5lbmFibGVFdmVudExpc3RlbmVycygpLHRoaXMuc3RhdGUuZXZlbnRzRW5hYmxlZD1pfXJldHVybiBndCh0LFt7a2V5Oid1cGRhdGUnLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIFAuY2FsbCh0aGlzKX19LHtrZXk6J2Rlc3Ryb3knLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIEkuY2FsbCh0aGlzKX19LHtrZXk6J2VuYWJsZUV2ZW50TGlzdGVuZXJzJyx2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBNLmNhbGwodGhpcyl9fSx7a2V5OidkaXNhYmxlRXZlbnRMaXN0ZW5lcnMnLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIFIuY2FsbCh0aGlzKX19XSksdH0oKTtMdC5VdGlscz0oJ3VuZGVmaW5lZCc9PXR5cGVvZiB3aW5kb3c/Z2xvYmFsOndpbmRvdykuUG9wcGVyVXRpbHMsTHQucGxhY2VtZW50cz1rdCxMdC5EZWZhdWx0cz17cGxhY2VtZW50Oidib3R0b20nLHBvc2l0aW9uRml4ZWQ6ITEsZXZlbnRzRW5hYmxlZDohMCxyZW1vdmVPbkRlc3Ryb3k6ITEsb25DcmVhdGU6ZnVuY3Rpb24oKXt9LG9uVXBkYXRlOmZ1bmN0aW9uKCl7fSxtb2RpZmllcnM6e3NoaWZ0OntvcmRlcjoxMDAsZW5hYmxlZDohMCxmbjpmdW5jdGlvbihlKXt2YXIgdD1lLnBsYWNlbWVudCxyPXQuc3BsaXQoJy0nKVswXSxhPXQuc3BsaXQoJy0nKVsxXTtpZihhKXt2YXIgcD1lLm9mZnNldHMsbz1wLnJlZmVyZW5jZSxpPXAucG9wcGVyLG49LTEhPT1bJ2JvdHRvbScsJ3RvcCddLmluZGV4T2Yocikscz1uPydsZWZ0JzondG9wJyxsPW4/J3dpZHRoJzonaGVpZ2h0JyxkPXtzdGFydDp4dCh7fSxzLG9bc10pLGVuZDp4dCh7fSxzLG9bc10rb1tsXS1pW2xdKX07ZS5vZmZzZXRzLnBvcHBlcj13dCh7fSxpLGRbYV0pfXJldHVybiBlfX0sb2Zmc2V0OntvcmRlcjoyMDAsZW5hYmxlZDohMCxmbjpKLG9mZnNldDowfSxwcmV2ZW50T3ZlcmZsb3c6e29yZGVyOjMwMCxlbmFibGVkOiEwLGZuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5ib3VuZGFyaWVzRWxlbWVudHx8byhlLmluc3RhbmNlLnBvcHBlcik7ZS5pbnN0YW5jZS5yZWZlcmVuY2U9PT1yJiYocj1vKHIpKTt2YXIgYT1YKCd0cmFuc2Zvcm0nKSxwPWUuaW5zdGFuY2UucG9wcGVyLnN0eWxlLGk9cC50b3Asbj1wLmxlZnQscz1wW2FdO3AudG9wPScnLHAubGVmdD0nJyxwW2FdPScnO3ZhciBsPXYoZS5pbnN0YW5jZS5wb3BwZXIsZS5pbnN0YW5jZS5yZWZlcmVuY2UsdC5wYWRkaW5nLHIsZS5wb3NpdGlvbkZpeGVkKTtwLnRvcD1pLHAubGVmdD1uLHBbYV09cyx0LmJvdW5kYXJpZXM9bDt2YXIgZD10LnByaW9yaXR5LGM9ZS5vZmZzZXRzLnBvcHBlcixtPXtwcmltYXJ5OmZ1bmN0aW9uKGUpe3ZhciByPWNbZV07cmV0dXJuIGNbZV08bFtlXSYmIXQuZXNjYXBlV2l0aFJlZmVyZW5jZSYmKHI9WmUoY1tlXSxsW2VdKSkseHQoe30sZSxyKX0sc2Vjb25kYXJ5OmZ1bmN0aW9uKGUpe3ZhciByPSdyaWdodCc9PT1lPydsZWZ0JzondG9wJyxhPWNbcl07cmV0dXJuIGNbZV0+bFtlXSYmIXQuZXNjYXBlV2l0aFJlZmVyZW5jZSYmKGE9R2UoY1tyXSxsW2VdLSgncmlnaHQnPT09ZT9jLndpZHRoOmMuaGVpZ2h0KSkpLHh0KHt9LHIsYSl9fTtyZXR1cm4gZC5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PS0xPT09WydsZWZ0JywndG9wJ10uaW5kZXhPZihlKT8nc2Vjb25kYXJ5JzoncHJpbWFyeSc7Yz13dCh7fSxjLG1bdF0oZSkpfSksZS5vZmZzZXRzLnBvcHBlcj1jLGV9LHByaW9yaXR5OlsnbGVmdCcsJ3JpZ2h0JywndG9wJywnYm90dG9tJ10scGFkZGluZzo1LGJvdW5kYXJpZXNFbGVtZW50OidzY3JvbGxQYXJlbnQnfSxrZWVwVG9nZXRoZXI6e29yZGVyOjQwMCxlbmFibGVkOiEwLGZuOmZ1bmN0aW9uKGUpe3ZhciB0PWUub2Zmc2V0cyxyPXQucG9wcGVyLGE9dC5yZWZlcmVuY2UscD1lLnBsYWNlbWVudC5zcGxpdCgnLScpWzBdLG89SmUsaT0tMSE9PVsndG9wJywnYm90dG9tJ10uaW5kZXhPZihwKSxuPWk/J3JpZ2h0JzonYm90dG9tJyxzPWk/J2xlZnQnOid0b3AnLGw9aT8nd2lkdGgnOidoZWlnaHQnO3JldHVybiByW25dPG8oYVtzXSkmJihlLm9mZnNldHMucG9wcGVyW3NdPW8oYVtzXSktcltsXSkscltzXT5vKGFbbl0pJiYoZS5vZmZzZXRzLnBvcHBlcltzXT1vKGFbbl0pKSxlfX0sYXJyb3c6e29yZGVyOjUwMCxlbmFibGVkOiEwLGZuOmZ1bmN0aW9uKGUscil7dmFyIGE7aWYoIVYoZS5pbnN0YW5jZS5tb2RpZmllcnMsJ2Fycm93Jywna2VlcFRvZ2V0aGVyJykpcmV0dXJuIGU7dmFyIHA9ci5lbGVtZW50O2lmKCdzdHJpbmcnPT10eXBlb2YgcCl7aWYocD1lLmluc3RhbmNlLnBvcHBlci5xdWVyeVNlbGVjdG9yKHApLCFwKXJldHVybiBlO31lbHNlIGlmKCFlLmluc3RhbmNlLnBvcHBlci5jb250YWlucyhwKSlyZXR1cm4gY29uc29sZS53YXJuKCdXQVJOSU5HOiBgYXJyb3cuZWxlbWVudGAgbXVzdCBiZSBjaGlsZCBvZiBpdHMgcG9wcGVyIGVsZW1lbnQhJyksZTt2YXIgbz1lLnBsYWNlbWVudC5zcGxpdCgnLScpWzBdLGk9ZS5vZmZzZXRzLG49aS5wb3BwZXIscz1pLnJlZmVyZW5jZSxsPS0xIT09WydsZWZ0JywncmlnaHQnXS5pbmRleE9mKG8pLGQ9bD8naGVpZ2h0Jzond2lkdGgnLGM9bD8nVG9wJzonTGVmdCcsbT1jLnRvTG93ZXJDYXNlKCksZj1sPydsZWZ0JzondG9wJyxoPWw/J2JvdHRvbSc6J3JpZ2h0Jyx5PUwocClbZF07c1toXS15PG5bbV0mJihlLm9mZnNldHMucG9wcGVyW21dLT1uW21dLShzW2hdLXkpKSxzW21dK3k+bltoXSYmKGUub2Zmc2V0cy5wb3BwZXJbbV0rPXNbbV0reS1uW2hdKSxlLm9mZnNldHMucG9wcGVyPWIoZS5vZmZzZXRzLnBvcHBlcik7dmFyIHU9c1ttXStzW2RdLzIteS8yLGc9dChlLmluc3RhbmNlLnBvcHBlcikseD1wYXJzZUZsb2F0KGdbJ21hcmdpbicrY10sMTApLHc9cGFyc2VGbG9hdChnWydib3JkZXInK2MrJ1dpZHRoJ10sMTApLHY9dS1lLm9mZnNldHMucG9wcGVyW21dLXgtdztyZXR1cm4gdj1aZShHZShuW2RdLXksdiksMCksZS5hcnJvd0VsZW1lbnQ9cCxlLm9mZnNldHMuYXJyb3c9KGE9e30seHQoYSxtLFFlKHYpKSx4dChhLGYsJycpLGEpLGV9LGVsZW1lbnQ6J1t4LWFycm93XSd9LGZsaXA6e29yZGVyOjYwMCxlbmFibGVkOiEwLGZuOmZ1bmN0aW9uKGUsdCl7aWYoRChlLmluc3RhbmNlLm1vZGlmaWVycywnaW5uZXInKSlyZXR1cm4gZTtpZihlLmZsaXBwZWQmJmUucGxhY2VtZW50PT09ZS5vcmlnaW5hbFBsYWNlbWVudClyZXR1cm4gZTt2YXIgcj12KGUuaW5zdGFuY2UucG9wcGVyLGUuaW5zdGFuY2UucmVmZXJlbmNlLHQucGFkZGluZyx0LmJvdW5kYXJpZXNFbGVtZW50LGUucG9zaXRpb25GaXhlZCksYT1lLnBsYWNlbWVudC5zcGxpdCgnLScpWzBdLHA9TyhhKSxvPWUucGxhY2VtZW50LnNwbGl0KCctJylbMV18fCcnLGk9W107c3dpdGNoKHQuYmVoYXZpb3Ipe2Nhc2UgQ3QuRkxJUDppPVthLHBdO2JyZWFrO2Nhc2UgQ3QuQ0xPQ0tXSVNFOmk9aihhKTticmVhaztjYXNlIEN0LkNPVU5URVJDTE9DS1dJU0U6aT1qKGEsITApO2JyZWFrO2RlZmF1bHQ6aT10LmJlaGF2aW9yO31yZXR1cm4gaS5mb3JFYWNoKGZ1bmN0aW9uKG4scyl7aWYoYSE9PW58fGkubGVuZ3RoPT09cysxKXJldHVybiBlO2E9ZS5wbGFjZW1lbnQuc3BsaXQoJy0nKVswXSxwPU8oYSk7dmFyIGw9ZS5vZmZzZXRzLnBvcHBlcixkPWUub2Zmc2V0cy5yZWZlcmVuY2UsYz1KZSxtPSdsZWZ0Jz09PWEmJmMobC5yaWdodCk+YyhkLmxlZnQpfHwncmlnaHQnPT09YSYmYyhsLmxlZnQpPGMoZC5yaWdodCl8fCd0b3AnPT09YSYmYyhsLmJvdHRvbSk+YyhkLnRvcCl8fCdib3R0b20nPT09YSYmYyhsLnRvcCk8YyhkLmJvdHRvbSksZj1jKGwubGVmdCk8YyhyLmxlZnQpLGg9YyhsLnJpZ2h0KT5jKHIucmlnaHQpLGI9YyhsLnRvcCk8YyhyLnRvcCkseT1jKGwuYm90dG9tKT5jKHIuYm90dG9tKSx1PSdsZWZ0Jz09PWEmJmZ8fCdyaWdodCc9PT1hJiZofHwndG9wJz09PWEmJmJ8fCdib3R0b20nPT09YSYmeSxnPS0xIT09Wyd0b3AnLCdib3R0b20nXS5pbmRleE9mKGEpLHg9ISF0LmZsaXBWYXJpYXRpb25zJiYoZyYmJ3N0YXJ0Jz09PW8mJmZ8fGcmJidlbmQnPT09byYmaHx8IWcmJidzdGFydCc9PT1vJiZifHwhZyYmJ2VuZCc9PT1vJiZ5KTsobXx8dXx8eCkmJihlLmZsaXBwZWQ9ITAsKG18fHUpJiYoYT1pW3MrMV0pLHgmJihvPXEobykpLGUucGxhY2VtZW50PWErKG8/Jy0nK286JycpLGUub2Zmc2V0cy5wb3BwZXI9d3Qoe30sZS5vZmZzZXRzLnBvcHBlcixUKGUuaW5zdGFuY2UucG9wcGVyLGUub2Zmc2V0cy5yZWZlcmVuY2UsZS5wbGFjZW1lbnQpKSxlPVkoZS5pbnN0YW5jZS5tb2RpZmllcnMsZSwnZmxpcCcpKX0pLGV9LGJlaGF2aW9yOidmbGlwJyxwYWRkaW5nOjUsYm91bmRhcmllc0VsZW1lbnQ6J3ZpZXdwb3J0J30saW5uZXI6e29yZGVyOjcwMCxlbmFibGVkOiExLGZuOmZ1bmN0aW9uKGUpe3ZhciB0PWUucGxhY2VtZW50LHI9dC5zcGxpdCgnLScpWzBdLGE9ZS5vZmZzZXRzLHA9YS5wb3BwZXIsbz1hLnJlZmVyZW5jZSxpPS0xIT09WydsZWZ0JywncmlnaHQnXS5pbmRleE9mKHIpLG49LTE9PT1bJ3RvcCcsJ2xlZnQnXS5pbmRleE9mKHIpO3JldHVybiBwW2k/J2xlZnQnOid0b3AnXT1vW3JdLShuP3BbaT8nd2lkdGgnOidoZWlnaHQnXTowKSxlLnBsYWNlbWVudD1PKHQpLGUub2Zmc2V0cy5wb3BwZXI9YihwKSxlfX0saGlkZTp7b3JkZXI6ODAwLGVuYWJsZWQ6ITAsZm46ZnVuY3Rpb24oZSl7aWYoIVYoZS5pbnN0YW5jZS5tb2RpZmllcnMsJ2hpZGUnLCdwcmV2ZW50T3ZlcmZsb3cnKSlyZXR1cm4gZTt2YXIgdD1lLm9mZnNldHMucmVmZXJlbmNlLHI9UyhlLmluc3RhbmNlLm1vZGlmaWVycyxmdW5jdGlvbihlKXtyZXR1cm4ncHJldmVudE92ZXJmbG93Jz09PWUubmFtZX0pLmJvdW5kYXJpZXM7aWYodC5ib3R0b208ci50b3B8fHQubGVmdD5yLnJpZ2h0fHx0LnRvcD5yLmJvdHRvbXx8dC5yaWdodDxyLmxlZnQpe2lmKCEwPT09ZS5oaWRlKXJldHVybiBlO2UuaGlkZT0hMCxlLmF0dHJpYnV0ZXNbJ3gtb3V0LW9mLWJvdW5kYXJpZXMnXT0nJ31lbHNle2lmKCExPT09ZS5oaWRlKXJldHVybiBlO2UuaGlkZT0hMSxlLmF0dHJpYnV0ZXNbJ3gtb3V0LW9mLWJvdW5kYXJpZXMnXT0hMX1yZXR1cm4gZX19LGNvbXB1dGVTdHlsZTp7b3JkZXI6ODUwLGVuYWJsZWQ6ITAsZm46ZnVuY3Rpb24oZSx0KXt2YXIgcj10LngsYT10LnkscD1lLm9mZnNldHMucG9wcGVyLGk9UyhlLmluc3RhbmNlLm1vZGlmaWVycyxmdW5jdGlvbihlKXtyZXR1cm4nYXBwbHlTdHlsZSc9PT1lLm5hbWV9KS5ncHVBY2NlbGVyYXRpb247dm9pZCAwIT09aSYmY29uc29sZS53YXJuKCdXQVJOSU5HOiBgZ3B1QWNjZWxlcmF0aW9uYCBvcHRpb24gbW92ZWQgdG8gYGNvbXB1dGVTdHlsZWAgbW9kaWZpZXIgYW5kIHdpbGwgbm90IGJlIHN1cHBvcnRlZCBpbiBmdXR1cmUgdmVyc2lvbnMgb2YgUG9wcGVyLmpzIScpO3ZhciBuPXZvaWQgMD09PWk/dC5ncHVBY2NlbGVyYXRpb246aSxzPW8oZS5pbnN0YW5jZS5wb3BwZXIpLGw9dShzKSxkPXtwb3NpdGlvbjpwLnBvc2l0aW9ufSxjPVUoZSwyPndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfHwhdnQpLG09J2JvdHRvbSc9PT1yPyd0b3AnOidib3R0b20nLGY9J3JpZ2h0Jz09PWE/J2xlZnQnOidyaWdodCcsaD1YKCd0cmFuc2Zvcm0nKSxiPXZvaWQgMCx5PXZvaWQgMDtpZih5PSdib3R0b20nPT1tPydIVE1MJz09PXMubm9kZU5hbWU/LXMuY2xpZW50SGVpZ2h0K2MuYm90dG9tOi1sLmhlaWdodCtjLmJvdHRvbTpjLnRvcCxiPSdyaWdodCc9PWY/J0hUTUwnPT09cy5ub2RlTmFtZT8tcy5jbGllbnRXaWR0aCtjLnJpZ2h0Oi1sLndpZHRoK2MucmlnaHQ6Yy5sZWZ0LG4mJmgpZFtoXT0ndHJhbnNsYXRlM2QoJytiKydweCwgJyt5KydweCwgMCknLGRbbV09MCxkW2ZdPTAsZC53aWxsQ2hhbmdlPSd0cmFuc2Zvcm0nO2Vsc2V7dmFyIGc9J2JvdHRvbSc9PW0/LTE6MSx4PSdyaWdodCc9PWY/LTE6MTtkW21dPXkqZyxkW2ZdPWIqeCxkLndpbGxDaGFuZ2U9bSsnLCAnK2Z9dmFyIHc9e1wieC1wbGFjZW1lbnRcIjplLnBsYWNlbWVudH07cmV0dXJuIGUuYXR0cmlidXRlcz13dCh7fSx3LGUuYXR0cmlidXRlcyksZS5zdHlsZXM9d3Qoe30sZCxlLnN0eWxlcyksZS5hcnJvd1N0eWxlcz13dCh7fSxlLm9mZnNldHMuYXJyb3csZS5hcnJvd1N0eWxlcyksZX0sZ3B1QWNjZWxlcmF0aW9uOiEwLHg6J2JvdHRvbScseToncmlnaHQnfSxhcHBseVN0eWxlOntvcmRlcjo5MDAsZW5hYmxlZDohMCxmbjpmdW5jdGlvbihlKXtyZXR1cm4gRihlLmluc3RhbmNlLnBvcHBlcixlLnN0eWxlcyksXyhlLmluc3RhbmNlLnBvcHBlcixlLmF0dHJpYnV0ZXMpLGUuYXJyb3dFbGVtZW50JiZPYmplY3Qua2V5cyhlLmFycm93U3R5bGVzKS5sZW5ndGgmJkYoZS5hcnJvd0VsZW1lbnQsZS5hcnJvd1N0eWxlcyksZX0sb25Mb2FkOmZ1bmN0aW9uKGUsdCxyLGEscCl7dmFyIG89QyhwLHQsZSxyLnBvc2l0aW9uRml4ZWQpLGk9RShyLnBsYWNlbWVudCxvLHQsZSxyLm1vZGlmaWVycy5mbGlwLmJvdW5kYXJpZXNFbGVtZW50LHIubW9kaWZpZXJzLmZsaXAucGFkZGluZyk7cmV0dXJuIHQuc2V0QXR0cmlidXRlKCd4LXBsYWNlbWVudCcsaSksRih0LHtwb3NpdGlvbjpyLnBvc2l0aW9uRml4ZWQ/J2ZpeGVkJzonYWJzb2x1dGUnfSkscn0sZ3B1QWNjZWxlcmF0aW9uOnZvaWQgMH19fTt2YXIgT3Q9e1BPUFBFUjonLnRpcHB5LXBvcHBlcicsVE9PTFRJUDonLnRpcHB5LXRvb2x0aXAnLENPTlRFTlQ6Jy50aXBweS1jb250ZW50JyxCQUNLRFJPUDonLnRpcHB5LWJhY2tkcm9wJyxBUlJPVzonLnRpcHB5LWFycm93JyxST1VORF9BUlJPVzonLnRpcHB5LXJvdW5kYXJyb3cnfSxUdD10dD9FbGVtZW50LnByb3RvdHlwZTp7fSxTdD1UdC5tYXRjaGVzfHxUdC5tYXRjaGVzU2VsZWN0b3J8fFR0LndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8VHQubW96TWF0Y2hlc1NlbGVjdG9yfHxUdC5tc01hdGNoZXNTZWxlY3RvcixBdD17cGFzc2l2ZTohMH0sWXQ9e3g6ITB9LFB0PSExLER0PTAsWHQ9T2JqZWN0LmtleXMoc3QpLEl0PU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKylmb3IodmFyIGEgaW4gdD1hcmd1bWVudHNbcl0sdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxhKSYmKGVbYV09dFthXSk7cmV0dXJuIGV9LE50PXt0cmFuc2xhdGU6L3RyYW5zbGF0ZVg/WT9cXCgoW14pXSspXFwpLyxzY2FsZTovc2NhbGVYP1k/XFwoKFteKV0rKVxcKS99LEh0PTEsV3Q9ITE7S2UudmVyc2lvbj1ldCxLZS5kZWZhdWx0cz1zdCxLZS5vbmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gS2UoZSx0LCEwKS5pbnN0YW5jZXNbMF19LEtlLnNldERlZmF1bHRzPWZ1bmN0aW9uKGUpe09iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24odCl7c3RbdF09ZVt0XX0pfSxLZS5kaXNhYmxlQW5pbWF0aW9ucz1mdW5jdGlvbigpe0tlLnNldERlZmF1bHRzKHtkdXJhdGlvbjowLHVwZGF0ZUR1cmF0aW9uOjAsYW5pbWF0ZUZpbGw6ITF9KX0sS2UuaGlkZUFsbFBvcHBlcnM9Z2UsS2UudXNlQ2FwdHVyZT1mdW5jdGlvbigpe307cmV0dXJuIHR0JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7UShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS10aXBweV0nKSkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1lLmdldEF0dHJpYnV0ZSgnZGF0YS10aXBweScpO3QmJktlKGUse2NvbnRlbnQ6dH0pfSl9KSxmdW5jdGlvbihlKXtpZihwdCl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTt0LnR5cGU9J3RleHQvY3NzJyx0LnRleHRDb250ZW50PWUsZG9jdW1lbnQuaGVhZC5pbnNlcnRCZWZvcmUodCxkb2N1bWVudC5oZWFkLmZpcnN0Q2hpbGQpfX0oJGUpLEtlfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aXBweS5hbGwubWluLmpzLm1hcFxuIiwidmFyIFdMSG9zdD1cImh0dHA6Ly9hcnF1aXZvcy53ZWJsaWJyYXMuY29tLmJyL2F1dG9cIjt2YXIgV0xIdHRwc0hvc3Q9XCJodHRwczovL3dlYmxpYnJhcy5ibG9iLmNvcmUud2luZG93cy5uZXQvYXV0b1wiO3ZhciBXTFBsYXllclZlcnNpb249XCIyLjEuMVwiO3ZhciBXTE1heFRyYW5zbGF0aW9uU2l6ZT0xNTAwOyhmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIF8oZSl7dmFyIHQ9TVtlXT17fTtyZXR1cm4gdi5lYWNoKGUuc3BsaXQoeSksZnVuY3Rpb24oZSxuKXt0W25dPSEwfSksdH1mdW5jdGlvbiBIKGUsbixyKXtpZihyPT09dCYmZS5ub2RlVHlwZT09PTEpe3ZhciBpPVwiZGF0YS1cIituLnJlcGxhY2UoUCxcIi0kMVwiKS50b0xvd2VyQ2FzZSgpO3I9ZS5nZXRBdHRyaWJ1dGUoaSk7aWYodHlwZW9mIHI9PVwic3RyaW5nXCIpe3RyeXtyPXI9PT1cInRydWVcIj8hMDpyPT09XCJmYWxzZVwiPyExOnI9PT1cIm51bGxcIj9udWxsOityK1wiXCI9PT1yPytyOkQudGVzdChyKT92LnBhcnNlSlNPTihyKTpyfWNhdGNoKHMpe312LmRhdGEoZSxuLHIpfWVsc2Ugcj10fXJldHVybiByfWZ1bmN0aW9uIEIoZSl7dmFyIHQ7Zm9yKHQgaW4gZSl7aWYodD09PVwiZGF0YVwiJiZ2LmlzRW1wdHlPYmplY3QoZVt0XSkpY29udGludWU7aWYodCE9PVwidG9KU09OXCIpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gZXQoKXtyZXR1cm4hMX1mdW5jdGlvbiB0dCgpe3JldHVybiEwfWZ1bmN0aW9uIHV0KGUpe3JldHVybiFlfHwhZS5wYXJlbnROb2RlfHxlLnBhcmVudE5vZGUubm9kZVR5cGU9PT0xMX1mdW5jdGlvbiBhdChlLHQpe2RvIGU9ZVt0XTt3aGlsZShlJiZlLm5vZGVUeXBlIT09MSk7cmV0dXJuIGV9ZnVuY3Rpb24gZnQoZSx0LG4pe3Q9dHx8MDtpZih2LmlzRnVuY3Rpb24odCkpcmV0dXJuIHYuZ3JlcChlLGZ1bmN0aW9uKGUscil7dmFyIGk9ISF0LmNhbGwoZSxyLGUpO3JldHVybiBpPT09bn0pO2lmKHQubm9kZVR5cGUpcmV0dXJuIHYuZ3JlcChlLGZ1bmN0aW9uKGUscil7cmV0dXJuIGU9PT10PT09bn0pO2lmKHR5cGVvZiB0PT1cInN0cmluZ1wiKXt2YXIgcj12LmdyZXAoZSxmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlVHlwZT09PTF9KTtpZihpdC50ZXN0KHQpKXJldHVybiB2LmZpbHRlcih0LHIsIW4pO3Q9di5maWx0ZXIodCxyKX1yZXR1cm4gdi5ncmVwKGUsZnVuY3Rpb24oZSxyKXtyZXR1cm4gdi5pbkFycmF5KGUsdCk+PTA9PT1ufSl9ZnVuY3Rpb24gbHQoZSl7dmFyIHQ9Y3Quc3BsaXQoXCJ8XCIpLG49ZS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aWYobi5jcmVhdGVFbGVtZW50KXdoaWxlKHQubGVuZ3RoKW4uY3JlYXRlRWxlbWVudCh0LnBvcCgpKTtyZXR1cm4gbn1mdW5jdGlvbiBMdChlLHQpe3JldHVybiBlLmdldEVsZW1lbnRzQnlUYWdOYW1lKHQpWzBdfHxlLmFwcGVuZENoaWxkKGUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KHQpKX1mdW5jdGlvbiBBdChlLHQpe2lmKHQubm9kZVR5cGUhPT0xfHwhdi5oYXNEYXRhKGUpKXJldHVybjt2YXIgbixyLGkscz12Ll9kYXRhKGUpLG89di5fZGF0YSh0LHMpLHU9cy5ldmVudHM7aWYodSl7ZGVsZXRlIG8uaGFuZGxlLG8uZXZlbnRzPXt9O2ZvcihuIGluIHUpZm9yKHI9MCxpPXVbbl0ubGVuZ3RoO3I8aTtyKyspdi5ldmVudC5hZGQodCxuLHVbbl1bcl0pfW8uZGF0YSYmKG8uZGF0YT12LmV4dGVuZCh7fSxvLmRhdGEpKX1mdW5jdGlvbiBPdChlLHQpe3ZhciBuO2lmKHQubm9kZVR5cGUhPT0xKXJldHVybjt0LmNsZWFyQXR0cmlidXRlcyYmdC5jbGVhckF0dHJpYnV0ZXMoKSx0Lm1lcmdlQXR0cmlidXRlcyYmdC5tZXJnZUF0dHJpYnV0ZXMoZSksbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksbj09PVwib2JqZWN0XCI/KHQucGFyZW50Tm9kZSYmKHQub3V0ZXJIVE1MPWUub3V0ZXJIVE1MKSx2LnN1cHBvcnQuaHRtbDVDbG9uZSYmZS5pbm5lckhUTUwmJiF2LnRyaW0odC5pbm5lckhUTUwpJiYodC5pbm5lckhUTUw9ZS5pbm5lckhUTUwpKTpuPT09XCJpbnB1dFwiJiZFdC50ZXN0KGUudHlwZSk/KHQuZGVmYXVsdENoZWNrZWQ9dC5jaGVja2VkPWUuY2hlY2tlZCx0LnZhbHVlIT09ZS52YWx1ZSYmKHQudmFsdWU9ZS52YWx1ZSkpOm49PT1cIm9wdGlvblwiP3Quc2VsZWN0ZWQ9ZS5kZWZhdWx0U2VsZWN0ZWQ6bj09PVwiaW5wdXRcInx8bj09PVwidGV4dGFyZWFcIj90LmRlZmF1bHRWYWx1ZT1lLmRlZmF1bHRWYWx1ZTpuPT09XCJzY3JpcHRcIiYmdC50ZXh0IT09ZS50ZXh0JiYodC50ZXh0PWUudGV4dCksdC5yZW1vdmVBdHRyaWJ1dGUodi5leHBhbmRvKX1mdW5jdGlvbiBNdChlKXtyZXR1cm4gdHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPVwidW5kZWZpbmVkXCI/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIik6dHlwZW9mIGUucXVlcnlTZWxlY3RvckFsbCE9XCJ1bmRlZmluZWRcIj9lLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqXCIpOltdfWZ1bmN0aW9uIF90KGUpe0V0LnRlc3QoZS50eXBlKSYmKGUuZGVmYXVsdENoZWNrZWQ9ZS5jaGVja2VkKX1mdW5jdGlvbiBRdChlLHQpe2lmKHQgaW4gZSlyZXR1cm4gdDt2YXIgbj10LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSkscj10LGk9SnQubGVuZ3RoO3doaWxlKGktLSl7dD1KdFtpXStuO2lmKHQgaW4gZSlyZXR1cm4gdH1yZXR1cm4gcn1mdW5jdGlvbiBHdChlLHQpe3JldHVybiBlPXR8fGUsdi5jc3MoZSxcImRpc3BsYXlcIik9PT1cIm5vbmVcInx8IXYuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfWZ1bmN0aW9uIFl0KGUsdCl7dmFyIG4scixpPVtdLHM9MCxvPWUubGVuZ3RoO2Zvcig7czxvO3MrKyl7bj1lW3NdO2lmKCFuLnN0eWxlKWNvbnRpbnVlO2lbc109di5fZGF0YShuLFwib2xkZGlzcGxheVwiKSx0PyghaVtzXSYmbi5zdHlsZS5kaXNwbGF5PT09XCJub25lXCImJihuLnN0eWxlLmRpc3BsYXk9XCJcIiksbi5zdHlsZS5kaXNwbGF5PT09XCJcIiYmR3QobikmJihpW3NdPXYuX2RhdGEobixcIm9sZGRpc3BsYXlcIixubihuLm5vZGVOYW1lKSkpKToocj1EdChuLFwiZGlzcGxheVwiKSwhaVtzXSYmciE9PVwibm9uZVwiJiZ2Ll9kYXRhKG4sXCJvbGRkaXNwbGF5XCIscikpfWZvcihzPTA7czxvO3MrKyl7bj1lW3NdO2lmKCFuLnN0eWxlKWNvbnRpbnVlO2lmKCF0fHxuLnN0eWxlLmRpc3BsYXk9PT1cIm5vbmVcInx8bi5zdHlsZS5kaXNwbGF5PT09XCJcIiluLnN0eWxlLmRpc3BsYXk9dD9pW3NdfHxcIlwiOlwibm9uZVwifXJldHVybiBlfWZ1bmN0aW9uIFp0KGUsdCxuKXt2YXIgcj1SdC5leGVjKHQpO3JldHVybiByP01hdGgubWF4KDAsclsxXS0obnx8MCkpKyhyWzJdfHxcInB4XCIpOnR9ZnVuY3Rpb24gZW4oZSx0LG4scil7dmFyIGk9bj09PShyP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpPzQ6dD09PVwid2lkdGhcIj8xOjAscz0wO2Zvcig7aTw0O2krPTIpbj09PVwibWFyZ2luXCImJihzKz12LmNzcyhlLG4rJHRbaV0sITApKSxyPyhuPT09XCJjb250ZW50XCImJihzLT1wYXJzZUZsb2F0KER0KGUsXCJwYWRkaW5nXCIrJHRbaV0pKXx8MCksbiE9PVwibWFyZ2luXCImJihzLT1wYXJzZUZsb2F0KER0KGUsXCJib3JkZXJcIiskdFtpXStcIldpZHRoXCIpKXx8MCkpOihzKz1wYXJzZUZsb2F0KER0KGUsXCJwYWRkaW5nXCIrJHRbaV0pKXx8MCxuIT09XCJwYWRkaW5nXCImJihzKz1wYXJzZUZsb2F0KER0KGUsXCJib3JkZXJcIiskdFtpXStcIldpZHRoXCIpKXx8MCkpO3JldHVybiBzfWZ1bmN0aW9uIHRuKGUsdCxuKXt2YXIgcj10PT09XCJ3aWR0aFwiP2Uub2Zmc2V0V2lkdGg6ZS5vZmZzZXRIZWlnaHQsaT0hMCxzPXYuc3VwcG9ydC5ib3hTaXppbmcmJnYuY3NzKGUsXCJib3hTaXppbmdcIik9PT1cImJvcmRlci1ib3hcIjtpZihyPD0wfHxyPT1udWxsKXtyPUR0KGUsdCk7aWYocjwwfHxyPT1udWxsKXI9ZS5zdHlsZVt0XTtpZihVdC50ZXN0KHIpKXJldHVybiByO2k9cyYmKHYuc3VwcG9ydC5ib3hTaXppbmdSZWxpYWJsZXx8cj09PWUuc3R5bGVbdF0pLHI9cGFyc2VGbG9hdChyKXx8MH1yZXR1cm4gcitlbihlLHQsbnx8KHM/XCJib3JkZXJcIjpcImNvbnRlbnRcIiksaSkrXCJweFwifWZ1bmN0aW9uIG5uKGUpe2lmKFd0W2VdKXJldHVybiBXdFtlXTt2YXIgdD12KFwiPFwiK2UrXCI+XCIpLmFwcGVuZFRvKGkuYm9keSksbj10LmNzcyhcImRpc3BsYXlcIik7dC5yZW1vdmUoKTtpZihuPT09XCJub25lXCJ8fG49PT1cIlwiKXtQdD1pLmJvZHkuYXBwZW5kQ2hpbGQoUHR8fHYuZXh0ZW5kKGkuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKSx7ZnJhbWVCb3JkZXI6MCx3aWR0aDowLGhlaWdodDowfSkpO2lmKCFIdHx8IVB0LmNyZWF0ZUVsZW1lbnQpSHQ9KFB0LmNvbnRlbnRXaW5kb3d8fFB0LmNvbnRlbnREb2N1bWVudCkuZG9jdW1lbnQsSHQud3JpdGUoXCI8IWRvY3R5cGUgaHRtbD48aHRtbD48Ym9keT5cIiksSHQuY2xvc2UoKTt0PUh0LmJvZHkuYXBwZW5kQ2hpbGQoSHQuY3JlYXRlRWxlbWVudChlKSksbj1EdCh0LFwiZGlzcGxheVwiKSxpLmJvZHkucmVtb3ZlQ2hpbGQoUHQpfXJldHVybiBXdFtlXT1uLG59ZnVuY3Rpb24gZm4oZSx0LG4scil7dmFyIGk7aWYodi5pc0FycmF5KHQpKXYuZWFjaCh0LGZ1bmN0aW9uKHQsaSl7bnx8c24udGVzdChlKT9yKGUsaSk6Zm4oZStcIltcIisodHlwZW9mIGk9PVwib2JqZWN0XCI/dDpcIlwiKStcIl1cIixpLG4scil9KTtlbHNlIGlmKCFuJiZ2LnR5cGUodCk9PT1cIm9iamVjdFwiKWZvcihpIGluIHQpZm4oZStcIltcIitpK1wiXVwiLHRbaV0sbixyKTtlbHNlIHIoZSx0KX1mdW5jdGlvbiBDbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXt0eXBlb2YgdCE9XCJzdHJpbmdcIiYmKG49dCx0PVwiKlwiKTt2YXIgcixpLHMsbz10LnRvTG93ZXJDYXNlKCkuc3BsaXQoeSksdT0wLGE9by5sZW5ndGg7aWYodi5pc0Z1bmN0aW9uKG4pKWZvcig7dTxhO3UrKylyPW9bdV0scz0vXlxcKy8udGVzdChyKSxzJiYocj1yLnN1YnN0cigxKXx8XCIqXCIpLGk9ZVtyXT1lW3JdfHxbXSxpW3M/XCJ1bnNoaWZ0XCI6XCJwdXNoXCJdKG4pfX1mdW5jdGlvbiBrbihlLG4scixpLHMsbyl7cz1zfHxuLmRhdGFUeXBlc1swXSxvPW98fHt9LG9bc109ITA7dmFyIHUsYT1lW3NdLGY9MCxsPWE/YS5sZW5ndGg6MCxjPWU9PT1Tbjtmb3IoO2Y8bCYmKGN8fCF1KTtmKyspdT1hW2ZdKG4scixpKSx0eXBlb2YgdT09XCJzdHJpbmdcIiYmKCFjfHxvW3VdP3U9dDoobi5kYXRhVHlwZXMudW5zaGlmdCh1KSx1PWtuKGUsbixyLGksdSxvKSkpO3JldHVybihjfHwhdSkmJiFvW1wiKlwiXSYmKHU9a24oZSxuLHIsaSxcIipcIixvKSksdX1mdW5jdGlvbiBMbihlLG4pe3ZhciByLGkscz12LmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKHIgaW4gbiluW3JdIT09dCYmKChzW3JdP2U6aXx8KGk9e30pKVtyXT1uW3JdKTtpJiZ2LmV4dGVuZCghMCxlLGkpfWZ1bmN0aW9uIEFuKGUsbixyKXt2YXIgaSxzLG8sdSxhPWUuY29udGVudHMsZj1lLmRhdGFUeXBlcyxsPWUucmVzcG9uc2VGaWVsZHM7Zm9yKHMgaW4gbClzIGluIHImJihuW2xbc11dPXJbc10pO3doaWxlKGZbMF09PT1cIipcIilmLnNoaWZ0KCksaT09PXQmJihpPWUubWltZVR5cGV8fG4uZ2V0UmVzcG9uc2VIZWFkZXIoXCJjb250ZW50LXR5cGVcIikpO2lmKGkpZm9yKHMgaW4gYSlpZihhW3NdJiZhW3NdLnRlc3QoaSkpe2YudW5zaGlmdChzKTticmVha31pZihmWzBdaW4gcilvPWZbMF07ZWxzZXtmb3IocyBpbiByKXtpZighZlswXXx8ZS5jb252ZXJ0ZXJzW3MrXCIgXCIrZlswXV0pe289czticmVha311fHwodT1zKX1vPW98fHV9aWYobylyZXR1cm4gbyE9PWZbMF0mJmYudW5zaGlmdChvKSxyW29dfWZ1bmN0aW9uIE9uKGUsdCl7dmFyIG4scixpLHMsbz1lLmRhdGFUeXBlcy5zbGljZSgpLHU9b1swXSxhPXt9LGY9MDtlLmRhdGFGaWx0ZXImJih0PWUuZGF0YUZpbHRlcih0LGUuZGF0YVR5cGUpKTtpZihvWzFdKWZvcihuIGluIGUuY29udmVydGVycylhW24udG9Mb3dlckNhc2UoKV09ZS5jb252ZXJ0ZXJzW25dO2Zvcig7aT1vWysrZl07KWlmKGkhPT1cIipcIil7aWYodSE9PVwiKlwiJiZ1IT09aSl7bj1hW3UrXCIgXCIraV18fGFbXCIqIFwiK2ldO2lmKCFuKWZvcihyIGluIGEpe3M9ci5zcGxpdChcIiBcIik7aWYoc1sxXT09PWkpe249YVt1K1wiIFwiK3NbMF1dfHxhW1wiKiBcIitzWzBdXTtpZihuKXtuPT09ITA/bj1hW3JdOmFbcl0hPT0hMCYmKGk9c1swXSxvLnNwbGljZShmLS0sMCxpKSk7YnJlYWt9fX1pZihuIT09ITApaWYobiYmZVtcInRocm93c1wiXSl0PW4odCk7ZWxzZSB0cnl7dD1uKHQpfWNhdGNoKGwpe3JldHVybntzdGF0ZTpcInBhcnNlcmVycm9yXCIsZXJyb3I6bj9sOlwiTm8gY29udmVyc2lvbiBmcm9tIFwiK3UrXCIgdG8gXCIraX19fXU9aX1yZXR1cm57c3RhdGU6XCJzdWNjZXNzXCIsZGF0YTp0fX1mdW5jdGlvbiBGbigpe3RyeXtyZXR1cm4gbmV3IGUuWE1MSHR0cFJlcXVlc3R9Y2F0Y2godCl7fX1mdW5jdGlvbiBJbigpe3RyeXtyZXR1cm4gbmV3IGUuQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpfWNhdGNoKHQpe319ZnVuY3Rpb24gJG4oKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3FuPXR9LDApLHFuPXYubm93KCl9ZnVuY3Rpb24gSm4oZSx0KXt2LmVhY2godCxmdW5jdGlvbih0LG4pe3ZhciByPShWblt0XXx8W10pLmNvbmNhdChWbltcIipcIl0pLGk9MCxzPXIubGVuZ3RoO2Zvcig7aTxzO2krKylpZihyW2ldLmNhbGwoZSx0LG4pKXJldHVybn0pfWZ1bmN0aW9uIEtuKGUsdCxuKXt2YXIgcixpPTAscz0wLG89WG4ubGVuZ3RoLHU9di5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSBhLmVsZW19KSxhPWZ1bmN0aW9uKCl7dmFyIHQ9cW58fCRuKCksbj1NYXRoLm1heCgwLGYuc3RhcnRUaW1lK2YuZHVyYXRpb24tdCkscj1uL2YuZHVyYXRpb258fDAsaT0xLXIscz0wLG89Zi50d2VlbnMubGVuZ3RoO2Zvcig7czxvO3MrKylmLnR3ZWVuc1tzXS5ydW4oaSk7cmV0dXJuIHUubm90aWZ5V2l0aChlLFtmLGksbl0pLGk8MSYmbz9uOih1LnJlc29sdmVXaXRoKGUsW2ZdKSwhMSl9LGY9dS5wcm9taXNlKHtlbGVtOmUscHJvcHM6di5leHRlbmQoe30sdCksb3B0czp2LmV4dGVuZCghMCx7c3BlY2lhbEVhc2luZzp7fX0sbiksb3JpZ2luYWxQcm9wZXJ0aWVzOnQsb3JpZ2luYWxPcHRpb25zOm4sc3RhcnRUaW1lOnFufHwkbigpLGR1cmF0aW9uOm4uZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKHQsbixyKXt2YXIgaT12LlR3ZWVuKGUsZi5vcHRzLHQsbixmLm9wdHMuc3BlY2lhbEVhc2luZ1t0XXx8Zi5vcHRzLmVhc2luZyk7cmV0dXJuIGYudHdlZW5zLnB1c2goaSksaX0sc3RvcDpmdW5jdGlvbih0KXt2YXIgbj0wLHI9dD9mLnR3ZWVucy5sZW5ndGg6MDtmb3IoO248cjtuKyspZi50d2VlbnNbbl0ucnVuKDEpO3JldHVybiB0P3UucmVzb2x2ZVdpdGgoZSxbZix0XSk6dS5yZWplY3RXaXRoKGUsW2YsdF0pLHRoaXN9fSksbD1mLnByb3BzO1FuKGwsZi5vcHRzLnNwZWNpYWxFYXNpbmcpO2Zvcig7aTxvO2krKyl7cj1YbltpXS5jYWxsKGYsZSxsLGYub3B0cyk7aWYocilyZXR1cm4gcn1yZXR1cm4gSm4oZixsKSx2LmlzRnVuY3Rpb24oZi5vcHRzLnN0YXJ0KSYmZi5vcHRzLnN0YXJ0LmNhbGwoZSxmKSx2LmZ4LnRpbWVyKHYuZXh0ZW5kKGEse2FuaW06ZixxdWV1ZTpmLm9wdHMucXVldWUsZWxlbTplfSkpLGYucHJvZ3Jlc3MoZi5vcHRzLnByb2dyZXNzKS5kb25lKGYub3B0cy5kb25lLGYub3B0cy5jb21wbGV0ZSkuZmFpbChmLm9wdHMuZmFpbCkuYWx3YXlzKGYub3B0cy5hbHdheXMpfWZ1bmN0aW9uIFFuKGUsdCl7dmFyIG4scixpLHMsbztmb3IobiBpbiBlKXtyPXYuY2FtZWxDYXNlKG4pLGk9dFtyXSxzPWVbbl0sdi5pc0FycmF5KHMpJiYoaT1zWzFdLHM9ZVtuXT1zWzBdKSxuIT09ciYmKGVbcl09cyxkZWxldGUgZVtuXSksbz12LmNzc0hvb2tzW3JdO2lmKG8mJlwiZXhwYW5kXCJpbiBvKXtzPW8uZXhwYW5kKHMpLGRlbGV0ZSBlW3JdO2ZvcihuIGluIHMpbiBpbiBlfHwoZVtuXT1zW25dLHRbbl09aSl9ZWxzZSB0W3JdPWl9fWZ1bmN0aW9uIEduKGUsdCxuKXt2YXIgcixpLHMsbyx1LGEsZixsLGMsaD10aGlzLHA9ZS5zdHlsZSxkPXt9LG09W10sZz1lLm5vZGVUeXBlJiZHdChlKTtuLnF1ZXVlfHwobD12Ll9xdWV1ZUhvb2tzKGUsXCJmeFwiKSxsLnVucXVldWVkPT1udWxsJiYobC51bnF1ZXVlZD0wLGM9bC5lbXB0eS5maXJlLGwuZW1wdHkuZmlyZT1mdW5jdGlvbigpe2wudW5xdWV1ZWR8fGMoKX0pLGwudW5xdWV1ZWQrKyxoLmFsd2F5cyhmdW5jdGlvbigpe2guYWx3YXlzKGZ1bmN0aW9uKCl7bC51bnF1ZXVlZC0tLHYucXVldWUoZSxcImZ4XCIpLmxlbmd0aHx8bC5lbXB0eS5maXJlKCl9KX0pKSxlLm5vZGVUeXBlPT09MSYmKFwiaGVpZ2h0XCJpbiB0fHxcIndpZHRoXCJpbiB0KSYmKG4ub3ZlcmZsb3c9W3Aub3ZlcmZsb3cscC5vdmVyZmxvd1gscC5vdmVyZmxvd1ldLHYuY3NzKGUsXCJkaXNwbGF5XCIpPT09XCJpbmxpbmVcIiYmdi5jc3MoZSxcImZsb2F0XCIpPT09XCJub25lXCImJighdi5zdXBwb3J0LmlubGluZUJsb2NrTmVlZHNMYXlvdXR8fG5uKGUubm9kZU5hbWUpPT09XCJpbmxpbmVcIj9wLmRpc3BsYXk9XCJpbmxpbmUtYmxvY2tcIjpwLnpvb209MSkpLG4ub3ZlcmZsb3cmJihwLm92ZXJmbG93PVwiaGlkZGVuXCIsdi5zdXBwb3J0LnNocmlua1dyYXBCbG9ja3N8fGguZG9uZShmdW5jdGlvbigpe3Aub3ZlcmZsb3c9bi5vdmVyZmxvd1swXSxwLm92ZXJmbG93WD1uLm92ZXJmbG93WzFdLHAub3ZlcmZsb3dZPW4ub3ZlcmZsb3dbMl19KSk7Zm9yKHIgaW4gdCl7cz10W3JdO2lmKFVuLmV4ZWMocykpe2RlbGV0ZSB0W3JdLGE9YXx8cz09PVwidG9nZ2xlXCI7aWYocz09PShnP1wiaGlkZVwiOlwic2hvd1wiKSljb250aW51ZTttLnB1c2gocil9fW89bS5sZW5ndGg7aWYobyl7dT12Ll9kYXRhKGUsXCJmeHNob3dcIil8fHYuX2RhdGEoZSxcImZ4c2hvd1wiLHt9KSxcImhpZGRlblwiaW4gdSYmKGc9dS5oaWRkZW4pLGEmJih1LmhpZGRlbj0hZyksZz92KGUpLnNob3coKTpoLmRvbmUoZnVuY3Rpb24oKXt2KGUpLmhpZGUoKX0pLGguZG9uZShmdW5jdGlvbigpe3ZhciB0O3YucmVtb3ZlRGF0YShlLFwiZnhzaG93XCIsITApO2Zvcih0IGluIGQpdi5zdHlsZShlLHQsZFt0XSl9KTtmb3Iocj0wO3I8bztyKyspaT1tW3JdLGY9aC5jcmVhdGVUd2VlbihpLGc/dVtpXTowKSxkW2ldPXVbaV18fHYuc3R5bGUoZSxpKSxpIGluIHV8fCh1W2ldPWYuc3RhcnQsZyYmKGYuZW5kPWYuc3RhcnQsZi5zdGFydD1pPT09XCJ3aWR0aFwifHxpPT09XCJoZWlnaHRcIj8xOjApKX19ZnVuY3Rpb24gWW4oZSx0LG4scixpKXtyZXR1cm4gbmV3IFluLnByb3RvdHlwZS5pbml0KGUsdCxuLHIsaSl9ZnVuY3Rpb24gWm4oZSx0KXt2YXIgbixyPXtoZWlnaHQ6ZX0saT0wO3Q9dD8xOjA7Zm9yKDtpPDQ7aSs9Mi10KW49JHRbaV0scltcIm1hcmdpblwiK25dPXJbXCJwYWRkaW5nXCIrbl09ZTtyZXR1cm4gdCYmKHIub3BhY2l0eT1yLndpZHRoPWUpLHJ9ZnVuY3Rpb24gdHIoZSl7cmV0dXJuIHYuaXNXaW5kb3coZSk/ZTplLm5vZGVUeXBlPT09OT9lLmRlZmF1bHRWaWV3fHxlLnBhcmVudFdpbmRvdzohMX12YXIgbixyLGk9ZS5kb2N1bWVudCxzPWUubG9jYXRpb24sbz1lLm5hdmlnYXRvcix1PWUualF1ZXJ5LGE9ZS4kLGY9QXJyYXkucHJvdG90eXBlLnB1c2gsbD1BcnJheS5wcm90b3R5cGUuc2xpY2UsYz1BcnJheS5wcm90b3R5cGUuaW5kZXhPZixoPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcscD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGQ9U3RyaW5nLnByb3RvdHlwZS50cmltLHY9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IHYuZm4uaW5pdChlLHQsbil9LG09L1tcXC0rXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVtcXC0rXT9cXGQrfCkvLnNvdXJjZSxnPS9cXFMvLHk9L1xccysvLGI9L15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLHc9L14oPzpbXiM8XSooPFtcXHdcXFddKz4pW14+XSokfCMoW1xcd1xcLV0qKSQpLyxFPS9ePChcXHcrKVxccypcXC8/Pig/OjxcXC9cXDE+fCkkLyxTPS9eW1xcXSw6e31cXHNdKiQvLHg9Lyg/Ol58OnwsKSg/OlxccypcXFspKy9nLFQ9L1xcXFwoPzpbXCJcXFxcXFwvYmZucnRdfHVbXFxkYS1mQS1GXXs0fSkvZyxOPS9cIlteXCJcXFxcXFxyXFxuXSpcInx0cnVlfGZhbHNlfG51bGx8LT8oPzpcXGRcXGQqXFwufClcXGQrKD86W2VFXVtcXC0rXT9cXGQrfCkvZyxDPS9eLW1zLS8saz0vLShbXFxkYS16XSkvZ2ksTD1mdW5jdGlvbihlLHQpe3JldHVybih0K1wiXCIpLnRvVXBwZXJDYXNlKCl9LEE9ZnVuY3Rpb24oKXtpLmFkZEV2ZW50TGlzdGVuZXI/KGkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixBLCExKSx2LnJlYWR5KCkpOmkucmVhZHlTdGF0ZT09PVwiY29tcGxldGVcIiYmKGkuZGV0YWNoRXZlbnQoXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIixBKSx2LnJlYWR5KCkpfSxPPXt9O3YuZm49di5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnYsaW5pdDpmdW5jdGlvbihlLG4scil7dmFyIHMsbyx1LGE7aWYoIWUpcmV0dXJuIHRoaXM7aWYoZS5ub2RlVHlwZSlyZXR1cm4gdGhpcy5jb250ZXh0PXRoaXNbMF09ZSx0aGlzLmxlbmd0aD0xLHRoaXM7aWYodHlwZW9mIGU9PVwic3RyaW5nXCIpe2UuY2hhckF0KDApPT09XCI8XCImJmUuY2hhckF0KGUubGVuZ3RoLTEpPT09XCI+XCImJmUubGVuZ3RoPj0zP3M9W251bGwsZSxudWxsXTpzPXcuZXhlYyhlKTtpZihzJiYoc1sxXXx8IW4pKXtpZihzWzFdKXJldHVybiBuPW4gaW5zdGFuY2VvZiB2P25bMF06bixhPW4mJm4ubm9kZVR5cGU/bi5vd25lckRvY3VtZW50fHxuOmksZT12LnBhcnNlSFRNTChzWzFdLGEsITApLEUudGVzdChzWzFdKSYmdi5pc1BsYWluT2JqZWN0KG4pJiZ0aGlzLmF0dHIuY2FsbChlLG4sITApLHYubWVyZ2UodGhpcyxlKTtvPWkuZ2V0RWxlbWVudEJ5SWQoc1syXSk7aWYobyYmby5wYXJlbnROb2RlKXtpZihvLmlkIT09c1syXSlyZXR1cm4gci5maW5kKGUpO3RoaXMubGVuZ3RoPTEsdGhpc1swXT1vfXJldHVybiB0aGlzLmNvbnRleHQ9aSx0aGlzLnNlbGVjdG9yPWUsdGhpc31yZXR1cm4hbnx8bi5qcXVlcnk/KG58fHIpLmZpbmQoZSk6dGhpcy5jb25zdHJ1Y3RvcihuKS5maW5kKGUpfXJldHVybiB2LmlzRnVuY3Rpb24oZSk/ci5yZWFkeShlKTooZS5zZWxlY3RvciE9PXQmJih0aGlzLnNlbGVjdG9yPWUuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWUuY29udGV4dCksdi5tYWtlQXJyYXkoZSx0aGlzKSl9LHNlbGVjdG9yOlwiXCIsanF1ZXJ5OlwiMS44LjNcIixsZW5ndGg6MCxzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofSx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIGwuY2FsbCh0aGlzKX0sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiBlPT1udWxsP3RoaXMudG9BcnJheSgpOmU8MD90aGlzW3RoaXMubGVuZ3RoK2VdOnRoaXNbZV19LHB1c2hTdGFjazpmdW5jdGlvbihlLHQsbil7dmFyIHI9di5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksZSk7cmV0dXJuIHIucHJldk9iamVjdD10aGlzLHIuY29udGV4dD10aGlzLmNvbnRleHQsdD09PVwiZmluZFwiP3Iuc2VsZWN0b3I9dGhpcy5zZWxlY3RvcisodGhpcy5zZWxlY3Rvcj9cIiBcIjpcIlwiKStuOnQmJihyLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3IrXCIuXCIrdCtcIihcIituK1wiKVwiKSxyfSxlYWNoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHYuZWFjaCh0aGlzLGUsdCl9LHJlYWR5OmZ1bmN0aW9uKGUpe3JldHVybiB2LnJlYWR5LnByb21pc2UoKS5kb25lKGUpLHRoaXN9LGVxOmZ1bmN0aW9uKGUpe3JldHVybiBlPStlLGU9PT0tMT90aGlzLnNsaWNlKGUpOnRoaXMuc2xpY2UoZSxlKzEpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhsLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxcInNsaWNlXCIsbC5jYWxsKGFyZ3VtZW50cykuam9pbihcIixcIikpfSxtYXA6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHYubWFwKHRoaXMsZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5jYWxsKHQsbix0KX0pKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcihudWxsKX0scHVzaDpmLHNvcnQ6W10uc29ydCxzcGxpY2U6W10uc3BsaWNlfSx2LmZuLmluaXQucHJvdG90eXBlPXYuZm4sdi5leHRlbmQ9di5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgZSxuLHIsaSxzLG8sdT1hcmd1bWVudHNbMF18fHt9LGE9MSxmPWFyZ3VtZW50cy5sZW5ndGgsbD0hMTt0eXBlb2YgdT09XCJib29sZWFuXCImJihsPXUsdT1hcmd1bWVudHNbMV18fHt9LGE9MiksdHlwZW9mIHUhPVwib2JqZWN0XCImJiF2LmlzRnVuY3Rpb24odSkmJih1PXt9KSxmPT09YSYmKHU9dGhpcywtLWEpO2Zvcig7YTxmO2ErKylpZigoZT1hcmd1bWVudHNbYV0pIT1udWxsKWZvcihuIGluIGUpe3I9dVtuXSxpPWVbbl07aWYodT09PWkpY29udGludWU7bCYmaSYmKHYuaXNQbGFpbk9iamVjdChpKXx8KHM9di5pc0FycmF5KGkpKSk/KHM/KHM9ITEsbz1yJiZ2LmlzQXJyYXkocik/cjpbXSk6bz1yJiZ2LmlzUGxhaW5PYmplY3Qocik/cjp7fSx1W25dPXYuZXh0ZW5kKGwsbyxpKSk6aSE9PXQmJih1W25dPWkpfXJldHVybiB1fSx2LmV4dGVuZCh7bm9Db25mbGljdDpmdW5jdGlvbih0KXtyZXR1cm4gZS4kPT09diYmKGUuJD1hKSx0JiZlLmpRdWVyeT09PXYmJihlLmpRdWVyeT11KSx2fSxpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihlKXtlP3YucmVhZHlXYWl0Kys6di5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGUpe2lmKGU9PT0hMD8tLXYucmVhZHlXYWl0OnYuaXNSZWFkeSlyZXR1cm47aWYoIWkuYm9keSlyZXR1cm4gc2V0VGltZW91dCh2LnJlYWR5LDEpO3YuaXNSZWFkeT0hMDtpZihlIT09ITAmJi0tdi5yZWFkeVdhaXQ+MClyZXR1cm47ci5yZXNvbHZlV2l0aChpLFt2XSksdi5mbi50cmlnZ2VyJiZ2KGkpLnRyaWdnZXIoXCJyZWFkeVwiKS5vZmYoXCJyZWFkeVwiKX0saXNGdW5jdGlvbjpmdW5jdGlvbihlKXtyZXR1cm4gdi50eXBlKGUpPT09XCJmdW5jdGlvblwifSxpc0FycmF5OkFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiB2LnR5cGUoZSk9PT1cImFycmF5XCJ9LGlzV2luZG93OmZ1bmN0aW9uKGUpe3JldHVybiBlIT1udWxsJiZlPT1lLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGUpe3JldHVybiFpc05hTihwYXJzZUZsb2F0KGUpKSYmaXNGaW5pdGUoZSl9LHR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PW51bGw/U3RyaW5nKGUpOk9baC5jYWxsKGUpXXx8XCJvYmplY3RcIn0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihlKXtpZighZXx8di50eXBlKGUpIT09XCJvYmplY3RcInx8ZS5ub2RlVHlwZXx8di5pc1dpbmRvdyhlKSlyZXR1cm4hMTt0cnl7aWYoZS5jb25zdHJ1Y3RvciYmIXAuY2FsbChlLFwiY29uc3RydWN0b3JcIikmJiFwLmNhbGwoZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsXCJpc1Byb3RvdHlwZU9mXCIpKXJldHVybiExfWNhdGNoKG4pe3JldHVybiExfXZhciByO2ZvcihyIGluIGUpO3JldHVybiByPT09dHx8cC5jYWxsKGUscil9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ7Zm9yKHQgaW4gZSlyZXR1cm4hMTtyZXR1cm4hMH0sZXJyb3I6ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKGUpfSxwYXJzZUhUTUw6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO3JldHVybiFlfHx0eXBlb2YgZSE9XCJzdHJpbmdcIj9udWxsOih0eXBlb2YgdD09XCJib29sZWFuXCImJihuPXQsdD0wKSx0PXR8fGksKHI9RS5leGVjKGUpKT9bdC5jcmVhdGVFbGVtZW50KHJbMV0pXToocj12LmJ1aWxkRnJhZ21lbnQoW2VdLHQsbj9udWxsOltdKSx2Lm1lcmdlKFtdLChyLmNhY2hlYWJsZT92LmNsb25lKHIuZnJhZ21lbnQpOnIuZnJhZ21lbnQpLmNoaWxkTm9kZXMpKSl9LHBhcnNlSlNPTjpmdW5jdGlvbih0KXtpZighdHx8dHlwZW9mIHQhPVwic3RyaW5nXCIpcmV0dXJuIG51bGw7dD12LnRyaW0odCk7aWYoZS5KU09OJiZlLkpTT04ucGFyc2UpcmV0dXJuIGUuSlNPTi5wYXJzZSh0KTtpZihTLnRlc3QodC5yZXBsYWNlKFQsXCJAXCIpLnJlcGxhY2UoTixcIl1cIikucmVwbGFjZSh4LFwiXCIpKSlyZXR1cm4obmV3IEZ1bmN0aW9uKFwicmV0dXJuIFwiK3QpKSgpO3YuZXJyb3IoXCJJbnZhbGlkIEpTT046IFwiK3QpfSxwYXJzZVhNTDpmdW5jdGlvbihuKXt2YXIgcixpO2lmKCFufHx0eXBlb2YgbiE9XCJzdHJpbmdcIilyZXR1cm4gbnVsbDt0cnl7ZS5ET01QYXJzZXI/KGk9bmV3IERPTVBhcnNlcixyPWkucGFyc2VGcm9tU3RyaW5nKG4sXCJ0ZXh0L3htbFwiKSk6KHI9bmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MRE9NXCIpLHIuYXN5bmM9XCJmYWxzZVwiLHIubG9hZFhNTChuKSl9Y2F0Y2gocyl7cj10fXJldHVybighcnx8IXIuZG9jdW1lbnRFbGVtZW50fHxyLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFyc2VyZXJyb3JcIikubGVuZ3RoKSYmdi5lcnJvcihcIkludmFsaWQgWE1MOiBcIituKSxyfSxub29wOmZ1bmN0aW9uKCl7fSxnbG9iYWxFdmFsOmZ1bmN0aW9uKHQpe3QmJmcudGVzdCh0KSYmKGUuZXhlY1NjcmlwdHx8ZnVuY3Rpb24odCl7ZS5ldmFsLmNhbGwoZSx0KX0pKHQpfSxjYW1lbENhc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShDLFwibXMtXCIpLnJlcGxhY2UoayxMKX0sbm9kZU5hbWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dC50b0xvd2VyQ2FzZSgpfSxlYWNoOmZ1bmN0aW9uKGUsbixyKXt2YXIgaSxzPTAsbz1lLmxlbmd0aCx1PW89PT10fHx2LmlzRnVuY3Rpb24oZSk7aWYocil7aWYodSl7Zm9yKGkgaW4gZSlpZihuLmFwcGx5KGVbaV0scik9PT0hMSlicmVha31lbHNlIGZvcig7czxvOylpZihuLmFwcGx5KGVbcysrXSxyKT09PSExKWJyZWFrfWVsc2UgaWYodSl7Zm9yKGkgaW4gZSlpZihuLmNhbGwoZVtpXSxpLGVbaV0pPT09ITEpYnJlYWt9ZWxzZSBmb3IoO3M8bzspaWYobi5jYWxsKGVbc10scyxlW3MrK10pPT09ITEpYnJlYWs7cmV0dXJuIGV9LHRyaW06ZCYmIWQuY2FsbChcIlxcdWZlZmZcXHUwMGEwXCIpP2Z1bmN0aW9uKGUpe3JldHVybiBlPT1udWxsP1wiXCI6ZC5jYWxsKGUpfTpmdW5jdGlvbihlKXtyZXR1cm4gZT09bnVsbD9cIlwiOihlK1wiXCIpLnJlcGxhY2UoYixcIlwiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGUsdCl7dmFyIG4scj10fHxbXTtyZXR1cm4gZSE9bnVsbCYmKG49di50eXBlKGUpLGUubGVuZ3RoPT1udWxsfHxuPT09XCJzdHJpbmdcInx8bj09PVwiZnVuY3Rpb25cInx8bj09PVwicmVnZXhwXCJ8fHYuaXNXaW5kb3coZSk/Zi5jYWxsKHIsZSk6di5tZXJnZShyLGUpKSxyfSxpbkFycmF5OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtpZih0KXtpZihjKXJldHVybiBjLmNhbGwodCxlLG4pO3I9dC5sZW5ndGgsbj1uP248MD9NYXRoLm1heCgwLHIrbik6bjowO2Zvcig7bjxyO24rKylpZihuIGluIHQmJnRbbl09PT1lKXJldHVybiBufXJldHVybi0xfSxtZXJnZTpmdW5jdGlvbihlLG4pe3ZhciByPW4ubGVuZ3RoLGk9ZS5sZW5ndGgscz0wO2lmKHR5cGVvZiByPT1cIm51bWJlclwiKWZvcig7czxyO3MrKyllW2krK109bltzXTtlbHNlIHdoaWxlKG5bc10hPT10KWVbaSsrXT1uW3MrK107cmV0dXJuIGUubGVuZ3RoPWksZX0sZ3JlcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT1bXSxzPTAsbz1lLmxlbmd0aDtuPSEhbjtmb3IoO3M8bztzKyspcj0hIXQoZVtzXSxzKSxuIT09ciYmaS5wdXNoKGVbc10pO3JldHVybiBpfSxtYXA6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLHMsbz1bXSx1PTAsYT1lLmxlbmd0aCxmPWUgaW5zdGFuY2VvZiB2fHxhIT09dCYmdHlwZW9mIGE9PVwibnVtYmVyXCImJihhPjAmJmVbMF0mJmVbYS0xXXx8YT09PTB8fHYuaXNBcnJheShlKSk7aWYoZilmb3IoO3U8YTt1KyspaT1uKGVbdV0sdSxyKSxpIT1udWxsJiYob1tvLmxlbmd0aF09aSk7ZWxzZSBmb3IocyBpbiBlKWk9bihlW3NdLHMsciksaSE9bnVsbCYmKG9bby5sZW5ndGhdPWkpO3JldHVybiBvLmNvbmNhdC5hcHBseShbXSxvKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGUsbil7dmFyIHIsaSxzO3JldHVybiB0eXBlb2Ygbj09XCJzdHJpbmdcIiYmKHI9ZVtuXSxuPWUsZT1yKSx2LmlzRnVuY3Rpb24oZSk/KGk9bC5jYWxsKGFyZ3VtZW50cywyKSxzPWZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkobixpLmNvbmNhdChsLmNhbGwoYXJndW1lbnRzKSkpfSxzLmd1aWQ9ZS5ndWlkPWUuZ3VpZHx8di5ndWlkKysscyk6dH0sYWNjZXNzOmZ1bmN0aW9uKGUsbixyLGkscyxvLHUpe3ZhciBhLGY9cj09bnVsbCxsPTAsYz1lLmxlbmd0aDtpZihyJiZ0eXBlb2Ygcj09XCJvYmplY3RcIil7Zm9yKGwgaW4gcil2LmFjY2VzcyhlLG4sbCxyW2xdLDEsbyxpKTtzPTF9ZWxzZSBpZihpIT09dCl7YT11PT09dCYmdi5pc0Z1bmN0aW9uKGkpLGYmJihhPyhhPW4sbj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGEuY2FsbCh2KGUpLG4pfSk6KG4uY2FsbChlLGkpLG49bnVsbCkpO2lmKG4pZm9yKDtsPGM7bCsrKW4oZVtsXSxyLGE/aS5jYWxsKGVbbF0sbCxuKGVbbF0scikpOmksdSk7cz0xfXJldHVybiBzP2U6Zj9uLmNhbGwoZSk6Yz9uKGVbMF0scik6b30sbm93OmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9fSksdi5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKHQpe2lmKCFyKXtyPXYuRGVmZXJyZWQoKTtpZihpLnJlYWR5U3RhdGU9PT1cImNvbXBsZXRlXCIpc2V0VGltZW91dCh2LnJlYWR5LDEpO2Vsc2UgaWYoaS5hZGRFdmVudExpc3RlbmVyKWkuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixBLCExKSxlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdi5yZWFkeSwhMSk7ZWxzZXtpLmF0dGFjaEV2ZW50KFwib25yZWFkeXN0YXRlY2hhbmdlXCIsQSksZS5hdHRhY2hFdmVudChcIm9ubG9hZFwiLHYucmVhZHkpO3ZhciBuPSExO3RyeXtuPWUuZnJhbWVFbGVtZW50PT1udWxsJiZpLmRvY3VtZW50RWxlbWVudH1jYXRjaChzKXt9biYmbi5kb1Njcm9sbCYmZnVuY3Rpb24gbygpe2lmKCF2LmlzUmVhZHkpe3RyeXtuLmRvU2Nyb2xsKFwibGVmdFwiKX1jYXRjaChlKXtyZXR1cm4gc2V0VGltZW91dChvLDUwKX12LnJlYWR5KCl9fSgpfX1yZXR1cm4gci5wcm9taXNlKHQpfSx2LmVhY2goXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGUsdCl7T1tcIltvYmplY3QgXCIrdCtcIl1cIl09dC50b0xvd2VyQ2FzZSgpfSksbj12KGkpO3ZhciBNPXt9O3YuQ2FsbGJhY2tzPWZ1bmN0aW9uKGUpe2U9dHlwZW9mIGU9PVwic3RyaW5nXCI/TVtlXXx8XyhlKTp2LmV4dGVuZCh7fSxlKTt2YXIgbixyLGkscyxvLHUsYT1bXSxmPSFlLm9uY2UmJltdLGw9ZnVuY3Rpb24odCl7bj1lLm1lbW9yeSYmdCxyPSEwLHU9c3x8MCxzPTAsbz1hLmxlbmd0aCxpPSEwO2Zvcig7YSYmdTxvO3UrKylpZihhW3VdLmFwcGx5KHRbMF0sdFsxXSk9PT0hMSYmZS5zdG9wT25GYWxzZSl7bj0hMTticmVha31pPSExLGEmJihmP2YubGVuZ3RoJiZsKGYuc2hpZnQoKSk6bj9hPVtdOmMuZGlzYWJsZSgpKX0sYz17YWRkOmZ1bmN0aW9uKCl7aWYoYSl7dmFyIHQ9YS5sZW5ndGg7KGZ1bmN0aW9uIHIodCl7di5lYWNoKHQsZnVuY3Rpb24odCxuKXt2YXIgaT12LnR5cGUobik7aT09PVwiZnVuY3Rpb25cIj8oIWUudW5pcXVlfHwhYy5oYXMobikpJiZhLnB1c2gobik6biYmbi5sZW5ndGgmJmkhPT1cInN0cmluZ1wiJiZyKG4pfSl9KShhcmd1bWVudHMpLGk/bz1hLmxlbmd0aDpuJiYocz10LGwobikpfXJldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gYSYmdi5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe3ZhciBuO3doaWxlKChuPXYuaW5BcnJheSh0LGEsbikpPi0xKWEuc3BsaWNlKG4sMSksaSYmKG48PW8mJm8tLSxuPD11JiZ1LS0pfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiB2LmluQXJyYXkoZSxhKT4tMX0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gYT1bXSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGE9Zj1uPXQsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hYX0sbG9jazpmdW5jdGlvbigpe3JldHVybiBmPXQsbnx8Yy5kaXNhYmxlKCksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIWZ9LGZpcmVXaXRoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9dHx8W10sdD1bZSx0LnNsaWNlP3Quc2xpY2UoKTp0XSxhJiYoIXJ8fGYpJiYoaT9mLnB1c2godCk6bCh0KSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBjLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhcn19O3JldHVybiBjfSx2LmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9W1tcInJlc29sdmVcIixcImRvbmVcIix2LkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFwicmVzb2x2ZWRcIl0sW1wicmVqZWN0XCIsXCJmYWlsXCIsdi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcInJlamVjdGVkXCJdLFtcIm5vdGlmeVwiLFwicHJvZ3Jlc3NcIix2LkNhbGxiYWNrcyhcIm1lbW9yeVwiKV1dLG49XCJwZW5kaW5nXCIscj17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbn0sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGkuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVybiB2LkRlZmVycmVkKGZ1bmN0aW9uKG4pe3YuZWFjaCh0LGZ1bmN0aW9uKHQscil7dmFyIHM9clswXSxvPWVbdF07aVtyWzFdXSh2LmlzRnVuY3Rpb24obyk/ZnVuY3Rpb24oKXt2YXIgZT1vLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlJiZ2LmlzRnVuY3Rpb24oZS5wcm9taXNlKT9lLnByb21pc2UoKS5kb25lKG4ucmVzb2x2ZSkuZmFpbChuLnJlamVjdCkucHJvZ3Jlc3Mobi5ub3RpZnkpOm5bcytcIldpdGhcIl0odGhpcz09PWk/bjp0aGlzLFtlXSl9Om5bc10pfSksZT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGUpe3JldHVybiBlIT1udWxsP3YuZXh0ZW5kKGUscik6cn19LGk9e307cmV0dXJuIHIucGlwZT1yLnRoZW4sdi5lYWNoKHQsZnVuY3Rpb24oZSxzKXt2YXIgbz1zWzJdLHU9c1szXTtyW3NbMV1dPW8uYWRkLHUmJm8uYWRkKGZ1bmN0aW9uKCl7bj11fSx0W2VeMV1bMl0uZGlzYWJsZSx0WzJdWzJdLmxvY2spLGlbc1swXV09by5maXJlLGlbc1swXStcIldpdGhcIl09by5maXJlV2l0aH0pLHIucHJvbWlzZShpKSxlJiZlLmNhbGwoaSxpKSxpfSx3aGVuOmZ1bmN0aW9uKGUpe3ZhciB0PTAsbj1sLmNhbGwoYXJndW1lbnRzKSxyPW4ubGVuZ3RoLGk9ciE9PTF8fGUmJnYuaXNGdW5jdGlvbihlLnByb21pc2UpP3I6MCxzPWk9PT0xP2U6di5EZWZlcnJlZCgpLG89ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBmdW5jdGlvbihyKXt0W2VdPXRoaXMsbltlXT1hcmd1bWVudHMubGVuZ3RoPjE/bC5jYWxsKGFyZ3VtZW50cyk6cixuPT09dT9zLm5vdGlmeVdpdGgodCxuKTotLWl8fHMucmVzb2x2ZVdpdGgodCxuKX19LHUsYSxmO2lmKHI+MSl7dT1uZXcgQXJyYXkociksYT1uZXcgQXJyYXkociksZj1uZXcgQXJyYXkocik7Zm9yKDt0PHI7dCsrKW5bdF0mJnYuaXNGdW5jdGlvbihuW3RdLnByb21pc2UpP25bdF0ucHJvbWlzZSgpLmRvbmUobyh0LGYsbikpLmZhaWwocy5yZWplY3QpLnByb2dyZXNzKG8odCxhLHUpKTotLWl9cmV0dXJuIGl8fHMucmVzb2x2ZVdpdGgoZixuKSxzLnByb21pc2UoKX19KSx2LnN1cHBvcnQ9ZnVuY3Rpb24oKXt2YXIgdCxuLHIscyxvLHUsYSxmLGwsYyxoLHA9aS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3Auc2V0QXR0cmlidXRlKFwiY2xhc3NOYW1lXCIsXCJ0XCIpLHAuaW5uZXJIVE1MPVwiICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+XCIsbj1wLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSxyPXAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhXCIpWzBdO2lmKCFufHwhcnx8IW4ubGVuZ3RoKXJldHVybnt9O3M9aS5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLG89cy5hcHBlbmRDaGlsZChpLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpLHU9cC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWzBdLHIuc3R5bGUuY3NzVGV4dD1cInRvcDoxcHg7ZmxvYXQ6bGVmdDtvcGFjaXR5Oi41XCIsdD17bGVhZGluZ1doaXRlc3BhY2U6cC5maXJzdENoaWxkLm5vZGVUeXBlPT09Myx0Ym9keTohcC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRib2R5XCIpLmxlbmd0aCxodG1sU2VyaWFsaXplOiEhcC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImxpbmtcIikubGVuZ3RoLHN0eWxlOi90b3AvLnRlc3Qoci5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSksaHJlZk5vcm1hbGl6ZWQ6ci5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpPT09XCIvYVwiLG9wYWNpdHk6L14wLjUvLnRlc3Qoci5zdHlsZS5vcGFjaXR5KSxjc3NGbG9hdDohIXIuc3R5bGUuY3NzRmxvYXQsY2hlY2tPbjp1LnZhbHVlPT09XCJvblwiLG9wdFNlbGVjdGVkOm8uc2VsZWN0ZWQsZ2V0U2V0QXR0cmlidXRlOnAuY2xhc3NOYW1lIT09XCJ0XCIsZW5jdHlwZTohIWkuY3JlYXRlRWxlbWVudChcImZvcm1cIikuZW5jdHlwZSxodG1sNUNsb25lOmkuY3JlYXRlRWxlbWVudChcIm5hdlwiKS5jbG9uZU5vZGUoITApLm91dGVySFRNTCE9PVwiPDpuYXY+PC86bmF2PlwiLGJveE1vZGVsOmkuY29tcGF0TW9kZT09PVwiQ1NTMUNvbXBhdFwiLHN1Ym1pdEJ1YmJsZXM6ITAsY2hhbmdlQnViYmxlczohMCxmb2N1c2luQnViYmxlczohMSxkZWxldGVFeHBhbmRvOiEwLG5vQ2xvbmVFdmVudDohMCxpbmxpbmVCbG9ja05lZWRzTGF5b3V0OiExLHNocmlua1dyYXBCbG9ja3M6ITEscmVsaWFibGVNYXJnaW5SaWdodDohMCxib3hTaXppbmdSZWxpYWJsZTohMCxwaXhlbFBvc2l0aW9uOiExfSx1LmNoZWNrZWQ9ITAsdC5ub0Nsb25lQ2hlY2tlZD11LmNsb25lTm9kZSghMCkuY2hlY2tlZCxzLmRpc2FibGVkPSEwLHQub3B0RGlzYWJsZWQ9IW8uZGlzYWJsZWQ7dHJ5e2RlbGV0ZSBwLnRlc3R9Y2F0Y2goZCl7dC5kZWxldGVFeHBhbmRvPSExfSFwLmFkZEV2ZW50TGlzdGVuZXImJnAuYXR0YWNoRXZlbnQmJnAuZmlyZUV2ZW50JiYocC5hdHRhY2hFdmVudChcIm9uY2xpY2tcIixoPWZ1bmN0aW9uKCl7dC5ub0Nsb25lRXZlbnQ9ITF9KSxwLmNsb25lTm9kZSghMCkuZmlyZUV2ZW50KFwib25jbGlja1wiKSxwLmRldGFjaEV2ZW50KFwib25jbGlja1wiLGgpKSx1PWkuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLHUudmFsdWU9XCJ0XCIsdS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKSx0LnJhZGlvVmFsdWU9dS52YWx1ZT09PVwidFwiLHUuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLFwiY2hlY2tlZFwiKSx1LnNldEF0dHJpYnV0ZShcIm5hbWVcIixcInRcIikscC5hcHBlbmRDaGlsZCh1KSxhPWkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGEuYXBwZW5kQ2hpbGQocC5sYXN0Q2hpbGQpLHQuY2hlY2tDbG9uZT1hLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCx0LmFwcGVuZENoZWNrZWQ9dS5jaGVja2VkLGEucmVtb3ZlQ2hpbGQodSksYS5hcHBlbmRDaGlsZChwKTtpZihwLmF0dGFjaEV2ZW50KWZvcihsIGlue3N1Ym1pdDohMCxjaGFuZ2U6ITAsZm9jdXNpbjohMH0pZj1cIm9uXCIrbCxjPWYgaW4gcCxjfHwocC5zZXRBdHRyaWJ1dGUoZixcInJldHVybjtcIiksYz10eXBlb2YgcFtmXT09XCJmdW5jdGlvblwiKSx0W2wrXCJCdWJibGVzXCJdPWM7cmV0dXJuIHYoZnVuY3Rpb24oKXt2YXIgbixyLHMsbyx1PVwicGFkZGluZzowO21hcmdpbjowO2JvcmRlcjowO2Rpc3BsYXk6YmxvY2s7b3ZlcmZsb3c6aGlkZGVuO1wiLGE9aS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF07aWYoIWEpcmV0dXJuO249aS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG4uc3R5bGUuY3NzVGV4dD1cInZpc2liaWxpdHk6aGlkZGVuO2JvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7cG9zaXRpb246c3RhdGljO3RvcDowO21hcmdpbi10b3A6MXB4XCIsYS5pbnNlcnRCZWZvcmUobixhLmZpcnN0Q2hpbGQpLHI9aS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG4uYXBwZW5kQ2hpbGQociksci5pbm5lckhUTUw9XCI8dGFibGU+PHRyPjx0ZD48L3RkPjx0ZD50PC90ZD48L3RyPjwvdGFibGU+XCIscz1yLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGRcIiksc1swXS5zdHlsZS5jc3NUZXh0PVwicGFkZGluZzowO21hcmdpbjowO2JvcmRlcjowO2Rpc3BsYXk6bm9uZVwiLGM9c1swXS5vZmZzZXRIZWlnaHQ9PT0wLHNbMF0uc3R5bGUuZGlzcGxheT1cIlwiLHNbMV0uc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0LnJlbGlhYmxlSGlkZGVuT2Zmc2V0cz1jJiZzWzBdLm9mZnNldEhlaWdodD09PTAsci5pbm5lckhUTUw9XCJcIixyLnN0eWxlLmNzc1RleHQ9XCJib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7cGFkZGluZzoxcHg7Ym9yZGVyOjFweDtkaXNwbGF5OmJsb2NrO3dpZHRoOjRweDttYXJnaW4tdG9wOjElO3Bvc2l0aW9uOmFic29sdXRlO3RvcDoxJTtcIix0LmJveFNpemluZz1yLm9mZnNldFdpZHRoPT09NCx0LmRvZXNOb3RJbmNsdWRlTWFyZ2luSW5Cb2R5T2Zmc2V0PWEub2Zmc2V0VG9wIT09MSxlLmdldENvbXB1dGVkU3R5bGUmJih0LnBpeGVsUG9zaXRpb249KGUuZ2V0Q29tcHV0ZWRTdHlsZShyLG51bGwpfHx7fSkudG9wIT09XCIxJVwiLHQuYm94U2l6aW5nUmVsaWFibGU9KGUuZ2V0Q29tcHV0ZWRTdHlsZShyLG51bGwpfHx7d2lkdGg6XCI0cHhcIn0pLndpZHRoPT09XCI0cHhcIixvPWkuY3JlYXRlRWxlbWVudChcImRpdlwiKSxvLnN0eWxlLmNzc1RleHQ9ci5zdHlsZS5jc3NUZXh0PXUsby5zdHlsZS5tYXJnaW5SaWdodD1vLnN0eWxlLndpZHRoPVwiMFwiLHIuc3R5bGUud2lkdGg9XCIxcHhcIixyLmFwcGVuZENoaWxkKG8pLHQucmVsaWFibGVNYXJnaW5SaWdodD0hcGFyc2VGbG9hdCgoZS5nZXRDb21wdXRlZFN0eWxlKG8sbnVsbCl8fHt9KS5tYXJnaW5SaWdodCkpLHR5cGVvZiByLnN0eWxlLnpvb20hPVwidW5kZWZpbmVkXCImJihyLmlubmVySFRNTD1cIlwiLHIuc3R5bGUuY3NzVGV4dD11K1wid2lkdGg6MXB4O3BhZGRpbmc6MXB4O2Rpc3BsYXk6aW5saW5lO3pvb206MVwiLHQuaW5saW5lQmxvY2tOZWVkc0xheW91dD1yLm9mZnNldFdpZHRoPT09MyxyLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLHIuc3R5bGUub3ZlcmZsb3c9XCJ2aXNpYmxlXCIsci5pbm5lckhUTUw9XCI8ZGl2PjwvZGl2PlwiLHIuZmlyc3RDaGlsZC5zdHlsZS53aWR0aD1cIjVweFwiLHQuc2hyaW5rV3JhcEJsb2Nrcz1yLm9mZnNldFdpZHRoIT09MyxuLnN0eWxlLnpvb209MSksYS5yZW1vdmVDaGlsZChuKSxuPXI9cz1vPW51bGx9KSxhLnJlbW92ZUNoaWxkKHApLG49cj1zPW89dT1hPXA9bnVsbCx0fSgpO3ZhciBEPS8oPzpcXHtbXFxzXFxTXSpcXH18XFxbW1xcc1xcU10qXFxdKSQvLFA9LyhbQS1aXSkvZzt2LmV4dGVuZCh7Y2FjaGU6e30sZGVsZXRlZElkczpbXSx1dWlkOjAsZXhwYW5kbzpcImpRdWVyeVwiKyh2LmZuLmpxdWVyeStNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cXEQvZyxcIlwiKSxub0RhdGE6e2VtYmVkOiEwLG9iamVjdDpcImNsc2lkOkQyN0NEQjZFLUFFNkQtMTFjZi05NkI4LTQ0NDU1MzU0MDAwMFwiLGFwcGxldDohMH0saGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gZT1lLm5vZGVUeXBlP3YuY2FjaGVbZVt2LmV4cGFuZG9dXTplW3YuZXhwYW5kb10sISFlJiYhQihlKX0sZGF0YTpmdW5jdGlvbihlLG4scixpKXtpZighdi5hY2NlcHREYXRhKGUpKXJldHVybjt2YXIgcyxvLHU9di5leHBhbmRvLGE9dHlwZW9mIG49PVwic3RyaW5nXCIsZj1lLm5vZGVUeXBlLGw9Zj92LmNhY2hlOmUsYz1mP2VbdV06ZVt1XSYmdTtpZigoIWN8fCFsW2NdfHwhaSYmIWxbY10uZGF0YSkmJmEmJnI9PT10KXJldHVybjtjfHwoZj9lW3VdPWM9di5kZWxldGVkSWRzLnBvcCgpfHx2Lmd1aWQrKzpjPXUpLGxbY118fChsW2NdPXt9LGZ8fChsW2NdLnRvSlNPTj12Lm5vb3ApKTtpZih0eXBlb2Ygbj09XCJvYmplY3RcInx8dHlwZW9mIG49PVwiZnVuY3Rpb25cIilpP2xbY109di5leHRlbmQobFtjXSxuKTpsW2NdLmRhdGE9di5leHRlbmQobFtjXS5kYXRhLG4pO3JldHVybiBzPWxbY10saXx8KHMuZGF0YXx8KHMuZGF0YT17fSkscz1zLmRhdGEpLHIhPT10JiYoc1t2LmNhbWVsQ2FzZShuKV09ciksYT8obz1zW25dLG89PW51bGwmJihvPXNbdi5jYW1lbENhc2UobildKSk6bz1zLG99LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSx0LG4pe2lmKCF2LmFjY2VwdERhdGEoZSkpcmV0dXJuO3ZhciByLGkscyxvPWUubm9kZVR5cGUsdT1vP3YuY2FjaGU6ZSxhPW8/ZVt2LmV4cGFuZG9dOnYuZXhwYW5kbztpZighdVthXSlyZXR1cm47aWYodCl7cj1uP3VbYV06dVthXS5kYXRhO2lmKHIpe3YuaXNBcnJheSh0KXx8KHQgaW4gcj90PVt0XToodD12LmNhbWVsQ2FzZSh0KSx0IGluIHI/dD1bdF06dD10LnNwbGl0KFwiIFwiKSkpO2ZvcihpPTAscz10Lmxlbmd0aDtpPHM7aSsrKWRlbGV0ZSByW3RbaV1dO2lmKCEobj9COnYuaXNFbXB0eU9iamVjdCkocikpcmV0dXJufX1pZighbil7ZGVsZXRlIHVbYV0uZGF0YTtpZighQih1W2FdKSlyZXR1cm59bz92LmNsZWFuRGF0YShbZV0sITApOnYuc3VwcG9ydC5kZWxldGVFeHBhbmRvfHx1IT11LndpbmRvdz9kZWxldGUgdVthXTp1W2FdPW51bGx9LF9kYXRhOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdi5kYXRhKGUsdCxuLCEwKX0sYWNjZXB0RGF0YTpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lJiZ2Lm5vRGF0YVtlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldO3JldHVybiF0fHx0IT09ITAmJmUuZ2V0QXR0cmlidXRlKFwiY2xhc3NpZFwiKT09PXR9fSksdi5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oZSxuKXt2YXIgcixpLHMsbyx1LGE9dGhpc1swXSxmPTAsbD1udWxsO2lmKGU9PT10KXtpZih0aGlzLmxlbmd0aCl7bD12LmRhdGEoYSk7aWYoYS5ub2RlVHlwZT09PTEmJiF2Ll9kYXRhKGEsXCJwYXJzZWRBdHRyc1wiKSl7cz1hLmF0dHJpYnV0ZXM7Zm9yKHU9cy5sZW5ndGg7Zjx1O2YrKylvPXNbZl0ubmFtZSxvLmluZGV4T2YoXCJkYXRhLVwiKXx8KG89di5jYW1lbENhc2Uoby5zdWJzdHJpbmcoNSkpLEgoYSxvLGxbb10pKTt2Ll9kYXRhKGEsXCJwYXJzZWRBdHRyc1wiLCEwKX19cmV0dXJuIGx9cmV0dXJuIHR5cGVvZiBlPT1cIm9iamVjdFwiP3RoaXMuZWFjaChmdW5jdGlvbigpe3YuZGF0YSh0aGlzLGUpfSk6KHI9ZS5zcGxpdChcIi5cIiwyKSxyWzFdPXJbMV0/XCIuXCIrclsxXTpcIlwiLGk9clsxXStcIiFcIix2LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKG4pe2lmKG49PT10KXJldHVybiBsPXRoaXMudHJpZ2dlckhhbmRsZXIoXCJnZXREYXRhXCIraSxbclswXV0pLGw9PT10JiZhJiYobD12LmRhdGEoYSxlKSxsPUgoYSxlLGwpKSxsPT09dCYmclsxXT90aGlzLmRhdGEoclswXSk6bDtyWzFdPW4sdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9dih0aGlzKTt0LnRyaWdnZXJIYW5kbGVyKFwic2V0RGF0YVwiK2ksciksdi5kYXRhKHRoaXMsZSxuKSx0LnRyaWdnZXJIYW5kbGVyKFwiY2hhbmdlRGF0YVwiK2kscil9KX0sbnVsbCxuLGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCExKSl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3YucmVtb3ZlRGF0YSh0aGlzLGUpfSl9fSksdi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtpZihlKXJldHVybiB0PSh0fHxcImZ4XCIpK1wicXVldWVcIixyPXYuX2RhdGEoZSx0KSxuJiYoIXJ8fHYuaXNBcnJheShuKT9yPXYuX2RhdGEoZSx0LHYubWFrZUFycmF5KG4pKTpyLnB1c2gobikpLHJ8fFtdfSxkZXF1ZXVlOmZ1bmN0aW9uKGUsdCl7dD10fHxcImZ4XCI7dmFyIG49di5xdWV1ZShlLHQpLHI9bi5sZW5ndGgsaT1uLnNoaWZ0KCkscz12Ll9xdWV1ZUhvb2tzKGUsdCksbz1mdW5jdGlvbigpe3YuZGVxdWV1ZShlLHQpfTtpPT09XCJpbnByb2dyZXNzXCImJihpPW4uc2hpZnQoKSxyLS0pLGkmJih0PT09XCJmeFwiJiZuLnVuc2hpZnQoXCJpbnByb2dyZXNzXCIpLGRlbGV0ZSBzLnN0b3AsaS5jYWxsKGUsbyxzKSksIXImJnMmJnMuZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihlLHQpe3ZhciBuPXQrXCJxdWV1ZUhvb2tzXCI7cmV0dXJuIHYuX2RhdGEoZSxuKXx8di5fZGF0YShlLG4se2VtcHR5OnYuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikuYWRkKGZ1bmN0aW9uKCl7di5yZW1vdmVEYXRhKGUsdCtcInF1ZXVlXCIsITApLHYucmVtb3ZlRGF0YShlLG4sITApfSl9KX19KSx2LmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSxuKXt2YXIgcj0yO3JldHVybiB0eXBlb2YgZSE9XCJzdHJpbmdcIiYmKG49ZSxlPVwiZnhcIixyLS0pLGFyZ3VtZW50cy5sZW5ndGg8cj92LnF1ZXVlKHRoaXNbMF0sZSk6bj09PXQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD12LnF1ZXVlKHRoaXMsZSxuKTt2Ll9xdWV1ZUhvb2tzKHRoaXMsZSksZT09PVwiZnhcIiYmdFswXSE9PVwiaW5wcm9ncmVzc1wiJiZ2LmRlcXVldWUodGhpcyxlKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2LmRlcXVldWUodGhpcyxlKX0pfSxkZWxheTpmdW5jdGlvbihlLHQpe3JldHVybiBlPXYuZng/di5meC5zcGVlZHNbZV18fGU6ZSx0PXR8fFwiZnhcIix0aGlzLnF1ZXVlKHQsZnVuY3Rpb24odCxuKXt2YXIgcj1zZXRUaW1lb3V0KHQsZSk7bi5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHIpfX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnF1ZXVlKGV8fFwiZnhcIixbXSl9LHByb21pc2U6ZnVuY3Rpb24oZSxuKXt2YXIgcixpPTEscz12LkRlZmVycmVkKCksbz10aGlzLHU9dGhpcy5sZW5ndGgsYT1mdW5jdGlvbigpey0taXx8cy5yZXNvbHZlV2l0aChvLFtvXSl9O3R5cGVvZiBlIT1cInN0cmluZ1wiJiYobj1lLGU9dCksZT1lfHxcImZ4XCI7d2hpbGUodS0tKXI9di5fZGF0YShvW3VdLGUrXCJxdWV1ZUhvb2tzXCIpLHImJnIuZW1wdHkmJihpKyssci5lbXB0eS5hZGQoYSkpO3JldHVybiBhKCkscy5wcm9taXNlKG4pfX0pO3ZhciBqLEYsSSxxPS9bXFx0XFxyXFxuXS9nLFI9L1xcci9nLFU9L14oPzpidXR0b258aW5wdXQpJC9pLHo9L14oPzpidXR0b258aW5wdXR8b2JqZWN0fHNlbGVjdHx0ZXh0YXJlYSkkL2ksVz0vXmEoPzpyZWF8KSQvaSxYPS9eKD86YXV0b2ZvY3VzfGF1dG9wbGF5fGFzeW5jfGNoZWNrZWR8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWR8c2VsZWN0ZWQpJC9pLFY9di5zdXBwb3J0LmdldFNldEF0dHJpYnV0ZTt2LmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihlLHQpe3JldHVybiB2LmFjY2Vzcyh0aGlzLHYuYXR0cixlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7di5yZW1vdmVBdHRyKHRoaXMsZSl9KX0scHJvcDpmdW5jdGlvbihlLHQpe3JldHVybiB2LmFjY2Vzcyh0aGlzLHYucHJvcCxlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihlKXtyZXR1cm4gZT12LnByb3BGaXhbZV18fGUsdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dHJ5e3RoaXNbZV09dCxkZWxldGUgdGhpc1tlXX1jYXRjaChuKXt9fSl9LGFkZENsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLHMsbyx1O2lmKHYuaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3YodGhpcykuYWRkQ2xhc3MoZS5jYWxsKHRoaXMsdCx0aGlzLmNsYXNzTmFtZSkpfSk7aWYoZSYmdHlwZW9mIGU9PVwic3RyaW5nXCIpe3Q9ZS5zcGxpdCh5KTtmb3Iobj0wLHI9dGhpcy5sZW5ndGg7bjxyO24rKyl7aT10aGlzW25dO2lmKGkubm9kZVR5cGU9PT0xKWlmKCFpLmNsYXNzTmFtZSYmdC5sZW5ndGg9PT0xKWkuY2xhc3NOYW1lPWU7ZWxzZXtzPVwiIFwiK2kuY2xhc3NOYW1lK1wiIFwiO2ZvcihvPTAsdT10Lmxlbmd0aDtvPHU7bysrKXMuaW5kZXhPZihcIiBcIit0W29dK1wiIFwiKTwwJiYocys9dFtvXStcIiBcIik7aS5jbGFzc05hbWU9di50cmltKHMpfX19cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGUpe3ZhciBuLHIsaSxzLG8sdSxhO2lmKHYuaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3YodGhpcykucmVtb3ZlQ2xhc3MoZS5jYWxsKHRoaXMsdCx0aGlzLmNsYXNzTmFtZSkpfSk7aWYoZSYmdHlwZW9mIGU9PVwic3RyaW5nXCJ8fGU9PT10KXtuPShlfHxcIlwiKS5zcGxpdCh5KTtmb3IodT0wLGE9dGhpcy5sZW5ndGg7dTxhO3UrKyl7aT10aGlzW3VdO2lmKGkubm9kZVR5cGU9PT0xJiZpLmNsYXNzTmFtZSl7cj0oXCIgXCIraS5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UocSxcIiBcIik7Zm9yKHM9MCxvPW4ubGVuZ3RoO3M8bztzKyspd2hpbGUoci5pbmRleE9mKFwiIFwiK25bc10rXCIgXCIpPj0wKXI9ci5yZXBsYWNlKFwiIFwiK25bc10rXCIgXCIsXCIgXCIpO2kuY2xhc3NOYW1lPWU/di50cmltKHIpOlwiXCJ9fX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10eXBlb2YgZSxyPXR5cGVvZiB0PT1cImJvb2xlYW5cIjtyZXR1cm4gdi5pc0Z1bmN0aW9uKGUpP3RoaXMuZWFjaChmdW5jdGlvbihuKXt2KHRoaXMpLnRvZ2dsZUNsYXNzKGUuY2FsbCh0aGlzLG4sdGhpcy5jbGFzc05hbWUsdCksdCl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXtpZihuPT09XCJzdHJpbmdcIil7dmFyIGkscz0wLG89dih0aGlzKSx1PXQsYT1lLnNwbGl0KHkpO3doaWxlKGk9YVtzKytdKXU9cj91OiFvLmhhc0NsYXNzKGkpLG9bdT9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShpKX1lbHNlIGlmKG49PT1cInVuZGVmaW5lZFwifHxuPT09XCJib29sZWFuXCIpdGhpcy5jbGFzc05hbWUmJnYuX2RhdGEodGhpcyxcIl9fY2xhc3NOYW1lX19cIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGU9PT0hMT9cIlwiOnYuX2RhdGEodGhpcyxcIl9fY2xhc3NOYW1lX19cIil8fFwiXCJ9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQ9XCIgXCIrZStcIiBcIixuPTAscj10aGlzLmxlbmd0aDtmb3IoO248cjtuKyspaWYodGhpc1tuXS5ub2RlVHlwZT09PTEmJihcIiBcIit0aGlzW25dLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShxLFwiIFwiKS5pbmRleE9mKHQpPj0wKXJldHVybiEwO3JldHVybiExfSx2YWw6ZnVuY3Rpb24oZSl7dmFyIG4scixpLHM9dGhpc1swXTtpZighYXJndW1lbnRzLmxlbmd0aCl7aWYocylyZXR1cm4gbj12LnZhbEhvb2tzW3MudHlwZV18fHYudmFsSG9va3Nbcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxuJiZcImdldFwiaW4gbiYmKHI9bi5nZXQocyxcInZhbHVlXCIpKSE9PXQ/cjoocj1zLnZhbHVlLHR5cGVvZiByPT1cInN0cmluZ1wiP3IucmVwbGFjZShSLFwiXCIpOnI9PW51bGw/XCJcIjpyKTtyZXR1cm59cmV0dXJuIGk9di5pc0Z1bmN0aW9uKGUpLHRoaXMuZWFjaChmdW5jdGlvbihyKXt2YXIgcyxvPXYodGhpcyk7aWYodGhpcy5ub2RlVHlwZSE9PTEpcmV0dXJuO2k/cz1lLmNhbGwodGhpcyxyLG8udmFsKCkpOnM9ZSxzPT1udWxsP3M9XCJcIjp0eXBlb2Ygcz09XCJudW1iZXJcIj9zKz1cIlwiOnYuaXNBcnJheShzKSYmKHM9di5tYXAocyxmdW5jdGlvbihlKXtyZXR1cm4gZT09bnVsbD9cIlwiOmUrXCJcIn0pKSxuPXYudmFsSG9va3NbdGhpcy50eXBlXXx8di52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldO2lmKCFufHwhKFwic2V0XCJpbiBuKXx8bi5zZXQodGhpcyxzLFwidmFsdWVcIik9PT10KXRoaXMudmFsdWU9c30pfX0pLHYuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hdHRyaWJ1dGVzLnZhbHVlO3JldHVybiF0fHx0LnNwZWNpZmllZD9lLnZhbHVlOmUudGV4dH19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0LG4scj1lLm9wdGlvbnMsaT1lLnNlbGVjdGVkSW5kZXgscz1lLnR5cGU9PT1cInNlbGVjdC1vbmVcInx8aTwwLG89cz9udWxsOltdLHU9cz9pKzE6ci5sZW5ndGgsYT1pPDA/dTpzP2k6MDtmb3IoO2E8dTthKyspe249clthXTtpZigobi5zZWxlY3RlZHx8YT09PWkpJiYodi5zdXBwb3J0Lm9wdERpc2FibGVkPyFuLmRpc2FibGVkOm4uZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIik9PT1udWxsKSYmKCFuLnBhcmVudE5vZGUuZGlzYWJsZWR8fCF2Lm5vZGVOYW1lKG4ucGFyZW50Tm9kZSxcIm9wdGdyb3VwXCIpKSl7dD12KG4pLnZhbCgpO2lmKHMpcmV0dXJuIHQ7by5wdXNoKHQpfX1yZXR1cm4gb30sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49di5tYWtlQXJyYXkodCk7cmV0dXJuIHYoZSkuZmluZChcIm9wdGlvblwiKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5zZWxlY3RlZD12LmluQXJyYXkodih0aGlzKS52YWwoKSxuKT49MH0pLG4ubGVuZ3RofHwoZS5zZWxlY3RlZEluZGV4PS0xKSxufX19LGF0dHJGbjp7fSxhdHRyOmZ1bmN0aW9uKGUsbixyLGkpe3ZhciBzLG8sdSxhPWUubm9kZVR5cGU7aWYoIWV8fGE9PT0zfHxhPT09OHx8YT09PTIpcmV0dXJuO2lmKGkmJnYuaXNGdW5jdGlvbih2LmZuW25dKSlyZXR1cm4gdihlKVtuXShyKTtpZih0eXBlb2YgZS5nZXRBdHRyaWJ1dGU9PVwidW5kZWZpbmVkXCIpcmV0dXJuIHYucHJvcChlLG4scik7dT1hIT09MXx8IXYuaXNYTUxEb2MoZSksdSYmKG49bi50b0xvd2VyQ2FzZSgpLG89di5hdHRySG9va3Nbbl18fChYLnRlc3Qobik/RjpqKSk7aWYociE9PXQpe2lmKHI9PT1udWxsKXt2LnJlbW92ZUF0dHIoZSxuKTtyZXR1cm59cmV0dXJuIG8mJlwic2V0XCJpbiBvJiZ1JiYocz1vLnNldChlLHIsbikpIT09dD9zOihlLnNldEF0dHJpYnV0ZShuLHIrXCJcIikscil9cmV0dXJuIG8mJlwiZ2V0XCJpbiBvJiZ1JiYocz1vLmdldChlLG4pKSE9PW51bGw/czoocz1lLmdldEF0dHJpYnV0ZShuKSxzPT09bnVsbD90OnMpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLHMsbz0wO2lmKHQmJmUubm9kZVR5cGU9PT0xKXtyPXQuc3BsaXQoeSk7Zm9yKDtvPHIubGVuZ3RoO28rKylpPXJbb10saSYmKG49di5wcm9wRml4W2ldfHxpLHM9WC50ZXN0KGkpLHN8fHYuYXR0cihlLGksXCJcIiksZS5yZW1vdmVBdHRyaWJ1dGUoVj9pOm4pLHMmJm4gaW4gZSYmKGVbbl09ITEpKX19LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGUsdCl7aWYoVS50ZXN0KGUubm9kZU5hbWUpJiZlLnBhcmVudE5vZGUpdi5lcnJvcihcInR5cGUgcHJvcGVydHkgY2FuJ3QgYmUgY2hhbmdlZFwiKTtlbHNlIGlmKCF2LnN1cHBvcnQucmFkaW9WYWx1ZSYmdD09PVwicmFkaW9cIiYmdi5ub2RlTmFtZShlLFwiaW5wdXRcIikpe3ZhciBuPWUudmFsdWU7cmV0dXJuIGUuc2V0QXR0cmlidXRlKFwidHlwZVwiLHQpLG4mJihlLnZhbHVlPW4pLHR9fX0sdmFsdWU6e2dldDpmdW5jdGlvbihlLHQpe3JldHVybiBqJiZ2Lm5vZGVOYW1lKGUsXCJidXR0b25cIik/ai5nZXQoZSx0KTp0IGluIGU/ZS52YWx1ZTpudWxsfSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe2lmKGomJnYubm9kZU5hbWUoZSxcImJ1dHRvblwiKSlyZXR1cm4gai5zZXQoZSx0LG4pO2UudmFsdWU9dH19fSxwcm9wRml4Ont0YWJpbmRleDpcInRhYkluZGV4XCIscmVhZG9ubHk6XCJyZWFkT25seVwiLFwiZm9yXCI6XCJodG1sRm9yXCIsXCJjbGFzc1wiOlwiY2xhc3NOYW1lXCIsbWF4bGVuZ3RoOlwibWF4TGVuZ3RoXCIsY2VsbHNwYWNpbmc6XCJjZWxsU3BhY2luZ1wiLGNlbGxwYWRkaW5nOlwiY2VsbFBhZGRpbmdcIixyb3dzcGFuOlwicm93U3BhblwiLGNvbHNwYW46XCJjb2xTcGFuXCIsdXNlbWFwOlwidXNlTWFwXCIsZnJhbWVib3JkZXI6XCJmcmFtZUJvcmRlclwiLGNvbnRlbnRlZGl0YWJsZTpcImNvbnRlbnRFZGl0YWJsZVwifSxwcm9wOmZ1bmN0aW9uKGUsbixyKXt2YXIgaSxzLG8sdT1lLm5vZGVUeXBlO2lmKCFlfHx1PT09M3x8dT09PTh8fHU9PT0yKXJldHVybjtyZXR1cm4gbz11IT09MXx8IXYuaXNYTUxEb2MoZSksbyYmKG49di5wcm9wRml4W25dfHxuLHM9di5wcm9wSG9va3Nbbl0pLHIhPT10P3MmJlwic2V0XCJpbiBzJiYoaT1zLnNldChlLHIsbikpIT09dD9pOmVbbl09cjpzJiZcImdldFwiaW4gcyYmKGk9cy5nZXQoZSxuKSkhPT1udWxsP2k6ZVtuXX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciBuPWUuZ2V0QXR0cmlidXRlTm9kZShcInRhYmluZGV4XCIpO3JldHVybiBuJiZuLnNwZWNpZmllZD9wYXJzZUludChuLnZhbHVlLDEwKTp6LnRlc3QoZS5ub2RlTmFtZSl8fFcudGVzdChlLm5vZGVOYW1lKSYmZS5ocmVmPzA6dH19fX0pLEY9e2dldDpmdW5jdGlvbihlLG4pe3ZhciByLGk9di5wcm9wKGUsbik7cmV0dXJuIGk9PT0hMHx8dHlwZW9mIGkhPVwiYm9vbGVhblwiJiYocj1lLmdldEF0dHJpYnV0ZU5vZGUobikpJiZyLm5vZGVWYWx1ZSE9PSExP24udG9Mb3dlckNhc2UoKTp0fSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO3JldHVybiB0PT09ITE/di5yZW1vdmVBdHRyKGUsbik6KHI9di5wcm9wRml4W25dfHxuLHIgaW4gZSYmKGVbcl09ITApLGUuc2V0QXR0cmlidXRlKG4sbi50b0xvd2VyQ2FzZSgpKSksbn19LFZ8fChJPXtuYW1lOiEwLGlkOiEwLGNvb3JkczohMH0saj12LnZhbEhvb2tzLmJ1dHRvbj17Z2V0OmZ1bmN0aW9uKGUsbil7dmFyIHI7cmV0dXJuIHI9ZS5nZXRBdHRyaWJ1dGVOb2RlKG4pLHImJihJW25dP3IudmFsdWUhPT1cIlwiOnIuc3BlY2lmaWVkKT9yLnZhbHVlOnR9LHNldDpmdW5jdGlvbihlLHQsbil7dmFyIHI9ZS5nZXRBdHRyaWJ1dGVOb2RlKG4pO3JldHVybiByfHwocj1pLmNyZWF0ZUF0dHJpYnV0ZShuKSxlLnNldEF0dHJpYnV0ZU5vZGUocikpLHIudmFsdWU9dCtcIlwifX0sdi5lYWNoKFtcIndpZHRoXCIsXCJoZWlnaHRcIl0sZnVuY3Rpb24oZSx0KXt2LmF0dHJIb29rc1t0XT12LmV4dGVuZCh2LmF0dHJIb29rc1t0XSx7c2V0OmZ1bmN0aW9uKGUsbil7aWYobj09PVwiXCIpcmV0dXJuIGUuc2V0QXR0cmlidXRlKHQsXCJhdXRvXCIpLG59fSl9KSx2LmF0dHJIb29rcy5jb250ZW50ZWRpdGFibGU9e2dldDpqLmdldCxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3Q9PT1cIlwiJiYodD1cImZhbHNlXCIpLGouc2V0KGUsdCxuKX19KSx2LnN1cHBvcnQuaHJlZk5vcm1hbGl6ZWR8fHYuZWFjaChbXCJocmVmXCIsXCJzcmNcIixcIndpZHRoXCIsXCJoZWlnaHRcIl0sZnVuY3Rpb24oZSxuKXt2LmF0dHJIb29rc1tuXT12LmV4dGVuZCh2LmF0dHJIb29rc1tuXSx7Z2V0OmZ1bmN0aW9uKGUpe3ZhciByPWUuZ2V0QXR0cmlidXRlKG4sMik7cmV0dXJuIHI9PT1udWxsP3Q6cn19KX0pLHYuc3VwcG9ydC5zdHlsZXx8KHYuYXR0ckhvb2tzLnN0eWxlPXtnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3R5bGUuY3NzVGV4dC50b0xvd2VyQ2FzZSgpfHx0fSxzZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zdHlsZS5jc3NUZXh0PXQrXCJcIn19KSx2LnN1cHBvcnQub3B0U2VsZWN0ZWR8fCh2LnByb3BIb29rcy5zZWxlY3RlZD12LmV4dGVuZCh2LnByb3BIb29rcy5zZWxlY3RlZCx7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTtyZXR1cm4gdCYmKHQuc2VsZWN0ZWRJbmRleCx0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4KSxudWxsfX0pKSx2LnN1cHBvcnQuZW5jdHlwZXx8KHYucHJvcEZpeC5lbmN0eXBlPVwiZW5jb2RpbmdcIiksdi5zdXBwb3J0LmNoZWNrT258fHYuZWFjaChbXCJyYWRpb1wiLFwiY2hlY2tib3hcIl0sZnVuY3Rpb24oKXt2LnZhbEhvb2tzW3RoaXNdPXtnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik9PT1udWxsP1wib25cIjplLnZhbHVlfX19KSx2LmVhY2goW1wicmFkaW9cIixcImNoZWNrYm94XCJdLGZ1bmN0aW9uKCl7di52YWxIb29rc1t0aGlzXT12LmV4dGVuZCh2LnZhbEhvb2tzW3RoaXNdLHtzZXQ6ZnVuY3Rpb24oZSx0KXtpZih2LmlzQXJyYXkodCkpcmV0dXJuIGUuY2hlY2tlZD12LmluQXJyYXkodihlKS52YWwoKSx0KT49MH19KX0pO3ZhciAkPS9eKD86dGV4dGFyZWF8aW5wdXR8c2VsZWN0KSQvaSxKPS9eKFteXFwuXSp8KSg/OlxcLiguKyl8KSQvLEs9Lyg/Ol58XFxzKWhvdmVyKFxcLlxcUyt8KVxcYi8sUT0vXmtleS8sRz0vXig/Om1vdXNlfGNvbnRleHRtZW51KXxjbGljay8sWT0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sWj1mdW5jdGlvbihlKXtyZXR1cm4gdi5ldmVudC5zcGVjaWFsLmhvdmVyP2U6ZS5yZXBsYWNlKEssXCJtb3VzZWVudGVyJDEgbW91c2VsZWF2ZSQxXCIpfTt2LmV2ZW50PXthZGQ6ZnVuY3Rpb24oZSxuLHIsaSxzKXt2YXIgbyx1LGEsZixsLGMsaCxwLGQsbSxnO2lmKGUubm9kZVR5cGU9PT0zfHxlLm5vZGVUeXBlPT09OHx8IW58fCFyfHwhKG89di5fZGF0YShlKSkpcmV0dXJuO3IuaGFuZGxlciYmKGQ9cixyPWQuaGFuZGxlcixzPWQuc2VsZWN0b3IpLHIuZ3VpZHx8KHIuZ3VpZD12Lmd1aWQrKyksYT1vLmV2ZW50cyxhfHwoby5ldmVudHM9YT17fSksdT1vLmhhbmRsZSx1fHwoby5oYW5kbGU9dT1mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIHY9PVwidW5kZWZpbmVkXCJ8fCEhZSYmdi5ldmVudC50cmlnZ2VyZWQ9PT1lLnR5cGU/dDp2LmV2ZW50LmRpc3BhdGNoLmFwcGx5KHUuZWxlbSxhcmd1bWVudHMpfSx1LmVsZW09ZSksbj12LnRyaW0oWihuKSkuc3BsaXQoXCIgXCIpO2ZvcihmPTA7ZjxuLmxlbmd0aDtmKyspe2w9Si5leGVjKG5bZl0pfHxbXSxjPWxbMV0saD0obFsyXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxnPXYuZXZlbnQuc3BlY2lhbFtjXXx8e30sYz0ocz9nLmRlbGVnYXRlVHlwZTpnLmJpbmRUeXBlKXx8YyxnPXYuZXZlbnQuc3BlY2lhbFtjXXx8e30scD12LmV4dGVuZCh7dHlwZTpjLG9yaWdUeXBlOmxbMV0sZGF0YTppLGhhbmRsZXI6cixndWlkOnIuZ3VpZCxzZWxlY3RvcjpzLG5lZWRzQ29udGV4dDpzJiZ2LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QocyksbmFtZXNwYWNlOmguam9pbihcIi5cIil9LGQpLG09YVtjXTtpZighbSl7bT1hW2NdPVtdLG0uZGVsZWdhdGVDb3VudD0wO2lmKCFnLnNldHVwfHxnLnNldHVwLmNhbGwoZSxpLGgsdSk9PT0hMSllLmFkZEV2ZW50TGlzdGVuZXI/ZS5hZGRFdmVudExpc3RlbmVyKGMsdSwhMSk6ZS5hdHRhY2hFdmVudCYmZS5hdHRhY2hFdmVudChcIm9uXCIrYyx1KX1nLmFkZCYmKGcuYWRkLmNhbGwoZSxwKSxwLmhhbmRsZXIuZ3VpZHx8KHAuaGFuZGxlci5ndWlkPXIuZ3VpZCkpLHM/bS5zcGxpY2UobS5kZWxlZ2F0ZUNvdW50KyssMCxwKTptLnB1c2gocCksdi5ldmVudC5nbG9iYWxbY109ITB9ZT1udWxsfSxnbG9iYWw6e30scmVtb3ZlOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIHMsbyx1LGEsZixsLGMsaCxwLGQsbSxnPXYuaGFzRGF0YShlKSYmdi5fZGF0YShlKTtpZighZ3x8IShoPWcuZXZlbnRzKSlyZXR1cm47dD12LnRyaW0oWih0fHxcIlwiKSkuc3BsaXQoXCIgXCIpO2ZvcihzPTA7czx0Lmxlbmd0aDtzKyspe289Si5leGVjKHRbc10pfHxbXSx1PWE9b1sxXSxmPW9bMl07aWYoIXUpe2Zvcih1IGluIGgpdi5ldmVudC5yZW1vdmUoZSx1K3Rbc10sbixyLCEwKTtjb250aW51ZX1wPXYuZXZlbnQuc3BlY2lhbFt1XXx8e30sdT0ocj9wLmRlbGVnYXRlVHlwZTpwLmJpbmRUeXBlKXx8dSxkPWhbdV18fFtdLGw9ZC5sZW5ndGgsZj1mP25ldyBSZWdFeHAoXCIoXnxcXFxcLilcIitmLnNwbGl0KFwiLlwiKS5zb3J0KCkuam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpOm51bGw7Zm9yKGM9MDtjPGQubGVuZ3RoO2MrKyltPWRbY10sKGl8fGE9PT1tLm9yaWdUeXBlKSYmKCFufHxuLmd1aWQ9PT1tLmd1aWQpJiYoIWZ8fGYudGVzdChtLm5hbWVzcGFjZSkpJiYoIXJ8fHI9PT1tLnNlbGVjdG9yfHxyPT09XCIqKlwiJiZtLnNlbGVjdG9yKSYmKGQuc3BsaWNlKGMtLSwxKSxtLnNlbGVjdG9yJiZkLmRlbGVnYXRlQ291bnQtLSxwLnJlbW92ZSYmcC5yZW1vdmUuY2FsbChlLG0pKTtkLmxlbmd0aD09PTAmJmwhPT1kLmxlbmd0aCYmKCghcC50ZWFyZG93bnx8cC50ZWFyZG93bi5jYWxsKGUsZixnLmhhbmRsZSk9PT0hMSkmJnYucmVtb3ZlRXZlbnQoZSx1LGcuaGFuZGxlKSxkZWxldGUgaFt1XSl9di5pc0VtcHR5T2JqZWN0KGgpJiYoZGVsZXRlIGcuaGFuZGxlLHYucmVtb3ZlRGF0YShlLFwiZXZlbnRzXCIsITApKX0sY3VzdG9tRXZlbnQ6e2dldERhdGE6ITAsc2V0RGF0YTohMCxjaGFuZ2VEYXRhOiEwfSx0cmlnZ2VyOmZ1bmN0aW9uKG4scixzLG8pe2lmKCFzfHxzLm5vZGVUeXBlIT09MyYmcy5ub2RlVHlwZSE9PTgpe3ZhciB1LGEsZixsLGMsaCxwLGQsbSxnLHk9bi50eXBlfHxuLGI9W107aWYoWS50ZXN0KHkrdi5ldmVudC50cmlnZ2VyZWQpKXJldHVybjt5LmluZGV4T2YoXCIhXCIpPj0wJiYoeT15LnNsaWNlKDAsLTEpLGE9ITApLHkuaW5kZXhPZihcIi5cIik+PTAmJihiPXkuc3BsaXQoXCIuXCIpLHk9Yi5zaGlmdCgpLGIuc29ydCgpKTtpZigoIXN8fHYuZXZlbnQuY3VzdG9tRXZlbnRbeV0pJiYhdi5ldmVudC5nbG9iYWxbeV0pcmV0dXJuO249dHlwZW9mIG49PVwib2JqZWN0XCI/blt2LmV4cGFuZG9dP246bmV3IHYuRXZlbnQoeSxuKTpuZXcgdi5FdmVudCh5KSxuLnR5cGU9eSxuLmlzVHJpZ2dlcj0hMCxuLmV4Y2x1c2l2ZT1hLG4ubmFtZXNwYWNlPWIuam9pbihcIi5cIiksbi5uYW1lc3BhY2VfcmU9bi5uYW1lc3BhY2U/bmV3IFJlZ0V4cChcIihefFxcXFwuKVwiK2Iuam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpOm51bGwsaD15LmluZGV4T2YoXCI6XCIpPDA/XCJvblwiK3k6XCJcIjtpZighcyl7dT12LmNhY2hlO2ZvcihmIGluIHUpdVtmXS5ldmVudHMmJnVbZl0uZXZlbnRzW3ldJiZ2LmV2ZW50LnRyaWdnZXIobixyLHVbZl0uaGFuZGxlLmVsZW0sITApO3JldHVybn1uLnJlc3VsdD10LG4udGFyZ2V0fHwobi50YXJnZXQ9cykscj1yIT1udWxsP3YubWFrZUFycmF5KHIpOltdLHIudW5zaGlmdChuKSxwPXYuZXZlbnQuc3BlY2lhbFt5XXx8e307aWYocC50cmlnZ2VyJiZwLnRyaWdnZXIuYXBwbHkocyxyKT09PSExKXJldHVybjttPVtbcyxwLmJpbmRUeXBlfHx5XV07aWYoIW8mJiFwLm5vQnViYmxlJiYhdi5pc1dpbmRvdyhzKSl7Zz1wLmRlbGVnYXRlVHlwZXx8eSxsPVkudGVzdChnK3kpP3M6cy5wYXJlbnROb2RlO2ZvcihjPXM7bDtsPWwucGFyZW50Tm9kZSltLnB1c2goW2wsZ10pLGM9bDtjPT09KHMub3duZXJEb2N1bWVudHx8aSkmJm0ucHVzaChbYy5kZWZhdWx0Vmlld3x8Yy5wYXJlbnRXaW5kb3d8fGUsZ10pfWZvcihmPTA7ZjxtLmxlbmd0aCYmIW4uaXNQcm9wYWdhdGlvblN0b3BwZWQoKTtmKyspbD1tW2ZdWzBdLG4udHlwZT1tW2ZdWzFdLGQ9KHYuX2RhdGEobCxcImV2ZW50c1wiKXx8e30pW24udHlwZV0mJnYuX2RhdGEobCxcImhhbmRsZVwiKSxkJiZkLmFwcGx5KGwsciksZD1oJiZsW2hdLGQmJnYuYWNjZXB0RGF0YShsKSYmZC5hcHBseSYmZC5hcHBseShsLHIpPT09ITEmJm4ucHJldmVudERlZmF1bHQoKTtyZXR1cm4gbi50eXBlPXksIW8mJiFuLmlzRGVmYXVsdFByZXZlbnRlZCgpJiYoIXAuX2RlZmF1bHR8fHAuX2RlZmF1bHQuYXBwbHkocy5vd25lckRvY3VtZW50LHIpPT09ITEpJiYoeSE9PVwiY2xpY2tcInx8IXYubm9kZU5hbWUocyxcImFcIikpJiZ2LmFjY2VwdERhdGEocykmJmgmJnNbeV0mJih5IT09XCJmb2N1c1wiJiZ5IT09XCJibHVyXCJ8fG4udGFyZ2V0Lm9mZnNldFdpZHRoIT09MCkmJiF2LmlzV2luZG93KHMpJiYoYz1zW2hdLGMmJihzW2hdPW51bGwpLHYuZXZlbnQudHJpZ2dlcmVkPXksc1t5XSgpLHYuZXZlbnQudHJpZ2dlcmVkPXQsYyYmKHNbaF09YykpLG4ucmVzdWx0fXJldHVybn0sZGlzcGF0Y2g6ZnVuY3Rpb24obil7bj12LmV2ZW50LmZpeChufHxlLmV2ZW50KTt2YXIgcixpLHMsbyx1LGEsZixjLGgscCxkPSh2Ll9kYXRhKHRoaXMsXCJldmVudHNcIil8fHt9KVtuLnR5cGVdfHxbXSxtPWQuZGVsZWdhdGVDb3VudCxnPWwuY2FsbChhcmd1bWVudHMpLHk9IW4uZXhjbHVzaXZlJiYhbi5uYW1lc3BhY2UsYj12LmV2ZW50LnNwZWNpYWxbbi50eXBlXXx8e30sdz1bXTtnWzBdPW4sbi5kZWxlZ2F0ZVRhcmdldD10aGlzO2lmKGIucHJlRGlzcGF0Y2gmJmIucHJlRGlzcGF0Y2guY2FsbCh0aGlzLG4pPT09ITEpcmV0dXJuO2lmKG0mJighbi5idXR0b258fG4udHlwZSE9PVwiY2xpY2tcIikpZm9yKHM9bi50YXJnZXQ7cyE9dGhpcztzPXMucGFyZW50Tm9kZXx8dGhpcylpZihzLmRpc2FibGVkIT09ITB8fG4udHlwZSE9PVwiY2xpY2tcIil7dT17fSxmPVtdO2ZvcihyPTA7cjxtO3IrKyljPWRbcl0saD1jLnNlbGVjdG9yLHVbaF09PT10JiYodVtoXT1jLm5lZWRzQ29udGV4dD92KGgsdGhpcykuaW5kZXgocyk+PTA6di5maW5kKGgsdGhpcyxudWxsLFtzXSkubGVuZ3RoKSx1W2hdJiZmLnB1c2goYyk7Zi5sZW5ndGgmJncucHVzaCh7ZWxlbTpzLG1hdGNoZXM6Zn0pfWQubGVuZ3RoPm0mJncucHVzaCh7ZWxlbTp0aGlzLG1hdGNoZXM6ZC5zbGljZShtKX0pO2ZvcihyPTA7cjx3Lmxlbmd0aCYmIW4uaXNQcm9wYWdhdGlvblN0b3BwZWQoKTtyKyspe2E9d1tyXSxuLmN1cnJlbnRUYXJnZXQ9YS5lbGVtO2ZvcihpPTA7aTxhLm1hdGNoZXMubGVuZ3RoJiYhbi5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpO2krKyl7Yz1hLm1hdGNoZXNbaV07aWYoeXx8IW4ubmFtZXNwYWNlJiYhYy5uYW1lc3BhY2V8fG4ubmFtZXNwYWNlX3JlJiZuLm5hbWVzcGFjZV9yZS50ZXN0KGMubmFtZXNwYWNlKSluLmRhdGE9Yy5kYXRhLG4uaGFuZGxlT2JqPWMsbz0oKHYuZXZlbnQuc3BlY2lhbFtjLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Yy5oYW5kbGVyKS5hcHBseShhLmVsZW0sZyksbyE9PXQmJihuLnJlc3VsdD1vLG89PT0hMSYmKG4ucHJldmVudERlZmF1bHQoKSxuLnN0b3BQcm9wYWdhdGlvbigpKSl9fXJldHVybiBiLnBvc3REaXNwYXRjaCYmYi5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLG4pLG4ucmVzdWx0fSxwcm9wczpcImF0dHJDaGFuZ2UgYXR0ck5hbWUgcmVsYXRlZE5vZGUgc3JjRWxlbWVudCBhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2hcIi5zcGxpdChcIiBcIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOlwiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZVwiLnNwbGl0KFwiIFwiKSxmaWx0ZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS53aGljaD09bnVsbCYmKGUud2hpY2g9dC5jaGFyQ29kZSE9bnVsbD90LmNoYXJDb2RlOnQua2V5Q29kZSksZX19LG1vdXNlSG9va3M6e3Byb3BzOlwiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIGZyb21FbGVtZW50IG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50XCIuc3BsaXQoXCIgXCIpLGZpbHRlcjpmdW5jdGlvbihlLG4pe3ZhciByLHMsbyx1PW4uYnV0dG9uLGE9bi5mcm9tRWxlbWVudDtyZXR1cm4gZS5wYWdlWD09bnVsbCYmbi5jbGllbnRYIT1udWxsJiYocj1lLnRhcmdldC5vd25lckRvY3VtZW50fHxpLHM9ci5kb2N1bWVudEVsZW1lbnQsbz1yLmJvZHksZS5wYWdlWD1uLmNsaWVudFgrKHMmJnMuc2Nyb2xsTGVmdHx8byYmby5zY3JvbGxMZWZ0fHwwKS0ocyYmcy5jbGllbnRMZWZ0fHxvJiZvLmNsaWVudExlZnR8fDApLGUucGFnZVk9bi5jbGllbnRZKyhzJiZzLnNjcm9sbFRvcHx8byYmby5zY3JvbGxUb3B8fDApLShzJiZzLmNsaWVudFRvcHx8byYmby5jbGllbnRUb3B8fDApKSwhZS5yZWxhdGVkVGFyZ2V0JiZhJiYoZS5yZWxhdGVkVGFyZ2V0PWE9PT1lLnRhcmdldD9uLnRvRWxlbWVudDphKSwhZS53aGljaCYmdSE9PXQmJihlLndoaWNoPXUmMT8xOnUmMj8zOnUmND8yOjApLGV9fSxmaXg6ZnVuY3Rpb24oZSl7aWYoZVt2LmV4cGFuZG9dKXJldHVybiBlO3ZhciB0LG4scj1lLHM9di5ldmVudC5maXhIb29rc1tlLnR5cGVdfHx7fSxvPXMucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQocy5wcm9wcyk6dGhpcy5wcm9wcztlPXYuRXZlbnQocik7Zm9yKHQ9by5sZW5ndGg7dDspbj1vWy0tdF0sZVtuXT1yW25dO3JldHVybiBlLnRhcmdldHx8KGUudGFyZ2V0PXIuc3JjRWxlbWVudHx8aSksZS50YXJnZXQubm9kZVR5cGU9PT0zJiYoZS50YXJnZXQ9ZS50YXJnZXQucGFyZW50Tm9kZSksZS5tZXRhS2V5PSEhZS5tZXRhS2V5LHMuZmlsdGVyP3MuZmlsdGVyKGUscik6ZX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOntkZWxlZ2F0ZVR5cGU6XCJmb2N1c2luXCJ9LGJsdXI6e2RlbGVnYXRlVHlwZTpcImZvY3Vzb3V0XCJ9LGJlZm9yZXVubG9hZDp7c2V0dXA6ZnVuY3Rpb24oZSx0LG4pe3YuaXNXaW5kb3codGhpcykmJih0aGlzLm9uYmVmb3JldW5sb2FkPW4pfSx0ZWFyZG93bjpmdW5jdGlvbihlLHQpe3RoaXMub25iZWZvcmV1bmxvYWQ9PT10JiYodGhpcy5vbmJlZm9yZXVubG9hZD1udWxsKX19fSxzaW11bGF0ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT12LmV4dGVuZChuZXcgdi5FdmVudCxuLHt0eXBlOmUsaXNTaW11bGF0ZWQ6ITAsb3JpZ2luYWxFdmVudDp7fX0pO3I/di5ldmVudC50cmlnZ2VyKGksbnVsbCx0KTp2LmV2ZW50LmRpc3BhdGNoLmNhbGwodCxpKSxpLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZuLnByZXZlbnREZWZhdWx0KCl9fSx2LmV2ZW50LmhhbmRsZT12LmV2ZW50LmRpc3BhdGNoLHYucmVtb3ZlRXZlbnQ9aS5yZW1vdmVFdmVudExpc3RlbmVyP2Z1bmN0aW9uKGUsdCxuKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXImJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LG4sITEpfTpmdW5jdGlvbihlLHQsbil7dmFyIHI9XCJvblwiK3Q7ZS5kZXRhY2hFdmVudCYmKHR5cGVvZiBlW3JdPT1cInVuZGVmaW5lZFwiJiYoZVtyXT1udWxsKSxlLmRldGFjaEV2ZW50KHIsbikpfSx2LkV2ZW50PWZ1bmN0aW9uKGUsdCl7aWYoISh0aGlzIGluc3RhbmNlb2Ygdi5FdmVudCkpcmV0dXJuIG5ldyB2LkV2ZW50KGUsdCk7ZSYmZS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9ZSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWUuZGVmYXVsdFByZXZlbnRlZHx8ZS5yZXR1cm5WYWx1ZT09PSExfHxlLmdldFByZXZlbnREZWZhdWx0JiZlLmdldFByZXZlbnREZWZhdWx0KCk/dHQ6ZXQpOnRoaXMudHlwZT1lLHQmJnYuZXh0ZW5kKHRoaXMsdCksdGhpcy50aW1lU3RhbXA9ZSYmZS50aW1lU3RhbXB8fHYubm93KCksdGhpc1t2LmV4cGFuZG9dPSEwfSx2LkV2ZW50LnByb3RvdHlwZT17cHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD10dDt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7aWYoIWUpcmV0dXJuO2UucHJldmVudERlZmF1bHQ/ZS5wcmV2ZW50RGVmYXVsdCgpOmUucmV0dXJuVmFsdWU9ITF9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9dHQ7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O2lmKCFlKXJldHVybjtlLnN0b3BQcm9wYWdhdGlvbiYmZS5zdG9wUHJvcGFnYXRpb24oKSxlLmNhbmNlbEJ1YmJsZT0hMH0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD10dCx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfSxpc0RlZmF1bHRQcmV2ZW50ZWQ6ZXQsaXNQcm9wYWdhdGlvblN0b3BwZWQ6ZXQsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6ZXR9LHYuZWFjaCh7bW91c2VlbnRlcjpcIm1vdXNlb3ZlclwiLG1vdXNlbGVhdmU6XCJtb3VzZW91dFwifSxmdW5jdGlvbihlLHQpe3YuZXZlbnQuc3BlY2lhbFtlXT17ZGVsZWdhdGVUeXBlOnQsYmluZFR5cGU6dCxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIG4scj10aGlzLGk9ZS5yZWxhdGVkVGFyZ2V0LHM9ZS5oYW5kbGVPYmosbz1zLnNlbGVjdG9yO2lmKCFpfHxpIT09ciYmIXYuY29udGFpbnMocixpKSllLnR5cGU9cy5vcmlnVHlwZSxuPXMuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZS50eXBlPXQ7cmV0dXJuIG59fX0pLHYuc3VwcG9ydC5zdWJtaXRCdWJibGVzfHwodi5ldmVudC5zcGVjaWFsLnN1Ym1pdD17c2V0dXA6ZnVuY3Rpb24oKXtpZih2Lm5vZGVOYW1lKHRoaXMsXCJmb3JtXCIpKXJldHVybiExO3YuZXZlbnQuYWRkKHRoaXMsXCJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXRcIixmdW5jdGlvbihlKXt2YXIgbj1lLnRhcmdldCxyPXYubm9kZU5hbWUobixcImlucHV0XCIpfHx2Lm5vZGVOYW1lKG4sXCJidXR0b25cIik/bi5mb3JtOnQ7ciYmIXYuX2RhdGEocixcIl9zdWJtaXRfYXR0YWNoZWRcIikmJih2LmV2ZW50LmFkZChyLFwic3VibWl0Ll9zdWJtaXRcIixmdW5jdGlvbihlKXtlLl9zdWJtaXRfYnViYmxlPSEwfSksdi5fZGF0YShyLFwiX3N1Ym1pdF9hdHRhY2hlZFwiLCEwKSl9KX0scG9zdERpc3BhdGNoOmZ1bmN0aW9uKGUpe2UuX3N1Ym1pdF9idWJibGUmJihkZWxldGUgZS5fc3VibWl0X2J1YmJsZSx0aGlzLnBhcmVudE5vZGUmJiFlLmlzVHJpZ2dlciYmdi5ldmVudC5zaW11bGF0ZShcInN1Ym1pdFwiLHRoaXMucGFyZW50Tm9kZSxlLCEwKSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7aWYodi5ub2RlTmFtZSh0aGlzLFwiZm9ybVwiKSlyZXR1cm4hMTt2LmV2ZW50LnJlbW92ZSh0aGlzLFwiLl9zdWJtaXRcIil9fSksdi5zdXBwb3J0LmNoYW5nZUJ1YmJsZXN8fCh2LmV2ZW50LnNwZWNpYWwuY2hhbmdlPXtzZXR1cDpmdW5jdGlvbigpe2lmKCQudGVzdCh0aGlzLm5vZGVOYW1lKSl7aWYodGhpcy50eXBlPT09XCJjaGVja2JveFwifHx0aGlzLnR5cGU9PT1cInJhZGlvXCIpdi5ldmVudC5hZGQodGhpcyxcInByb3BlcnR5Y2hhbmdlLl9jaGFuZ2VcIixmdW5jdGlvbihlKXtlLm9yaWdpbmFsRXZlbnQucHJvcGVydHlOYW1lPT09XCJjaGVja2VkXCImJih0aGlzLl9qdXN0X2NoYW5nZWQ9ITApfSksdi5ldmVudC5hZGQodGhpcyxcImNsaWNrLl9jaGFuZ2VcIixmdW5jdGlvbihlKXt0aGlzLl9qdXN0X2NoYW5nZWQmJiFlLmlzVHJpZ2dlciYmKHRoaXMuX2p1c3RfY2hhbmdlZD0hMSksdi5ldmVudC5zaW11bGF0ZShcImNoYW5nZVwiLHRoaXMsZSwhMCl9KTtyZXR1cm4hMX12LmV2ZW50LmFkZCh0aGlzLFwiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZVwiLGZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0OyQudGVzdCh0Lm5vZGVOYW1lKSYmIXYuX2RhdGEodCxcIl9jaGFuZ2VfYXR0YWNoZWRcIikmJih2LmV2ZW50LmFkZCh0LFwiY2hhbmdlLl9jaGFuZ2VcIixmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJiFlLmlzU2ltdWxhdGVkJiYhZS5pc1RyaWdnZXImJnYuZXZlbnQuc2ltdWxhdGUoXCJjaGFuZ2VcIix0aGlzLnBhcmVudE5vZGUsZSwhMCl9KSx2Ll9kYXRhKHQsXCJfY2hhbmdlX2F0dGFjaGVkXCIsITApKX0pfSxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXQ7aWYodGhpcyE9PXR8fGUuaXNTaW11bGF0ZWR8fGUuaXNUcmlnZ2VyfHx0LnR5cGUhPT1cInJhZGlvXCImJnQudHlwZSE9PVwiY2hlY2tib3hcIilyZXR1cm4gZS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIHYuZXZlbnQucmVtb3ZlKHRoaXMsXCIuX2NoYW5nZVwiKSwhJC50ZXN0KHRoaXMubm9kZU5hbWUpfX0pLHYuc3VwcG9ydC5mb2N1c2luQnViYmxlc3x8di5lYWNoKHtmb2N1czpcImZvY3VzaW5cIixibHVyOlwiZm9jdXNvdXRcIn0sZnVuY3Rpb24oZSx0KXt2YXIgbj0wLHI9ZnVuY3Rpb24oZSl7di5ldmVudC5zaW11bGF0ZSh0LGUudGFyZ2V0LHYuZXZlbnQuZml4KGUpLCEwKX07di5ldmVudC5zcGVjaWFsW3RdPXtzZXR1cDpmdW5jdGlvbigpe24rKz09PTAmJmkuYWRkRXZlbnRMaXN0ZW5lcihlLHIsITApfSx0ZWFyZG93bjpmdW5jdGlvbigpey0tbj09PTAmJmkucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHIsITApfX19KSx2LmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oZSxuLHIsaSxzKXt2YXIgbyx1O2lmKHR5cGVvZiBlPT1cIm9iamVjdFwiKXt0eXBlb2YgbiE9XCJzdHJpbmdcIiYmKHI9cnx8bixuPXQpO2Zvcih1IGluIGUpdGhpcy5vbih1LG4scixlW3VdLHMpO3JldHVybiB0aGlzfXI9PW51bGwmJmk9PW51bGw/KGk9bixyPW49dCk6aT09bnVsbCYmKHR5cGVvZiBuPT1cInN0cmluZ1wiPyhpPXIscj10KTooaT1yLHI9bixuPXQpKTtpZihpPT09ITEpaT1ldDtlbHNlIGlmKCFpKXJldHVybiB0aGlzO3JldHVybiBzPT09MSYmKG89aSxpPWZ1bmN0aW9uKGUpe3JldHVybiB2KCkub2ZmKGUpLG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpLmd1aWQ9by5ndWlkfHwoby5ndWlkPXYuZ3VpZCsrKSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7di5ldmVudC5hZGQodGhpcyxlLGkscixuKX0pfSxvbmU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMub24oZSx0LG4sciwxKX0sb2ZmOmZ1bmN0aW9uKGUsbixyKXt2YXIgaSxzO2lmKGUmJmUucHJldmVudERlZmF1bHQmJmUuaGFuZGxlT2JqKXJldHVybiBpPWUuaGFuZGxlT2JqLHYoZS5kZWxlZ2F0ZVRhcmdldCkub2ZmKGkubmFtZXNwYWNlP2kub3JpZ1R5cGUrXCIuXCIraS5uYW1lc3BhY2U6aS5vcmlnVHlwZSxpLnNlbGVjdG9yLGkuaGFuZGxlciksdGhpcztpZih0eXBlb2YgZT09XCJvYmplY3RcIil7Zm9yKHMgaW4gZSl0aGlzLm9mZihzLG4sZVtzXSk7cmV0dXJuIHRoaXN9aWYobj09PSExfHx0eXBlb2Ygbj09XCJmdW5jdGlvblwiKXI9bixuPXQ7cmV0dXJuIHI9PT0hMSYmKHI9ZXQpLHRoaXMuZWFjaChmdW5jdGlvbigpe3YuZXZlbnQucmVtb3ZlKHRoaXMsZSxyLG4pfSl9LGJpbmQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLm9uKGUsbnVsbCx0LG4pfSx1bmJpbmQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5vZmYoZSxudWxsLHQpfSxsaXZlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdih0aGlzLmNvbnRleHQpLm9uKGUsdGhpcy5zZWxlY3Rvcix0LG4pLHRoaXN9LGRpZTpmdW5jdGlvbihlLHQpe3JldHVybiB2KHRoaXMuY29udGV4dCkub2ZmKGUsdGhpcy5zZWxlY3Rvcnx8XCIqKlwiLHQpLHRoaXN9LGRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLm9uKHQsZSxuLHIpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD09PTE/dGhpcy5vZmYoZSxcIioqXCIpOnRoaXMub2ZmKHQsZXx8XCIqKlwiLG4pfSx0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3YuZXZlbnQudHJpZ2dlcihlLHQsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oZSx0KXtpZih0aGlzWzBdKXJldHVybiB2LmV2ZW50LnRyaWdnZXIoZSx0LHRoaXNbMF0sITApfSx0b2dnbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLG49ZS5ndWlkfHx2Lmd1aWQrKyxyPTAsaT1mdW5jdGlvbihuKXt2YXIgaT0odi5fZGF0YSh0aGlzLFwibGFzdFRvZ2dsZVwiK2UuZ3VpZCl8fDApJXI7cmV0dXJuIHYuX2RhdGEodGhpcyxcImxhc3RUb2dnbGVcIitlLmd1aWQsaSsxKSxuLnByZXZlbnREZWZhdWx0KCksdFtpXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fCExfTtpLmd1aWQ9bjt3aGlsZShyPHQubGVuZ3RoKXRbcisrXS5ndWlkPW47cmV0dXJuIHRoaXMuY2xpY2soaSl9LGhvdmVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihlKS5tb3VzZWxlYXZlKHR8fGUpfX0pLHYuZWFjaChcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnVcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oZSx0KXt2LmZuW3RdPWZ1bmN0aW9uKGUsbil7cmV0dXJuIG49PW51bGwmJihuPWUsZT1udWxsKSxhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbih0LG51bGwsZSxuKTp0aGlzLnRyaWdnZXIodCl9LFEudGVzdCh0KSYmKHYuZXZlbnQuZml4SG9va3NbdF09di5ldmVudC5rZXlIb29rcyksRy50ZXN0KHQpJiYodi5ldmVudC5maXhIb29rc1t0XT12LmV2ZW50Lm1vdXNlSG9va3MpfSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBudChlLHQsbixyKXtuPW58fFtdLHQ9dHx8Zzt2YXIgaSxzLGEsZixsPXQubm9kZVR5cGU7aWYoIWV8fHR5cGVvZiBlIT1cInN0cmluZ1wiKXJldHVybiBuO2lmKGwhPT0xJiZsIT09OSlyZXR1cm5bXTthPW8odCk7aWYoIWEmJiFyKWlmKGk9Ui5leGVjKGUpKWlmKGY9aVsxXSl7aWYobD09PTkpe3M9dC5nZXRFbGVtZW50QnlJZChmKTtpZighc3x8IXMucGFyZW50Tm9kZSlyZXR1cm4gbjtpZihzLmlkPT09ZilyZXR1cm4gbi5wdXNoKHMpLG59ZWxzZSBpZih0Lm93bmVyRG9jdW1lbnQmJihzPXQub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChmKSkmJnUodCxzKSYmcy5pZD09PWYpcmV0dXJuIG4ucHVzaChzKSxufWVsc2V7aWYoaVsyXSlyZXR1cm4gUy5hcHBseShuLHguY2FsbCh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpLDApKSxuO2lmKChmPWlbM10pJiZaJiZ0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIFMuYXBwbHkobix4LmNhbGwodC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGYpLDApKSxufXJldHVybiB2dChlLnJlcGxhY2UoaixcIiQxXCIpLHQsbixyLGEpfWZ1bmN0aW9uIHJ0KGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIG49PT1cImlucHV0XCImJnQudHlwZT09PWV9fWZ1bmN0aW9uIGl0KGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKG49PT1cImlucHV0XCJ8fG49PT1cImJ1dHRvblwiKSYmdC50eXBlPT09ZX19ZnVuY3Rpb24gc3QoZSl7cmV0dXJuIE4oZnVuY3Rpb24odCl7cmV0dXJuIHQ9K3QsTihmdW5jdGlvbihuLHIpe3ZhciBpLHM9ZShbXSxuLmxlbmd0aCx0KSxvPXMubGVuZ3RoO3doaWxlKG8tLSluW2k9c1tvXV0mJihuW2ldPSEocltpXT1uW2ldKSl9KX0pfWZ1bmN0aW9uIG90KGUsdCxuKXtpZihlPT09dClyZXR1cm4gbjt2YXIgcj1lLm5leHRTaWJsaW5nO3doaWxlKHIpe2lmKHI9PT10KXJldHVybi0xO3I9ci5uZXh0U2libGluZ31yZXR1cm4gMX1mdW5jdGlvbiB1dChlLHQpe3ZhciBuLHIscyxvLHUsYSxmLGw9TFtkXVtlK1wiIFwiXTtpZihsKXJldHVybiB0PzA6bC5zbGljZSgwKTt1PWUsYT1bXSxmPWkucHJlRmlsdGVyO3doaWxlKHUpe2lmKCFufHwocj1GLmV4ZWModSkpKXImJih1PXUuc2xpY2UoclswXS5sZW5ndGgpfHx1KSxhLnB1c2gocz1bXSk7bj0hMTtpZihyPUkuZXhlYyh1KSlzLnB1c2gobj1uZXcgbShyLnNoaWZ0KCkpKSx1PXUuc2xpY2Uobi5sZW5ndGgpLG4udHlwZT1yWzBdLnJlcGxhY2UoaixcIiBcIik7Zm9yKG8gaW4gaS5maWx0ZXIpKHI9SltvXS5leGVjKHUpKSYmKCFmW29dfHwocj1mW29dKHIpKSkmJihzLnB1c2gobj1uZXcgbShyLnNoaWZ0KCkpKSx1PXUuc2xpY2Uobi5sZW5ndGgpLG4udHlwZT1vLG4ubWF0Y2hlcz1yKTtpZighbilicmVha31yZXR1cm4gdD91Lmxlbmd0aDp1P250LmVycm9yKGUpOkwoZSxhKS5zbGljZSgwKX1mdW5jdGlvbiBhdChlLHQscil7dmFyIGk9dC5kaXIscz1yJiZ0LmRpcj09PVwicGFyZW50Tm9kZVwiLG89dysrO3JldHVybiB0LmZpcnN0P2Z1bmN0aW9uKHQsbixyKXt3aGlsZSh0PXRbaV0paWYoc3x8dC5ub2RlVHlwZT09PTEpcmV0dXJuIGUodCxuLHIpfTpmdW5jdGlvbih0LHIsdSl7aWYoIXUpe3ZhciBhLGY9YitcIiBcIitvK1wiIFwiLGw9ZituO3doaWxlKHQ9dFtpXSlpZihzfHx0Lm5vZGVUeXBlPT09MSl7aWYoKGE9dFtkXSk9PT1sKXJldHVybiB0LnNpenNldDtpZih0eXBlb2YgYT09XCJzdHJpbmdcIiYmYS5pbmRleE9mKGYpPT09MCl7aWYodC5zaXpzZXQpcmV0dXJuIHR9ZWxzZXt0W2RdPWw7aWYoZSh0LHIsdSkpcmV0dXJuIHQuc2l6c2V0PSEwLHQ7dC5zaXpzZXQ9ITF9fX1lbHNlIHdoaWxlKHQ9dFtpXSlpZihzfHx0Lm5vZGVUeXBlPT09MSlpZihlKHQscix1KSlyZXR1cm4gdH19ZnVuY3Rpb24gZnQoZSl7cmV0dXJuIGUubGVuZ3RoPjE/ZnVuY3Rpb24odCxuLHIpe3ZhciBpPWUubGVuZ3RoO3doaWxlKGktLSlpZighZVtpXSh0LG4scikpcmV0dXJuITE7cmV0dXJuITB9OmVbMF19ZnVuY3Rpb24gbHQoZSx0LG4scixpKXt2YXIgcyxvPVtdLHU9MCxhPWUubGVuZ3RoLGY9dCE9bnVsbDtmb3IoO3U8YTt1KyspaWYocz1lW3VdKWlmKCFufHxuKHMscixpKSlvLnB1c2gocyksZiYmdC5wdXNoKHUpO3JldHVybiBvfWZ1bmN0aW9uIGN0KGUsdCxuLHIsaSxzKXtyZXR1cm4gciYmIXJbZF0mJihyPWN0KHIpKSxpJiYhaVtkXSYmKGk9Y3QoaSxzKSksTihmdW5jdGlvbihzLG8sdSxhKXt2YXIgZixsLGMsaD1bXSxwPVtdLGQ9by5sZW5ndGgsdj1zfHxkdCh0fHxcIipcIix1Lm5vZGVUeXBlP1t1XTp1LFtdKSxtPWUmJihzfHwhdCk/bHQodixoLGUsdSxhKTp2LGc9bj9pfHwocz9lOmR8fHIpP1tdOm86bTtuJiZuKG0sZyx1LGEpO2lmKHIpe2Y9bHQoZyxwKSxyKGYsW10sdSxhKSxsPWYubGVuZ3RoO3doaWxlKGwtLSlpZihjPWZbbF0pZ1twW2xdXT0hKG1bcFtsXV09Yyl9aWYocyl7aWYoaXx8ZSl7aWYoaSl7Zj1bXSxsPWcubGVuZ3RoO3doaWxlKGwtLSkoYz1nW2xdKSYmZi5wdXNoKG1bbF09Yyk7aShudWxsLGc9W10sZixhKX1sPWcubGVuZ3RoO3doaWxlKGwtLSkoYz1nW2xdKSYmKGY9aT9ULmNhbGwocyxjKTpoW2xdKT4tMSYmKHNbZl09IShvW2ZdPWMpKX19ZWxzZSBnPWx0KGc9PT1vP2cuc3BsaWNlKGQsZy5sZW5ndGgpOmcpLGk/aShudWxsLG8sZyxhKTpTLmFwcGx5KG8sZyl9KX1mdW5jdGlvbiBodChlKXt2YXIgdCxuLHIscz1lLmxlbmd0aCxvPWkucmVsYXRpdmVbZVswXS50eXBlXSx1PW98fGkucmVsYXRpdmVbXCIgXCJdLGE9bz8xOjAsZj1hdChmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9LHUsITApLGw9YXQoZnVuY3Rpb24oZSl7cmV0dXJuIFQuY2FsbCh0LGUpPi0xfSx1LCEwKSxoPVtmdW5jdGlvbihlLG4scil7cmV0dXJuIW8mJihyfHxuIT09Yyl8fCgodD1uKS5ub2RlVHlwZT9mKGUsbixyKTpsKGUsbixyKSl9XTtmb3IoO2E8czthKyspaWYobj1pLnJlbGF0aXZlW2VbYV0udHlwZV0paD1bYXQoZnQoaCksbildO2Vsc2V7bj1pLmZpbHRlcltlW2FdLnR5cGVdLmFwcGx5KG51bGwsZVthXS5tYXRjaGVzKTtpZihuW2RdKXtyPSsrYTtmb3IoO3I8cztyKyspaWYoaS5yZWxhdGl2ZVtlW3JdLnR5cGVdKWJyZWFrO3JldHVybiBjdChhPjEmJmZ0KGgpLGE+MSYmZS5zbGljZSgwLGEtMSkuam9pbihcIlwiKS5yZXBsYWNlKGosXCIkMVwiKSxuLGE8ciYmaHQoZS5zbGljZShhLHIpKSxyPHMmJmh0KGU9ZS5zbGljZShyKSkscjxzJiZlLmpvaW4oXCJcIikpfWgucHVzaChuKX1yZXR1cm4gZnQoaCl9ZnVuY3Rpb24gcHQoZSx0KXt2YXIgcj10Lmxlbmd0aD4wLHM9ZS5sZW5ndGg+MCxvPWZ1bmN0aW9uKHUsYSxmLGwsaCl7dmFyIHAsZCx2LG09W10seT0wLHc9XCIwXCIseD11JiZbXSxUPWghPW51bGwsTj1jLEM9dXx8cyYmaS5maW5kLlRBRyhcIipcIixoJiZhLnBhcmVudE5vZGV8fGEpLGs9Yis9Tj09bnVsbD8xOk1hdGguRTtUJiYoYz1hIT09ZyYmYSxuPW8uZWwpO2Zvcig7KHA9Q1t3XSkhPW51bGw7dysrKXtpZihzJiZwKXtmb3IoZD0wO3Y9ZVtkXTtkKyspaWYodihwLGEsZikpe2wucHVzaChwKTticmVha31UJiYoYj1rLG49KytvLmVsKX1yJiYoKHA9IXYmJnApJiZ5LS0sdSYmeC5wdXNoKHApKX15Kz13O2lmKHImJnchPT15KXtmb3IoZD0wO3Y9dFtkXTtkKyspdih4LG0sYSxmKTtpZih1KXtpZih5PjApd2hpbGUody0tKSF4W3ddJiYhbVt3XSYmKG1bd109RS5jYWxsKGwpKTttPWx0KG0pfVMuYXBwbHkobCxtKSxUJiYhdSYmbS5sZW5ndGg+MCYmeSt0Lmxlbmd0aD4xJiZudC51bmlxdWVTb3J0KGwpfXJldHVybiBUJiYoYj1rLGM9TikseH07cmV0dXJuIG8uZWw9MCxyP04obyk6b31mdW5jdGlvbiBkdChlLHQsbil7dmFyIHI9MCxpPXQubGVuZ3RoO2Zvcig7cjxpO3IrKyludChlLHRbcl0sbik7cmV0dXJuIG59ZnVuY3Rpb24gdnQoZSx0LG4scixzKXt2YXIgbyx1LGYsbCxjLGg9dXQoZSkscD1oLmxlbmd0aDtpZighciYmaC5sZW5ndGg9PT0xKXt1PWhbMF09aFswXS5zbGljZSgwKTtpZih1Lmxlbmd0aD4yJiYoZj11WzBdKS50eXBlPT09XCJJRFwiJiZ0Lm5vZGVUeXBlPT09OSYmIXMmJmkucmVsYXRpdmVbdVsxXS50eXBlXSl7dD1pLmZpbmQuSUQoZi5tYXRjaGVzWzBdLnJlcGxhY2UoJCxcIlwiKSx0LHMpWzBdO2lmKCF0KXJldHVybiBuO2U9ZS5zbGljZSh1LnNoaWZ0KCkubGVuZ3RoKX1mb3Iobz1KLlBPUy50ZXN0KGUpPy0xOnUubGVuZ3RoLTE7bz49MDtvLS0pe2Y9dVtvXTtpZihpLnJlbGF0aXZlW2w9Zi50eXBlXSlicmVhaztpZihjPWkuZmluZFtsXSlpZihyPWMoZi5tYXRjaGVzWzBdLnJlcGxhY2UoJCxcIlwiKSx6LnRlc3QodVswXS50eXBlKSYmdC5wYXJlbnROb2RlfHx0LHMpKXt1LnNwbGljZShvLDEpLGU9ci5sZW5ndGgmJnUuam9pbihcIlwiKTtpZighZSlyZXR1cm4gUy5hcHBseShuLHguY2FsbChyLDApKSxuO2JyZWFrfX19cmV0dXJuIGEoZSxoKShyLHQscyxuLHoudGVzdChlKSksbn1mdW5jdGlvbiBtdCgpe312YXIgbixyLGkscyxvLHUsYSxmLGwsYyxoPSEwLHA9XCJ1bmRlZmluZWRcIixkPShcInNpemNhY2hlXCIrTWF0aC5yYW5kb20oKSkucmVwbGFjZShcIi5cIixcIlwiKSxtPVN0cmluZyxnPWUuZG9jdW1lbnQseT1nLmRvY3VtZW50RWxlbWVudCxiPTAsdz0wLEU9W10ucG9wLFM9W10ucHVzaCx4PVtdLnNsaWNlLFQ9W10uaW5kZXhPZnx8ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPXRoaXMubGVuZ3RoO2Zvcig7dDxuO3QrKylpZih0aGlzW3RdPT09ZSlyZXR1cm4gdDtyZXR1cm4tMX0sTj1mdW5jdGlvbihlLHQpe3JldHVybiBlW2RdPXQ9PW51bGx8fHQsZX0sQz1mdW5jdGlvbigpe3ZhciBlPXt9LHQ9W107cmV0dXJuIE4oZnVuY3Rpb24obixyKXtyZXR1cm4gdC5wdXNoKG4pPmkuY2FjaGVMZW5ndGgmJmRlbGV0ZSBlW3Quc2hpZnQoKV0sZVtuK1wiIFwiXT1yfSxlKX0saz1DKCksTD1DKCksQT1DKCksTz1cIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsTT1cIig/OlxcXFxcXFxcLnxbLVxcXFx3XXxbXlxcXFx4MDAtXFxcXHhhMF0pK1wiLF89TS5yZXBsYWNlKFwid1wiLFwidyNcIiksRD1cIihbKl4kfCF+XT89KVwiLFA9XCJcXFxcW1wiK08rXCIqKFwiK00rXCIpXCIrTytcIiooPzpcIitEK08rXCIqKD86KFsnXFxcIl0pKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXSkqPylcXFxcM3woXCIrXytcIil8KXwpXCIrTytcIipcXFxcXVwiLEg9XCI6KFwiK00rXCIpKD86XFxcXCgoPzooWydcXFwiXSkoKD86XFxcXFxcXFwufFteXFxcXFxcXFxdKSo/KVxcXFwyfChbXigpW1xcXFxdXSp8KD86KD86XCIrUCtcIil8W146XXxcXFxcXFxcXC4pKnwuKikpXFxcXCl8KVwiLEI9XCI6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIrTytcIiooKD86LVxcXFxkKT9cXFxcZCopXCIrTytcIipcXFxcKXwpKD89W14tXXwkKVwiLGo9bmV3IFJlZ0V4cChcIl5cIitPK1wiK3woKD86XnxbXlxcXFxcXFxcXSkoPzpcXFxcXFxcXC4pKilcIitPK1wiKyRcIixcImdcIiksRj1uZXcgUmVnRXhwKFwiXlwiK08rXCIqLFwiK08rXCIqXCIpLEk9bmV3IFJlZ0V4cChcIl5cIitPK1wiKihbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmPit+XSlcIitPK1wiKlwiKSxxPW5ldyBSZWdFeHAoSCksUj0vXig/OiMoW1xcd1xcLV0rKXwoXFx3Kyl8XFwuKFtcXHdcXC1dKykpJC8sVT0vXjpub3QvLHo9L1tcXHgyMFxcdFxcclxcblxcZl0qWyt+XS8sVz0vOm5vdFxcKCQvLFg9L2hcXGQvaSxWPS9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uL2ksJD0vXFxcXCg/IVxcXFwpL2csSj17SUQ6bmV3IFJlZ0V4cChcIl4jKFwiK00rXCIpXCIpLENMQVNTOm5ldyBSZWdFeHAoXCJeXFxcXC4oXCIrTStcIilcIiksTkFNRTpuZXcgUmVnRXhwKFwiXlxcXFxbbmFtZT1bJ1xcXCJdPyhcIitNK1wiKVsnXFxcIl0/XFxcXF1cIiksVEFHOm5ldyBSZWdFeHAoXCJeKFwiK00ucmVwbGFjZShcIndcIixcIncqXCIpK1wiKVwiKSxBVFRSOm5ldyBSZWdFeHAoXCJeXCIrUCksUFNFVURPOm5ldyBSZWdFeHAoXCJeXCIrSCksUE9TOm5ldyBSZWdFeHAoQixcImlcIiksQ0hJTEQ6bmV3IFJlZ0V4cChcIl46KG9ubHl8bnRofGZpcnN0fGxhc3QpLWNoaWxkKD86XFxcXChcIitPK1wiKihldmVufG9kZHwoKFsrLV18KShcXFxcZCopbnwpXCIrTytcIiooPzooWystXXwpXCIrTytcIiooXFxcXGQrKXwpKVwiK08rXCIqXFxcXCl8KVwiLFwiaVwiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cChcIl5cIitPK1wiKls+K35dfFwiK0IsXCJpXCIpfSxLPWZ1bmN0aW9uKGUpe3ZhciB0PWcuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0cnl7cmV0dXJuIGUodCl9Y2F0Y2gobil7cmV0dXJuITF9ZmluYWxseXt0PW51bGx9fSxRPUsoZnVuY3Rpb24oZSl7cmV0dXJuIGUuYXBwZW5kQ2hpbGQoZy5jcmVhdGVDb21tZW50KFwiXCIpKSwhZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RofSksRz1LKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD1cIjxhIGhyZWY9JyMnPjwvYT5cIixlLmZpcnN0Q2hpbGQmJnR5cGVvZiBlLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlIT09cCYmZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcImhyZWZcIik9PT1cIiNcIn0pLFk9SyhmdW5jdGlvbihlKXtlLmlubmVySFRNTD1cIjxzZWxlY3Q+PC9zZWxlY3Q+XCI7dmFyIHQ9dHlwZW9mIGUubGFzdENoaWxkLmdldEF0dHJpYnV0ZShcIm11bHRpcGxlXCIpO3JldHVybiB0IT09XCJib29sZWFuXCImJnQhPT1cInN0cmluZ1wifSksWj1LKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD1cIjxkaXYgY2xhc3M9J2hpZGRlbiBlJz48L2Rpdj48ZGl2IGNsYXNzPSdoaWRkZW4nPjwvZGl2PlwiLCFlLmdldEVsZW1lbnRzQnlDbGFzc05hbWV8fCFlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJlXCIpLmxlbmd0aD8hMTooZS5sYXN0Q2hpbGQuY2xhc3NOYW1lPVwiZVwiLGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImVcIikubGVuZ3RoPT09Mil9KSxldD1LKGZ1bmN0aW9uKGUpe2UuaWQ9ZCswLGUuaW5uZXJIVE1MPVwiPGEgbmFtZT0nXCIrZCtcIic+PC9hPjxkaXYgbmFtZT0nXCIrZCtcIic+PC9kaXY+XCIseS5pbnNlcnRCZWZvcmUoZSx5LmZpcnN0Q2hpbGQpO3ZhciB0PWcuZ2V0RWxlbWVudHNCeU5hbWUmJmcuZ2V0RWxlbWVudHNCeU5hbWUoZCkubGVuZ3RoPT09MitnLmdldEVsZW1lbnRzQnlOYW1lKGQrMCkubGVuZ3RoO3JldHVybiByPSFnLmdldEVsZW1lbnRCeUlkKGQpLHkucmVtb3ZlQ2hpbGQoZSksdH0pO3RyeXt4LmNhbGwoeS5jaGlsZE5vZGVzLDApWzBdLm5vZGVUeXBlfWNhdGNoKHR0KXt4PWZ1bmN0aW9uKGUpe3ZhciB0LG49W107Zm9yKDt0PXRoaXNbZV07ZSsrKW4ucHVzaCh0KTtyZXR1cm4gbn19bnQubWF0Y2hlcz1mdW5jdGlvbihlLHQpe3JldHVybiBudChlLG51bGwsbnVsbCx0KX0sbnQubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG50KHQsbnVsbCxudWxsLFtlXSkubGVuZ3RoPjB9LHM9bnQuZ2V0VGV4dD1mdW5jdGlvbihlKXt2YXIgdCxuPVwiXCIscj0wLGk9ZS5ub2RlVHlwZTtpZihpKXtpZihpPT09MXx8aT09PTl8fGk9PT0xMSl7aWYodHlwZW9mIGUudGV4dENvbnRlbnQ9PVwic3RyaW5nXCIpcmV0dXJuIGUudGV4dENvbnRlbnQ7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKW4rPXMoZSl9ZWxzZSBpZihpPT09M3x8aT09PTQpcmV0dXJuIGUubm9kZVZhbHVlfWVsc2UgZm9yKDt0PWVbcl07cisrKW4rPXModCk7cmV0dXJuIG59LG89bnQuaXNYTUw9ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmKGUub3duZXJEb2N1bWVudHx8ZSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiB0P3Qubm9kZU5hbWUhPT1cIkhUTUxcIjohMX0sdT1udC5jb250YWlucz15LmNvbnRhaW5zP2Z1bmN0aW9uKGUsdCl7dmFyIG49ZS5ub2RlVHlwZT09PTk/ZS5kb2N1bWVudEVsZW1lbnQ6ZSxyPXQmJnQucGFyZW50Tm9kZTtyZXR1cm4gZT09PXJ8fCEhKHImJnIubm9kZVR5cGU9PT0xJiZuLmNvbnRhaW5zJiZuLmNvbnRhaW5zKHIpKX06eS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHQpe3JldHVybiB0JiYhIShlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpJjE2KX06ZnVuY3Rpb24oZSx0KXt3aGlsZSh0PXQucGFyZW50Tm9kZSlpZih0PT09ZSlyZXR1cm4hMDtyZXR1cm4hMX0sbnQuYXR0cj1mdW5jdGlvbihlLHQpe3ZhciBuLHI9byhlKTtyZXR1cm4gcnx8KHQ9dC50b0xvd2VyQ2FzZSgpKSwobj1pLmF0dHJIYW5kbGVbdF0pP24oZSk6cnx8WT9lLmdldEF0dHJpYnV0ZSh0KToobj1lLmdldEF0dHJpYnV0ZU5vZGUodCksbj90eXBlb2YgZVt0XT09XCJib29sZWFuXCI/ZVt0XT90Om51bGw6bi5zcGVjaWZpZWQ/bi52YWx1ZTpudWxsOm51bGwpfSxpPW50LnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOk4sbWF0Y2g6SixhdHRySGFuZGxlOkc/e306e2hyZWY6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKFwiaHJlZlwiLDIpfSx0eXBlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZShcInR5cGVcIil9fSxmaW5kOntJRDpyP2Z1bmN0aW9uKGUsdCxuKXtpZih0eXBlb2YgdC5nZXRFbGVtZW50QnlJZCE9PXAmJiFuKXt2YXIgcj10LmdldEVsZW1lbnRCeUlkKGUpO3JldHVybiByJiZyLnBhcmVudE5vZGU/W3JdOltdfX06ZnVuY3Rpb24oZSxuLHIpe2lmKHR5cGVvZiBuLmdldEVsZW1lbnRCeUlkIT09cCYmIXIpe3ZhciBpPW4uZ2V0RWxlbWVudEJ5SWQoZSk7cmV0dXJuIGk/aS5pZD09PWV8fHR5cGVvZiBpLmdldEF0dHJpYnV0ZU5vZGUhPT1wJiZpLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKS52YWx1ZT09PWU/W2ldOnQ6W119fSxUQUc6UT9mdW5jdGlvbihlLHQpe2lmKHR5cGVvZiB0LmdldEVsZW1lbnRzQnlUYWdOYW1lIT09cClyZXR1cm4gdC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKX06ZnVuY3Rpb24oZSx0KXt2YXIgbj10LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpO2lmKGU9PT1cIipcIil7dmFyIHIsaT1bXSxzPTA7Zm9yKDtyPW5bc107cysrKXIubm9kZVR5cGU9PT0xJiZpLnB1c2gocik7cmV0dXJuIGl9cmV0dXJuIG59LE5BTUU6ZXQmJmZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIHQuZ2V0RWxlbWVudHNCeU5hbWUhPT1wKXJldHVybiB0LmdldEVsZW1lbnRzQnlOYW1lKG5hbWUpfSxDTEFTUzpaJiZmdW5jdGlvbihlLHQsbil7aWYodHlwZW9mIHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSE9PXAmJiFuKXJldHVybiB0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZSl9fSxyZWxhdGl2ZTp7XCI+XCI6e2RpcjpcInBhcmVudE5vZGVcIixmaXJzdDohMH0sXCIgXCI6e2RpcjpcInBhcmVudE5vZGVcIn0sXCIrXCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wiLGZpcnN0OiEwfSxcIn5cIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKCQsXCJcIiksZVszXT0oZVs0XXx8ZVs1XXx8XCJcIikucmVwbGFjZSgkLFwiXCIpLGVbMl09PT1cIn49XCImJihlWzNdPVwiIFwiK2VbM10rXCIgXCIpLGUuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS50b0xvd2VyQ2FzZSgpLGVbMV09PT1cIm50aFwiPyhlWzJdfHxudC5lcnJvcihlWzBdKSxlWzNdPSsoZVszXT9lWzRdKyhlWzVdfHwxKToyKihlWzJdPT09XCJldmVuXCJ8fGVbMl09PT1cIm9kZFwiKSksZVs0XT0rKGVbNl0rZVs3XXx8ZVsyXT09PVwib2RkXCIpKTplWzJdJiZudC5lcnJvcihlWzBdKSxlfSxQU0VVRE86ZnVuY3Rpb24oZSl7dmFyIHQsbjtpZihKLkNISUxELnRlc3QoZVswXSkpcmV0dXJuIG51bGw7aWYoZVszXSllWzJdPWVbM107ZWxzZSBpZih0PWVbNF0pcS50ZXN0KHQpJiYobj11dCh0LCEwKSkmJihuPXQuaW5kZXhPZihcIilcIix0Lmxlbmd0aC1uKS10Lmxlbmd0aCkmJih0PXQuc2xpY2UoMCxuKSxlWzBdPWVbMF0uc2xpY2UoMCxuKSksZVsyXT10O3JldHVybiBlLnNsaWNlKDAsMyl9fSxmaWx0ZXI6e0lEOnI/ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5yZXBsYWNlKCQsXCJcIiksZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0QXR0cmlidXRlKFwiaWRcIik9PT1lfX06ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5yZXBsYWNlKCQsXCJcIiksZnVuY3Rpb24odCl7dmFyIG49dHlwZW9mIHQuZ2V0QXR0cmlidXRlTm9kZSE9PXAmJnQuZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO3JldHVybiBuJiZuLnZhbHVlPT09ZX19LFRBRzpmdW5jdGlvbihlKXtyZXR1cm4gZT09PVwiKlwiP2Z1bmN0aW9uKCl7cmV0dXJuITB9OihlPWUucmVwbGFjZSgkLFwiXCIpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24odCl7cmV0dXJuIHQubm9kZU5hbWUmJnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWV9KX0sQ0xBU1M6ZnVuY3Rpb24oZSl7dmFyIHQ9a1tkXVtlK1wiIFwiXTtyZXR1cm4gdHx8KHQ9bmV3IFJlZ0V4cChcIihefFwiK08rXCIpXCIrZStcIihcIitPK1wifCQpXCIpKSYmayhlLGZ1bmN0aW9uKGUpe3JldHVybiB0LnRlc3QoZS5jbGFzc05hbWV8fHR5cGVvZiBlLmdldEF0dHJpYnV0ZSE9PXAmJmUuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpfSl9LEFUVFI6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBmdW5jdGlvbihyLGkpe3ZhciBzPW50LmF0dHIocixlKTtyZXR1cm4gcz09bnVsbD90PT09XCIhPVwiOnQ/KHMrPVwiXCIsdD09PVwiPVwiP3M9PT1uOnQ9PT1cIiE9XCI/cyE9PW46dD09PVwiXj1cIj9uJiZzLmluZGV4T2Yobik9PT0wOnQ9PT1cIio9XCI/biYmcy5pbmRleE9mKG4pPi0xOnQ9PT1cIiQ9XCI/biYmcy5zdWJzdHIocy5sZW5ndGgtbi5sZW5ndGgpPT09bjp0PT09XCJ+PVwiPyhcIiBcIitzK1wiIFwiKS5pbmRleE9mKG4pPi0xOnQ9PT1cInw9XCI/cz09PW58fHMuc3Vic3RyKDAsbi5sZW5ndGgrMSk9PT1uK1wiLVwiOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBlPT09XCJudGhcIj9mdW5jdGlvbihlKXt2YXIgdCxpLHM9ZS5wYXJlbnROb2RlO2lmKG49PT0xJiZyPT09MClyZXR1cm4hMDtpZihzKXtpPTA7Zm9yKHQ9cy5maXJzdENoaWxkO3Q7dD10Lm5leHRTaWJsaW5nKWlmKHQubm9kZVR5cGU9PT0xKXtpKys7aWYoZT09PXQpYnJlYWt9fXJldHVybiBpLT1yLGk9PT1ufHxpJW49PT0wJiZpL24+PTB9OmZ1bmN0aW9uKHQpe3ZhciBuPXQ7c3dpdGNoKGUpe2Nhc2VcIm9ubHlcIjpjYXNlXCJmaXJzdFwiOndoaWxlKG49bi5wcmV2aW91c1NpYmxpbmcpaWYobi5ub2RlVHlwZT09PTEpcmV0dXJuITE7aWYoZT09PVwiZmlyc3RcIilyZXR1cm4hMDtuPXQ7Y2FzZVwibGFzdFwiOndoaWxlKG49bi5uZXh0U2libGluZylpZihuLm5vZGVUeXBlPT09MSlyZXR1cm4hMTtyZXR1cm4hMH19fSxQU0VVRE86ZnVuY3Rpb24oZSx0KXt2YXIgbixyPWkucHNldWRvc1tlXXx8aS5zZXRGaWx0ZXJzW2UudG9Mb3dlckNhc2UoKV18fG50LmVycm9yKFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIitlKTtyZXR1cm4gcltkXT9yKHQpOnIubGVuZ3RoPjE/KG49W2UsZSxcIlwiLHRdLGkuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShlLnRvTG93ZXJDYXNlKCkpP04oZnVuY3Rpb24oZSxuKXt2YXIgaSxzPXIoZSx0KSxvPXMubGVuZ3RoO3doaWxlKG8tLSlpPVQuY2FsbChlLHNbb10pLGVbaV09IShuW2ldPXNbb10pfSk6ZnVuY3Rpb24oZSl7cmV0dXJuIHIoZSwwLG4pfSk6cn19LHBzZXVkb3M6e25vdDpOKGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49W10scj1hKGUucmVwbGFjZShqLFwiJDFcIikpO3JldHVybiByW2RdP04oZnVuY3Rpb24oZSx0LG4saSl7dmFyIHMsbz1yKGUsbnVsbCxpLFtdKSx1PWUubGVuZ3RoO3doaWxlKHUtLSlpZihzPW9bdV0pZVt1XT0hKHRbdV09cyl9KTpmdW5jdGlvbihlLGkscyl7cmV0dXJuIHRbMF09ZSxyKHQsbnVsbCxzLG4pLCFuLnBvcCgpfX0pLGhhczpOKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gbnQoZSx0KS5sZW5ndGg+MH19KSxjb250YWluczpOKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4odC50ZXh0Q29udGVudHx8dC5pbm5lclRleHR8fHModCkpLmluZGV4T2YoZSk+LTF9fSksZW5hYmxlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gdD09PVwiaW5wdXRcIiYmISFlLmNoZWNrZWR8fHQ9PT1cIm9wdGlvblwiJiYhIWUuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcmVudE5vZGUmJmUucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGUuc2VsZWN0ZWQ9PT0hMH0scGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiFpLnBzZXVkb3MuZW1wdHkoZSl9LGVtcHR5OmZ1bmN0aW9uKGUpe3ZhciB0O2U9ZS5maXJzdENoaWxkO3doaWxlKGUpe2lmKGUubm9kZU5hbWU+XCJAXCJ8fCh0PWUubm9kZVR5cGUpPT09M3x8dD09PTQpcmV0dXJuITE7ZT1lLm5leHRTaWJsaW5nfXJldHVybiEwfSxoZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIFgudGVzdChlLm5vZGVOYW1lKX0sdGV4dDpmdW5jdGlvbihlKXt2YXIgdCxuO3JldHVybiBlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1cImlucHV0XCImJih0PWUudHlwZSk9PT1cInRleHRcIiYmKChuPWUuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSk9PW51bGx8fG4udG9Mb3dlckNhc2UoKT09PXQpfSxyYWRpbzpydChcInJhZGlvXCIpLGNoZWNrYm94OnJ0KFwiY2hlY2tib3hcIiksZmlsZTpydChcImZpbGVcIikscGFzc3dvcmQ6cnQoXCJwYXNzd29yZFwiKSxpbWFnZTpydChcImltYWdlXCIpLHN1Ym1pdDppdChcInN1Ym1pdFwiKSxyZXNldDppdChcInJlc2V0XCIpLGJ1dHRvbjpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHQ9PT1cImlucHV0XCImJmUudHlwZT09PVwiYnV0dG9uXCJ8fHQ9PT1cImJ1dHRvblwifSxpbnB1dDpmdW5jdGlvbihlKXtyZXR1cm4gVi50ZXN0KGUubm9kZU5hbWUpfSxmb2N1czpmdW5jdGlvbihlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnQ7cmV0dXJuIGU9PT10LmFjdGl2ZUVsZW1lbnQmJighdC5oYXNGb2N1c3x8dC5oYXNGb2N1cygpKSYmISEoZS50eXBlfHxlLmhyZWZ8fH5lLnRhYkluZGV4KX0sYWN0aXZlOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09ZS5vd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnR9LGZpcnN0OnN0KGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksbGFzdDpzdChmdW5jdGlvbihlLHQpe3JldHVyblt0LTFdfSksZXE6c3QoZnVuY3Rpb24oZSx0LG4pe3JldHVybltuPDA/bit0Om5dfSksZXZlbjpzdChmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wO248dDtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLG9kZDpzdChmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0xO248dDtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLGx0OnN0KGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9bjwwP24rdDpuOy0tcj49MDspZS5wdXNoKHIpO3JldHVybiBlfSksZ3Q6c3QoZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1uPDA/bit0Om47KytyPHQ7KWUucHVzaChyKTtyZXR1cm4gZX0pfX0sZj15LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP2Z1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PyhsPSEwLDApOighZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbnx8IXQuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjplLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpJjQpPy0xOjF9OmZ1bmN0aW9uKGUsdCl7aWYoZT09PXQpcmV0dXJuIGw9ITAsMDtpZihlLnNvdXJjZUluZGV4JiZ0LnNvdXJjZUluZGV4KXJldHVybiBlLnNvdXJjZUluZGV4LXQuc291cmNlSW5kZXg7dmFyIG4scixpPVtdLHM9W10sbz1lLnBhcmVudE5vZGUsdT10LnBhcmVudE5vZGUsYT1vO2lmKG89PT11KXJldHVybiBvdChlLHQpO2lmKCFvKXJldHVybi0xO2lmKCF1KXJldHVybiAxO3doaWxlKGEpaS51bnNoaWZ0KGEpLGE9YS5wYXJlbnROb2RlO2E9dTt3aGlsZShhKXMudW5zaGlmdChhKSxhPWEucGFyZW50Tm9kZTtuPWkubGVuZ3RoLHI9cy5sZW5ndGg7Zm9yKHZhciBmPTA7ZjxuJiZmPHI7ZisrKWlmKGlbZl0hPT1zW2ZdKXJldHVybiBvdChpW2ZdLHNbZl0pO3JldHVybiBmPT09bj9vdChlLHNbZl0sLTEpOm90KGlbZl0sdCwxKX0sWzAsMF0uc29ydChmKSxoPSFsLG50LnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXSxyPTEsaT0wO2w9aCxlLnNvcnQoZik7aWYobCl7Zm9yKDt0PWVbcl07cisrKXQ9PT1lW3ItMV0mJihpPW4ucHVzaChyKSk7d2hpbGUoaS0tKWUuc3BsaWNlKG5baV0sMSl9cmV0dXJuIGV9LG50LmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiK2UpfSxhPW50LmNvbXBpbGU9ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9W10scz1BW2RdW2UrXCIgXCJdO2lmKCFzKXt0fHwodD11dChlKSksbj10Lmxlbmd0aDt3aGlsZShuLS0pcz1odCh0W25dKSxzW2RdP3IucHVzaChzKTppLnB1c2gocyk7cz1BKGUscHQoaSxyKSl9cmV0dXJuIHN9LGcucXVlcnlTZWxlY3RvckFsbCYmZnVuY3Rpb24oKXt2YXIgZSx0PXZ0LG49Lyd8XFxcXC9nLHI9L1xcPVtcXHgyMFxcdFxcclxcblxcZl0qKFteJ1wiXFxdXSopW1xceDIwXFx0XFxyXFxuXFxmXSpcXF0vZyxpPVtcIjpmb2N1c1wiXSxzPVtcIjphY3RpdmVcIl0sdT15Lm1hdGNoZXNTZWxlY3Rvcnx8eS5tb3pNYXRjaGVzU2VsZWN0b3J8fHkud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHx5Lm9NYXRjaGVzU2VsZWN0b3J8fHkubXNNYXRjaGVzU2VsZWN0b3I7SyhmdW5jdGlvbihlKXtlLmlubmVySFRNTD1cIjxzZWxlY3Q+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIixlLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aHx8aS5wdXNoKFwiXFxcXFtcIitPK1wiKig/OmNoZWNrZWR8ZGlzYWJsZWR8aXNtYXB8bXVsdGlwbGV8cmVhZG9ubHl8c2VsZWN0ZWR8dmFsdWUpXCIpLGUucXVlcnlTZWxlY3RvckFsbChcIjpjaGVja2VkXCIpLmxlbmd0aHx8aS5wdXNoKFwiOmNoZWNrZWRcIil9KSxLKGZ1bmN0aW9uKGUpe2UuaW5uZXJIVE1MPVwiPHAgdGVzdD0nJz48L3A+XCIsZS5xdWVyeVNlbGVjdG9yQWxsKFwiW3Rlc3RePScnXVwiKS5sZW5ndGgmJmkucHVzaChcIlsqXiRdPVwiK08rXCIqKD86XFxcIlxcXCJ8JycpXCIpLGUuaW5uZXJIVE1MPVwiPGlucHV0IHR5cGU9J2hpZGRlbicvPlwiLGUucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aHx8aS5wdXNoKFwiOmVuYWJsZWRcIixcIjpkaXNhYmxlZFwiKX0pLGk9bmV3IFJlZ0V4cChpLmpvaW4oXCJ8XCIpKSx2dD1mdW5jdGlvbihlLHIscyxvLHUpe2lmKCFvJiYhdSYmIWkudGVzdChlKSl7dmFyIGEsZixsPSEwLGM9ZCxoPXIscD1yLm5vZGVUeXBlPT09OSYmZTtpZihyLm5vZGVUeXBlPT09MSYmci5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09XCJvYmplY3RcIil7YT11dChlKSwobD1yLmdldEF0dHJpYnV0ZShcImlkXCIpKT9jPWwucmVwbGFjZShuLFwiXFxcXCQmXCIpOnIuc2V0QXR0cmlidXRlKFwiaWRcIixjKSxjPVwiW2lkPSdcIitjK1wiJ10gXCIsZj1hLmxlbmd0aDt3aGlsZShmLS0pYVtmXT1jK2FbZl0uam9pbihcIlwiKTtoPXoudGVzdChlKSYmci5wYXJlbnROb2RlfHxyLHA9YS5qb2luKFwiLFwiKX1pZihwKXRyeXtyZXR1cm4gUy5hcHBseShzLHguY2FsbChoLnF1ZXJ5U2VsZWN0b3JBbGwocCksMCkpLHN9Y2F0Y2godil7fWZpbmFsbHl7bHx8ci5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKX19cmV0dXJuIHQoZSxyLHMsbyx1KX0sdSYmKEsoZnVuY3Rpb24odCl7ZT11LmNhbGwodCxcImRpdlwiKTt0cnl7dS5jYWxsKHQsXCJbdGVzdCE9JyddOnNpenpsZVwiKSxzLnB1c2goXCIhPVwiLEgpfWNhdGNoKG4pe319KSxzPW5ldyBSZWdFeHAocy5qb2luKFwifFwiKSksbnQubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKHQsbil7bj1uLnJlcGxhY2UocixcIj0nJDEnXVwiKTtpZighbyh0KSYmIXMudGVzdChuKSYmIWkudGVzdChuKSl0cnl7dmFyIGE9dS5jYWxsKHQsbik7aWYoYXx8ZXx8dC5kb2N1bWVudCYmdC5kb2N1bWVudC5ub2RlVHlwZSE9PTExKXJldHVybiBhfWNhdGNoKGYpe31yZXR1cm4gbnQobixudWxsLG51bGwsW3RdKS5sZW5ndGg+MH0pfSgpLGkucHNldWRvcy5udGg9aS5wc2V1ZG9zLmVxLGkuZmlsdGVycz1tdC5wcm90b3R5cGU9aS5wc2V1ZG9zLGkuc2V0RmlsdGVycz1uZXcgbXQsbnQuYXR0cj12LmF0dHIsdi5maW5kPW50LHYuZXhwcj1udC5zZWxlY3RvcnMsdi5leHByW1wiOlwiXT12LmV4cHIucHNldWRvcyx2LnVuaXF1ZT1udC51bmlxdWVTb3J0LHYudGV4dD1udC5nZXRUZXh0LHYuaXNYTUxEb2M9bnQuaXNYTUwsdi5jb250YWlucz1udC5jb250YWluc30oZSk7dmFyIG50PS9VbnRpbCQvLHJ0PS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLGl0PS9eLlteOiNcXFtcXC4sXSokLyxzdD12LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LG90PXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O3YuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLHMsbyx1PXRoaXM7aWYodHlwZW9mIGUhPVwic3RyaW5nXCIpcmV0dXJuIHYoZSkuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHQ9MCxuPXUubGVuZ3RoO3Q8bjt0KyspaWYodi5jb250YWlucyh1W3RdLHRoaXMpKXJldHVybiEwfSk7bz10aGlzLnB1c2hTdGFjayhcIlwiLFwiZmluZFwiLGUpO2Zvcih0PTAsbj10aGlzLmxlbmd0aDt0PG47dCsrKXtyPW8ubGVuZ3RoLHYuZmluZChlLHRoaXNbdF0sbyk7aWYodD4wKWZvcihpPXI7aTxvLmxlbmd0aDtpKyspZm9yKHM9MDtzPHI7cysrKWlmKG9bc109PT1vW2ldKXtvLnNwbGljZShpLS0sMSk7YnJlYWt9fXJldHVybiBvfSxoYXM6ZnVuY3Rpb24oZSl7dmFyIHQsbj12KGUsdGhpcykscj1uLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodD0wO3Q8cjt0KyspaWYodi5jb250YWlucyh0aGlzLG5bdF0pKXJldHVybiEwfSl9LG5vdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZnQodGhpcyxlLCExKSxcIm5vdFwiLGUpfSxmaWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGZ0KHRoaXMsZSwhMCksXCJmaWx0ZXJcIixlKX0saXM6ZnVuY3Rpb24oZSl7cmV0dXJuISFlJiYodHlwZW9mIGU9PVwic3RyaW5nXCI/c3QudGVzdChlKT92KGUsdGhpcy5jb250ZXh0KS5pbmRleCh0aGlzWzBdKT49MDp2LmZpbHRlcihlLHRoaXMpLmxlbmd0aD4wOnRoaXMuZmlsdGVyKGUpLmxlbmd0aD4wKX0sY2xvc2VzdDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MCxpPXRoaXMubGVuZ3RoLHM9W10sbz1zdC50ZXN0KGUpfHx0eXBlb2YgZSE9XCJzdHJpbmdcIj92KGUsdHx8dGhpcy5jb250ZXh0KTowO2Zvcig7cjxpO3IrKyl7bj10aGlzW3JdO3doaWxlKG4mJm4ub3duZXJEb2N1bWVudCYmbiE9PXQmJm4ubm9kZVR5cGUhPT0xMSl7aWYobz9vLmluZGV4KG4pPi0xOnYuZmluZC5tYXRjaGVzU2VsZWN0b3IobixlKSl7cy5wdXNoKG4pO2JyZWFrfW49bi5wYXJlbnROb2RlfX1yZXR1cm4gcz1zLmxlbmd0aD4xP3YudW5pcXVlKHMpOnMsdGhpcy5wdXNoU3RhY2socyxcImNsb3Nlc3RcIixlKX0saW5kZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dHlwZW9mIGU9PVwic3RyaW5nXCI/di5pbkFycmF5KHRoaXNbMF0sdihlKSk6di5pbkFycmF5KGUuanF1ZXJ5P2VbMF06ZSx0aGlzKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10eXBlb2YgZT09XCJzdHJpbmdcIj92KGUsdCk6di5tYWtlQXJyYXkoZSYmZS5ub2RlVHlwZT9bZV06ZSkscj12Lm1lcmdlKHRoaXMuZ2V0KCksbik7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHV0KG5bMF0pfHx1dChyWzBdKT9yOnYudW5pcXVlKHIpKX0sYWRkQmFjazpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hZGQoZT09bnVsbD90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihlKSl9fSksdi5mbi5hbmRTZWxmPXYuZm4uYWRkQmFjayx2LmVhY2goe3BhcmVudDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJnQubm9kZVR5cGUhPT0xMT90Om51bGx9LHBhcmVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIHYuZGlyKGUsXCJwYXJlbnROb2RlXCIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2LmRpcihlLFwicGFyZW50Tm9kZVwiLG4pfSxuZXh0OmZ1bmN0aW9uKGUpe3JldHVybiBhdChlLFwibmV4dFNpYmxpbmdcIil9LHByZXY6ZnVuY3Rpb24oZSl7cmV0dXJuIGF0KGUsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIHYuZGlyKGUsXCJuZXh0U2libGluZ1wiKX0scHJldkFsbDpmdW5jdGlvbihlKXtyZXR1cm4gdi5kaXIoZSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdi5kaXIoZSxcIm5leHRTaWJsaW5nXCIsbil9LHByZXZVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHYuZGlyKGUsXCJwcmV2aW91c1NpYmxpbmdcIixuKX0sc2libGluZ3M6ZnVuY3Rpb24oZSl7cmV0dXJuIHYuc2libGluZygoZS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxlKX0sY2hpbGRyZW46ZnVuY3Rpb24oZSl7cmV0dXJuIHYuc2libGluZyhlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4gdi5ub2RlTmFtZShlLFwiaWZyYW1lXCIpP2UuY29udGVudERvY3VtZW50fHxlLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ6di5tZXJnZShbXSxlLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oZSx0KXt2LmZuW2VdPWZ1bmN0aW9uKG4scil7dmFyIGk9di5tYXAodGhpcyx0LG4pO3JldHVybiBudC50ZXN0KGUpfHwocj1uKSxyJiZ0eXBlb2Ygcj09XCJzdHJpbmdcIiYmKGk9di5maWx0ZXIocixpKSksaT10aGlzLmxlbmd0aD4xJiYhb3RbZV0/di51bmlxdWUoaSk6aSx0aGlzLmxlbmd0aD4xJiZydC50ZXN0KGUpJiYoaT1pLnJldmVyc2UoKSksdGhpcy5wdXNoU3RhY2soaSxlLGwuY2FsbChhcmd1bWVudHMpLmpvaW4oXCIsXCIpKX19KSx2LmV4dGVuZCh7ZmlsdGVyOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbiYmKGU9XCI6bm90KFwiK2UrXCIpXCIpLHQubGVuZ3RoPT09MT92LmZpbmQubWF0Y2hlc1NlbGVjdG9yKHRbMF0sZSk/W3RbMF1dOltdOnYuZmluZC5tYXRjaGVzKGUsdCl9LGRpcjpmdW5jdGlvbihlLG4scil7dmFyIGk9W10scz1lW25dO3doaWxlKHMmJnMubm9kZVR5cGUhPT05JiYocj09PXR8fHMubm9kZVR5cGUhPT0xfHwhdihzKS5pcyhyKSkpcy5ub2RlVHlwZT09PTEmJmkucHVzaChzKSxzPXNbbl07cmV0dXJuIGl9LHNpYmxpbmc6ZnVuY3Rpb24oZSx0KXt2YXIgbj1bXTtmb3IoO2U7ZT1lLm5leHRTaWJsaW5nKWUubm9kZVR5cGU9PT0xJiZlIT09dCYmbi5wdXNoKGUpO3JldHVybiBufX0pO3ZhciBjdD1cImFiYnJ8YXJ0aWNsZXxhc2lkZXxhdWRpb3xiZGl8Y2FudmFzfGRhdGF8ZGF0YWxpc3R8ZGV0YWlsc3xmaWdjYXB0aW9ufGZpZ3VyZXxmb290ZXJ8aGVhZGVyfGhncm91cHxtYXJrfG1ldGVyfG5hdnxvdXRwdXR8cHJvZ3Jlc3N8c2VjdGlvbnxzdW1tYXJ5fHRpbWV8dmlkZW9cIixodD0vIGpRdWVyeVxcZCs9XCIoPzpudWxsfFxcZCspXCIvZyxwdD0vXlxccysvLGR0PS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6XSspW14+XSopXFwvPi9naSx2dD0vPChbXFx3Ol0rKS8sbXQ9Lzx0Ym9keS9pLGd0PS88fCYjP1xcdys7Lyx5dD0vPCg/OnNjcmlwdHxzdHlsZXxsaW5rKS9pLGJ0PS88KD86c2NyaXB0fG9iamVjdHxlbWJlZHxvcHRpb258c3R5bGUpL2ksd3Q9bmV3IFJlZ0V4cChcIjwoPzpcIitjdCtcIilbXFxcXHMvPl1cIixcImlcIiksRXQ9L14oPzpjaGVja2JveHxyYWRpbykkLyxTdD0vY2hlY2tlZFxccyooPzpbXj1dfD1cXHMqLmNoZWNrZWQuKS9pLHh0PS9cXC8oamF2YXxlY21hKXNjcmlwdC9pLFR0PS9eXFxzKjwhKD86XFxbQ0RBVEFcXFt8XFwtXFwtKXxbXFxdXFwtXXsyfT5cXHMqJC9nLE50PXtvcHRpb246WzEsXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsXCI8L3NlbGVjdD5cIl0sbGVnZW5kOlsxLFwiPGZpZWxkc2V0PlwiLFwiPC9maWVsZHNldD5cIl0sdGhlYWQ6WzEsXCI8dGFibGU+XCIsXCI8L3RhYmxlPlwiXSx0cjpbMixcIjx0YWJsZT48dGJvZHk+XCIsXCI8L3Rib2R5PjwvdGFibGU+XCJdLHRkOlszLFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsXCI8L3RyPjwvdGJvZHk+PC90YWJsZT5cIl0sY29sOlsyLFwiPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD5cIixcIjwvY29sZ3JvdXA+PC90YWJsZT5cIl0sYXJlYTpbMSxcIjxtYXA+XCIsXCI8L21hcD5cIl0sX2RlZmF1bHQ6WzAsXCJcIixcIlwiXX0sQ3Q9bHQoaSksa3Q9Q3QuYXBwZW5kQ2hpbGQoaS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtOdC5vcHRncm91cD1OdC5vcHRpb24sTnQudGJvZHk9TnQudGZvb3Q9TnQuY29sZ3JvdXA9TnQuY2FwdGlvbj1OdC50aGVhZCxOdC50aD1OdC50ZCx2LnN1cHBvcnQuaHRtbFNlcmlhbGl6ZXx8KE50Ll9kZWZhdWx0PVsxLFwiWDxkaXY+XCIsXCI8L2Rpdj5cIl0pLHYuZm4uZXh0ZW5kKHt0ZXh0OmZ1bmN0aW9uKGUpe3JldHVybiB2LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD92LnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHxpKS5jcmVhdGVUZXh0Tm9kZShlKSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0sd3JhcEFsbDpmdW5jdGlvbihlKXtpZih2LmlzRnVuY3Rpb24oZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXt2KHRoaXMpLndyYXBBbGwoZS5jYWxsKHRoaXMsdCkpfSk7aWYodGhpc1swXSl7dmFyIHQ9dihlLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApO3RoaXNbMF0ucGFyZW50Tm9kZSYmdC5pbnNlcnRCZWZvcmUodGhpc1swXSksdC5tYXAoZnVuY3Rpb24oKXt2YXIgZT10aGlzO3doaWxlKGUuZmlyc3RDaGlsZCYmZS5maXJzdENoaWxkLm5vZGVUeXBlPT09MSllPWUuZmlyc3RDaGlsZDtyZXR1cm4gZX0pLmFwcGVuZCh0aGlzKX1yZXR1cm4gdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKGUpe3JldHVybiB2LmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3YodGhpcykud3JhcElubmVyKGUuY2FsbCh0aGlzLHQpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PXYodGhpcyksbj10LmNvbnRlbnRzKCk7bi5sZW5ndGg/bi53cmFwQWxsKGUpOnQuYXBwZW5kKGUpfSl9LHdyYXA6ZnVuY3Rpb24oZSl7dmFyIHQ9di5pc0Z1bmN0aW9uKGUpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24obil7dih0aGlzKS53cmFwQWxsKHQ/ZS5jYWxsKHRoaXMsbik6ZSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe3Yubm9kZU5hbWUodGhpcyxcImJvZHlcIil8fHYodGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsITAsZnVuY3Rpb24oZSl7KHRoaXMubm9kZVR5cGU9PT0xfHx0aGlzLm5vZGVUeXBlPT09MTEpJiZ0aGlzLmFwcGVuZENoaWxkKGUpfSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsITAsZnVuY3Rpb24oZSl7KHRoaXMubm9kZVR5cGU9PT0xfHx0aGlzLm5vZGVUeXBlPT09MTEpJiZ0aGlzLmluc2VydEJlZm9yZShlLHRoaXMuZmlyc3RDaGlsZCl9KX0sYmVmb3JlOmZ1bmN0aW9uKCl7aWYoIXV0KHRoaXNbMF0pKXJldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywhMSxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcyl9KTtpZihhcmd1bWVudHMubGVuZ3RoKXt2YXIgZT12LmNsZWFuKGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHYubWVyZ2UoZSx0aGlzKSxcImJlZm9yZVwiLHRoaXMuc2VsZWN0b3IpfX0sYWZ0ZXI6ZnVuY3Rpb24oKXtpZighdXQodGhpc1swXSkpcmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLCExLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzLm5leHRTaWJsaW5nKX0pO2lmKGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPXYuY2xlYW4oYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2sodi5tZXJnZSh0aGlzLGUpLFwiYWZ0ZXJcIix0aGlzLnNlbGVjdG9yKX19LHJlbW92ZTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MDtmb3IoOyhuPXRoaXNbcl0pIT1udWxsO3IrKylpZighZXx8di5maWx0ZXIoZSxbbl0pLmxlbmd0aCkhdCYmbi5ub2RlVHlwZT09PTEmJih2LmNsZWFuRGF0YShuLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSksdi5jbGVhbkRhdGEoW25dKSksbi5wYXJlbnROb2RlJiZuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobik7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7dmFyIGUsdD0wO2Zvcig7KGU9dGhpc1t0XSkhPW51bGw7dCsrKXtlLm5vZGVUeXBlPT09MSYmdi5jbGVhbkRhdGEoZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikpO3doaWxlKGUuZmlyc3RDaGlsZCllLnJlbW92ZUNoaWxkKGUuZmlyc3RDaGlsZCl9cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9ZT09bnVsbD8hMTplLHQ9dD09bnVsbD9lOnQsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gdi5jbG9uZSh0aGlzLGUsdCl9KX0saHRtbDpmdW5jdGlvbihlKXtyZXR1cm4gdi5hY2Nlc3ModGhpcyxmdW5jdGlvbihlKXt2YXIgbj10aGlzWzBdfHx7fSxyPTAsaT10aGlzLmxlbmd0aDtpZihlPT09dClyZXR1cm4gbi5ub2RlVHlwZT09PTE/bi5pbm5lckhUTUwucmVwbGFjZShodCxcIlwiKTp0O2lmKHR5cGVvZiBlPT1cInN0cmluZ1wiJiYheXQudGVzdChlKSYmKHYuc3VwcG9ydC5odG1sU2VyaWFsaXplfHwhd3QudGVzdChlKSkmJih2LnN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2V8fCFwdC50ZXN0KGUpKSYmIU50Wyh2dC5leGVjKGUpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2U9ZS5yZXBsYWNlKGR0LFwiPCQxPjwvJDI+XCIpO3RyeXtmb3IoO3I8aTtyKyspbj10aGlzW3JdfHx7fSxuLm5vZGVUeXBlPT09MSYmKHYuY2xlYW5EYXRhKG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpKSxuLmlubmVySFRNTD1lKTtuPTB9Y2F0Y2gocyl7fX1uJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGUpfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKGUpe3JldHVybiB1dCh0aGlzWzBdKT90aGlzLmxlbmd0aD90aGlzLnB1c2hTdGFjayh2KHYuaXNGdW5jdGlvbihlKT9lKCk6ZSksXCJyZXBsYWNlV2l0aFwiLGUpOnRoaXM6di5pc0Z1bmN0aW9uKGUpP3RoaXMuZWFjaChmdW5jdGlvbih0KXt2YXIgbj12KHRoaXMpLHI9bi5odG1sKCk7bi5yZXBsYWNlV2l0aChlLmNhbGwodGhpcyx0LHIpKX0pOih0eXBlb2YgZSE9XCJzdHJpbmdcIiYmKGU9dihlKS5kZXRhY2goKSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5uZXh0U2libGluZyxuPXRoaXMucGFyZW50Tm9kZTt2KHRoaXMpLnJlbW92ZSgpLHQ/dih0KS5iZWZvcmUoZSk6dihuKS5hcHBlbmQoZSl9KSl9LGRldGFjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZW1vdmUoZSwhMCl9LGRvbU1hbmlwOmZ1bmN0aW9uKGUsbixyKXtlPVtdLmNvbmNhdC5hcHBseShbXSxlKTt2YXIgaSxzLG8sdSxhPTAsZj1lWzBdLGw9W10sYz10aGlzLmxlbmd0aDtpZighdi5zdXBwb3J0LmNoZWNrQ2xvbmUmJmM+MSYmdHlwZW9mIGY9PVwic3RyaW5nXCImJlN0LnRlc3QoZikpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3YodGhpcykuZG9tTWFuaXAoZSxuLHIpfSk7aWYodi5pc0Z1bmN0aW9uKGYpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSl7dmFyIHM9dih0aGlzKTtlWzBdPWYuY2FsbCh0aGlzLGksbj9zLmh0bWwoKTp0KSxzLmRvbU1hbmlwKGUsbixyKX0pO2lmKHRoaXNbMF0pe2k9di5idWlsZEZyYWdtZW50KGUsdGhpcyxsKSxvPWkuZnJhZ21lbnQscz1vLmZpcnN0Q2hpbGQsby5jaGlsZE5vZGVzLmxlbmd0aD09PTEmJihvPXMpO2lmKHMpe249biYmdi5ub2RlTmFtZShzLFwidHJcIik7Zm9yKHU9aS5jYWNoZWFibGV8fGMtMTthPGM7YSsrKXIuY2FsbChuJiZ2Lm5vZGVOYW1lKHRoaXNbYV0sXCJ0YWJsZVwiKT9MdCh0aGlzW2FdLFwidGJvZHlcIik6dGhpc1thXSxhPT09dT9vOnYuY2xvbmUobywhMCwhMCkpfW89cz1udWxsLGwubGVuZ3RoJiZ2LmVhY2gobCxmdW5jdGlvbihlLHQpe3Quc3JjP3YuYWpheD92LmFqYXgoe3VybDp0LnNyYyx0eXBlOlwiR0VUXCIsZGF0YVR5cGU6XCJzY3JpcHRcIixhc3luYzohMSxnbG9iYWw6ITEsXCJ0aHJvd3NcIjohMH0pOnYuZXJyb3IoXCJubyBhamF4XCIpOnYuZ2xvYmFsRXZhbCgodC50ZXh0fHx0LnRleHRDb250ZW50fHx0LmlubmVySFRNTHx8XCJcIikucmVwbGFjZShUdCxcIlwiKSksdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCl9KX1yZXR1cm4gdGhpc319KSx2LmJ1aWxkRnJhZ21lbnQ9ZnVuY3Rpb24oZSxuLHIpe3ZhciBzLG8sdSxhPWVbMF07cmV0dXJuIG49bnx8aSxuPSFuLm5vZGVUeXBlJiZuWzBdfHxuLG49bi5vd25lckRvY3VtZW50fHxuLGUubGVuZ3RoPT09MSYmdHlwZW9mIGE9PVwic3RyaW5nXCImJmEubGVuZ3RoPDUxMiYmbj09PWkmJmEuY2hhckF0KDApPT09XCI8XCImJiFidC50ZXN0KGEpJiYodi5zdXBwb3J0LmNoZWNrQ2xvbmV8fCFTdC50ZXN0KGEpKSYmKHYuc3VwcG9ydC5odG1sNUNsb25lfHwhd3QudGVzdChhKSkmJihvPSEwLHM9di5mcmFnbWVudHNbYV0sdT1zIT09dCksc3x8KHM9bi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksdi5jbGVhbihlLG4scyxyKSxvJiYodi5mcmFnbWVudHNbYV09dSYmcykpLHtmcmFnbWVudDpzLGNhY2hlYWJsZTpvfX0sdi5mcmFnbWVudHM9e30sdi5lYWNoKHthcHBlbmRUbzpcImFwcGVuZFwiLHByZXBlbmRUbzpcInByZXBlbmRcIixpbnNlcnRCZWZvcmU6XCJiZWZvcmVcIixpbnNlcnRBZnRlcjpcImFmdGVyXCIscmVwbGFjZUFsbDpcInJlcGxhY2VXaXRoXCJ9LGZ1bmN0aW9uKGUsdCl7di5mbltlXT1mdW5jdGlvbihuKXt2YXIgcixpPTAscz1bXSxvPXYobiksdT1vLmxlbmd0aCxhPXRoaXMubGVuZ3RoPT09MSYmdGhpc1swXS5wYXJlbnROb2RlO2lmKChhPT1udWxsfHxhJiZhLm5vZGVUeXBlPT09MTEmJmEuY2hpbGROb2Rlcy5sZW5ndGg9PT0xKSYmdT09PTEpcmV0dXJuIG9bdF0odGhpc1swXSksdGhpcztmb3IoO2k8dTtpKyspcj0oaT4wP3RoaXMuY2xvbmUoITApOnRoaXMpLmdldCgpLHYob1tpXSlbdF0ocikscz1zLmNvbmNhdChyKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2socyxlLG8uc2VsZWN0b3IpfX0pLHYuZXh0ZW5kKHtjbG9uZTpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxzLG87di5zdXBwb3J0Lmh0bWw1Q2xvbmV8fHYuaXNYTUxEb2MoZSl8fCF3dC50ZXN0KFwiPFwiK2Uubm9kZU5hbWUrXCI+XCIpP289ZS5jbG9uZU5vZGUoITApOihrdC5pbm5lckhUTUw9ZS5vdXRlckhUTUwsa3QucmVtb3ZlQ2hpbGQobz1rdC5maXJzdENoaWxkKSk7aWYoKCF2LnN1cHBvcnQubm9DbG9uZUV2ZW50fHwhdi5zdXBwb3J0Lm5vQ2xvbmVDaGVja2VkKSYmKGUubm9kZVR5cGU9PT0xfHxlLm5vZGVUeXBlPT09MTEpJiYhdi5pc1hNTERvYyhlKSl7T3QoZSxvKSxyPU10KGUpLGk9TXQobyk7Zm9yKHM9MDtyW3NdOysrcylpW3NdJiZPdChyW3NdLGlbc10pfWlmKHQpe0F0KGUsbyk7aWYobil7cj1NdChlKSxpPU10KG8pO2ZvcihzPTA7cltzXTsrK3MpQXQocltzXSxpW3NdKX19cmV0dXJuIHI9aT1udWxsLG99LGNsZWFuOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBzLG8sdSxhLGYsbCxjLGgscCxkLG0sZyx5PXQ9PT1pJiZDdCxiPVtdO2lmKCF0fHx0eXBlb2YgdC5jcmVhdGVEb2N1bWVudEZyYWdtZW50PT1cInVuZGVmaW5lZFwiKXQ9aTtmb3Iocz0wOyh1PWVbc10pIT1udWxsO3MrKyl7dHlwZW9mIHU9PVwibnVtYmVyXCImJih1Kz1cIlwiKTtpZighdSljb250aW51ZTtpZih0eXBlb2YgdT09XCJzdHJpbmdcIilpZighZ3QudGVzdCh1KSl1PXQuY3JlYXRlVGV4dE5vZGUodSk7ZWxzZXt5PXl8fGx0KHQpLGM9dC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHkuYXBwZW5kQ2hpbGQoYyksdT11LnJlcGxhY2UoZHQsXCI8JDE+PC8kMj5cIiksYT0odnQuZXhlYyh1KXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCksZj1OdFthXXx8TnQuX2RlZmF1bHQsbD1mWzBdLGMuaW5uZXJIVE1MPWZbMV0rdStmWzJdO3doaWxlKGwtLSljPWMubGFzdENoaWxkO2lmKCF2LnN1cHBvcnQudGJvZHkpe2g9bXQudGVzdCh1KSxwPWE9PT1cInRhYmxlXCImJiFoP2MuZmlyc3RDaGlsZCYmYy5maXJzdENoaWxkLmNoaWxkTm9kZXM6ZlsxXT09PVwiPHRhYmxlPlwiJiYhaD9jLmNoaWxkTm9kZXM6W107Zm9yKG89cC5sZW5ndGgtMTtvPj0wOy0tbyl2Lm5vZGVOYW1lKHBbb10sXCJ0Ym9keVwiKSYmIXBbb10uY2hpbGROb2Rlcy5sZW5ndGgmJnBbb10ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwW29dKX0hdi5zdXBwb3J0LmxlYWRpbmdXaGl0ZXNwYWNlJiZwdC50ZXN0KHUpJiZjLmluc2VydEJlZm9yZSh0LmNyZWF0ZVRleHROb2RlKHB0LmV4ZWModSlbMF0pLGMuZmlyc3RDaGlsZCksdT1jLmNoaWxkTm9kZXMsYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpfXUubm9kZVR5cGU/Yi5wdXNoKHUpOnYubWVyZ2UoYix1KX1jJiYodT1jPXk9bnVsbCk7aWYoIXYuc3VwcG9ydC5hcHBlbmRDaGVja2VkKWZvcihzPTA7KHU9YltzXSkhPW51bGw7cysrKXYubm9kZU5hbWUodSxcImlucHV0XCIpP190KHUpOnR5cGVvZiB1LmdldEVsZW1lbnRzQnlUYWdOYW1lIT1cInVuZGVmaW5lZFwiJiZ2LmdyZXAodS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpLF90KTtpZihuKXttPWZ1bmN0aW9uKGUpe2lmKCFlLnR5cGV8fHh0LnRlc3QoZS50eXBlKSlyZXR1cm4gcj9yLnB1c2goZS5wYXJlbnROb2RlP2UucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKTplKTpuLmFwcGVuZENoaWxkKGUpfTtmb3Iocz0wOyh1PWJbc10pIT1udWxsO3MrKylpZighdi5ub2RlTmFtZSh1LFwic2NyaXB0XCIpfHwhbSh1KSluLmFwcGVuZENoaWxkKHUpLHR5cGVvZiB1LmdldEVsZW1lbnRzQnlUYWdOYW1lIT1cInVuZGVmaW5lZFwiJiYoZz12LmdyZXAodi5tZXJnZShbXSx1LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpKSxtKSxiLnNwbGljZS5hcHBseShiLFtzKzEsMF0uY29uY2F0KGcpKSxzKz1nLmxlbmd0aCl9cmV0dXJuIGJ9LGNsZWFuRGF0YTpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxzLG89MCx1PXYuZXhwYW5kbyxhPXYuY2FjaGUsZj12LnN1cHBvcnQuZGVsZXRlRXhwYW5kbyxsPXYuZXZlbnQuc3BlY2lhbDtmb3IoOyhpPWVbb10pIT1udWxsO28rKylpZih0fHx2LmFjY2VwdERhdGEoaSkpe3I9aVt1XSxuPXImJmFbcl07aWYobil7aWYobi5ldmVudHMpZm9yKHMgaW4gbi5ldmVudHMpbFtzXT92LmV2ZW50LnJlbW92ZShpLHMpOnYucmVtb3ZlRXZlbnQoaSxzLG4uaGFuZGxlKTthW3JdJiYoZGVsZXRlIGFbcl0sZj9kZWxldGUgaVt1XTppLnJlbW92ZUF0dHJpYnV0ZT9pLnJlbW92ZUF0dHJpYnV0ZSh1KTppW3VdPW51bGwsdi5kZWxldGVkSWRzLnB1c2gocikpfX19fSksZnVuY3Rpb24oKXt2YXIgZSx0O3YudWFNYXRjaD1mdW5jdGlvbihlKXtlPWUudG9Mb3dlckNhc2UoKTt2YXIgdD0vKGNocm9tZSlbIFxcL10oW1xcdy5dKykvLmV4ZWMoZSl8fC8od2Via2l0KVsgXFwvXShbXFx3Ll0rKS8uZXhlYyhlKXx8LyhvcGVyYSkoPzouKnZlcnNpb258KVsgXFwvXShbXFx3Ll0rKS8uZXhlYyhlKXx8Lyhtc2llKSAoW1xcdy5dKykvLmV4ZWMoZSl8fGUuaW5kZXhPZihcImNvbXBhdGlibGVcIik8MCYmLyhtb3ppbGxhKSg/Oi4qPyBydjooW1xcdy5dKyl8KS8uZXhlYyhlKXx8W107cmV0dXJue2Jyb3dzZXI6dFsxXXx8XCJcIix2ZXJzaW9uOnRbMl18fFwiMFwifX0sZT12LnVhTWF0Y2goby51c2VyQWdlbnQpLHQ9e30sZS5icm93c2VyJiYodFtlLmJyb3dzZXJdPSEwLHQudmVyc2lvbj1lLnZlcnNpb24pLHQuY2hyb21lP3Qud2Via2l0PSEwOnQud2Via2l0JiYodC5zYWZhcmk9ITApLHYuYnJvd3Nlcj10LHYuc3ViPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LG4pe3JldHVybiBuZXcgZS5mbi5pbml0KHQsbil9di5leHRlbmQoITAsZSx0aGlzKSxlLnN1cGVyY2xhc3M9dGhpcyxlLmZuPWUucHJvdG90eXBlPXRoaXMoKSxlLmZuLmNvbnN0cnVjdG9yPWUsZS5zdWI9dGhpcy5zdWIsZS5mbi5pbml0PWZ1bmN0aW9uKHIsaSl7cmV0dXJuIGkmJmkgaW5zdGFuY2VvZiB2JiYhKGkgaW5zdGFuY2VvZiBlKSYmKGk9ZShpKSksdi5mbi5pbml0LmNhbGwodGhpcyxyLGksdCl9LGUuZm4uaW5pdC5wcm90b3R5cGU9ZS5mbjt2YXIgdD1lKGkpO3JldHVybiBlfX0oKTt2YXIgRHQsUHQsSHQsQnQ9L2FscGhhXFwoW14pXSpcXCkvaSxqdD0vb3BhY2l0eT0oW14pXSopLyxGdD0vXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC8sSXQ9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLHF0PS9ebWFyZ2luLyxSdD1uZXcgUmVnRXhwKFwiXihcIittK1wiKSguKikkXCIsXCJpXCIpLFV0PW5ldyBSZWdFeHAoXCJeKFwiK20rXCIpKD8hcHgpW2EteiVdKyRcIixcImlcIiksenQ9bmV3IFJlZ0V4cChcIl4oWy0rXSk9KFwiK20rXCIpXCIsXCJpXCIpLFd0PXtCT0RZOlwiYmxvY2tcIn0sWHQ9e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix2aXNpYmlsaXR5OlwiaGlkZGVuXCIsZGlzcGxheTpcImJsb2NrXCJ9LFZ0PXtsZXR0ZXJTcGFjaW5nOjAsZm9udFdlaWdodDo0MDB9LCR0PVtcIlRvcFwiLFwiUmlnaHRcIixcIkJvdHRvbVwiLFwiTGVmdFwiXSxKdD1bXCJXZWJraXRcIixcIk9cIixcIk1velwiLFwibXNcIl0sS3Q9di5mbi50b2dnbGU7di5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihlLG4pe3JldHVybiB2LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gciE9PXQ/di5zdHlsZShlLG4scik6di5jc3MoZSxuKX0sZSxuLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gWXQodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gWXQodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihlLHQpe3ZhciBuPXR5cGVvZiBlPT1cImJvb2xlYW5cIjtyZXR1cm4gdi5pc0Z1bmN0aW9uKGUpJiZ2LmlzRnVuY3Rpb24odCk/S3QuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuZWFjaChmdW5jdGlvbigpeyhuP2U6R3QodGhpcykpP3YodGhpcykuc2hvdygpOnYodGhpcykuaGlkZSgpfSl9fSksdi5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oZSx0KXtpZih0KXt2YXIgbj1EdChlLFwib3BhY2l0eVwiKTtyZXR1cm4gbj09PVwiXCI/XCIxXCI6bn19fX0sY3NzTnVtYmVyOntmaWxsT3BhY2l0eTohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e1wiZmxvYXRcIjp2LnN1cHBvcnQuY3NzRmxvYXQ/XCJjc3NGbG9hdFwiOlwic3R5bGVGbG9hdFwifSxzdHlsZTpmdW5jdGlvbihlLG4scixpKXtpZighZXx8ZS5ub2RlVHlwZT09PTN8fGUubm9kZVR5cGU9PT04fHwhZS5zdHlsZSlyZXR1cm47dmFyIHMsbyx1LGE9di5jYW1lbENhc2UobiksZj1lLnN0eWxlO249di5jc3NQcm9wc1thXXx8KHYuY3NzUHJvcHNbYV09UXQoZixhKSksdT12LmNzc0hvb2tzW25dfHx2LmNzc0hvb2tzW2FdO2lmKHI9PT10KXJldHVybiB1JiZcImdldFwiaW4gdSYmKHM9dS5nZXQoZSwhMSxpKSkhPT10P3M6ZltuXTtvPXR5cGVvZiByLG89PT1cInN0cmluZ1wiJiYocz16dC5leGVjKHIpKSYmKHI9KHNbMV0rMSkqc1syXStwYXJzZUZsb2F0KHYuY3NzKGUsbikpLG89XCJudW1iZXJcIik7aWYocj09bnVsbHx8bz09PVwibnVtYmVyXCImJmlzTmFOKHIpKXJldHVybjtvPT09XCJudW1iZXJcIiYmIXYuY3NzTnVtYmVyW2FdJiYocis9XCJweFwiKTtpZighdXx8IShcInNldFwiaW4gdSl8fChyPXUuc2V0KGUscixpKSkhPT10KXRyeXtmW25dPXJ9Y2F0Y2gobCl7fX0sY3NzOmZ1bmN0aW9uKGUsbixyLGkpe3ZhciBzLG8sdSxhPXYuY2FtZWxDYXNlKG4pO3JldHVybiBuPXYuY3NzUHJvcHNbYV18fCh2LmNzc1Byb3BzW2FdPVF0KGUuc3R5bGUsYSkpLHU9di5jc3NIb29rc1tuXXx8di5jc3NIb29rc1thXSx1JiZcImdldFwiaW4gdSYmKHM9dS5nZXQoZSwhMCxpKSkscz09PXQmJihzPUR0KGUsbikpLHM9PT1cIm5vcm1hbFwiJiZuIGluIFZ0JiYocz1WdFtuXSkscnx8aSE9PXQ/KG89cGFyc2VGbG9hdChzKSxyfHx2LmlzTnVtZXJpYyhvKT9vfHwwOnMpOnN9LHN3YXA6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGkscz17fTtmb3IoaSBpbiB0KXNbaV09ZS5zdHlsZVtpXSxlLnN0eWxlW2ldPXRbaV07cj1uLmNhbGwoZSk7Zm9yKGkgaW4gdCllLnN0eWxlW2ldPXNbaV07cmV0dXJuIHJ9fSksZS5nZXRDb21wdXRlZFN0eWxlP0R0PWZ1bmN0aW9uKHQsbil7dmFyIHIsaSxzLG8sdT1lLmdldENvbXB1dGVkU3R5bGUodCxudWxsKSxhPXQuc3R5bGU7cmV0dXJuIHUmJihyPXUuZ2V0UHJvcGVydHlWYWx1ZShuKXx8dVtuXSxyPT09XCJcIiYmIXYuY29udGFpbnModC5vd25lckRvY3VtZW50LHQpJiYocj12LnN0eWxlKHQsbikpLFV0LnRlc3QocikmJnF0LnRlc3QobikmJihpPWEud2lkdGgscz1hLm1pbldpZHRoLG89YS5tYXhXaWR0aCxhLm1pbldpZHRoPWEubWF4V2lkdGg9YS53aWR0aD1yLHI9dS53aWR0aCxhLndpZHRoPWksYS5taW5XaWR0aD1zLGEubWF4V2lkdGg9bykpLHJ9OmkuZG9jdW1lbnRFbGVtZW50LmN1cnJlbnRTdHlsZSYmKER0PWZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPWUuY3VycmVudFN0eWxlJiZlLmN1cnJlbnRTdHlsZVt0XSxzPWUuc3R5bGU7cmV0dXJuIGk9PW51bGwmJnMmJnNbdF0mJihpPXNbdF0pLFV0LnRlc3QoaSkmJiFGdC50ZXN0KHQpJiYobj1zLmxlZnQscj1lLnJ1bnRpbWVTdHlsZSYmZS5ydW50aW1lU3R5bGUubGVmdCxyJiYoZS5ydW50aW1lU3R5bGUubGVmdD1lLmN1cnJlbnRTdHlsZS5sZWZ0KSxzLmxlZnQ9dD09PVwiZm9udFNpemVcIj9cIjFlbVwiOmksaT1zLnBpeGVsTGVmdCtcInB4XCIscy5sZWZ0PW4sciYmKGUucnVudGltZVN0eWxlLmxlZnQ9cikpLGk9PT1cIlwiP1wiYXV0b1wiOml9KSx2LmVhY2goW1wiaGVpZ2h0XCIsXCJ3aWR0aFwiXSxmdW5jdGlvbihlLHQpe3YuY3NzSG9va3NbdF09e2dldDpmdW5jdGlvbihlLG4scil7aWYobilyZXR1cm4gZS5vZmZzZXRXaWR0aD09PTAmJkl0LnRlc3QoRHQoZSxcImRpc3BsYXlcIikpP3Yuc3dhcChlLFh0LGZ1bmN0aW9uKCl7cmV0dXJuIHRuKGUsdCxyKX0pOnRuKGUsdCxyKX0sc2V0OmZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gWnQoZSxuLHI/ZW4oZSx0LHIsdi5zdXBwb3J0LmJveFNpemluZyYmdi5jc3MoZSxcImJveFNpemluZ1wiKT09PVwiYm9yZGVyLWJveFwiKTowKX19fSksdi5zdXBwb3J0Lm9wYWNpdHl8fCh2LmNzc0hvb2tzLm9wYWNpdHk9e2dldDpmdW5jdGlvbihlLHQpe3JldHVybiBqdC50ZXN0KCh0JiZlLmN1cnJlbnRTdHlsZT9lLmN1cnJlbnRTdHlsZS5maWx0ZXI6ZS5zdHlsZS5maWx0ZXIpfHxcIlwiKT8uMDEqcGFyc2VGbG9hdChSZWdFeHAuJDEpK1wiXCI6dD9cIjFcIjpcIlwifSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnN0eWxlLHI9ZS5jdXJyZW50U3R5bGUsaT12LmlzTnVtZXJpYyh0KT9cImFscGhhKG9wYWNpdHk9XCIrdCoxMDArXCIpXCI6XCJcIixzPXImJnIuZmlsdGVyfHxuLmZpbHRlcnx8XCJcIjtuLnpvb209MTtpZih0Pj0xJiZ2LnRyaW0ocy5yZXBsYWNlKEJ0LFwiXCIpKT09PVwiXCImJm4ucmVtb3ZlQXR0cmlidXRlKXtuLnJlbW92ZUF0dHJpYnV0ZShcImZpbHRlclwiKTtpZihyJiYhci5maWx0ZXIpcmV0dXJufW4uZmlsdGVyPUJ0LnRlc3Qocyk/cy5yZXBsYWNlKEJ0LGkpOnMrXCIgXCIraX19KSx2KGZ1bmN0aW9uKCl7di5zdXBwb3J0LnJlbGlhYmxlTWFyZ2luUmlnaHR8fCh2LmNzc0hvb2tzLm1hcmdpblJpZ2h0PXtnZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdi5zd2FwKGUse2Rpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIn0sZnVuY3Rpb24oKXtpZih0KXJldHVybiBEdChlLFwibWFyZ2luUmlnaHRcIil9KX19KSwhdi5zdXBwb3J0LnBpeGVsUG9zaXRpb24mJnYuZm4ucG9zaXRpb24mJnYuZWFjaChbXCJ0b3BcIixcImxlZnRcIl0sZnVuY3Rpb24oZSx0KXt2LmNzc0hvb2tzW3RdPXtnZXQ6ZnVuY3Rpb24oZSxuKXtpZihuKXt2YXIgcj1EdChlLHQpO3JldHVybiBVdC50ZXN0KHIpP3YoZSkucG9zaXRpb24oKVt0XStcInB4XCI6cn19fX0pfSksdi5leHByJiZ2LmV4cHIuZmlsdGVycyYmKHYuZXhwci5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihlKXtyZXR1cm4gZS5vZmZzZXRXaWR0aD09PTAmJmUub2Zmc2V0SGVpZ2h0PT09MHx8IXYuc3VwcG9ydC5yZWxpYWJsZUhpZGRlbk9mZnNldHMmJihlLnN0eWxlJiZlLnN0eWxlLmRpc3BsYXl8fER0KGUsXCJkaXNwbGF5XCIpKT09PVwibm9uZVwifSx2LmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGUpe3JldHVybiF2LmV4cHIuZmlsdGVycy5oaWRkZW4oZSl9KSx2LmVhY2goe21hcmdpbjpcIlwiLHBhZGRpbmc6XCJcIixib3JkZXI6XCJXaWR0aFwifSxmdW5jdGlvbihlLHQpe3YuY3NzSG9va3NbZSt0XT17ZXhwYW5kOmZ1bmN0aW9uKG4pe3ZhciByLGk9dHlwZW9mIG49PVwic3RyaW5nXCI/bi5zcGxpdChcIiBcIik6W25dLHM9e307Zm9yKHI9MDtyPDQ7cisrKXNbZSskdFtyXSt0XT1pW3JdfHxpW3ItMl18fGlbMF07cmV0dXJuIHN9fSxxdC50ZXN0KGUpfHwodi5jc3NIb29rc1tlK3RdLnNldD1adCl9KTt2YXIgcm49LyUyMC9nLHNuPS9cXFtcXF0kLyxvbj0vXFxyP1xcbi9nLHVuPS9eKD86Y29sb3J8ZGF0ZXxkYXRldGltZXxkYXRldGltZS1sb2NhbHxlbWFpbHxoaWRkZW58bW9udGh8bnVtYmVyfHBhc3N3b3JkfHJhbmdlfHNlYXJjaHx0ZWx8dGV4dHx0aW1lfHVybHx3ZWVrKSQvaSxhbj0vXig/OnNlbGVjdHx0ZXh0YXJlYSkvaTt2LmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHYucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50cz92Lm1ha2VBcnJheSh0aGlzLmVsZW1lbnRzKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZSYmIXRoaXMuZGlzYWJsZWQmJih0aGlzLmNoZWNrZWR8fGFuLnRlc3QodGhpcy5ub2RlTmFtZSl8fHVuLnRlc3QodGhpcy50eXBlKSl9KS5tYXAoZnVuY3Rpb24oZSx0KXt2YXIgbj12KHRoaXMpLnZhbCgpO3JldHVybiBuPT1udWxsP251bGw6di5pc0FycmF5KG4pP3YubWFwKG4sZnVuY3Rpb24oZSxuKXtyZXR1cm57bmFtZTp0Lm5hbWUsdmFsdWU6ZS5yZXBsYWNlKG9uLFwiXFxyXFxuXCIpfX0pOntuYW1lOnQubmFtZSx2YWx1ZTpuLnJlcGxhY2Uob24sXCJcXHJcXG5cIil9fSkuZ2V0KCl9fSksdi5wYXJhbT1mdW5jdGlvbihlLG4pe3ZhciByLGk9W10scz1mdW5jdGlvbihlLHQpe3Q9di5pc0Z1bmN0aW9uKHQpP3QoKTp0PT1udWxsP1wiXCI6dCxpW2kubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoZSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHQpfTtuPT09dCYmKG49di5hamF4U2V0dGluZ3MmJnYuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKTtpZih2LmlzQXJyYXkoZSl8fGUuanF1ZXJ5JiYhdi5pc1BsYWluT2JqZWN0KGUpKXYuZWFjaChlLGZ1bmN0aW9uKCl7cyh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihyIGluIGUpZm4ocixlW3JdLG4scyk7cmV0dXJuIGkuam9pbihcIiZcIikucmVwbGFjZShybixcIitcIil9O3ZhciBsbixjbixobj0vIy4qJC8scG49L14oLio/KTpbIFxcdF0qKFteXFxyXFxuXSopXFxyPyQvbWcsZG49L14oPzphYm91dHxhcHB8YXBwXFwtc3RvcmFnZXwuK1xcLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLHZuPS9eKD86R0VUfEhFQUQpJC8sbW49L15cXC9cXC8vLGduPS9cXD8vLHluPS88c2NyaXB0XFxiW148XSooPzooPyE8XFwvc2NyaXB0Pik8W148XSopKjxcXC9zY3JpcHQ+L2dpLGJuPS8oWz8mXSlfPVteJl0qLyx3bj0vXihbXFx3XFwrXFwuXFwtXSs6KSg/OlxcL1xcLyhbXlxcLz8jOl0qKSg/OjooXFxkKyl8KXwpLyxFbj12LmZuLmxvYWQsU249e30seG49e30sVG49W1wiKi9cIl0rW1wiKlwiXTt0cnl7Y249cy5ocmVmfWNhdGNoKE5uKXtjbj1pLmNyZWF0ZUVsZW1lbnQoXCJhXCIpLGNuLmhyZWY9XCJcIixjbj1jbi5ocmVmfWxuPXduLmV4ZWMoY24udG9Mb3dlckNhc2UoKSl8fFtdLHYuZm4ubG9hZD1mdW5jdGlvbihlLG4scil7aWYodHlwZW9mIGUhPVwic3RyaW5nXCImJkVuKXJldHVybiBFbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoIXRoaXMubGVuZ3RoKXJldHVybiB0aGlzO3ZhciBpLHMsbyx1PXRoaXMsYT1lLmluZGV4T2YoXCIgXCIpO3JldHVybiBhPj0wJiYoaT1lLnNsaWNlKGEsZS5sZW5ndGgpLGU9ZS5zbGljZSgwLGEpKSx2LmlzRnVuY3Rpb24obik/KHI9bixuPXQpOm4mJnR5cGVvZiBuPT1cIm9iamVjdFwiJiYocz1cIlBPU1RcIiksdi5hamF4KHt1cmw6ZSx0eXBlOnMsZGF0YVR5cGU6XCJodG1sXCIsZGF0YTpuLGNvbXBsZXRlOmZ1bmN0aW9uKGUsdCl7ciYmdS5lYWNoKHIsb3x8W2UucmVzcG9uc2VUZXh0LHQsZV0pfX0pLmRvbmUoZnVuY3Rpb24oZSl7bz1hcmd1bWVudHMsdS5odG1sKGk/dihcIjxkaXY+XCIpLmFwcGVuZChlLnJlcGxhY2UoeW4sXCJcIikpLmZpbmQoaSk6ZSl9KSx0aGlzfSx2LmVhY2goXCJhamF4U3RhcnQgYWpheFN0b3AgYWpheENvbXBsZXRlIGFqYXhFcnJvciBhamF4U3VjY2VzcyBhamF4U2VuZFwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihlLHQpe3YuZm5bdF09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub24odCxlKX19KSx2LmVhY2goW1wiZ2V0XCIsXCJwb3N0XCJdLGZ1bmN0aW9uKGUsbil7dltuXT1mdW5jdGlvbihlLHIsaSxzKXtyZXR1cm4gdi5pc0Z1bmN0aW9uKHIpJiYocz1zfHxpLGk9cixyPXQpLHYuYWpheCh7dHlwZTpuLHVybDplLGRhdGE6cixzdWNjZXNzOmksZGF0YVR5cGU6c30pfX0pLHYuZXh0ZW5kKHtnZXRTY3JpcHQ6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdi5nZXQoZSx0LG4sXCJzY3JpcHRcIil9LGdldEpTT046ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2LmdldChlLHQsbixcImpzb25cIil9LGFqYXhTZXR1cDpmdW5jdGlvbihlLHQpe3JldHVybiB0P0xuKGUsdi5hamF4U2V0dGluZ3MpOih0PWUsZT12LmFqYXhTZXR0aW5ncyksTG4oZSx0KSxlfSxhamF4U2V0dGluZ3M6e3VybDpjbixpc0xvY2FsOmRuLnRlc3QobG5bMV0pLGdsb2JhbDohMCx0eXBlOlwiR0VUXCIsY29udGVudFR5cGU6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixwcm9jZXNzRGF0YTohMCxhc3luYzohMCxhY2NlcHRzOnt4bWw6XCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsaHRtbDpcInRleHQvaHRtbFwiLHRleHQ6XCJ0ZXh0L3BsYWluXCIsanNvbjpcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdFwiLFwiKlwiOlRufSxjb250ZW50czp7eG1sOi94bWwvLGh0bWw6L2h0bWwvLGpzb246L2pzb24vfSxyZXNwb25zZUZpZWxkczp7eG1sOlwicmVzcG9uc2VYTUxcIix0ZXh0OlwicmVzcG9uc2VUZXh0XCJ9LGNvbnZlcnRlcnM6e1wiKiB0ZXh0XCI6ZS5TdHJpbmcsXCJ0ZXh0IGh0bWxcIjohMCxcInRleHQganNvblwiOnYucGFyc2VKU09OLFwidGV4dCB4bWxcIjp2LnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7Y29udGV4dDohMCx1cmw6ITB9fSxhamF4UHJlZmlsdGVyOkNuKFNuKSxhamF4VHJhbnNwb3J0OkNuKHhuKSxhamF4OmZ1bmN0aW9uKGUsbil7ZnVuY3Rpb24gVChlLG4scyxhKXt2YXIgbCx5LGIsdyxTLFQ9bjtpZihFPT09MilyZXR1cm47RT0yLHUmJmNsZWFyVGltZW91dCh1KSxvPXQsaT1hfHxcIlwiLHgucmVhZHlTdGF0ZT1lPjA/NDowLHMmJih3PUFuKGMseCxzKSk7aWYoZT49MjAwJiZlPDMwMHx8ZT09PTMwNCljLmlmTW9kaWZpZWQmJihTPXguZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpLFMmJih2Lmxhc3RNb2RpZmllZFtyXT1TKSxTPXguZ2V0UmVzcG9uc2VIZWFkZXIoXCJFdGFnXCIpLFMmJih2LmV0YWdbcl09UykpLGU9PT0zMDQ/KFQ9XCJub3Rtb2RpZmllZFwiLGw9ITApOihsPU9uKGMsdyksVD1sLnN0YXRlLHk9bC5kYXRhLGI9bC5lcnJvcixsPSFiKTtlbHNle2I9VDtpZighVHx8ZSlUPVwiZXJyb3JcIixlPDAmJihlPTApfXguc3RhdHVzPWUseC5zdGF0dXNUZXh0PShufHxUKStcIlwiLGw/ZC5yZXNvbHZlV2l0aChoLFt5LFQseF0pOmQucmVqZWN0V2l0aChoLFt4LFQsYl0pLHguc3RhdHVzQ29kZShnKSxnPXQsZiYmcC50cmlnZ2VyKFwiYWpheFwiKyhsP1wiU3VjY2Vzc1wiOlwiRXJyb3JcIiksW3gsYyxsP3k6Yl0pLG0uZmlyZVdpdGgoaCxbeCxUXSksZiYmKHAudHJpZ2dlcihcImFqYXhDb21wbGV0ZVwiLFt4LGNdKSwtLXYuYWN0aXZlfHx2LmV2ZW50LnRyaWdnZXIoXCJhamF4U3RvcFwiKSl9dHlwZW9mIGU9PVwib2JqZWN0XCImJihuPWUsZT10KSxuPW58fHt9O3ZhciByLGkscyxvLHUsYSxmLGwsYz12LmFqYXhTZXR1cCh7fSxuKSxoPWMuY29udGV4dHx8YyxwPWghPT1jJiYoaC5ub2RlVHlwZXx8aCBpbnN0YW5jZW9mIHYpP3YoaCk6di5ldmVudCxkPXYuRGVmZXJyZWQoKSxtPXYuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksZz1jLnN0YXR1c0NvZGV8fHt9LGI9e30sdz17fSxFPTAsUz1cImNhbmNlbGVkXCIseD17cmVhZHlTdGF0ZTowLHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSx0KXtpZighRSl7dmFyIG49ZS50b0xvd2VyQ2FzZSgpO2U9d1tuXT13W25dfHxlLGJbZV09dH1yZXR1cm4gdGhpc30sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIEU9PT0yP2k6bnVsbH0sZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oZSl7dmFyIG47aWYoRT09PTIpe2lmKCFzKXtzPXt9O3doaWxlKG49cG4uZXhlYyhpKSlzW25bMV0udG9Mb3dlckNhc2UoKV09blsyXX1uPXNbZS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbj09PXQ/bnVsbDpufSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGUpe3JldHVybiBFfHwoYy5taW1lVHlwZT1lKSx0aGlzfSxhYm9ydDpmdW5jdGlvbihlKXtyZXR1cm4gZT1lfHxTLG8mJm8uYWJvcnQoZSksVCgwLGUpLHRoaXN9fTtkLnByb21pc2UoeCkseC5zdWNjZXNzPXguZG9uZSx4LmVycm9yPXguZmFpbCx4LmNvbXBsZXRlPW0uYWRkLHguc3RhdHVzQ29kZT1mdW5jdGlvbihlKXtpZihlKXt2YXIgdDtpZihFPDIpZm9yKHQgaW4gZSlnW3RdPVtnW3RdLGVbdF1dO2Vsc2UgdD1lW3guc3RhdHVzXSx4LmFsd2F5cyh0KX1yZXR1cm4gdGhpc30sYy51cmw9KChlfHxjLnVybCkrXCJcIikucmVwbGFjZShobixcIlwiKS5yZXBsYWNlKG1uLGxuWzFdK1wiLy9cIiksYy5kYXRhVHlwZXM9di50cmltKGMuZGF0YVR5cGV8fFwiKlwiKS50b0xvd2VyQ2FzZSgpLnNwbGl0KHkpLGMuY3Jvc3NEb21haW49PW51bGwmJihhPXduLmV4ZWMoYy51cmwudG9Mb3dlckNhc2UoKSksYy5jcm9zc0RvbWFpbj0hKCFhfHxhWzFdPT09bG5bMV0mJmFbMl09PT1sblsyXSYmKGFbM118fChhWzFdPT09XCJodHRwOlwiPzgwOjQ0MykpPT0obG5bM118fChsblsxXT09PVwiaHR0cDpcIj84MDo0NDMpKSkpLGMuZGF0YSYmYy5wcm9jZXNzRGF0YSYmdHlwZW9mIGMuZGF0YSE9XCJzdHJpbmdcIiYmKGMuZGF0YT12LnBhcmFtKGMuZGF0YSxjLnRyYWRpdGlvbmFsKSksa24oU24sYyxuLHgpO2lmKEU9PT0yKXJldHVybiB4O2Y9Yy5nbG9iYWwsYy50eXBlPWMudHlwZS50b1VwcGVyQ2FzZSgpLGMuaGFzQ29udGVudD0hdm4udGVzdChjLnR5cGUpLGYmJnYuYWN0aXZlKys9PT0wJiZ2LmV2ZW50LnRyaWdnZXIoXCJhamF4U3RhcnRcIik7aWYoIWMuaGFzQ29udGVudCl7Yy5kYXRhJiYoYy51cmwrPShnbi50ZXN0KGMudXJsKT9cIiZcIjpcIj9cIikrYy5kYXRhLGRlbGV0ZSBjLmRhdGEpLHI9Yy51cmw7aWYoYy5jYWNoZT09PSExKXt2YXIgTj12Lm5vdygpLEM9Yy51cmwucmVwbGFjZShibixcIiQxXz1cIitOKTtjLnVybD1DKyhDPT09Yy51cmw/KGduLnRlc3QoYy51cmwpP1wiJlwiOlwiP1wiKStcIl89XCIrTjpcIlwiKX19KGMuZGF0YSYmYy5oYXNDb250ZW50JiZjLmNvbnRlbnRUeXBlIT09ITF8fG4uY29udGVudFR5cGUpJiZ4LnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIixjLmNvbnRlbnRUeXBlKSxjLmlmTW9kaWZpZWQmJihyPXJ8fGMudXJsLHYubGFzdE1vZGlmaWVkW3JdJiZ4LnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Nb2RpZmllZC1TaW5jZVwiLHYubGFzdE1vZGlmaWVkW3JdKSx2LmV0YWdbcl0mJnguc2V0UmVxdWVzdEhlYWRlcihcIklmLU5vbmUtTWF0Y2hcIix2LmV0YWdbcl0pKSx4LnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIixjLmRhdGFUeXBlc1swXSYmYy5hY2NlcHRzW2MuZGF0YVR5cGVzWzBdXT9jLmFjY2VwdHNbYy5kYXRhVHlwZXNbMF1dKyhjLmRhdGFUeXBlc1swXSE9PVwiKlwiP1wiLCBcIitUbitcIjsgcT0wLjAxXCI6XCJcIik6Yy5hY2NlcHRzW1wiKlwiXSk7Zm9yKGwgaW4gYy5oZWFkZXJzKXguc2V0UmVxdWVzdEhlYWRlcihsLGMuaGVhZGVyc1tsXSk7aWYoIWMuYmVmb3JlU2VuZHx8Yy5iZWZvcmVTZW5kLmNhbGwoaCx4LGMpIT09ITEmJkUhPT0yKXtTPVwiYWJvcnRcIjtmb3IobCBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl4W2xdKGNbbF0pO289a24oeG4sYyxuLHgpO2lmKCFvKVQoLTEsXCJObyBUcmFuc3BvcnRcIik7ZWxzZXt4LnJlYWR5U3RhdGU9MSxmJiZwLnRyaWdnZXIoXCJhamF4U2VuZFwiLFt4LGNdKSxjLmFzeW5jJiZjLnRpbWVvdXQ+MCYmKHU9c2V0VGltZW91dChmdW5jdGlvbigpe3guYWJvcnQoXCJ0aW1lb3V0XCIpfSxjLnRpbWVvdXQpKTt0cnl7RT0xLG8uc2VuZChiLFQpfWNhdGNoKGspe2lmKCEoRTwyKSl0aHJvdyBrO1QoLTEsayl9fXJldHVybiB4fXJldHVybiB4LmFib3J0KCl9LGFjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9fSk7dmFyIE1uPVtdLF9uPS9cXD8vLERuPS8oPSlcXD8oPz0mfCQpfFxcP1xcPy8sUG49di5ub3coKTt2LmFqYXhTZXR1cCh7anNvbnA6XCJjYWxsYmFja1wiLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgZT1Nbi5wb3AoKXx8di5leHBhbmRvK1wiX1wiK1BuKys7cmV0dXJuIHRoaXNbZV09ITAsZX19KSx2LmFqYXhQcmVmaWx0ZXIoXCJqc29uIGpzb25wXCIsZnVuY3Rpb24obixyLGkpe3ZhciBzLG8sdSxhPW4uZGF0YSxmPW4udXJsLGw9bi5qc29ucCE9PSExLGM9bCYmRG4udGVzdChmKSxoPWwmJiFjJiZ0eXBlb2YgYT09XCJzdHJpbmdcIiYmIShuLmNvbnRlbnRUeXBlfHxcIlwiKS5pbmRleE9mKFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpJiZEbi50ZXN0KGEpO2lmKG4uZGF0YVR5cGVzWzBdPT09XCJqc29ucFwifHxjfHxoKXJldHVybiBzPW4uanNvbnBDYWxsYmFjaz12LmlzRnVuY3Rpb24obi5qc29ucENhbGxiYWNrKT9uLmpzb25wQ2FsbGJhY2soKTpuLmpzb25wQ2FsbGJhY2ssbz1lW3NdLGM/bi51cmw9Zi5yZXBsYWNlKERuLFwiJDFcIitzKTpoP24uZGF0YT1hLnJlcGxhY2UoRG4sXCIkMVwiK3MpOmwmJihuLnVybCs9KF9uLnRlc3QoZik/XCImXCI6XCI/XCIpK24uanNvbnArXCI9XCIrcyksbi5jb252ZXJ0ZXJzW1wic2NyaXB0IGpzb25cIl09ZnVuY3Rpb24oKXtyZXR1cm4gdXx8di5lcnJvcihzK1wiIHdhcyBub3QgY2FsbGVkXCIpLHVbMF19LG4uZGF0YVR5cGVzWzBdPVwianNvblwiLGVbc109ZnVuY3Rpb24oKXt1PWFyZ3VtZW50c30saS5hbHdheXMoZnVuY3Rpb24oKXtlW3NdPW8sbltzXSYmKG4uanNvbnBDYWxsYmFjaz1yLmpzb25wQ2FsbGJhY2ssTW4ucHVzaChzKSksdSYmdi5pc0Z1bmN0aW9uKG8pJiZvKHVbMF0pLHU9bz10fSksXCJzY3JpcHRcIn0pLHYuYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6XCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwifSxjb250ZW50czp7c2NyaXB0Oi9qYXZhc2NyaXB0fGVjbWFzY3JpcHQvfSxjb252ZXJ0ZXJzOntcInRleHQgc2NyaXB0XCI6ZnVuY3Rpb24oZSl7cmV0dXJuIHYuZ2xvYmFsRXZhbChlKSxlfX19KSx2LmFqYXhQcmVmaWx0ZXIoXCJzY3JpcHRcIixmdW5jdGlvbihlKXtlLmNhY2hlPT09dCYmKGUuY2FjaGU9ITEpLGUuY3Jvc3NEb21haW4mJihlLnR5cGU9XCJHRVRcIixlLmdsb2JhbD0hMSl9KSx2LmFqYXhUcmFuc3BvcnQoXCJzY3JpcHRcIixmdW5jdGlvbihlKXtpZihlLmNyb3NzRG9tYWluKXt2YXIgbixyPWkuaGVhZHx8aS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF18fGkuZG9jdW1lbnRFbGVtZW50O3JldHVybntzZW5kOmZ1bmN0aW9uKHMsbyl7bj1pLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksbi5hc3luYz1cImFzeW5jXCIsZS5zY3JpcHRDaGFyc2V0JiYobi5jaGFyc2V0PWUuc2NyaXB0Q2hhcnNldCksbi5zcmM9ZS51cmwsbi5vbmxvYWQ9bi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oZSxpKXtpZihpfHwhbi5yZWFkeVN0YXRlfHwvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KG4ucmVhZHlTdGF0ZSkpbi5vbmxvYWQ9bi5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxyJiZuLnBhcmVudE5vZGUmJnIucmVtb3ZlQ2hpbGQobiksbj10LGl8fG8oMjAwLFwic3VjY2Vzc1wiKX0sci5pbnNlcnRCZWZvcmUobixyLmZpcnN0Q2hpbGQpfSxhYm9ydDpmdW5jdGlvbigpe24mJm4ub25sb2FkKDAsMSl9fX19KTt2YXIgSG4sQm49ZS5BY3RpdmVYT2JqZWN0P2Z1bmN0aW9uKCl7Zm9yKHZhciBlIGluIEhuKUhuW2VdKDAsMSl9OiExLGpuPTA7di5hamF4U2V0dGluZ3MueGhyPWUuQWN0aXZlWE9iamVjdD9mdW5jdGlvbigpe3JldHVybiF0aGlzLmlzTG9jYWwmJkZuKCl8fEluKCl9OkZuLGZ1bmN0aW9uKGUpe3YuZXh0ZW5kKHYuc3VwcG9ydCx7YWpheDohIWUsY29yczohIWUmJlwid2l0aENyZWRlbnRpYWxzXCJpbiBlfSl9KHYuYWpheFNldHRpbmdzLnhocigpKSx2LnN1cHBvcnQuYWpheCYmdi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKG4pe2lmKCFuLmNyb3NzRG9tYWlufHx2LnN1cHBvcnQuY29ycyl7dmFyIHI7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oaSxzKXt2YXIgbyx1LGE9bi54aHIoKTtuLnVzZXJuYW1lP2Eub3BlbihuLnR5cGUsbi51cmwsbi5hc3luYyxuLnVzZXJuYW1lLG4ucGFzc3dvcmQpOmEub3BlbihuLnR5cGUsbi51cmwsbi5hc3luYyk7aWYobi54aHJGaWVsZHMpZm9yKHUgaW4gbi54aHJGaWVsZHMpYVt1XT1uLnhockZpZWxkc1t1XTtuLm1pbWVUeXBlJiZhLm92ZXJyaWRlTWltZVR5cGUmJmEub3ZlcnJpZGVNaW1lVHlwZShuLm1pbWVUeXBlKSwhbi5jcm9zc0RvbWFpbiYmIWlbXCJYLVJlcXVlc3RlZC1XaXRoXCJdJiYoaVtcIlgtUmVxdWVzdGVkLVdpdGhcIl09XCJYTUxIdHRwUmVxdWVzdFwiKTt0cnl7Zm9yKHUgaW4gaSlhLnNldFJlcXVlc3RIZWFkZXIodSxpW3VdKX1jYXRjaChmKXt9YS5zZW5kKG4uaGFzQ29udGVudCYmbi5kYXRhfHxudWxsKSxyPWZ1bmN0aW9uKGUsaSl7dmFyIHUsZixsLGMsaDt0cnl7aWYociYmKGl8fGEucmVhZHlTdGF0ZT09PTQpKXtyPXQsbyYmKGEub25yZWFkeXN0YXRlY2hhbmdlPXYubm9vcCxCbiYmZGVsZXRlIEhuW29dKTtpZihpKWEucmVhZHlTdGF0ZSE9PTQmJmEuYWJvcnQoKTtlbHNle3U9YS5zdGF0dXMsbD1hLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLGM9e30saD1hLnJlc3BvbnNlWE1MLGgmJmguZG9jdW1lbnRFbGVtZW50JiYoYy54bWw9aCk7dHJ5e2MudGV4dD1hLnJlc3BvbnNlVGV4dH1jYXRjaChwKXt9dHJ5e2Y9YS5zdGF0dXNUZXh0fWNhdGNoKHApe2Y9XCJcIn0hdSYmbi5pc0xvY2FsJiYhbi5jcm9zc0RvbWFpbj91PWMudGV4dD8yMDA6NDA0OnU9PT0xMjIzJiYodT0yMDQpfX19Y2F0Y2goZCl7aXx8cygtMSxkKX1jJiZzKHUsZixjLGwpfSxuLmFzeW5jP2EucmVhZHlTdGF0ZT09PTQ/c2V0VGltZW91dChyLDApOihvPSsram4sQm4mJihIbnx8KEhuPXt9LHYoZSkudW5sb2FkKEJuKSksSG5bb109ciksYS5vbnJlYWR5c3RhdGVjaGFuZ2U9cik6cigpfSxhYm9ydDpmdW5jdGlvbigpe3ImJnIoMCwxKX19fX0pO3ZhciBxbixSbixVbj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sem49bmV3IFJlZ0V4cChcIl4oPzooWy0rXSk9fCkoXCIrbStcIikoW2EteiVdKikkXCIsXCJpXCIpLFduPS9xdWV1ZUhvb2tzJC8sWG49W0duXSxWbj17XCIqXCI6W2Z1bmN0aW9uKGUsdCl7dmFyIG4scixpPXRoaXMuY3JlYXRlVHdlZW4oZSx0KSxzPXpuLmV4ZWModCksbz1pLmN1cigpLHU9K298fDAsYT0xLGY9MjA7aWYocyl7bj0rc1syXSxyPXNbM118fCh2LmNzc051bWJlcltlXT9cIlwiOlwicHhcIik7aWYociE9PVwicHhcIiYmdSl7dT12LmNzcyhpLmVsZW0sZSwhMCl8fG58fDE7ZG8gYT1hfHxcIi41XCIsdS89YSx2LnN0eWxlKGkuZWxlbSxlLHUrcik7d2hpbGUoYSE9PShhPWkuY3VyKCkvbykmJmEhPT0xJiYtLWYpfWkudW5pdD1yLGkuc3RhcnQ9dSxpLmVuZD1zWzFdP3UrKHNbMV0rMSkqbjpufXJldHVybiBpfV19O3YuQW5pbWF0aW9uPXYuZXh0ZW5kKEtuLHt0d2VlbmVyOmZ1bmN0aW9uKGUsdCl7di5pc0Z1bmN0aW9uKGUpPyh0PWUsZT1bXCIqXCJdKTplPWUuc3BsaXQoXCIgXCIpO3ZhciBuLHI9MCxpPWUubGVuZ3RoO2Zvcig7cjxpO3IrKyluPWVbcl0sVm5bbl09Vm5bbl18fFtdLFZuW25dLnVuc2hpZnQodCl9LHByZWZpbHRlcjpmdW5jdGlvbihlLHQpe3Q/WG4udW5zaGlmdChlKTpYbi5wdXNoKGUpfX0pLHYuVHdlZW49WW4sWW4ucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpZbixpbml0OmZ1bmN0aW9uKGUsdCxuLHIsaSxzKXt0aGlzLmVsZW09ZSx0aGlzLnByb3A9bix0aGlzLmVhc2luZz1pfHxcInN3aW5nXCIsdGhpcy5vcHRpb25zPXQsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPXIsdGhpcy51bml0PXN8fCh2LmNzc051bWJlcltuXT9cIlwiOlwicHhcIil9LGN1cjpmdW5jdGlvbigpe3ZhciBlPVluLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBlJiZlLmdldD9lLmdldCh0aGlzKTpZbi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oZSl7dmFyIHQsbj1Zbi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPXQ9di5lYXNpbmdbdGhpcy5lYXNpbmddKGUsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmUsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6dGhpcy5wb3M9dD1lLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSp0K3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLG4mJm4uc2V0P24uc2V0KHRoaXMpOlluLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LFluLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1Zbi5wcm90b3R5cGUsWW4ucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlLmVsZW1bZS5wcm9wXT09bnVsbHx8ISFlLmVsZW0uc3R5bGUmJmUuZWxlbS5zdHlsZVtlLnByb3BdIT1udWxsPyh0PXYuY3NzKGUuZWxlbSxlLnByb3AsITEsXCJcIiksIXR8fHQ9PT1cImF1dG9cIj8wOnQpOmUuZWxlbVtlLnByb3BdfSxzZXQ6ZnVuY3Rpb24oZSl7di5meC5zdGVwW2UucHJvcF0/di5meC5zdGVwW2UucHJvcF0oZSk6ZS5lbGVtLnN0eWxlJiYoZS5lbGVtLnN0eWxlW3YuY3NzUHJvcHNbZS5wcm9wXV0hPW51bGx8fHYuY3NzSG9va3NbZS5wcm9wXSk/di5zdHlsZShlLmVsZW0sZS5wcm9wLGUubm93K2UudW5pdCk6ZS5lbGVtW2UucHJvcF09ZS5ub3d9fX0sWW4ucHJvcEhvb2tzLnNjcm9sbFRvcD1Zbi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGUpe2UuZWxlbS5ub2RlVHlwZSYmZS5lbGVtLnBhcmVudE5vZGUmJihlLmVsZW1bZS5wcm9wXT1lLm5vdyl9fSx2LmVhY2goW1widG9nZ2xlXCIsXCJzaG93XCIsXCJoaWRlXCJdLGZ1bmN0aW9uKGUsdCl7dmFyIG49di5mblt0XTt2LmZuW3RdPWZ1bmN0aW9uKHIsaSxzKXtyZXR1cm4gcj09bnVsbHx8dHlwZW9mIHI9PVwiYm9vbGVhblwifHwhZSYmdi5pc0Z1bmN0aW9uKHIpJiZ2LmlzRnVuY3Rpb24oaSk/bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKFpuKHQsITApLHIsaSxzKX19KSx2LmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLmZpbHRlcihHdCkuY3NzKFwib3BhY2l0eVwiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OnR9LGUsbixyKX0sYW5pbWF0ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT12LmlzRW1wdHlPYmplY3QoZSkscz12LnNwZWVkKHQsbixyKSxvPWZ1bmN0aW9uKCl7dmFyIHQ9S24odGhpcyx2LmV4dGVuZCh7fSxlKSxzKTtpJiZ0LnN0b3AoITApfTtyZXR1cm4gaXx8cy5xdWV1ZT09PSExP3RoaXMuZWFjaChvKTp0aGlzLnF1ZXVlKHMucXVldWUsbyl9LHN0b3A6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RvcDtkZWxldGUgZS5zdG9wLHQocil9O3JldHVybiB0eXBlb2YgZSE9XCJzdHJpbmdcIiYmKHI9bixuPWUsZT10KSxuJiZlIT09ITEmJnRoaXMucXVldWUoZXx8XCJmeFwiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD0hMCxuPWUhPW51bGwmJmUrXCJxdWV1ZUhvb2tzXCIscz12LnRpbWVycyxvPXYuX2RhdGEodGhpcyk7aWYobilvW25dJiZvW25dLnN0b3AmJmkob1tuXSk7ZWxzZSBmb3IobiBpbiBvKW9bbl0mJm9bbl0uc3RvcCYmV24udGVzdChuKSYmaShvW25dKTtmb3Iobj1zLmxlbmd0aDtuLS07KXNbbl0uZWxlbT09PXRoaXMmJihlPT1udWxsfHxzW25dLnF1ZXVlPT09ZSkmJihzW25dLmFuaW0uc3RvcChyKSx0PSExLHMuc3BsaWNlKG4sMSkpOyh0fHwhcikmJnYuZGVxdWV1ZSh0aGlzLGUpfSl9fSksdi5lYWNoKHtzbGlkZURvd246Wm4oXCJzaG93XCIpLHNsaWRlVXA6Wm4oXCJoaWRlXCIpLHNsaWRlVG9nZ2xlOlpuKFwidG9nZ2xlXCIpLGZhZGVJbjp7b3BhY2l0eTpcInNob3dcIn0sZmFkZU91dDp7b3BhY2l0eTpcImhpZGVcIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eTpcInRvZ2dsZVwifX0sZnVuY3Rpb24oZSx0KXt2LmZuW2VdPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdGhpcy5hbmltYXRlKHQsZSxuLHIpfX0pLHYuc3BlZWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUmJnR5cGVvZiBlPT1cIm9iamVjdFwiP3YuZXh0ZW5kKHt9LGUpOntjb21wbGV0ZTpufHwhbiYmdHx8di5pc0Z1bmN0aW9uKGUpJiZlLGR1cmF0aW9uOmUsZWFzaW5nOm4mJnR8fHQmJiF2LmlzRnVuY3Rpb24odCkmJnR9O3IuZHVyYXRpb249di5meC5vZmY/MDp0eXBlb2Ygci5kdXJhdGlvbj09XCJudW1iZXJcIj9yLmR1cmF0aW9uOnIuZHVyYXRpb24gaW4gdi5meC5zcGVlZHM/di5meC5zcGVlZHNbci5kdXJhdGlvbl06di5meC5zcGVlZHMuX2RlZmF1bHQ7aWYoci5xdWV1ZT09bnVsbHx8ci5xdWV1ZT09PSEwKXIucXVldWU9XCJmeFwiO3JldHVybiByLm9sZD1yLmNvbXBsZXRlLHIuY29tcGxldGU9ZnVuY3Rpb24oKXt2LmlzRnVuY3Rpb24oci5vbGQpJiZyLm9sZC5jYWxsKHRoaXMpLHIucXVldWUmJnYuZGVxdWV1ZSh0aGlzLHIucXVldWUpfSxyfSx2LmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxzd2luZzpmdW5jdGlvbihlKXtyZXR1cm4uNS1NYXRoLmNvcyhlKk1hdGguUEkpLzJ9fSx2LnRpbWVycz1bXSx2LmZ4PVluLnByb3RvdHlwZS5pbml0LHYuZngudGljaz1mdW5jdGlvbigpe3ZhciBlLG49di50aW1lcnMscj0wO3FuPXYubm93KCk7Zm9yKDtyPG4ubGVuZ3RoO3IrKyllPW5bcl0sIWUoKSYmbltyXT09PWUmJm4uc3BsaWNlKHItLSwxKTtuLmxlbmd0aHx8di5meC5zdG9wKCkscW49dH0sdi5meC50aW1lcj1mdW5jdGlvbihlKXtlKCkmJnYudGltZXJzLnB1c2goZSkmJiFSbiYmKFJuPXNldEludGVydmFsKHYuZngudGljayx2LmZ4LmludGVydmFsKSl9LHYuZnguaW50ZXJ2YWw9MTMsdi5meC5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChSbiksUm49bnVsbH0sdi5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sdi5meC5zdGVwPXt9LHYuZXhwciYmdi5leHByLmZpbHRlcnMmJih2LmV4cHIuZmlsdGVycy5hbmltYXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gdi5ncmVwKHYudGltZXJzLGZ1bmN0aW9uKHQpe3JldHVybiBlPT09dC5lbGVtfSkubGVuZ3RofSk7dmFyIGVyPS9eKD86Ym9keXxodG1sKSQvaTt2LmZuLm9mZnNldD1mdW5jdGlvbihlKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBlPT09dD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbih0KXt2Lm9mZnNldC5zZXRPZmZzZXQodGhpcyxlLHQpfSk7dmFyIG4scixpLHMsbyx1LGEsZj17dG9wOjAsbGVmdDowfSxsPXRoaXNbMF0sYz1sJiZsLm93bmVyRG9jdW1lbnQ7aWYoIWMpcmV0dXJuO3JldHVybihyPWMuYm9keSk9PT1sP3Yub2Zmc2V0LmJvZHlPZmZzZXQobCk6KG49Yy5kb2N1bWVudEVsZW1lbnQsdi5jb250YWlucyhuLGwpPyh0eXBlb2YgbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QhPVwidW5kZWZpbmVkXCImJihmPWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLGk9dHIoYykscz1uLmNsaWVudFRvcHx8ci5jbGllbnRUb3B8fDAsbz1uLmNsaWVudExlZnR8fHIuY2xpZW50TGVmdHx8MCx1PWkucGFnZVlPZmZzZXR8fG4uc2Nyb2xsVG9wLGE9aS5wYWdlWE9mZnNldHx8bi5zY3JvbGxMZWZ0LHt0b3A6Zi50b3ArdS1zLGxlZnQ6Zi5sZWZ0K2Etb30pOmYpfSx2Lm9mZnNldD17Ym9keU9mZnNldDpmdW5jdGlvbihlKXt2YXIgdD1lLm9mZnNldFRvcCxuPWUub2Zmc2V0TGVmdDtyZXR1cm4gdi5zdXBwb3J0LmRvZXNOb3RJbmNsdWRlTWFyZ2luSW5Cb2R5T2Zmc2V0JiYodCs9cGFyc2VGbG9hdCh2LmNzcyhlLFwibWFyZ2luVG9wXCIpKXx8MCxuKz1wYXJzZUZsb2F0KHYuY3NzKGUsXCJtYXJnaW5MZWZ0XCIpKXx8MCkse3RvcDp0LGxlZnQ6bn19LHNldE9mZnNldDpmdW5jdGlvbihlLHQsbil7dmFyIHI9di5jc3MoZSxcInBvc2l0aW9uXCIpO3I9PT1cInN0YXRpY1wiJiYoZS5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIpO3ZhciBpPXYoZSkscz1pLm9mZnNldCgpLG89di5jc3MoZSxcInRvcFwiKSx1PXYuY3NzKGUsXCJsZWZ0XCIpLGE9KHI9PT1cImFic29sdXRlXCJ8fHI9PT1cImZpeGVkXCIpJiZ2LmluQXJyYXkoXCJhdXRvXCIsW28sdV0pPi0xLGY9e30sbD17fSxjLGg7YT8obD1pLnBvc2l0aW9uKCksYz1sLnRvcCxoPWwubGVmdCk6KGM9cGFyc2VGbG9hdChvKXx8MCxoPXBhcnNlRmxvYXQodSl8fDApLHYuaXNGdW5jdGlvbih0KSYmKHQ9dC5jYWxsKGUsbixzKSksdC50b3AhPW51bGwmJihmLnRvcD10LnRvcC1zLnRvcCtjKSx0LmxlZnQhPW51bGwmJihmLmxlZnQ9dC5sZWZ0LXMubGVmdCtoKSxcInVzaW5nXCJpbiB0P3QudXNpbmcuY2FsbChlLGYpOmkuY3NzKGYpfX0sdi5mbi5leHRlbmQoe3Bvc2l0aW9uOmZ1bmN0aW9uKCl7aWYoIXRoaXNbMF0pcmV0dXJuO3ZhciBlPXRoaXNbMF0sdD10aGlzLm9mZnNldFBhcmVudCgpLG49dGhpcy5vZmZzZXQoKSxyPWVyLnRlc3QodFswXS5ub2RlTmFtZSk/e3RvcDowLGxlZnQ6MH06dC5vZmZzZXQoKTtyZXR1cm4gbi50b3AtPXBhcnNlRmxvYXQodi5jc3MoZSxcIm1hcmdpblRvcFwiKSl8fDAsbi5sZWZ0LT1wYXJzZUZsb2F0KHYuY3NzKGUsXCJtYXJnaW5MZWZ0XCIpKXx8MCxyLnRvcCs9cGFyc2VGbG9hdCh2LmNzcyh0WzBdLFwiYm9yZGVyVG9wV2lkdGhcIikpfHwwLHIubGVmdCs9cGFyc2VGbG9hdCh2LmNzcyh0WzBdLFwiYm9yZGVyTGVmdFdpZHRoXCIpKXx8MCx7dG9wOm4udG9wLXIudG9wLGxlZnQ6bi5sZWZ0LXIubGVmdH19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0UGFyZW50fHxpLmJvZHk7d2hpbGUoZSYmIWVyLnRlc3QoZS5ub2RlTmFtZSkmJnYuY3NzKGUsXCJwb3NpdGlvblwiKT09PVwic3RhdGljXCIpZT1lLm9mZnNldFBhcmVudDtyZXR1cm4gZXx8aS5ib2R5fSl9fSksdi5lYWNoKHtzY3JvbGxMZWZ0OlwicGFnZVhPZmZzZXRcIixzY3JvbGxUb3A6XCJwYWdlWU9mZnNldFwifSxmdW5jdGlvbihlLG4pe3ZhciByPS9ZLy50ZXN0KG4pO3YuZm5bZV09ZnVuY3Rpb24oaSl7cmV0dXJuIHYuYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSxpLHMpe3ZhciBvPXRyKGUpO2lmKHM9PT10KXJldHVybiBvP24gaW4gbz9vW25dOm8uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W2ldOmVbaV07bz9vLnNjcm9sbFRvKHI/dihvKS5zY3JvbGxMZWZ0KCk6cyxyP3M6dihvKS5zY3JvbGxUb3AoKSk6ZVtpXT1zfSxlLGksYXJndW1lbnRzLmxlbmd0aCxudWxsKX19KSx2LmVhY2goe0hlaWdodDpcImhlaWdodFwiLFdpZHRoOlwid2lkdGhcIn0sZnVuY3Rpb24oZSxuKXt2LmVhY2goe3BhZGRpbmc6XCJpbm5lclwiK2UsY29udGVudDpuLFwiXCI6XCJvdXRlclwiK2V9LGZ1bmN0aW9uKHIsaSl7di5mbltpXT1mdW5jdGlvbihpLHMpe3ZhciBvPWFyZ3VtZW50cy5sZW5ndGgmJihyfHx0eXBlb2YgaSE9XCJib29sZWFuXCIpLHU9cnx8KGk9PT0hMHx8cz09PSEwP1wibWFyZ2luXCI6XCJib3JkZXJcIik7cmV0dXJuIHYuYWNjZXNzKHRoaXMsZnVuY3Rpb24obixyLGkpe3ZhciBzO3JldHVybiB2LmlzV2luZG93KG4pP24uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W1wiY2xpZW50XCIrZV06bi5ub2RlVHlwZT09PTk/KHM9bi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgobi5ib2R5W1wic2Nyb2xsXCIrZV0sc1tcInNjcm9sbFwiK2VdLG4uYm9keVtcIm9mZnNldFwiK2VdLHNbXCJvZmZzZXRcIitlXSxzW1wiY2xpZW50XCIrZV0pKTppPT09dD92LmNzcyhuLHIsaSx1KTp2LnN0eWxlKG4scixpLHUpfSxuLG8/aTp0LG8sbnVsbCl9fSl9KSxlLmpRdWVyeT1lLiQ9dix0eXBlb2YgZGVmaW5lPT1cImZ1bmN0aW9uXCImJmRlZmluZS5hbWQmJmRlZmluZS5hbWQualF1ZXJ5JiZkZWZpbmUoXCJqcXVlcnlcIixbXSxmdW5jdGlvbigpe3JldHVybiB2fSl9KSh3aW5kb3cpO3ZhciBqcTE4PWpRdWVyeS5ub0NvbmZsaWN0KCEwKTsoZnVuY3Rpb24oalF1ZXJ5KXsoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBpKHQsbil7dmFyIHIsaSxvLHU9dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiYXJlYVwiPT09dT8ocj10LnBhcmVudE5vZGUsaT1yLm5hbWUsIXQuaHJlZnx8IWl8fHIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PVwibWFwXCI/ITE6KG89ZShcImltZ1t1c2VtYXA9I1wiK2krXCJdXCIpWzBdLCEhbyYmcyhvKSkpOigvaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QvLnRlc3QodSk/IXQuZGlzYWJsZWQ6XCJhXCI9PT11P3QuaHJlZnx8bjpuKSYmcyh0KX1mdW5jdGlvbiBzKHQpe3JldHVybiBlLmV4cHIuZmlsdGVycy52aXNpYmxlKHQpJiYhZSh0KS5wYXJlbnRzKCkuYW5kU2VsZigpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBlLmNzcyh0aGlzLFwidmlzaWJpbGl0eVwiKT09PVwiaGlkZGVuXCJ9KS5sZW5ndGh9dmFyIG49MCxyPS9edWktaWQtXFxkKyQvO2UudWk9ZS51aXx8e307aWYoZS51aS52ZXJzaW9uKXJldHVybjtlLmV4dGVuZChlLnVpLHt2ZXJzaW9uOlwiMS45LjJcIixrZXlDb2RlOntCQUNLU1BBQ0U6OCxDT01NQToxODgsREVMRVRFOjQ2LERPV046NDAsRU5EOjM1LEVOVEVSOjEzLEVTQ0FQRToyNyxIT01FOjM2LExFRlQ6MzcsTlVNUEFEX0FERDoxMDcsTlVNUEFEX0RFQ0lNQUw6MTEwLE5VTVBBRF9ESVZJREU6MTExLE5VTVBBRF9FTlRFUjoxMDgsTlVNUEFEX01VTFRJUExZOjEwNixOVU1QQURfU1VCVFJBQ1Q6MTA5LFBBR0VfRE9XTjozNCxQQUdFX1VQOjMzLFBFUklPRDoxOTAsUklHSFQ6MzksU1BBQ0U6MzIsVEFCOjksVVA6Mzh9fSksZS5mbi5leHRlbmQoe19mb2N1czplLmZuLmZvY3VzLGZvY3VzOmZ1bmN0aW9uKHQsbil7cmV0dXJuIHR5cGVvZiB0PT1cIm51bWJlclwiP3RoaXMuZWFjaChmdW5jdGlvbigpe3ZhciByPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2UocikuZm9jdXMoKSxuJiZuLmNhbGwocil9LHQpfSk6dGhpcy5fZm9jdXMuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzY3JvbGxQYXJlbnQ6ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gZS51aS5pZSYmLyhzdGF0aWN8cmVsYXRpdmUpLy50ZXN0KHRoaXMuY3NzKFwicG9zaXRpb25cIikpfHwvYWJzb2x1dGUvLnRlc3QodGhpcy5jc3MoXCJwb3NpdGlvblwiKSk/dD10aGlzLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4vKHJlbGF0aXZlfGFic29sdXRlfGZpeGVkKS8udGVzdChlLmNzcyh0aGlzLFwicG9zaXRpb25cIikpJiYvKGF1dG98c2Nyb2xsKS8udGVzdChlLmNzcyh0aGlzLFwib3ZlcmZsb3dcIikrZS5jc3ModGhpcyxcIm92ZXJmbG93LXlcIikrZS5jc3ModGhpcyxcIm92ZXJmbG93LXhcIikpfSkuZXEoMCk6dD10aGlzLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4vKGF1dG98c2Nyb2xsKS8udGVzdChlLmNzcyh0aGlzLFwib3ZlcmZsb3dcIikrZS5jc3ModGhpcyxcIm92ZXJmbG93LXlcIikrZS5jc3ModGhpcyxcIm92ZXJmbG93LXhcIikpfSkuZXEoMCksL2ZpeGVkLy50ZXN0KHRoaXMuY3NzKFwicG9zaXRpb25cIikpfHwhdC5sZW5ndGg/ZShkb2N1bWVudCk6dH0sekluZGV4OmZ1bmN0aW9uKG4pe2lmKG4hPT10KXJldHVybiB0aGlzLmNzcyhcInpJbmRleFwiLG4pO2lmKHRoaXMubGVuZ3RoKXt2YXIgcj1lKHRoaXNbMF0pLGksczt3aGlsZShyLmxlbmd0aCYmclswXSE9PWRvY3VtZW50KXtpPXIuY3NzKFwicG9zaXRpb25cIik7aWYoaT09PVwiYWJzb2x1dGVcInx8aT09PVwicmVsYXRpdmVcInx8aT09PVwiZml4ZWRcIil7cz1wYXJzZUludChyLmNzcyhcInpJbmRleFwiKSwxMCk7aWYoIWlzTmFOKHMpJiZzIT09MClyZXR1cm4gc31yPXIucGFyZW50KCl9fXJldHVybiAwfSx1bmlxdWVJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt0aGlzLmlkfHwodGhpcy5pZD1cInVpLWlkLVwiKyArK24pfSl9LHJlbW92ZVVuaXF1ZUlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3IudGVzdCh0aGlzLmlkKSYmZSh0aGlzKS5yZW1vdmVBdHRyKFwiaWRcIil9KX19KSxlLmV4dGVuZChlLmV4cHJbXCI6XCJdLHtkYXRhOmUuZXhwci5jcmVhdGVQc2V1ZG8/ZS5leHByLmNyZWF0ZVBzZXVkbyhmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuISFlLmRhdGEobix0KX19KTpmdW5jdGlvbih0LG4scil7cmV0dXJuISFlLmRhdGEodCxyWzNdKX0sZm9jdXNhYmxlOmZ1bmN0aW9uKHQpe3JldHVybiBpKHQsIWlzTmFOKGUuYXR0cih0LFwidGFiaW5kZXhcIikpKX0sdGFiYmFibGU6ZnVuY3Rpb24odCl7dmFyIG49ZS5hdHRyKHQsXCJ0YWJpbmRleFwiKSxyPWlzTmFOKG4pO3JldHVybihyfHxuPj0wKSYmaSh0LCFyKX19KSxlKGZ1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQuYm9keSxuPXQuYXBwZW5kQ2hpbGQobj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtuLm9mZnNldEhlaWdodCxlLmV4dGVuZChuLnN0eWxlLHttaW5IZWlnaHQ6XCIxMDBweFwiLGhlaWdodDpcImF1dG9cIixwYWRkaW5nOjAsYm9yZGVyV2lkdGg6MH0pLGUuc3VwcG9ydC5taW5IZWlnaHQ9bi5vZmZzZXRIZWlnaHQ9PT0xMDAsZS5zdXBwb3J0LnNlbGVjdHN0YXJ0PVwib25zZWxlY3RzdGFydFwiaW4gbix0LnJlbW92ZUNoaWxkKG4pLnN0eWxlLmRpc3BsYXk9XCJub25lXCJ9KSxlKFwiPGE+XCIpLm91dGVyV2lkdGgoMSkuanF1ZXJ5fHxlLmVhY2goW1wiV2lkdGhcIixcIkhlaWdodFwiXSxmdW5jdGlvbihuLHIpe2Z1bmN0aW9uIHUodCxuLHIscyl7cmV0dXJuIGUuZWFjaChpLGZ1bmN0aW9uKCl7bi09cGFyc2VGbG9hdChlLmNzcyh0LFwicGFkZGluZ1wiK3RoaXMpKXx8MCxyJiYobi09cGFyc2VGbG9hdChlLmNzcyh0LFwiYm9yZGVyXCIrdGhpcytcIldpZHRoXCIpKXx8MCkscyYmKG4tPXBhcnNlRmxvYXQoZS5jc3ModCxcIm1hcmdpblwiK3RoaXMpKXx8MCl9KSxufXZhciBpPXI9PT1cIldpZHRoXCI/W1wiTGVmdFwiLFwiUmlnaHRcIl06W1wiVG9wXCIsXCJCb3R0b21cIl0scz1yLnRvTG93ZXJDYXNlKCksbz17aW5uZXJXaWR0aDplLmZuLmlubmVyV2lkdGgsaW5uZXJIZWlnaHQ6ZS5mbi5pbm5lckhlaWdodCxvdXRlcldpZHRoOmUuZm4ub3V0ZXJXaWR0aCxvdXRlckhlaWdodDplLmZuLm91dGVySGVpZ2h0fTtlLmZuW1wiaW5uZXJcIityXT1mdW5jdGlvbihuKXtyZXR1cm4gbj09PXQ/b1tcImlubmVyXCIrcl0uY2FsbCh0aGlzKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtlKHRoaXMpLmNzcyhzLHUodGhpcyxuKStcInB4XCIpfSl9LGUuZm5bXCJvdXRlclwiK3JdPWZ1bmN0aW9uKHQsbil7cmV0dXJuIHR5cGVvZiB0IT1cIm51bWJlclwiP29bXCJvdXRlclwiK3JdLmNhbGwodGhpcyx0KTp0aGlzLmVhY2goZnVuY3Rpb24oKXtlKHRoaXMpLmNzcyhzLHUodGhpcyx0LCEwLG4pK1wicHhcIil9KX19KSxlKFwiPGE+XCIpLmRhdGEoXCJhLWJcIixcImFcIikucmVtb3ZlRGF0YShcImEtYlwiKS5kYXRhKFwiYS1iXCIpJiYoZS5mbi5yZW1vdmVEYXRhPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD90LmNhbGwodGhpcyxlLmNhbWVsQ2FzZShuKSk6dC5jYWxsKHRoaXMpfX0oZS5mbi5yZW1vdmVEYXRhKSksZnVuY3Rpb24oKXt2YXIgdD0vbXNpZSAoW1xcdy5dKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKXx8W107ZS51aS5pZT10Lmxlbmd0aD8hMDohMSxlLnVpLmllNj1wYXJzZUZsb2F0KHRbMV0sMTApPT09Nn0oKSxlLmZuLmV4dGVuZCh7ZGlzYWJsZVNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJpbmQoKGUuc3VwcG9ydC5zZWxlY3RzdGFydD9cInNlbGVjdHN0YXJ0XCI6XCJtb3VzZWRvd25cIikrXCIudWktZGlzYWJsZVNlbGVjdGlvblwiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0pfSxlbmFibGVTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bmJpbmQoXCIudWktZGlzYWJsZVNlbGVjdGlvblwiKX19KSxlLmV4dGVuZChlLnVpLHtwbHVnaW46e2FkZDpmdW5jdGlvbih0LG4scil7dmFyIGkscz1lLnVpW3RdLnByb3RvdHlwZTtmb3IoaSBpbiByKXMucGx1Z2luc1tpXT1zLnBsdWdpbnNbaV18fFtdLHMucGx1Z2luc1tpXS5wdXNoKFtuLHJbaV1dKX0sY2FsbDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT1lLnBsdWdpbnNbdF07aWYoIWl8fCFlLmVsZW1lbnRbMF0ucGFyZW50Tm9kZXx8ZS5lbGVtZW50WzBdLnBhcmVudE5vZGUubm9kZVR5cGU9PT0xMSlyZXR1cm47Zm9yKHI9MDtyPGkubGVuZ3RoO3IrKyllLm9wdGlvbnNbaVtyXVswXV0mJmlbcl1bMV0uYXBwbHkoZS5lbGVtZW50LG4pfX0sY29udGFpbnM6ZS5jb250YWlucyxoYXNTY3JvbGw6ZnVuY3Rpb24odCxuKXtpZihlKHQpLmNzcyhcIm92ZXJmbG93XCIpPT09XCJoaWRkZW5cIilyZXR1cm4hMTt2YXIgcj1uJiZuPT09XCJsZWZ0XCI/XCJzY3JvbGxMZWZ0XCI6XCJzY3JvbGxUb3BcIixpPSExO3JldHVybiB0W3JdPjA/ITA6KHRbcl09MSxpPXRbcl0+MCx0W3JdPTAsaSl9LGlzT3ZlckF4aXM6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlPnQmJmU8dCtufSxpc092ZXI6ZnVuY3Rpb24odCxuLHIsaSxzLG8pe3JldHVybiBlLnVpLmlzT3ZlckF4aXModCxyLHMpJiZlLnVpLmlzT3ZlckF4aXMobixpLG8pfX0pfSkoalF1ZXJ5KTsoZnVuY3Rpb24oZSx0KXt2YXIgbj0wLHI9QXJyYXkucHJvdG90eXBlLnNsaWNlLGk9ZS5jbGVhbkRhdGE7ZS5jbGVhbkRhdGE9ZnVuY3Rpb24odCl7Zm9yKHZhciBuPTAscjsocj10W25dKSE9bnVsbDtuKyspdHJ5e2UocikudHJpZ2dlckhhbmRsZXIoXCJyZW1vdmVcIil9Y2F0Y2gocyl7fWkodCl9LGUud2lkZ2V0PWZ1bmN0aW9uKHQsbixyKXt2YXIgaSxzLG8sdSxhPXQuc3BsaXQoXCIuXCIpWzBdO3Q9dC5zcGxpdChcIi5cIilbMV0saT1hK1wiLVwiK3Qscnx8KHI9bixuPWUuV2lkZ2V0KSxlLmV4cHJbXCI6XCJdW2kudG9Mb3dlckNhc2UoKV09ZnVuY3Rpb24odCl7cmV0dXJuISFlLmRhdGEodCxpKX0sZVthXT1lW2FdfHx7fSxzPWVbYV1bdF0sbz1lW2FdW3RdPWZ1bmN0aW9uKGUsdCl7aWYoIXRoaXMuX2NyZWF0ZVdpZGdldClyZXR1cm4gbmV3IG8oZSx0KTthcmd1bWVudHMubGVuZ3RoJiZ0aGlzLl9jcmVhdGVXaWRnZXQoZSx0KX0sZS5leHRlbmQobyxzLHt2ZXJzaW9uOnIudmVyc2lvbixfcHJvdG86ZS5leHRlbmQoe30sciksX2NoaWxkQ29uc3RydWN0b3JzOltdfSksdT1uZXcgbix1Lm9wdGlvbnM9ZS53aWRnZXQuZXh0ZW5kKHt9LHUub3B0aW9ucyksZS5lYWNoKHIsZnVuY3Rpb24odCxpKXtlLmlzRnVuY3Rpb24oaSkmJihyW3RdPWZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4gbi5wcm90b3R5cGVbdF0uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyPWZ1bmN0aW9uKGUpe3JldHVybiBuLnByb3RvdHlwZVt0XS5hcHBseSh0aGlzLGUpfTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9zdXBlcixuPXRoaXMuX3N1cGVyQXBwbHkscztyZXR1cm4gdGhpcy5fc3VwZXI9ZSx0aGlzLl9zdXBlckFwcGx5PXIscz1pLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9zdXBlcj10LHRoaXMuX3N1cGVyQXBwbHk9bixzfX0oKSl9KSxvLnByb3RvdHlwZT1lLndpZGdldC5leHRlbmQodSx7d2lkZ2V0RXZlbnRQcmVmaXg6cz91LndpZGdldEV2ZW50UHJlZml4OnR9LHIse2NvbnN0cnVjdG9yOm8sbmFtZXNwYWNlOmEsd2lkZ2V0TmFtZTp0LHdpZGdldEJhc2VDbGFzczppLHdpZGdldEZ1bGxOYW1lOml9KSxzPyhlLmVhY2gocy5fY2hpbGRDb25zdHJ1Y3RvcnMsZnVuY3Rpb24odCxuKXt2YXIgcj1uLnByb3RvdHlwZTtlLndpZGdldChyLm5hbWVzcGFjZStcIi5cIityLndpZGdldE5hbWUsbyxuLl9wcm90byl9KSxkZWxldGUgcy5fY2hpbGRDb25zdHJ1Y3RvcnMpOm4uX2NoaWxkQ29uc3RydWN0b3JzLnB1c2gobyksZS53aWRnZXQuYnJpZGdlKHQsbyl9LGUud2lkZ2V0LmV4dGVuZD1mdW5jdGlvbihuKXt2YXIgaT1yLmNhbGwoYXJndW1lbnRzLDEpLHM9MCxvPWkubGVuZ3RoLHUsYTtmb3IoO3M8bztzKyspZm9yKHUgaW4gaVtzXSlhPWlbc11bdV0saVtzXS5oYXNPd25Qcm9wZXJ0eSh1KSYmYSE9PXQmJihlLmlzUGxhaW5PYmplY3QoYSk/blt1XT1lLmlzUGxhaW5PYmplY3Qoblt1XSk/ZS53aWRnZXQuZXh0ZW5kKHt9LG5bdV0sYSk6ZS53aWRnZXQuZXh0ZW5kKHt9LGEpOm5bdV09YSk7cmV0dXJuIG59LGUud2lkZ2V0LmJyaWRnZT1mdW5jdGlvbihuLGkpe3ZhciBzPWkucHJvdG90eXBlLndpZGdldEZ1bGxOYW1lfHxuO2UuZm5bbl09ZnVuY3Rpb24obyl7dmFyIHU9dHlwZW9mIG89PVwic3RyaW5nXCIsYT1yLmNhbGwoYXJndW1lbnRzLDEpLGY9dGhpcztyZXR1cm4gbz0hdSYmYS5sZW5ndGg/ZS53aWRnZXQuZXh0ZW5kLmFwcGx5KG51bGwsW29dLmNvbmNhdChhKSk6byx1P3RoaXMuZWFjaChmdW5jdGlvbigpe3ZhciByLGk9ZS5kYXRhKHRoaXMscyk7aWYoIWkpcmV0dXJuIGUuZXJyb3IoXCJjYW5ub3QgY2FsbCBtZXRob2RzIG9uIFwiK24rXCIgcHJpb3IgdG8gaW5pdGlhbGl6YXRpb247IFwiK1wiYXR0ZW1wdGVkIHRvIGNhbGwgbWV0aG9kICdcIitvK1wiJ1wiKTtpZighZS5pc0Z1bmN0aW9uKGlbb10pfHxvLmNoYXJBdCgwKT09PVwiX1wiKXJldHVybiBlLmVycm9yKFwibm8gc3VjaCBtZXRob2QgJ1wiK28rXCInIGZvciBcIituK1wiIHdpZGdldCBpbnN0YW5jZVwiKTtyPWlbb10uYXBwbHkoaSxhKTtpZihyIT09aSYmciE9PXQpcmV0dXJuIGY9ciYmci5qcXVlcnk/Zi5wdXNoU3RhY2soci5nZXQoKSk6ciwhMX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUuZGF0YSh0aGlzLHMpO3Q/dC5vcHRpb24ob3x8e30pLl9pbml0KCk6ZS5kYXRhKHRoaXMscyxuZXcgaShvLHRoaXMpKX0pLGZ9fSxlLldpZGdldD1mdW5jdGlvbigpe30sZS5XaWRnZXQuX2NoaWxkQ29uc3RydWN0b3JzPVtdLGUuV2lkZ2V0LnByb3RvdHlwZT17d2lkZ2V0TmFtZTpcIndpZGdldFwiLHdpZGdldEV2ZW50UHJlZml4OlwiXCIsZGVmYXVsdEVsZW1lbnQ6XCI8ZGl2PlwiLG9wdGlvbnM6e2Rpc2FibGVkOiExLGNyZWF0ZTpudWxsfSxfY3JlYXRlV2lkZ2V0OmZ1bmN0aW9uKHQscil7cj1lKHJ8fHRoaXMuZGVmYXVsdEVsZW1lbnR8fHRoaXMpWzBdLHRoaXMuZWxlbWVudD1lKHIpLHRoaXMudXVpZD1uKyssdGhpcy5ldmVudE5hbWVzcGFjZT1cIi5cIit0aGlzLndpZGdldE5hbWUrdGhpcy51dWlkLHRoaXMub3B0aW9ucz1lLndpZGdldC5leHRlbmQoe30sdGhpcy5vcHRpb25zLHRoaXMuX2dldENyZWF0ZU9wdGlvbnMoKSx0KSx0aGlzLmJpbmRpbmdzPWUoKSx0aGlzLmhvdmVyYWJsZT1lKCksdGhpcy5mb2N1c2FibGU9ZSgpLHIhPT10aGlzJiYoZS5kYXRhKHIsdGhpcy53aWRnZXROYW1lLHRoaXMpLGUuZGF0YShyLHRoaXMud2lkZ2V0RnVsbE5hbWUsdGhpcyksdGhpcy5fb24oITAsdGhpcy5lbGVtZW50LHtyZW1vdmU6ZnVuY3Rpb24oZSl7ZS50YXJnZXQ9PT1yJiZ0aGlzLmRlc3Ryb3koKX19KSx0aGlzLmRvY3VtZW50PWUoci5zdHlsZT9yLm93bmVyRG9jdW1lbnQ6ci5kb2N1bWVudHx8ciksdGhpcy53aW5kb3c9ZSh0aGlzLmRvY3VtZW50WzBdLmRlZmF1bHRWaWV3fHx0aGlzLmRvY3VtZW50WzBdLnBhcmVudFdpbmRvdykpLHRoaXMuX2NyZWF0ZSgpLHRoaXMuX3RyaWdnZXIoXCJjcmVhdGVcIixudWxsLHRoaXMuX2dldENyZWF0ZUV2ZW50RGF0YSgpKSx0aGlzLl9pbml0KCl9LF9nZXRDcmVhdGVPcHRpb25zOmUubm9vcCxfZ2V0Q3JlYXRlRXZlbnREYXRhOmUubm9vcCxfY3JlYXRlOmUubm9vcCxfaW5pdDplLm5vb3AsZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX2Rlc3Ryb3koKSx0aGlzLmVsZW1lbnQudW5iaW5kKHRoaXMuZXZlbnROYW1lc3BhY2UpLnJlbW92ZURhdGEodGhpcy53aWRnZXROYW1lKS5yZW1vdmVEYXRhKHRoaXMud2lkZ2V0RnVsbE5hbWUpLnJlbW92ZURhdGEoZS5jYW1lbENhc2UodGhpcy53aWRnZXRGdWxsTmFtZSkpLHRoaXMud2lkZ2V0KCkudW5iaW5kKHRoaXMuZXZlbnROYW1lc3BhY2UpLnJlbW92ZUF0dHIoXCJhcmlhLWRpc2FibGVkXCIpLnJlbW92ZUNsYXNzKHRoaXMud2lkZ2V0RnVsbE5hbWUrXCItZGlzYWJsZWQgXCIrXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiKSx0aGlzLmJpbmRpbmdzLnVuYmluZCh0aGlzLmV2ZW50TmFtZXNwYWNlKSx0aGlzLmhvdmVyYWJsZS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWhvdmVyXCIpLHRoaXMuZm9jdXNhYmxlLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtZm9jdXNcIil9LF9kZXN0cm95OmUubm9vcCx3aWRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50fSxvcHRpb246ZnVuY3Rpb24obixyKXt2YXIgaT1uLHMsbyx1O2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXJldHVybiBlLndpZGdldC5leHRlbmQoe30sdGhpcy5vcHRpb25zKTtpZih0eXBlb2Ygbj09XCJzdHJpbmdcIil7aT17fSxzPW4uc3BsaXQoXCIuXCIpLG49cy5zaGlmdCgpO2lmKHMubGVuZ3RoKXtvPWlbbl09ZS53aWRnZXQuZXh0ZW5kKHt9LHRoaXMub3B0aW9uc1tuXSk7Zm9yKHU9MDt1PHMubGVuZ3RoLTE7dSsrKW9bc1t1XV09b1tzW3VdXXx8e30sbz1vW3NbdV1dO249cy5wb3AoKTtpZihyPT09dClyZXR1cm4gb1tuXT09PXQ/bnVsbDpvW25dO29bbl09cn1lbHNle2lmKHI9PT10KXJldHVybiB0aGlzLm9wdGlvbnNbbl09PT10P251bGw6dGhpcy5vcHRpb25zW25dO2lbbl09cn19cmV0dXJuIHRoaXMuX3NldE9wdGlvbnMoaSksdGhpc30sX3NldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQ7Zm9yKHQgaW4gZSl0aGlzLl9zZXRPcHRpb24odCxlW3RdKTtyZXR1cm4gdGhpc30sX3NldE9wdGlvbjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm9wdGlvbnNbZV09dCxlPT09XCJkaXNhYmxlZFwiJiYodGhpcy53aWRnZXQoKS50b2dnbGVDbGFzcyh0aGlzLndpZGdldEZ1bGxOYW1lK1wiLWRpc2FibGVkIHVpLXN0YXRlLWRpc2FibGVkXCIsISF0KS5hdHRyKFwiYXJpYS1kaXNhYmxlZFwiLHQpLHRoaXMuaG92ZXJhYmxlLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtaG92ZXJcIiksdGhpcy5mb2N1c2FibGUucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1mb2N1c1wiKSksdGhpc30sZW5hYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NldE9wdGlvbihcImRpc2FibGVkXCIsITEpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NldE9wdGlvbihcImRpc2FibGVkXCIsITApfSxfb246ZnVuY3Rpb24odCxuLHIpe3ZhciBpLHM9dGhpczt0eXBlb2YgdCE9XCJib29sZWFuXCImJihyPW4sbj10LHQ9ITEpLHI/KG49aT1lKG4pLHRoaXMuYmluZGluZ3M9dGhpcy5iaW5kaW5ncy5hZGQobikpOihyPW4sbj10aGlzLmVsZW1lbnQsaT10aGlzLndpZGdldCgpKSxlLmVhY2gocixmdW5jdGlvbihyLG8pe2Z1bmN0aW9uIHUoKXtpZighdCYmKHMub3B0aW9ucy5kaXNhYmxlZD09PSEwfHxlKHRoaXMpLmhhc0NsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIikpKXJldHVybjtyZXR1cm4odHlwZW9mIG89PVwic3RyaW5nXCI/c1tvXTpvKS5hcHBseShzLGFyZ3VtZW50cyl9dHlwZW9mIG8hPVwic3RyaW5nXCImJih1Lmd1aWQ9by5ndWlkPW8uZ3VpZHx8dS5ndWlkfHxlLmd1aWQrKyk7dmFyIGE9ci5tYXRjaCgvXihcXHcrKVxccyooLiopJC8pLGY9YVsxXStzLmV2ZW50TmFtZXNwYWNlLGw9YVsyXTtsP2kuZGVsZWdhdGUobCxmLHUpOm4uYmluZChmLHUpfSl9LF9vZmY6ZnVuY3Rpb24oZSx0KXt0PSh0fHxcIlwiKS5zcGxpdChcIiBcIikuam9pbih0aGlzLmV2ZW50TmFtZXNwYWNlK1wiIFwiKSt0aGlzLmV2ZW50TmFtZXNwYWNlLGUudW5iaW5kKHQpLnVuZGVsZWdhdGUodCl9LF9kZWxheTpmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oKXtyZXR1cm4odHlwZW9mIGU9PVwic3RyaW5nXCI/cltlXTplKS5hcHBseShyLGFyZ3VtZW50cyl9dmFyIHI9dGhpcztyZXR1cm4gc2V0VGltZW91dChuLHR8fDApfSxfaG92ZXJhYmxlOmZ1bmN0aW9uKHQpe3RoaXMuaG92ZXJhYmxlPXRoaXMuaG92ZXJhYmxlLmFkZCh0KSx0aGlzLl9vbih0LHttb3VzZWVudGVyOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcyhcInVpLXN0YXRlLWhvdmVyXCIpfSxtb3VzZWxlYXZlOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWhvdmVyXCIpfX0pfSxfZm9jdXNhYmxlOmZ1bmN0aW9uKHQpe3RoaXMuZm9jdXNhYmxlPXRoaXMuZm9jdXNhYmxlLmFkZCh0KSx0aGlzLl9vbih0LHtmb2N1c2luOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcyhcInVpLXN0YXRlLWZvY3VzXCIpfSxmb2N1c291dDpmdW5jdGlvbih0KXtlKHQuY3VycmVudFRhcmdldCkucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1mb2N1c1wiKX19KX0sX3RyaWdnZXI6ZnVuY3Rpb24odCxuLHIpe3ZhciBpLHMsbz10aGlzLm9wdGlvbnNbdF07cj1yfHx7fSxuPWUuRXZlbnQobiksbi50eXBlPSh0PT09dGhpcy53aWRnZXRFdmVudFByZWZpeD90OnRoaXMud2lkZ2V0RXZlbnRQcmVmaXgrdCkudG9Mb3dlckNhc2UoKSxuLnRhcmdldD10aGlzLmVsZW1lbnRbMF0scz1uLm9yaWdpbmFsRXZlbnQ7aWYocylmb3IoaSBpbiBzKWkgaW4gbnx8KG5baV09c1tpXSk7cmV0dXJuIHRoaXMuZWxlbWVudC50cmlnZ2VyKG4sciksIShlLmlzRnVuY3Rpb24obykmJm8uYXBwbHkodGhpcy5lbGVtZW50WzBdLFtuXS5jb25jYXQocikpPT09ITF8fG4uaXNEZWZhdWx0UHJldmVudGVkKCkpfX0sZS5lYWNoKHtzaG93OlwiZmFkZUluXCIsaGlkZTpcImZhZGVPdXRcIn0sZnVuY3Rpb24odCxuKXtlLldpZGdldC5wcm90b3R5cGVbXCJfXCIrdF09ZnVuY3Rpb24ocixpLHMpe3R5cGVvZiBpPT1cInN0cmluZ1wiJiYoaT17ZWZmZWN0Oml9KTt2YXIgbyx1PWk/aT09PSEwfHx0eXBlb2YgaT09XCJudW1iZXJcIj9uOmkuZWZmZWN0fHxuOnQ7aT1pfHx7fSx0eXBlb2YgaT09XCJudW1iZXJcIiYmKGk9e2R1cmF0aW9uOml9KSxvPSFlLmlzRW1wdHlPYmplY3QoaSksaS5jb21wbGV0ZT1zLGkuZGVsYXkmJnIuZGVsYXkoaS5kZWxheSksbyYmZS5lZmZlY3RzJiYoZS5lZmZlY3RzLmVmZmVjdFt1XXx8ZS51aUJhY2tDb21wYXQhPT0hMSYmZS5lZmZlY3RzW3VdKT9yW3RdKGkpOnUhPT10JiZyW3VdP3JbdV0oaS5kdXJhdGlvbixpLmVhc2luZyxzKTpyLnF1ZXVlKGZ1bmN0aW9uKG4pe2UodGhpcylbdF0oKSxzJiZzLmNhbGwoclswXSksbigpfSl9fSksZS51aUJhY2tDb21wYXQhPT0hMSYmKGUuV2lkZ2V0LnByb3RvdHlwZS5fZ2V0Q3JlYXRlT3B0aW9ucz1mdW5jdGlvbigpe3JldHVybiBlLm1ldGFkYXRhJiZlLm1ldGFkYXRhLmdldCh0aGlzLmVsZW1lbnRbMF0pW3RoaXMud2lkZ2V0TmFtZV19KX0pKGpRdWVyeSk7KGZ1bmN0aW9uKGUsdCl7dmFyIG49ITE7ZShkb2N1bWVudCkubW91c2V1cChmdW5jdGlvbihlKXtuPSExfSksZS53aWRnZXQoXCJ1aS5tb3VzZVwiLHt2ZXJzaW9uOlwiMS45LjJcIixvcHRpb25zOntjYW5jZWw6XCJpbnB1dCx0ZXh0YXJlYSxidXR0b24sc2VsZWN0LG9wdGlvblwiLGRpc3RhbmNlOjEsZGVsYXk6MH0sX21vdXNlSW5pdDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5lbGVtZW50LmJpbmQoXCJtb3VzZWRvd24uXCIrdGhpcy53aWRnZXROYW1lLGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9tb3VzZURvd24oZSl9KS5iaW5kKFwiY2xpY2suXCIrdGhpcy53aWRnZXROYW1lLGZ1bmN0aW9uKG4pe2lmKCEwPT09ZS5kYXRhKG4udGFyZ2V0LHQud2lkZ2V0TmFtZStcIi5wcmV2ZW50Q2xpY2tFdmVudFwiKSlyZXR1cm4gZS5yZW1vdmVEYXRhKG4udGFyZ2V0LHQud2lkZ2V0TmFtZStcIi5wcmV2ZW50Q2xpY2tFdmVudFwiKSxuLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLCExfSksdGhpcy5zdGFydGVkPSExfSxfbW91c2VEZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnVuYmluZChcIi5cIit0aGlzLndpZGdldE5hbWUpLHRoaXMuX21vdXNlTW92ZURlbGVnYXRlJiZlKGRvY3VtZW50KS51bmJpbmQoXCJtb3VzZW1vdmUuXCIrdGhpcy53aWRnZXROYW1lLHRoaXMuX21vdXNlTW92ZURlbGVnYXRlKS51bmJpbmQoXCJtb3VzZXVwLlwiK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZVVwRGVsZWdhdGUpfSxfbW91c2VEb3duOmZ1bmN0aW9uKHQpe2lmKG4pcmV0dXJuO3RoaXMuX21vdXNlU3RhcnRlZCYmdGhpcy5fbW91c2VVcCh0KSx0aGlzLl9tb3VzZURvd25FdmVudD10O3ZhciByPXRoaXMsaT10LndoaWNoPT09MSxzPXR5cGVvZiB0aGlzLm9wdGlvbnMuY2FuY2VsPT1cInN0cmluZ1wiJiZ0LnRhcmdldC5ub2RlTmFtZT9lKHQudGFyZ2V0KS5jbG9zZXN0KHRoaXMub3B0aW9ucy5jYW5jZWwpLmxlbmd0aDohMTtpZighaXx8c3x8IXRoaXMuX21vdXNlQ2FwdHVyZSh0KSlyZXR1cm4hMDt0aGlzLm1vdXNlRGVsYXlNZXQ9IXRoaXMub3B0aW9ucy5kZWxheSx0aGlzLm1vdXNlRGVsYXlNZXR8fCh0aGlzLl9tb3VzZURlbGF5VGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3IubW91c2VEZWxheU1ldD0hMH0sdGhpcy5vcHRpb25zLmRlbGF5KSk7aWYodGhpcy5fbW91c2VEaXN0YW5jZU1ldCh0KSYmdGhpcy5fbW91c2VEZWxheU1ldCh0KSl7dGhpcy5fbW91c2VTdGFydGVkPXRoaXMuX21vdXNlU3RhcnQodCkhPT0hMTtpZighdGhpcy5fbW91c2VTdGFydGVkKXJldHVybiB0LnByZXZlbnREZWZhdWx0KCksITB9cmV0dXJuITA9PT1lLmRhdGEodC50YXJnZXQsdGhpcy53aWRnZXROYW1lK1wiLnByZXZlbnRDbGlja0V2ZW50XCIpJiZlLnJlbW92ZURhdGEodC50YXJnZXQsdGhpcy53aWRnZXROYW1lK1wiLnByZXZlbnRDbGlja0V2ZW50XCIpLHRoaXMuX21vdXNlTW92ZURlbGVnYXRlPWZ1bmN0aW9uKGUpe3JldHVybiByLl9tb3VzZU1vdmUoZSl9LHRoaXMuX21vdXNlVXBEZWxlZ2F0ZT1mdW5jdGlvbihlKXtyZXR1cm4gci5fbW91c2VVcChlKX0sZShkb2N1bWVudCkuYmluZChcIm1vdXNlbW92ZS5cIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUpLmJpbmQoXCJtb3VzZXVwLlwiK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZVVwRGVsZWdhdGUpLHQucHJldmVudERlZmF1bHQoKSxuPSEwLCEwfSxfbW91c2VNb3ZlOmZ1bmN0aW9uKHQpe3JldHVybiFlLnVpLmllfHxkb2N1bWVudC5kb2N1bWVudE1vZGU+PTl8fCEhdC5idXR0b24/dGhpcy5fbW91c2VTdGFydGVkPyh0aGlzLl9tb3VzZURyYWcodCksdC5wcmV2ZW50RGVmYXVsdCgpKToodGhpcy5fbW91c2VEaXN0YW5jZU1ldCh0KSYmdGhpcy5fbW91c2VEZWxheU1ldCh0KSYmKHRoaXMuX21vdXNlU3RhcnRlZD10aGlzLl9tb3VzZVN0YXJ0KHRoaXMuX21vdXNlRG93bkV2ZW50LHQpIT09ITEsdGhpcy5fbW91c2VTdGFydGVkP3RoaXMuX21vdXNlRHJhZyh0KTp0aGlzLl9tb3VzZVVwKHQpKSwhdGhpcy5fbW91c2VTdGFydGVkKTp0aGlzLl9tb3VzZVVwKHQpfSxfbW91c2VVcDpmdW5jdGlvbih0KXtyZXR1cm4gZShkb2N1bWVudCkudW5iaW5kKFwibW91c2Vtb3ZlLlwiK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZSkudW5iaW5kKFwibW91c2V1cC5cIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VVcERlbGVnYXRlKSx0aGlzLl9tb3VzZVN0YXJ0ZWQmJih0aGlzLl9tb3VzZVN0YXJ0ZWQ9ITEsdC50YXJnZXQ9PT10aGlzLl9tb3VzZURvd25FdmVudC50YXJnZXQmJmUuZGF0YSh0LnRhcmdldCx0aGlzLndpZGdldE5hbWUrXCIucHJldmVudENsaWNrRXZlbnRcIiwhMCksdGhpcy5fbW91c2VTdG9wKHQpKSwhMX0sX21vdXNlRGlzdGFuY2VNZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGgubWF4KE1hdGguYWJzKHRoaXMuX21vdXNlRG93bkV2ZW50LnBhZ2VYLWUucGFnZVgpLE1hdGguYWJzKHRoaXMuX21vdXNlRG93bkV2ZW50LnBhZ2VZLWUucGFnZVkpKT49dGhpcy5vcHRpb25zLmRpc3RhbmNlfSxfbW91c2VEZWxheU1ldDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5tb3VzZURlbGF5TWV0fSxfbW91c2VTdGFydDpmdW5jdGlvbihlKXt9LF9tb3VzZURyYWc6ZnVuY3Rpb24oZSl7fSxfbW91c2VTdG9wOmZ1bmN0aW9uKGUpe30sX21vdXNlQ2FwdHVyZTpmdW5jdGlvbihlKXtyZXR1cm4hMH19KX0pKGpRdWVyeSk7KGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gaChlLHQsbil7cmV0dXJuW3BhcnNlSW50KGVbMF0sMTApKihsLnRlc3QoZVswXSk/dC8xMDA6MSkscGFyc2VJbnQoZVsxXSwxMCkqKGwudGVzdChlWzFdKT9uLzEwMDoxKV19ZnVuY3Rpb24gcCh0LG4pe3JldHVybiBwYXJzZUludChlLmNzcyh0LG4pLDEwKXx8MH1lLnVpPWUudWl8fHt9O3ZhciBuLHI9TWF0aC5tYXgsaT1NYXRoLmFicyxzPU1hdGgucm91bmQsbz0vbGVmdHxjZW50ZXJ8cmlnaHQvLHU9L3RvcHxjZW50ZXJ8Ym90dG9tLyxhPS9bXFwrXFwtXVxcZCslPy8sZj0vXlxcdysvLGw9LyUkLyxjPWUuZm4ucG9zaXRpb247ZS5wb3NpdGlvbj17c2Nyb2xsYmFyV2lkdGg6ZnVuY3Rpb24oKXtpZihuIT09dClyZXR1cm4gbjt2YXIgcixpLHM9ZShcIjxkaXYgc3R5bGU9J2Rpc3BsYXk6YmxvY2s7d2lkdGg6NTBweDtoZWlnaHQ6NTBweDtvdmVyZmxvdzpoaWRkZW47Jz48ZGl2IHN0eWxlPSdoZWlnaHQ6MTAwcHg7d2lkdGg6YXV0bzsnPjwvZGl2PjwvZGl2PlwiKSxvPXMuY2hpbGRyZW4oKVswXTtyZXR1cm4gZShcImJvZHlcIikuYXBwZW5kKHMpLHI9by5vZmZzZXRXaWR0aCxzLmNzcyhcIm92ZXJmbG93XCIsXCJzY3JvbGxcIiksaT1vLm9mZnNldFdpZHRoLHI9PT1pJiYoaT1zWzBdLmNsaWVudFdpZHRoKSxzLnJlbW92ZSgpLG49ci1pfSxnZXRTY3JvbGxJbmZvOmZ1bmN0aW9uKHQpe3ZhciBuPXQuaXNXaW5kb3c/XCJcIjp0LmVsZW1lbnQuY3NzKFwib3ZlcmZsb3cteFwiKSxyPXQuaXNXaW5kb3c/XCJcIjp0LmVsZW1lbnQuY3NzKFwib3ZlcmZsb3cteVwiKSxpPW49PT1cInNjcm9sbFwifHxuPT09XCJhdXRvXCImJnQud2lkdGg8dC5lbGVtZW50WzBdLnNjcm9sbFdpZHRoLHM9cj09PVwic2Nyb2xsXCJ8fHI9PT1cImF1dG9cIiYmdC5oZWlnaHQ8dC5lbGVtZW50WzBdLnNjcm9sbEhlaWdodDtyZXR1cm57d2lkdGg6aT9lLnBvc2l0aW9uLnNjcm9sbGJhcldpZHRoKCk6MCxoZWlnaHQ6cz9lLnBvc2l0aW9uLnNjcm9sbGJhcldpZHRoKCk6MH19LGdldFdpdGhpbkluZm86ZnVuY3Rpb24odCl7dmFyIG49ZSh0fHx3aW5kb3cpLHI9ZS5pc1dpbmRvdyhuWzBdKTtyZXR1cm57ZWxlbWVudDpuLGlzV2luZG93OnIsb2Zmc2V0Om4ub2Zmc2V0KCl8fHtsZWZ0OjAsdG9wOjB9LHNjcm9sbExlZnQ6bi5zY3JvbGxMZWZ0KCksc2Nyb2xsVG9wOm4uc2Nyb2xsVG9wKCksd2lkdGg6cj9uLndpZHRoKCk6bi5vdXRlcldpZHRoKCksaGVpZ2h0OnI/bi5oZWlnaHQoKTpuLm91dGVySGVpZ2h0KCl9fX0sZS5mbi5wb3NpdGlvbj1mdW5jdGlvbih0KXtpZighdHx8IXQub2YpcmV0dXJuIGMuYXBwbHkodGhpcyxhcmd1bWVudHMpO3Q9ZS5leHRlbmQoe30sdCk7dmFyIG4sbCxkLHYsbSxnPWUodC5vZikseT1lLnBvc2l0aW9uLmdldFdpdGhpbkluZm8odC53aXRoaW4pLGI9ZS5wb3NpdGlvbi5nZXRTY3JvbGxJbmZvKHkpLHc9Z1swXSxFPSh0LmNvbGxpc2lvbnx8XCJmbGlwXCIpLnNwbGl0KFwiIFwiKSxTPXt9O3JldHVybiB3Lm5vZGVUeXBlPT09OT8obD1nLndpZHRoKCksZD1nLmhlaWdodCgpLHY9e3RvcDowLGxlZnQ6MH0pOmUuaXNXaW5kb3codyk/KGw9Zy53aWR0aCgpLGQ9Zy5oZWlnaHQoKSx2PXt0b3A6Zy5zY3JvbGxUb3AoKSxsZWZ0Omcuc2Nyb2xsTGVmdCgpfSk6dy5wcmV2ZW50RGVmYXVsdD8odC5hdD1cImxlZnQgdG9wXCIsbD1kPTAsdj17dG9wOncucGFnZVksbGVmdDp3LnBhZ2VYfSk6KGw9Zy5vdXRlcldpZHRoKCksZD1nLm91dGVySGVpZ2h0KCksdj1nLm9mZnNldCgpKSxtPWUuZXh0ZW5kKHt9LHYpLGUuZWFjaChbXCJteVwiLFwiYXRcIl0sZnVuY3Rpb24oKXt2YXIgZT0odFt0aGlzXXx8XCJcIikuc3BsaXQoXCIgXCIpLG4scjtlLmxlbmd0aD09PTEmJihlPW8udGVzdChlWzBdKT9lLmNvbmNhdChbXCJjZW50ZXJcIl0pOnUudGVzdChlWzBdKT9bXCJjZW50ZXJcIl0uY29uY2F0KGUpOltcImNlbnRlclwiLFwiY2VudGVyXCJdKSxlWzBdPW8udGVzdChlWzBdKT9lWzBdOlwiY2VudGVyXCIsZVsxXT11LnRlc3QoZVsxXSk/ZVsxXTpcImNlbnRlclwiLG49YS5leGVjKGVbMF0pLHI9YS5leGVjKGVbMV0pLFNbdGhpc109W24/blswXTowLHI/clswXTowXSx0W3RoaXNdPVtmLmV4ZWMoZVswXSlbMF0sZi5leGVjKGVbMV0pWzBdXX0pLEUubGVuZ3RoPT09MSYmKEVbMV09RVswXSksdC5hdFswXT09PVwicmlnaHRcIj9tLmxlZnQrPWw6dC5hdFswXT09PVwiY2VudGVyXCImJihtLmxlZnQrPWwvMiksdC5hdFsxXT09PVwiYm90dG9tXCI/bS50b3ArPWQ6dC5hdFsxXT09PVwiY2VudGVyXCImJihtLnRvcCs9ZC8yKSxuPWgoUy5hdCxsLGQpLG0ubGVmdCs9blswXSxtLnRvcCs9blsxXSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbyx1LGE9ZSh0aGlzKSxmPWEub3V0ZXJXaWR0aCgpLGM9YS5vdXRlckhlaWdodCgpLHc9cCh0aGlzLFwibWFyZ2luTGVmdFwiKSx4PXAodGhpcyxcIm1hcmdpblRvcFwiKSxUPWYrdytwKHRoaXMsXCJtYXJnaW5SaWdodFwiKStiLndpZHRoLE49Yyt4K3AodGhpcyxcIm1hcmdpbkJvdHRvbVwiKStiLmhlaWdodCxDPWUuZXh0ZW5kKHt9LG0pLGs9aChTLm15LGEub3V0ZXJXaWR0aCgpLGEub3V0ZXJIZWlnaHQoKSk7dC5teVswXT09PVwicmlnaHRcIj9DLmxlZnQtPWY6dC5teVswXT09PVwiY2VudGVyXCImJihDLmxlZnQtPWYvMiksdC5teVsxXT09PVwiYm90dG9tXCI/Qy50b3AtPWM6dC5teVsxXT09PVwiY2VudGVyXCImJihDLnRvcC09Yy8yKSxDLmxlZnQrPWtbMF0sQy50b3ArPWtbMV0sZS5zdXBwb3J0Lm9mZnNldEZyYWN0aW9uc3x8KEMubGVmdD1zKEMubGVmdCksQy50b3A9cyhDLnRvcCkpLG89e21hcmdpbkxlZnQ6dyxtYXJnaW5Ub3A6eH0sZS5lYWNoKFtcImxlZnRcIixcInRvcFwiXSxmdW5jdGlvbihyLGkpe2UudWkucG9zaXRpb25bRVtyXV0mJmUudWkucG9zaXRpb25bRVtyXV1baV0oQyx7dGFyZ2V0V2lkdGg6bCx0YXJnZXRIZWlnaHQ6ZCxlbGVtV2lkdGg6ZixlbGVtSGVpZ2h0OmMsY29sbGlzaW9uUG9zaXRpb246byxjb2xsaXNpb25XaWR0aDpULGNvbGxpc2lvbkhlaWdodDpOLG9mZnNldDpbblswXStrWzBdLG5bMV0ra1sxXV0sbXk6dC5teSxhdDp0LmF0LHdpdGhpbjp5LGVsZW06YX0pfSksZS5mbi5iZ2lmcmFtZSYmYS5iZ2lmcmFtZSgpLHQudXNpbmcmJih1PWZ1bmN0aW9uKGUpe3ZhciBuPXYubGVmdC1DLmxlZnQscz1uK2wtZixvPXYudG9wLUMudG9wLHU9bytkLWMsaD17dGFyZ2V0OntlbGVtZW50OmcsbGVmdDp2LmxlZnQsdG9wOnYudG9wLHdpZHRoOmwsaGVpZ2h0OmR9LGVsZW1lbnQ6e2VsZW1lbnQ6YSxsZWZ0OkMubGVmdCx0b3A6Qy50b3Asd2lkdGg6ZixoZWlnaHQ6Y30saG9yaXpvbnRhbDpzPDA/XCJsZWZ0XCI6bj4wP1wicmlnaHRcIjpcImNlbnRlclwiLHZlcnRpY2FsOnU8MD9cInRvcFwiOm8+MD9cImJvdHRvbVwiOlwibWlkZGxlXCJ9O2w8ZiYmaShuK3MpPGwmJihoLmhvcml6b250YWw9XCJjZW50ZXJcIiksZDxjJiZpKG8rdSk8ZCYmKGgudmVydGljYWw9XCJtaWRkbGVcIikscihpKG4pLGkocykpPnIoaShvKSxpKHUpKT9oLmltcG9ydGFudD1cImhvcml6b250YWxcIjpoLmltcG9ydGFudD1cInZlcnRpY2FsXCIsdC51c2luZy5jYWxsKHRoaXMsZSxoKX0pLGEub2Zmc2V0KGUuZXh0ZW5kKEMse3VzaW5nOnV9KSl9KX0sZS51aS5wb3NpdGlvbj17Zml0OntsZWZ0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dC53aXRoaW4saT1uLmlzV2luZG93P24uc2Nyb2xsTGVmdDpuLm9mZnNldC5sZWZ0LHM9bi53aWR0aCxvPWUubGVmdC10LmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQsdT1pLW8sYT1vK3QuY29sbGlzaW9uV2lkdGgtcy1pLGY7dC5jb2xsaXNpb25XaWR0aD5zP3U+MCYmYTw9MD8oZj1lLmxlZnQrdSt0LmNvbGxpc2lvbldpZHRoLXMtaSxlLmxlZnQrPXUtZik6YT4wJiZ1PD0wP2UubGVmdD1pOnU+YT9lLmxlZnQ9aStzLXQuY29sbGlzaW9uV2lkdGg6ZS5sZWZ0PWk6dT4wP2UubGVmdCs9dTphPjA/ZS5sZWZ0LT1hOmUubGVmdD1yKGUubGVmdC1vLGUubGVmdCl9LHRvcDpmdW5jdGlvbihlLHQpe3ZhciBuPXQud2l0aGluLGk9bi5pc1dpbmRvdz9uLnNjcm9sbFRvcDpuLm9mZnNldC50b3Ascz10LndpdGhpbi5oZWlnaHQsbz1lLnRvcC10LmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpblRvcCx1PWktbyxhPW8rdC5jb2xsaXNpb25IZWlnaHQtcy1pLGY7dC5jb2xsaXNpb25IZWlnaHQ+cz91PjAmJmE8PTA/KGY9ZS50b3ArdSt0LmNvbGxpc2lvbkhlaWdodC1zLWksZS50b3ArPXUtZik6YT4wJiZ1PD0wP2UudG9wPWk6dT5hP2UudG9wPWkrcy10LmNvbGxpc2lvbkhlaWdodDplLnRvcD1pOnU+MD9lLnRvcCs9dTphPjA/ZS50b3AtPWE6ZS50b3A9cihlLnRvcC1vLGUudG9wKX19LGZsaXA6e2xlZnQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10LndpdGhpbixyPW4ub2Zmc2V0LmxlZnQrbi5zY3JvbGxMZWZ0LHM9bi53aWR0aCxvPW4uaXNXaW5kb3c/bi5zY3JvbGxMZWZ0Om4ub2Zmc2V0LmxlZnQsdT1lLmxlZnQtdC5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5MZWZ0LGE9dS1vLGY9dSt0LmNvbGxpc2lvbldpZHRoLXMtbyxsPXQubXlbMF09PT1cImxlZnRcIj8tdC5lbGVtV2lkdGg6dC5teVswXT09PVwicmlnaHRcIj90LmVsZW1XaWR0aDowLGM9dC5hdFswXT09PVwibGVmdFwiP3QudGFyZ2V0V2lkdGg6dC5hdFswXT09PVwicmlnaHRcIj8tdC50YXJnZXRXaWR0aDowLGg9LTIqdC5vZmZzZXRbMF0scCxkO2lmKGE8MCl7cD1lLmxlZnQrbCtjK2grdC5jb2xsaXNpb25XaWR0aC1zLXI7aWYocDwwfHxwPGkoYSkpZS5sZWZ0Kz1sK2MraH1lbHNlIGlmKGY+MCl7ZD1lLmxlZnQtdC5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5MZWZ0K2wrYytoLW87aWYoZD4wfHxpKGQpPGYpZS5sZWZ0Kz1sK2MraH19LHRvcDpmdW5jdGlvbihlLHQpe3ZhciBuPXQud2l0aGluLHI9bi5vZmZzZXQudG9wK24uc2Nyb2xsVG9wLHM9bi5oZWlnaHQsbz1uLmlzV2luZG93P24uc2Nyb2xsVG9wOm4ub2Zmc2V0LnRvcCx1PWUudG9wLXQuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luVG9wLGE9dS1vLGY9dSt0LmNvbGxpc2lvbkhlaWdodC1zLW8sbD10Lm15WzFdPT09XCJ0b3BcIixjPWw/LXQuZWxlbUhlaWdodDp0Lm15WzFdPT09XCJib3R0b21cIj90LmVsZW1IZWlnaHQ6MCxoPXQuYXRbMV09PT1cInRvcFwiP3QudGFyZ2V0SGVpZ2h0OnQuYXRbMV09PT1cImJvdHRvbVwiPy10LnRhcmdldEhlaWdodDowLHA9LTIqdC5vZmZzZXRbMV0sZCx2O2E8MD8odj1lLnRvcCtjK2grcCt0LmNvbGxpc2lvbkhlaWdodC1zLXIsZS50b3ArYytoK3A+YSYmKHY8MHx8djxpKGEpKSYmKGUudG9wKz1jK2grcCkpOmY+MCYmKGQ9ZS50b3AtdC5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3ArYytoK3AtbyxlLnRvcCtjK2grcD5mJiYoZD4wfHxpKGQpPGYpJiYoZS50b3ArPWMraCtwKSl9fSxmbGlwZml0OntsZWZ0OmZ1bmN0aW9uKCl7ZS51aS5wb3NpdGlvbi5mbGlwLmxlZnQuYXBwbHkodGhpcyxhcmd1bWVudHMpLGUudWkucG9zaXRpb24uZml0LmxlZnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx0b3A6ZnVuY3Rpb24oKXtlLnVpLnBvc2l0aW9uLmZsaXAudG9wLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlLnVpLnBvc2l0aW9uLmZpdC50b3AuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19LGZ1bmN0aW9uKCl7dmFyIHQsbixyLGkscyxvPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXSx1PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KG8/XCJkaXZcIjpcImJvZHlcIikscj17dmlzaWJpbGl0eTpcImhpZGRlblwiLHdpZHRoOjAsaGVpZ2h0OjAsYm9yZGVyOjAsbWFyZ2luOjAsYmFja2dyb3VuZDpcIm5vbmVcIn0sbyYmZS5leHRlbmQocix7cG9zaXRpb246XCJhYnNvbHV0ZVwiLGxlZnQ6XCItMTAwMHB4XCIsdG9wOlwiLTEwMDBweFwifSk7Zm9yKHMgaW4gcil0LnN0eWxlW3NdPXJbc107dC5hcHBlbmRDaGlsZCh1KSxuPW98fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxuLmluc2VydEJlZm9yZSh0LG4uZmlyc3RDaGlsZCksdS5zdHlsZS5jc3NUZXh0PVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMC43NDMyMjIycHg7XCIsaT1lKHUpLm9mZnNldCgpLmxlZnQsZS5zdXBwb3J0Lm9mZnNldEZyYWN0aW9ucz1pPjEwJiZpPDExLHQuaW5uZXJIVE1MPVwiXCIsbi5yZW1vdmVDaGlsZCh0KX0oKSxlLnVpQmFja0NvbXBhdCE9PSExJiZmdW5jdGlvbihlKXt2YXIgbj1lLmZuLnBvc2l0aW9uO2UuZm4ucG9zaXRpb249ZnVuY3Rpb24ocil7aWYoIXJ8fCFyLm9mZnNldClyZXR1cm4gbi5jYWxsKHRoaXMscik7dmFyIGk9ci5vZmZzZXQuc3BsaXQoXCIgXCIpLHM9ci5hdC5zcGxpdChcIiBcIik7cmV0dXJuIGkubGVuZ3RoPT09MSYmKGlbMV09aVswXSksL15cXGQvLnRlc3QoaVswXSkmJihpWzBdPVwiK1wiK2lbMF0pLC9eXFxkLy50ZXN0KGlbMV0pJiYoaVsxXT1cIitcIitpWzFdKSxzLmxlbmd0aD09PTEmJigvbGVmdHxjZW50ZXJ8cmlnaHQvLnRlc3Qoc1swXSk/c1sxXT1cImNlbnRlclwiOihzWzFdPXNbMF0sc1swXT1cImNlbnRlclwiKSksbi5jYWxsKHRoaXMsZS5leHRlbmQocix7YXQ6c1swXStpWzBdK1wiIFwiK3NbMV0raVsxXSxvZmZzZXQ6dH0pKX19KGpRdWVyeSl9KShqUXVlcnkpOyhmdW5jdGlvbihlLHQpe2Uud2lkZ2V0KFwidWkuZHJhZ2dhYmxlXCIsZS51aS5tb3VzZSx7dmVyc2lvbjpcIjEuOS4yXCIsd2lkZ2V0RXZlbnRQcmVmaXg6XCJkcmFnXCIsb3B0aW9uczp7YWRkQ2xhc3NlczohMCxhcHBlbmRUbzpcInBhcmVudFwiLGF4aXM6ITEsY29ubmVjdFRvU29ydGFibGU6ITEsY29udGFpbm1lbnQ6ITEsY3Vyc29yOlwiYXV0b1wiLGN1cnNvckF0OiExLGdyaWQ6ITEsaGFuZGxlOiExLGhlbHBlcjpcIm9yaWdpbmFsXCIsaWZyYW1lRml4OiExLG9wYWNpdHk6ITEscmVmcmVzaFBvc2l0aW9uczohMSxyZXZlcnQ6ITEscmV2ZXJ0RHVyYXRpb246NTAwLHNjb3BlOlwiZGVmYXVsdFwiLHNjcm9sbDohMCxzY3JvbGxTZW5zaXRpdml0eToyMCxzY3JvbGxTcGVlZDoyMCxzbmFwOiExLHNuYXBNb2RlOlwiYm90aFwiLHNuYXBUb2xlcmFuY2U6MjAsc3RhY2s6ITEsekluZGV4OiExfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmhlbHBlcj09XCJvcmlnaW5hbFwiJiYhL14oPzpyfGF8ZikvLnRlc3QodGhpcy5lbGVtZW50LmNzcyhcInBvc2l0aW9uXCIpKSYmKHRoaXMuZWxlbWVudFswXS5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIpLHRoaXMub3B0aW9ucy5hZGRDbGFzc2VzJiZ0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1kcmFnZ2FibGVcIiksdGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1kcmFnZ2FibGUtZGlzYWJsZWRcIiksdGhpcy5fbW91c2VJbml0KCl9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktZHJhZ2dhYmxlIHVpLWRyYWdnYWJsZS1kcmFnZ2luZyB1aS1kcmFnZ2FibGUtZGlzYWJsZWRcIiksdGhpcy5fbW91c2VEZXN0cm95KCl9LF9tb3VzZUNhcHR1cmU6ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5vcHRpb25zO3JldHVybiB0aGlzLmhlbHBlcnx8bi5kaXNhYmxlZHx8ZSh0LnRhcmdldCkuaXMoXCIudWktcmVzaXphYmxlLWhhbmRsZVwiKT8hMToodGhpcy5oYW5kbGU9dGhpcy5fZ2V0SGFuZGxlKHQpLHRoaXMuaGFuZGxlPyhlKG4uaWZyYW1lRml4PT09ITA/XCJpZnJhbWVcIjpuLmlmcmFtZUZpeCkuZWFjaChmdW5jdGlvbigpe2UoJzxkaXYgY2xhc3M9XCJ1aS1kcmFnZ2FibGUtaWZyYW1lRml4XCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZmZmO1wiPjwvZGl2PicpLmNzcyh7d2lkdGg6dGhpcy5vZmZzZXRXaWR0aCtcInB4XCIsaGVpZ2h0OnRoaXMub2Zmc2V0SGVpZ2h0K1wicHhcIixwb3NpdGlvbjpcImFic29sdXRlXCIsb3BhY2l0eTpcIjAuMDAxXCIsekluZGV4OjFlM30pLmNzcyhlKHRoaXMpLm9mZnNldCgpKS5hcHBlbmRUbyhcImJvZHlcIil9KSwhMCk6ITEpfSxfbW91c2VTdGFydDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLm9wdGlvbnM7cmV0dXJuIHRoaXMuaGVscGVyPXRoaXMuX2NyZWF0ZUhlbHBlcih0KSx0aGlzLmhlbHBlci5hZGRDbGFzcyhcInVpLWRyYWdnYWJsZS1kcmFnZ2luZ1wiKSx0aGlzLl9jYWNoZUhlbHBlclByb3BvcnRpb25zKCksZS51aS5kZG1hbmFnZXImJihlLnVpLmRkbWFuYWdlci5jdXJyZW50PXRoaXMpLHRoaXMuX2NhY2hlTWFyZ2lucygpLHRoaXMuY3NzUG9zaXRpb249dGhpcy5oZWxwZXIuY3NzKFwicG9zaXRpb25cIiksdGhpcy5zY3JvbGxQYXJlbnQ9dGhpcy5oZWxwZXIuc2Nyb2xsUGFyZW50KCksdGhpcy5vZmZzZXQ9dGhpcy5wb3NpdGlvbkFicz10aGlzLmVsZW1lbnQub2Zmc2V0KCksdGhpcy5vZmZzZXQ9e3RvcDp0aGlzLm9mZnNldC50b3AtdGhpcy5tYXJnaW5zLnRvcCxsZWZ0OnRoaXMub2Zmc2V0LmxlZnQtdGhpcy5tYXJnaW5zLmxlZnR9LGUuZXh0ZW5kKHRoaXMub2Zmc2V0LHtjbGljazp7bGVmdDp0LnBhZ2VYLXRoaXMub2Zmc2V0LmxlZnQsdG9wOnQucGFnZVktdGhpcy5vZmZzZXQudG9wfSxwYXJlbnQ6dGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCkscmVsYXRpdmU6dGhpcy5fZ2V0UmVsYXRpdmVPZmZzZXQoKX0pLHRoaXMub3JpZ2luYWxQb3NpdGlvbj10aGlzLnBvc2l0aW9uPXRoaXMuX2dlbmVyYXRlUG9zaXRpb24odCksdGhpcy5vcmlnaW5hbFBhZ2VYPXQucGFnZVgsdGhpcy5vcmlnaW5hbFBhZ2VZPXQucGFnZVksbi5jdXJzb3JBdCYmdGhpcy5fYWRqdXN0T2Zmc2V0RnJvbUhlbHBlcihuLmN1cnNvckF0KSxuLmNvbnRhaW5tZW50JiZ0aGlzLl9zZXRDb250YWlubWVudCgpLHRoaXMuX3RyaWdnZXIoXCJzdGFydFwiLHQpPT09ITE/KHRoaXMuX2NsZWFyKCksITEpOih0aGlzLl9jYWNoZUhlbHBlclByb3BvcnRpb25zKCksZS51aS5kZG1hbmFnZXImJiFuLmRyb3BCZWhhdmlvdXImJmUudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHRoaXMsdCksdGhpcy5fbW91c2VEcmFnKHQsITApLGUudWkuZGRtYW5hZ2VyJiZlLnVpLmRkbWFuYWdlci5kcmFnU3RhcnQodGhpcyx0KSwhMCl9LF9tb3VzZURyYWc6ZnVuY3Rpb24odCxuKXt0aGlzLnBvc2l0aW9uPXRoaXMuX2dlbmVyYXRlUG9zaXRpb24odCksdGhpcy5wb3NpdGlvbkFicz10aGlzLl9jb252ZXJ0UG9zaXRpb25UbyhcImFic29sdXRlXCIpO2lmKCFuKXt2YXIgcj10aGlzLl91aUhhc2goKTtpZih0aGlzLl90cmlnZ2VyKFwiZHJhZ1wiLHQscik9PT0hMSlyZXR1cm4gdGhpcy5fbW91c2VVcCh7fSksITE7dGhpcy5wb3NpdGlvbj1yLnBvc2l0aW9ufWlmKCF0aGlzLm9wdGlvbnMuYXhpc3x8dGhpcy5vcHRpb25zLmF4aXMhPVwieVwiKXRoaXMuaGVscGVyWzBdLnN0eWxlLmxlZnQ9dGhpcy5wb3NpdGlvbi5sZWZ0K1wicHhcIjtpZighdGhpcy5vcHRpb25zLmF4aXN8fHRoaXMub3B0aW9ucy5heGlzIT1cInhcIil0aGlzLmhlbHBlclswXS5zdHlsZS50b3A9dGhpcy5wb3NpdGlvbi50b3ArXCJweFwiO3JldHVybiBlLnVpLmRkbWFuYWdlciYmZS51aS5kZG1hbmFnZXIuZHJhZyh0aGlzLHQpLCExfSxfbW91c2VTdG9wOmZ1bmN0aW9uKHQpe3ZhciBuPSExO2UudWkuZGRtYW5hZ2VyJiYhdGhpcy5vcHRpb25zLmRyb3BCZWhhdmlvdXImJihuPWUudWkuZGRtYW5hZ2VyLmRyb3AodGhpcyx0KSksdGhpcy5kcm9wcGVkJiYobj10aGlzLmRyb3BwZWQsdGhpcy5kcm9wcGVkPSExKTt2YXIgcj10aGlzLmVsZW1lbnRbMF0saT0hMTt3aGlsZShyJiYocj1yLnBhcmVudE5vZGUpKXI9PWRvY3VtZW50JiYoaT0hMCk7aWYoIWkmJnRoaXMub3B0aW9ucy5oZWxwZXI9PT1cIm9yaWdpbmFsXCIpcmV0dXJuITE7aWYodGhpcy5vcHRpb25zLnJldmVydD09XCJpbnZhbGlkXCImJiFufHx0aGlzLm9wdGlvbnMucmV2ZXJ0PT1cInZhbGlkXCImJm58fHRoaXMub3B0aW9ucy5yZXZlcnQ9PT0hMHx8ZS5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5yZXZlcnQpJiZ0aGlzLm9wdGlvbnMucmV2ZXJ0LmNhbGwodGhpcy5lbGVtZW50LG4pKXt2YXIgcz10aGlzO2UodGhpcy5oZWxwZXIpLmFuaW1hdGUodGhpcy5vcmlnaW5hbFBvc2l0aW9uLHBhcnNlSW50KHRoaXMub3B0aW9ucy5yZXZlcnREdXJhdGlvbiwxMCksZnVuY3Rpb24oKXtzLl90cmlnZ2VyKFwic3RvcFwiLHQpIT09ITEmJnMuX2NsZWFyKCl9KX1lbHNlIHRoaXMuX3RyaWdnZXIoXCJzdG9wXCIsdCkhPT0hMSYmdGhpcy5fY2xlYXIoKTtyZXR1cm4hMX0sX21vdXNlVXA6ZnVuY3Rpb24odCl7cmV0dXJuIGUoXCJkaXYudWktZHJhZ2dhYmxlLWlmcmFtZUZpeFwiKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpfSksZS51aS5kZG1hbmFnZXImJmUudWkuZGRtYW5hZ2VyLmRyYWdTdG9wKHRoaXMsdCksZS51aS5tb3VzZS5wcm90b3R5cGUuX21vdXNlVXAuY2FsbCh0aGlzLHQpfSxjYW5jZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZWxwZXIuaXMoXCIudWktZHJhZ2dhYmxlLWRyYWdnaW5nXCIpP3RoaXMuX21vdXNlVXAoe30pOnRoaXMuX2NsZWFyKCksdGhpc30sX2dldEhhbmRsZTpmdW5jdGlvbih0KXt2YXIgbj0hdGhpcy5vcHRpb25zLmhhbmRsZXx8IWUodGhpcy5vcHRpb25zLmhhbmRsZSx0aGlzLmVsZW1lbnQpLmxlbmd0aD8hMDohMTtyZXR1cm4gZSh0aGlzLm9wdGlvbnMuaGFuZGxlLHRoaXMuZWxlbWVudCkuZmluZChcIipcIikuYW5kU2VsZigpLmVhY2goZnVuY3Rpb24oKXt0aGlzPT10LnRhcmdldCYmKG49ITApfSksbn0sX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbih0KXt2YXIgbj10aGlzLm9wdGlvbnMscj1lLmlzRnVuY3Rpb24obi5oZWxwZXIpP2Uobi5oZWxwZXIuYXBwbHkodGhpcy5lbGVtZW50WzBdLFt0XSkpOm4uaGVscGVyPT1cImNsb25lXCI/dGhpcy5lbGVtZW50LmNsb25lKCkucmVtb3ZlQXR0cihcImlkXCIpOnRoaXMuZWxlbWVudDtyZXR1cm4gci5wYXJlbnRzKFwiYm9keVwiKS5sZW5ndGh8fHIuYXBwZW5kVG8obi5hcHBlbmRUbz09XCJwYXJlbnRcIj90aGlzLmVsZW1lbnRbMF0ucGFyZW50Tm9kZTpuLmFwcGVuZFRvKSxyWzBdIT10aGlzLmVsZW1lbnRbMF0mJiEvKGZpeGVkfGFic29sdXRlKS8udGVzdChyLmNzcyhcInBvc2l0aW9uXCIpKSYmci5jc3MoXCJwb3NpdGlvblwiLFwiYWJzb2x1dGVcIikscn0sX2FkanVzdE9mZnNldEZyb21IZWxwZXI6ZnVuY3Rpb24odCl7dHlwZW9mIHQ9PVwic3RyaW5nXCImJih0PXQuc3BsaXQoXCIgXCIpKSxlLmlzQXJyYXkodCkmJih0PXtsZWZ0Oit0WzBdLHRvcDordFsxXXx8MH0pLFwibGVmdFwiaW4gdCYmKHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ9dC5sZWZ0K3RoaXMubWFyZ2lucy5sZWZ0KSxcInJpZ2h0XCJpbiB0JiYodGhpcy5vZmZzZXQuY2xpY2subGVmdD10aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLXQucmlnaHQrdGhpcy5tYXJnaW5zLmxlZnQpLFwidG9wXCJpbiB0JiYodGhpcy5vZmZzZXQuY2xpY2sudG9wPXQudG9wK3RoaXMubWFyZ2lucy50b3ApLFwiYm90dG9tXCJpbiB0JiYodGhpcy5vZmZzZXQuY2xpY2sudG9wPXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LXQuYm90dG9tK3RoaXMubWFyZ2lucy50b3ApfSxfZ2V0UGFyZW50T2Zmc2V0OmZ1bmN0aW9uKCl7dGhpcy5vZmZzZXRQYXJlbnQ9dGhpcy5oZWxwZXIub2Zmc2V0UGFyZW50KCk7dmFyIHQ9dGhpcy5vZmZzZXRQYXJlbnQub2Zmc2V0KCk7dGhpcy5jc3NQb3NpdGlvbj09XCJhYnNvbHV0ZVwiJiZ0aGlzLnNjcm9sbFBhcmVudFswXSE9ZG9jdW1lbnQmJmUuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sdGhpcy5vZmZzZXRQYXJlbnRbMF0pJiYodC5sZWZ0Kz10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCksdC50b3ArPXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpKTtpZih0aGlzLm9mZnNldFBhcmVudFswXT09ZG9jdW1lbnQuYm9keXx8dGhpcy5vZmZzZXRQYXJlbnRbMF0udGFnTmFtZSYmdGhpcy5vZmZzZXRQYXJlbnRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpPT1cImh0bWxcIiYmZS51aS5pZSl0PXt0b3A6MCxsZWZ0OjB9O3JldHVybnt0b3A6dC50b3ArKHBhcnNlSW50KHRoaXMub2Zmc2V0UGFyZW50LmNzcyhcImJvcmRlclRvcFdpZHRoXCIpLDEwKXx8MCksbGVmdDp0LmxlZnQrKHBhcnNlSW50KHRoaXMub2Zmc2V0UGFyZW50LmNzcyhcImJvcmRlckxlZnRXaWR0aFwiKSwxMCl8fDApfX0sX2dldFJlbGF0aXZlT2Zmc2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5jc3NQb3NpdGlvbj09XCJyZWxhdGl2ZVwiKXt2YXIgZT10aGlzLmVsZW1lbnQucG9zaXRpb24oKTtyZXR1cm57dG9wOmUudG9wLShwYXJzZUludCh0aGlzLmhlbHBlci5jc3MoXCJ0b3BcIiksMTApfHwwKSt0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSxsZWZ0OmUubGVmdC0ocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKFwibGVmdFwiKSwxMCl8fDApK3RoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKX19cmV0dXJue3RvcDowLGxlZnQ6MH19LF9jYWNoZU1hcmdpbnM6ZnVuY3Rpb24oKXt0aGlzLm1hcmdpbnM9e2xlZnQ6cGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcyhcIm1hcmdpbkxlZnRcIiksMTApfHwwLHRvcDpwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKFwibWFyZ2luVG9wXCIpLDEwKXx8MCxyaWdodDpwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKFwibWFyZ2luUmlnaHRcIiksMTApfHwwLGJvdHRvbTpwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKFwibWFyZ2luQm90dG9tXCIpLDEwKXx8MH19LF9jYWNoZUhlbHBlclByb3BvcnRpb25zOmZ1bmN0aW9uKCl7dGhpcy5oZWxwZXJQcm9wb3J0aW9ucz17d2lkdGg6dGhpcy5oZWxwZXIub3V0ZXJXaWR0aCgpLGhlaWdodDp0aGlzLmhlbHBlci5vdXRlckhlaWdodCgpfX0sX3NldENvbnRhaW5tZW50OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zO3QuY29udGFpbm1lbnQ9PVwicGFyZW50XCImJih0LmNvbnRhaW5tZW50PXRoaXMuaGVscGVyWzBdLnBhcmVudE5vZGUpO2lmKHQuY29udGFpbm1lbnQ9PVwiZG9jdW1lbnRcInx8dC5jb250YWlubWVudD09XCJ3aW5kb3dcIil0aGlzLmNvbnRhaW5tZW50PVt0LmNvbnRhaW5tZW50PT1cImRvY3VtZW50XCI/MDplKHdpbmRvdykuc2Nyb2xsTGVmdCgpLXRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQtdGhpcy5vZmZzZXQucGFyZW50LmxlZnQsdC5jb250YWlubWVudD09XCJkb2N1bWVudFwiPzA6ZSh3aW5kb3cpLnNjcm9sbFRvcCgpLXRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcC10aGlzLm9mZnNldC5wYXJlbnQudG9wLCh0LmNvbnRhaW5tZW50PT1cImRvY3VtZW50XCI/MDplKHdpbmRvdykuc2Nyb2xsTGVmdCgpKStlKHQuY29udGFpbm1lbnQ9PVwiZG9jdW1lbnRcIj9kb2N1bWVudDp3aW5kb3cpLndpZHRoKCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC10aGlzLm1hcmdpbnMubGVmdCwodC5jb250YWlubWVudD09XCJkb2N1bWVudFwiPzA6ZSh3aW5kb3cpLnNjcm9sbFRvcCgpKSsoZSh0LmNvbnRhaW5tZW50PT1cImRvY3VtZW50XCI/ZG9jdW1lbnQ6d2luZG93KS5oZWlnaHQoKXx8ZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtdGhpcy5tYXJnaW5zLnRvcF07aWYoIS9eKGRvY3VtZW50fHdpbmRvd3xwYXJlbnQpJC8udGVzdCh0LmNvbnRhaW5tZW50KSYmdC5jb250YWlubWVudC5jb25zdHJ1Y3RvciE9QXJyYXkpe3ZhciBuPWUodC5jb250YWlubWVudCkscj1uWzBdO2lmKCFyKXJldHVybjt2YXIgaT1uLm9mZnNldCgpLHM9ZShyKS5jc3MoXCJvdmVyZmxvd1wiKSE9XCJoaWRkZW5cIjt0aGlzLmNvbnRhaW5tZW50PVsocGFyc2VJbnQoZShyKS5jc3MoXCJib3JkZXJMZWZ0V2lkdGhcIiksMTApfHwwKSsocGFyc2VJbnQoZShyKS5jc3MoXCJwYWRkaW5nTGVmdFwiKSwxMCl8fDApLChwYXJzZUludChlKHIpLmNzcyhcImJvcmRlclRvcFdpZHRoXCIpLDEwKXx8MCkrKHBhcnNlSW50KGUocikuY3NzKFwicGFkZGluZ1RvcFwiKSwxMCl8fDApLChzP01hdGgubWF4KHIuc2Nyb2xsV2lkdGgsci5vZmZzZXRXaWR0aCk6ci5vZmZzZXRXaWR0aCktKHBhcnNlSW50KGUocikuY3NzKFwiYm9yZGVyTGVmdFdpZHRoXCIpLDEwKXx8MCktKHBhcnNlSW50KGUocikuY3NzKFwicGFkZGluZ1JpZ2h0XCIpLDEwKXx8MCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC10aGlzLm1hcmdpbnMubGVmdC10aGlzLm1hcmdpbnMucmlnaHQsKHM/TWF0aC5tYXgoci5zY3JvbGxIZWlnaHQsci5vZmZzZXRIZWlnaHQpOnIub2Zmc2V0SGVpZ2h0KS0ocGFyc2VJbnQoZShyKS5jc3MoXCJib3JkZXJUb3BXaWR0aFwiKSwxMCl8fDApLShwYXJzZUludChlKHIpLmNzcyhcInBhZGRpbmdCb3R0b21cIiksMTApfHwwKS10aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC10aGlzLm1hcmdpbnMudG9wLXRoaXMubWFyZ2lucy5ib3R0b21dLHRoaXMucmVsYXRpdmVfY29udGFpbmVyPW59ZWxzZSB0LmNvbnRhaW5tZW50LmNvbnN0cnVjdG9yPT1BcnJheSYmKHRoaXMuY29udGFpbm1lbnQ9dC5jb250YWlubWVudCl9LF9jb252ZXJ0UG9zaXRpb25UbzpmdW5jdGlvbih0LG4pe258fChuPXRoaXMucG9zaXRpb24pO3ZhciByPXQ9PVwiYWJzb2x1dGVcIj8xOi0xLGk9dGhpcy5vcHRpb25zLHM9dGhpcy5jc3NQb3NpdGlvbiE9XCJhYnNvbHV0ZVwifHx0aGlzLnNjcm9sbFBhcmVudFswXSE9ZG9jdW1lbnQmJiEhZS5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSx0aGlzLm9mZnNldFBhcmVudFswXSk/dGhpcy5zY3JvbGxQYXJlbnQ6dGhpcy5vZmZzZXRQYXJlbnQsbz0vKGh0bWx8Ym9keSkvaS50ZXN0KHNbMF0udGFnTmFtZSk7cmV0dXJue3RvcDpuLnRvcCt0aGlzLm9mZnNldC5yZWxhdGl2ZS50b3Aqcit0aGlzLm9mZnNldC5wYXJlbnQudG9wKnItKHRoaXMuY3NzUG9zaXRpb249PVwiZml4ZWRcIj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCk6bz8wOnMuc2Nyb2xsVG9wKCkpKnIsbGVmdDpuLmxlZnQrdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCpyK3RoaXMub2Zmc2V0LnBhcmVudC5sZWZ0KnItKHRoaXMuY3NzUG9zaXRpb249PVwiZml4ZWRcIj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpOm8/MDpzLnNjcm9sbExlZnQoKSkqcn19LF9nZW5lcmF0ZVBvc2l0aW9uOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMub3B0aW9ucyxyPXRoaXMuY3NzUG9zaXRpb24hPVwiYWJzb2x1dGVcInx8dGhpcy5zY3JvbGxQYXJlbnRbMF0hPWRvY3VtZW50JiYhIWUuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sdGhpcy5vZmZzZXRQYXJlbnRbMF0pP3RoaXMuc2Nyb2xsUGFyZW50OnRoaXMub2Zmc2V0UGFyZW50LGk9LyhodG1sfGJvZHkpL2kudGVzdChyWzBdLnRhZ05hbWUpLHM9dC5wYWdlWCxvPXQucGFnZVk7aWYodGhpcy5vcmlnaW5hbFBvc2l0aW9uKXt2YXIgdTtpZih0aGlzLmNvbnRhaW5tZW50KXtpZih0aGlzLnJlbGF0aXZlX2NvbnRhaW5lcil7dmFyIGE9dGhpcy5yZWxhdGl2ZV9jb250YWluZXIub2Zmc2V0KCk7dT1bdGhpcy5jb250YWlubWVudFswXSthLmxlZnQsdGhpcy5jb250YWlubWVudFsxXSthLnRvcCx0aGlzLmNvbnRhaW5tZW50WzJdK2EubGVmdCx0aGlzLmNvbnRhaW5tZW50WzNdK2EudG9wXX1lbHNlIHU9dGhpcy5jb250YWlubWVudDt0LnBhZ2VYLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ8dVswXSYmKHM9dVswXSt0aGlzLm9mZnNldC5jbGljay5sZWZ0KSx0LnBhZ2VZLXRoaXMub2Zmc2V0LmNsaWNrLnRvcDx1WzFdJiYobz11WzFdK3RoaXMub2Zmc2V0LmNsaWNrLnRvcCksdC5wYWdlWC10aGlzLm9mZnNldC5jbGljay5sZWZ0PnVbMl0mJihzPXVbMl0rdGhpcy5vZmZzZXQuY2xpY2subGVmdCksdC5wYWdlWS10aGlzLm9mZnNldC5jbGljay50b3A+dVszXSYmKG89dVszXSt0aGlzLm9mZnNldC5jbGljay50b3ApfWlmKG4uZ3JpZCl7dmFyIGY9bi5ncmlkWzFdP3RoaXMub3JpZ2luYWxQYWdlWStNYXRoLnJvdW5kKChvLXRoaXMub3JpZ2luYWxQYWdlWSkvbi5ncmlkWzFdKSpuLmdyaWRbMV06dGhpcy5vcmlnaW5hbFBhZ2VZO289dT9mLXRoaXMub2Zmc2V0LmNsaWNrLnRvcDx1WzFdfHxmLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD51WzNdP2YtdGhpcy5vZmZzZXQuY2xpY2sudG9wPHVbMV0/ZituLmdyaWRbMV06Zi1uLmdyaWRbMV06ZjpmO3ZhciBsPW4uZ3JpZFswXT90aGlzLm9yaWdpbmFsUGFnZVgrTWF0aC5yb3VuZCgocy10aGlzLm9yaWdpbmFsUGFnZVgpL24uZ3JpZFswXSkqbi5ncmlkWzBdOnRoaXMub3JpZ2luYWxQYWdlWDtzPXU/bC10aGlzLm9mZnNldC5jbGljay5sZWZ0PHVbMF18fGwtdGhpcy5vZmZzZXQuY2xpY2subGVmdD51WzJdP2wtdGhpcy5vZmZzZXQuY2xpY2subGVmdDx1WzBdP2wrbi5ncmlkWzBdOmwtbi5ncmlkWzBdOmw6bH19cmV0dXJue3RvcDpvLXRoaXMub2Zmc2V0LmNsaWNrLnRvcC10aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AtdGhpcy5vZmZzZXQucGFyZW50LnRvcCsodGhpcy5jc3NQb3NpdGlvbj09XCJmaXhlZFwiPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKTppPzA6ci5zY3JvbGxUb3AoKSksbGVmdDpzLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQtdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdC10aGlzLm9mZnNldC5wYXJlbnQubGVmdCsodGhpcy5jc3NQb3NpdGlvbj09XCJmaXhlZFwiPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCk6aT8wOnIuc2Nyb2xsTGVmdCgpKX19LF9jbGVhcjpmdW5jdGlvbigpe3RoaXMuaGVscGVyLnJlbW92ZUNsYXNzKFwidWktZHJhZ2dhYmxlLWRyYWdnaW5nXCIpLHRoaXMuaGVscGVyWzBdIT10aGlzLmVsZW1lbnRbMF0mJiF0aGlzLmNhbmNlbEhlbHBlclJlbW92YWwmJnRoaXMuaGVscGVyLnJlbW92ZSgpLHRoaXMuaGVscGVyPW51bGwsdGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsPSExfSxfdHJpZ2dlcjpmdW5jdGlvbih0LG4scil7cmV0dXJuIHI9cnx8dGhpcy5fdWlIYXNoKCksZS51aS5wbHVnaW4uY2FsbCh0aGlzLHQsW24scl0pLHQ9PVwiZHJhZ1wiJiYodGhpcy5wb3NpdGlvbkFicz10aGlzLl9jb252ZXJ0UG9zaXRpb25UbyhcImFic29sdXRlXCIpKSxlLldpZGdldC5wcm90b3R5cGUuX3RyaWdnZXIuY2FsbCh0aGlzLHQsbixyKX0scGx1Z2luczp7fSxfdWlIYXNoOmZ1bmN0aW9uKGUpe3JldHVybntoZWxwZXI6dGhpcy5oZWxwZXIscG9zaXRpb246dGhpcy5wb3NpdGlvbixvcmlnaW5hbFBvc2l0aW9uOnRoaXMub3JpZ2luYWxQb3NpdGlvbixvZmZzZXQ6dGhpcy5wb3NpdGlvbkFic319fSksZS51aS5wbHVnaW4uYWRkKFwiZHJhZ2dhYmxlXCIsXCJjb25uZWN0VG9Tb3J0YWJsZVwiLHtzdGFydDpmdW5jdGlvbih0LG4pe3ZhciByPWUodGhpcykuZGF0YShcImRyYWdnYWJsZVwiKSxpPXIub3B0aW9ucyxzPWUuZXh0ZW5kKHt9LG4se2l0ZW06ci5lbGVtZW50fSk7ci5zb3J0YWJsZXM9W10sZShpLmNvbm5lY3RUb1NvcnRhYmxlKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49ZS5kYXRhKHRoaXMsXCJzb3J0YWJsZVwiKTtuJiYhbi5vcHRpb25zLmRpc2FibGVkJiYoci5zb3J0YWJsZXMucHVzaCh7aW5zdGFuY2U6bixzaG91bGRSZXZlcnQ6bi5vcHRpb25zLnJldmVydH0pLG4ucmVmcmVzaFBvc2l0aW9ucygpLG4uX3RyaWdnZXIoXCJhY3RpdmF0ZVwiLHQscykpfSl9LHN0b3A6ZnVuY3Rpb24odCxuKXt2YXIgcj1lKHRoaXMpLmRhdGEoXCJkcmFnZ2FibGVcIiksaT1lLmV4dGVuZCh7fSxuLHtpdGVtOnIuZWxlbWVudH0pO2UuZWFjaChyLnNvcnRhYmxlcyxmdW5jdGlvbigpe3RoaXMuaW5zdGFuY2UuaXNPdmVyPyh0aGlzLmluc3RhbmNlLmlzT3Zlcj0wLHIuY2FuY2VsSGVscGVyUmVtb3ZhbD0hMCx0aGlzLmluc3RhbmNlLmNhbmNlbEhlbHBlclJlbW92YWw9ITEsdGhpcy5zaG91bGRSZXZlcnQmJih0aGlzLmluc3RhbmNlLm9wdGlvbnMucmV2ZXJ0PSEwKSx0aGlzLmluc3RhbmNlLl9tb3VzZVN0b3AodCksdGhpcy5pbnN0YW5jZS5vcHRpb25zLmhlbHBlcj10aGlzLmluc3RhbmNlLm9wdGlvbnMuX2hlbHBlcixyLm9wdGlvbnMuaGVscGVyPT1cIm9yaWdpbmFsXCImJnRoaXMuaW5zdGFuY2UuY3VycmVudEl0ZW0uY3NzKHt0b3A6XCJhdXRvXCIsbGVmdDpcImF1dG9cIn0pKToodGhpcy5pbnN0YW5jZS5jYW5jZWxIZWxwZXJSZW1vdmFsPSExLHRoaXMuaW5zdGFuY2UuX3RyaWdnZXIoXCJkZWFjdGl2YXRlXCIsdCxpKSl9KX0sZHJhZzpmdW5jdGlvbih0LG4pe3ZhciByPWUodGhpcykuZGF0YShcImRyYWdnYWJsZVwiKSxpPXRoaXMscz1mdW5jdGlvbih0KXt2YXIgbj10aGlzLm9mZnNldC5jbGljay50b3Ascj10aGlzLm9mZnNldC5jbGljay5sZWZ0LGk9dGhpcy5wb3NpdGlvbkFicy50b3Ascz10aGlzLnBvc2l0aW9uQWJzLmxlZnQsbz10LmhlaWdodCx1PXQud2lkdGgsYT10LnRvcCxmPXQubGVmdDtyZXR1cm4gZS51aS5pc092ZXIoaStuLHMrcixhLGYsbyx1KX07ZS5lYWNoKHIuc29ydGFibGVzLGZ1bmN0aW9uKHMpe3ZhciBvPSExLHU9dGhpczt0aGlzLmluc3RhbmNlLnBvc2l0aW9uQWJzPXIucG9zaXRpb25BYnMsdGhpcy5pbnN0YW5jZS5oZWxwZXJQcm9wb3J0aW9ucz1yLmhlbHBlclByb3BvcnRpb25zLHRoaXMuaW5zdGFuY2Uub2Zmc2V0LmNsaWNrPXIub2Zmc2V0LmNsaWNrLHRoaXMuaW5zdGFuY2UuX2ludGVyc2VjdHNXaXRoKHRoaXMuaW5zdGFuY2UuY29udGFpbmVyQ2FjaGUpJiYobz0hMCxlLmVhY2goci5zb3J0YWJsZXMsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnN0YW5jZS5wb3NpdGlvbkFicz1yLnBvc2l0aW9uQWJzLHRoaXMuaW5zdGFuY2UuaGVscGVyUHJvcG9ydGlvbnM9ci5oZWxwZXJQcm9wb3J0aW9ucyx0aGlzLmluc3RhbmNlLm9mZnNldC5jbGljaz1yLm9mZnNldC5jbGljayx0aGlzIT11JiZ0aGlzLmluc3RhbmNlLl9pbnRlcnNlY3RzV2l0aCh0aGlzLmluc3RhbmNlLmNvbnRhaW5lckNhY2hlKSYmZS51aS5jb250YWlucyh1Lmluc3RhbmNlLmVsZW1lbnRbMF0sdGhpcy5pbnN0YW5jZS5lbGVtZW50WzBdKSYmKG89ITEpLG99KSksbz8odGhpcy5pbnN0YW5jZS5pc092ZXJ8fCh0aGlzLmluc3RhbmNlLmlzT3Zlcj0xLHRoaXMuaW5zdGFuY2UuY3VycmVudEl0ZW09ZShpKS5jbG9uZSgpLnJlbW92ZUF0dHIoXCJpZFwiKS5hcHBlbmRUbyh0aGlzLmluc3RhbmNlLmVsZW1lbnQpLmRhdGEoXCJzb3J0YWJsZS1pdGVtXCIsITApLHRoaXMuaW5zdGFuY2Uub3B0aW9ucy5faGVscGVyPXRoaXMuaW5zdGFuY2Uub3B0aW9ucy5oZWxwZXIsdGhpcy5pbnN0YW5jZS5vcHRpb25zLmhlbHBlcj1mdW5jdGlvbigpe3JldHVybiBuLmhlbHBlclswXX0sdC50YXJnZXQ9dGhpcy5pbnN0YW5jZS5jdXJyZW50SXRlbVswXSx0aGlzLmluc3RhbmNlLl9tb3VzZUNhcHR1cmUodCwhMCksdGhpcy5pbnN0YW5jZS5fbW91c2VTdGFydCh0LCEwLCEwKSx0aGlzLmluc3RhbmNlLm9mZnNldC5jbGljay50b3A9ci5vZmZzZXQuY2xpY2sudG9wLHRoaXMuaW5zdGFuY2Uub2Zmc2V0LmNsaWNrLmxlZnQ9ci5vZmZzZXQuY2xpY2subGVmdCx0aGlzLmluc3RhbmNlLm9mZnNldC5wYXJlbnQubGVmdC09ci5vZmZzZXQucGFyZW50LmxlZnQtdGhpcy5pbnN0YW5jZS5vZmZzZXQucGFyZW50LmxlZnQsdGhpcy5pbnN0YW5jZS5vZmZzZXQucGFyZW50LnRvcC09ci5vZmZzZXQucGFyZW50LnRvcC10aGlzLmluc3RhbmNlLm9mZnNldC5wYXJlbnQudG9wLHIuX3RyaWdnZXIoXCJ0b1NvcnRhYmxlXCIsdCksci5kcm9wcGVkPXRoaXMuaW5zdGFuY2UuZWxlbWVudCxyLmN1cnJlbnRJdGVtPXIuZWxlbWVudCx0aGlzLmluc3RhbmNlLmZyb21PdXRzaWRlPXIpLHRoaXMuaW5zdGFuY2UuY3VycmVudEl0ZW0mJnRoaXMuaW5zdGFuY2UuX21vdXNlRHJhZyh0KSk6dGhpcy5pbnN0YW5jZS5pc092ZXImJih0aGlzLmluc3RhbmNlLmlzT3Zlcj0wLHRoaXMuaW5zdGFuY2UuY2FuY2VsSGVscGVyUmVtb3ZhbD0hMCx0aGlzLmluc3RhbmNlLm9wdGlvbnMucmV2ZXJ0PSExLHRoaXMuaW5zdGFuY2UuX3RyaWdnZXIoXCJvdXRcIix0LHRoaXMuaW5zdGFuY2UuX3VpSGFzaCh0aGlzLmluc3RhbmNlKSksdGhpcy5pbnN0YW5jZS5fbW91c2VTdG9wKHQsITApLHRoaXMuaW5zdGFuY2Uub3B0aW9ucy5oZWxwZXI9dGhpcy5pbnN0YW5jZS5vcHRpb25zLl9oZWxwZXIsdGhpcy5pbnN0YW5jZS5jdXJyZW50SXRlbS5yZW1vdmUoKSx0aGlzLmluc3RhbmNlLnBsYWNlaG9sZGVyJiZ0aGlzLmluc3RhbmNlLnBsYWNlaG9sZGVyLnJlbW92ZSgpLHIuX3RyaWdnZXIoXCJmcm9tU29ydGFibGVcIix0KSxyLmRyb3BwZWQ9ITEpfSl9fSksZS51aS5wbHVnaW4uYWRkKFwiZHJhZ2dhYmxlXCIsXCJjdXJzb3JcIix7c3RhcnQ6ZnVuY3Rpb24odCxuKXt2YXIgcj1lKFwiYm9keVwiKSxpPWUodGhpcykuZGF0YShcImRyYWdnYWJsZVwiKS5vcHRpb25zO3IuY3NzKFwiY3Vyc29yXCIpJiYoaS5fY3Vyc29yPXIuY3NzKFwiY3Vyc29yXCIpKSxyLmNzcyhcImN1cnNvclwiLGkuY3Vyc29yKX0sc3RvcDpmdW5jdGlvbih0LG4pe3ZhciByPWUodGhpcykuZGF0YShcImRyYWdnYWJsZVwiKS5vcHRpb25zO3IuX2N1cnNvciYmZShcImJvZHlcIikuY3NzKFwiY3Vyc29yXCIsci5fY3Vyc29yKX19KSxlLnVpLnBsdWdpbi5hZGQoXCJkcmFnZ2FibGVcIixcIm9wYWNpdHlcIix7c3RhcnQ6ZnVuY3Rpb24odCxuKXt2YXIgcj1lKG4uaGVscGVyKSxpPWUodGhpcykuZGF0YShcImRyYWdnYWJsZVwiKS5vcHRpb25zO3IuY3NzKFwib3BhY2l0eVwiKSYmKGkuX29wYWNpdHk9ci5jc3MoXCJvcGFjaXR5XCIpKSxyLmNzcyhcIm9wYWNpdHlcIixpLm9wYWNpdHkpfSxzdG9wOmZ1bmN0aW9uKHQsbil7dmFyIHI9ZSh0aGlzKS5kYXRhKFwiZHJhZ2dhYmxlXCIpLm9wdGlvbnM7ci5fb3BhY2l0eSYmZShuLmhlbHBlcikuY3NzKFwib3BhY2l0eVwiLHIuX29wYWNpdHkpfX0pLGUudWkucGx1Z2luLmFkZChcImRyYWdnYWJsZVwiLFwic2Nyb2xsXCIse3N0YXJ0OmZ1bmN0aW9uKHQsbil7dmFyIHI9ZSh0aGlzKS5kYXRhKFwiZHJhZ2dhYmxlXCIpO3Iuc2Nyb2xsUGFyZW50WzBdIT1kb2N1bWVudCYmci5zY3JvbGxQYXJlbnRbMF0udGFnTmFtZSE9XCJIVE1MXCImJihyLm92ZXJmbG93T2Zmc2V0PXIuc2Nyb2xsUGFyZW50Lm9mZnNldCgpKX0sZHJhZzpmdW5jdGlvbih0LG4pe3ZhciByPWUodGhpcykuZGF0YShcImRyYWdnYWJsZVwiKSxpPXIub3B0aW9ucyxzPSExO2lmKHIuc2Nyb2xsUGFyZW50WzBdIT1kb2N1bWVudCYmci5zY3JvbGxQYXJlbnRbMF0udGFnTmFtZSE9XCJIVE1MXCIpe2lmKCFpLmF4aXN8fGkuYXhpcyE9XCJ4XCIpci5vdmVyZmxvd09mZnNldC50b3Arci5zY3JvbGxQYXJlbnRbMF0ub2Zmc2V0SGVpZ2h0LXQucGFnZVk8aS5zY3JvbGxTZW5zaXRpdml0eT9yLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3A9cz1yLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3AraS5zY3JvbGxTcGVlZDp0LnBhZ2VZLXIub3ZlcmZsb3dPZmZzZXQudG9wPGkuc2Nyb2xsU2Vuc2l0aXZpdHkmJihyLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3A9cz1yLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3AtaS5zY3JvbGxTcGVlZCk7aWYoIWkuYXhpc3x8aS5heGlzIT1cInlcIilyLm92ZXJmbG93T2Zmc2V0LmxlZnQrci5zY3JvbGxQYXJlbnRbMF0ub2Zmc2V0V2lkdGgtdC5wYWdlWDxpLnNjcm9sbFNlbnNpdGl2aXR5P3Iuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQ9cz1yLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0K2kuc2Nyb2xsU3BlZWQ6dC5wYWdlWC1yLm92ZXJmbG93T2Zmc2V0LmxlZnQ8aS5zY3JvbGxTZW5zaXRpdml0eSYmKHIuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQ9cz1yLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0LWkuc2Nyb2xsU3BlZWQpfWVsc2V7aWYoIWkuYXhpc3x8aS5heGlzIT1cInhcIil0LnBhZ2VZLWUoZG9jdW1lbnQpLnNjcm9sbFRvcCgpPGkuc2Nyb2xsU2Vuc2l0aXZpdHk/cz1lKGRvY3VtZW50KS5zY3JvbGxUb3AoZShkb2N1bWVudCkuc2Nyb2xsVG9wKCktaS5zY3JvbGxTcGVlZCk6ZSh3aW5kb3cpLmhlaWdodCgpLSh0LnBhZ2VZLWUoZG9jdW1lbnQpLnNjcm9sbFRvcCgpKTxpLnNjcm9sbFNlbnNpdGl2aXR5JiYocz1lKGRvY3VtZW50KS5zY3JvbGxUb3AoZShkb2N1bWVudCkuc2Nyb2xsVG9wKCkraS5zY3JvbGxTcGVlZCkpO2lmKCFpLmF4aXN8fGkuYXhpcyE9XCJ5XCIpdC5wYWdlWC1lKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCk8aS5zY3JvbGxTZW5zaXRpdml0eT9zPWUoZG9jdW1lbnQpLnNjcm9sbExlZnQoZShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpLWkuc2Nyb2xsU3BlZWQpOmUod2luZG93KS53aWR0aCgpLSh0LnBhZ2VYLWUoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSk8aS5zY3JvbGxTZW5zaXRpdml0eSYmKHM9ZShkb2N1bWVudCkuc2Nyb2xsTGVmdChlKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkraS5zY3JvbGxTcGVlZCkpfXMhPT0hMSYmZS51aS5kZG1hbmFnZXImJiFpLmRyb3BCZWhhdmlvdXImJmUudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHIsdCl9fSksZS51aS5wbHVnaW4uYWRkKFwiZHJhZ2dhYmxlXCIsXCJzbmFwXCIse3N0YXJ0OmZ1bmN0aW9uKHQsbil7dmFyIHI9ZSh0aGlzKS5kYXRhKFwiZHJhZ2dhYmxlXCIpLGk9ci5vcHRpb25zO3Iuc25hcEVsZW1lbnRzPVtdLGUoaS5zbmFwLmNvbnN0cnVjdG9yIT1TdHJpbmc/aS5zbmFwLml0ZW1zfHxcIjpkYXRhKGRyYWdnYWJsZSlcIjppLnNuYXApLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLG49dC5vZmZzZXQoKTt0aGlzIT1yLmVsZW1lbnRbMF0mJnIuc25hcEVsZW1lbnRzLnB1c2goe2l0ZW06dGhpcyx3aWR0aDp0Lm91dGVyV2lkdGgoKSxoZWlnaHQ6dC5vdXRlckhlaWdodCgpLHRvcDpuLnRvcCxsZWZ0Om4ubGVmdH0pfSl9LGRyYWc6ZnVuY3Rpb24odCxuKXt2YXIgcj1lKHRoaXMpLmRhdGEoXCJkcmFnZ2FibGVcIiksaT1yLm9wdGlvbnMscz1pLnNuYXBUb2xlcmFuY2Usbz1uLm9mZnNldC5sZWZ0LHU9bytyLmhlbHBlclByb3BvcnRpb25zLndpZHRoLGE9bi5vZmZzZXQudG9wLGY9YStyLmhlbHBlclByb3BvcnRpb25zLmhlaWdodDtmb3IodmFyIGw9ci5zbmFwRWxlbWVudHMubGVuZ3RoLTE7bD49MDtsLS0pe3ZhciBjPXIuc25hcEVsZW1lbnRzW2xdLmxlZnQsaD1jK3Iuc25hcEVsZW1lbnRzW2xdLndpZHRoLHA9ci5zbmFwRWxlbWVudHNbbF0udG9wLGQ9cCtyLnNuYXBFbGVtZW50c1tsXS5oZWlnaHQ7aWYoIShjLXM8byYmbzxoK3MmJnAtczxhJiZhPGQrc3x8Yy1zPG8mJm88aCtzJiZwLXM8ZiYmZjxkK3N8fGMtczx1JiZ1PGgrcyYmcC1zPGEmJmE8ZCtzfHxjLXM8dSYmdTxoK3MmJnAtczxmJiZmPGQrcykpe3Iuc25hcEVsZW1lbnRzW2xdLnNuYXBwaW5nJiZyLm9wdGlvbnMuc25hcC5yZWxlYXNlJiZyLm9wdGlvbnMuc25hcC5yZWxlYXNlLmNhbGwoci5lbGVtZW50LHQsZS5leHRlbmQoci5fdWlIYXNoKCkse3NuYXBJdGVtOnIuc25hcEVsZW1lbnRzW2xdLml0ZW19KSksci5zbmFwRWxlbWVudHNbbF0uc25hcHBpbmc9ITE7Y29udGludWV9aWYoaS5zbmFwTW9kZSE9XCJpbm5lclwiKXt2YXIgdj1NYXRoLmFicyhwLWYpPD1zLG09TWF0aC5hYnMoZC1hKTw9cyxnPU1hdGguYWJzKGMtdSk8PXMseT1NYXRoLmFicyhoLW8pPD1zO3YmJihuLnBvc2l0aW9uLnRvcD1yLl9jb252ZXJ0UG9zaXRpb25UbyhcInJlbGF0aXZlXCIse3RvcDpwLXIuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LGxlZnQ6MH0pLnRvcC1yLm1hcmdpbnMudG9wKSxtJiYobi5wb3NpdGlvbi50b3A9ci5fY29udmVydFBvc2l0aW9uVG8oXCJyZWxhdGl2ZVwiLHt0b3A6ZCxsZWZ0OjB9KS50b3Atci5tYXJnaW5zLnRvcCksZyYmKG4ucG9zaXRpb24ubGVmdD1yLl9jb252ZXJ0UG9zaXRpb25UbyhcInJlbGF0aXZlXCIse3RvcDowLGxlZnQ6Yy1yLmhlbHBlclByb3BvcnRpb25zLndpZHRofSkubGVmdC1yLm1hcmdpbnMubGVmdCkseSYmKG4ucG9zaXRpb24ubGVmdD1yLl9jb252ZXJ0UG9zaXRpb25UbyhcInJlbGF0aXZlXCIse3RvcDowLGxlZnQ6aH0pLmxlZnQtci5tYXJnaW5zLmxlZnQpfXZhciBiPXZ8fG18fGd8fHk7aWYoaS5zbmFwTW9kZSE9XCJvdXRlclwiKXt2YXIgdj1NYXRoLmFicyhwLWEpPD1zLG09TWF0aC5hYnMoZC1mKTw9cyxnPU1hdGguYWJzKGMtbyk8PXMseT1NYXRoLmFicyhoLXUpPD1zO3YmJihuLnBvc2l0aW9uLnRvcD1yLl9jb252ZXJ0UG9zaXRpb25UbyhcInJlbGF0aXZlXCIse3RvcDpwLGxlZnQ6MH0pLnRvcC1yLm1hcmdpbnMudG9wKSxtJiYobi5wb3NpdGlvbi50b3A9ci5fY29udmVydFBvc2l0aW9uVG8oXCJyZWxhdGl2ZVwiLHt0b3A6ZC1yLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCxsZWZ0OjB9KS50b3Atci5tYXJnaW5zLnRvcCksZyYmKG4ucG9zaXRpb24ubGVmdD1yLl9jb252ZXJ0UG9zaXRpb25UbyhcInJlbGF0aXZlXCIse3RvcDowLGxlZnQ6Y30pLmxlZnQtci5tYXJnaW5zLmxlZnQpLHkmJihuLnBvc2l0aW9uLmxlZnQ9ci5fY29udmVydFBvc2l0aW9uVG8oXCJyZWxhdGl2ZVwiLHt0b3A6MCxsZWZ0Omgtci5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aH0pLmxlZnQtci5tYXJnaW5zLmxlZnQpfSFyLnNuYXBFbGVtZW50c1tsXS5zbmFwcGluZyYmKHZ8fG18fGd8fHl8fGIpJiZyLm9wdGlvbnMuc25hcC5zbmFwJiZyLm9wdGlvbnMuc25hcC5zbmFwLmNhbGwoci5lbGVtZW50LHQsZS5leHRlbmQoci5fdWlIYXNoKCkse3NuYXBJdGVtOnIuc25hcEVsZW1lbnRzW2xdLml0ZW19KSksci5zbmFwRWxlbWVudHNbbF0uc25hcHBpbmc9dnx8bXx8Z3x8eXx8Yn19fSksZS51aS5wbHVnaW4uYWRkKFwiZHJhZ2dhYmxlXCIsXCJzdGFja1wiLHtzdGFydDpmdW5jdGlvbih0LG4pe3ZhciByPWUodGhpcykuZGF0YShcImRyYWdnYWJsZVwiKS5vcHRpb25zLGk9ZS5tYWtlQXJyYXkoZShyLnN0YWNrKSkuc29ydChmdW5jdGlvbih0LG4pe3JldHVybihwYXJzZUludChlKHQpLmNzcyhcInpJbmRleFwiKSwxMCl8fDApLShwYXJzZUludChlKG4pLmNzcyhcInpJbmRleFwiKSwxMCl8fDApfSk7aWYoIWkubGVuZ3RoKXJldHVybjt2YXIgcz1wYXJzZUludChpWzBdLnN0eWxlLnpJbmRleCl8fDA7ZShpKS5lYWNoKGZ1bmN0aW9uKGUpe3RoaXMuc3R5bGUuekluZGV4PXMrZX0pLHRoaXNbMF0uc3R5bGUuekluZGV4PXMraS5sZW5ndGh9fSksZS51aS5wbHVnaW4uYWRkKFwiZHJhZ2dhYmxlXCIsXCJ6SW5kZXhcIix7c3RhcnQ6ZnVuY3Rpb24odCxuKXt2YXIgcj1lKG4uaGVscGVyKSxpPWUodGhpcykuZGF0YShcImRyYWdnYWJsZVwiKS5vcHRpb25zO3IuY3NzKFwiekluZGV4XCIpJiYoaS5fekluZGV4PXIuY3NzKFwiekluZGV4XCIpKSxyLmNzcyhcInpJbmRleFwiLGkuekluZGV4KX0sc3RvcDpmdW5jdGlvbih0LG4pe3ZhciByPWUodGhpcykuZGF0YShcImRyYWdnYWJsZVwiKS5vcHRpb25zO3IuX3pJbmRleCYmZShuLmhlbHBlcikuY3NzKFwiekluZGV4XCIsci5fekluZGV4KX19KX0pKGpRdWVyeSl9KShqcTE4KTt2YXIgQmFzZTY0PXtfa2V5U3RyOlwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODktXypcIixlbmNvZGU6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIjt2YXIgbixyLGkscyxvLHUsYTt2YXIgZj0wO2U9QmFzZTY0Ll91dGY4X2VuY29kZShlKTt3aGlsZShmPGUubGVuZ3RoKXtuPWUuY2hhckNvZGVBdChmKyspO3I9ZS5jaGFyQ29kZUF0KGYrKyk7aT1lLmNoYXJDb2RlQXQoZisrKTtzPW4+PjI7bz0obiYzKTw8NHxyPj40O3U9KHImMTUpPDwyfGk+PjY7YT1pJjYzO2lmKGlzTmFOKHIpKXt1PWE9NjR9ZWxzZSBpZihpc05hTihpKSl7YT02NH10PXQrdGhpcy5fa2V5U3RyLmNoYXJBdChzKSt0aGlzLl9rZXlTdHIuY2hhckF0KG8pK3RoaXMuX2tleVN0ci5jaGFyQXQodSkrdGhpcy5fa2V5U3RyLmNoYXJBdChhKX1yZXR1cm4gdH0sZGVjb2RlOmZ1bmN0aW9uKGUpe3ZhciB0PVwiXCI7dmFyIG4scixpO3ZhciBzLG8sdSxhO3ZhciBmPTA7ZT1lLnJlcGxhY2UoL1teQS1aYS16MC05XFwrXFwvXFw9XS9nLFwiXCIpO3doaWxlKGY8ZS5sZW5ndGgpe3M9dGhpcy5fa2V5U3RyLmluZGV4T2YoZS5jaGFyQXQoZisrKSk7bz10aGlzLl9rZXlTdHIuaW5kZXhPZihlLmNoYXJBdChmKyspKTt1PXRoaXMuX2tleVN0ci5pbmRleE9mKGUuY2hhckF0KGYrKykpO2E9dGhpcy5fa2V5U3RyLmluZGV4T2YoZS5jaGFyQXQoZisrKSk7bj1zPDwyfG8+PjQ7cj0obyYxNSk8PDR8dT4+MjtpPSh1JjMpPDw2fGE7dD10K1N0cmluZy5mcm9tQ2hhckNvZGUobik7aWYodSE9NjQpe3Q9dCtTdHJpbmcuZnJvbUNoYXJDb2RlKHIpfWlmKGEhPTY0KXt0PXQrU3RyaW5nLmZyb21DaGFyQ29kZShpKX19dD1CYXNlNjQuX3V0ZjhfZGVjb2RlKHQpO3JldHVybiB0fSxfdXRmOF9lbmNvZGU6ZnVuY3Rpb24oZSl7ZT1lLnJlcGxhY2UoL1xcclxcbi9nLFwiXFxuXCIpO3ZhciB0PVwiXCI7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWUuY2hhckNvZGVBdChuKTtpZihyPDEyOCl7dCs9U3RyaW5nLmZyb21DaGFyQ29kZShyKX1lbHNlIGlmKHI+MTI3JiZyPDIwNDgpe3QrPVN0cmluZy5mcm9tQ2hhckNvZGUocj4+NnwxOTIpO3QrPVN0cmluZy5mcm9tQ2hhckNvZGUociY2M3wxMjgpfWVsc2V7dCs9U3RyaW5nLmZyb21DaGFyQ29kZShyPj4xMnwyMjQpO3QrPVN0cmluZy5mcm9tQ2hhckNvZGUocj4+NiY2M3wxMjgpO3QrPVN0cmluZy5mcm9tQ2hhckNvZGUociY2M3wxMjgpfX1yZXR1cm4gdH0sX3V0ZjhfZGVjb2RlOmZ1bmN0aW9uKGUpe3ZhciB0PVwiXCI7dmFyIG49MDt2YXIgcj1jMT1jMj0wO3doaWxlKG48ZS5sZW5ndGgpe3I9ZS5jaGFyQ29kZUF0KG4pO2lmKHI8MTI4KXt0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHIpO24rK31lbHNlIGlmKHI+MTkxJiZyPDIyNCl7YzI9ZS5jaGFyQ29kZUF0KG4rMSk7dCs9U3RyaW5nLmZyb21DaGFyQ29kZSgociYzMSk8PDZ8YzImNjMpO24rPTJ9ZWxzZXtjMj1lLmNoYXJDb2RlQXQobisxKTtjMz1lLmNoYXJDb2RlQXQobisyKTt0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKChyJjE1KTw8MTJ8KGMyJjYzKTw8NnxjMyY2Myk7bis9M319cmV0dXJuIHR9fVxudmFyIHVuaXR5T2JqZWN0PXtqYXZhSW5zdGFsbERvbmU6ZnVuY3Rpb24oZCxhLGIpe3ZhciBjPXBhcnNlSW50KGQuc3Vic3RyaW5nKGQubGFzdEluZGV4T2YoXCJfXCIpKzEpLDEwKTtpZighaXNOYU4oYykpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtVbml0eU9iamVjdDIuaW5zdGFuY2VzW2NdLmphdmFJbnN0YWxsRG9uZUNhbGxiYWNrKGQsYSxiKX0sMTApfX19O3ZhciBVbml0eU9iamVjdDI9ZnVuY3Rpb24oSil7dmFyIGFjPVtdLGk9d2luZG93LFk9ZG9jdW1lbnQsVz1uYXZpZ2F0b3IsRT1udWxsLGg9W10sYWY9KGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sPT1cImh0dHBzOlwiKSx5PWFmP1wiaHR0cHM6Ly9zc2wtd2VicGxheWVyLnVuaXR5M2QuY29tL1wiOlwiaHR0cDovL3dlYnBsYXllci51bml0eTNkLmNvbS9cIixLPVwiX3VuaXR5X3RyaWVkamF2YVwiLEc9YShLKSxyPVwiX3VuaXR5X3RyaWVkY2xpY2tvbmNlXCIsdT1hKHIpLGFhPSExLEI9W10sTz0hMSx3PW51bGwsZj1udWxsLFA9bnVsbCxsPVtdLFQ9bnVsbCxxPVtdLFY9ITEsVT1cImluc3RhbGxlZFwiLEw9XCJtaXNzaW5nXCIsYj1cImJyb2tlblwiLHY9XCJ1bnN1cHBvcnRlZFwiLEM9XCJyZWFkeVwiLHo9XCJzdGFydFwiLEY9XCJlcnJvclwiLFo9XCJmaXJzdFwiLEE9XCJqYXZhXCIscz1cImNsaWNrb25jZVwiLE09ITEsUj1udWxsLHg9e3BsdWdpbk5hbWU6XCJVbml0eSBQbGF5ZXJcIixwbHVnaW5NaW1lVHlwZTpcImFwcGxpY2F0aW9uL3ZuZC51bml0eVwiLGJhc2VEb3dubG9hZFVybDp5K1wiZG93bmxvYWRfd2VicGxheWVyLTMueC9cIixmdWxsSW5zdGFsbDohMSxhdXRvSW5zdGFsbDohMSxlbmFibGVKYXZhOiEwLGVuYWJsZUpWTVByZWxvYWRpbmc6ITEsZW5hYmxlQ2xpY2tPbmNlOiEwLGVuYWJsZVVuaXR5QW5hbHl0aWNzOiExLGVuYWJsZUdvb2dsZUFuYWx5dGljczohMCxwYXJhbXM6e30sYXR0cmlidXRlczp7fSxyZWZlcnJlcjpudWxsLGRlYnVnTGV2ZWw6MH07eD1qcTE4LmV4dGVuZCghMCx4LEopO2lmKHgucmVmZXJyZXI9PT1cIlwiKXt4LnJlZmVycmVyPW51bGx9aWYoYWYpe3guZW5hYmxlVW5pdHlBbmFseXRpY3M9ITF9ZnVuY3Rpb24gYShhZyl7dmFyIGFoPW5ldyBSZWdFeHAoZXNjYXBlKGFnKStcIj0oW147XSspXCIpO2lmKGFoLnRlc3QoWS5jb29raWUrXCI7XCIpKXthaC5leGVjKFkuY29va2llK1wiO1wiKTtyZXR1cm4gUmVnRXhwLiQxfXJldHVybiExfWZ1bmN0aW9uIGUoYWcsYWgpe2RvY3VtZW50LmNvb2tpZT1lc2NhcGUoYWcpK1wiPVwiK2VzY2FwZShhaCkrXCI7IHBhdGg9L1wifWZ1bmN0aW9uIE4oYW0pe3ZhciBhbj0wLGFpLGFsLGFqLGFnLGFoO2lmKGFtKXt2YXIgYWs9YW0udG9Mb3dlckNhc2UoKS5tYXRjaCgvXihcXGQrKSg/OlxcLihcXGQrKSg/OlxcLihcXGQrKShbZGFiZnJdKT8oXFxkKyk/KT8pPyQvKTtpZihhayYmYWtbMV0pe2FpPWFrWzFdO2FsPWFrWzJdP2FrWzJdOjA7YWo9YWtbM10/YWtbM106MDthZz1ha1s0XT9ha1s0XTpcInJcIjthaD1ha1s1XT9ha1s1XTowO2FufD0oKGFpLzEwKSUxMCk8PDI4O2FufD0oYWklMTApPDwyNDthbnw9KGFsJTEwKTw8MjA7YW58PShhaiUxMCk8PDE2O2FufD17ZDoyPDwxMixhOjQ8PDEyLGI6Njw8MTIsZjo4PDwxMixyOjg8PDEyfVthZ107YW58PSgoYWgvMTAwKSUxMCk8PDg7YW58PSgoYWgvMTApJTEwKTw8NDthbnw9KGFoJTEwKX19cmV0dXJuIGFufWZ1bmN0aW9uIGFlKGFsLGFnKXt2YXIgYWk9WS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF07dmFyIGFoPVkuY3JlYXRlRWxlbWVudChcIm9iamVjdFwiKTt2YXIgYWo9MDtpZihhaSYmYWgpe2FoLnNldEF0dHJpYnV0ZShcInR5cGVcIix4LnBsdWdpbk1pbWVUeXBlKTthaC5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCI7YWkuYXBwZW5kQ2hpbGQoYWgpO3ZhciBhaz0wOyhmdW5jdGlvbigpe2lmKHR5cGVvZiBhaC5HZXRQbHVnaW5WZXJzaW9uPT09XCJ1bmRlZmluZWRcIil7aWYoYWsrKzwxMCl7c2V0VGltZW91dChhcmd1bWVudHMuY2FsbGVlLDEwKX1lbHNle2FpLnJlbW92ZUNoaWxkKGFoKTthbChudWxsKX19ZWxzZXt2YXIgYW09e307aWYoYWcpe2Zvcihhaj0wO2FqPGFnLmxlbmd0aDsrK2FqKXthbVthZ1thal1dPWFoLkdldFVuaXR5VmVyc2lvbihhZ1thal0pfX1hbS5wbHVnaW49YWguR2V0UGx1Z2luVmVyc2lvbigpO2FpLnJlbW92ZUNoaWxkKGFoKTthbChhbSl9fSkoKX1lbHNle2FsKG51bGwpfX1mdW5jdGlvbiBjKCl7dmFyIGFnPXguZnVsbEluc3RhbGw/XCJVbml0eVdlYlBsYXllckZ1bGwuZXhlXCI6XCJVbml0eVdlYlBsYXllci5leGVcIjtpZih4LnJlZmVycmVyIT09bnVsbCl7YWcrPVwiP3JlZmVycmVyPVwiK3gucmVmZXJyZXJ9cmV0dXJuIGFnfWZ1bmN0aW9uIGFiKCl7dmFyIGFnPVwiVW5pdHlQbGF5ZXIucGx1Z2luLnppcFwiO2lmKHgucmVmZXJyZXIhPW51bGwpe2FnKz1cIj9yZWZlcnJlcj1cIit4LnJlZmVycmVyfXJldHVybiBhZ31mdW5jdGlvbiBtKCl7cmV0dXJuIHguYmFzZURvd25sb2FkVXJsKyh0Lndpbj9jKCk6YWIoKSl9ZnVuY3Rpb24gRChhaSxhaCxhaixhZyl7aWYoYWk9PT1MKXtNPXRydWV9aWYoanExOC5pbkFycmF5KGFpLHEpPT09LTEpe2lmKE0pe2ouc2VuZChhaSxhaCxhaixhZyl9cS5wdXNoKGFpKX1UPWFpfXZhciB0PWZ1bmN0aW9uKCl7dmFyIGFpPVcudXNlckFnZW50LGFrPVcucGxhdGZvcm07dmFyIGFtPS9jaHJvbWUvaS50ZXN0KGFpKTt2YXIgYWw9ITE7aWYoL21zaWUvaS50ZXN0KGFpKSl7YWw9cGFyc2VGbG9hdChhaS5yZXBsYWNlKC9eLiptc2llIChbMC05XSsoXFwuWzAtOV0rKT8pLiokL2ksXCIkMVwiKSl9ZWxzZXtpZigvVHJpZGVudC9pLnRlc3QoYWkpKXthbD1wYXJzZUZsb2F0KGFpLnJlcGxhY2UoL14uKnJ2OihbMC05XSsoXFwuWzAtOV0rKT8pLiokL2ksXCIkMVwiKSl9fXZhciBhbj17dzM6dHlwZW9mIFkuZ2V0RWxlbWVudEJ5SWQhPVwidW5kZWZpbmVkXCImJnR5cGVvZiBZLmdldEVsZW1lbnRzQnlUYWdOYW1lIT1cInVuZGVmaW5lZFwiJiZ0eXBlb2YgWS5jcmVhdGVFbGVtZW50IT1cInVuZGVmaW5lZFwiLHdpbjphaz8vd2luL2kudGVzdChhayk6L3dpbi9pLnRlc3QoYWkpLG1hYzphaz8vbWFjL2kudGVzdChhayk6L21hYy9pLnRlc3QoYWkpLGllOmFsLGZmOi9maXJlZm94L2kudGVzdChhaSksb3A6L29wZXJhL2kudGVzdChhaSksY2g6YW0sY2hfdjovY2hyb21lL2kudGVzdChhaSk/cGFyc2VGbG9hdChhaS5yZXBsYWNlKC9eLipjaHJvbWVcXC8oXFxkKyhcXC5cXGQrKT8pLiokL2ksXCIkMVwiKSk6ITEsc2Y6L3NhZmFyaS9pLnRlc3QoYWkpJiYhYW0sd2s6L3dlYmtpdC9pLnRlc3QoYWkpP3BhcnNlRmxvYXQoYWkucmVwbGFjZSgvXi4qd2Via2l0XFwvKFxcZCsoXFwuXFxkKyk/KS4qJC9pLFwiJDFcIikpOiExLHg2NDovd2luNjQvaS50ZXN0KGFpKSYmL3g2NC9pLnRlc3QoYWkpLG1vejovbW96aWxsYS9pLnRlc3QoYWkpP3BhcnNlRmxvYXQoYWkucmVwbGFjZSgvXi4qbW96aWxsYVxcLyhbMC05XSsoXFwuWzAtOV0rKT8pLiokL2ksXCIkMVwiKSk6MCxtb2JpbGU6L2lwYWQvaS50ZXN0KGFrKXx8L2lwaG9uZS9pLnRlc3QoYWspfHwvaXBvZC9pLnRlc3QoYWspfHwvYW5kcm9pZC9pLnRlc3QoYWkpfHwvd2luZG93cyBwaG9uZS9pLnRlc3QoYWkpfTthbi5jbGllbnRCcmFuZD1hbi5jaD9cImNoXCI6YW4uZmY/XCJmZlwiOmFuLnNmP1wic2ZcIjphbi5pZT9cImllXCI6YW4ub3A/XCJvcFwiOlwiPz9cIjthbi5jbGllbnRQbGF0Zm9ybT1hbi53aW4/XCJ3aW5cIjphbi5tYWM/XCJtYWNcIjpcIj8/P1wiO3ZhciBhbz1ZLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO2Zvcih2YXIgYWc9MDthZzxhby5sZW5ndGg7KythZyl7dmFyIGFqPWFvW2FnXS5zcmMubWF0Y2goL14oLiopM1xcLjBcXC91b1xcL1VuaXR5T2JqZWN0MlxcLmpzJC9pKTtpZihhail7eC5iYXNlRG93bmxvYWRVcmw9YWpbMV07YnJlYWt9fWZ1bmN0aW9uIGFoKGFyLGFxKXtmb3IodmFyIGF0PTA7YXQ8TWF0aC5tYXgoYXIubGVuZ3RoLGFxLmxlbmd0aCk7KythdCl7dmFyIGFwPShhdDxhci5sZW5ndGgpJiZhclthdF0/bmV3IE51bWJlcihhclthdF0pOjA7dmFyIGF1PShhdDxhcS5sZW5ndGgpJiZhcVthdF0/bmV3IE51bWJlcihhcVthdF0pOjA7aWYoYXA8YXUpe3JldHVybi0xfWlmKGFwPmF1KXtyZXR1cm4gMX19cmV0dXJuIDB9YW4uamF2YT1mdW5jdGlvbigpe2lmKFcuamF2YUVuYWJsZWQoKSl7dmFyIGF0PShhbi53aW4mJmFuLmZmKTt2YXIgYXc9ITE7aWYoYXR8fGF3KXtpZih0eXBlb2YgVy5taW1lVHlwZXMhPVwidW5kZWZpbmVkXCIpe3ZhciBhdj1hdD9bMSw2LDAsMTJdOlsxLDQsMiwwXTtmb3IodmFyIGFyPTA7YXI8Vy5taW1lVHlwZXMubGVuZ3RoOysrYXIpe2lmKFcubWltZVR5cGVzW2FyXS5lbmFibGVkUGx1Z2luKXt2YXIgYXA9Vy5taW1lVHlwZXNbYXJdLnR5cGUubWF0Y2goL15hcHBsaWNhdGlvblxcL3gtamF2YS1hcHBsZXQ7KD86anBpLSk/dmVyc2lvbj0oXFxkKykoPzpcXC4oXFxkKykoPzpcXC4oXFxkKykoPzpfKFxcZCspKT8pPyk/JC8pO2lmKGFwIT1udWxsKXtpZihhaChhdixhcC5zbGljZSgxKSk8PTApe3JldHVybiEwfX19fX19ZWxzZXtpZihhbi53aW4mJmFuLmllKXtpZih0eXBlb2YgQWN0aXZlWE9iamVjdCE9XCJ1bmRlZmluZWRcIil7ZnVuY3Rpb24gYXEoYXgpe3RyeXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoXCJKYXZhV2ViU3RhcnQuaXNJbnN0YWxsZWQuXCIrYXgrXCIuMFwiKSE9bnVsbH1jYXRjaChheSl7cmV0dXJuITF9fWZ1bmN0aW9uIGF1KGF4KXt0cnl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KFwiSmF2YVBsdWdpbi4xNjBfXCIrYXgpIT1udWxsfWNhdGNoKGF5KXtyZXR1cm4hMX19aWYoYXEoXCIxLjcuMFwiKSl7cmV0dXJuITB9aWYoYW4uaWU+PTgpe2lmKGFxKFwiMS42LjBcIikpe2Zvcih2YXIgYXI9MTI7YXI8PTUwOysrYXIpe2lmKGF1KGFyKSl7aWYoYW4uaWU9PTkmJmFuLm1vej09NSYmYXI8MjQpe2NvbnRpbnVlfWVsc2V7cmV0dXJuITB9fX1yZXR1cm4hMX19ZWxzZXtyZXR1cm4gYXEoXCIxLjYuMFwiKXx8YXEoXCIxLjUuMFwiKXx8YXEoXCIxLjQuMlwiKX19fX19cmV0dXJuITF9KCk7YW4uY289ZnVuY3Rpb24oKXtpZihhbi53aW4mJmFuLmllKXt2YXIgYXA9YWkubWF0Y2goLyhcXC5ORVQgQ0xSIFswLTkuXSspfChcXC5ORVRbMC05Ll0rKS9nKTtpZihhcCE9bnVsbCl7dmFyIGF0PVszLDUsMF07Zm9yKHZhciBhcj0wO2FyPGFwLmxlbmd0aDsrK2FyKXt2YXIgYXE9YXBbYXJdLm1hdGNoKC9bMC05Ll17Mix9L2cpWzBdLnNwbGl0KFwiLlwiKTtpZihhaChhdCxhcSk8PTApe3JldHVybiEwfX19fXJldHVybiExfSgpO3JldHVybiBhbn0oKTt2YXIgaj1mdW5jdGlvbigpe3ZhciBhZz1mdW5jdGlvbigpe3ZhciBhbz1uZXcgRGF0ZSgpO3ZhciBhbj1EYXRlLlVUQyhhby5nZXRVVENGdWxsWWVhcigpLGFvLmdldFVUQ01vbnRoKCksYW8uZ2V0VVRDRGF5KCksYW8uZ2V0VVRDSG91cnMoKSxhby5nZXRVVENNaW51dGVzKCksYW8uZ2V0VVRDU2Vjb25kcygpLGFvLmdldFVUQ01pbGxpc2Vjb25kcygpKTtyZXR1cm4gYW4udG9TdHJpbmcoMTYpK2FtKCkudG9TdHJpbmcoMTYpfSgpO3ZhciBhaT0wO3ZhciBhaD13aW5kb3cuX2dhcT0od2luZG93Ll9nYXF8fFtdKTthaygpO2Z1bmN0aW9uIGFtKCl7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoyMTQ3NDgzNjQ3KX1mdW5jdGlvbiBhaygpe3ZhciBhdD0oXCJodHRwczpcIj09ZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2w/XCJodHRwczovL3NzbFwiOlwiaHR0cDovL3d3d1wiKStcIi5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qc1wiO3ZhciBhcD1ZLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO3ZhciBhdT0hMTtmb3IodmFyIGFyPTA7YXI8YXAubGVuZ3RoOysrYXIpe2lmKGFwW2FyXS5zcmMmJmFwW2FyXS5zcmMudG9Mb3dlckNhc2UoKT09YXQudG9Mb3dlckNhc2UoKSl7YXU9ITA7YnJlYWt9fWlmKCFhdSl7dmFyIGFxPVkuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTthcS50eXBlPVwidGV4dC9qYXZhc2NyaXB0XCI7YXEuYXN5bmM9ITA7YXEuc3JjPWF0O3ZhciBhbz1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKVswXTthby5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhcSxhbyl9dmFyIGFuPSh4LmRlYnVnTGV2ZWw9PT0wKT9cIlVBLTE2MDY4NDY0LTE2XCI6XCJVQS0xNjA2ODQ2NC0xN1wiO2FoLnB1c2goW1widW5pdHkuX3NldERvbWFpbk5hbWVcIixcIm5vbmVcIl0pO2FoLnB1c2goW1widW5pdHkuX3NldEFsbG93TGlua2VyXCIsITBdKTthaC5wdXNoKFtcInVuaXR5Ll9zZXRSZWZlcnJlck92ZXJyaWRlXCIsXCIgXCIrdGhpcy5sb2NhdGlvbi50b1N0cmluZygpXSk7YWgucHVzaChbXCJ1bml0eS5fc2V0QWNjb3VudFwiLGFuXSk7YWgucHVzaChbXCJ1bml0eS5fc2V0Q3VzdG9tVmFyXCIsMSxcIlJldmlzaW9uXCIsXCJlNDQ0Zjc2ZTAxY2RcIiwyXSl9ZnVuY3Rpb24gYWooYXIsYXAsYXQsYW8pe2lmKCF4LmVuYWJsZVVuaXR5QW5hbHl0aWNzKXtpZihhbyl7YW8oKX1yZXR1cm59dmFyIGFuPVwiaHR0cDovL3VuaXR5YW5hbHl0aWNzY2FwdHVyZS5hcHBzcG90LmNvbS9ldmVudD91PVwiK2VuY29kZVVSSUNvbXBvbmVudChhZykrXCImcz1cIitlbmNvZGVVUklDb21wb25lbnQoYWkpK1wiJmU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGFyKTthbis9XCImdj1cIitlbmNvZGVVUklDb21wb25lbnQoXCJlNDQ0Zjc2ZTAxY2RcIik7aWYoeC5yZWZlcnJlciE9PW51bGwpe2FuKz1cIj9yPVwiK3gucmVmZXJyZXJ9aWYoYXApe2FuKz1cIiZ0PVwiK2VuY29kZVVSSUNvbXBvbmVudChhcCl9aWYoYXQpe2FuKz1cIiZkPVwiK2VuY29kZVVSSUNvbXBvbmVudChhdCl9dmFyIGFxPW5ldyBJbWFnZSgpO2lmKGFvKXthcS5vbmxvYWQ9YXEub25lcnJvcj1hb31hcS5zcmM9YW59ZnVuY3Rpb24gYWwoYXAsYW4sYXEsYXkpe2lmKCF4LmVuYWJsZUdvb2dsZUFuYWx5dGljcyl7aWYoYXkpe2F5KCl9cmV0dXJufXZhciBhdj1cIi93ZWJwbGF5ZXIvaW5zdGFsbC9cIithcDt2YXIgYXc9XCI/XCI7aWYoYW4pe2F2Kz1hdytcInQ9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGFuKTthdz1cIiZcIn1pZihhcSl7YXYrPWF3K1wiZD1cIitlbmNvZGVVUklDb21wb25lbnQoYXEpO2F3PVwiJlwifWlmKGF5KXthaC5wdXNoKGZ1bmN0aW9uKCl7c2V0VGltZW91dChheSwxMDAwKX0pfXZhciBhdD14LnNyYztpZihhdC5sZW5ndGg+NDApe2F0PWF0LnJlcGxhY2UoXCJodHRwOi8vXCIsXCJcIik7dmFyIGFvPWF0LnNwbGl0KFwiL1wiKTt2YXIgYXg9YW8uc2hpZnQoKTt2YXIgYXI9YW8ucG9wKCk7YXQ9YXgrXCIvLi4vXCIrYXI7d2hpbGUoYXQubGVuZ3RoPDQwJiZhby5sZW5ndGg+MCl7dmFyIGF1PWFvLnBvcCgpO2lmKGF0Lmxlbmd0aCthdS5sZW5ndGgrNTw0MCl7YXI9YXUrXCIvXCIrYXJ9ZWxzZXthcj1cIi4uL1wiK2FyfWF0PWF4K1wiLy4uL1wiK2FyfX1haC5wdXNoKFtcInVuaXR5Ll9zZXRDdXN0b21WYXJcIiwyLFwiR2FtZVVSTFwiLGF0LDNdKTthaC5wdXNoKFtcInVuaXR5Ll9zZXRDdXN0b21WYXJcIiwxLFwiVW5pdHlPYmplY3RWZXJzaW9uXCIsXCIyXCIsM10pO2lmKGFuKXthaC5wdXNoKFtcInVuaXR5Ll9zZXRDdXN0b21WYXJcIiwzLFwiaW5zdGFsbE1ldGhvZFwiLGFuLDNdKX1haC5wdXNoKFtcInVuaXR5Ll90cmFja1BhZ2V2aWV3XCIsYXZdKX1yZXR1cm57c2VuZDpmdW5jdGlvbihhcSxhcCxhdCxhbil7aWYoeC5lbmFibGVVbml0eUFuYWx5dGljc3x8eC5lbmFibGVHb29nbGVBbmFseXRpY3Mpe24oXCJBbmFseXRpY3MgU0VORFwiLGFxLGFwLGF0LGFuKX0rK2FpO3ZhciBhcj0yO3ZhciBhbz1mdW5jdGlvbigpe2lmKDA9PS0tYXIpe3c9bnVsbDt3aW5kb3cubG9jYXRpb249YW59fTtpZihhdD09PW51bGx8fGF0PT09dW5kZWZpbmVkKXthdD1cIlwifWFqKGFxLGFwLGF0LGFuP2FvOm51bGwpO2FsKGFxLGFwLGF0LGFuP2FvOm51bGwpfX19KCk7ZnVuY3Rpb24gSShhaSxhaixhayl7dmFyIGFnLGFuLGFsLGFtLGFoO2lmKHQud2luJiZ0LmllKXthbj1cIlwiO2ZvcihhZyBpbiBhaSl7YW4rPVwiIFwiK2FnKyc9XCInK2FpW2FnXSsnXCInfWFsPVwiXCI7Zm9yKGFnIGluIGFqKXthbCs9JzxwYXJhbSBuYW1lPVwiJythZysnXCIgdmFsdWU9XCInK2FqW2FnXSsnXCIgLz4nfWFrLm91dGVySFRNTD1cIjxvYmplY3RcIithbitcIj5cIithbCtcIjwvb2JqZWN0PlwifWVsc2V7YW09WS5jcmVhdGVFbGVtZW50KFwib2JqZWN0XCIpO2ZvcihhZyBpbiBhaSl7YW0uc2V0QXR0cmlidXRlKGFnLGFpW2FnXSl9Zm9yKGFnIGluIGFqKXthaD1ZLmNyZWF0ZUVsZW1lbnQoXCJwYXJhbVwiKTthaC5uYW1lPWFnO2FoLnZhbHVlPWFqW2FnXTthbS5hcHBlbmRDaGlsZChhaCl9YWsucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoYW0sYWspfX1mdW5jdGlvbiBvKGFnKXtpZih0eXBlb2YgYWc9PVwidW5kZWZpbmVkXCIpe3JldHVybiExfWlmKCFhZy5jb21wbGV0ZSl7cmV0dXJuITF9aWYodHlwZW9mIGFnLm5hdHVyYWxXaWR0aCE9XCJ1bmRlZmluZWRcIiYmYWcubmF0dXJhbFdpZHRoPT0wKXtyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBIKGFqKXt2YXIgYWg9ITE7Zm9yKHZhciBhaT0wO2FpPGwubGVuZ3RoO2FpKyspe2lmKCFsW2FpXSl7Y29udGludWV9dmFyIGFnPVkuaW1hZ2VzW2xbYWldXTtpZighbyhhZykpe2FoPSEwfWVsc2V7bFthaV09bnVsbH19aWYoYWgpe3NldFRpbWVvdXQoYXJndW1lbnRzLmNhbGxlZSwxMDApfWVsc2V7c2V0VGltZW91dChmdW5jdGlvbigpe2QoYWopfSwxMDApfX1mdW5jdGlvbiBkKGFqKXt2YXIgYWw9WS5nZXRFbGVtZW50QnlJZChhaik7aWYoIWFsKXthbD1ZLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dmFyIGFnPVkuYm9keS5sYXN0Q2hpbGQ7WS5ib2R5Lmluc2VydEJlZm9yZShhbCxhZy5uZXh0U2libGluZyl9dmFyIGFrPXguYmFzZURvd25sb2FkVXJsK1wiMy4wL2p3cy9cIjt2YXIgYWg9e2lkOmFqLHR5cGU6XCJhcHBsaWNhdGlvbi94LWphdmEtYXBwbGV0XCIsY29kZTpcIkpWTVByZWxvYWRlclwiLHdpZHRoOjEsaGVpZ2h0OjEsbmFtZTpcIkpWTSBQcmVsb2FkZXJcIn07dmFyIGFpPXtjb250ZXh0OmFqLGNvZGViYXNlOmFrLGNsYXNzbG9hZGVyX2NhY2hlOiExLHNjcmlwdGFibGU6ITAsbWF5c2NyaXB0OiEwfTtJKGFoLGFpLGFsKTtqcTE4KFwiI1wiK2FqKS5zaG93KCl9ZnVuY3Rpb24gUyhhaCl7Rz0hMDtlKEssRyk7dmFyIGFqPVkuZ2V0RWxlbWVudEJ5SWQoYWgpO3ZhciBhbD1haCtcIl9hcHBsZXRfXCIrRTtCW2FsXT17YXR0cmlidXRlczp4LmF0dHJpYnV0ZXMscGFyYW1zOngucGFyYW1zLGNhbGxiYWNrOnguY2FsbGJhY2ssYnJva2VuOnguYnJva2VufTt2YXIgYW49QlthbF07dmFyIGFrPXtpZDphbCx0eXBlOlwiYXBwbGljYXRpb24veC1qYXZhLWFwcGxldFwiLGFyY2hpdmU6eC5iYXNlRG93bmxvYWRVcmwrXCIzLjAvandzL1VuaXR5V2ViUGxheWVyLmphclwiLGNvZGU6XCJVbml0eVdlYlBsYXllclwiLHdpZHRoOjEsaGVpZ2h0OjEsbmFtZTpcIlVuaXR5IFdlYiBQbGF5ZXJcIn07aWYodC53aW4mJnQuZmYpe2FrLnN0eWxlPVwidmlzaWJpbGl0eTogaGlkZGVuO1wifXZhciBhbT17Y29udGV4dDphbCxqbmxwX2hyZWY6eC5iYXNlRG93bmxvYWRVcmwrXCIzLjAvandzL1VuaXR5V2ViUGxheWVyLmpubHBcIixjbGFzc2xvYWRlcl9jYWNoZTohMSxpbnN0YWxsZXI6bSgpLGltYWdlOnkrXCJpbnN0YWxsYXRpb24vdW5pdHlsb2dvLnBuZ1wiLGNlbnRlcmltYWdlOiEwLGJveGJvcmRlcjohMSxzY3JpcHRhYmxlOiEwLG1heXNjcmlwdDohMH07Zm9yKHZhciBhZyBpbiBhbi5wYXJhbXMpe2lmKGFnPT1cInNyY1wiKXtjb250aW51ZX1pZihhbi5wYXJhbXNbYWddIT1PYmplY3QucHJvdG90eXBlW2FnXSl7YW1bYWddPWFuLnBhcmFtc1thZ107aWYoYWcudG9Mb3dlckNhc2UoKT09XCJsb2dvaW1hZ2VcIil7YW0uaW1hZ2U9YW4ucGFyYW1zW2FnXX1lbHNle2lmKGFnLnRvTG93ZXJDYXNlKCk9PVwiYmFja2dyb3VuZGNvbG9yXCIpe2FtLmJveGJnY29sb3I9XCIjXCIrYW4ucGFyYW1zW2FnXX1lbHNle2lmKGFnLnRvTG93ZXJDYXNlKCk9PVwiYm9yZGVyY29sb3JcIil7YW0uYm94Ym9yZGVyPSEwfWVsc2V7aWYoYWcudG9Mb3dlckNhc2UoKT09XCJ0ZXh0Y29sb3JcIil7YW0uYm94Zmdjb2xvcj1cIiNcIithbi5wYXJhbXNbYWddfX19fX19dmFyIGFpPVkuY3JlYXRlRWxlbWVudChcImRpdlwiKTthai5hcHBlbmRDaGlsZChhaSk7SShhayxhbSxhaSk7anExOChcIiNcIithaCkuc2hvdygpfWZ1bmN0aW9uIFgoYWcpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgYWg9WS5nZXRFbGVtZW50QnlJZChhZyk7aWYoYWgpe2FoLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYWgpfX0sMCl9ZnVuY3Rpb24gZyhhayl7dmFyIGFsPUJbYWtdLGFqPVkuZ2V0RWxlbWVudEJ5SWQoYWspLGFpO2lmKCFhail7cmV0dXJufWFqLndpZHRoPWFsLmF0dHJpYnV0ZXMud2lkdGh8fDYwMDthai5oZWlnaHQ9YWwuYXR0cmlidXRlcy5oZWlnaHR8fDQ1MDt2YXIgYWg9YWoucGFyZW50Tm9kZTt2YXIgYWc9YWguY2hpbGROb2Rlcztmb3IodmFyIGFtPTA7YW08YWcubGVuZ3RoO2FtKyspe2FpPWFnW2FtXTtpZihhaS5ub2RlVHlwZT09MSYmYWkhPWFqKXthaC5yZW1vdmVDaGlsZChhaSl9fX1mdW5jdGlvbiBrKGFpLGFnLGFoKXtuKFwiX2phdmFJbnN0YWxsRG9uZUNhbGxiYWNrXCIsYWksYWcsYWgpO2lmKCFhZyl7RChGLEEsYWgpfX1mdW5jdGlvbiBhZCgpe2FjLnB1c2goYXJndW1lbnRzKTtpZih4LmRlYnVnTGV2ZWw+MCYmd2luZG93LmNvbnNvbGUmJndpbmRvdy5jb25zb2xlLmxvZyl7Y29uc29sZS5sb2coQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSl9fWZ1bmN0aW9uIG4oKXthYy5wdXNoKGFyZ3VtZW50cyk7aWYoeC5kZWJ1Z0xldmVsPjEmJndpbmRvdy5jb25zb2xlJiZ3aW5kb3cuY29uc29sZS5sb2cpe2NvbnNvbGUubG9nKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpfX1mdW5jdGlvbiBwKGFnKXtpZigvXlstK10/WzAtOV0rJC8udGVzdChhZykpe2FnKz1cInB4XCJ9cmV0dXJuIGFnfXZhciBRPXtnZXRMb2dIaXN0b3J5OmZ1bmN0aW9uKCl7cmV0dXJuIGFjfSxnZXRDb25maWc6ZnVuY3Rpb24oKXtyZXR1cm4geH0sZ2V0UGxhdGZvcm1JbmZvOmZ1bmN0aW9uKCl7cmV0dXJuIHR9LGluaXRQbHVnaW46ZnVuY3Rpb24oYWcsYWgpe3gudGFyZ2V0RWw9YWc7eC5zcmM9YWg7bihcInVhOlwiLHQpO3RoaXMuZGV0ZWN0VW5pdHkodGhpcy5oYW5kbGVQbHVnaW5TdGF0dXMpfSxkZXRlY3RVbml0eTpmdW5jdGlvbihhdCxhaCl7dmFyIGFxPXRoaXM7dmFyIGFqPUw7dmFyIGFrO1cucGx1Z2lucy5yZWZyZXNoKCk7aWYodC5jbGllbnRCcmFuZD09PVwiPz9cInx8dC5jbGllbnRQbGF0Zm9ybT09PVwiPz8/XCJ8fHQubW9iaWxlKXthaj12fWVsc2V7aWYodC5vcCYmdC5tYWMpe2FqPXY7YWs9XCJPUEVSQS1NQUNcIn1lbHNle2lmKHR5cGVvZiBXLnBsdWdpbnMhPVwidW5kZWZpbmVkXCImJlcucGx1Z2luc1t4LnBsdWdpbk5hbWVdJiZ0eXBlb2YgVy5taW1lVHlwZXMhPVwidW5kZWZpbmVkXCImJlcubWltZVR5cGVzW3gucGx1Z2luTWltZVR5cGVdJiZXLm1pbWVUeXBlc1t4LnBsdWdpbk1pbWVUeXBlXS5lbmFibGVkUGx1Z2luKXthaj1VO2lmKHQuc2YmJi9NYWMgT1MgWCAxMF82Ly50ZXN0KFcuYXBwVmVyc2lvbikpe2FlKGZ1bmN0aW9uKGF1KXtpZighYXV8fCFhdS5wbHVnaW4pe2FqPWI7YWs9XCJPU1gxMC42LVNGeDY0XCJ9RChhaixQLGFrKTthdC5jYWxsKGFxLGFqLGF1KX0sYWgpO3JldHVybn1lbHNle2lmKHQubWFjJiZ0LmNoKXthZShmdW5jdGlvbihhdSl7aWYoYXUmJihOKGF1LnBsdWdpbik8PU4oXCIyLjYuMWYzXCIpKSl7YWo9Yjthaz1cIk9TWC1DSC1VPD0yLjYuMWYzXCJ9RChhaixQLGFrKTthdC5jYWxsKGFxLGFqLGF1KX0sYWgpO3JldHVybn1lbHNle2lmKGFoKXthZShmdW5jdGlvbihhdSl7RChhaixQLGFrKTthdC5jYWxsKGFxLGFqLGF1KX0sYWgpO3JldHVybn19fX1lbHNle2lmKHQuaWUpe3ZhciBhaT0hMTt0cnl7aWYoQWN0aXZlWE9iamVjdC5wcm90b3R5cGUhPW51bGwpe2FpPSEwfX1jYXRjaChhbSl7fWlmKCFhaXx8dC54NjQpe2FqPXY7aWYodC54NjQpe2FrPVwiV0lOLUlFeDY0XCJ9ZWxzZXthaz1cIkFjdGl2ZVhGYWlsZWRcIn19ZWxzZXthaj1MO3RyeXt2YXIgYXI9bmV3IEFjdGl2ZVhPYmplY3QoXCJVbml0eVdlYlBsYXllci5Vbml0eVdlYlBsYXllci4xXCIpO3ZhciBhZz1hci5HZXRQbHVnaW5WZXJzaW9uKCk7aWYoYWgpe3ZhciBhbj17fTtmb3IodmFyIGFwPTA7YXA8YWgubGVuZ3RoOysrYXApe2FuW2FoW2FwXV09YXIuR2V0VW5pdHlWZXJzaW9uKGFoW2FwXSl9YW4ucGx1Z2luPWFnfWFqPVU7aWYoYWc9PVwiMi41LjBmNVwiKXt2YXIgYW89L1dpbmRvd3MgTlQgXFxkK1xcLlxcZCsvLmV4ZWMoVy51c2VyQWdlbnQpO2lmKGFvJiZhby5sZW5ndGg+MCl7dmFyIGFsPXBhcnNlRmxvYXQoYW9bMF0uc3BsaXQoXCIgXCIpWzJdKTtpZihhbD49Nil7YWo9Yjthaz1cIldJTi1VMi41LjBmNVwifX19fWNhdGNoKGFtKXt9fX19fX1EKGFqLFAsYWspO2F0LmNhbGwoYXEsYWosYW4pfSxoYW5kbGVQbHVnaW5TdGF0dXM6ZnVuY3Rpb24oYWksYWcpe3ZhciBhaD14LnRhcmdldEVsO3ZhciBhaz1qcTE4KGFoKTtzd2l0Y2goYWkpe2Nhc2UgVTp0aGlzLm5vdGlmeVByb2dyZXNzKGFrKTt0aGlzLmVtYmVkUGx1Z2luKGFrLHguY2FsbGJhY2spO2JyZWFrO2Nhc2UgTDp0aGlzLm5vdGlmeVByb2dyZXNzKGFrKTt2YXIgYWo9dGhpczt2YXIgYWw9KHguZGVidWdMZXZlbD09PTApPzEwMDA6ODAwMDtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eC50YXJnZXRFbD1haDthai5kZXRlY3RVbml0eShhai5oYW5kbGVQbHVnaW5TdGF0dXMpfSxhbCk7YnJlYWs7Y2FzZSBiOnRoaXMubm90aWZ5UHJvZ3Jlc3MoYWspO2JyZWFrO2Nhc2Ugdjp0aGlzLm5vdGlmeVByb2dyZXNzKGFrKTticmVha319LGdldFBsdWdpblVSTDpmdW5jdGlvbigpe3ZhciBhZz1cImh0dHA6Ly91bml0eTNkLmNvbS93ZWJwbGF5ZXIvXCI7aWYodC53aW4pe2FnPXguYmFzZURvd25sb2FkVXJsK2MoKX1lbHNle2lmKFcucGxhdGZvcm09PVwiTWFjSW50ZWxcIil7YWc9eC5iYXNlRG93bmxvYWRVcmwrKHguZnVsbEluc3RhbGw/XCJ3ZWJwbGF5ZXItaTM4Ni5kbWdcIjpcIndlYnBsYXllci1taW5pLmRtZ1wiKTtpZih4LnJlZmVycmVyIT09bnVsbCl7YWcrPVwiP3JlZmVycmVyPVwiK3gucmVmZXJyZXJ9fWVsc2V7aWYoVy5wbGF0Zm9ybT09XCJNYWNQUENcIil7YWc9eC5iYXNlRG93bmxvYWRVcmwrKHguZnVsbEluc3RhbGw/XCJ3ZWJwbGF5ZXItcHBjLmRtZ1wiOlwid2VicGxheWVyLW1pbmkuZG1nXCIpO2lmKHgucmVmZXJyZXIhPT1udWxsKXthZys9XCI/cmVmZXJyZXI9XCIreC5yZWZlcnJlcn19fX1yZXR1cm4gYWd9LGdldENsaWNrT25jZVVSTDpmdW5jdGlvbigpe3JldHVybiB4LmJhc2VEb3dubG9hZFVybCtcIjMuMC9jby9Vbml0eVdlYlBsYXllci5hcHBsaWNhdGlvbj9pbnN0YWxsZXI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHguYmFzZURvd25sb2FkVXJsK2MoKSl9LGVtYmVkUGx1Z2luOmZ1bmN0aW9uKGFqLGFyKXthaj1qcTE4KGFqKS5lbXB0eSgpO3ZhciBhcD14LnNyYzt2YXIgYWg9eC53aWR0aHx8XCIxMDAlXCI7dmFyIGFtPXguaGVpZ2h0fHxcIjEwMCVcIjt2YXIgYXE9dGhpcztpZih0LndpbiYmdC5pZSl7dmFyIGFpPVwiXCI7Zm9yKHZhciBhZyBpbiB4LmF0dHJpYnV0ZXMpe2lmKHguYXR0cmlidXRlc1thZ10hPU9iamVjdC5wcm90b3R5cGVbYWddKXtpZihhZy50b0xvd2VyQ2FzZSgpPT1cInN0eWxlY2xhc3NcIil7YWkrPScgY2xhc3M9XCInK3guYXR0cmlidXRlc1thZ10rJ1wiJ31lbHNle2lmKGFnLnRvTG93ZXJDYXNlKCkhPVwiY2xhc3NpZFwiKXthaSs9XCIgXCIrYWcrJz1cIicreC5hdHRyaWJ1dGVzW2FnXSsnXCInfX19fXZhciBhbD1cIlwiO2FsKz0nPHBhcmFtIG5hbWU9XCJzcmNcIiB2YWx1ZT1cIicrYXArJ1wiIC8+JzthbCs9JzxwYXJhbSBuYW1lPVwiZmlyc3RGcmFtZUNhbGxiYWNrXCIgdmFsdWU9XCJVbml0eU9iamVjdDIuaW5zdGFuY2VzWycrRSsnXS5maXJzdEZyYW1lQ2FsbGJhY2soKTtcIiAvPic7Zm9yKHZhciBhZyBpbiB4LnBhcmFtcyl7aWYoeC5wYXJhbXNbYWddIT1PYmplY3QucHJvdG90eXBlW2FnXSl7aWYoYWcudG9Mb3dlckNhc2UoKSE9XCJjbGFzc2lkXCIpe2FsKz0nPHBhcmFtIG5hbWU9XCInK2FnKydcIiB2YWx1ZT1cIicreC5wYXJhbXNbYWddKydcIiAvPid9fX12YXIgYW89JzxvYmplY3QgY2xhc3NpZD1cImNsc2lkOjQ0NDc4NUYxLURFODktNDI5NS04NjNBLUQ0NkMzQTc4MTM5NFwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHdpZHRoOiAnK3AoYWgpK1wiOyBoZWlnaHQ6IFwiK3AoYW0pKyc7XCInK2FpK1wiPlwiK2FsK1wiPC9vYmplY3Q+XCI7dmFyIGFuPWpxMTgoYW8pO2FqLmFwcGVuZChhbik7aC5wdXNoKGFqLmF0dHIoXCJpZFwiKSk7Uj1hblswXX1lbHNle3ZhciBhaz1qcTE4KFwiPGVtYmVkLz5cIikuYXR0cih7c3JjOmFwLHR5cGU6eC5wbHVnaW5NaW1lVHlwZSx3aWR0aDphaCxoZWlnaHQ6YW0sZmlyc3RGcmFtZUNhbGxiYWNrOlwiVW5pdHlPYmplY3QyLmluc3RhbmNlc1tcIitFK1wiXS5maXJzdEZyYW1lQ2FsbGJhY2soKTtcIn0pLmF0dHIoeC5hdHRyaWJ1dGVzKS5hdHRyKHgucGFyYW1zKS5jc3Moe2Rpc3BsYXk6XCJibG9ja1wiLHdpZHRoOnAoYWgpLGhlaWdodDpwKGFtKX0pLmFwcGVuZFRvKGFqKTtSPWFrWzBdfWlmKCF0LnNmfHwhdC5tYWMpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtSLmZvY3VzKCl9LDEwMCl9aWYoYXIpe2FyKCl9fSxnZXRCZXN0SW5zdGFsbE1ldGhvZDpmdW5jdGlvbigpe3ZhciBhZz1cIk1hbnVhbFwiO2lmKHguZW5hYmxlSmF2YSYmdC5qYXZhJiZHPT09ITEpe2FnPVwiSmF2YUluc3RhbGxcIn1lbHNle2lmKHguZW5hYmxlQ2xpY2tPbmNlJiZ0LmNvJiZ1PT09ITEpe2FnPVwiQ2xpY2tPbmNlSUVcIn19cmV0dXJuIGFnfSxpbnN0YWxsUGx1Z2luOmZ1bmN0aW9uKGFoKXtpZihhaD09bnVsbHx8YWg9PXVuZGVmaW5lZCl7YWg9dGhpcy5nZXRCZXN0SW5zdGFsbE1ldGhvZCgpfXZhciBhZz1udWxsO3N3aXRjaChhaCl7Y2FzZVwiSmF2YUluc3RhbGxcIjp0aGlzLmRvSmF2YUluc3RhbGwoeC50YXJnZXRFbC5pZCk7YnJlYWs7Y2FzZVwiQ2xpY2tPbmNlSUVcIjp1PSEwO2Uocix1KTt2YXIgYWk9anExOChcIjxpZnJhbWUgc3JjPSdcIit0aGlzLmdldENsaWNrT25jZVVSTCgpK1wiJyBzdHlsZT0nZGlzcGxheTpub25lOycgLz5cIik7anExOCh4LnRhcmdldEVsKS5hcHBlbmQoYWkpO2JyZWFrO2RlZmF1bHQ6Y2FzZVwiTWFudWFsXCI6dmFyIGFpPWpxMTgoXCI8aWZyYW1lIHNyYz0nXCIrdGhpcy5nZXRQbHVnaW5VUkwoKStcIicgc3R5bGU9J2Rpc3BsYXk6bm9uZTsnIC8+XCIpO2pxMTgoeC50YXJnZXRFbCkuYXBwZW5kKGFpKTticmVha31QPWFoO2ouc2VuZCh6LGFoLG51bGwsbnVsbCl9LHRyaWdnZXI6ZnVuY3Rpb24oYWgsYWcpe2lmKGFnKXtuKCd0cmlnZ2VyKFwiJythaCsnXCIpJyxhZyl9ZWxzZXtuKCd0cmlnZ2VyKFwiJythaCsnXCIpJyl9anExOChkb2N1bWVudCkudHJpZ2dlcihhaCxhZyl9LG5vdGlmeVByb2dyZXNzOmZ1bmN0aW9uKGFnKXtpZih0eXBlb2YgYWEhPT1cInVuZGVmaW5lZFwiJiZ0eXBlb2YgYWE9PT1cImZ1bmN0aW9uXCIpe3ZhciBhaD17dWE6dCxwbHVnaW5TdGF0dXM6VCxiZXN0TWV0aG9kOm51bGwsbGFzdFR5cGU6UCx0YXJnZXRFbDp4LnRhcmdldEVsLHVuaXR5T2JqOnRoaXN9O2lmKFQ9PT1MKXthaC5iZXN0TWV0aG9kPXRoaXMuZ2V0QmVzdEluc3RhbGxNZXRob2QoKX1pZihmIT09VCl7Zj1UO2FhKGFoKX19fSxvYnNlcnZlUHJvZ3Jlc3M6ZnVuY3Rpb24oYWcpe2FhPWFnfSxmaXJzdEZyYW1lQ2FsbGJhY2s6ZnVuY3Rpb24oKXtuKFwiKioqIGZpcnN0RnJhbWVDYWxsYmFjayAoXCIrRStcIikgKioqXCIpO1Q9Wjt0aGlzLm5vdGlmeVByb2dyZXNzKCk7aWYoTT09PSEwKXtqLnNlbmQoVCxQKX19LHNldFBsdWdpblN0YXR1czpmdW5jdGlvbihhaSxhaCxhaixhZyl7RChhaSxhaCxhaixhZyl9LGRvSmF2YUluc3RhbGw6ZnVuY3Rpb24oYWcpe1MoYWcpfSxqdm1QcmVsb2FkZWQ6ZnVuY3Rpb24oYWcpe1goYWcpfSxhcHBsZXRTdGFydGVkOmZ1bmN0aW9uKGFnKXtnKGFnKX0samF2YUluc3RhbGxEb25lQ2FsbGJhY2s6ZnVuY3Rpb24oYWksYWcsYWgpe2soYWksYWcsYWgpfSxnZXRVbml0eTpmdW5jdGlvbigpe3JldHVybiBSfX07RT1Vbml0eU9iamVjdDIuaW5zdGFuY2VzLmxlbmd0aDtVbml0eU9iamVjdDIuaW5zdGFuY2VzLnB1c2goUSk7cmV0dXJuIFF9O1VuaXR5T2JqZWN0Mi5pbnN0YW5jZXM9W107aWYodHlwZW9mIFN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aCE9J2Z1bmN0aW9uJyl7U3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoPWZ1bmN0aW9uKHN0cil7cmV0dXJuIHRoaXMuaW5kZXhPZihzdHIpPT09MH19XG52YXIgcHJvdG9jb2w9d2luZG93LmxvY2F0aW9uLnByb3RvY29sKycvLyc7KGZ1bmN0aW9uKGpxKXtqcS5mbi50YWdIVE1MPWZ1bmN0aW9uKCl7dmFyIGNsb25pbmc9anEoanEodGhpcylbMF0uY2xvbmVOb2RlKCExKSk7cmV0dXJuIGNsb25pbmcuaHRtbChcIlwiKS53cmFwKCc8ZGl2PjwvZGl2PicpLnBhcmVudCgpLmh0bWwoKX1cbmpxLmZuLm91dGVySFRNTD1mdW5jdGlvbigpe3ZhciBjbG9uaW5nPWpxKGpxKHRoaXMpWzBdLmNsb25lTm9kZSghMSkpO3JldHVybiBjbG9uaW5nLmNsb25lKCkud3JhcCgnPGRpdj48L2Rpdj4nKS5wYXJlbnQoKS5odG1sKCl9XG5qcS5mbi5saW5rUHJvbXB0PWZ1bmN0aW9uKGhyZWYsdGFyZ2V0LGV2dCxwYXJhbXMpe2pxKFwiLmxpbmtQcm9tcHQtdmlld1wiKS5mYWRlT3V0KFwiZmFzdFwiLGZ1bmN0aW9uKCl7anEodGhpcykucmVtb3ZlKCl9KTtpZihldnQmJmV2dC5wYWdlWSYmZXZ0LnBhZ2VYKXtpZighcGFyYW1zKXBhcmFtcz1uZXcgT2JqZWN0KCk7aWYoIXBhcmFtcy5zaXplKXBhcmFtcy5zaXplPTEyO2lmKCFwYXJhbXMud2lkdGgpcGFyYW1zLndpZHRoPTgwO2lmKCFwYXJhbXMucGFkZGluZylwYXJhbXMucGFkZGluZz1cIjNweCAxOHB4IDJweCAycHhcIjtpZighcGFyYW1zLnRleHQpcGFyYW1zLnRleHQ9XCJBY2Vzc2FyIGxpbmtcIjtpZighcGFyYW1zLnpJbmRleClwYXJhbXMuekluZGV4PTk5OTt2YXIgb2Zmc2V0PWpxKHRoaXMpLm9mZnNldCgpO3ZhciB3aWR0aD1qcSh0aGlzKS53aWR0aCgpO29mZnNldC5sZWZ0Kz13aWR0aCowLjU7b2Zmc2V0LnRvcD1ldnQucGFnZVktcGFyYW1zLnNpemU7b2Zmc2V0LmxlZnQ9ZXZ0LnBhZ2VYO29mZnNldC50b3AtPTE1O3ZhciBtYXJnaW49LXBhcmFtcy53aWR0aCowLjU7dmFyIGxpbms9anEoXCI8YSAvPlwiKS5hdHRyKFwiaHJlZlwiLGhyZWYpLmF0dHIoXCJ0YXJnZXRcIix0YXJnZXQpLmNzcyhcImRpc3BsYXlcIixcImJsb2NrXCIpLmh0bWwocGFyYW1zLnRleHQpLmNzcyhcImZvbnQtc2l6ZVwiLHBhcmFtcy5zaXplKS5jc3MoXCJ3aWR0aFwiLHBhcmFtcy53aWR0aCkuY3NzKFwicGFkZGluZ1wiLHBhcmFtcy5wYWRkaW5nKS5jc3MoXCJwb3NpdGlvblwiLFwiYWJzb2x1dGVcIikuY3NzKFwidG9wXCIsb2Zmc2V0LnRvcCtcInB4XCIpLmNzcyhcImxlZnRcIixvZmZzZXQubGVmdCtcInB4XCIpLmNzcyhcIm1hcmdpbi1sZWZ0XCIsbWFyZ2luK1wicHhcIikuY3NzKFwidGV4dC1hbGlnblwiLFwiY2VudGVyXCIpLmFkZENsYXNzKFwibGlua1Byb21wdC12aWV3XCIpLmNzcyhcInotaW5kZXhcIixwYXJhbXMuekluZGV4KS5mYWRlSW4oKTtqcShcImJvZHlcIikuYXBwZW5kKGxpbmspfX1cbmpxLmZuLmFsdExpbmtQcm9tcHQ9ZnVuY3Rpb24oYXR0cnMsZXZ0LHBhcmFtcyl7Y29uc29sZS5sb2coXCJOb3QgTGlua1wiKTtqcShcIi5saW5rUHJvbXB0LXZpZXdcIikuZmFkZU91dChcImZhc3RcIixmdW5jdGlvbigpe2pxKHRoaXMpLnJlbW92ZSgpfSk7Y29uc29sZS5sb2coZXZ0JiZldnQucGFnZVkmJmV2dC5wYWdlWCk7aWYoZXZ0JiZldnQucGFnZVkmJmV2dC5wYWdlWCl7aWYoIXBhcmFtcylwYXJhbXM9bmV3IE9iamVjdCgpO2lmKCFwYXJhbXMuc2l6ZSlwYXJhbXMuc2l6ZT0xMjtpZighcGFyYW1zLndpZHRoKXBhcmFtcy53aWR0aD04MDtpZighcGFyYW1zLnBhZGRpbmcpcGFyYW1zLnBhZGRpbmc9XCIzcHggMThweCAycHggMnB4XCI7aWYoIXBhcmFtcy50ZXh0KXBhcmFtcy50ZXh0PVwiQWNlc3NhciBsaW5rXCI7aWYoIXBhcmFtcy56SW5kZXgpcGFyYW1zLnpJbmRleD05OTk7dmFyIG9mZnNldD1qcSh0aGlzKS5vZmZzZXQoKTt2YXIgd2lkdGg9anEodGhpcykud2lkdGgoKTtvZmZzZXQubGVmdCs9d2lkdGgqMC41O29mZnNldC50b3A9ZXZ0LnBhZ2VZLXBhcmFtcy5zaXplO29mZnNldC5sZWZ0PWV2dC5wYWdlWDtvZmZzZXQudG9wLT0xNTt2YXIgbWFyZ2luPS1wYXJhbXMud2lkdGgqMC41O3ZhciBsaW5rPWpxKFwiPGEgLz5cIik7anEuZWFjaChhdHRycyxmdW5jdGlvbigpe2xpbmsuYXR0cih0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtsaW5rLmNzcyhcImRpc3BsYXlcIixcImJsb2NrXCIpLmh0bWwocGFyYW1zLnRleHQpLmNzcyhcImZvbnQtc2l6ZVwiLHBhcmFtcy5zaXplKS5jc3MoXCJ3aWR0aFwiLHBhcmFtcy53aWR0aCkuY3NzKFwicGFkZGluZ1wiLHBhcmFtcy5wYWRkaW5nKS5jc3MoXCJwb3NpdGlvblwiLFwiYWJzb2x1dGVcIikuY3NzKFwidG9wXCIsb2Zmc2V0LnRvcCtcInB4XCIpLmNzcyhcImxlZnRcIixvZmZzZXQubGVmdCtcInB4XCIpLmNzcyhcIm1hcmdpbi1sZWZ0XCIsbWFyZ2luK1wicHhcIikuY3NzKFwidGV4dC1hbGlnblwiLFwiY2VudGVyXCIpLmFkZENsYXNzKFwibGlua1Byb21wdC12aWV3XCIpLmNzcyhcInotaW5kZXhcIixwYXJhbXMuekluZGV4KS5mYWRlSW4oKTtqcShcImJvZHlcIikuYXBwZW5kKGxpbmspfX19KShqcTE4KTtmdW5jdGlvbiBXTFVuaXR5KHdsYXV0byl7dmFyIHdsYXV0b09iamVjdD13bGF1dG87dmFyIHVuaXR5T2JqMjt0aGlzLnZpZXdUaW1lPTA7dGhpcy5sb2FkZWQ9MDt0aGlzLnBsYXlpbmc9ITE7dGhpcy5jdXJyZW50R2VzdHVyZT1cIlwiO3RoaXMuaW5pdGlhbGl6ZT1mdW5jdGlvbigpe3dpbmRvdy5XTFVuaXR5PXRoaXM7dmFyIGNvbmZpZz17d2lkdGg6MjQwLGhlaWdodDozODQscGFyYW1zOntlbmFibGVEZWJ1Z2dpbmc6XCIwXCIsYmFja2dyb3VuZGNvbG9yOlwiZTdlN2U3XCIsYm9yZGVyY29sb3I6XCJlN2U3ZTdcIix0ZXh0Y29sb3I6XCI2NjY2NjZcIixsb2dvaW1hZ2U6d2xhdXRvT2JqZWN0LmdldFdsQXV0b1Jvb3QoKStcIi9sb2FkL3Byb2RlYWYtd2VibGlicmFzLWxvZ28ucG5nXCIscHJvZ3Jlc3NiYXJpbWFnZTp3bGF1dG9PYmplY3QuZ2V0V2xBdXRvUm9vdCgpK1wiL2xvYWQvYmFyLnBuZ1wiLHByb2dyZXNzZnJhbWVpbWFnZTp3bGF1dG9PYmplY3QuZ2V0V2xBdXRvUm9vdCgpK1wiL2xvYWQvYmFyRnJhbWUucG5nXCJ9fTtjb25maWcucGFyYW1zLmRpc2FibGVDb250ZXh0TWVudT0hMDt1bml0eU9iajI9bmV3IFVuaXR5T2JqZWN0Mihjb25maWcpO3ZhciAkYnJva2VuU2NyZWVuPWpxMTgoXCIjd2xhdXRvUGxheWVyXCIpLmZpbmQoXCIuYnJva2VuXCIpOyRicm9rZW5TY3JlZW4uaGlkZSgpO3VuaXR5T2JqMi5vYnNlcnZlUHJvZ3Jlc3MoZnVuY3Rpb24ocHJvZ3Jlc3Mpe3N3aXRjaChwcm9ncmVzcy5wbHVnaW5TdGF0dXMpe2Nhc2UgXCJicm9rZW5cIjokYnJva2VuU2NyZWVuLmZpbmQoXCJhXCIpLmNsaWNrKGZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCk7ZS5wcmV2ZW50RGVmYXVsdCgpO3VuaXR5T2JqMi5pbnN0YWxsUGx1Z2luKCk7cmV0dXJuITF9KTskYnJva2VuU2NyZWVuLnNob3coKTticmVhaztjYXNlIFwibWlzc2luZ1wiOldMVW5pdHkuc2V0RGVuaWVkSW1hZ2UoXCJtaXNzaW5nVW5pdHlcIik7YnJlYWs7Y2FzZSBcImluc3RhbGxlZFwiOmpxMTgoXCIjYm9keVwiKS5zaG93KCk7YnJlYWs7Y2FzZSBcInVuc3VwcG9ydGVkXCI6V0xVbml0eS5zZXREZW5pZWRJbWFnZShcInVuc3VwcG9ydGVkVW5pdHlcIik7YnJlYWs7Y2FzZSBcImZpcnN0XCI6YnJlYWt9fSk7dmFyIHZlcnNpb249V0xQbGF5ZXJWZXJzaW9uO3ZhciBwbGF5ZXJOYW1lPVwid2VibGlicmFzLnVuaXR5M2Q/dj1cIit2ZXJzaW9uO3BsYXllck5hbWUrPVwiP3Q9XCIrKG5ldyBEYXRlKCkuZ2V0VGltZSgpKS50b1N0cmluZygpO3ZhciBpc09wZXJhPSEhd2luZG93Lm9wZXJhfHxuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJyBPUFIvJyk+PTA7dmFyIGlzRmlyZWZveD10eXBlb2YgSW5zdGFsbFRyaWdnZXIhPT0ndW5kZWZpbmVkJzt2YXIgaXNTYWZhcmk9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdy5IVE1MRWxlbWVudCkuaW5kZXhPZignQ29uc3RydWN0b3InKT4wO3ZhciBpc0Nocm9tZT0hIXdpbmRvdy5jaHJvbWUmJiFpc09wZXJhO3ZhciBpc0lFPSExfHwhIWRvY3VtZW50LmRvY3VtZW50TW9kZTtpZihpc0Nocm9tZXx8aXNPcGVyYXx8aXNTYWZhcmkpe2pxMTgoXCIjd2xhdXRvU2NyZWVuXCIpLmFwcGVuZChcIjxzY3JpcHQgc3JjPSdcIitXTEhvc3QrXCIvd2ViZ2wzLjAvd2xodG1sNS5qcyc+PC9zY3JpcHQ+J1wiKX1lbHNlIGlmKGlzRmlyZWZveCl7dmFyIGRiPXdpbmRvdy5pbmRleGVkREIub3BlbihcIldMREJUZXN0XCIpO3ZhciBvYmo9dGhpcztkYi5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXtqcTE4KFwiI3dsYXV0b1NjcmVlblwiKS5hcHBlbmQoXCI8c2NyaXB0IHNyYz0nXCIrV0xIb3N0K1wiL3dlYmdsMy4wL3dsaHRtbDUuanMnPjwvc2NyaXB0PidcIil9O2RiLm9uZXJyb3I9ZnVuY3Rpb24oKXtvYmouRmFsbEJhY2tUb1VuaXR5KCl9fWVsc2V7dGhpcy5GYWxsQmFja1RvVW5pdHkoKX1cbnRoaXMuaWRsZVRpbWVvdXQoKX1cbnRoaXMuRmFsbEJhY2tUb1VuaXR5PWZ1bmN0aW9uKCl7dmFyIGlzT3BlcmE9ISF3aW5kb3cub3BlcmF8fG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignIE9QUi8nKT49MDt2YXIgaXNDaHJvbWU9ISF3aW5kb3cuY2hyb21lJiYhaXNPcGVyYTtpZihpc0Nocm9tZSl7V0xVbml0eS5zZXREZW5pZWRJbWFnZShcIldMRVJcIik7cmV0dXJufVxuanExOChcIiN3bGF1dG9TY3JlZW5cIikuaHRtbChcIjxkaXYgY2xhc3M9J25vLXdsYXV0bycgaWQ9J3dsYXV0b1BsYXllcic+PC9kaXY+XCIpO3ZhciB2ZXJzaW9uPVdMUGxheWVyVmVyc2lvbjt2YXIgcGxheWVyTmFtZT1cIndlYmxpYnJhcy51bml0eTNkP3Y9XCIrdmVyc2lvbjt1bml0eU9iajIuaW5pdFBsdWdpbihqcTE4KFwiI3dsYXV0b1BsYXllclwiKVswXSx3bGF1dG9PYmplY3QuZ2V0V2xBdXRvUm9vdCgpK1wiL1wiK3BsYXllck5hbWUpfVxudGhpcy5pZGxlVGltZW91dD1mdW5jdGlvbigpe3ZhciB0aW1lPU1hdGguZmxvb3IoODAwMCtNYXRoLnJhbmRvbSgpKjgwMDApfVxudGhpcy50cnlJRExFPWZ1bmN0aW9uKHRlbXBvKXtpZih3bEF1dG9PYmplY3Qub2JqUGxheWVyLmN1cnJlbnRHZXN0dXJlPT1cIlwiKXt2YXIgaWRsZUFtbW91bnQ9NTt2YXIgYz1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqaWRsZUFtbW91bnQpKzE7dGhpcy5wbGF5R2VzdHVyZShcIl9pZGxlXCIrYywhMCl9ZWxzZXt9fVxudGhpcy5wbGF5R2VzdHVyZT1mdW5jdGlvbihnZXN0dXJlTmFtZSxoaWRlQ29udHJvbHMpe2lmKGdlc3R1cmVOYW1lIT10aGlzLmN1cnJlbnRHZXN0dXJlKXt1bml0eU9iajIuZ2V0VW5pdHkoKS5TZW5kTWVzc2FnZShcIldlYkxpYnJhc1wiLFwiT3BlblRleHRcIixnZXN0dXJlTmFtZSk7dGhpcy5jdXJyZW50R2VzdHVyZT1nZXN0dXJlTmFtZTt0aGlzLnBsYXlpbmc9ITA7aWYodGhpcy5TZXRXTEludGVyYWN0aW9uKXt0aGlzLlNldFdMSW50ZXJhY3Rpb24oKX19fVxudGhpcy5zdG9wVmlkZW89ZnVuY3Rpb24oKXtpZih0aGlzLndsTG9hZGVkKXt1bml0eU9iajIuZ2V0VW5pdHkoKS5TZW5kTWVzc2FnZShcIldlYkxpYnJhc1wiLFwiU3RvcFwiLFwiXCIpfX1cbnRoaXMudmlkZW9Eb25lPWZ1bmN0aW9uKCl7anExOChcIi5saW5rUHJvbXB0LXZpZXdcIikuZmFkZU91dChcImZhc3RcIixmdW5jdGlvbigpe2pxMTgodGhpcykucmVtb3ZlKCl9KTt2YXIgY3VycmVudEhhc2g9dGhpcy5jdXJyZW50R2VzdHVyZTt0aGlzLmN1cnJlbnRHZXN0dXJlPVwiXCI7aWYod2xBdXRvT2JqZWN0LmNvbnRpbnVvdXNSZWFkaW5nKXt3bEF1dG9PYmplY3QuV2xhdXRvUmVxdWVzdE5leHRUcmFuc2xhdGlvbihjdXJyZW50SGFzaCl9fVxudGhpcy5oaWRlV2xhdXRvPWZ1bmN0aW9uKCl7dGhpcy5yZXF1ZXN0U3RvcCgpO3RoaXMuY3VycmVudEdlc3R1cmU9XCJcIn1cbnRoaXMucmVjZWl2ZUluZm89ZnVuY3Rpb24oKXt9XG50aGlzLnJlcXVlc3RQbGF5PWZ1bmN0aW9uKCl7aWYoIXRoaXMucGxheWluZyl7fWVsc2V7fVxudGhpcy5wbGF5aW5nPSF0aGlzLnBsYXlpbmd9XG50aGlzLnJlcXVlc3RTdG9wPWZ1bmN0aW9uKCl7dGhpcy5wbGF5aW5nPSExO3RoaXMuc3RvcFZpZGVvKCl9XG50aGlzLndsYXV0b0xvYWRlZD1mdW5jdGlvbigpe3dsYXV0b09iamVjdC5XbGF1dG9Mb2FkZWQoKX1cbnRoaXMuZG9uZT1mdW5jdGlvbigpe3RoaXMucGxheWluZz0hMTt0aGlzLmN1cnJlbnRHZXN0dXJlPVwiXCI7d2xhdXRvT2JqZWN0LldsYXV0b1JlcXVlc3ROZXh0VHJhbnNsYXRpb24oKX1cbnRoaXMuZXhlY3V0ZVByZXZpb3VzVHJhbnNsYXRpb249ZnVuY3Rpb24oKXt0aGlzLnBsYXlpbmc9ITE7dGhpcy5jdXJyZW50R2VzdHVyZT1cIlwiO3dsYXV0b09iamVjdC5XbGF1dG9SZXF1ZXN0UHJldmlvdXNUcmFuc2xhdGlvbigpfVxudGhpcy5yZWFkeT1mdW5jdGlvbigpe2NvbnNvbGUubG9nKFwiVW5pdHkgcmVhZHlcIil9XG50aGlzLndsYXV0b0xvYWRlZD1mdW5jdGlvbigpe2lmKCF0aGlzLndsTG9hZGVkKXt0aGlzLndsTG9hZGVkPSEwO3VuaXR5T2JqMi5nZXRVbml0eSgpLlNlbmRNZXNzYWdlKFwiV2ViTGlicmFzXCIsXCJTZW5kTG9nXCIsbmF2aWdhdG9yLnVzZXJBZ2VudCk7dW5pdHlPYmoyLmdldFVuaXR5KCkuU2VuZE1lc3NhZ2UoXCJXZWJMaWJyYXNcIixcIlNldFRyYW5zbGF0aW9uRW5naW5lXCIsd2xhdXRvT2JqZWN0LnBhcmFtcy5sYW5ndWFnZSk7aWYod2xhdXRvT2JqZWN0LnBhcmFtcy5tb2RlPT1Qcm9EZWFmTW9kZS5WaWRlbyl7dW5pdHlPYmoyLmdldFVuaXR5KCkuU2VuZE1lc3NhZ2UoXCJXZWJMaWJyYXNcIixcIkhpZGVVSVwiLFwiXCIpO3VuaXR5T2JqMi5nZXRVbml0eSgpLlNlbmRNZXNzYWdlKFwiV2ViTGlicmFzXCIsXCJEaXNhYmxlU3VidGl0bGVzXCIsXCJcIil9XG5pZih3bGF1dG9PYmplY3QucGFyYW1zLmdyZWV0aW5nVGV4dCE9XCJcIil7c2V0VGltZW91dChmdW5jdGlvbigpe3dsYXV0b09iamVjdC5PcGVuVGV4dCh3bGF1dG9PYmplY3QucGFyYW1zLmdyZWV0aW5nVGV4dCl9LDIwMDApfVxuanExOChcIndsYXV0b1wiKS5hZGRDbGFzcyhcIndsYXV0b0hvdmVyXCIpfX1cbnRoaXMucmVtb3ZlV2xBdXRvPWZ1bmN0aW9uKCl7anExOChcIiNzdGFydFdsQXV0b1wiKS5yZW1vdmUoKTtqcTE4KFwiI2xvYWRpbmdXbEF1dG9cIikucmVtb3ZlKCk7anExOChcIiNpbWdBY2Vzc2liaWxpZGFkZVdsQXV0b1wiKS5yZW1vdmUoKTtqcTE4KFwiI3dsYXV0b0NvbnRhaW5lclwiKS5yZW1vdmUoKTtqcTE4KCcjYmFsYW9DbGlxdWVGcmFzZScpLnJlbW92ZSgpO2pxMTgoXCIjd2xhdXRvU2NyZWVuXCIpLnJlbW92ZSgpO2pxMTgoXCJ3bGF1dG9cIikucmVtb3ZlQ2xhc3MoXCJ3bGF1dG9Ib3ZlclwiKS5yZW1vdmVDbGFzcyhcIndsYXV0b1BsYXlpbmdcIil9XG50aGlzLmdldFVuaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIHVuaXR5T2JqMn1cbnRoaXMuc2hvd0FkPWZ1bmN0aW9uKHR5cGUsdXJsLHRhcmdldCx0aW1lKXt2YXIgaW1nPWpxMTgoXCI8aW1nIC8+XCIpLmF0dHIoXCJzcmNcIix0YXJnZXQpLmxvYWQoZnVuY3Rpb24oKXtqcTE4KFwiI3dsYXV0b1BsYXllclwiKS5jc3MoXCJ0b3BcIixcIi05OTk5cHhcIikuY3NzKFwicG9zaXRpb25cIixcImFic29sdXRlXCIpO2pxMTgoXCIjd2xhdXRvYWRcIikucmVtb3ZlKCk7anExOChcIiN3bGF1dG9TY3JlZW5cIikuYXBwZW5kKGpxMTgoXCI8ZGl2IGlkPSd3bGF1dG9hZCc+PC9kaXY+XCIpLmFwcGVuZChqcTE4KFwiPGEgdGFyZ2V0PSdfYmxhbmsnIC8+XCIpLmF0dHIoXCJocmVmXCIsdXJsKS5hcHBlbmQoaW1nKS5jbGljayhmdW5jdGlvbigpe3ExOChcIiN3bGF1dG9QbGF5ZXJcIikuY3NzKFwidG9wXCIsXCIwXCIpO2pxMTgoXCIjd2xhdXRvYWRcIikucmVtb3ZlKCk7d2luZG93Lm9uZm9jdXM9ZnVuY3Rpb24oKXtqcTE4KFwiI3dsYXV0b1BsYXllclwiKS5jc3MoXCJ0b3BcIixcIjFcIik7c2V0VGltZW91dChmdW5jdGlvbigpe2pxMTgoXCIjd2xhdXRvUGxheWVyXCIpLmNzcyhcInRvcFwiLFwiMFwiKX0sMTApfX0pLmNzcyhcInBvc2l0aW9uXCIsXCJyZWxhdGl2ZVwiKS5hcHBlbmQoanExOChcIjxkaXYgLz5cIikuY3NzKFwicG9zaXRpb25cIixcImFic29sdXRlXCIpLmNzcyhcIndpZHRoXCIsXCIxMDAlXCIpLmNzcyhcImJhY2tncm91bmRcIixcInJnYmEoMCwwLDAsMC42MylcIikuY3NzKFwiY29sb3JcIixcIiM5ZDlkOWRcIikuY3NzKFwiZm9udC1zaXplXCIsXCIxMHB4XCIpLmNzcyhcImZvbnQtZmFtaWx5XCIsXCJhcmlhbFwiKS5jc3MoXCJib3R0b21cIixcIjRweFwiKS5jc3MoXCJwYWRkaW5nXCIsXCIxMHB4IDBcIikuYXBwZW5kKFwiRXNzZSBhbiZ1YWN1dGU7bmNpbyBmZWNoYXImYWFjdXRlOyBhdXRvbWF0aWNhbWVudGU8YnIgLz4gZW0gXCIpLmFwcGVuZChqcTE4KFwiPHNwYW4gLz5cIikuYXR0cihcImlkXCIsXCJ3bGF1dG9BZENvdW50ZXJcIikudGV4dCh0aW1lKS5jc3MoXCJjb2xvclwiLFwiI0ZGRlwiKSkuYXBwZW5kKFwiIHNlZ3VuZG9zLlwiKSkuY3NzKFwiaGVpZ2h0XCIsXCIzODRweFwiKS5jc3MoXCJ3aWR0aFwiLFwiMjQwcHhcIikpKTt2YXIgY291bnREb3duPWZ1bmN0aW9uKGZ1bmMpe3ZhciBpPXBhcnNlSW50KGpxMTgoXCIjd2xhdXRvQWRDb3VudGVyXCIpLnRleHQoKSktMTtpZihpPjApe2pxMTgoXCIjd2xhdXRvQWRDb3VudGVyXCIpLnRleHQoaSk7c2V0VGltZW91dChmdW5jdGlvbigpe2Z1bmMoZnVuYyl9LDEwMDApfWVsc2V7anExOChcIiN3bGF1dG9hZFwiKS5yZW1vdmUoKTtqcTE4KFwiI3dsYXV0b1BsYXllclwiKS5jc3MoXCJ0b3BcIixcIjFcIil9fVxuc2V0VGltZW91dChmdW5jdGlvbigpe2NvdW50RG93bihjb3VudERvd24pfSwxMDAwKX0pfVxudGhpcy5zZXREZW5pZWRJbWFnZT1mdW5jdGlvbih0eXBlKXtqcTE4KFwiI3dsYXV0b1NjcmVlblwiKS5odG1sKFwiPGRpdiBjbGFzcz0nbm8td2xhdXRvJyBpZD0nd2xhdXRvUGxheWVyJz48L2Rpdj5cIik7Y29uc29sZS5sb2coXCJEZW5pZWQgSW1hZ2U6IFwiK3R5cGUpO2pxMTguZ2V0KFdMSG9zdCtcIi9odG1sL1wiK3R5cGUrXCIuaHRtbFwiLGZ1bmN0aW9uKGRhdGEpe2pxMTgoXCIjd2xhdXRvUGxheWVyXCIpLmh0bWwoZGF0YS5yZXBsYWNlKC8lMCUvZyxXTEhvc3QpKX0pfVxudGhpcy5pbml0aWFsaXplKHdsYXV0b09iamVjdCl9XG52YXIgV2ViTGlicmFzVHlwZT17RGVmYXVsdDpcImRlZmF1bHRcIixXb3JkcHJlc3M6XCJ3b3JkcHJlc3NcIixCbG9nZ2VyOlwiYmxvZ2dlclwiLFdlYm5vZGU6XCJ3ZWJub2RlXCJ9O3ZhciBQcm9EZWFmVHlwZT1XZWJMaWJyYXNUeXBlO3ZhciBXZWJMaWJyYXNJY29uUG9zaXRpb249e1RvcDpcIndsLWVsZW1lbnQtdG9wXCIsTGVmdDpcIndsLWVsZW1lbnQtbGVmdFwiLEJvdHRvbTpcIndsLWVsZW1lbnQtYm90dG9tXCIsUmlnaHQ6XCJ3bC1lbGVtZW50LXJpZ2h0XCIsQ29udGVudDpcIndsLWVsZW1lbnQtY29udGVudFwifTt2YXIgUHJvRGVhZkljb25Qb3NpdGlvbj1XZWJMaWJyYXNJY29uUG9zaXRpb247dmFyIFdlYkxpYnJhc01vZGU9e1dlYlNpdGU6XCJ3bC1tb2RlLXdlYnNpdGVcIixWaWRlbzpcIndsLW1vZGUtdmlkZW9cIn07dmFyIFByb0RlYWZNb2RlPVdlYkxpYnJhc01vZGU7dmFyIFByb0RlYWZMYW5ndWFnZT17TGlicmFzOlwibGlicmFzXCIsQVNMOlwiYXNsXCJ9O2Z1bmN0aW9uIFdlYkxpYnJhcyhjb25zdHJ1Y3Rvcixyb290RWxlbWVudFRvQXBwbHksdXNlQ29tcGF0aWJpbGl0eU1vZGUpe3RoaXMucGFyYW1zPXtpY29uUm9vdDpcImJvZHlcIix0cmFuc2xhdGVkRWxlbWVudDpcImJvZHlcIixjb21wYXRpYmlsaXR5TW9kZTohMSxwb3NpdGlvbjpQcm9EZWFmSWNvblBvc2l0aW9uLlJpZ2h0LG1vZGU6UHJvRGVhZk1vZGUuV2ViU2l0ZSx0eXBlOlByb0RlYWZUeXBlLkRlZmF1bHQsYXZvaWQ6XCJcIixsb2FkaW5nUGFnZTpXTEh0dHBzSG9zdCtcIi9odG1sL2Rvd25sb2FkaW5nLmh0bWxcIixsYW5ndWFnZTpQcm9EZWFmTGFuZ3VhZ2UuTGlicmFzLGdyZWV0aW5nVGV4dDpcIlwiLHRyYW5zbGF0ZUFsdEltYWdlczohMCxvbk9wZW46ZnVuY3Rpb24oKXt9LG9uQ2xvc2U6ZnVuY3Rpb24oKXt9fTtpZih0eXBlb2YgY29uc3RydWN0b3I9PT1cInN0cmluZ1wifHx0eXBlb2YgY29uc3RydWN0b3I9PT1cInVuZGVmaW5lZFwiKXt2YXIgdG1wPXt9O2lmKHR5cGVvZihjb25zdHJ1Y3RvcikhPT1cInVuZGVmaW5lZFwiKXt0bXAuaWNvblJvb3Q9Y29uc3RydWN0b3J9XG5pZih0eXBlb2Yocm9vdEVsZW1lbnRUb0FwcGx5KSE9PVwidW5kZWZpbmVkXCIpe3RtcC50cmFuc2xhdGVkRWxlbWVudD1yb290RWxlbWVudFRvQXBwbHl9XG5pZih0eXBlb2YodXNlQ29tcGF0aWJpbGl0eU1vZGUpIT09XCJ1bmRlZmluZWRcIil7dG1wLmNvbXBhdGliaWxpdHlNb2RlPXVzZUNvbXBhdGliaWxpdHlNb2RlfVxuY29uc3RydWN0b3I9dG1wfVxuanExOC5leHRlbmQodGhpcy5wYXJhbXMsY29uc3RydWN0b3IpO2lmKFdMSG9zdC5zdGFydHNXaXRoKFwiaHR0cDovL2FycXVpdm9zLndlYmxpYnJhc1wiKSYmcHJvdG9jb2wuaW5kZXhPZignaHR0cHMnKT09LTEpe2pxMTgucG9zdChcImh0dHA6Ly9sb2dnaW5nLnByb2RlYWYubmV0L3BhZ2V2aWV3L2luc2VydFwiLHt1cmw6d2luZG93LmxvY2F0aW9uLmhyZWZ9KX1cbnRoaXMuaXNXbEF1dG9QbGF5ZXJPblNjcmVlbj0hMTt0aGlzLnByb2Nlc3NlZEJ5V2xBdXRvPSExO3RoaXMub2JqUGxheWVyPSExO3RoaXMuaW1hZ2VQbGF5T25Ib3Zlcj0hMTt0aGlzLmNvbnRpbnVvdXNSZWFkaW5nPSEwO3RoaXMuYXV0b1N0YXJ0PSExO3RoaXMuY29tcGF0aWJpbGl0eT10aGlzLnBhcmFtcy5jb21wYXRpYmlsaXR5TW9kZTt3aW5kb3cuV0xDb21wYXRpYmlsaXR5TW9kZUFjdGl2YXRlZD10aGlzLmNvbXBhdGliaWxpdHk7dmFyIHdsQXV0b1NlcnZpY2VIb3N0PVdMSG9zdC5zdWJzdHJpbmcoMCxXTEhvc3QubGFzdEluZGV4T2YoXCIvXCIpKTt2YXIgd2xBdXRvUm9vdD1XTEhvc3Q7aWYocHJvdG9jb2wuaW5kZXhPZignaHR0cHMnKT4tMSl7d2xBdXRvUm9vdD1XTEh0dHBzSG9zdDtXTEhvc3Q9V0xIdHRwc0hvc3R9XG52YXIgd2xFbGVtZW50VG9BcHBlbmRXTD10aGlzLnBhcmFtcy5pY29uUm9vdDt2YXIgd2xBdXRvSWNvbk1hcmdpbkxlZnQ9MDt2YXIgd2xBdXRvSWNvblRvcD0wO3ZhciB3bEF1dG9JY29uV2lkdGg9MzA7dmFyIHdsQXV0b0ljb25IZWlnaHQ9MzA7dmFyIHdsQXV0b0ljb25Ub29sdGlwTWFyZ2luTGVmdFJlbGF0aXZlPTQ1O3ZhciB3bEF1dG9JY29uVG9vbHRpcE1hcmdpbkxlZnQ9d2xBdXRvSWNvbk1hcmdpbkxlZnQtd2xBdXRvSWNvblRvb2x0aXBNYXJnaW5MZWZ0UmVsYXRpdmU7dmFyIHdsQXV0b0ljb25Ub29sdGlwVG9wUmVsYXRpdmU9MzE7dmFyIHdsQXV0b0ljb25Ub29sdGlwVG9wPXdsQXV0b0ljb25Ub3Ard2xBdXRvSWNvblRvb2x0aXBUb3BSZWxhdGl2ZTt2YXIgd2xBdXRvSWNvbnNaSW5kZXg9OTk5OTt2YXIgd2xBdXRvSWNvbnNQb3NpdGlvbj1cImZpeGVkXCI7dmFyIHdsQXV0b0NvbnRhaW5lclpJbmRleD05OTk5O3ZhciBwYXJlbnRUYWdUb0FwcGx5PXRoaXMucGFyYW1zLnRyYW5zbGF0ZWRFbGVtZW50O3ZhciB3bEF1dG9QbGF5aW5nQ29sb3I9XCIyNTUsMjU1LDBcIjt2YXIgd2xBdXRvSG92ZXJDb2xvcj1cIjE5NCwyMjAsMjQ1XCI7dmFyIGlzUGFnZUNlbnRlcmVkPSEwO3ZhciBsZWZ0T3JSaWdodD1cImxlZnRcIjt2YXIgbGVmdE9yUmlnaHRQb3M9XCI1MCVcIjt0aGlzLnBvc3RJbnN0cnVjdGlvbnM9bmV3IEFycmF5KCk7dGhpcy5kb2NrZWRTZXQ9ITE7dGhpcy5nZXRFbGVtZW50VG9BcHBlbmRXTD1mdW5jdGlvbigpe3JldHVybiB3bEVsZW1lbnRUb0FwcGVuZFdMfVxudGhpcy5nZXRBbHdheXNEaXNscGF5SGVscD1mdW5jdGlvbigpe3JldHVybiBhbHdheXNEaXNscGF5SGVscH1cbnRoaXMuZ2V0V2xBdXRvUm9vdD1mdW5jdGlvbigpe3JldHVybiB3bEF1dG9Sb290fVxudGhpcy5nZXRQYXJlbnRUYWdUb0FwcGx5PWZ1bmN0aW9uKCl7cmV0dXJuIHBhcmVudFRhZ1RvQXBwbHl9XG50aGlzLnNldFNpZGVEb2NrZWRQb3NpdGlvbj1mdW5jdGlvbihsZWZ0UmlnaHQsZGVsdGEpe3RoaXMucG9zdEluc3RydWN0aW9ucy5wdXNoKGZ1bmN0aW9uKCl7bGVmdE9yUmlnaHQ9bGVmdFJpZ2h0O2xlZnRPclJpZ2h0UG9zPWRlbHRhO2lzUGFnZUNlbnRlcmVkPSExO3ZhciBhZGp1c3RlZD1sZWZ0T3JSaWdodD09XCJyaWdodFwiP2xlZnRPclJpZ2h0UG9zLTQ1OmxlZnRPclJpZ2h0UG9zO2pxMTgoXCIjc3RhcnRXbEF1dG9cIikuY3NzKFwibGVmdFwiLFwiXCIpLmNzcyhcInJpZ2h0XCIsXCJcIikuY3NzKGxlZnRPclJpZ2h0LGxlZnRPclJpZ2h0UG9zK1wicHhcIik7anExOChcIiNsb2FkaW5nV2xBdXRvXCIpLmNzcyhcImxlZnRcIixcIlwiKS5jc3MoXCJyaWdodFwiLFwiXCIpLmNzcyhsZWZ0T3JSaWdodCxsZWZ0T3JSaWdodFBvcytcInB4XCIpO2pxMTgoXCIjaW1nQWNlc3NpYmlsaWRhZGVXbEF1dG9cIikuY3NzKFwibGVmdFwiLFwiXCIpLmNzcyhcInJpZ2h0XCIsXCJcIikuY3NzKGxlZnRPclJpZ2h0LGFkanVzdGVkK1wicHhcIil9KX1cbnRoaXMuZ2V0SWNvbk1hcmdpbkhQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiB3bEF1dG9JY29uTWFyZ2luTGVmdH1cbnRoaXMuc2V0SWNvbk1hcmdpbkhQb3NpdGlvbj1mdW5jdGlvbihuZXdWYWx1ZSl7aWYoIXRoaXMuZG9ja2VkU2V0KXt0aGlzLnNldFNpZGVEb2NrZWRQb3NpdGlvbihcInJpZ2h0XCIsMCl9XG50aGlzLnBvc3RJbnN0cnVjdGlvbnMucHVzaChmdW5jdGlvbigpe3dsQXV0b0ljb25NYXJnaW5MZWZ0PW5ld1ZhbHVlO3dsQXV0b0ljb25Ub29sdGlwTWFyZ2luTGVmdD13bEF1dG9JY29uTWFyZ2luTGVmdC13bEF1dG9JY29uVG9vbHRpcE1hcmdpbkxlZnRSZWxhdGl2ZTtqcTE4KFwiI3N0YXJ0V2xBdXRvXCIpLmNzcyhcIm1hcmdpbi1cIitsZWZ0T3JSaWdodCx3bEF1dG9JY29uTWFyZ2luTGVmdCtcInB4XCIpO2pxMTgoXCIjbG9hZGluZ1dsQXV0b1wiKS5jc3MoXCJtYXJnaW4tXCIrbGVmdE9yUmlnaHQsd2xBdXRvSWNvbk1hcmdpbkxlZnQrXCJweFwiKTtqcTE4KFwiI2ltZ0FjZXNzaWJpbGlkYWRlV2xBdXRvXCIpLmNzcyhcIm1hcmdpbi1cIitsZWZ0T3JSaWdodCx3bEF1dG9JY29uVG9vbHRpcE1hcmdpbkxlZnQrXCJweFwiKX0pfVxudGhpcy5nZXRJY29uTWFyZ2luVlBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHdsQXV0b0ljb25Ub3B9XG50aGlzLnNldEljb25NYXJnaW5WUG9zaXRpb249ZnVuY3Rpb24obmV3VmFsdWUpe2lmKCF0aGlzLmRvY2tlZFNldCl7dGhpcy5zZXRTaWRlRG9ja2VkUG9zaXRpb24oXCJyaWdodFwiLDApfVxudGhpcy5wb3N0SW5zdHJ1Y3Rpb25zLnB1c2goZnVuY3Rpb24oKXt3bEF1dG9JY29uVG9wPW5ld1ZhbHVlO3dsQXV0b0ljb25Ub29sdGlwVG9wPXdsQXV0b0ljb25Ub3Ard2xBdXRvSWNvblRvb2x0aXBUb3BSZWxhdGl2ZTtqcTE4KFwiI3N0YXJ0V2xBdXRvXCIpLmNzcyhcInRvcFwiLHdsQXV0b0ljb25Ub3ArXCJweFwiKTtqcTE4KFwiI2xvYWRpbmdXbEF1dG9cIikuY3NzKFwidG9wXCIsd2xBdXRvSWNvblRvcCtcInB4XCIpO2pxMTgoXCIjaW1nQWNlc3NpYmlsaWRhZGVXbEF1dG9cIikuY3NzKFwidG9wXCIsd2xBdXRvSWNvblRvb2x0aXBUb3ArXCJweFwiKX0pfVxudGhpcy5nZXRJY29uc1Bvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHdsQXV0b0ljb25Ub3B9XG50aGlzLnNldEljb25zUG9zaXRpb249ZnVuY3Rpb24obmV3VmFsdWUpe2lmKCF0aGlzLmRvY2tlZFNldCl7dGhpcy5zZXRTaWRlRG9ja2VkUG9zaXRpb24oXCJyaWdodFwiLDApfVxudGhpcy5wb3N0SW5zdHJ1Y3Rpb25zLnB1c2goZnVuY3Rpb24oKXt3bEF1dG9JY29uc1Bvc2l0aW9uPW5ld1ZhbHVlO2pxMTgoXCIjc3RhcnRXbEF1dG9cIikucmVtb3ZlQXR0cihcImNsYXNzXCIpLmNzcyhcInBvc2l0aW9uXCIsd2xBdXRvSWNvbnNQb3NpdGlvbik7anExOChcIiNsb2FkaW5nV2xBdXRvXCIpLmNzcyhcInRvcFwiLHdsQXV0b0ljb25zUG9zaXRpb24pO2pxMTgoXCIjaW1nQWNlc3NpYmlsaWRhZGVXbEF1dG9cIikuY3NzKFwidG9wXCIsd2xBdXRvSWNvbnNQb3NpdGlvbil9KX1cbnRoaXMuYXV0b1Nob3dXbEF1dG89ZnVuY3Rpb24oKXtqcTE4KFwiI2ltZ0FjZXNzaWJpbGlkYWRlV2xBdXRvXCIpLmhpZGUoKTtqcTE4KFwiI3N0YXJ0V2xBdXRvXCIpLmhpZGUoKTtqcTE4KFwiI2xvYWRpbmdXbEF1dG9cIikuaGlkZSgpO3RoaXMuYXV0b1N0YXJ0PSEwO3RoaXMuc2hvd1dsQXV0b1BsYXllcigpfVxudmFyIHByb25vdW5zPVtcIlYuIEV4LsOCwqpcIixcIlYuIE1hZy7DgsKqXCIsXCJWLiBNYWcuw4LCqlwiLFwiVi4gUy5hXCIsXCJWLiBTLlwiLFwiUGUuXCIsXCJEacODwqFjLlwiLFwiQWMuXCIsXCJJbG1vLlwiLFwiU3IuXCIsXCJTcmEuXCIsXCJWLiBTLsOCwqpcIixcIkRyLlwiLFwiQXJxLlwiLFwiQmliLlwiLFwiRW5nLlwiLFwiQ29tLlwiLFwiUHJvZi5cIixcIkRlcy5cIixcIlByLlwiLFwiQWNhZC5cIixcIkFjYWTDg8KqbS5cIixcIkFkbS5cIixcIkFkdi5cIixcIkFsbS5cIixcIkFsLlwiLFwiQmVsLlwiLFwiQnBvLlwiLFwiQ2FkLlwiLFwiQ2FwLlwiLFwiQ2FyZC5cIixcIkNvbS5cIixcIkNvbXRlLlwiLFwiQ29ucy5cIixcIkRlcC5cIixcIkRpw4PCoWMuXCIsXCJEcmEuXCIsXCJFeGEuXCIsXCJHZW4uXCIsXCJHYWwuXCIsXCJJbG1hLlwiLFwiTWFqLlwiLFwiTcODwqlkLlwiLFwiTW9ucy5cIixcIlBlLlwiLFwiUGguRC5cIixcIk0uU2MuXCIsXCJSZXYuXCIsXCJTcnMuXCIsXCJTcmFzLlwiLFwiU3J0YXMuXCJdO2Z1bmN0aW9uIEluc2VydFNwZWNpYWxUYWdzKHJlY2VpdmVkQ29udGVudCl7dmFyIHVzZWRUYWdzPSdkaXYsIHAsIGxpLCB0ZCwgdGgsIGRkLCBoMSwgaDIsIGgzLCBoNCwgaDUsIGg2LCBoNywgYnIsIGRsJzt2YXIgYXZvaWQ9J3NjcmlwdCwgbm9zY3JpcHQsIHN0eWxlLCBsaW5rLCAuLWpzLWV4cGFuc2l2ZWwgZHQnO3ZhciBkZXN0cm95PSdzY3JpcHQnO3ZhciB3bGF1dG9PcGVuVGFnPSc8d2xhdXRvPic7dmFyIG9wZW5UYWc9bnVsbDt2YXIgdGFncz1qcTE4KHJlY2VpdmVkQ29udGVudCkudGFnSFRNTCgpLnNwbGl0KFwiPjxcIik7dmFyIHJldHVyblN0cj10YWdzWzBdK1wiPlwiO3ZhciBjb250ZW50cz1qcTE4KHJlY2VpdmVkQ29udGVudCkuY29udGVudHMoKTt2YXIgcHJvbm91bkRpdmlzb3I9XCJbfnByfl1cIjt2YXIgY29tcGF0aWJpbGl0eT13aW5kb3cuV0xDb21wYXRpYmlsaXR5TW9kZUFjdGl2YXRlZDtqcTE4KGNvbnRlbnRzKS5lYWNoKGZ1bmN0aW9uKCl7aWYodGhpcy5ub2RlVHlwZT09Myl7Zm9yKGk9MDtpPHByb25vdW5zLmxlbmd0aDtpKyspe3RyeXtpZihqcTE4KHRoaXMpLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCIgXCIrcHJvbm91bnNbaV0udG9Mb3dlckNhc2UoKSk+PTApe3ZhciBjcmV1PWpxMTgodGhpcykucGFyZW50KCkuaHRtbCgpLnJlcGxhY2UocHJvbm91bnNbaV0scHJvbm91bnNbaV0ucmVwbGFjZSgnLicsJycpK3Byb25vdW5EaXZpc29yKTtqcTE4KHRoaXMpLnBhcmVudCgpLmh0bWwoY3JldSl9fWNhdGNoKGVycil7fX19fSk7Y29udGVudHM9anExOChyZWNlaXZlZENvbnRlbnQpLmNvbnRlbnRzKCk7anExOChjb250ZW50cykuZWFjaChmdW5jdGlvbigpe3ZhciBpc0NvbW1lbnQ9dGhpcy5ub2RlVHlwZT09ODtpZighaXNDb21tZW50JiYhanExOCh0aGlzKS5pcyhhdm9pZCkmJiFqcTE4KHRoaXMpLmhhc0NsYXNzKCduby13bGF1dG8nKSYmKHRoaXMubm9kZVR5cGU9PTN8fChqcTE4KHRoaXMpLmlzKFwiOnZpc2libGVcIil8fGNvbXBhdGliaWxpdHkpKSl7aWYodGhpcy5ub2RlVHlwZSE9Myl7aWYoanExOCh0aGlzKS5pcygnaW1nJykpe29wZW5UYWc9anExOCh3bGF1dG9PcGVuVGFnKS5hZGRDbGFzcygnd2xhdXRvSG92ZXIgd2xhdXRvSW1hZ2UnKS5pbnNlcnRCZWZvcmUoanExOCh0aGlzKSkuYmVmb3JlKFwiIFwiKTtqcTE4KHRoaXMpLmFwcGVuZFRvKG9wZW5UYWcpO29wZW5UYWc9bnVsbH1lbHNlIGlmKGpxMTgodGhpcykuaXModXNlZFRhZ3MpKXtpZihvcGVuVGFnIT1udWxsKXtvcGVuVGFnPW51bGx9XG5JbnNlcnRTcGVjaWFsVGFncyh0aGlzKX1lbHNle2lmKGpxMTgodGhpcykuaGFzKHVzZWRUYWdzKS5sZW5ndGgpe2lmKG9wZW5UYWchPW51bGwpe29wZW5UYWc9bnVsbH1cbkluc2VydFNwZWNpYWxUYWdzKHRoaXMpfWVsc2V7aWYob3BlblRhZz09bnVsbCl7b3BlblRhZz1qcTE4KHdsYXV0b09wZW5UYWcpLmluc2VydEJlZm9yZShqcTE4KHRoaXMpKS5iZWZvcmUoXCIgXCIpO29wZW5UYWcuY3NzKCdsaW5lLWhlaWdodCcsanExOCh0aGlzKS5wYXJlbnQoKS5jc3MoJ2xpbmUtaGVpZ2h0JykpfVxuanExOCh0aGlzKS5maW5kKGRlc3Ryb3kpLnJlbW92ZSgpO2pxMTgodGhpcykuYXBwZW5kVG8ob3BlblRhZyl9fX1lbHNle3ZhciB0cmltbWVkVGV4dD1qcTE4LnRyaW0oanExOCh0aGlzKS50ZXh0KCkpO2lmKHRyaW1tZWRUZXh0Lmxlbmd0aD4wKXtpZihvcGVuVGFnPT1udWxsKXtvcGVuVGFnPWpxMTgod2xhdXRvT3BlblRhZykuaW5zZXJ0QmVmb3JlKGpxMTgodGhpcykpLmJlZm9yZShcIiBcIik7b3BlblRhZy5jc3MoJ2xpbmUtaGVpZ2h0JyxqcTE4KHRoaXMpLnBhcmVudCgpLmNzcygnbGluZS1oZWlnaHQnKSl9XG52YXIgZGl2aXNvcj1cIlt+XVwiO3ZhciBuZXdUZXh0PWpxMTgodGhpcykudGV4dCgpLnJlcGxhY2UoL1xcLiAvZyxcIi5cIitkaXZpc29yKS5yZXBsYWNlKC9cXCEgL2csXCIhXCIrZGl2aXNvcikucmVwbGFjZSgvXFw/IC9nLFwiP1wiK2Rpdmlzb3IpLnJlcGxhY2UoL1xcLiQvZyxcIi5cIitkaXZpc29yKS5yZXBsYWNlKC9cXCEkL2csXCIhXCIrZGl2aXNvcikucmVwbGFjZSgvXFw/JC9nLFwiP1wiK2Rpdmlzb3IpO25ld1RleHQ9bmV3VGV4dC5yZXBsYWNlKHByb25vdW5EaXZpc29yLFwiLlwiKTt2YXIgcGhyYXNlcz1uZXdUZXh0LnNwbGl0KGRpdmlzb3IpO2lmKHBocmFzZXMubGVuZ3RoPjEpe2Zvcih2YXIgaT0wO2k8cGhyYXNlcy5sZW5ndGg7aSsrKXtvcGVuVGFnLmFwcGVuZChwaHJhc2VzW2ldKTtpZihpPHBocmFzZXMubGVuZ3RoLTEpe29wZW5UYWc9anExOCh3bGF1dG9PcGVuVGFnKS5pbnNlcnRCZWZvcmUoanExOCh0aGlzKSkuYmVmb3JlKFwiIFwiKTtvcGVuVGFnLmNzcygnbGluZS1oZWlnaHQnLGpxMTgodGhpcykucGFyZW50KCkuY3NzKCdsaW5lLWhlaWdodCcpKX19fWVsc2V7b3BlblRhZy5hcHBlbmQoanExOCh0aGlzKS50ZXh0KCkpfVxuanExOCh0aGlzKS5yZW1vdmUoKX19fX0pfVxuZnVuY3Rpb24gYmluZENsaWNrRXZlbnQod2xhdXRvT2JqZWN0KXtqcTE4KFwid2xhdXRvXCIpLmNsaWNrKGZ1bmN0aW9uKGV2dCl7aWYoanExOCh0aGlzKS5oYXNDbGFzcyhcIndsYXV0b0hvdmVyXCIpKXtpZihqcTE4KHRoaXMpLnRleHQoKS5sZW5ndGg+V0xNYXhUcmFuc2xhdGlvblNpemUpe2pxMTgodGhpcykucmVtb3ZlQ2xhc3MoXCJ3bGF1dG9Ib3ZlclwiKTtldnQucHJldmVudERlZmF1bHQoKX1lbHNle2pxMTgoXCIubGlua1Byb21wdC12aWV3XCIpLmZhZGVPdXQoXCJmYXN0XCIsZnVuY3Rpb24oKXtqcTE4KHRoaXMpLnJlbW92ZSgpfSk7anExOChcIndsYXV0by53bGF1dG9QbGF5aW5nXCIpLnJlbW92ZUNsYXNzKFwid2xhdXRvUGxheWluZ1wiKTtqcTE4KHRoaXMpLmFkZENsYXNzKFwid2xhdXRvUGxheWluZ1wiKTt0cnl7dmFyIG9yaWdpbmFsSHJlZj1cIlwiO3ZhciBvcmlnaW5hbFRhcmdldD1cIlwiO3ZhciBhdHRycztpZihqcTE4KHRoaXMpLnBhcmVudHMoJ2EnKS5sZW5ndGghPTApe29yaWdpbmFsSHJlZj1qcTE4KHRoaXMpLnBhcmVudHMoJ2EnKS5maXJzdCgpLmF0dHIoJ2hyZWYnKTtvcmlnaW5hbFRhcmdldD1qcTE4KHRoaXMpLnBhcmVudHMoJ2EnKS5maXJzdCgpLmF0dHIoJ3RhcmdldCcpO2F0dHJzPWpxMTgodGhpcykucGFyZW50cygnYScpLmZpcnN0KCkucHJvcCgnYXR0cmlidXRlcycpfWVsc2UgaWYoanExOChldnQudGFyZ2V0KS5wYXJlbnRzKCdhJykubGVuZ3RoIT0wKXtvcmlnaW5hbEhyZWY9anExOChldnQudGFyZ2V0KS5wYXJlbnRzKCdhJykuZmlyc3QoKS5hdHRyKCdocmVmJyk7b3JpZ2luYWxUYXJnZXQ9anExOChldnQudGFyZ2V0KS5wYXJlbnRzKCdhJykuZmlyc3QoKS5hdHRyKCd0YXJnZXQnKTthdHRycz1qcTE4KGV2dC50YXJnZXQpLnBhcmVudHMoJ2EnKS5maXJzdCgpLnByb3AoJ2F0dHJpYnV0ZXMnKX1lbHNlIGlmKGpxMTgoZXZ0LnRhcmdldCkuaXMoJ2EnKSl7b3JpZ2luYWxIcmVmPWpxMTgoZXZ0LnRhcmdldCkuYXR0cignaHJlZicpO29yaWdpbmFsVGFyZ2V0PWpxMTgoZXZ0LnRhcmdldCkuYXR0cigndGFyZ2V0Jyk7YXR0cnM9anExOChldnQudGFyZ2V0KS5wcm9wKCdhdHRyaWJ1dGVzJyl9XG5pZihvcmlnaW5hbEhyZWYhPXVuZGVmaW5lZCYmb3JpZ2luYWxIcmVmIT1udWxsJiZvcmlnaW5hbEhyZWYhPVwiXCImJm9yaWdpbmFsSHJlZlswXSE9XCIjXCImJm9yaWdpbmFsSHJlZi5pbmRleE9mKCdqYXZhc2NyaXB0JykhPTApe2V2dC5wcmV2ZW50RGVmYXVsdCgpO2pxMTgodGhpcykubGlua1Byb21wdChvcmlnaW5hbEhyZWYsb3JpZ2luYWxUYXJnZXQsZXZ0KX1lbHNlIGlmKGF0dHJzIT11bmRlZmluZWQpe2V2dC5wcmV2ZW50RGVmYXVsdCgpO2pxMTgodGhpcykuYWx0TGlua1Byb21wdChhdHRycyxldnQpfX1jYXRjaChlcnIpe2pxMTgoXCJ3bGF1dG8ud2xhdXRvUGxheWluZ1wiKS5yZW1vdmVDbGFzcyhcIndsYXV0b1BsYXlpbmdcIil9XG52YXIgbm9kZXM9anExOCh0aGlzKS5jb250ZW50cygpO3ZhciB0ZXh0PVwiXCI7anExOChub2RlcykuZWFjaChmdW5jdGlvbigpe2lmKGpxMTgodGhpcykuaXMoXCJpbWdcIikpe2lmKGpxMTgodGhpcykuYXR0cihcImFsdFwiKSE9dW5kZWZpbmVkKVxudGV4dCs9anExOCh0aGlzKS5hdHRyKFwiYWx0XCIpK1wiIFwifWVsc2V7dGV4dCs9anExOCh0aGlzKS50ZXh0KCkrXCIgXCJ9fSk7aWYodGV4dCE9XCJcIilcbndsYXV0b09iamVjdC5vYmpQbGF5ZXIucGxheUdlc3R1cmUodGV4dC50cmltKCkpO2Vsc2V7d2xhdXRvT2JqZWN0LldsYXV0b1JlcXVlc3ROZXh0VHJhbnNsYXRpb24oKX1cbmV2dC5zdG9wUHJvcGFnYXRpb24oKX19fSl9XG50aGlzLkluc2VydFRhZ3M9ZnVuY3Rpb24obmV3RWxlbWVudCl7SW5zZXJ0U3BlY2lhbFRhZ3MobmV3RWxlbWVudCk7anExOChcIndsYXV0b1wiKS51bmJpbmQoKTtqcTE4KG5ld0VsZW1lbnQpLmZpbmQoXCJ3bGF1dG9cIikuYWRkQ2xhc3MoXCJ3bGF1dG9Ib3ZlclwiKTtiaW5kQ2xpY2tFdmVudCh0aGlzKX1cbnRoaXMuc2hvd1dsQXV0b1BsYXllcj1mdW5jdGlvbigpe3ZhciB3bGF1dG9PYmo9dGhpcztpZighd2xhdXRvT2JqLnByb2Nlc3NlZEJ5V2xBdXRvKXtqcTE4KFwiI3N0YXJ0V2xBdXRvXCIpLmhpZGUoKTtqcTE4KFwiI2xvYWRpbmdXbEF1dG9cIikuc2hvdygpO3dsYXV0b09iai5vYmpQbGF5ZXI9bmV3IFdMVW5pdHkod2xhdXRvT2JqKTtJbnNlcnRTcGVjaWFsVGFncyh3bGF1dG9PYmouZ2V0UGFyZW50VGFnVG9BcHBseSgpKTtqcTE4KFwid2xhdXRvXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgd2xhdXRvdGFnPXRoaXM7aWYoanExOCh3bGF1dG90YWcpLnRleHQoKS5sZW5ndGg+V0xNYXhUcmFuc2xhdGlvblNpemUpe3ZhciBlbGVtZW50cz1bXTtmb3IodmFyIGk9MDtpPHdsYXV0b3RhZy5jaGlsZE5vZGVzLmxlbmd0aDtpKyspe2VsZW1lbnRzLnB1c2god2xhdXRvdGFnLmNoaWxkTm9kZXNbaV0pfVxuZm9yKHZhciBpPTA7aTxlbGVtZW50cy5sZW5ndGg7aSsrKXtqcTE4KGVsZW1lbnRzW2ldKS5pbnNlcnRCZWZvcmUod2xhdXRvdGFnKX1cbmpxMTgod2xhdXRvdGFnKS5yZW1vdmUoKX19KTtiaW5kQ2xpY2tFdmVudCh3bGF1dG9PYmopO3dsYXV0b09iai5wcm9jZXNzZWRCeVdsQXV0bz0hMDt3bGF1dG9PYmouV2xhdXRvTG9hZGVkKCExKX1lbHNle2pxMTgoXCJ3bGF1dG9cIikuYWRkQ2xhc3MoXCJ3bGF1dG9Ib3ZlclwiKTt3bGF1dG9PYmouRGVsYXllZFNob3coITApfVxudGhpcy5TZXRXTEludGVyYWN0aW9uKCl9XG50aGlzLldsYXV0b0xvYWRlZD1mdW5jdGlvbihkb250UGxheSx0aW1lb3V0KXt0cnl7ZG9udFBsYXk9ZG9udFBsYXk/ITA6ITF9Y2F0Y2goZXJyKXt9XG50aGlzLkRlbGF5ZWRTaG93KGRvbnRQbGF5LHRpbWVvdXQpfVxudGhpcy5EZWxheWVkU2hvdz1mdW5jdGlvbihkb250UGxheSx0aW1lb3V0KXt2YXIgd2xhdXRvT2JqPXRoaXM7aWYodHlwZW9mIHRpbWVvdXQ9PVwibnVtYmVyXCIpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpZighd2xhdXRvT2JqLmlzV2xBdXRvUGxheWVyT25TY3JlZW4pe1dlYkxpYnJhcy5zaG93V2luZG93KHdsYXV0b09iaixkb250UGxheSl9fSx0aW1lb3V0KX1lbHNlIGlmKCF3bGF1dG9PYmouaXNXbEF1dG9QbGF5ZXJPblNjcmVlbnx8IWRvbnRQbGF5KXtXZWJMaWJyYXMuc2hvd1dpbmRvdyh3bGF1dG9PYmosZG9udFBsYXkpfX1cbldlYkxpYnJhcy5zaG93V2luZG93PWZ1bmN0aW9uKHdsYXV0b09iaixkb250UGxheSl7cmVtb3ZlUGxheWluZ0JhY2tncm91bmQoKTt2YXIgYW5pbVByb3BlcnRpZXM9e1widG9wXCI6XCIxNTlweFwifTtpZih3bGF1dG9PYmouYXV0b1N0YXJ0KXthbmltUHJvcGVydGllcz17XCJ0b3BcIjpcIjE1OXB4XCIsXCJsZWZ0XCI6XCI1MCVcIixcIm1hcmdpbi1sZWZ0XCI6XCIxNjVweFwifX1cbmpxMTgoXCIjd2xhdXRvQ29udGFpbmVyXCIpLmFuaW1hdGUoYW5pbVByb3BlcnRpZXMsXCJmYXN0XCIsZnVuY3Rpb24oKXtpZighZG9udFBsYXkpe2pxMTgoJyNiYWxhb0NsaXF1ZUZyYXNlJykuc2hvdyg2MDApO3dsYXV0b09iai5EZWxheWVkUGxheS5jYWxsKHdsYXV0b09iaiwyNTApO2pxMTgoXCIjc3RhcnRXbEF1dG9cIikuc2hvdygpO2pxMTgoXCIjbG9hZGluZ1dsQXV0b1wiKS5oaWRlKCl9fSk7d2xhdXRvT2JqLmlzV2xBdXRvUGxheWVyT25TY3JlZW49ITB9XG50aGlzLkRlbGF5ZWRQbGF5PWZ1bmN0aW9uKGRlbGF5KXt2YXIgd2xhdXRvT2JqPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe3RyeXtpZighd2xhdXRvT2JqLmF1dG9TdGFydCl7Y29uc29sZS5sb2coXCJEZWxheWVkIHBsYXlcIil9ZWxzZXtqcTE4KFwid2xhdXRvW2hhc2hdXCIpLmZpcnN0KCkuY2xpY2soKX19Y2F0Y2goZXJyKXt9XG5pZihqcTE4KCcjYmFsYW9DbGlxdWVGcmFzZScpLmlzKCc6dmlzaWJsZScpKXtzZXRUaW1lb3V0KFwianExOCgnI2JhbGFvQ2xpcXVlRnJhc2UnKS5oaWRlKDYwMClcIiw1MDAwKX19LGRlbGF5KX1cbmZ1bmN0aW9uIHJlbW92ZVBsYXlpbmdCYWNrZ3JvdW5kKCl7dmFyIGN1cnJlbnRseVBsYXlpbmc9anExOChcIi53bGF1dG9QbGF5aW5nXCIpO2N1cnJlbnRseVBsYXlpbmcucmVtb3ZlQ2xhc3MoJ3dsYXV0b1BsYXlpbmcnKX1cbnRoaXMuY2xvc2VXbEF1dG9QbGF5ZXI9ZnVuY3Rpb24oKXtyZW1vdmVQbGF5aW5nQmFja2dyb3VuZCgpO3ZhciBpPTA7dmFyIHdsYXV0b09iaj10aGlzO2lmKHRoaXMud2xMb2FkZWQpe3RoaXMub2JqUGxheWVyLmdldFVuaXR5KCkuZ2V0VW5pdHkoKS5TZW5kTWVzc2FnZShcIldlYkxpYnJhc1wiLFwiV2luZG93Q2xvc2VkXCIsXCJcIil9XG5qcTE4KFwiI3dsYXV0b0NvbnRhaW5lclwiKS5hbmltYXRlKHtcInRvcFwiOlwiLTgwMHB4XCJ9LFwiZmFzdFwiKTt0aGlzLmlzV2xBdXRvUGxheWVyT25TY3JlZW49ITE7anExOChcIndsYXV0b1wiKS5yZW1vdmVDbGFzcyhcIndsYXV0b1JlYWxjZVwiKTt0aGlzLmN1cnJlbnRHZXN0dXJlPVwiXCI7anExOChcIi5saW5rUHJvbXB0LXZpZXdcIikuZmFkZU91dChcImZhc3RcIixmdW5jdGlvbigpe2pxMTgodGhpcykucmVtb3ZlKCl9KTt0aGlzLm9ialBsYXllci5oaWRlV2xhdXRvKCk7anExOChcIndsYXV0b1wiKS5yZW1vdmVDbGFzcyhcIndsYXV0b0hvdmVyXCIpLnJlbW92ZUNsYXNzKFwid2xhdXRvUGxheWluZ1wiKTt0aGlzLkNsZWFyV0xJbnRlcmFjdGlvbigpfVxudGhpcy5oaWRlSGludD1mdW5jdGlvbihmYXN0KXt2YXIgaW50ZW5zaXR5PWZhc3Q/XCJmYXN0XCI6XCJzbG93XCI7dHJ5e2pxMTgoXCIjaW1nQWNlc3NpYmlsaWRhZGVXbEF1dG9cIikuZmFkZU91dChpbnRlbnNpdHkpfWNhdGNoKGUpe319XG50aGlzLnNob3dIaW50PWZ1bmN0aW9uKGZhc3Qpe3ZhciBpbnRlbnNpdHk9ZmFzdD9cImZhc3RcIjpcInNsb3dcIjt0cnl7anExOChcIiNpbWdBY2Vzc2liaWxpZGFkZVdsQXV0b1wiKS5mYWRlSW4oaW50ZW5zaXR5KTtpZighZmFzdCl7c2V0VGltZW91dChwZG8uaGlkZUhpbnQsMTAwMCl9fWNhdGNoKGUpe319XG50aGlzLkluc2VydEhUTUxFbGVtZW50cz1mdW5jdGlvbigpe3ZhciB3bGF1dG9PYmo9dGhpczt2YXIgcGFyZW50U3RhcnRUYWc9d2xhdXRvT2JqLmdldEVsZW1lbnRUb0FwcGVuZFdMKCk7aWYocGFyZW50U3RhcnRUYWchPVwiYm9keVwiKVxue3dsQXV0b0ljb25zUG9zaXRpb249XCJyZWxhdGl2ZVwiO3dsQXV0b0ljb25Ub3A9MDtpc1BhZ2VDZW50ZXJlZD0hMTtsZWZ0T3JSaWdodFBvcz0wO3dsQXV0b0ljb25Ub29sdGlwVG9wPTB9XG5qcTE4KFwiPGxpbmsgLz5cIikuYXR0cihcInJlbFwiLFwic3R5bGVzaGVldFwiKS5hdHRyKFwiaHJlZlwiLHdsQXV0b1Jvb3QrXCIvd2xTdHlsZS5jc3NcIikuYXBwZW5kVG8oXCJoZWFkXCIpO2pxMTgoXCI8ZGl2IC8+XCIpLmF0dHIoXCJpZFwiLFwic3RhcnRXbEF1dG9cIikuYWRkQ2xhc3Mod2xhdXRvT2JqLnBhcmFtcy5wb3NpdGlvbikuYXBwZW5kVG8ocGFyZW50U3RhcnRUYWcpLmFwcGVuZChqcTE4KFwiPGRpdiAvPlwiKS5hdHRyKFwiaWRcIixcInN0YXJ0V2xJY29uXCIpKS5hcHBlbmQoanExOChcIjxkaXYgLz5cIikuYXR0cihcImlkXCIsXCJzdGFydFdsRGV0YWlsc1wiKS5hcHBlbmQoanExOChcIjxkaXYgLz5cIikuaHRtbChcIkFjZXNzJmlhY3V0ZTt2ZWwgZW0gTGlicmFzXCIpLmF0dHIoXCJpZFwiLFwic3RhcnRXbEhlYWRlclwiKSkuYXBwZW5kKGpxMTgoXCI8ZGl2IC8+XCIpLmh0bWwoXCImY29weTsgUHJvRGVhZlwiKS5hdHRyKFwiaWRcIixcInN0YXJ0V2xGb290ZXJcIikpKS5jbGljayhmdW5jdGlvbigpe3dsLnBhcmFtcy5vbk9wZW4oKTt3bGF1dG9PYmouc2hvd1dsQXV0b1BsYXllcigpfSk7anExOChcIjxpbnB1dCAvPlwiKS5hZGRDbGFzcyhcIm5vLXdsYXV0b1wiKS5hdHRyKFwidHlwZVwiLFwiaW1hZ2VcIikuYXR0cihcInNyY1wiLHdsQXV0b1Jvb3QrXCIvbG9hZGluZy5naWZcIikuYXR0cihcImlkXCIsXCJsb2FkaW5nV2xBdXRvXCIpLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIikuY3NzKFwicG9zaXRpb25cIix3bEF1dG9JY29uc1Bvc2l0aW9uKS5jc3MoXCJ6LWluZGV4XCIsd2xBdXRvSWNvbnNaSW5kZXgpLmNzcyhcInRvcFwiLHdsQXV0b0ljb25Ub3ArXCJweFwiKS5jc3MobGVmdE9yUmlnaHQsaXNQYWdlQ2VudGVyZWQ/XCI1MCVcIjpsZWZ0T3JSaWdodFBvcykuY3NzKFwibWFyZ2luLVwiK2xlZnRPclJpZ2h0LHdsQXV0b0ljb25NYXJnaW5MZWZ0K1wicHhcIikuY3NzKFwid2lkdGhcIix3bEF1dG9JY29uV2lkdGgrXCJweFwiKS5jc3MoXCJoZWlnaHRcIix3bEF1dG9JY29uSGVpZ2h0K1wicHhcIikuYXBwZW5kVG8ocGFyZW50U3RhcnRUYWcpO3ZhciB3bGF1dG9Db250YWluZXI9anExOChcIjxkaXYgLz5cIikuYWRkQ2xhc3MoXCJuby13bGF1dG9cIikuYXR0cihcImlkXCIsXCJ3bGF1dG9Db250YWluZXJcIik7d2xhdXRvQ29udGFpbmVyLmFwcGVuZFRvKFwiYm9keVwiKTtqcTE4KFwiPGRpdiBpZD0nd2xhdXRvSGFuZGxlJz5cIikuYWRkQ2xhc3MoXCJuby13bGF1dG9cIikuY3NzKFwicG9zaXRpb25cIixcImFic29sdXRlXCIpLmNzcyhcImxlZnRcIixcIjlweFwiKS5jc3MoXCJ0b3BcIixcIjJweFwiKS5jc3MoXCJ3aWR0aFwiLFwiMjEwcHhcIikuY3NzKFwiaGVpZ2h0XCIsXCIyM3B4XCIpLmNzcyhcImN1cnNvclwiLFwibW92ZVwiKS5hcHBlbmRUbyh3bGF1dG9Db250YWluZXIpO2pxMTgoXCI8aW1nIC8+XCIpLmFkZENsYXNzKFwibm8td2xhdXRvXCIpLmF0dHIoXCJzcmNcIix3bEF1dG9Sb290K1wiL2Nsb3NlLXdsYXV0by5wbmdcIikuYXR0cihcImlkXCIsXCJjbG9zZVdsQXV0b1wiKS5hdHRyKFwiZGlzcGxheVwiLFwibm9uZVwiKS5jc3MoXCJjdXJzb3JcIixcInBvaW50ZXJcIikuY3NzKFwicG9zaXRpb25cIixcImFic29sdXRlXCIpLmNzcyhcInotaW5kZXhcIiwod2xBdXRvQ29udGFpbmVyWkluZGV4KzEpKS5jc3MoXCJ0b3BcIixcIjVweFwiKS5jc3MoXCJyaWdodFwiLFwiOHB4XCIpLmNzcyhcIndpZHRoXCIsXCIxNnB4XCIpLmNzcyhcImhlaWdodFwiLFwiMTZweFwiKS5jc3MoXCJiYWNrZ3JvdW5kXCIsXCJ1cmwoXCIrd2xBdXRvUm9vdCtcIi9jbG9zZS13bGF1dG8ucG5nKSBuby1yZXBlYXQgdG9wIGxlZnRcIikuYXBwZW5kVG8od2xhdXRvQ29udGFpbmVyKS5jbGljayhmdW5jdGlvbigpe3dsLnBhcmFtcy5vbkNsb3NlKCk7d2xhdXRvT2JqLmNsb3NlV2xBdXRvUGxheWVyKCl9KTt2YXIgd2xhdXRvU2NyZWVuPWpxMTgoXCI8ZGl2IC8+XCIpLmFkZENsYXNzKFwibm8td2xhdXRvXCIpLmF0dHIoXCJpZFwiLFwid2xhdXRvU2NyZWVuXCIpLmFwcGVuZFRvKHdsYXV0b0NvbnRhaW5lcik7anExOChcIjxkaXYgLz5cIikuYWRkQ2xhc3MoXCJuby13bGF1dG9cIikuYXR0cihcImlkXCIsXCJ3bGF1dG9QbGF5ZXJcIikuYXBwZW5kVG8od2xhdXRvU2NyZWVuKTt2YXIgaW1hZ2VIb3ZlcklFNz1cImJvcmRlcjogMXB4IHNvbGlkIFwiK1wicmdiKFwiK3dsQXV0b0hvdmVyQ29sb3IrXCIpXCIrXCIgIWltcG9ydGFudDttYXJnaW46LTFweDtcIjt2YXIgaW1hZ2VIb3Zlcj1cIm91dGxpbmU6IDFweCBzb2xpZCBcIitcInJnYihcIit3bEF1dG9Ib3ZlckNvbG9yK1wiKVwiK1wiICFpbXBvcnRhbnQ7XCI7dmFyIGltYWdlUGxheWluZ0lFNz1cImJvcmRlcjogMXB4IHNvbGlkIFwiK1wicmdiKFwiK3dsQXV0b1BsYXlpbmdDb2xvcitcIilcIitcIiAhaW1wb3J0YW50O21hcmdpbjotMXB4O1wiO3ZhciBpbWFnZVBsYXlpbmc9XCJvdXRsaW5lOiAxcHggc29saWQgXCIrXCJyZ2IoXCIrd2xBdXRvUGxheWluZ0NvbG9yK1wiKVwiK1wiICFpbXBvcnRhbnQ7XCI7anExOChmdW5jdGlvbigpe2pxMTgoXCIjd2xhdXRvQ29udGFpbmVyXCIpLmRyYWdnYWJsZSh7Y29udGFpbm1lbnQ6XCJ3aW5kb3dcIn0pfSk7anExOChcIiN3bGF1dG9TY3JlZW5cIikuaG92ZXIoZnVuY3Rpb24oKXtqcTE4KFwiI3dsYXV0b0NvbnRhaW5lclwiKS5kcmFnZ2FibGUoXCJkaXNhYmxlXCIpfSxmdW5jdGlvbigpe2pxMTgoXCIjd2xhdXRvQ29udGFpbmVyXCIpLmRyYWdnYWJsZShcImVuYWJsZVwiKX0pfVxudGhpcy5XbGF1dG9SZXF1ZXN0TmV4dFRyYW5zbGF0aW9uPWZ1bmN0aW9uKCl7dmFyIHdsYXV0b0hhc2hlZD1qcTE4KFwid2xhdXRvOnBhcmVudFwiKTt2YXIgbGFzdFBsYXllZD13bGF1dG9IYXNoZWQuZmlsdGVyKFwiLndsYXV0b1BsYXlpbmdcIikucmVtb3ZlQ2xhc3MoXCJ3bGF1dG9QbGF5aW5nXCIpO3ZhciBpbmRleE9mTGFzdFBsYXllZEhhc2g9d2xhdXRvSGFzaGVkLmluZGV4KGxhc3RQbGF5ZWQubGFzdCgpKTtpZihpbmRleE9mTGFzdFBsYXllZEhhc2g9PS0xKXtyZXR1cm59XG5pZihpbmRleE9mTGFzdFBsYXllZEhhc2g8d2xhdXRvSGFzaGVkLmxlbmd0aCYmd2xhdXRvSGFzaGVkW2luZGV4T2ZMYXN0UGxheWVkSGFzaCsxXSE9bnVsbCl7aWYoanExOC50cmltKGpxMTgod2xhdXRvSGFzaGVkW2luZGV4T2ZMYXN0UGxheWVkSGFzaCsxXSkudGV4dCgpKSE9XCJcIil7d2xhdXRvSGFzaGVkW2luZGV4T2ZMYXN0UGxheWVkSGFzaCsxXS5jbGljaygpfWVsc2V7anExOCh3bGF1dG9IYXNoZWRbaW5kZXhPZkxhc3RQbGF5ZWRIYXNoKzFdKS5hZGRDbGFzcyhcIndsYXV0b1BsYXlpbmdcIik7aWYoanExOCh3bGF1dG9IYXNoZWRbaW5kZXhPZkxhc3RQbGF5ZWRIYXNoKzFdKS5oYXNDbGFzcyhcIndsYXV0b0ltYWdlXCIpKVxud2xhdXRvSGFzaGVkW2luZGV4T2ZMYXN0UGxheWVkSGFzaCsxXS5jbGljaygpO2Vsc2UgdGhpcy5XbGF1dG9SZXF1ZXN0TmV4dFRyYW5zbGF0aW9uKCl9fX1cbnRoaXMuV2xhdXRvUmVxdWVzdFByZXZpb3VzVHJhbnNsYXRpb249ZnVuY3Rpb24oKXt2YXIgd2xhdXRvSGFzaGVkPWpxMTgoXCJ3bGF1dG86cGFyZW50XCIpO3ZhciBsYXN0UGxheWVkPXdsYXV0b0hhc2hlZC5maWx0ZXIoXCIud2xhdXRvUGxheWluZ1wiKS5yZW1vdmVDbGFzcyhcIndsYXV0b1BsYXlpbmdcIik7dmFyIGluZGV4T2ZMYXN0UGxheWVkSGFzaD13bGF1dG9IYXNoZWQuaW5kZXgobGFzdFBsYXllZC5sYXN0KCkpO2lmKGluZGV4T2ZMYXN0UGxheWVkSGFzaD09LTEpe3JldHVybn1cbmlmKGluZGV4T2ZMYXN0UGxheWVkSGFzaD4wJiZ3bGF1dG9IYXNoZWRbaW5kZXhPZkxhc3RQbGF5ZWRIYXNoLTFdIT1udWxsKXtpZihqcTE4LnRyaW0oanExOCh3bGF1dG9IYXNoZWRbaW5kZXhPZkxhc3RQbGF5ZWRIYXNoLTFdKS50ZXh0KCkpIT1cIlwiKXt3bGF1dG9IYXNoZWRbaW5kZXhPZkxhc3RQbGF5ZWRIYXNoLTFdLmNsaWNrKCl9ZWxzZXtqcTE4KHdsYXV0b0hhc2hlZFtpbmRleE9mTGFzdFBsYXllZEhhc2gtMV0pLmFkZENsYXNzKFwid2xhdXRvUGxheWluZ1wiKTtpZihqcTE4KHdsYXV0b0hhc2hlZFtpbmRleE9mTGFzdFBsYXllZEhhc2gtMV0pLmhhc0NsYXNzKFwid2xhdXRvSW1hZ2VcIikpXG53bGF1dG9IYXNoZWRbaW5kZXhPZkxhc3RQbGF5ZWRIYXNoLTFdLmNsaWNrKCk7ZWxzZSB0aGlzLldsYXV0b1JlcXVlc3RQcmV2aW91c1RyYW5zbGF0aW9uKCl9fX1cbnRoaXMuQ2hlY2tXTEludGVyYWN0aW9uPWZ1bmN0aW9uKCl7dmFyIGxhc3RUaW1lPXRoaXMuR2V0V0xJbnRlcmFjdGlvblZhbHVlKCk7aWYobGFzdFRpbWUhPW51bGwpe3ZhciBub3c9bmV3IERhdGUoKTtsYXN0VGltZS5zZXRNaW51dGVzKGxhc3RUaW1lLmdldE1pbnV0ZXMoKSs1KTtyZXR1cm4gbGFzdFRpbWU+bm93fWVsc2V7cmV0dXJuITF9fVxudGhpcy5TZXRXTEludGVyYWN0aW9uPWZ1bmN0aW9uKCl7aWYodHlwZW9mKFN0b3JhZ2UpIT09XCJ1bmRlZmluZWRcIil7c2Vzc2lvblN0b3JhZ2UuV0xJbnRlcmFjdGlvblRpbWU9bmV3IERhdGUoKX1lbHNle2RvY3VtZW50LmNvb2tpZT1cIldMSW50ZXJhY3Rpb25UaW1lPVwiKyhuZXcgRGF0ZSgpKX19XG50aGlzLkNsZWFyV0xJbnRlcmFjdGlvbj1mdW5jdGlvbigpe2lmKHR5cGVvZihTdG9yYWdlKSE9PVwidW5kZWZpbmVkXCIpe3Nlc3Npb25TdG9yYWdlLldMSW50ZXJhY3Rpb25UaW1lPW51bGx9ZWxzZXtkb2N1bWVudC5jb29raWU9J1dMSW50ZXJhY3Rpb25UaW1lPTsgZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAxIEdNVDsnfX1cbnRoaXMuR2V0V0xJbnRlcmFjdGlvblZhbHVlPWZ1bmN0aW9uKCl7aWYodHlwZW9mKFN0b3JhZ2UpIT09XCJ1bmRlZmluZWRcIil7aWYoc2Vzc2lvblN0b3JhZ2UuV0xJbnRlcmFjdGlvblRpbWUpe3JldHVybiBuZXcgRGF0ZShzZXNzaW9uU3RvcmFnZS5XTEludGVyYWN0aW9uVGltZSl9ZWxzZXtyZXR1cm4gbnVsbH19ZWxzZXt2YXIgbmFtZUVRPVwiV0xJbnRlcmFjdGlvblRpbWU9XCI7dmFyIGNhPWRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpO2Zvcih2YXIgaT0wO2k8Y2EubGVuZ3RoO2krKyl7dmFyIGM9Y2FbaV07d2hpbGUoYy5jaGFyQXQoMCk9PScgJyljPWMuc3Vic3RyaW5nKDEsYy5sZW5ndGgpO2lmKGMuaW5kZXhPZihuYW1lRVEpPT0wKXtyZXR1cm4gbmV3IERhdGUoYy5zdWJzdHJpbmcobmFtZUVRLmxlbmd0aCxjLmxlbmd0aCkpfX1cbnJldHVybiBudWxsfX1cbnRoaXMuT3BlblRleHQ9ZnVuY3Rpb24odGV4dCl7V0xVbml0eS5wbGF5R2VzdHVyZSh0ZXh0KX1cbnZhciBwZG89dGhpcztqcTE4KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2lmKCFXZWJMaWJyYXMuaGlkZUFjZXNzaWJpbGl0eUltYWdlKXtzZXRUaW1lb3V0KHBkby5zaG93SGludCw1MDApfVxucGRvLkluc2VydEhUTUxFbGVtZW50cygpO2lmKFdlYkxpYnJhcy5oaWRlQWNlc3NpYmlsaXR5SW1hZ2Upe2pxMTgoXCIjaW1nQWNlc3NpYmlsaWRhZGVXbEF1dG9cIikuaGlkZSgpfVxuaWYocGRvLnBhcmFtcy5hdm9pZC5sZW5ndGg+MCl7anExOChwZG8ucGFyYW1zLmF2b2lkKS5hZGRDbGFzcygnbm8td2xhdXRvJyl9XG5pZihwZG8uQ2hlY2tXTEludGVyYWN0aW9uKCkpe3Bkby5hdXRvU2hvd1dsQXV0bygpfVxudmFyIG9mZnNldD0xO2pxMTgod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKXtqcTE4KFwiI3dsYXV0b0NvbnRhaW5lclwiKS5jc3MoXCJtYXJnaW5Ub3BcIiwob2Zmc2V0KStcInB4XCIpO29mZnNldCs9MjtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7anExOChcIiN3bGF1dG9Db250YWluZXJcIikuY3NzKFwibWFyZ2luVG9wXCIsXCIwcHhcIil9LDEpfSk7Zm9yKHZhciBpPTA7aTxwZG8ucG9zdEluc3RydWN0aW9ucy5sZW5ndGg7aSsrKXtwZG8ucG9zdEluc3RydWN0aW9uc1tpXS5jYWxsKCl9fSl9XG5mdW5jdGlvbiBQcm9EZWFmKGNvbnN0cnVjdG9yLHJvb3RFbGVtZW50VG9BcHBseSx1c2VDb21wYXRpYmlsaXR5TW9kZSl7cmV0dXJuIG5ldyBXZWJMaWJyYXMoY29uc3RydWN0b3Iscm9vdEVsZW1lbnRUb0FwcGx5LHVzZUNvbXBhdGliaWxpdHlNb2RlKX1cbiIsIi8qKlxuICogQnMgSW5wdXQgVmFsaWRhdGUgKGFuY2hvcilcbiAqL1xudmFyIEJzQWN0aXZhdGlvbkNvZGVWYWxpZGF0ZSA9IChmdW5jdGlvbiAoKSB7XG4gIC8vIEVsZW1lbnRzXG4gIHZhciBlbGVtZW50cyA9IHt9O1xuICB2YXIgJCA9IGVsZW1lbnRzO1xuXG4gICQuZm9ybXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtdmFsaWRhdGUnKTtcblxuICBpZiAoISQuZm9ybXMubGVuZ3RoKSByZXR1cm47XG5cbiAgLy8gQ29uZmlnXG4gIHZhciBjb25maWcgPSB7XG4gICAgdmFsaWRhdGU6IHtcbiAgICAgIHRva2VuOiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0LnZhbHVlID09PSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGVzdC12YWxpZGF0aW9uJyk7XG4gICAgICB9LFxuICAgICAgY3BmOiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0LnZhbHVlLnJlcGxhY2UoL1teMC05XS9nLCAnJykgPT09IGlucHV0LmdldEF0dHJpYnV0ZSgnZGF0YS10ZXN0LXZhbGlkYXRpb24nKTtcbiAgICAgIH0sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICB2YXIgaW5wdXRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpO1xuICAgICAgICB2YXIgZm9ybVNlbmhhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWpzLWZvcm0tYWNlc3NvLWNyaWFyLXNlbmhhJyk7XG4gICAgICAgIHZhciBmb3JtU2VuaGFJbnB1dHMgPSBmb3JtU2VuaGEucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcbiAgICAgICAgdmFyIHRva2VuRXJyb3JNZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWpzLWZvcm0tYWNlc3NvLXRva2VuLW1lc3NhZ2UnKTtcblxuICAgICAgICBmb3JtLmNsYXNzTGlzdC5hZGQoJ2JzLWlzLXZhbGlkJyk7XG5cbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChpbnB1dHMsIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgICBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJykuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0b2tlbkVycm9yTWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdicy1pcy1oaWRkZW4nKTtcbiAgICAgICAgZm9ybVNlbmhhLmNsYXNzTGlzdC5yZW1vdmUoJ2JzLWlzLWhpZGRlbicpO1xuICAgICAgICBmb3JtU2VuaGFJbnB1dHNbMF0uZm9jdXMoKTtcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24gKGZvcm0pIHtcbiAgICAgICAgdmFyIGlucHV0cyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcbiAgICAgICAgdmFyIGZvcm1TZW5oYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1qcy1mb3JtLWFjZXNzby1jcmlhci1zZW5oYScpO1xuICAgICAgICB2YXIgdG9rZW5FcnJvck1lc3NhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtanMtZm9ybS1hY2Vzc28tdG9rZW4tbWVzc2FnZScpO1xuXG4gICAgICAgIHRva2VuRXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ2JzLWlzLWhpZGRlbicpO1xuICAgICAgICBmb3JtU2VuaGEuY2xhc3NMaXN0LmFkZCgnYnMtaXMtaGlkZGVuJyk7XG5cbiAgICAgICAgaW5wdXRzWzBdLmZvY3VzKCk7XG4gICAgICB9LFxuICAgIH0sXG4gICAgdmFsaWRhdGVPbklucHV0OiB0cnVlLFxuICAgIGNsZWFuT25JbnB1dDogdHJ1ZSxcbiAgfTtcblxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKCQuZm9ybXMsIGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICB2YXIgaW5wdXRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpO1xuICAgICAgaWYgKGlucHV0cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaW5wdXRzWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdmFsaWRhdGVGb3JtLmJpbmQobnVsbCwgZm9ybSkpO1xuICAgICAgfVxuICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdmb3JtSXNWYWxpZCcsIHZhbGlkYXRlRm9ybS5iaW5kKG51bGwsIGZvcm0pKTtcblxuICAgICAgLy8gaWYgKGNvbmZpZy52YWxpZGF0ZU9uSW5wdXQpIHtcbiAgICAgIC8vICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB2YWxpZGF0ZS5iaW5kKG51bGwsIGlucHV0KSk7XG4gICAgICAvLyB9IGVsc2UgaWYgKGNvbmZpZy5jbGVhbk9uSW5wdXQpIHtcbiAgICAgIC8vICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBjbGVhblN0YXRlLmJpbmQobnVsbCwgaW5wdXQpKTtcbiAgICAgIC8vIH1cblxuICAgICAgLy8gdmFyIHRlc3RlID0gQnNGb3JtVmFsaWRhdGUudmFsaWRhdGVGb3JtKGZvcm0pO1xuXG4gICAgICAvLyBDb21vIGFnb3JhIMOpIHVtIGZvcm0vc3VibWl0LCBuw6NvIHByZWNpc2EgZG8ga2V5dXBcbiAgICAgIC8vIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIC8vICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHZhbGlkYXRlKGVsKTtcbiAgICAgIC8vIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciB2YWxpZGF0ZUZvcm0gPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgIHZhciBpbnB1dHMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0Jyk7XG4gICAgdmFyIGlzRm9ybVZhbGlkID0gZmFsc2U7XG5cbiAgICBpc0Zvcm1WYWxpZCA9IHZhbGlkYXRlSW5wdXRzKGlucHV0cyk7XG5cbiAgICBpZiAoaXNGb3JtVmFsaWQpIHtcbiAgICAgIGNvbmZpZy52YWxpZGF0ZS5zdWNjZXNzKGZvcm0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25maWcudmFsaWRhdGUuZXJyb3IoZm9ybSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciB2YWxpZGF0ZUlucHV0cyA9IGZ1bmN0aW9uIChpbnB1dHMpIHtcbiAgICB2YXIgb3V0cHV0ID0gdHJ1ZTtcbiAgICB2YXIgaW5wdXRDb25maWcgPSBjb25maWcudmFsaWRhdGU7XG5cbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGlucHV0cywgZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICB2YXIgaW5wdXROYW1lID0gaW5wdXQubmFtZTtcbiAgICAgIHZhciBwYXR0ZXJuSXNWYWxpZCA9IEJzRm9ybVZhbGlkYXRlLnZhbGlkYXRlSW5wdXQoaW5wdXQpO1xuICAgICAgdmFyIHZhbHVlSXNWYWxpZCA9IGlucHV0Q29uZmlnW2lucHV0TmFtZV07XG4gICAgICBpZiAoIXBhdHRlcm5Jc1ZhbGlkIHx8ICF2YWx1ZUlzVmFsaWQoaW5wdXQpKSBvdXRwdXQgPSBmYWxzZTtcbiAgICB9KTtcblxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICB9O1xufSgpKTtcblxuLyoqXG4gKiBJbml0IEJzQWN0aXZhdGlvbkNvZGVWYWxpZGF0ZSBDb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH0gSGVhZGVyLmluaXQoKTtcbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy12YWxpZGF0ZScpLmxlbmd0aCkge1xuICAgIEJzQWN0aXZhdGlvbkNvZGVWYWxpZGF0ZS5pbml0KCk7XG4gIH1cbn0pO1xuIiwiLy8gaHR0cHM6Ly9jb2RlcGVuLmlvL1FicmlkL3Blbi9FZ0FZTmdcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIEJhY2tUb1RvcC5wcm90b3R5cGUuaW5pdCgpO1xufSk7XG5cbi8qKlxuICogQmFja1RvVG9wXG4gKiBSZXR1cm4gc2Nyb2xsIHRvIHRoZSB0b3Agb2YgdGhlIHBhZ2VcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBCYWNrVG9Ub3AoKSB7XG5cbn1cblxudmFyIGludGVydmFsSWQgPSAwOyAvLyBOZWVkZWQgdG8gY2FuY2VsIHRoZSBzY3JvbGxpbmcgd2hlbiB3ZSdyZSBhdCB0aGUgdG9wIG9mIHRoZSBwYWdlXG5jb25zdCAkc2Nyb2xsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWJhY2stdG8tdG9wJyk7IC8vIFJlZmVyZW5jZSB0byBvdXIgc2Nyb2xsIGJ1dHRvblxuXG5CYWNrVG9Ub3AucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogQmFja1RvVG9wLFxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF8gPSB0aGlzO1xuICAgIGlmICgkc2Nyb2xsQnV0dG9uKSB7XG4gICAgICAkc2Nyb2xsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoXy5fc2Nyb2xsU3RlcCwgMik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgX3Njcm9sbFN0ZXA6IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBhdCB0aGUgdG9wIGFscmVhZHkuIElmIHNvLCBzdG9wIHNjcm9sbGluZyBieSBjbGVhcmluZyB0aGUgaW50ZXJ2YWxcbiAgICBpZiAod2luZG93LnBhZ2VZT2Zmc2V0ID09PSAwKSB7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpO1xuICAgIH1cbiAgICB3aW5kb3cuc2Nyb2xsKDAsIHdpbmRvdy5wYWdlWU9mZnNldCAtIDUwKTtcbiAgfSxcbn07XG4iLCJ2YXIgJGJ1b29wID0ge1xuICByZXF1aXJlZDp7ZTotNixmOi02LG86LTMsczotMixjOi02fSxcbiAgdW5zdXBwb3J0ZWQ6dHJ1ZSxcbiAgaW5zZWN1cmU6dHJ1ZSxcbiAgdXJsOiBudWxsLFxuICBuZXd3aW5kb3c6IGZhbHNlLFxuICBub2Nsb3NlOnRydWUsXG4gIC8vIHRlc3Q6IHRydWUsXG4gIHRleHQ6ICdTZXUgbmF2ZWdhZG9yIGRhIHdlYiAoe2Jyb3dfbmFtZX0pIGVzdMOhIGRlc2F0dWFsaXphZG8uIFxcPGJyXFwvPiBBdHVhbGl6ZSBzZXUgbmF2ZWdhZG9yIHBhcmEgdGVyIG1haXMgc2VndXJhbsOnYSBlIHZlbG9jaWRhZGUsIGFsw6ltIGRhIG1lbGhvciBleHBlcmnDqm5jaWEgbmVzdGUgc2l0ZS4nLFxuICBhcGk6MjAxOC4xMlxufTtcblxuZnVuY3Rpb24gJGJ1b19mKCl7XG4gIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgZS5zcmMgPSBcImh0dHBzOi8vd3d3LmJyb3dzZXItdXBkYXRlLm9yZy91cGRhdGUubWluLmpzXCI7XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZSk7XG59O1xudHJ5IHtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAkYnVvX2YsZmFsc2UpfVxuICBjYXRjaChlKXt3aW5kb3cuYXR0YWNoRXZlbnQoXCJvbmxvYWRcIiwgJGJ1b19mKX1cbiIsIi8qKlxuICogV3JhcCBIVE1MIGVsZW1lbnQgd2l0aGluIGFub3RoZXIgZWxlbWVudFxuICogZS5nLiBXcmFwIGEgdGFibGUgd2l0aGluIGRpdi5icy10YWJsZSB0byBtYWtlIGl0IHJlc3BvbnNpdmVcbiAqXG4gKi9cbnZhciBCc0ZpeFBvcnRhbEhUTUwgPSAoZnVuY3Rpb24gKCkge1xuICAvLyBDb25maWdcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBlbGVtZW50czogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLXBvcnRhbC1jb250ZW50IHRhYmxlJyksXG4gIH07XG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuZWxlbWVudHMsIGZ1bmN0aW9uICh0YWJsZSkge1xuICAgICAgdmFyIHRhYmxlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgdGFibGVXcmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2JzLXRhYmxlJyk7XG4gICAgICB3cmFwRWxlbWVudCh0YWJsZSwgdGFibGVXcmFwcGVyKTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGluaXQ6IGluaXQsXG4gIH07XG59KCkpO1xuXG4vKipcbiAqIEluaXQgQnNGaXhQb3J0YWxIVE1MIENvbnN0cnVjdG9yXG4gKiBAcmV0dXJuIHt2b2lkfSBCc0ZpeFBvcnRhbEhUTUwuaW5pdCgpO1xuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLXBvcnRhbC1jb250ZW50JykubGVuZ3RoKSB7XG4gICAgQnNGaXhQb3J0YWxIVE1MLmluaXQoKTtcbiAgfVxufSk7XG4iLCJ2YXIgZ2V0UGFyZW50cyA9IGZ1bmN0aW9uIChlbGVtLCBwYXJlbnRDbGFzcywgZmlyc3RPY3VycmVuY3lPbmx5KSB7XG4gIHZhciBwYXJlbnRzID0gW107XG5cbiAgZm9yICg7IGVsZW0gJiYgZWxlbSAhPT0gZG9jdW1lbnQ7IGVsZW0gPSBlbGVtLnBhcmVudE5vZGUpIHtcbiAgICBpZiAoZWxlbS5jbGFzc0xpc3QuY29udGFpbnMocGFyZW50Q2xhc3MpKSB7XG4gICAgICBwYXJlbnRzLnB1c2goZWxlbSk7XG5cbiAgICAgIGlmIChmaXJzdE9jdXJyZW5jeU9ubHkpIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcGFyZW50cztcbn07XG5cbnZhciBnZXRQYXJlbnQgPSBmdW5jdGlvbiAoZWxlbSwgcGFyZW50Q2xhc3MpIHtcbiAgcmV0dXJuIGdldFBhcmVudHMoZWxlbSwgcGFyZW50Q2xhc3MsIHRydWUpWzBdO1xufTtcblxuXG4vKipcbiAqIENsaWNrIE91dHNpZGVcbiAqXG4gKiBPYnM6IG7Do28gZnVuY2lvbmEgYWluZGEgOihcbiAqXG4gKi9cbnZhciBvdXRzaWRlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbm90VGFyZ2V0cyA9IGZ1bmN0aW9uIChlbGVtZW50cywgZXZlbnRUYXJnZXQpIHtcbiAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgcmVzdWx0ID0gIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGV2ZW50VGFyZ2V0KTtcbiAgICB9KTtcbiAgICByZXR1cm4gIXJlc3VsdDtcbiAgfTtcblxuICB2YXIgY2xpY2tPdXRzaWRlID0gZnVuY3Rpb24gKGVsZW1lbnRBY3RpdmUsIGFsbG93ZWRUYXJnZXRzLCBjYWxsYmFjaykge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2JvZHksIGh0bWwnKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGlmIChlbGVtZW50QWN0aXZlKCkgJiYgbm90VGFyZ2V0cyhhbGxvd2VkVGFyZ2V0cywgZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBDbG9zZSBzZWFyY2ggb24gY2xpY2sgb3V0c2lkZVxuICAvLyBVc2U6XG4gIC8vIGNsaWNrT3V0c2lkZShzZWFyY2hBY3RpdmUsIFtjb25maWcuc2VhcmNoLCBjb25maWcuc2VhcmNoVG9nZ2xlXSwgY2xvc2VTZWFyY2gpO1xufTtcblxuLyoqXG4gKiBXcmFwIEhUTUwgZWxlbWVudCB3aXRoaW4gYW5vdGhlciBlbGVtZW50XG4gKiBlLmcuIFdyYXAgYSB0YWJsZSB3aXRoaW4gZGl2LmJzLXRhYmxlIHRvIG1ha2UgaXQgcmVzcG9uc2l2ZVxuICogQHBhcmFtIHtFbGVtZW50fSB0b1dyYXAgZWxlbWVudCB0byBiZSB3cmFwcGVkXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHdyYXBwZXIgZG9tIGVsZW1lbnQgdGhhdCdsbCB3cmFwIHRvV3JhcFxuICogQHJldHVybnMge0VsZW1lbnR9XG4gKi9cbnZhciB3cmFwRWxlbWVudCA9IGZ1bmN0aW9uICh0b1dyYXAsIHdyYXBwZXIpIHtcbiAgd3JhcHBlciA9IHdyYXBwZXIgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHRvV3JhcC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh3cmFwcGVyLCB0b1dyYXApO1xuICByZXR1cm4gd3JhcHBlci5hcHBlbmRDaGlsZCh0b1dyYXApO1xufTtcblxuLyoqXG4gKiBDaGVja3MgYWxsIGNoZWNrYm94ZXMgd2l0aCB0aGUgZ2l2ZW4gbmFtZVxuICogQHBhcmFtIHtFbGVtZW50fSBjaGVja2JveFRhcmdldCB0aGUgY2hlY2tib3ggdGhhdCdsbCBzZWxlY3QgYWxsIHRoZSBvdGhlciBjaGVja2JveGVzXG4gKiBAcGFyYW0ge0VsZW1lbnR9IG5hbWUgY2hlY2tib3hlcyBuYW1lXG4gKi9cbnZhciBzZWxlY3RBbGxDaGVja2JveGVzID0gZnVuY3Rpb24gKGNoZWNrYm94VGFyZ2V0LCBuYW1lKSB7XG4gIGNoZWNrYm94ZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShuYW1lKTtcblxuICBpZiAoY2hlY2tib3hlcykge1xuICAgIGNoZWNrYm94ZXMuZm9yRWFjaChmdW5jdGlvbiAoY2hlY2tib3gpIHtcbiAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSBjaGVja2JveFRhcmdldC5jaGVja2VkO1xuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogZ3JheXNjYWxlSW1hZ2VcbiAqIEdlbmVyYXRlcyBhbmQgYmFzZTY0IHVybCBncmF5c2NhbGUgaW1hZ2UgZnJvbSBhbiBpbWFnZSBzb3VyY2VcbiAqXG4gKiBSZWZlcmVuY2U6XG4gKiBAbGluazogaHR0cHM6Ly93d3cubWFqYXMtbGFwdS1penN0cmFkZS5sdi9jcm9zcy1icm93c2VyLWdyYXlzY2FsZS1pbWFnZS1leGFtcGxlLXVzaW5nLWNzczMtanMvXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSAgc3JjIFRoZSBzcmMgaW1hZ2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59ICAgICBEYXRhVVJMIG9mIHRoZSBzcmMgaW1hZ2VcbiAqL1xudmFyIGdyYXlzY2FsZUltYWdlID0gZnVuY3Rpb24gKHNyYykge1xuICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgdmFyIGltZ09iaiA9IG5ldyBJbWFnZSgpO1xuICBpbWdPYmouc3JjID0gc3JjO1xuICBjYW52YXMud2lkdGggPSBpbWdPYmoud2lkdGg7XG4gIGNhbnZhcy5oZWlnaHQgPSBpbWdPYmouaGVpZ2h0O1xuICBjdHguZHJhd0ltYWdlKGltZ09iaiwgMCwgMCk7XG4gIHZhciBpbWdQaXhlbHMgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gIGZvciAodmFyIHkgPSAwOyB5IDwgaW1nUGl4ZWxzLmhlaWdodDsgeSsrKSB7XG4gICAgZm9yICh2YXIgeCA9IDA7IHggPCBpbWdQaXhlbHMud2lkdGg7IHgrKykge1xuICAgICAgLy8gdmFyIGkgPSAoeSAqIDQpICogaW1nUGl4ZWxzLndpZHRoICsgeCAqIDQ7XG4gICAgICB2YXIgaSA9ICgoeSAqIDQpICogaW1nUGl4ZWxzLndpZHRoKSArICh4ICogNCk7XG4gICAgICB2YXIgYXZnID0gKGltZ1BpeGVscy5kYXRhW2ldICsgaW1nUGl4ZWxzLmRhdGFbaSArIDFdICsgaW1nUGl4ZWxzLmRhdGFbaSArIDJdKSAvIDM7XG4gICAgICBpbWdQaXhlbHMuZGF0YVtpXSA9IGF2ZztcbiAgICAgIGltZ1BpeGVscy5kYXRhW2kgKyAxXSA9IGF2ZztcbiAgICAgIGltZ1BpeGVscy5kYXRhW2kgKyAyXSA9IGF2ZztcbiAgICB9XG4gIH1cbiAgY3R4LnB1dEltYWdlRGF0YShpbWdQaXhlbHMsIDAsIDAsIDAsIDAsIGltZ1BpeGVscy53aWR0aCwgaW1nUGl4ZWxzLmhlaWdodCk7XG4gIHJldHVybiBjYW52YXMudG9EYXRhVVJMKCk7XG59O1xuXG4vKipcbiAqIFJlcGxhY2UgQWxsXG4gKiBSZXBsYWNlIGFsbCBvY3VycmVuY2VzIG9mIGFuIHN0cmluZyBpbnRvIGFub3RoZXJcbiAqIEBsaW5rIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzYwNjI4OVxuICpcbiAqIFVzZTogc3RyaW5nLnJlcGxhY2VBbGwoc3RyaW5nVG9TZWFyY2gsIHN0cmluZ1RvUmVwbGFjZSlcbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHNlYXJjaCAgICAgIHRoZSB0ZXJtIHRvIHNlYXJjaCBpbiBzdHJpbmdcbiAqIEBwYXJhbSAge3N0cmluZ30gcmVwbGFjZW1lbnQgdGhlIHZhbHVlIHRvIHJlcGxhY2UgdGVybSdzIGJ5XG4gKiBAcmV0dXJuIHtzdHJpbmd9ICAgICAgICAgICAgIGEgc3RyaW5nIHVwZGF0ZWQgYnkgcmVwbGFjZXNcbiAqL1xuU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlQWxsID0gZnVuY3Rpb24gKHNlYXJjaCwgcmVwbGFjZW1lbnQpIHtcbiAgdmFyIHRhcmdldCA9IHRoaXM7XG4gIHJldHVybiB0YXJnZXQuc3BsaXQoc2VhcmNoKS5qb2luKHJlcGxhY2VtZW50KTtcbn07XG5cbi8qKlxuICogY29udmVydEFjY2VudGVkQ2hhcmFjdGVyc1xuICogIGNvbnZlcnQgYWNjZW50ZWQgY2hhcmFjdGVycyB0byBub24tYWNjZW50ZWRcbiAqIEBwYXJhbSAge3N0cmluZ30gc3RyIHNvbWUgc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9ICAgICBhIHN0cmluZyB3aXRoIG5vbiBhY2NlbnRlZCBjaGFyYWN0ZXJzXG4gKi9cbnZhciBjb252ZXJ0QWNjZW50ZWRDaGFyYWN0ZXJzID0gZnVuY3Rpb24gKHN0cikge1xuICB2YXIgY29udmVyc2lvbnMgPSB7XG4gICAgJ2FlJzogJ8OkfMOmfMe9JyxcbiAgICAnb2UnOiAnw7Z8xZMnLFxuICAgICd1ZSc6ICfDvCcsXG4gICAgJ0FlJzogJ8OEJyxcbiAgICAnVWUnOiAnw5wnLFxuICAgICdPZSc6ICfDlicsXG4gICAgJ0EnOiAnw4B8w4F8w4J8w4N8w4R8w4V8x7p8xIB8xIJ8xIR8x40nLFxuICAgICdhJzogJ8OgfMOhfMOifMOjfMOlfMe7fMSBfMSDfMSFfMeOfMKqJyxcbiAgICAnQyc6ICfDh3zEhnzEiHzEinzEjCcsXG4gICAgJ2MnOiAnw6d8xId8xIl8xIt8xI0nLFxuICAgICdEJzogJ8OQfMSOfMSQJyxcbiAgICAnZCc6ICfDsHzEj3zEkScsXG4gICAgJ0UnOiAnw4h8w4l8w4p8w4t8xJJ8xJR8xJZ8xJh8xJonLFxuICAgICdlJzogJ8OofMOpfMOqfMOrfMSTfMSVfMSXfMSZfMSbJyxcbiAgICAnRyc6ICfEnHzEnnzEoHzEoicsXG4gICAgJ2cnOiAnxJ18xJ98xKF8xKMnLFxuICAgICdIJzogJ8SkfMSmJyxcbiAgICAnaCc6ICfEpXzEpycsXG4gICAgJ0knOiAnw4x8w418w458w498xKh8xKp8xKx8x498xK58xLAnLFxuICAgICdpJzogJ8OsfMOtfMOufMOvfMSpfMSrfMStfMeQfMSvfMSxJyxcbiAgICAnSic6ICfEtCcsXG4gICAgJ2onOiAnxLUnLFxuICAgICdLJzogJ8S2JyxcbiAgICAnayc6ICfEtycsXG4gICAgJ0wnOiAnxLl8xLt8xL18xL98xYEnLFxuICAgICdsJzogJ8S6fMS8fMS+fMWAfMWCJyxcbiAgICAnTic6ICfDkXzFg3zFhXzFhycsXG4gICAgJ24nOiAnw7F8xYR8xYZ8xYh8xYknLFxuICAgICdPJzogJ8OSfMOTfMOUfMOVfMWMfMWOfMeRfMWQfMagfMOYfMe+JyxcbiAgICAnbyc6ICfDsnzDs3zDtHzDtXzFjXzFj3zHknzFkXzGoXzDuHzHv3zCuicsXG4gICAgJ1InOiAnxZR8xZZ8xZgnLFxuICAgICdyJzogJ8WVfMWXfMWZJyxcbiAgICAnUyc6ICfFmnzFnHzFnnzFoCcsXG4gICAgJ3MnOiAnxZt8xZ18xZ98xaF8xb8nLFxuICAgICdUJzogJ8WifMWkfMWmJyxcbiAgICAndCc6ICfFo3zFpXzFpycsXG4gICAgJ1UnOiAnw5l8w5p8w5t8xah8xap8xax8xa58xbB8xbJ8xq98x5N8x5V8x5d8x5l8x5snLFxuICAgICd1JzogJ8O5fMO6fMO7fMWpfMWrfMWtfMWvfMWxfMWzfMawfMeUfMeWfMeYfMeafMecJyxcbiAgICAnWSc6ICfDnXzFuHzFticsXG4gICAgJ3knOiAnw718w798xbcnLFxuICAgICdXJzogJ8W0JyxcbiAgICAndyc6ICfFtScsXG4gICAgJ1onOiAnxbl8xbt8xb0nLFxuICAgICd6JzogJ8W6fMW8fMW+JyxcbiAgICAnQUUnOiAnw4Z8x7wnLFxuICAgICdzcyc6ICfDnycsXG4gICAgJ0lKJzogJ8SyJyxcbiAgICAnaWonOiAnxLMnLFxuICAgICdPRSc6ICfFkicsXG4gICAgJ2YnOiAnxpInLFxuICB9XG5cbiAgZm9yICh2YXIgaSBpbiBjb252ZXJzaW9ucykge1xuICAgIGlmIChpKSB7XG4gICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKGNvbnZlcnNpb25zW2ldLCAnZycpO1xuICAgICAgc3RyID0gc3RyLnJlcGxhY2UocmUsIGkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdHI7XG59O1xuXG4vKipcbiAqIGluZGV4T2YgU3BlY2lhbFxuICogTGlrZSBpbmRleE9mLCBidXQgdGFraW5nIGFjY2VudGVkIGNoYXJhY3RlcnMgaW50byBhY2NvdW50XG4gKiBAcGFyYW0gIHtzdHJpbmd9IHN0ciAgICBzdHJpbmcgd2hlcmUgc2VhcmNoXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHNlYXJjaCBzdHJpbmcgdG8gc2VhcmNoXG4gKiBAcGFyYW0gIHtudW1iZXJ9IGluZGV4ICBpbmRleCB0byBzdGFydFxuICogQHJldHVybiB7c3RyaW5nfSAgICAgICAgaW5kZXggb2Ygc2VhcmNoIGluIHN0clxuICovXG52YXIgaW5kZXhPZlNwZWNpYWwgPSBmdW5jdGlvbiAoc3RyLCBzZWFyY2gsIGluZGV4KSB7XG4gIHZhciBjb21wYXJlU3RyaW5nO1xuICB2YXIgY29tcGFyZVJlcGxhY2U7XG4gIC8vIENoZWNrIHJlcXVpcmVkIHBhcmFtc1xuICBpZiAodHlwZW9mIHN0ciA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHNlYXJjaCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyB0aHJvdyBuZXcgRXJyb3IoJ2JvdGggc3RyIGFuZCBzZWFyY2ggcGFyYW1ldGVycyBhcmUgcmVxdWlyZWQnKTtcbiAgICBjb25zb2xlLmVycm9yKCdib3RoIHN0ciBhbmQgc2VhcmNoIHBhcmFtZXRlcnMgYXJlIHJlcXVpcmVkJyk7XG4gIH1cbiAgLy8gSWYgc3RyaW5ncyBhcmUgZW1wdHksIHRoZXJlJ3Mgbm8gaW5kZXhcbiAgaWYgKCFzdHIucmVwbGFjZSgvXFxzL2csICcnKS5sZW5ndGggfHwgIXNlYXJjaC5yZXBsYWNlKC9cXHMvZywgJycpLmxlbmd0aCkgcmV0dXJuIC0xO1xuICBpZiAodHlwZW9mIGluZGV4ID09PSAndW5kZWZpbmVkJykgaW5kZXggPSAwO1xuXG4gIC8vIFJlbW92ZSBzcGVjaWFsIGNoYXJhY3RlcnMgYW5kIGNhc2Ugc2l6ZVxuICBjb21wYXJlU3RyaW5nID0gY29udmVydEFjY2VudGVkQ2hhcmFjdGVycyhzdHIudG9Mb3dlckNhc2UoKSk7XG4gIGNvbXBhcmVSZXBsYWNlID0gY29udmVydEFjY2VudGVkQ2hhcmFjdGVycyhzZWFyY2gudG9Mb3dlckNhc2UoKSk7XG5cbiAgLy8gcmV0dXJuIGluZGV4IG9mIGNvbXBhcmVSZXBsYWNlIGluIGNvbXBhcmVTdHJpbmdcbiAgcmV0dXJuIGNvbXBhcmVTdHJpbmcuaW5kZXhPZihjb21wYXJlUmVwbGFjZSwgaW5kZXgpO1xufTtcblxuLyoqXG4gKiBodHRwR2V0XG4gKlxuICogZ2V0IGRhdGEgZnJvbSB1cmxcbiAqIFVSTCBleGFtcGxlOiBodHRwczovL3N3YXBpLmNvL2FwaS9wZW9wbGUvP2Zvcm1hdD1qc29uXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSAgIHVybCAgICAgIHZhbGlkIEFQSSB1cmxcbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFjayBjYWxsYmFja1xuICogQHJldHVybiB7dm9pZH0gICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayBmdW5jdGlvblxuICovXG52YXIgaHR0cEdldCA9IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrLCBzeW5jKSB7XG4gIHZhciB4bWxIdHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gIGlmIChzeW5jICE9PSB0cnVlICYmIHN5bmMgIT09IDEpIHN5bmMgPSAwO1xuICBpZiAoIXN5bmMpIHtcbiAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh4bWxIdHRwLnJlYWR5U3RhdGUgPT09IDQgJiYgeG1sSHR0cC5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICBjYWxsYmFjayh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICB4bWxIdHRwLm9wZW4oJ0dFVCcsIHVybCwgIXN5bmMpOyAvLyB0cnVlIGZvciBhc3luY2hyb25vdXNcbiAgeG1sSHR0cC5zZW5kKG51bGwpO1xuICBpZiAoc3luYykgcmV0dXJuIHhtbEh0dHAucmVzcG9uc2VUZXh0O1xufTtcblxuLyoqXG4gKiB0b2dnbGVCb2R5T3ZlcmZsb3dIaWRkZW5cbiAqIEFkZCBvciByZW1vdmUgb3ZlcmZsb3cgaGlkZGVuIHRvIGJvZHkgYW5kIGh0bWwgdGFnc1xuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaGlkZGVuIElmIHNob3VsZCBzZXQgb3ZlcmZsb3cgYXMgaGlkZGVuXG4gKi9cbnZhciB0b2dnbGVCb2R5T3ZlcmZsb3dIaWRkZW4gPSBmdW5jdGlvbiAoaGlkZGVuKSB7XG4gIHZhciBodG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYm9keSwgaHRtbCcpO1xuICB2YXIgb3ZlcmZsb3dJc0hpZGRlbiA9IGZhbHNlO1xuXG4gIC8vIENoZWNrIGlmIGhpZGRlbiBpcyBwYXNzZWQgYW5kIGl0cyB0eXBlb2YgaXMgYm9vbGVhblxuICBpZiAodHlwZW9mIGhpZGRlbiAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgLy8gSWYgbm90LCBjaGVjayBpZiBib2R5IG9yIGh0bWwgaGFzIG92ZXJmbG93IGhpZGRlblxuICAgIEFycmF5LnByb3RvdHlwZS5zb21lLmNhbGwoaHRtbCwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICB2YXIgc3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO1xuICAgICAgdmFyIG92ZXJmbG93ID0gc3R5bGVzLmdldFByb3BlcnR5VmFsdWUoJ292ZXJmbG93Jyk7XG5cbiAgICAgIC8vIElmIGh0bWwgb3IgYm9keSBoYXMgb3ZlcmZsb3cgaGlkZGVuXG4gICAgICBpZiAob3ZlcmZsb3cgPT09ICdoaWRkZW4nKSB7XG4gICAgICAgIC8vIHNldCBvdmVyZmxvd0lzSGlkZGVuIGFzIHRydWVcbiAgICAgICAgb3ZlcmZsb3dJc0hpZGRlbiA9IHRydWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBpZiBoaWRkZW4gaXMgcGFzc2VkLCBzZXQgb3ZlcmZsb3dJc0hpZGRlbiBhcyBvcHBvc2l0ZSBvZiBoaWRkZW5cbiAgICBvdmVyZmxvd0lzSGlkZGVuID0gIWhpZGRlbjtcbiAgfVxuXG4gIC8vIFRvZ2dsZSBvdmVyZmxvdyBoaWRkZW5cbiAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChodG1sLCBmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAob3ZlcmZsb3dJc0hpZGRlbikgZWwuc3R5bGUub3ZlcmZsb3cgPSAnJztcbiAgICBlbHNlIGVsLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBJbml0IEdvb2dsZSBNYXBcbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYiAgICAgICAgQ2FsbGJhY2sgRnVuY3Rpb25cbiAqIEBwYXJhbSAge1N0cmluZ30gICBjdXN0b21LZXkgYSBjdXN0b20gbWFwcyBhcGkga2V5XG4gKi9cbmluaXRHb29nbGVNYXAgPSBmdW5jdGlvbiAoY2IsIGN1c3RvbUtleSkge1xuICB2YXIgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbiAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICB2YXIgbWFwS2V5ID0gY3VzdG9tS2V5IHx8ICdBSXphU3lESjZ5UzJZSDE5LXNuZFNoelBoRzFPMjlMaVU5Sk1vZjgnO1xuICB2YXIgYmFzZVNyYyA9ICdodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvanM/dj0zLjMzJmxpYnJhcmllcz1wbGFjZXMma2V5PScgKyBtYXBLZXk7XG4gIHZhciBoYXNNYXBTY3JpcHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzY3JpcHRbc3JjPVwiJyArIGJhc2VTcmMgKyAnXCJdJyk7XG5cbiAgaWYgKGhhc01hcFNjcmlwdCkgcmV0dXJuO1xuXG4gIC8vIEluc2VydCBzY3JpcHQgdGFnIG9uIGRvY3VtZW50XG4gIHNjcmlwdC5zcmMgPSBiYXNlU3JjO1xuICBzY3JpcHQuZGVmZXIgPSB0cnVlO1xuICBib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XG5cbiAgLy8gY2FsbCBjYWxsYmFjayBmdW5jdGlvblxuICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSB7XG4gICAgc2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBjYigpO1xuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBPYnTDqW0gYSBoYXNoIGEgcGFydGlyIGRhIFVSTCBkYSBww6FnaW5hXG4gKiBAcmV0dXJuIHtTdHJpbmd9IEhhc2ggdHJhdGFkYSAoc2VtICMpXG4qL1xudmFyIGdldEhhc2ggPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBjb250YWluZXJJZCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xuICByZXR1cm4gKGNvbnRhaW5lcklkKSA/IGNvbnRhaW5lcklkLnJlcGxhY2UoJyMnLCAnJykgOiBudWxsO1xufTtcblxuLyoqXG4gKiBPYnTDqW0gYSBoYXNoIGNvbW8gdW0gc2VsZXRvciBJRCBhIHBhcnRpciBkZSB1bSBVUkwgY29tbyBzdHJpbmdcbiAqIEBwYXJhbSAge1t0eXBlXX0gdXJsIGEgVVJMIGNvbXBsZXRhXG4gKiBAcmV0dXJuIHtTdHJpbmd9ICAgICBIYXNoIHRyYXRhZGEgY29tbyBJRCAoc2VtICMgZSBkZW1haXMgY2FyYWN0ZXJlcyBlc3BlY2lhaXMpXG4gKi9cbnZhciBnZXRIYXNoQXNJZEZyb21VcmxTdHJpbmcgPSBmdW5jdGlvbiAodXJsKSB7XG4gIHZhciBoYXNoID0gdXJsLnN1YnN0cih1cmwuaW5kZXhPZignIycpKS5yZXBsYWNlKC8uKig/PSMpfFxcPy4qfFteYS16QS1aMC05LV8jXS9nLCAnJyk7XG4gIHJldHVybiAoaGFzaC5sZW5ndGggPiAxKSA/IGhhc2ggOiAnJztcbn1cblxuLyoqXG4gKiBWZXJpZmljYSBzZSBvIGVsZW1lbnRvIHBhc3NhZG8gZXN0w6EgZGVudHJvIGRhIHZpZXdwb3J0XG4gKiBodHRwczovL2dvbWFrZXRoaW5ncy5jb20vaG93LXRvLXRlc3QtaWYtYW4tZWxlbWVudC1pcy1pbi10aGUtdmlld3BvcnQtd2l0aC12YW5pbGxhLWphdmFzY3JpcHQvXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW0gZWxlbWVudG8gYSBzZXIgdmVyaWZpY2Fkb1xuICogQHJldHVybiB7Qm9vbGVhbn1cbiovXG52YXIgaXNJblZpZXdwb3J0ID0gZnVuY3Rpb24gKGVsZW0pIHtcbiAgdmFyIGJvdW5kaW5nID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgcmV0dXJuIChcbiAgICBib3VuZGluZy50b3AgPj0gMCAmJlxuICAgIGJvdW5kaW5nLmxlZnQgPj0gMCAmJlxuICAgIGJvdW5kaW5nLmJvdHRvbSA8PSAod2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpICYmXG4gICAgYm91bmRpbmcucmlnaHQgPD0gKHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aClcbiAgKTtcbn07XG5cbi8qKlxuICogUmV0b3JuYSBhIHZlcnPDo28gZG8gSUUgb3UgLTEgY2FzbyBzZWphIG91dHJvIG5hdmVnYWRvclxuICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTk5OTkzODgvY2hlY2staWYtdXNlci1pcy11c2luZy1pZS13aXRoLWpxdWVyeS8yMTcxMjM1NiMyMTcxMjM1NlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiovXG52YXIgZGV0ZWN0SUUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuXG4gIHZhciBtc2llID0gdWEuaW5kZXhPZignTVNJRSAnKTtcbiAgdmFyIHRyaWRlbnQgPSB1YS5pbmRleE9mKCdUcmlkZW50LycpO1xuICB2YXIgZWRnZSA9IHVhLmluZGV4T2YoJ0VkZ2UvJyk7XG5cbiAgLy8gSUVcbiAgaWYgKChtc2llID4gMCkgfHwgKHRyaWRlbnQgPiAwKSB8fCAoZWRnZSA+IDApKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBPdXRybyBuYXZlZ2Fkb3JcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBHZXRcbiAqIFJlcXVlc3QgWE1MSHR0cCBmcm9tIHVybFxuICpcbiAqIEBwYXJhbSAge1N0cmluZ30gdXJsICBVUkwgd2hlcmVcbiAqIEByZXR1cm4ge1Byb21pc2V9ICAgICByZXNwb25zZSBvZiByZXF1ZXN0XG4gKi9cbnZhciBnZXQgPSBmdW5jdGlvbiAodXJsLCBwcm9ncmVzc0NhbGxiYWNrKSB7XG4gIC8vIFJldHVybiBhIG5ldyBwcm9taXNlLlxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIC8vIERvIHRoZSB1c3VhbCBYSFIgc3R1ZmZcbiAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgcmVxLm9wZW4oJ0dFVCcsIHVybCk7XG5cbiAgICByZXEuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBwcm9ncmVzc0NhbGxiYWNrLCBmYWxzZSk7XG5cbiAgICByZXEub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gVGhpcyBpcyBjYWxsZWQgZXZlbiBvbiA0MDQgZXRjXG4gICAgICAvLyBzbyBjaGVjayB0aGUgc3RhdHVzXG4gICAgICBpZiAocmVxLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgLy8gUmVzb2x2ZSB0aGUgcHJvbWlzZSB3aXRoIHRoZSByZXNwb25zZSB0ZXh0XG4gICAgICAgIHJlc29sdmUocmVxLnJlc3BvbnNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSByZWplY3Qgd2l0aCB0aGUgc3RhdHVzIHRleHRcbiAgICAgICAgLy8gd2hpY2ggd2lsbCBob3BlZnVsbHkgYmUgYSBtZWFuaW5nZnVsIGVycm9yXG4gICAgICAgIHJlamVjdChFcnJvcihyZXEuc3RhdHVzVGV4dCkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgbmV0d29yayBlcnJvcnNcbiAgICByZXEub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlamVjdChFcnJvcignTmV0d29yayBFcnJvcicpKTtcbiAgICB9O1xuXG4gICAgcmVxLnJlc3BvbnNlVHlwZSA9ICdibG9iJztcblxuICAgIC8vIE1ha2UgdGhlIHJlcXVlc3RcbiAgICByZXEuc2VuZCgpO1xuICB9KTtcbn07XG5cbi8qKlxuICogZm9yRWFjaCBQcm9taXNlXG4gKiBAcGFyYW0gIHtBcnJheX0gICAgIGl0ZW1zICBBbiBhcnJheSBvZiBpdGVtcyB0byByZXR1cm4gZnJvbSBwcm9taXNlXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gIGZuICAgICBBIGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyBhbiBpdGVtIGZyb20gdGhlIGFycmF5IGFuZCByZXR1cm5zIGEgcHJvbWlzZS5cbiAqIEByZXR1cm5zIHtQcm9taXNlfVxuICovXG52YXIgZm9yRWFjaFByb21pc2UgPSBmdW5jdGlvbiAoaXRlbXMsIGZuKSB7XG4gIHJldHVybiBpdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKHByb21pc2UsIGl0ZW0pIHtcbiAgICAvLyBjb25zb2xlLmxvZygncHJvbWlzZSBlIGl0ZW06ICcpO1xuICAgIC8vIGNvbnNvbGUubG9nKHByb21pc2UpO1xuICAgIC8vIGNvbnNvbGUubG9nKGl0ZW0pO1xuICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGZuKGl0ZW0pO1xuICAgIH0pO1xuICB9LCBQcm9taXNlLnJlc29sdmUoKSk7XG59O1xuXG4vKipcbiAqIGdldEZpbGVuYW1lRnJvbVBhdGhcbiAqXG4gKiBUZXN0OlxuICAgdmFyIGFycmF5ID0gW1xuICAgICAnZmlsZW5hbWUuZXh0JyxcbiAgICAgJ2ZpbGVuYW1lLmV4dD9wYXJhbScsXG4gICAgICdmaWxlbmFtZS5leHQjaGFzaCcsXG4gICAgICdwYXRoL3RvL2ZpbGVuYW1lLmV4dCcsXG4gICAgICdwYXRoL3RvL2ZpbGVuYW1lLmV4dD9wYXJhbScsXG4gICAgICdwYXRoL3RvL2ZpbGVuYW1lLmV4dCNoYXNoP3BhcmFtJyxcbiAgICAgJ3BhdGgvdG8vZmlsZW5hbWUuZXh0P3BhcmFtI2hhc2gnLFxuICAgXVxuICAgYXJyYXkubWFwKHN0ciA9PiBnZXRGaWxlbmFtZUZyb21QYXRoKHN0cikpXG4gKlxuICogQHBhcmFtICB7U3RyaW5nfSBwYXRoIHRoZSBwYXRoJ3Mgc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgZmlsZW5hbWUgcmV0dXJuZWQgcGF0aFxuICovXG52YXIgZ2V0RmlsZW5hbWVGcm9tUGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7XG4gIHJldHVybiBwYXRoLnJlcGxhY2UoL14uKltcXFxcXFwvXXxcXD8uKnxcXCMuKi9nLCAnJyk7XG59XG5cbi8qKlxuICogRXh0ZW5kXG4gKiBAdXNlIGV4dGVuZCh7fSwgZGVmYXVsdE9iamVjdCwgbmV3T2JqZWN0KTtcbiAqIEBwYXJhbSAge09iamVjdH0gdGFyZ2V0IGFuIG9iamVjdFxuICogQHJldHVybiB7T2JqZWN0fSAgICAgICAgYSBuZXcgb2JqZWN0IHdpdGggdmFsdWVzIG9mIGFsbCBhcmd1bWVudCBvYmplY3RzXG4gKi9cbnZhciBleHRlbmQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcblxuICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn07XG5cblxuLyoqXG4gKiBEZWJvdW5jZVxuICogQHVzZSBkZWJvdW5jZSh7fSwgZnVuYywgd2FpdCwgaW1tZWRpYXRlKTtcbiAqIEBwYXJhbSAge09iamVjdH0gdGFyZ2V0IGFuIG9iamVjdFxuICogQHJldHVybiB7T2JqZWN0fSAgICAgICAgYSBuZXcgb2JqZWN0IHdpdGggdmFsdWVzIG9mIGFsbCBhcmd1bWVudCBvYmplY3RzXG4gKi9cbnZhciBkZWJvdW5jZSA9IGZ1bmN0aW9uIChmdW5jLCB3YWl0KSB7XG4gIHZhciB0aW1lb3V0O1xuXG4gIGlmICh0eXBlb2Ygd2FpdCA9PT0gJ3VuZGVmaW5lZCcpIHdhaXQgPSAzMDA7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cztcbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgLy8gaWYgKCFpbW1lZGlhdGUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgfTtcbiAgLy8gdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAvLyBpZiAoY2FsbE5vdykgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgfTtcbn07XG5cbi8qKlxuICogaWRlbnRpZnlOb3RMb2FkZWRJbWFnZXNcbiAqIEBwYXJhbSAge1N0cmluZ30gY3VzdG9tQ2xhc3MgYSBjdXN0b20gdmFsaWQgY2xhc3NOYW1lO1xuICovXG52YXIgaWRlbnRpZnlOb3RMb2FkZWRJbWFnZXMgPSBmdW5jdGlvbiAoY3VzdG9tQ2xhc3MpIHtcbiAgdmFyIGNsYXNzbmFtZSA9IHR5cGVvZiBjdXN0b21DbGFzcyA9PT0gJ3N0cmluZycgPyBjdXN0b21DbGFzcyA6ICdicy1ub3QtbG9hZGVkJztcblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW1nJyksIGZ1bmN0aW9uIChpbWcpIHtcbiAgICAgIHZhciBoYXNMb2FkZWQgPSBpbWcubmF0dXJhbFdpZHRoO1xuXG4gICAgICBpZiAoIWhhc0xvYWRlZCkge1xuICAgICAgICAvLyBkZWJ1Z2dlcjtcbiAgICAgICAgaW1nLmNsYXNzTGlzdC5hZGQoY2xhc3NuYW1lKTtcbiAgICAgIH1cblxuICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gZGVidWdnZXI7XG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZShjbGFzc25hbWUpO1xuICAgICAgfTtcblxuICAgICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGRlYnVnZ2VyO1xuICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoY2xhc3NuYW1lKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH0pO1xufTtcbiIsIi8qKlxuICogQnMgQ29udGVudENoYW5nZXJcbiAqL1xudmFyIEJzQ29udGVudENoYW5nZXIgPSAoZnVuY3Rpb24gKCkge1xuICAvLyBFbGVtZW50c1xuICB2YXIgZWxlbWVudHMgPSB7fTtcbiAgdmFyICQgPSBlbGVtZW50cztcbiAgJC5ib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuICAkLnNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWpzLWNvbnRlbnQtY2hhbmdlci0tc2VsZWN0b3InKTtcbiAgJC53cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWpzLWNvbnRlbnQtY2hhbmdlci0td3JhcHBlcicpO1xuXG4gIGlmICghJC5zZWxlY3RvciB8fCAhJC53cmFwcGVyKSByZXR1cm47XG5cbiAgJC5jb250ZW50cyA9ICQud3JhcHBlci5jaGlsZHJlbjtcblxuICAvLyBDb25maWdcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBjb250ZW50SGlkZGVuQ2xhc3M6ICdicy1pcy1oaWRkZW4nLFxuICAgIGNvbnRlbnREYXRhQWN0aXZlOiAnZGF0YS1jb250ZW50LWNoYW5nZXItYWN0aXZlJyxcbiAgICBjb250ZW50RGF0YVRpdGxlOiAnZGF0YS1jb250ZW50LWNoYW5nZXItdGl0bGUnLFxuICAgIGNvbnRlbnREYXRhSWQ6ICdkYXRhLWNvbnRlbnQtY2hhbmdlci1pZCcsXG4gIH07XG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgYnVpbGRTZWxlY3RPcHRpb25zKCk7XG4gICAgJC5zZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzaG93Q29udGVudCh0aGlzLnZhbHVlKTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgYnVpbGRTZWxlY3RPcHRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcHRpb25zU3RyID0gJC5zZWxlY3Rvci5pbm5lckhUTUw7XG4gICAgdmFyIG9wdGlvbnNBcnIgPSBbXTtcblxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoJC5jb250ZW50cywgZnVuY3Rpb24gKGVsKSB7XG4gICAgICB2YXIgdGl0bGUgPSBlbC5nZXRBdHRyaWJ1dGUoY29uZmlnLmNvbnRlbnREYXRhVGl0bGUpO1xuICAgICAgdmFyIGlkID0gZWwuZ2V0QXR0cmlidXRlKGNvbmZpZy5jb250ZW50RGF0YUlkKTtcbiAgICAgIG9wdGlvbnNBcnIucHVzaCgnPG9wdGlvbiB2YWx1ZT1cIicgKyBpZCArICdcIj4nICsgdGl0bGUgKyAnPC9vcHRpb24+Jyk7XG4gICAgfSk7XG5cbiAgICBvcHRpb25zU3RyICs9IG9wdGlvbnNBcnIuam9pbignJyk7XG4gICAgJC5zZWxlY3Rvci5pbm5lckhUTUwgPSBvcHRpb25zU3RyO1xuICB9O1xuXG4gIHZhciBzaG93Q29udGVudCA9IGZ1bmN0aW9uIChjb250ZW50SWQpIHtcbiAgICB2YXIgY29udGVudCA9ICQud3JhcHBlci5xdWVyeVNlbGVjdG9yKCdbJyArIGNvbmZpZy5jb250ZW50RGF0YUlkICsgJz1cIicgKyBjb250ZW50SWQgKyAnXCJdJyk7XG4gICAgdmFyIGN1cnJlbnRBY3RpdmUgPSAkLndyYXBwZXIucXVlcnlTZWxlY3RvcignWycgKyBjb25maWcuY29udGVudERhdGFBY3RpdmUgKyAnXScpO1xuXG4gICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5jb250ZW50SGlkZGVuQ2xhc3MpO1xuICAgIGNvbnRlbnQuc2V0QXR0cmlidXRlKGNvbmZpZy5jb250ZW50RGF0YUFjdGl2ZSwgJycpO1xuXG4gICAgaWYgKGN1cnJlbnRBY3RpdmUpIHtcbiAgICAgIGN1cnJlbnRBY3RpdmUuY2xhc3NMaXN0LmFkZChjb25maWcuY29udGVudEhpZGRlbkNsYXNzKTtcbiAgICAgIGN1cnJlbnRBY3RpdmUucmVtb3ZlQXR0cmlidXRlKGNvbmZpZy5jb250ZW50RGF0YUFjdGl2ZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdCxcbiAgfTtcbn0oKSk7XG5cbi8qKlxuICogSW5pdCBDb250ZW50Q2hhbmdlciBDb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH0gSGVhZGVyLmluaXQoKTtcbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1jb250ZW50LWNoYW5nZXItLXdyYXBwZXInKS5sZW5ndGgpIHtcbiAgICBCc0NvbnRlbnRDaGFuZ2VyLmluaXQoKTtcbiAgfVxufSk7XG4iLCIvKipcbiAqIEJzIERyb3Bkb3duXG4gKiBAcmV0dXJuIGluaXQgZnVuY3Rpb25cbiAqL1xudmFyIEJzRHJvcGRvd24gPSBmdW5jdGlvbiAoKSB7XG4gIC8vIEVsZW1lbnRzXG4gIHZhciBlbGVtZW50cyA9IHt9O1xuICB2YXIgJCA9IGVsZW1lbnRzO1xuICAkLmJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG4gICQudG9nZ2xlID0gbnVsbDtcbiAgJC5kcm9wZG93biA9IG51bGw7XG5cbiAgLy8gQ29uZmlnXG4gIHZhciBjb25maWcgPSB7XG4gICAgZHJvcGRvd25UeXBlOiBudWxsLFxuICAgIGRyb3Bkb3duRWxlbWVudDogbnVsbCxcbiAgICB0b2dnbGVBY3RpdmVDbGFzczogJ2JzLWlzLWFjdGl2ZScsXG4gICAgZHJvcGRvd25BY3RpdmVDbGFzczogJ2JzLWlzLW9wZW4nLFxuICB9O1xuXG4gIHZhciBpbml0ID0gZnVuY3Rpb24gKHRvZ2dsZSwgb3B0aW9ucykge1xuICAgIC8vIENoZWNrIGlmIGFuIGVsZW1lbnQgdG9nZ2xlIHdhcyBwYXNzZWRcbiAgICBpZiAodHlwZW9mIHRvZ2dsZSAhPT0gJ3VuZGVmaW5lZCcpICQudG9nZ2xlID0gdG9nZ2xlO1xuICAgIGVsc2UgcmV0dXJuO1xuXG4gICAgLy8gQnkgZGVmYXVsdCwgZHJvcGRvd24gZWxlbWVudCBpcyBuZXh0IGVsZW1lbnQgc2libGluZyBvZiB0b2dnbGVcbiAgICAkLmRyb3Bkb3duID0gJC50b2dnbGUubmV4dEVsZW1lbnRTaWJsaW5nO1xuXG4gICAgLy8gQ2hlY2sgaWYgb3B0aW9ucyB3ZXJlIHBhc3NlZFxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIGNvbmZpZ1xuICAgICAgaWYgKG9wdGlvbnMuZHJvcGRvd25UeXBlKSBjb25maWcuZHJvcGRvd25UeXBlID0gb3B0aW9ucy5kcm9wZG93blR5cGU7XG4gICAgICBpZiAob3B0aW9ucy50b2dnbGVBY3RpdmVDbGFzcykgY29uZmlnLnRvZ2dsZUFjdGl2ZUNsYXNzID0gb3B0aW9ucy50b2dnbGVBY3RpdmVDbGFzcztcbiAgICAgIGlmIChvcHRpb25zLmRyb3Bkb3duQWN0aXZlQ2xhc3MpIGNvbmZpZy5kcm9wZG93bkFjdGl2ZUNsYXNzID0gb3B0aW9ucy5kcm9wZG93bkFjdGl2ZUNsYXNzO1xuICAgICAgLy8gZWxlbWVudHNcbiAgICAgIGlmIChvcHRpb25zLmRyb3Bkb3duRWxlbWVudCkgJC5kcm9wZG93biA9IG9wdGlvbnMuZHJvcGRvd25FbGVtZW50O1xuICAgIH1cblxuICAgIC8vIFJldHVybiBpZiB0b2dnbGUgb3IgZHJvcGRvd24gbm90IGV4aXN0c1xuICAgIGlmICghJC50b2dnbGUpIHJldHVybjtcbiAgICAkLnRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZURyb3Bkb3duKTtcblxuICAgIC8vIENsb3NlIGRyb3Bkb3duIG9uIGNsaWNrIG91dHNpZGVcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2JvZHksIGh0bWwnKSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZHJvcGRvd25BY3RpdmUoKSAmJlxuICAgICAgICAgIC8vICghJC5kcm9wZG93bi5jb250YWlucyhldmVudC50YXJnZXQpICYmIGRyb3Bkb3duVHlwZSAhPT0gJ2ZpbHRlcicpICYmXG4gICAgICAgICAgISQudG9nZ2xlLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgICBjbG9zZURyb3Bkb3duKCk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgdG9nZ2xlRHJvcGRvd24gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFkcm9wZG93bkFjdGl2ZSgpKSBvcGVuRHJvcGRvd24oKTtcbiAgICBlbHNlIGNsb3NlRHJvcGRvd24oKTtcbiAgfTtcblxuICB2YXIgb3BlbkRyb3Bkb3duID0gZnVuY3Rpb24gKCkge1xuICAgICQuZHJvcGRvd24uY2xhc3NMaXN0LmFkZChjb25maWcuZHJvcGRvd25BY3RpdmVDbGFzcyk7XG4gICAgJC50b2dnbGUuY2xhc3NMaXN0LmFkZChjb25maWcudG9nZ2xlQWN0aXZlQ2xhc3MpO1xuICB9O1xuXG4gIHZhciBjbG9zZURyb3Bkb3duID0gZnVuY3Rpb24gKCkge1xuICAgICQuZHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZShjb25maWcuZHJvcGRvd25BY3RpdmVDbGFzcyk7XG4gICAgJC50b2dnbGUuY2xhc3NMaXN0LnJlbW92ZShjb25maWcudG9nZ2xlQWN0aXZlQ2xhc3MpO1xuICB9O1xuXG4gIHZhciBkcm9wZG93bkFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJC5kcm9wZG93bi5jbGFzc0xpc3QuY29udGFpbnMoY29uZmlnLmRyb3Bkb3duQWN0aXZlQ2xhc3MpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdCxcbiAgfTtcbn07XG5cbi8qKlxuICogSW5pdCBEcm9wZG93biBDb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIGRyb3Bkb3ducyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1kcm9wZG93bi0tdG9nZ2xlJyk7XG4gIGlmIChkcm9wZG93bnMubGVuZ3RoKSB7XG4gICAgdmFyIGRyb3Bkb3duID0gbnVsbDtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGRyb3Bkb3ducywgZnVuY3Rpb24gKGVsKSB7XG4gICAgICBkcm9wZG93biA9IG5ldyBCc0Ryb3Bkb3duKCk7XG4gICAgICBkcm9wZG93bi5pbml0KGVsKTtcbiAgICB9KTtcbiAgfVxufSk7XG4iLCIvKipcbiAqIEZ1bsOnw6NvIHBhcmEgY2xpY2FyIGVtIGJvdMO1ZXMgZSBleGliaXIgbyBjb250ZcO6ZG8gcmVsYWNpb25hZG9cbiovXG52YXIgQnNFeHBhbmRDb250ZW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBlbDogbnVsbCxcbiAgICBidXR0b246IG51bGwsXG4gICAgY29sbGFwc2VIZWlnaHQ6IDMwMCxcbiAgICBtYXhIZWlnaHQ6IDEwMDAsXG4gICAgY29udGVudEhlaWdodDogMCxcbiAgICBjb2xsYXBzZUNsYXNzOiAnYnMtaXMtY29sbGFwc2VkJyxcbiAgICBidXR0b25DbGFzczogJ2JzLXBvcnRhbC1jb250ZW50X19leHBhbmQtYnV0dG9uJyxcbiAgICBidXR0b25UZXh0OiAnVmVyIHR1ZG8nLFxuICB9O1xuXG4gIC8qKlxuICAgKiBJbmljaWFsaXphIGEgZnVuw6fDo29cbiAgICogQHBhcmFtIHtPYmplY3R9IGVsIGEgRE9NIGVsZW1lbnRcbiAgKi9cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICAvLyBjaGVjayBpZiBlbGVtZW50IGV4aXN0XG4gICAgaWYgKCFlbCB8fCB0eXBlb2YgZWwgIT09ICdvYmplY3QnKSByZXR1cm47XG4gICAgLy8gY2hlY2sgaWYgaGVpZ2h0IGlzIGdyZWF0ZXIgdGhhbiBjb25maWcgbWF4SGVpZ2h0XG4gICAgaWYgKGVsLm9mZnNldEhlaWdodCA8IGNvbmZpZy5tYXhIZWlnaHQpIHJldHVybjtcblxuICAgIC8vIHNldCBjb250ZW50IGFuZCBidXR0b24gZWxlbWVudHMgdG8gY29uZmlnXG4gICAgY29uZmlnLmVsID0gZWw7XG4gICAgY29uZmlnLmJ1dHRvbiA9IGNyZWF0ZUV4cGFuZEJ1dHRvbigpO1xuXG4gICAgLy8gc2V0IGNvbnRlbnQgYW5kIGJ1dHRvbiBlbGVtZW50cyB0byBjb25maWdcbiAgICBlbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5jb2xsYXBzZUNsYXNzKTtcbiAgICBlbC5zdHlsZS5oZWlnaHQgPSBjb25maWcuY29sbGFwc2VIZWlnaHQgKyAncHgnO1xuICAgIGNvbmZpZy5jb250ZW50SGVpZ2h0ID0gZWwuaGVpZ2h0O1xuXG4gICAgLy8gYXBwZW5kIGJ1dHRvbiB0byBlbGVtZW50XG4gICAgZWwuYXBwZW5kQ2hpbGQoY29uZmlnLmJ1dHRvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBleHBhbmQgQnV0dG9uXG4gICAqIEByZXR1cm4ge1t0eXBlXX0gW2Rlc2NyaXB0aW9uXVxuICAgKi9cbiAgdmFyIGNyZWF0ZUV4cGFuZEJ1dHRvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG5cbiAgICAvLyBzZXQgYnV0dG9uIGF0dHJpYnV0ZXNcbiAgICBidXR0b24udHlwZSA9ICdidXR0b24nO1xuICAgIGJ1dHRvbi5pbm5lckhUTUwgPSBjb25maWcuYnV0dG9uVGV4dDtcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZChjb25maWcuYnV0dG9uQ2xhc3MpO1xuXG4gICAgLy8gYWRkIGxpc3RlbmVyIHRvIGV4cGFuZCBDb250ZW50IG9uQ2xpY2tcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBleHBhbmRDb250ZW50KTtcblxuICAgIHJldHVybiBidXR0b247XG4gIH07XG5cbiAgLyoqXG4gICAqIEV4cGFuZCBDb250ZW50XG4gICAqL1xuICB2YXIgZXhwYW5kQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaGVpZ2h0ID0gY29uZmlnLmVsLnNjcm9sbEhlaWdodDtcbiAgICBjb25maWcuZWwuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcbiAgICBjb25maWcuZWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuY29sbGFwc2VDbGFzcyk7XG4gICAgY29uZmlnLmJ1dHRvbi5yZW1vdmUoKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGluaXQ6IGluaXQsXG4gIH07XG59KCkpO1xuXG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1leHBhbmRhYmxlLWNvbnRlbnQnKTtcblxuICBpZiAoZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbGVtZW50cywgZnVuY3Rpb24gKGVsKSB7XG4gICAgICBCc0V4cGFuZENvbnRlbnQuaW5pdChlbCk7XG4gICAgfSk7XG4gIH1cbn0pO1xuIiwiLyoqXG4gKiBCcyBGb3Jtc1xuICogQHJldHVybiBpbml0IGZ1bmN0aW9uXG4gKi9cbnZhciBCc0Zvcm1zID0gKGZ1bmN0aW9uICgpIHtcbiAgLy8gRWxlbWVudHNcbiAgdmFyIGVsZW1lbnRzID0ge307XG4gIHZhciAkID0gZWxlbWVudHM7XG4gICQuYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbiAgJC5mb3JtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Zvcm0nKTtcbiAgJC50b2dnbGVQYXNzd29yZFZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLXRvZ2dsZS1wYXNzd29yZC12YWx1ZScpO1xuICAkLnRvZ2dsZUluZm9WYWx1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy10b2dnbGUtaW5mby12YWx1ZScpO1xuICAkLnRvZ2dsZUluZm9Db250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWluZm8tdmFsdWUnKTtcbiAgJC5vdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLW92ZXJsYXknKTtcbiAgJC50b2dnbGVUZWxNYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0W2RhdGEtdGVsXScpO1xuICAkLnJldmVhbFRlbGVwaG9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1qcy1yZXZlYWwtdGVsZXBob25lJyk7XG4gIC8vICQuZm9jdXNDYWxlbmRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W2RhdGEtdHlwZT1cImRhdGVwaWNrZXJcIl0nKTtcbiAgJC5hZGFwdGl2ZVBsYWNlaG9sZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWZvcm1fX2xhYmVsLS1hZGFwdGl2ZSBpbnB1dCwgYnMtZm9ybV9fbGFiZWwtLWFkYXB0aXZlIHRleHRhcmVhJyk7XG4gICQuaW5wdXRGaWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWZvcm1fX2NvbnRyb2wtLWZpbGUnKTtcbiAgJC5pbmZvQWN0aXZlID0gJ2JzLWFjdGl2ZSc7XG4gICQub3ZlcmxheUFjdGl2ZSA9ICdicy1pcy12aXNpYmxlJztcbiAgJC5oYXNGaWxlID0gJ2JzLWhhcy1maWxlJztcblxuICAvLyBDb25maWdcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBwYXNzd29yZFZpc2libGVDbGFzczogJ2JzLWZvcm1fX3Bhc3N3b3JkLS1pcy12aXNpYmxlJyxcbiAgICBhZGFwdGl2ZVBsYWNlaG9sZGVyVmFsaWRDbGFzczogJ2JzLWZvcm1fX2ZpZWxkLS1ub3QtZW1wdHknLFxuICAgIGRhdGVwaWNrZXI6IHt9LFxuICAgIGRhdGVwaWNrZXJPcHRpb25zOiB7fSxcbiAgfTtcblxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJC50b2dnbGVQYXNzd29yZFZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoJC50b2dnbGVQYXNzd29yZFZhbHVlLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVJbnB1dFBhc3N3b3JkVmFsdWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCQudG9nZ2xlSW5mb1ZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoJC50b2dnbGVJbmZvVmFsdWUsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZVRpdGxlSW5mb1ZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICgkLm92ZXJsYXkpIHtcbiAgICAgICQub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlVGl0bGVJbmZvVmFsdWUpO1xuICAgIH1cblxuICAgIGlmICgkLnJldmVhbFRlbGVwaG9uZSkgJC5yZXZlYWxUZWxlcGhvbmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZXZlYWxUZWxlcGhvbmVGaWVsZCk7XG5cbiAgICBpZiAoJC50b2dnbGVUZWxNYXNrLmxlbmd0aCA+IDApIHtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoJC50b2dnbGVUZWxNYXNrLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgZGF0YVRlbCA9IHRoaXMuZGF0YXNldC50ZWw7XG4gICAgICAgICAgdmFyIHZhbHVlVGVsID0gZS52YWx1ZTtcbiAgICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtkYXRhLXRlbD0nICsgZGF0YVRlbCArICddJyk7XG5cbiAgICAgICAgICBpZiAodmFsdWVUZWwgIT09IDU1KSB7XG4gICAgICAgICAgICBJbnB1dE1hc2tzLmRlc3Ryb3koaW5wdXQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBJbnB1dE1hc2tzLnVwZGF0ZShpbnB1dCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGlmICgkLmZvY3VzQ2FsZW5kYXIubGVuZ3RoID4gMCkge1xuICAgIC8vICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCgkLmZvY3VzQ2FsZW5kYXIsIGZ1bmN0aW9uIChlbCkge1xuICAgIC8vICAgICB2YXIgaW5wdXRJZCA9IGVsLmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAvLyAgICAgdmFyIHRvZ2dsZUNhbGVuZGFyID0gZWwucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuYnMtanMtdG9nZ2xlLWRhdGVwaWNrZXInKTtcblxuICAgIC8vICAgICBjb25maWcuZGF0ZXBpY2tlcltpbnB1dElkXSA9IG5ldyBQaWthZGF5KHtcbiAgICAvLyAgICAgICBib3VuZDogdHJ1ZSxcbiAgICAvLyAgICAgICBmaWVsZDogZWwsXG4gICAgLy8gICAgICAgZmlyc3REYXk6IDEsXG4gICAgLy8gICAgICAgZm9ybWF0OiAnREQvTU0vWVlZWScsXG4gICAgLy8gICAgICAgaTE4bjoge1xuICAgIC8vICAgICAgICAgcHJldmlvdXNNb250aDogJ03DqnMgQW50ZXJpb3InLFxuICAgIC8vICAgICAgICAgbmV4dE1vbnRoOiAnUHLDs3hpbW8gTcOqcycsXG4gICAgLy8gICAgICAgICBtb250aHM6IFsnSmFuZWlybycsICdGZXZlcmVpcm8nLCAnTWFyw6dvJywgJ0FicmlsJywgJ01haW8nLCAnSnVuaG8nLCAnSnVsaG8nLCAnQWdvc3RvJywgJ1NldGVtYnJvJywgJ091dHVicm8nLCAnTm92ZW1icm8nLCAnRGV6ZW1icm8nXSxcbiAgICAvLyAgICAgICAgIHdlZWtkYXlzOiBbJ0RvbWluZ28nLCAnU2VndW5kYS1GZWlyYScsICdUZXLDp2EtRmVpcmEnLCAnUXVhcnRhLUZlaXJhJywgJ1F1aW50YS1GZWlyYScsICdTZXh0YS1GZWlyYScsICdTw6FiYWRvJ10sXG4gICAgLy8gICAgICAgICB3ZWVrZGF5c1Nob3J0OiBbJ0RvbScsICdTZWcnLCAnVGVyJywgJ1F1YScsICdRdWknLCAnU2V4JywgJ1PDoWInXSxcbiAgICAvLyAgICAgICB9LFxuICAgIC8vICAgICAgIHBvc2l0aW9uOiAnYm90dG9tIHJpZ2h0JyxcbiAgICAvLyAgICAgICB0cmlnZ2VyOiB0b2dnbGVDYWxlbmRhcixcbiAgICAvLyAgICAgICBtaW5EYXRlOiBuZXcgRGF0ZSgxOTAwLCAxLCAxKSxcbiAgICAvLyAgICAgICBtYXhEYXRlOiBuZXcgRGF0ZSgyMDIwLCAxMiwgMzEpLFxuICAgIC8vICAgICAgIHllYXJSYW5nZTogWzE5MDAsIDIwMjBdLFxuICAgIC8vICAgICB9KTtcbiAgICAvLyAgICAgLy8gZWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0b2dnbGVDYWxlbmRhci5iaW5kKG51bGwsIGVsKSk7XG4gICAgLy8gICB9KTtcbiAgICAvLyB9XG5cbiAgICBpZiAoJC5hZGFwdGl2ZVBsYWNlaG9sZGVyLmxlbmd0aCA+IDApIHtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoJC5hZGFwdGl2ZVBsYWNlaG9sZGVyLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAodGhpcy52YWx1ZSkgdGhpcy5jbGFzc0xpc3QuYWRkKGNvbmZpZy5hZGFwdGl2ZVBsYWNlaG9sZGVyVmFsaWRDbGFzcyk7XG4gICAgICAgICAgZWxzZSB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmFkYXB0aXZlUGxhY2Vob2xkZXJWYWxpZENsYXNzKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoJC5mb3Jtcy5sZW5ndGggPiAwKSB7XG4gICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKCQuZm9ybXMsIGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgIG9uRm9ybVJlc2V0KGZvcm0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCQuaW5wdXRGaWxlLmxlbmd0aCA+IDApIHtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoJC5pbnB1dEZpbGUsIGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICB2YXIgaW5wdXQgPSBmaWVsZC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiZmlsZVwiXScpO1xuICAgICAgICB2YXIgZmFrZSA9IGZpZWxkLnF1ZXJ5U2VsZWN0b3IoJy5icy1mb3JtX19maWVsZCcpO1xuICAgICAgICB2YXIgZm9ybSA9IGdldFBhcmVudChmaWVsZCwgJ2JzLWZvcm0nKTtcblxuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICB2YXIgZmlsZXBhdGggPSBldi50YXJnZXQudmFsdWU7XG4gICAgICAgICAgaWYgKGZpbGVwYXRoKSB7XG4gICAgICAgICAgICBmYWtlLmlubmVyVGV4dCA9IGZpbGVwYXRoLnJlcGxhY2UoL14uKlxcXFwvLCAnJyk7XG4gICAgICAgICAgICBmYWtlLmNsYXNzTGlzdC5hZGQoJC5oYXNGaWxlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmFrZS5pbm5lclRleHQgPSBmYWtlLmdldEF0dHJpYnV0ZSgnZGF0YS1wbGFjZWhvbGRlcicpO1xuICAgICAgICAgICAgZmFrZS5jbGFzc0xpc3QucmVtb3ZlKCQuaGFzRmlsZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgdG9nZ2xlVGl0bGVJbmZvVmFsdWUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgY2xpY2tlZEVsZW0gPSBldmVudC50YXJnZXQ7XG4gICAgY2xpY2tlZEVsZW0uY2hpbGRyZW5bMF0uY2xhc3NMaXN0LnRvZ2dsZSgkLmluZm9BY3RpdmUpO1xuICAgICQub3ZlcmxheS5jbGFzc0xpc3QuYWRkKCQub3ZlcmxheUFjdGl2ZSk7XG4gIH1cblxuICB2YXIgY2xvc2VUaXRsZUluZm9WYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJC50b2dnbGVJbmZvQ29udGVudCkge1xuICAgICAgJC50b2dnbGVJbmZvQ29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCQuaW5mb0FjdGl2ZSk7XG4gICAgICAkLm92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgkLm92ZXJsYXlBY3RpdmUpO1xuICAgIH1cbiAgfVxuXG4gIHZhciB0b2dnbGVJbnB1dFBhc3N3b3JkVmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgICB2YXIgaW5wdXQgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignaW5wdXQnKTtcblxuICAgIGlmIChpbnB1dC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PT0gJ3RleHQnKSB7XG4gICAgICBwYXJlbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcucGFzc3dvcmRWaXNpYmxlQ2xhc3MpO1xuICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3Bhc3N3b3JkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5wYXNzd29yZFZpc2libGVDbGFzcyk7XG4gICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuICAgIH1cblxuICAgIGlucHV0LmZvY3VzKCk7XG4gIH07XG5cbiAgLyogdmFyIHRvZ2dsZU1hc2tEREkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGF0YVRlbCA9IGVsLmRhdGFzZXQudGVsO1xuICAgIHZhciB0ZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtkYXRhLXRlbD0nKyBkYXRhVGVsICsnXScpO1xuICAgIGNvbnNvbGUubG9nKCdhc2QnKTtcblxuICAgIGlmKGRhdGFUZWwgIT0gNTUpIHtcbiAgICAgIGRlc3Ryb3kgbWFza1xuICAgICAgY29uc29sZS5sb2coJ0RJRkVSRU5URScpO1xuICAgIH1cbiAgfSAqL1xuXG4gIHZhciByZXZlYWxUZWxlcGhvbmVGaWVsZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYWRpdGlvbmFsVGVsZXBob25lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1mb3JtX190ZWxlcGhvbmUtYWRpdGlvbmFsLmJzLWlzLWhpZGRlbicpO1xuICAgIGlmIChhZGl0aW9uYWxUZWxlcGhvbmVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgYWRpdGlvbmFsVGVsZXBob25lc1swXS5jbGFzc0xpc3QucmVtb3ZlKCdicy1pcy1oaWRkZW4nKTtcbiAgICAgICQucmV2ZWFsVGVsZXBob25lLmNsYXNzTGlzdC5hZGQoJ2JzLWlzLWRpc2FibGVkJyk7XG4gICAgfSBlbHNlIGlmIChhZGl0aW9uYWxUZWxlcGhvbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGFkaXRpb25hbFRlbGVwaG9uZXNbMF0uY2xhc3NMaXN0LnJlbW92ZSgnYnMtaXMtaGlkZGVuJyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciB0b2dnbGVNYXNrRERJID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIHZhciBkYXRhVGVsID0gZWwuZGF0YXNldC50ZWw7XG4gICAgLy8gdmFyIHRlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W2RhdGEtdGVsPScrIGRhdGFUZWwgKyddJyk7XG4gICAgY29uc29sZS5sb2coJ2FzZCcpO1xuXG4gICAgLy8gaWYgKGRhdGFUZWwgIT0gNTUpIHtcbiAgICAvLyAgIGRlc3Ryb3kgbWFza1xuICAgIC8vICAgY29uc29sZS5sb2coJ0RJRkVSRU5URScpO1xuICAgIC8vIH1cbiAgfTtcblxuICB2YXIgdG9nZ2xlQ2FsZW5kYXIgPSBmdW5jdGlvbiAoaW5wdXQpIHt9XG5cbiAgdmFyIG9uRm9ybVJlc2V0ID0gZnVuY3Rpb24gKGZvcm0pIHtcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGZha2VGaWxlSW5wdXRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdzcGFuLmJzLWZvcm1fX2ZpZWxkJyk7XG4gICAgICBpZiAoZmFrZUZpbGVJbnB1dHMubGVuZ3RoKSB7XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZmFrZUZpbGVJbnB1dHMsIGZ1bmN0aW9uIChmYWtlKSB7XG4gICAgICAgICAgZmFrZS5pbm5lclRleHQgPSBmYWtlLmdldEF0dHJpYnV0ZSgnZGF0YS1wbGFjZWhvbGRlcicpIHx8ICcnO1xuICAgICAgICAgIGZha2UuY2xhc3NMaXN0LnJlbW92ZSgkLmhhc0ZpbGUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdCxcbiAgfTtcbn0oKSk7XG5cbi8qKlxuICogSW5pdCBGb3JtcyBDb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKSkge1xuICAgIEJzRm9ybXMuaW5pdCgpO1xuICB9XG59KTtcbiIsInZhciBCc2Zvcm1TdGVwcyA9IChmdW5jdGlvbiAoKSB7XG4gIHZhciBjb25maWcgPSB7XG4gICAgYnV0dG9uczoge1xuICAgICAgbmV4dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWZvcm0tLXN0ZXBzIC5icy1qcy1mb3JtLW5leHQnKSxcbiAgICAgIHByZXY6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1mb3JtLS1zdGVwcyAuYnMtanMtZm9ybS1wcmV2JyksXG4gICAgfSxcbiAgICBjbGFzc2VzOiB7XG4gICAgICBhY3RpdmVGaWVsZHNldDogJ2JzLWZvcm1fX2ZpZWxkc2V0LS1hY3RpdmUnLFxuICAgIH0sXG4gICAgY3VycmVudFN0ZXA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1qcy1mb3JtLWN1cnJlbnQtc3RlcCcpLFxuICAgIGN1cnJlbnRTdGVwSW50OiAwLFxuICAgIGZpZWxkc2V0czogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWZvcm0tLXN0ZXBzIC5icy1mb3JtX19maWVsZHNldCcpLFxuICAgIGZvcm06IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1mb3JtLS1zdGVwcycpLFxuICAgIHBlcmNlbnRhZ2U6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1qcy1mb3JtLXBlcmNlbnRhZ2UnKSxcbiAgICBwcm9ncmVzc0JhcjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWZvcm0tLXN0ZXBzIC5icy1qcy1wcm9ncmVzcy1iYXInKSxcbiAgICB0b3RhbFN0ZXBzOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtanMtZm9ybS10b3RhbC1zdGVwcycpLFxuICAgIHRvdGFsU3RlcHNJbnQ6IDAsXG4gIH07XG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgX3NldFRvdGFsU3RlcHMoKTtcbiAgICBfdXBkYXRlQ3VycmVudFN0ZXAoKTtcblxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLmJ1dHRvbnMubmV4dCwgZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBfbmV4dFN0ZXAoYnV0dG9uKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuYnV0dG9ucy5wcmV2LCBmdW5jdGlvbiAoYnV0dG9uKSB7XG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIF9wcmV2U3RlcChidXR0b24pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICogQXR1YWxpemEgbyBwYXNzbyBhdHVhbCBkbyBmb3JtdWzDoXJpb1xuICAqL1xuICB2YXIgX3VwZGF0ZUN1cnJlbnRTdGVwID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhY3RpdmVGaWVsZHNldCA9IGNvbmZpZy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy4nICsgY29uZmlnLmNsYXNzZXMuYWN0aXZlRmllbGRzZXQpO1xuXG4gICAgLy8gVHJhbnNmb3JtbyBvIE5vZGVMaXN0IGVtIHVtIEFycmF5XG4gICAgdmFyIGZpZWxkc2V0cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNvbmZpZy5maWVsZHNldHMpO1xuXG4gICAgaWYgKGZpZWxkc2V0cykge1xuICAgICAgLy8gT2J0ZW5obyBhIHBvc2nDp8OjbyAoaW5kZXgpIGRvIGZpZWxkc2V0XG4gICAgICB2YXIgY3VycmVudFN0ZXBJbnQgPSBmaWVsZHNldHMuaW5kZXhPZihhY3RpdmVGaWVsZHNldCkgKyAxO1xuXG4gICAgICAvLyBBdHVhbGl6byBvIHBhc3NvIGRvIGZvcm11bMOhcmlvXG4gICAgICBjb25maWcuY3VycmVudFN0ZXBJbnQgPSBjdXJyZW50U3RlcEludDtcbiAgICAgIGNvbmZpZy5jdXJyZW50U3RlcC50ZXh0Q29udGVudCA9IGN1cnJlbnRTdGVwSW50O1xuICAgICAgX3VwZGF0ZVBlcmNlbnRhZ2UoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICogRGVmaW5lIG8gdG90YWwgZGUgcGFzc29zIGRvIGZvcm11bMOhcmlvXG4gICovXG4gIHZhciBfc2V0VG90YWxTdGVwcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZmllbGRzZXRzID0gY29uZmlnLmZpZWxkc2V0cztcbiAgICBpZiAoZmllbGRzZXRzICYmIGZpZWxkc2V0cy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25maWcudG90YWxTdGVwc0ludCA9IGZpZWxkc2V0cy5sZW5ndGg7XG4gICAgICBjb25maWcudG90YWxTdGVwcy50ZXh0Q29udGVudCA9IGZpZWxkc2V0cy5sZW5ndGg7XG4gICAgICBfdXBkYXRlUGVyY2VudGFnZSgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVmFsaWRhIG8gZm9ybXVsw6FyaW8gZSBhdmFuw6dhIHBhcmEgbyBwcsOzeGltbyBwYXNzb1xuICAgKiBAcGFyYW0gIHtFbGVtZW50fSBidXR0b24gQm90w6NvIHBhcmEgYXZhbsOnYXIgdW0gcGFzc29cbiAgICovXG4gIHZhciBfbmV4dFN0ZXAgPSBmdW5jdGlvbiAoYnV0dG9uKSB7XG4gICAgdmFyIGN1cnJlbnRGaWVsZHNldCA9IGdldFBhcmVudHMoYnV0dG9uLCAnYnMtZm9ybV9fZmllbGRzZXQnLCB0cnVlKVswXTtcbiAgICB2YXIgbmV4dEZpZWxkc2V0ID0gY3VycmVudEZpZWxkc2V0Lm5leHRFbGVtZW50U2libGluZztcbiAgICB2YXIgaXNGb3JtT2sgPSBCc0Zvcm1WYWxpZGF0ZS52YWxpZGF0ZUZvcm0oY3VycmVudEZpZWxkc2V0KTtcbiAgICBpZiAoaXNGb3JtT2spIF9zd2l0Y2hGaWVsZHNldChuZXh0RmllbGRzZXQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBWb2x0YSB1bSBwYXNzbyBubyBmb3JtdWzDoXJpb1xuICAgKiBAcGFyYW0gIHtFbGVtZW50fSBidXR0b24gQm90w6NvIHBhcmEgdm9sdGFyIHVtIHBhc3NvXG4gICAqL1xuICB2YXIgX3ByZXZTdGVwID0gZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgIHZhciBjdXJyZW50RmllbGRzZXQgPSBnZXRQYXJlbnRzKGJ1dHRvbiwgJ2JzLWZvcm1fX2ZpZWxkc2V0JywgdHJ1ZSlbMF07XG4gICAgdmFyIHByZXZGaWVsZHNldCA9IGN1cnJlbnRGaWVsZHNldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgIGlmIChwcmV2RmllbGRzZXQpIF9zd2l0Y2hGaWVsZHNldChwcmV2RmllbGRzZXQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFc2NvbmRlIG9zIGZpZWxkc2V0cyBlIGV4aWJlIGFwZW5hcyBvIGF0dWFsXG4gICAqIEBwYXJhbSAge0VsZW1lbnR9IGZpZWxkc2V0IEZpZWxkc2V0IHF1ZSBzZXLDoSBleGliaWRvXG4gICAqL1xuICB2YXIgX3N3aXRjaEZpZWxkc2V0ID0gZnVuY3Rpb24gKGZpZWxkc2V0KSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuZmllbGRzZXRzLCBmdW5jdGlvbiAoZnMpIHtcbiAgICAgIGZzLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmNsYXNzZXMuYWN0aXZlRmllbGRzZXQpO1xuICAgIH0pO1xuICAgIGZpZWxkc2V0LmNsYXNzTGlzdC5hZGQoY29uZmlnLmNsYXNzZXMuYWN0aXZlRmllbGRzZXQpO1xuICAgIF91cGRhdGVDdXJyZW50U3RlcCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBdHVhbGl6YSBvIHBlcmNlbnR1YWwgZGUgcHJvZ3Jlc3NvXG4gICAqL1xuICB2YXIgX3VwZGF0ZVBlcmNlbnRhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGNvbmZpZy50b3RhbFN0ZXBzSW50ID4gMCkge1xuICAgICAgLy8gQ2FsY3VsbyBvIHBlcmNlbnR1YWwgZGUgcHJvZ3Jlc3NvXG4gICAgICAvLyBEaW1pbnVpIDEgcGFyYSBpbmljaWFyIGNvbSAwJVxuICAgICAgdmFyIHBlcmNlbnRhZ2UgPSBwYXJzZUludCgoKChjb25maWcuY3VycmVudFN0ZXBJbnQgLSAxKSAqIDEwMCkgLyBjb25maWcudG90YWxTdGVwc0ludCksIDEwKTtcbiAgICAgIGNvbmZpZy5wZXJjZW50YWdlLnRleHRDb250ZW50ID0gcGVyY2VudGFnZTtcbiAgICAgIGNvbmZpZy5wcm9ncmVzc0Jhci52YWx1ZSA9IHBlcmNlbnRhZ2U7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdCxcbiAgfTtcbn0oKSk7XG5cbi8qKlxuICogSW5pdCBCc2Zvcm1TdGVwcyBjb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH0gQnNmb3JtU3RlcHMuaW5pdCgpO1xuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWZvcm0tLXN0ZXBzJykubGVuZ3RoKSB7XG4gICAgQnNmb3JtU3RlcHMuaW5pdCgpO1xuICB9XG59KTtcbiIsIi8qKlxuICogRm9ybSBWYWxpZGF0ZSAoYW5jaG9yKVxuICovXG52YXIgQnNGb3JtVmFsaWRhdGUgPSAoZnVuY3Rpb24gKCkge1xuICAvLyBFbGVtZW50c1xuICB2YXIgZWxlbWVudHMgPSB7fTtcbiAgdmFyICQgPSBlbGVtZW50cztcblxuICAkLmZvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpO1xuXG4gIGlmICghJC5mb3Jtcy5sZW5ndGgpIHJldHVybjtcblxuICAvLyBDb25maWdcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBlcnJvck1lc3NhZ2VDbGFzczogJ2JzLWZvcm0tZXJyb3JfX21lc3NhZ2UnLFxuICAgIGxhYmVsQ2xhc3M6ICdicy1mb3JtX19sYWJlbCcsXG4gICAgdmFsaWRhdGU6IHtcbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgcGF0dGVybjogLyg/IV4gKyQpXi4rJC9nLFxuICAgICAgICBlcnJvcjogJ0Vzc2UgY2FtcG8gw6kgZGUgcHJlZW5jaGltZW50byBvYnJpZ2F0w7NyaW8uJyxcbiAgICAgIH0sXG4gICAgICBub21lOiB7XG4gICAgICAgIHBhdHRlcm46IC9bXFx3XFxzXSsvZyxcbiAgICAgICAgZXJyb3I6ICdWb2PDqiBkZXZlIGRpZ2l0YXIgc2V1IG5vbWUgY29tcGxldG8uJyxcbiAgICAgIH0sXG4gICAgICBjcGY6IHtcbiAgICAgICAgcGF0dGVybjogLyhbMC05XXszfVsuXT9bMC05XXszfVsuXT9bMC05XXszfVstXT9bMC05XXsyfSkvZyxcbiAgICAgICAgZXJyb3I6ICdPIENQRiDDqSBpbnbDoWxpZG8nLFxuICAgICAgfSxcbiAgICAgIGNucGo6IHtcbiAgICAgICAgcGF0dGVybjogLyhbMC05XXsyfVsuXT9bMC05XXszfVsuXT9bMC05XXszfVsvXT9bMC05XXs0fVstXT9bMC05XXsyfSkvZyxcbiAgICAgICAgZXJyb3I6ICdPIENOUEogw6kgaW52w6FsaWRvJyxcbiAgICAgIH0sXG4gICAgICB0ZWw6IHtcbiAgICAgICAgLy8gaHR0cHM6Ly9yZWdleHIuY29tLzNtM3MyXG4gICAgICAgIHBhdHRlcm46IC9bKF0/WzEtOV17Mn1bKV0/W1xcc10/WzItOV1bMC05XXszLDR9Wy1cXHNdP1sxLTldezR9L2csXG4gICAgICAgIGVycm9yOiAnTyB0ZWxlZm9uZSDDqSBpbnbDoWxpZG8nLFxuICAgICAgfSxcbiAgICAgICdhY3RpdmF0aW9uLWNvZGUnOiB7XG4gICAgICAgIHBhdHRlcm46IC9bMC05XXs2fS9nLFxuICAgICAgICBlcnJvcjogJ08gY8OzZGlnbyDDqSBpbnbDoWxpZG8nLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHZhbGlkYXRlZEN1c3RvbUV2ZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbmV3IEV2ZW50KCdmb3JtSXNWYWxpZCcpXG4gICAgfSxcbiAgICB2YWxpZElucHV0czogJ2lucHV0LCB0ZXh0YXJlYScsXG4gICAgaW5wdXRPcHRpb25zOiB7XG4gICAgICAvLyBzdHJpbmdcbiAgICAgIGVycm9yOiBudWxsLFxuICAgICAgLy8gcmVnZXhcbiAgICAgIHBhdHRlcm46IG51bGwsXG4gICAgICAvLyBzdHJpbmdcbiAgICAgIHR5cGU6IG51bGwsXG4gICAgICAvLyBmdW5jdGlvblxuICAgICAgdmFsaWRhdGlvbjogbnVsbCxcbiAgICAgIC8vIGJvb2xlYW5cbiAgICAgIG5vU3RhdGU6IGZhbHNlLFxuICAgICAgLy8gLy8gYm9vbGVhblxuICAgICAgLy8gdmFsaWRhdGVPbklucHV0OiBmYWxzZSxcbiAgICAgIC8vIC8vIGJvb2xlYW5cbiAgICAgIC8vIGNsZWFuT25JbnB1dDogZmFsc2UsXG4gICAgfSxcbiAgfTtcblxuICAvKipcbiAgICogW2Rlc2NyaXB0aW9uXVxuICAgKi9cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCgkLmZvcm1zLCBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgdmFyIHZhbGlkYXRlQ2FsbGJhY2sgPSBmb3JtLmdldEF0dHJpYnV0ZSgnZGF0YS12YWxpZGF0ZS1jYWxsYmFjaycpO1xuICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gU2UgbyBmb3JtdWzDoXJpbyBuw6NvIGZvciB2w6FsaWRvLCBwcmV2aW5lIG8gc3VibWl0XG4gICAgICAgIGlmICghdmFsaWRhdGVGb3JtKHRoaXMpKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAvLyBkZWJ1Z2dlcjtcbiAgICAgICAgICAvLyBTZSBvIGZvcm11bMOhcmlvIGZvciB2w6FsaWRvIGUgdGl2ZXIgdW0gY2FsbGJhY2tcbiAgICAgICAgICAvLyBjdXN0b21pemFkbywgdGFtYsOpbSBwcmV2aW5lIG8gc3VibWl0XG4gICAgICAgIH0gZWxzZSBpZiAodmFsaWRhdGVDYWxsYmFjaykge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGNvbmZpZy52YWxpZGF0ZWRDdXN0b21FdmVudCk7XG4gICAgICAgICAgLy8gZGVidWdnZXI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBbZGVzY3JpcHRpb25dXG4gICAqIEBwYXJhbSAge1t0eXBlXX0gZm9ybSBbZGVzY3JpcHRpb25dXG4gICAqIEByZXR1cm4ge1t0eXBlXX0gICAgICBbZGVzY3JpcHRpb25dXG4gICAqL1xuICB2YXIgdmFsaWRhdGVGb3JtID0gZnVuY3Rpb24gKGZvcm0pIHtcbiAgICB2YXIgaW5wdXRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy52YWxpZElucHV0cyk7XG4gICAgdmFyIG91dHB1dCA9IHRydWU7XG5cbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGlucHV0cywgZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICBjbGVhblN0YXRlKGlucHV0KTtcbiAgICAgIGlmICghdmFsaWRhdGVJbnB1dChpbnB1dCkpIG91dHB1dCA9IGZhbHNlO1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHZhbGlkYXRlSW5wdXQuYmluZChudWxsLCBpbnB1dCkpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfTtcblxuICAvKipcbiAgICogW2Rlc2NyaXB0aW9uXVxuICAgKiBAcGFyYW0gIHtbdHlwZV19IGlucHV0ICAgW2Rlc2NyaXB0aW9uXVxuICAgKiBAcGFyYW0gIHtbdHlwZV19IG9wdGlvbnMgW2Rlc2NyaXB0aW9uXVxuICAgKiBAcmV0dXJuIHtbdHlwZV19ICAgICAgICAgW2Rlc2NyaXB0aW9uXVxuICAgKi9cbiAgdmFyIHZhbGlkYXRlSW5wdXQgPSBmdW5jdGlvbiAoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAvLyBjdXN0b20gc2V0dGluZ3NcbiAgICB2YXIgc2V0dGluZ3MgPSB7fTtcbiAgICB2YXIgaW5saW5lU2V0dGluZ3MgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsaWRhdGUtb3B0aW9ucycpIHx8IG51bGw7XG5cbiAgICAvLyBpZiBleGlzdHMsIGV4dGVuZCBpbmxpbmUgb3B0aW9ucyBpbiBkZWZhdWx0IHNldHRpbmdzXG4gICAgaWYgKGlubGluZVNldHRpbmdzKSBzZXR0aW5ncyA9IGV4dGVuZChjb25maWcuaW5wdXRPcHRpb25zLCBvcHRpb25zKTtcblxuICAgIC8vIGNoZWNrIGlmIG9wdGlvbnMgaGFzIGFuIG9iamVjdFxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIG9wdGlvbnMgPSB7fTtcbiAgICAvLyBleHRlbmQgb3B0aW9ucyBvYmplY3QgcHJvcGVydGllcyBpbiBzZXR0aW5nc1xuICAgIGVsc2Ugc2V0dGluZ3MgPSBleHRlbmQoY29uZmlnLmlucHV0T3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgICAvLyBzZXQgbG9hZGluZyBzdGF0ZSBpZiBzZXR0aW5ncyBoYXMgY3VzdG9tIHZhbGlkYXRpb24gZnVuY3Rpb25cbiAgICBpZiAoc2V0dGluZ3MudmFsaWRhdGlvbiA9PT0gJ2Z1bmN0aW9uJykgc2V0U3RhdGUoaW5wdXQsICdsb2FkaW5nJyk7XG5cbiAgICAvLyBTZXQgZXJyb3Igc3RhdGUgaWYgaW5wdXQgaXMgaW52YWxpZFxuICAgIGlmICghaW5wdXRJc1ZhbGlkKGlucHV0LCBzZXR0aW5ncykgJiYgIXNldHRpbmdzLm5vU3RhdGUpIHtcbiAgICAgIC8vIGRlYnVnZ2VyO1xuICAgICAgc2V0U3RhdGUoaW5wdXQsICdpbnZhbGlkJywgc2V0dGluZ3MuZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghc2V0dGluZ3Mubm9TdGF0ZSkge1xuICAgICAgLy8gZGVidWdnZXI7XG4gICAgICAvLyBTZXQgc3VjY2VzcyBzdGF0ZSBpZiBpbnB1dCBpcyB2YWxpZFxuICAgICAgc2V0U3RhdGUoaW5wdXQsICd2YWxpZCcpO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBbZGVzY3JpcHRpb25dXG4gICAqIEBwYXJhbSAge1t0eXBlXX0gaW5wdXQgICAgW2Rlc2NyaXB0aW9uXVxuICAgKiBAcGFyYW0gIHtbdHlwZV19IHNldHRpbmdzIFtkZXNjcmlwdGlvbl1cbiAgICogQHJldHVybiB7W3R5cGVdfSAgICAgICAgICBbZGVzY3JpcHRpb25dXG4gICAqL1xuICB2YXIgaW5wdXRJc1ZhbGlkID0gZnVuY3Rpb24gKGlucHV0LCBzZXR0aW5ncykge1xuICAgIC8vIGlmIGlucHV0IGlzIHJlcXVpcmVkXG4gICAgdmFyIGlzUmVxdWlyZWQgPVxuICAgICAgaW5wdXQuZ2V0QXR0cmlidXRlKCdyZXF1aXJlZCcpID09PSAnJyB8fFxuICAgICAgaW5wdXQuZ2V0QXR0cmlidXRlKCdyZXF1aXJlZCcpID09PSAncmVxdWlyZWQnO1xuXG4gICAgaWYgKCFpc1JlcXVpcmVkKSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIHR5cGUgb2YgdGhlIHZhbGlkYXRpb25cbiAgICB2YXIgdHlwZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgnZGF0YS12YWxpZGF0ZS10eXBlJykgfHwgc2V0dGluZ3MudHlwZTtcblxuICAgIC8vIGN1c3RvbSBwYXR0ZXJuIChyZWdleClcbiAgICB2YXIgcGF0dGVybiA9XG4gICAgICBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsaWRhdGUtcGF0dGVybicpIHx8XG4gICAgICBpbnB1dC5nZXRBdHRyaWJ1dGUoJ3BhdHRlcm4nKSB8fFxuICAgICAgc2V0dGluZ3MucGF0dGVybjtcblxuICAgIC8vIGlucHV0IHZhbHVlXG4gICAgdmFyIHZhbHVlID0gaW5wdXQudmFsdWU7XG5cbiAgICAvLyBkZWZhdWx0IHBhdHRlcm4gYnkgdHlwZVxuICAgIHZhciB0eXBlVmFsaWRhdGUgPSBjb25maWcudmFsaWRhdGVbdHlwZV0gfHwgW107XG5cbiAgICAvLyBpZiBpbnB1dCBpcyB2YWxpZCBvciBub3RcbiAgICB2YXIgb3V0cHV0ID0gZmFsc2U7XG5cbiAgICAvLyBjaGVjayBpZiBhIHN0cmluZyBtYXRjaGVzIGEgcmVnZXggcGF0dGVyblxuICAgIHZhciBjaGVja1JlZ2V4ID0gZnVuY3Rpb24gKHN0cmluZywgcmVnZXgpIHtcbiAgICAgIHJldHVybiBzdHJpbmcubWF0Y2gocmVnZXgpO1xuICAgIH07XG5cbiAgICAvLyBpZiBpcyBub3QgcmVxdWlyZWQsIHZhbGlkYXRpb24gaXMgbm90IG5lZWRlZFxuICAgIC8vIGlmIGhhcyBub3QgdmFsdWUsIHZhbGlkYXRpb24gaXMgbm90IHBvc3NpYmxlXG4gICAgaWYgKCFpc1JlcXVpcmVkIHx8ICF2YWx1ZSkgcmV0dXJuO1xuXG4gICAgLy8gaWYgaW5wdXQgaGFzIGN1c3RvbSBkYXRhIHRvIHZhbGlkYXRlXG4gICAgaWYgKHNldHRpbmdzLnZhbGlkYXRpb24pIHtcbiAgICAgIG91dHB1dCA9IHNldHRpbmdzLnZhbGlkYXRpb24odmFsdWUpO1xuICAgICAgLy8gaWYgaW5wdXQgaGFzIGEgdHlwZSBkZWZpbmVkIGFuZCB0aGF0IGhhcyBhIGRlZmF1bHQgcGF0dGVyblxuICAgIH0gZWxzZSBpZiAodHlwZVZhbGlkYXRlLnBhdHRlcm4pIHtcbiAgICAgIG91dHB1dCA9IGNoZWNrUmVnZXgodmFsdWUsIHR5cGVWYWxpZGF0ZS5wYXR0ZXJuKTtcbiAgICAvLyBpZiBpbnB1dCBoYXMgbm90IGEgdHlwZSBkZWZpbmVkIGJ1dCBhIGN1c3RvbSBwYXR0ZXJuXG4gICAgfSBlbHNlIGlmIChwYXR0ZXJuKSB7XG4gICAgICBvdXRwdXQgPSBjaGVja1JlZ2V4KHZhbHVlLCBwYXR0ZXJuKTtcbiAgICAvLyBpZiBpbnB1dCBpcyBjaGVja2JveFxuICAgIH0gZWxzZSBpZiAoaW5wdXQudHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuICAgICAgb3V0cHV0ID0gaW5wdXQuY2hlY2tlZDtcbiAgICAvLyBpZiBpbnB1dCBoYXMgbm90IGEgdHlwZSBvciBhIHBhdHRlcm4sIGJ1dCBldmVuIHNvIGlzIHJlcXVpcmVkXG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dCA9IHZhbHVlLnRyaW0oKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBbZGVzY3JpcHRpb25dXG4gICAqIEBwYXJhbSAge1t0eXBlXX0gaW5wdXQgICBbZGVzY3JpcHRpb25dXG4gICAqIEBwYXJhbSAge1t0eXBlXX0gc3RhdGUgICBbZGVzY3JpcHRpb25dXG4gICAqIEBwYXJhbSAge1t0eXBlXX0gbWVzc2FnZSBbZGVzY3JpcHRpb25dXG4gICAqL1xuICB2YXIgc2V0U3RhdGUgPSBmdW5jdGlvbiAoaW5wdXQsIHN0YXRlLCBtZXNzYWdlKSB7XG4gICAgLy8gdmFyIGxhYmVsID0gZ2V0UGFyZW50cyhpbnB1dCwgY29uZmlnLmxhYmVsQ2xhc3MpO1xuICAgIHZhciBpbnB1dFR5cGUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsaWRhdGUtdHlwZScpO1xuICAgIHZhciBlcnJvck1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cbiAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09ICdzdHJpbmcnKSBtZXNzYWdlID0gbnVsbDtcblxuICAgIGNsZWFuU3RhdGUoaW5wdXQpO1xuXG4gICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5hZGQoY29uZmlnLmVycm9yTWVzc2FnZUNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2UuaW5uZXJIVE1MID0gKFxuICAgICAgY29uZmlnLnZhbGlkYXRlW2lucHV0VHlwZV0pID9cbiAgICAgIGNvbmZpZy52YWxpZGF0ZVtpbnB1dFR5cGVdLmVycm9yIDpcbiAgICAgIGNvbmZpZy52YWxpZGF0ZS5kZWZhdWx0LmVycm9yO1xuXG4gICAgZXJyb3JNZXNzYWdlLmlubmVySFRNTCA9IG1lc3NhZ2UgfHwgZXJyb3JNZXNzYWdlLmlubmVySFRNTDtcblxuICAgIC8vIGRlYnVnZ2VyO1xuICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnZGF0YS12YWxpZGF0aW9uLXN0YXRlJywgc3RhdGUpO1xuXG4gICAgaWYgKHN0YXRlID09PSAnaW52YWxpZCcpIHtcbiAgICAgIGlmIChpbnB1dC50eXBlID09PSAnY2hlY2tib3gnIHx8IGlucHV0LnR5cGUgPT09ICdyYWRpbycpIHtcbiAgICAgICAgaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nLmFwcGVuZENoaWxkKGVycm9yTWVzc2FnZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnNlcnRBZnRlcihlcnJvck1lc3NhZ2UsIGlucHV0KTtcbiAgICAgIH1cbiAgICAgIC8vIGRlYnVnZ2VyO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogW2Rlc2NyaXB0aW9uXVxuICAgKiBAcGFyYW0gIHtbdHlwZV19IGlucHV0IFtkZXNjcmlwdGlvbl1cbiAgICogQHJldHVybiB7W3R5cGVdfSAgICAgICBbZGVzY3JpcHRpb25dXG4gICAqL1xuICB2YXIgZ2V0U3RhdGUgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQuZ2V0QXR0cmlidXRlKCdkYXRhLXZhbGlkYXRpb24tc3RhdGUnKTtcbiAgfTtcblxuICAvKipcbiAgICogW2Rlc2NyaXB0aW9uXVxuICAgKiBAcGFyYW0gIHtbdHlwZV19IGlucHV0IFtkZXNjcmlwdGlvbl1cbiAgICovXG4gIHZhciBjbGVhblN0YXRlID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgdmFyIHBhcmVudCA9IGlucHV0LnBhcmVudE5vZGU7XG4gICAgdmFyIG1lc3NhZ2UgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLmJzLWZvcm0tZXJyb3JfX21lc3NhZ2UnKTtcbiAgICBpbnB1dC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtdmFsaWRhdGlvbi1zdGF0ZScpO1xuXG4gICAgaWYgKG1lc3NhZ2UpIHBhcmVudC5yZW1vdmVDaGlsZChtZXNzYWdlKTtcbiAgfTtcblxuICAvKipcbiAgICogaW5zZXJ0QWZ0ZXJcbiAgICogQHBhcmFtICB7W3R5cGVdfSBuZXdOb2RlICAgICAgIFtkZXNjcmlwdGlvbl1cbiAgICogQHBhcmFtICB7W3R5cGVdfSByZWZlcmVuY2VOb2RlIFtkZXNjcmlwdGlvbl1cbiAgICovXG4gIHZhciBpbnNlcnRBZnRlciA9IGZ1bmN0aW9uIChuZXdOb2RlLCByZWZlcmVuY2VOb2RlKSB7XG4gICAgcmVmZXJlbmNlTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdOb2RlLCByZWZlcmVuY2VOb2RlLm5leHRTaWJsaW5nKTtcbiAgfTtcblxuICAvKipcbiAgICogRXh0ZW5kIG9iamVjdHNcbiAgICogQHBhcmFtICB7T2JqZWN0fSBvYmpBIEFuIG9iamVjdFxuICAgKiBAcGFyYW0gIHtPYmplY3R9IG9iakIgQW5vdGhlciBvYmplY3RcbiAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEEgY29weSBvZiBvYmplY3RBIGV4dGVuZGVkIHdpdGggdGhlIHByb3BlcnRpZXMgZnJvbSBvYmplY3RCXG4gICAqL1xuICB2YXIgZXh0ZW5kID0gZnVuY3Rpb24gKG9iakEsIG9iakIpIHtcbiAgICB2YXIgb2JqQyA9IHt9O1xuICAgIGZvciAodmFyIGtleUEgaW4gb2JqQSkge1xuICAgICAgaWYgKG9iakEuaGFzT3duUHJvcGVydHkoa2V5QSkpIHtcbiAgICAgICAgb2JqQ1trZXlBXSA9IG9iakFba2V5QV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIga2V5QiBpbiBvYmpCKSB7XG4gICAgICBpZiAob2JqQi5oYXNPd25Qcm9wZXJ0eShrZXlCKSkge1xuICAgICAgICBvYmpDW2tleUJdID0gb2JqQltrZXlCXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iakM7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICAgIHZhbGlkYXRlSW5wdXQ6IHZhbGlkYXRlSW5wdXQsXG4gICAgdmFsaWRhdGVGb3JtOiB2YWxpZGF0ZUZvcm0sXG4gICAgZ2V0U3RhdGU6IGdldFN0YXRlLFxuICAgIHNldFN0YXRlOiBzZXRTdGF0ZSxcbiAgfTtcbn0oKSk7XG5cbi8qKlxuICogSW5pdCBCc0Zvcm1WYWxpZGF0ZSBDb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH0gSGVhZGVyLmluaXQoKTtcbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy12YWxpZGF0ZScpLmxlbmd0aCkge1xuICAgIEJzRm9ybVZhbGlkYXRlLmluaXQoKTtcbiAgfVxufSk7XG4iLCIvKipcbiAqIEJzIFBpY3R1cmUgUGFyYWxsYXggRWZmZWN0XG4gKiBQYXJhbGxheCBlZmZlY3QgZm9yIGZ1bGwgYmFja2dyb3VuZCBpbWFnZXMgd2l0aCBodG1sIHBpY3R1cmUvaW1nIHRhZ1xuICpcbiAqIFVzZSBleGVtcGxlOlxuICogPHBpY3R1cmUgY2xhc3M9XCJpbWFnZS1jb250YWluZXItY2xhc3NcIj5cbiAqICAgPGltZyBzcmM9XCJwYXRoL3RvL2ltYWdlLmpwZ1wiPlxuICogPC9waWN0dXJlPlxuICpcbiAqIFRPRE86IGpxdWVyeSBleHRlbmQgbGlrZSBmdW5jdGlvbiB0byBtZXJnZSBkZWZhdWx0L29wdGlvbnNcbiAqXG4gKi9cbnZhciBCc1BpY3R1cmVQYXJhbGxheCA9IChmdW5jdGlvbiAoZG9jdW1lbnQpIHtcbiAgLy8gRWxlbWVudHNcbiAgdmFyIGVsZW1lbnRzID0ge307XG4gIHZhciAkID0gZWxlbWVudHM7XG4gICQucGFyYWxsYXggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtcGljdHVyZS1wYXJhbGxheCcpO1xuICBpZiAoISQucGFyYWxsYXgubGVuZ3RoKSByZXR1cm47XG5cbiAgLy8gQ29uZmlnXG4gIHZhciBjb25maWcgPSB7XG4gICAgc3BlZWQ6IDEsXG4gIH07XG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuc3BlZWQpIGNvbmZpZy5zcGVlZCA9IG9wdGlvbnMuc3BlZWQ7XG5cbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKCQucGFyYWxsYXgsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgcGFyYWxsYXguYmluZChudWxsLCBlbCkpO1xuICAgIH0pO1xuICB9O1xuICB2YXIgcGFyYWxsYXggPSBmdW5jdGlvbiAoaW1hZ2VDb250YWluZXIpIHtcbiAgICB2YXIgc3BlZWQgPSAoY29uZmlnLnNwZWVkID4gMSB8fCBjb25maWcuc3BlZWQgPD0gMCkgPyAxIDogY29uZmlnLnNwZWVkO1xuICAgIHZhciBpbWFnZSA9IGltYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xuICAgIHZhciBpbWFnZUggPSBpbWFnZS5vZmZzZXRIZWlnaHQ7XG4gICAgdmFyIGltYWdlQ29udGFpbmVyWSA9IGltYWdlQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcbiAgICB2YXIgaW1hZ2VDb250YWluZXJIID0gaW1hZ2VDb250YWluZXIub2Zmc2V0SGVpZ2h0O1xuICAgIHZhciB3aW5ZID0gKFxuICAgICAgd2luZG93LnBhZ2VZT2Zmc2V0ICE9PSB1bmRlZmluZWRcbiAgICApID9cbiAgICAgIHdpbmRvdy5wYWdlWU9mZnNldCA6XG4gICAgICAoXG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fFxuICAgICAgICBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUgfHwgZG9jdW1lbnQuYm9keVxuICAgICAgKS5zY3JvbGxUb3A7XG4gICAgdmFyIHdpbkggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgdmFyIHNjcm9sbERpc3RhbmNlID0gd2luSCArIGltYWdlQ29udGFpbmVySDtcbiAgICB2YXIgaW1hZ2VTYW5ncmlhID0gaW1hZ2VIIC0gaW1hZ2VDb250YWluZXJIO1xuICAgIHZhciB0b3BQeFBlclNjcm9sbFB4ID0gaW1hZ2VTYW5ncmlhIC8gc2Nyb2xsRGlzdGFuY2U7XG4gICAgdmFyIGltYWdlVG9wUG9zaXRpb24gPSAodG9wUHhQZXJTY3JvbGxQeCAqIChpbWFnZUNvbnRhaW5lclkgLSB3aW5IKSkgKiBzcGVlZDtcblxuICAgIC8vIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0nKTtcbiAgICAvLyBjb25zb2xlLmxvZygnaW1hZ2VDb250YWluZXJZOiAnICsgaW1hZ2VDb250YWluZXJZKTtcbiAgICAvLyBjb25zb2xlLmxvZygnd2luWTogJyArIHdpblkpO1xuICAgIC8vIGNvbnNvbGUubG9nKCd3aW5IOiAnICsgd2luSCk7XG4gICAgLy8gY29uc29sZS5sb2coJ2ltYWdlQ29udGFpbmVySDogJyArIGltYWdlQ29udGFpbmVySCk7XG4gICAgLy8gY29uc29sZS5sb2coJ3Njcm9sbERpc3RhbmNlOiAnICsgc2Nyb2xsRGlzdGFuY2UpO1xuICAgIC8vIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0nKTtcbiAgICAvLyBjb25zb2xlLmxvZygnc3BlZWQ6ICcgKyBzcGVlZCk7XG4gICAgLy8gY29uc29sZS5sb2coJ2ltYWdlU2FuZ3JpYTogJyArIGltYWdlU2FuZ3JpYSk7XG4gICAgLy8gY29uc29sZS5sb2coJ3RvcFB4UGVyU2Nyb2xsUHg6ICcgKyB0b3BQeFBlclNjcm9sbFB4KTtcbiAgICAvLyBjb25zb2xlLmxvZygnaW1hZ2VUb3BQb3NpdGlvbjogJyArIGltYWdlVG9wUG9zaXRpb24pO1xuXG4gICAgaW1hZ2Uuc3R5bGUudG9wID0gaW1hZ2VUb3BQb3NpdGlvbiArICdweCc7XG4gIH07XG5cbiAgdmFyIG9mZnNldCA9IGZ1bmN0aW9uIChlbCkge1xuICAgIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG9wOiByZWN0LnRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wLFxuICAgICAgbGVmdDogcmVjdC5sZWZ0ICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0LFxuICAgIH07XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICB9O1xufShkb2N1bWVudCkpO1xuXG4vKipcbiAqIEluaXQgSGVhZGVyIENvbnN0cnVjdG9yXG4gKiBAcmV0dXJuIHt2b2lkfSBIZWFkZXIuaW5pdCgpO1xuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWpzLXBpY3R1cmUtcGFyYWxsYXgnKSkge1xuICAgIEJzUGljdHVyZVBhcmFsbGF4LmluaXQoKTtcbiAgfVxufSk7XG4iLCIvKipcbiAqIEJzIElucHV0IE1hc2tzIChhbmNob3IpXG4gKi9cbnZhciBJbnB1dE1hc2tzID0gKGZ1bmN0aW9uICgpIHtcbiAgLy8gRWxlbWVudHNcbiAgdmFyIGVsZW1lbnRzID0ge307XG4gIHZhciAkID0gZWxlbWVudHM7XG4gICQuYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbiAgJC5pbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1pbnB1dG1hc2ssIGlucHV0Jyk7XG5cbiAgLy8gQ29uZmlnXG4gIHZhciBjb25maWcgPSB7XG4gICAgbWFza3M6IHtcbiAgICAgIGNwZjoge1xuICAgICAgICBtYXNrOiAnMDAwLjAwMC4wMDAtMDAnLFxuICAgICAgfSxcbiAgICAgIGNucGo6IHtcbiAgICAgICAgbWFzazogJzAwLjAwMC4wMDAvMDAwMC0wMCcsXG4gICAgICB9LFxuICAgICAgJ2NwZi1jbnBqJzoge1xuICAgICAgICBtYXNrOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWFzazogJzAwMC4wMDAuMDAwLTAwJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1hc2s6ICcwMC4wMDAuMDAwLzAwMDAtMDAnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAgcmc6IHtcbiAgICAgICAgbWFzazogJzAwLjAwMC4wMDAtWypdJyxcbiAgICAgIH0sXG4gICAgICBiaW46IHtcbiAgICAgICAgbWFzazogJzAwMDAgMDAnLFxuICAgICAgfSxcbiAgICAgICdhY3RpdmF0aW9uLWNvZGUnOiB7XG4gICAgICAgIG1hc2s6ICcwMDAwMDAnLFxuICAgICAgfSxcbiAgICAgIGNhcnRhbzoge1xuICAgICAgICBtYXNrOiAnMDAwMCAwMDAwIDAwMDAgMDAwMCcsXG4gICAgICB9LFxuICAgICAgY2VwOiB7XG4gICAgICAgIG1hc2s6ICcwMC4wMDAtMDAwJyxcbiAgICAgIH0sXG4gICAgICB0ZWw6IHtcbiAgICAgICAgbWFzazogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1hc2s6ICcoMDApIDAwMDAtMDAwMCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtYXNrOiAnKDAwKSBbMF0wMDAwLTAwMDAnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBtYXNrOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWFzazogJzAwLzAwLzAwMDAnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgLy8ge1xuICAgICAgICAgIC8vICAgbWFzazogRGF0ZSxcbiAgICAgICAgICAvLyAgIC8vIG7Do28gZnVuY2lvbmEgY29tIC8gb3UgLVxuICAgICAgICAgIC8vICAgcGF0dGVybjogJ2QubS5ZJyxcbiAgICAgICAgICAvLyAgIGdyb3Vwczoge1xuICAgICAgICAgIC8vICAgICBkOiBuZXcgSU1hc2suTWFza2VkUGF0dGVybi5Hcm91cC5SYW5nZShbMSwgMzFdKSxcbiAgICAgICAgICAvLyAgICAgbTogbmV3IElNYXNrLk1hc2tlZFBhdHRlcm4uR3JvdXAuUmFuZ2UoWzEsIDEyXSksXG4gICAgICAgICAgLy8gICAgIFk6IG5ldyBJTWFzay5NYXNrZWRQYXR0ZXJuLkdyb3VwLlJhbmdlKFsxOTAwLCA5OTk5XSksXG4gICAgICAgICAgLy8gICB9LFxuICAgICAgICAgIC8vICAgbGF6eTogZmFsc2UsXG4gICAgICAgICAgLy8gfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICBkYXRhcmFuZ2U6IHtcbiAgICAgICAgbWFzazogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1hc2s6ICcwMC8wMC8wMDAwIC0gMDAvMDAvMDAwMCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgICAvLyB7XG4gICAgICAgICAgLy8gICBtYXNrOiBEYXRlLFxuICAgICAgICAgIC8vICAgLy8gbsOjbyBmdW5jaW9uYSBjb20gLyBvdSAtXG4gICAgICAgICAgLy8gICBwYXR0ZXJuOiAnZC5tLlknLFxuICAgICAgICAgIC8vICAgZ3JvdXBzOiB7XG4gICAgICAgICAgLy8gICAgIGQ6IG5ldyBJTWFzay5NYXNrZWRQYXR0ZXJuLkdyb3VwLlJhbmdlKFsxLCAzMV0pLFxuICAgICAgICAgIC8vICAgICBtOiBuZXcgSU1hc2suTWFza2VkUGF0dGVybi5Hcm91cC5SYW5nZShbMSwgMTJdKSxcbiAgICAgICAgICAvLyAgICAgWTogbmV3IElNYXNrLk1hc2tlZFBhdHRlcm4uR3JvdXAuUmFuZ2UoWzE5MDAsIDk5OTldKSxcbiAgICAgICAgICAvLyAgIH0sXG4gICAgICAgICAgLy8gICBsYXp5OiBmYWxzZSxcbiAgICAgICAgICAvLyB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIGRpYToge1xuICAgICAgICBtYXNrOiBOdW1iZXIsXG4gICAgICAgIG1pbjogMCxcbiAgICAgICAgbWF4OiAzMSxcbiAgICAgIH0sXG4gICAgICBtZXM6IHtcbiAgICAgICAgbWFzazogTnVtYmVyLFxuICAgICAgICBtaW46IDAsXG4gICAgICAgIG1heDogMTIsXG4gICAgICB9LFxuICAgICAgYW5vOiB7XG4gICAgICAgIG1hc2s6IE51bWJlcixcbiAgICAgICAgbWluOiAwLFxuICAgICAgICBtYXg6IDk5OTksXG4gICAgICB9LFxuICAgICAgLyogTsOjbyB1dGlsaXphZG8sIHZlcnPDo28gY29tIGNhbXBvIGRlIGRpZ2l0YcOnw6NvIGVycmFkYVxuICAgICAgICBkaW1kaW06IHtcbiAgICAgICAgICBtYXNrOiAnWzAwMC4wMDAuMDAwLjAwMC4wMF0wLDAwJyxcbiAgICAgICAgfSxcbiAgICAgICovXG4gICAgICBkaW5oZWlybzoge1xuICAgICAgICBwcmVmZml4OiAnJyxcbiAgICAgICAgc3VmZml4OiAnJyxcbiAgICAgICAgZml4ZWQ6IHRydWUsXG4gICAgICAgIGZyYWN0aW9uRGlnaXRzOiAyLFxuICAgICAgICBkZWNpbWFsU2VwYXJhdG9yOiAnLCcsXG4gICAgICAgIHRob3VzYW5kc1NlcGFyYXRvcjogJy4nLFxuICAgICAgICBhdXRvQ29tcGxldGVEZWNpbWFsOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBudW06IHtcbiAgICAgICAgbWFzazogJzAnLFxuICAgICAgfSxcbiAgICAgIHBvcmNlbnRhZ2VtOiB7XG4gICAgICAgIG1hc2s6ICcwWzAwXSUnLFxuICAgICAgfSxcbiAgICAgIGFsdHVyYToge1xuICAgICAgICBtYXNrOiAnWzAwMF0sYFswMF0nLFxuICAgICAgfSxcbiAgICAgIHBlc286IHtcbiAgICAgICAgbWFzazogJ1swMDBdLGBbMDBdJyxcbiAgICAgIH0sXG4gICAgICBwbGFjYWNhcnJvOiB7XG4gICAgICAgIG1hc2s6ICdhYWF7LX0wMDAwJyxcbiAgICAgIH0sXG4gICAgICBkZGQ6IHtcbiAgICAgICAgbWFzazogJzAwJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB0ZXN0ZToge31cbiAgfTtcblxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKCQuaW5wdXQsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgbWFza1BhdHRlcm4oZWwpO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBtYXNrUGF0dGVybiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgdmFyIG1hc2tDb25maWcgPSBjb25maWcubWFza3NbZWxlbWVudC5kYXRhc2V0Lm1hc2tdO1xuICAgIHZhciBjYjtcbiAgICB2YXIgbWFzaztcblxuICAgIGlmICghbWFza0NvbmZpZykgcmV0dXJuO1xuXG4gICAgY2IgPSBtYXNrQ29uZmlnLmNiID8gbWFza0NvbmZpZy5jYiA6IG51bGw7XG5cbiAgICBpZiAoZWxlbWVudC5kYXRhc2V0Lm1hc2sgPT09ICdkaW5oZWlybycpIHtcbiAgICAgIGVsZW1lbnQudmFsdWUgPSBTaW1wbGVNYXNrTW9uZXkuc2V0TWFzayhlbGVtZW50LCBtYXNrQ29uZmlnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFtYXNrQ29uZmlnLm1hc2spIHJldHVybjtcbiAgICAgIG1hc2sgPSBuZXcgSU1hc2soZWxlbWVudCwgbWFza0NvbmZpZyk7XG4gICAgfVxuXG4gICAgY29uZmlnLnRlc3RlW2VsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpXSA9IG1hc2s7XG5cbiAgICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSBjYihlbGVtZW50LCBtYXNrLCBtYXNrQ29uZmlnKTtcbiAgfTtcblxuICB2YXIgZGVzdHJveU1hc2sgPSBmdW5jdGlvbihlbCkge1xuICAgIHZhciBpZCA9IGVsLmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICB2YXIgdW5tYXNrZWQgPSAgY29uZmlnLnRlc3RlW2lkXS51bm1hc2tlZFZhbHVlO1xuXG4gICAgY29uZmlnLnRlc3RlW2lkXS5kZXN0cm95KCk7XG4gICAgZWwudmFsdWUgPSB1bm1hc2tlZDtcbiAgfVxuXG4gIHZhciB1cGRhdGVNYXNrID0gZnVuY3Rpb24oZWwpIHtcbiAgICBtYXNrUGF0dGVybihlbCk7XG4gIH1cblxuICB2YXIgY3JlYXRlTWFzayA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgbWFza1BhdHRlcm4oZWwpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBjb25maWc6IGNvbmZpZyxcbiAgICBjcmVhdGU6IGNyZWF0ZU1hc2ssXG4gICAgZGVzdHJveTogZGVzdHJveU1hc2ssXG4gICAgaW5pdDogaW5pdCxcbiAgICB1cGRhdGU6IHVwZGF0ZU1hc2tcbiAgfTtcbn0oKSk7XG5cbi8qKlxuICogSW5pdCBJbnB1dE1hc2tzIENvbnN0cnVjdG9yXG4gKiBAcmV0dXJuIHt2b2lkfSBIZWFkZXIuaW5pdCgpO1xuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLWlucHV0bWFzaywgaW5wdXQnKS5sZW5ndGgpIHtcbiAgICBJbnB1dE1hc2tzLmluaXQoKTtcbiAgfVxufSk7XG4iLCIvKipcbiAqIENyaWEgdW1hIG5vdmEgaW5zdMOibmNpYSBkbyBHb29nbGUgTWFwcyBwYXJhIHNlciBleGliaWRvIG5hIHDDoWdpbmFcbiAqIEBwYXJhbSB7RWxlbWVudH0gbWFwRWxlbWVudCBFbGVtZW50byBxdWUgaXLDoSBleGliaXIgbyBtYXBhLlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZXRvIGNvbSBhcyBvcMOnw7VlcyBkZSBjb25maWd1cmHDp8OjbyBkbyBtYXBhLlxuICogQ29udMOpbSBsb2NhdGlvbnMgZSBtYXBPcHRpb25zXG4gKi9cblxuLyogdmFyIG9wdGlvbnMgPSB7XG4gIC8vIGFsdHVyYSBkbyBtYXBhIGVtIHBpeGVsc1xuICBtYXBIZWlnaHQ6IDUwMCxcbiAgbG9jYXRpb25zOiBbXG4gICAge1xuICAgICAgLy8gaWQgZG8gZWxlbWVudG8gSFRNTCByZWxhY2lvbmFkbyDDoCBsb2NhbGlkYWRlIGV4aWJpZGEgbm8gbWFwYVxuICAgICAgaWQ6IDAsXG4gICAgICAvLyBsYXRpdHVkZSBkYSBsb2NhbGlkYWRlXG4gICAgICBsYXQ6IC0yNS40MjgxODMsXG4gICAgICAvLyBsb25naXR1ZGUgZGEgbG9jYWxpZGFkZVxuICAgICAgbG5nOiAtNDkuMjY3MDczLFxuICAgICAgLy8gZnVuw6fDo28gdXNhZGEgYW8gY2xpY2FyIG5vIG1hcmtlciBubyBtYXBhXG4gICAgICBmbjogZnVuY3Rpb24gKCkgeyByZXR1cm4gc29tZUZ1bmN0aW9uKCk7IH0sXG4gICAgICAvLyBwZXF1ZW5vIG1vZGFsIGV4aWJpZG8gYW8gY2xpY2FyIG5vIG1hcmtlciBubyBtYXBhXG4gICAgICBpbmZvV2luZG93OiB7XG4gICAgICAgIHNob3c6IGZhbHNlLFxuICAgICAgICB0aXRsZTogJ1TDrXR1bG8gMScsXG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IDEsXG4gICAgICBsYXQ6IC0yNS40MzAyMDksXG4gICAgICBsbmc6IC00OS4yNjQ2NDYsXG4gICAgICBmbjogZnVuY3Rpb24gKCkgeyByZXR1cm4gc29tZUZ1bmN0aW9uKDApOyB9LFxuICAgICAgaW5mb1dpbmRvdzoge1xuICAgICAgICBzaG93OiBmYWxzZSxcbiAgICAgICAgdGl0bGU6ICdUw610dWxvIDInLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAyLFxuICAgICAgbGF0OiAtMjUuNDMxNzYyLFxuICAgICAgbG5nOiAtNDkuMjcwMzg1LFxuICAgICAgZm46IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNvbWVGdW5jdGlvbigwKTsgfSxcbiAgICAgIGluZm9XaW5kb3c6IHtcbiAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgIHRpdGxlOiAnVMOtdHVsbyAzJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgXSxcbiAgLy8gb2JqZXRvIGNvbSBvcMOnw7VlcyBkbyBHb29nbGUgTWFwc1xuICBtYXBPcHRpb25zOiB7XG4gICAgem9vbTogMTQsXG4gICAgY2VudGVyOiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKC0yNS40Mjc3MDIsIC00OS4yNjUxNTkpLFxuICAgIG1hcFR5cGVJZDogZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVAsXG4gIH0sXG59O1xuXG5Cc01hcHMuaW5pdChtYXBFbGVtZW50LCBvcHRpb25zKTsgKi9cblxudmFyIEJzTWFwcyA9IChmdW5jdGlvbiAoKSB7XG4gIHZhciBjb25maWcgPSB7XG4gICAgLy8gaW5kaWNhIHNlIG8gbWFya2VyIGVzdMOhIHNlbGVjaW9uYWRvXG4gICAgc2VsZWN0ZWRNYXJrZXI6IGZhbHNlLFxuICAgIGluZm9XaW5kb3c6IG51bGwsXG4gICAgaWNvbnM6IHtcbiAgICAgIHBhdGg6ICdhc3NldHMvaW1nL2ljb25zLycsXG4gICAgICBtYXJrZXI6ICdtYXAtbWFya2VyLnN2ZycsXG4gICAgICBzZWxlY3RlZE1hcmtlcjogJ21hcC1tYXJrZXItc2VsZWN0ZWQuc3ZnJyxcbiAgICAgIHNpemU6IHtcbiAgICAgICAgaGVpZ2h0OiAzMixcbiAgICAgICAgd2lkdGg6IDIwLFxuICAgICAgfSxcbiAgICB9LFxuICAgIG1hcDogbnVsbCxcbiAgICBvcHRpb25zOiBudWxsLFxuICAgIGJvdW5kczogbnVsbCxcbiAgICBnZW9jb2RlcjogbnVsbCxcbiAgfTtcblxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uIChtYXBFbGVtZW50LCBvcHRpb25zKSB7XG5cbiAgICBpZiAob3B0aW9ucykgY29uZmlnLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIGlmIChtYXBFbGVtZW50KSB7XG4gICAgICAvLyBDcmlhIHVtYSBub3ZhIGluc3TDom5jaWEgZG8gR29vZ2xlIE1hcHNcbiAgICAgIGNvbmZpZy5tYXAgPSBjcmVhdGVNYXAobWFwRWxlbWVudCwgb3B0aW9ucy5tYXBPcHRpb25zKTtcbiAgICAgIGNvbmZpZy5ib3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKCk7XG4gICAgICBjb25maWcuZ2VvY29kZXIgPSBuZXcgZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTtcbiAgICAgIHdpbmRvdy5tYXBUZXN0ZSA9IGNvbmZpZy5tYXA7XG5cbiAgICAgIC8vIERlZmluZSBhIGFsdHVyYSBkbyBtYXBhXG4gICAgICBpZiAob3B0aW9ucy5tYXBIZWlnaHQpIHtcbiAgICAgICAgbWFwRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBvcHRpb25zLm1hcEhlaWdodCArICdweCc7XG4gICAgICB9XG5cbiAgICAgIC8vIEluc2VyZSBvcyBtYXJjYWRvcmVzXG4gICAgICBpZiAob3B0aW9ucy5sb2NhdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgIG9wdGlvbnMubG9jYXRpb25zLmZvckVhY2goZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG4gICAgICAgICAgaWYgKGxvY2F0aW9uLmFkZHJlc3MpIHtcbiAgICAgICAgICAgIGNvbmZpZy5nZW9jb2Rlci5nZW9jb2RlKHtcbiAgICAgICAgICAgICAgYWRkcmVzczogbG9jYXRpb24uYWRkcmVzcyArICcsIEJyYXNpbCcsXG4gICAgICAgICAgICAgIHJlZ2lvbjogJ0JSJyxcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXN1bHRzLCBzdGF0dXMpIHtcbiAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PSBnb29nbGUubWFwcy5HZW9jb2RlclN0YXR1cy5PSykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgdmFyIGxhdGl0dWRlID0gcmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbi5sYXQoKTtcbiAgICAgICAgICAgICAgICAgIHZhciBsb25naXR1ZGUgPSByZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLmxuZygpO1xuXG4gICAgICAgICAgICAgICAgICBsb2NhdGlvbi5sYXQgPSBsYXRpdHVkZTtcbiAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmxuZyA9IGxvbmdpdHVkZTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBhZGRNYXJrZXIoY29uZmlnLm1hcCwgbG9jYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFkZE1hcmtlcihjb25maWcubWFwLCBsb2NhdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIGFqdXN0Q2VudGVyWm9vbSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbG9jYXRpb25zID0gY29uZmlnLm9wdGlvbnMubG9jYXRpb25zO1xuICAgIGlmIChsb2NhdGlvbnMubGVuZ3RoID4gMSkge1xuICAgICAgaWYgKGNvbmZpZy5ib3VuZHMpIHtcbiAgICAgICAgY29uZmlnLm1hcC5maXRCb3VuZHMoY29uZmlnLmJvdW5kcyk7IC8vIGF1dG8tem9vbVxuICAgICAgICBjb25maWcubWFwLnBhblRvQm91bmRzKGNvbmZpZy5ib3VuZHMpOyAvLyBhdXRvLWNlbnRlclxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25maWcubWFwLnNldENlbnRlcihuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxvY2F0aW9uc1swXS5sYXQsIGxvY2F0aW9uc1swXS5sbmcpKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENyaWEgdW1hIG5vdmEgaW5zdMOibmNpYSBkbyBtYXBhXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gbWFwRWxlbWVudCBET00gZWxlbWVudCBkbyBtYXBhXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBtYXBPcHRpb25zIE9ww6fDtWVzIGRlIGluaWNpYWxpemHDp8OjbyBkbyBHb29nbGUgTWFwc1xuICAgKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9tYXBzL2RvY3VtZW50YXRpb24vamF2YXNjcmlwdC90dXRvcmlhbCNNYXBPcHRpb25zXG4gICAqIEByZXR1cm4ge09iamVjdH0gSW5zdMOibmNpYSBkbyBHb29nbGUgTWFwc1xuICAqL1xuICB2YXIgY3JlYXRlTWFwID0gZnVuY3Rpb24gKG1hcEVsZW1lbnQsIG1hcE9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IGdvb2dsZS5tYXBzLk1hcChtYXBFbGVtZW50LCBtYXBPcHRpb25zKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRpY2lvbmEgdW0gbWFya2VyIChwaW4pIG5vIG1hcGFcbiAgICogQHBhcmFtIHtPYmplY3R9IG1hcCAgICAgIEluc3TDom5jaWEgZG8gR29vZ2xlIE1hcHNcbiAgICogQHBhcmFtIHtBcnJheX0gIGxvY2F0aW9uIFTDrXR1bG8sIGxhdGl0dWRlIGUgbG9uZ2l0dWRlIGRvIG1hcmtlclxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWNvbiAgICAgSW1hZ2VtXG4gICovXG4gIHZhciBhZGRNYXJrZXIgPSBmdW5jdGlvbiAobWFwLCBsb2NhdGlvbiwgaWNvbikge1xuICAgIHZhciBtYXJrZXI7XG4gICAgdmFyIGluZm9XaW5kb3cgPSBudWxsO1xuXG4gICAgaWYgKGljb24pIGNvbmZpZy5pY29ucy5tYXJrZXIgPSBpY29uO1xuXG4gICAgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICBwb3NpdGlvbjogbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbi5sYXQsIGxvY2F0aW9uLmxuZyksXG4gICAgICBtYXA6IG1hcCxcbiAgICAgIGljb246IHtcbiAgICAgICAgdXJsOiBjb25maWcuaWNvbnMucGF0aCArIGNvbmZpZy5pY29ucy5tYXJrZXIsXG4gICAgICAgIC8vIHVzYXIgc2NhbGVkU2l6ZSBlbSB0b2RvIHNldEljb24oKVxuICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZShjb25maWcuaWNvbnMuc2l6ZS53aWR0aCwgY29uZmlnLmljb25zLnNpemUuaGVpZ2h0KSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBjb25maWcuYm91bmRzLmV4dGVuZChuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxvY2F0aW9uLmxhdCwgbG9jYXRpb24ubG5nKSk7XG4gICAgYWp1c3RDZW50ZXJab29tKCk7XG5cbiAgICBpZiAobG9jYXRpb24uaW5mb1dpbmRvdykge1xuICAgICAgaW5mb1dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KHtcbiAgICAgICAgY29udGVudDogbG9jYXRpb24uaW5mb1dpbmRvdy50aXRsZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChsb2NhdGlvbi5mbiB8fCBpbmZvV2luZG93KSB7XG4gICAgICBtYXJrZXIuYWRkTGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoaW5mb1dpbmRvdykge1xuICAgICAgICAgIHVwZGF0ZUFjdGl2ZUluZm9XaW5kb3coaW5mb1dpbmRvdyk7XG4gICAgICAgICAgaW5mb1dpbmRvdy5jbG9zZSgpO1xuICAgICAgICAgIGluZm9XaW5kb3cub3BlbihtYXAsIG1hcmtlcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobG9jYXRpb24uZm4pIHtcbiAgICAgICAgICBsb2NhdGlvbi5mbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RvZ2dsZVNlbGVjdGVkTWFya2VySWNvbih0aGlzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvLyBEZWl4YSBvdSByZXRpcmEgbyBNYXJrZXIgY29tbyBzZWxlY2lvbmFkb1xuICB2YXIgX3RvZ2dsZVNlbGVjdGVkTWFya2VySWNvbiA9IGZ1bmN0aW9uIChtYXJrZXIpIHtcbiAgICBpZiAoY29uZmlnLnNlbGVjdGVkTWFya2VyKSB7XG4gICAgICBjb25maWcuc2VsZWN0ZWRNYXJrZXIuc2V0SWNvbih7XG4gICAgICAgIHVybDogY29uZmlnLmljb25zLnBhdGggKyBjb25maWcuaWNvbnMubWFya2VyLFxuICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZShjb25maWcuaWNvbnMuc2l6ZS53aWR0aCwgY29uZmlnLmljb25zLnNpemUuaGVpZ2h0KSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG1hcmtlci5zZXRJY29uKHtcbiAgICAgIHVybDogY29uZmlnLmljb25zLnBhdGggKyBjb25maWcuaWNvbnMuc2VsZWN0ZWRNYXJrZXIsXG4gICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZShjb25maWcuaWNvbnMuc2l6ZS53aWR0aCwgY29uZmlnLmljb25zLnNpemUuaGVpZ2h0KSxcbiAgICB9KTtcbiAgICBjb25maWcuc2VsZWN0ZWRNYXJrZXIgPSBtYXJrZXI7XG4gIH07XG5cbiAgLy8gQ3JpYSB1bWEgbm92YSBJbmZvV2luZG93XG4gIHZhciB1cGRhdGVBY3RpdmVJbmZvV2luZG93ID0gZnVuY3Rpb24gKGluZm9XaW5kb3cpIHtcbiAgICBpZiAoY29uZmlnLmluZm9XaW5kb3cpIGNvbmZpZy5pbmZvV2luZG93LmNsb3NlKCk7XG4gICAgY29uZmlnLmluZm9XaW5kb3cgPSBpbmZvV2luZG93O1xuICB9O1xuXG4gIC8qKlxuICAgKiBPYnTDqW0gYSBsb2NhbGl6YcOnw6NvIGF0dWFsIGRvIHVzdcOhcmlvIHZpYSBIVE1MNVxuICAgKiBAcGFyYW0ge09iamVjdH0gbWFwIEluc3TDom5jaWEgZG8gR29vZ2xlIE1hcHNcbiAgICogQHJldHVybiB7QXJyYXl9IExhdGl0dWRlIGUgbG9uZ2l0dWRlXG4gICovXG4gIHZhciBnZXRVc2VyTG9jYXRpb24gPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgaWYgKG5hdmlnYXRvci5nZW9sb2NhdGlvbikge1xuICAgICAgcmV0dXJuIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbGF0OiBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUsXG4gICAgICAgICAgbG5nOiBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlLFxuICAgICAgICB9O1xuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBoYW5kbGVMb2NhdGlvbkVycm9yKG1hcCwgdHJ1ZSwgbWFwLmdldENlbnRlcigpKTtcbiAgICAgICAgcmV0dXJuICdFcnJvOiBPIHNlcnZpw6dvIGRlIGdlb2xvY2FsaXphw6fDo28gZmFsaG91Lic7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICdFcnJvOiBPIHNldSBuYXZlZ2Fkb3IgbsOjbyBwb3NzdWkgc3Vwb3J0ZSDDoCBnZW9sb2NhbGl6YcOnw6NvLic7XG4gICAgICAvLyBCcm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBHZW9sb2NhdGlvblxuICAgICAgLy8gaGFuZGxlTG9jYXRpb25FcnJvcihtYXAsIGZhbHNlLCBtYXAuZ2V0Q2VudGVyKCkpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgZ2V0Q29vcmRpbmF0ZXNGcm9tQWRkcmVzcyA9IGZ1bmN0aW9uIChhZGRyZXNzKSB7XG4gICAgdmFyIGdlb2NvZGVyID0gbmV3IGdvb2dsZS5tYXBzLkdlb2NvZGVyKCk7XG5cbiAgICBnZW9jb2Rlci5nZW9jb2RlKHsgYWRkcmVzczogYWRkcmVzcyB9LCBmdW5jdGlvbiAocmVzdWx0cywgc3RhdHVzKSB7XG4gICAgICBpZiAoc3RhdHVzID09PSBnb29nbGUubWFwcy5HZW9jb2RlclN0YXR1cy5PSykge1xuICAgICAgICB2YXIgcG9zID0ge1xuICAgICAgICAgIGxhdDogcmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbi5sYXQoKSxcbiAgICAgICAgICBsbmc6IHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24ubG5nKCksXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBwb3M7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cblxuICByZXR1cm4ge1xuICAgIGluaXQ6IGluaXQsXG4gICAgYWRkTWFya2VyOiBhZGRNYXJrZXIsXG4gICAgY3JlYXRlTWFwOiBjcmVhdGVNYXAsXG4gICAgZ2V0Q29vcmRpbmF0ZXNGcm9tQWRkcmVzczogZ2V0Q29vcmRpbmF0ZXNGcm9tQWRkcmVzcyxcbiAgfTtcbn0oKSk7XG4iLCJpZiAoIU9iamVjdC52YWx1ZXMpIHtcbiAgT2JqZWN0LnZhbHVlcyA9IGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG8pLm1hcChmdW5jdGlvbiAoaykge1xuICAgICAgcmV0dXJuIG9ba107XG4gICAgfSk7XG4gIH07XG59XG4iLCIvLyBVc2UgaW4gTGlnaHRQaWNrXG5pZiAoIU9iamVjdC5hc3NpZ24pIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE9iamVjdCwgJ2Fzc2lnbicsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgdmFsdWU6IGZ1bmN0aW9uKHRhcmdldCkge1xuICAgICAgJ3VzZSBzdHJpY3QnO1xuICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCBmaXJzdCBhcmd1bWVudCB0byBvYmplY3QnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRvID0gT2JqZWN0KHRhcmdldCk7XG4gICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbmV4dFNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgaWYgKG5leHRTb3VyY2UgPT09IHVuZGVmaW5lZCB8fCBuZXh0U291cmNlID09PSBudWxsKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgbmV4dFNvdXJjZSA9IE9iamVjdChuZXh0U291cmNlKTtcblxuICAgICAgICB2YXIga2V5c0FycmF5ID0gT2JqZWN0LmtleXMoT2JqZWN0KG5leHRTb3VyY2UpKTtcbiAgICAgICAgZm9yICh2YXIgbmV4dEluZGV4ID0gMCwgbGVuID0ga2V5c0FycmF5Lmxlbmd0aDsgbmV4dEluZGV4IDwgbGVuOyBuZXh0SW5kZXgrKykge1xuICAgICAgICAgIHZhciBuZXh0S2V5ID0ga2V5c0FycmF5W25leHRJbmRleF07XG4gICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG5leHRTb3VyY2UsIG5leHRLZXkpO1xuICAgICAgICAgIGlmIChkZXNjICE9PSB1bmRlZmluZWQgJiYgZGVzYy5lbnVtZXJhYmxlKSB7XG4gICAgICAgICAgICB0b1tuZXh0S2V5XSA9IG5leHRTb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdG87XG4gICAgfVxuICB9KTtcbn07XG5cbihmdW5jdGlvbiAoYXJyKSB7XG4gIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ3JlbW92ZScpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdGVtLCAncmVtb3ZlJywge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pKFtFbGVtZW50LnByb3RvdHlwZSwgQ2hhcmFjdGVyRGF0YS5wcm90b3R5cGUsIERvY3VtZW50VHlwZS5wcm90b3R5cGVdKTtcblxuaWYgKCFBcnJheS5wcm90b3R5cGUuaW5jbHVkZXMpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2luY2x1ZGVzJywge1xuICAgIHZhbHVlOiBmdW5jdGlvbihzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpIHtcblxuICAgICAgLy8gMS4gTGV0IE8gYmUgPyBUb09iamVjdCh0aGlzIHZhbHVlKS5cbiAgICAgIGlmICh0aGlzID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJ0aGlzXCIgaXMgbnVsbCBvciBub3QgZGVmaW5lZCcpO1xuICAgICAgfVxuXG4gICAgICB2YXIgbyA9IE9iamVjdCh0aGlzKTtcblxuICAgICAgLy8gMi4gTGV0IGxlbiBiZSA/IFRvTGVuZ3RoKD8gR2V0KE8sIFwibGVuZ3RoXCIpKS5cbiAgICAgIHZhciBsZW4gPSBvLmxlbmd0aCA+Pj4gMDtcblxuICAgICAgLy8gMy4gSWYgbGVuIGlzIDAsIHJldHVybiBmYWxzZS5cbiAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyA0LiBMZXQgbiBiZSA/IFRvSW50ZWdlcihmcm9tSW5kZXgpLlxuICAgICAgLy8gICAgKElmIGZyb21JbmRleCBpcyB1bmRlZmluZWQsIHRoaXMgc3RlcCBwcm9kdWNlcyB0aGUgdmFsdWUgMC4pXG4gICAgICB2YXIgbiA9IGZyb21JbmRleCB8IDA7XG5cbiAgICAgIC8vIDUuIElmIG4g4omlIDAsIHRoZW5cbiAgICAgIC8vICBhLiBMZXQgayBiZSBuLlxuICAgICAgLy8gNi4gRWxzZSBuIDwgMCxcbiAgICAgIC8vICBhLiBMZXQgayBiZSBsZW4gKyBuLlxuICAgICAgLy8gIGIuIElmIGsgPCAwLCBsZXQgayBiZSAwLlxuICAgICAgdmFyIGsgPSBNYXRoLm1heChuID49IDAgPyBuIDogbGVuIC0gTWF0aC5hYnMobiksIDApO1xuXG4gICAgICAvLyA3LiBSZXBlYXQsIHdoaWxlIGsgPCBsZW5cbiAgICAgIHdoaWxlIChrIDwgbGVuKSB7XG4gICAgICAgIC8vIGEuIExldCBlbGVtZW50SyBiZSB0aGUgcmVzdWx0IG9mID8gR2V0KE8sICEgVG9TdHJpbmcoaykpLlxuICAgICAgICAvLyBiLiBJZiBTYW1lVmFsdWVaZXJvKHNlYXJjaEVsZW1lbnQsIGVsZW1lbnRLKSBpcyB0cnVlLCByZXR1cm4gdHJ1ZS5cbiAgICAgICAgLy8gYy4gSW5jcmVhc2UgayBieSAxLlxuICAgICAgICAvLyBOT1RFOiA9PT0gcHJvdmlkZXMgdGhlIGNvcnJlY3QgXCJTYW1lVmFsdWVaZXJvXCIgY29tcGFyaXNvbiBuZWVkZWQgaGVyZS5cbiAgICAgICAgaWYgKG9ba10gPT09IHNlYXJjaEVsZW1lbnQpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBrKys7XG4gICAgICB9XG5cbiAgICAgIC8vIDguIFJldHVybiBmYWxzZVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIC8vIFVzZSBpbiBMaWdodFBpY2tcbi8vIGlmICghU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoKSB7XG4vLyAgIFN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aCA9IGZ1bmN0aW9uKHNlYXJjaFN0cmluZywgcG9zaXRpb24pIHtcbi8vICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uIHx8IDA7XG4vLyAgICAgcmV0dXJuIHRoaXMuaW5kZXhPZihzZWFyY2hTdHJpbmcsIHBvc2l0aW9uKSA9PT0gcG9zaXRpb247XG4vLyAgIH07XG4vLyB9OyIsIi8qKlxuICogU2hpZnQtc2VsZWN0IE11bHRpcGxlIEl0ZW1zXG4gKiBTZWxlY3QgYWxsIGNoZWNrYm94ZXMgYmV0d2VlbiBsYXN0Q2hlY2tlZCBhbmQgY3VycmVudENoZWNrZWQgaWZcbiAqIHNoaWZ0S2V5IGlzIHByZXNzZWQgZHVyaW5nIGNsaWNrXG4gKlxuICogQFVzZSB0aGUgZnVuY3Rpb24gcmVjZWl2ZSBhbiBhcnJheSBvZiBjaGVja2JveGVzXG4gKiBhbmQgYWN0aXZlIHRoZSBzaGlmdFNlbGVjdCBvbmx5IGZvciB0aGlzIGFycmF5XG4gKlxuICogQHBhcmFtIHtBcnJheX0gY2hlY2tib3hlcyAgYW4gYXJyYXkgb2YgY2hlY2tib3ggRE9NIGVsZW1lbnRzXG4gKi9cbnZhciBzaGlmdFNlbGVjdE11bHRpcGxlQ2hlY2tib3hlcyA9IGZ1bmN0aW9uIChjaGVja2JveGVzKSB7XG4gIHZhciBjb25maWcgPSB7XG4gICAgbGFzdElucHV0Q2hlY2tlZDogbnVsbCxcbiAgfTtcblxuICAvKipcbiAgICogSW5pdFxuICAgKi9cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGNoZWNrYm94ZXMubGVuZ3RoKSB7XG4gICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNoZWNrYm94ZXMsIGZ1bmN0aW9uIChjaGVja2JveCkge1xuICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNoaWZ0U2VsZWN0KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogc2hpZnQgU2VsZWN0IG9uIENoYW5nZVxuICAgKiBAcGFyYW0gIHtPYmplY3R9IGUgIGEgY2xpY2sgZXZlbnQgaW4gYSBjaGVja2JveFxuICAgKi9cbiAgdmFyIHNoaWZ0U2VsZWN0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgaW5wdXQgPSBlLnRhcmdldDtcbiAgICB2YXIgc3RhcnQgPSBudWxsO1xuICAgIHZhciBlbmQgPSBudWxsO1xuXG4gICAgaWYgKChpbnB1dCB8fCB7fSkudHlwZSAhPT0gJ2NoZWNrYm94JykgcmV0dXJuO1xuXG4gICAgaWYgKCFjb25maWcubGFzdElucHV0Q2hlY2tlZCkge1xuICAgICAgY29uZmlnLmxhc3RJbnB1dENoZWNrZWQgPSBpbnB1dDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZS5zaGlmdEtleSkge1xuICAgICAgc3RhcnQgPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGNoZWNrYm94ZXMsIGNvbmZpZy5sYXN0SW5wdXRDaGVja2VkKTtcbiAgICAgIGVuZCA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoY2hlY2tib3hlcywgaW5wdXQpO1xuXG4gICAgICBpZiAoTWF0aC5hYnMoc3RhcnQgLSBlbmQpID4gMSkge1xuICAgICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoY2hlY2tib3hlcywgW1xuICAgICAgICAgIE1hdGgubWluKHN0YXJ0LCBlbmQpLFxuICAgICAgICAgIE1hdGgubWF4KHN0YXJ0LCBlbmQpICsgMSxcbiAgICAgICAgXSkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgIGl0ZW0uY2hlY2tlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbmZpZy5sYXN0SW5wdXRDaGVja2VkID0gaW5wdXQ7XG4gIH07XG5cbiAgaW5pdCgpO1xufTtcblxuLyoqXG4gKiBJbml0IE1vZGFsIENvbnN0cnVjdG9yXG4gKiBAcmV0dXJuIHt2b2lkfSBIZWFkZXIuaW5pdCgpO1xuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICB2YXIgc2VsZWN0b3JzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLXNoaWZ0LXNlbGVjdCcpO1xuICBpZiAoc2VsZWN0b3JzLmxlbmd0aCkge1xuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoc2VsZWN0b3JzLCBmdW5jdGlvbiAoc2VsZWN0aW9uKSB7XG4gICAgICB2YXIgY2hlY2tib3hlcyA9IHNlbGVjdGlvbi5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcbiAgICAgIGlmIChjaGVja2JveGVzLmxlbmd0aCkge1xuICAgICAgICBzaGlmdFNlbGVjdE11bHRpcGxlQ2hlY2tib3hlcyhjaGVja2JveGVzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSk7XG4iLCIvKipcbiAqIFNvcnQgdGFibGVcbiAqXG4gKiBSZWZlcmVuY2U6XG4gKiBodHRwczovL2dpdGh1Yi5jb20vdHJpc3Rlbi90YWJsZXNvcnRcbiAqL1xudmFyIEJzVGFibGVTb3J0ID0gKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAodGFibGUpIHtcbiAgICBpZiAodGFibGUpIFRhYmxlc29ydCh0YWJsZSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICB9O1xufSgpKTtcbiIsIi8qKlxuICogTXVsdGlsaW5lIHRleHQgRWxsaXBzaXMgKHNoYXZlLmpzKVxuICpcbiAqIFJlZmVyZW5jZTpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kb2xsYXJzaGF2ZWNsdWIvc2hhdmVcbiAqL1xudmFyIEJzVGV4dEVsbGlwc2lzID0gKGZ1bmN0aW9uICgpIHtcbiAgLy8gQ29uZmlnXG4gIHZhciBjb25maWcgPSB7XG4gICAgZWxlbWVudDogJycsXG4gICAgbWF4SGVpZ2h0OiBudWxsLFxuICB9O1xuXG4gIHZhciBpbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICBjb25maWcuZWxlbWVudCA9IG9wdGlvbnMuZWxlbWVudDtcbiAgICBjb25maWcubWF4SGVpZ2h0ID0gb3B0aW9ucy5tYXhIZWlnaHQ7XG4gICAgZWxsaXBzaXMoKTtcbiAgfTtcblxuICB2YXIgZWxsaXBzaXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgc2hhdmUoY29uZmlnLmVsZW1lbnQsIGNvbmZpZy5tYXhIZWlnaHQpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdCxcbiAgfTtcbn0oKSk7XG4iLCIvKipcbiAqIEJzIFRleHQgVHlwZXJcbiAqXG4gKiBSZWZlcmVuY2U6XG4gKiBodHRwczovL2NvZGVwZW4uaW8vaGktaW0tc2kvcGVuL0RIb3VwXG4gKiBbVE9ET10gSW1wcm92ZTogaHR0cHM6Ly9jb2RlcGVuLmlvL2RhbmllbGdyb2VuL3Blbi9WZVJQT3FcbiAqIFtUT0RPXSBFeHRlbmQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9uay1vL2phcmFsbGF4L2Jsb2IvbWFzdGVyL3NyYy9qYXJhbGxheC5qcyNMMjA2XG4gKi9cbnZhciBCc1RleHRUeXBlID0gKGZ1bmN0aW9uICgpIHtcbiAgLy8gQ29uZmlnXG4gIHZhciBjb25maWcgPSB7XG4gICAgdGV4dEFycjogbnVsbCxcbiAgICBlbDogbnVsbCxcbiAgICBsb29wTnVtOiAwLFxuICAgIHBhdXNlVGltZTogMjAwMCxcbiAgICB3cml0ZVRpbWU6IDEwMCxcbiAgICBkZWxUaW1lOiA1MCxcbiAgICB0eHQ6ICcnLFxuICAgIHRpY2s6IHRpY2ssXG4gICAgaXNEZWxldGluZzogZmFsc2UsXG4gICAgZnVsbFR4dDogJycsXG4gICAgdGFnOiAnJyxcbiAgICB0YWdOYW1lOiAnc3BhbicsXG4gICAgdGFnQ2xhc3M6ICcnLFxuICB9O1xuXG4gIHZhciBpbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICBjb25maWcudGV4dEFyciA9IG9wdGlvbnMudGV4dEFycjtcbiAgICBjb25maWcuZWwgPSBvcHRpb25zLmVsO1xuICAgIGNvbmZpZy5wYXVzZVRpbWUgPSBvcHRpb25zLnBhdXNlVGltZTtcbiAgICBjb25maWcuZWwuaW5uZXJIVE1MID0gJzwnICsgY29uZmlnLnRhZ05hbWUgKyAnIGNsYXNzPVwiYnMtdGV4dHR5cGUgJyArIGNvbmZpZy50YWdDbGFzcyArICdcIj48LycgKyBjb25maWcudGFnTmFtZSArICc+JztcbiAgICBjb25maWcudGFnID0gY29uZmlnLmVsLnF1ZXJ5U2VsZWN0b3IoJy5icy10ZXh0dHlwZScpO1xuICAgIHRpY2soKTtcbiAgfTtcblxuICB2YXIgdGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGVsdGEgPSBjb25maWcud3JpdGVUaW1lO1xuICAgIHZhciBpID0gY29uZmlnLmxvb3BOdW0gJSBjb25maWcudGV4dEFyci5sZW5ndGg7XG5cbiAgICBjb25maWcuZnVsbFR4dCA9IGNvbmZpZy50ZXh0QXJyW2ldO1xuXG4gICAgaWYgKGNvbmZpZy5pc0RlbGV0aW5nKSB7XG4gICAgICBjb25maWcudHh0ID0gY29uZmlnLmZ1bGxUeHQuc3Vic3RyaW5nKDAsIGNvbmZpZy50eHQubGVuZ3RoIC0gMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbmZpZy50eHQgPSBjb25maWcuZnVsbFR4dC5zdWJzdHJpbmcoMCwgY29uZmlnLnR4dC5sZW5ndGggKyAxKTtcbiAgICB9XG5cbiAgICBjb25maWcudGFnLmlubmVySFRNTCA9IGNvbmZpZy50eHQ7XG5cbiAgICBpZiAoY29uZmlnLmlzRGVsZXRpbmcpIHsgZGVsdGEgPSBjb25maWcuZGVsVGltZTsgfVxuXG4gICAgaWYgKCFjb25maWcuaXNEZWxldGluZyAmJiBjb25maWcudHh0ID09PSBjb25maWcuZnVsbFR4dCkge1xuICAgICAgZGVsdGEgPSBjb25maWcucGF1c2VUaW1lO1xuICAgICAgY29uZmlnLmlzRGVsZXRpbmcgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoY29uZmlnLmlzRGVsZXRpbmcgJiYgY29uZmlnLnR4dCA9PT0gJycpIHtcbiAgICAgIGNvbmZpZy5pc0RlbGV0aW5nID0gZmFsc2U7XG4gICAgICBjb25maWcubG9vcE51bSsrO1xuICAgICAgZGVsdGEgPSBjb25maWcud3JpdGVUaW1lO1xuICAgIH1cblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgdGljaygpO1xuICAgIH0sIGRlbHRhKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGluaXQ6IGluaXQsXG4gIH07XG59KCkpO1xuIiwiLyoqXG4gKiBGdW7Dp8OjbyBwYXJhIGNsaWNhciBlbSBib3TDtWVzIGUgZXhpYmlyIG8gY29udGXDumRvIHJlbGFjaW9uYWRvXG4qL1xudmFyIEJzVG9nZ2xlQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBvcHRpb25zOiB7XG4gICAgICAvLyBCb3TDtWVzIHF1ZSwgYW8gc2VyZW0gY2xpY2Fkb3MsIGV4aWJpcsOjbyBvIHJlc3BlY3Rpdm8gY29udGFpbmVyIGRlIGNvbnRlw7pkb1xuICAgICAgYnV0dG9uczogW10sXG4gICAgICAvLyBDb250YWluZXJlcyBkZSBjb250ZcO6ZG9cbiAgICAgIGNvbnRhaW5lcnM6IFtdLFxuICAgICAgLy8gQ2xhc3NlIENTUyBpbmRpY2FuZG8gcXVlIG8gYm90w6NvIGVzdMOhIGF0aXZvXG4gICAgICBhY3RpdmVCdXR0b25DbGFzczogJycsXG4gICAgICAvLyBDbGFzc2UgQ1NTIHBhcmEgZXhpYmlyIG8gY29udGFpbmVyXG4gICAgICBhY3RpdmVDb250YWluZXJDbGFzczogJycsXG4gICAgICAvLyBNw6l0b2RvIGRlIGF0aXZhw6fDo28gZGEgZnVuw6fDo286ICdjbGljaycgb3UgJ2hhc2hDaGFuZ2UnXG4gICAgICBtZXRob2Q6ICcnLFxuICAgICAgLy8gU2UgdmVyZGFkZWlybywgYSBww6FnaW5hIGlyw6EgZGFyIHNjcm9sbCBhdMOpIG9cbiAgICAgIC8vIGNvbnRlw7pkbyBhbyBkaXNwYXJhciBvIGV2ZW50byBkZSBzaG93Q29udGFpbmVyQ29udGVudFxuICAgICAgc2Nyb2xsVG9Db250ZW50OiBmYWxzZSxcbiAgICB9LFxuICB9O1xuXG4gIC8qKlxuICAgKiBJbmljaWFsaXphIGEgZnVuw6fDo29cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgb3DDp8O1ZXMgZGUgY29uZmlndXJhw6fDo29cbiAgKi9cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLmJ1dHRvbnMubGVuZ3RoID4gMCAmJiBvcHRpb25zLmNvbnRhaW5lcnMubGVuZ3RoID4gMCkge1xuICAgICAgY29uZmlnID0gb3B0aW9ucztcbiAgICAgIF9zaG93Q29udGVudE9uUGFnZUxvYWQoKTtcblxuICAgICAgaWYgKGNvbmZpZy5tZXRob2QgPT09ICdjbGljaycpIHtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuYnV0dG9ucywgZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciBjb250YWluZXJJZCA9IGJ1dHRvbi5kYXRhc2V0LmNvbnRlbnRCdXR0b247XG4gICAgICAgICAgICBpZiAoY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgICAgX2RlYWN0aXZhdGVCdXR0b25zKCk7XG4gICAgICAgICAgICAgIF9hY3RpdmF0ZUJ1dHRvbihidXR0b24pO1xuICAgICAgICAgICAgICBzaG93Q29udGFpbmVyQ29udGVudChjb250YWluZXJJZCk7XG4gICAgICAgICAgICAgIGlmIChjb25maWcuc2Nyb2xsVG9Db250ZW50KSBfc2Nyb2xsVG9Db250ZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChjb25maWcubWV0aG9kID09PSAnaGFzaENoYW5nZScpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGNvbnRhaW5lcklkID0gZ2V0SGFzaCgpO1xuICAgICAgICAgIGlmIChjb250YWluZXJJZCkge1xuICAgICAgICAgICAgc2hvd0NvbnRhaW5lckNvbnRlbnQoY29udGFpbmVySWQpO1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5zY3JvbGxUb0NvbnRlbnQpIF9zY3JvbGxUb0NvbnRlbnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgX3Njcm9sbFRvQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2Nyb2xsID0gbmV3IFNtb290aFNjcm9sbCgpO1xuICAgIHZhciBoYXNoID0gZ2V0SGFzaCgpO1xuXG4gICAgaWYgKGhhc2gpIHtcbiAgICAgIHZhciBjb250YWluZXJDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29udGVudC1jb250YWluZXI9XCInICsgaGFzaCArICdcIl0nKTtcbiAgICAgIGlmIChjb250YWluZXJDb250ZW50KSB7XG4gICAgICAgIHNjcm9sbC5hbmltYXRlU2Nyb2xsKGNvbnRhaW5lckNvbnRlbnQsIDAsIHtcbiAgICAgICAgICB1cGRhdGVVUkw6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEV4aWJlIG8gY29udGXDumRvIGNhc28gYSBoYXNoIGRhIFVSTCBjb3JyZXNwb25kYSBhIHVtIGNvbnRlw7pkbyBleGlzdGVudGUgbmEgcMOhZ2luYVxuICAqL1xuICB2YXIgX3Nob3dDb250ZW50T25QYWdlTG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY29udGFpbmVySWQgPSBnZXRIYXNoKCk7XG4gICAgaWYgKGNvbnRhaW5lcklkKSB7XG4gICAgICB2YXIgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvbnRlbnQtY29udGFpbmVyPVwiJyArIGNvbnRhaW5lcklkICsgJ1wiXScpO1xuICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgaGlkZUNvbnRhaW5lckNvbnRlbnQoY29uZmlnLmNvbnRhaW5lcnMpO1xuICAgICAgICBzaG93Q29udGFpbmVyQ29udGVudChjb250YWluZXJJZCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBBdGl2YSBvIGJvdGFvIGNsaWNhZG9cbiAgICogQHBhcmFtIHtFbGVtZW50fSBidXR0b24gQm90w6NvIHF1ZSByZWNlYmVyw6EgYSBjbGFzc2UgYXRpdmFcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFjdGl2ZUJ1dHRvbkNsYXNzIENsYXNzZSBDU1MgaW5kaWNhbmRvIHF1ZSBvIGJvdMOjbyBlc3TDoSBhdGl2b1xuICAqL1xuICB2YXIgX2FjdGl2YXRlQnV0dG9uID0gZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBjbGFzc2UgZGUgYXRpdmEgZGUgdG9kb3Mgb3MgYm90w7Vlc1xuICAgKiBAcGFyYW0ge0FycmF5fSBidXR0b25zIEJvdMO1ZXMgcXVlLCBhbyBzZXJlbSBjbGljYWRvcywgZXhpYmlyw6NvIG8gcmVzcGVjdGl2b1xuICAgKiBjb250YWluZXIgZGUgY29udGXDumRvXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhY3RpdmVCdXR0b25DbGFzcyBDbGFzc2UgQ1NTIGluZGljYW5kbyBxdWUgbyBib3TDo28gZXN0w6EgYXRpdm9cbiAgKi9cbiAgdmFyIF9kZWFjdGl2YXRlQnV0dG9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5idXR0b25zLCBmdW5jdGlvbiAoYnV0dG9uKSB7XG4gICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShjb25maWcuYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFeGliZSBvIGNvbnRlw7pkbyBkbyBjb250YWluZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRhaW5lcklkIElkIGRvIGNvbnRhaW5lciBhIHNlciBleGliaWRvXG4gICovXG4gIHZhciBzaG93Q29udGFpbmVyQ29udGVudCA9IGZ1bmN0aW9uIChjb250YWluZXJJZCkge1xuICAgIGlmIChjb250YWluZXJJZCkge1xuICAgICAgaGlkZUNvbnRhaW5lckNvbnRlbnQoY29uZmlnLmNvbnRhaW5lcnMsIGNvbmZpZy5hY3RpdmVDb250YWluZXJDbGFzcyk7XG5cbiAgICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY29udGVudC1jb250YWluZXI9XCInICsgY29udGFpbmVySWQgKyAnXCJdJyk7XG4gICAgICBpZiAoY29udGVudCkgY29udGVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5hY3RpdmVDb250YWluZXJDbGFzcyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBFc2NvbmRlIHRvZG9zIG9zIGNvbnRhaW5lcmVzIGRlIGNvbnRlw7pkb1xuICAgKiBAcGFyYW0ge0FycmF5fSBjb250YWluZXJzIENvbnRhaW5lcmVzIGRlIGNvbnRlw7pkb1xuICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aXZlQ29udGFpbmVyQ2xhc3MgQ2xhc3NlIENTUyB1dGlsaXphZGEgcGFyYSBleGliaXIgbyBjb250ZcO6ZG9cbiAgKi9cbiAgdmFyIGhpZGVDb250YWluZXJDb250ZW50ID0gZnVuY3Rpb24gKGNvbnRhaW5lcnMpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbnRhaW5lcnMsIGZ1bmN0aW9uIChjb250YWluZXIpIHtcbiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5hY3RpdmVDb250YWluZXJDbGFzcyk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICAgIGhpZGVDb250YWluZXJzOiBoaWRlQ29udGFpbmVyQ29udGVudCxcbiAgICBzaG93Q29udGFpbmVyOiBzaG93Q29udGFpbmVyQ29udGVudCxcbiAgfTtcbn07XG5cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtanMtdGFiLS1kZWZhdWx0Jyk7XG5cbiAgaWYgKGVsZW0pIHtcbiAgICB2YXIgYnV0dG9ucyA9IGVsZW0ucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY29udGVudC1idXR0b25dJyk7XG4gICAgdmFyIGNvbnRhaW5lcnMgPSBlbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNvbnRlbnQtY29udGFpbmVyXScpO1xuXG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICBidXR0b25zOiBidXR0b25zLFxuICAgICAgY29udGFpbmVyczogY29udGFpbmVycyxcbiAgICAgIGFjdGl2ZUJ1dHRvbkNsYXNzOiAnYnMtaXMtYWN0aXZlJyxcbiAgICAgIGFjdGl2ZUNvbnRhaW5lckNsYXNzOiAnYnMtaXMtYWN0aXZlJyxcbiAgICAgIG1ldGhvZDogJ2NsaWNrJyxcbiAgICB9O1xuXG4gICAgdmFyIG5ld1RvZ2dsZUNvbnRlbnQgPSBuZXcgQnNUb2dnbGVDb250ZW50KCk7XG4gICAgbmV3VG9nZ2xlQ29udGVudC5pbml0KG9wdGlvbnMpO1xuICB9XG59KTtcbiIsIiIsIi8qKlxuICogWW91dHViZSBQbGF5ZXIgSWZyYW1lIEFQSVxuICovXG52YXIgQnNZVFBsYXllcnMgPSAoZnVuY3Rpb24gKCkge1xuICAvLyBFbGVtZW50c1xuICB2YXIgY29uZmlnID0ge1xuICAgIHZpZGVvczoge30sXG4gIH07XG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAodmlkZW9zKSB7XG4gICAgaWYgKCF2aWRlb3MubGVuZ3RoKSByZXR1cm47XG4gICAgY29uZmlnLnZpZGVvcyA9IEFycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbCh2aWRlb3MsIGZ1bmN0aW9uIChvYmosIHZpZGVvKSB7XG4gICAgICB2YXIgY3J5cHRvT2JqID0gd2luZG93LmNyeXB0byB8fCB3aW5kb3cubXNDcnlwdG87IC8vIGZvciBJRSAxMVxuICAgICAgdmlkZW8uaWQgPSBjcnlwdG9PYmouZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50MzJBcnJheSgxKSlbMF07XG4gICAgICBvYmpbdmlkZW8uaWRdID0ge1xuICAgICAgICBlbDogdmlkZW8sXG4gICAgICAgIHBsYXllcjogbnVsbCxcbiAgICAgIH07XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH0sIHt9KTtcblxuICAgIGluY2x1ZGVJZnJhbWVBUEkoKTtcbiAgfTtcblxuICAvKipcbiAgICogSW5jbHVkZSBJZnJhbWUgQVBJXG4gICAqIExvYWRzIHRoZSBJRnJhbWUgUGxheWVyIEFQSSBjb2RlIGFzeW5jaHJvbm91c2x5LlxuICAgKi9cbiAgdmFyIGluY2x1ZGVJZnJhbWVBUEkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIHRhZy5zcmMgPSAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vaWZyYW1lX2FwaSc7XG4gICAgdmFyIGZpcnN0U2NyaXB0VGFnID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xuICAgIGZpcnN0U2NyaXB0VGFnLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRhZywgZmlyc3RTY3JpcHRUYWcpO1xuICB9O1xuXG4gIHdpbmRvdy5vbllvdVR1YmVJZnJhbWVBUElSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICBCc1lUUGxheWVycy5zZXRQbGF5ZXJzKCk7XG4gIH07XG5cbiAgdmFyIHNldFBsYXllcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgT2JqZWN0LmtleXMoY29uZmlnLnZpZGVvcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICB2YXIgaXRlbSA9IGNvbmZpZy52aWRlb3Nba2V5XTtcbiAgICAgIGl0ZW0ucGxheWVyID0gbmV3IFlULlBsYXllcihrZXksIHtcbiAgICAgICAgLy8gZXZlbnRzOiB7XG4gICAgICAgIC8vICAgb25SZWFkeTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgLy8gICB9XG4gICAgICAgIC8vIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnZXRQbGF5ZXIgPSBmdW5jdGlvbiAodmlkZW9JZCkge1xuICAgIGlmIChjb25maWcudmlkZW9zW3ZpZGVvSWRdKSB7XG4gICAgICByZXR1cm4gY29uZmlnLnZpZGVvc1t2aWRlb0lkXS5wbGF5ZXI7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdCxcbiAgICBzZXRQbGF5ZXJzOiBzZXRQbGF5ZXJzLFxuICAgIGdldFBsYXllcjogZ2V0UGxheWVyLFxuICB9O1xufSgpKTtcblxuLyoqXG4gKiBJbml0IEJzRm9ybVZhbGlkYXRlIENvbnN0cnVjdG9yXG4gKiBAcmV0dXJuIHt2b2lkfSBIZWFkZXIuaW5pdCgpO1xuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICB2YXIgdmlkZW9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLXZpZGVvJyk7XG4gIGlmICh2aWRlb3MubGVuZ3RoKSB7XG4gICAgQnNZVFBsYXllcnMuaW5pdCh2aWRlb3MpO1xuICB9XG59KTtcbiIsIi8qKlxuICogQnMgQWNjZXNzaWJpbGl0eVxuICpcbiAqIFJlZmVyZW5jZTpcbiAqXG4gKlxuICovXG52YXIgQnNBY2Nlc3NpYmlsaXR5ID0gKGZ1bmN0aW9uICgpIHtcbiAgLy8gQ29uZmlnXG4gIHZhciBjb25maWcgPSB7XG4gICAgaHRtbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpLFxuICAgIGJvZHk6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKSxcbiAgICBpbmNyZWFzZUJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLWluY3JlYXNlLWZvbnQnKSxcbiAgICBkZWNyZWFzZUJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLWRlY3JlYXNlLWZvbnQnKSxcbiAgICBjb250cmFzdEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLWNoYW5nZS1jb250cmFzdCcpLFxuICAgIGxpYnJhc0J1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLWxpYnJhcycpLFxuICAgIGFsbEltYWdlczogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW1nJyksXG4gICAgZm9udFNpemVCYXNlOiAxNixcbiAgICBmb250U2l6ZU1pbjogMTQsXG4gICAgZm9udFNpemVNYXg6IDE4LFxuICAgIGNvbnRyYXN0OiB7XG4gICAgICAvLyBncmF5c2NhbGU6ICdicy1jb250cmFzdC0tZ3JheXNjYWxlJyxcbiAgICAgIGhpZ2hDb2xvcjogJ2JzLWNvbnRyYXN0LS1oaWdoJyxcbiAgICB9LFxuICAgIGdyYXlzY2FsZUNsYXNzOiAnYnMtY29udHJhc3RfX2ltYWdlJyxcbiAgfTtcblxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY29udHJhc3RBcnIgPSBbXTtcblxuICAgIGZvciAoa2V5IGluIGNvbmZpZy5jb250cmFzdCkge1xuICAgICAgaWYgKGNvbmZpZy5jb250cmFzdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIC8vIFNlIG7Do28gZm9yIElFLCBhZGljaW9uYSB0b2Rvc1xuICAgICAgICBpZiAoIWRldGVjdElFKCkpIHtcbiAgICAgICAgICBjb250cmFzdEFyci5wdXNoKGNvbmZpZy5jb250cmFzdFtrZXldKTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgIT09ICdncmF5c2NhbGUnKSB7XG4gICAgICAgICAgY29udHJhc3RBcnIucHVzaChjb25maWcuY29udHJhc3Rba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB3aW5kb3cud2wgPSBuZXcgV2ViTGlicmFzKHtcbiAgICAgIGNvbXBhdGliaWxpdHlNb2RlOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgLy8gSGF2ZSBwcm9ibGVtcyB3aXRoIGNyb3NzIG9yaWdpbiBpbWFnZXNcbiAgICAvLyBpZiAoZ2V0SUVWZXJzaW9uKCkgPj0gMTApIHtcbiAgICAvLyAgIGdlbmVyYXRlR3JheXNjYWxlSW1hZ2VzKCk7XG4gICAgLy8gfVxuXG4gICAgY2xpY2soY29uZmlnLmluY3JlYXNlQnV0dG9uLCBpbmNyZWFzZUZvbnRTaXplKTtcbiAgICBjbGljayhjb25maWcuZGVjcmVhc2VCdXR0b24sIGRlY3JlYXNlRm9udFNpemUpO1xuICAgIGNsaWNrKGNvbmZpZy5jb250cmFzdEJ1dHRvbiwgdG9nZ2xlQ29udHJhc3QuYmluZChudWxsLCBjb250cmFzdEFycikpO1xuICAgIGNsaWNrKGNvbmZpZy5saWJyYXNCdXR0b24sIG9wZW5MaWJyYXMpO1xuICB9O1xuXG4gIHZhciBpbmNyZWFzZUZvbnRTaXplID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChnZXRDdXJyZW50Rm9udFNpemUoKSA9PT0gY29uZmlnLmZvbnRTaXplTWF4KSByZXR1cm47XG4gICAgY29uZmlnLmh0bWwuc3R5bGUuZm9udFNpemUgPSAoZ2V0Q3VycmVudEZvbnRTaXplKCkgKyAxKSArICdweCc7XG4gIH07XG5cbiAgdmFyIGRlY3JlYXNlRm9udFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGdldEN1cnJlbnRGb250U2l6ZSgpID09PSBjb25maWcuZm9udFNpemVNaW4pIHJldHVybjtcbiAgICBjb25maWcuaHRtbC5zdHlsZS5mb250U2l6ZSA9IChnZXRDdXJyZW50Rm9udFNpemUoKSAtIDEpICsgJ3B4JztcbiAgfTtcblxuICB2YXIgdG9nZ2xlQ29udHJhc3QgPSBmdW5jdGlvbiAoY29udHJhc3RDbGFzc2VzKSB7XG4gICAgaWYgKGNvbnRyYXN0Q2xhc3Nlc1swXSAmJiBjb25maWcuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoY29udHJhc3RDbGFzc2VzWzBdKSkge1xuICAgICAgY29uZmlnLmJvZHkuY2xhc3NMaXN0LnJlbW92ZShjb250cmFzdENsYXNzZXNbMF0pO1xuICAgICAgY29uZmlnLmJvZHkuY2xhc3NMaXN0LmFkZChjb250cmFzdENsYXNzZXNbMV0pO1xuICAgIH0gZWxzZSBpZiAoY29udHJhc3RDbGFzc2VzWzFdICYmIGNvbmZpZy5ib2R5LmNsYXNzTGlzdC5jb250YWlucyhjb250cmFzdENsYXNzZXNbMV0pKSB7XG4gICAgICBjb25maWcuYm9keS5jbGFzc0xpc3QucmVtb3ZlKGNvbnRyYXN0Q2xhc3Nlc1sxXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbmZpZy5ib2R5LmNsYXNzTGlzdC5hZGQoY29udHJhc3RDbGFzc2VzWzBdKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGdlbmVyYXRlR3JheXNjYWxlSW1hZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLmFsbEltYWdlcywgZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICB2YXIgaW1nU3JjID0gaW1hZ2UuZ2V0QXR0cmlidXRlKCdzcmMnKTtcbiAgICAgIHZhciBncmF5c2NhbGVEYXRhID0gZ3JheXNjYWxlSW1hZ2UoaW1nU3JjKTtcbiAgICAgIHZhciBuZXdJbWFnZSA9IGltYWdlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIG5ld0ltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgZ3JheXNjYWxlRGF0YSk7XG4gICAgICBuZXdJbWFnZS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5ncmF5c2NhbGVDbGFzcyk7XG4gICAgICBpbWFnZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdJbWFnZSwgaW1hZ2UpO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBvcGVuTGlicmFzID0gZnVuY3Rpb24gKCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdGFydFdsQXV0bycpLmNsaWNrKCk7XG4gIH07XG5cbiAgdmFyIGdldEN1cnJlbnRGb250U2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjb25maWcuaHRtbCwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgnZm9udC1zaXplJykpO1xuICB9O1xuXG4gIHZhciBjbGljayA9IGZ1bmN0aW9uIChlbGVtZW50cywgY2FsbGJhY2spIHtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGwgPSBlbGVtZW50cy5sZW5ndGg7XG5cbiAgICBmb3IgKDsgaSA8IGw7IGkgKz0gMSkge1xuICAgICAgZWxlbWVudHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjYWxsYmFjayk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdCxcbiAgICBjdXJyZW50Rm9udDogZ2V0Q3VycmVudEZvbnRTaXplLFxuICAgIGluY3JlYXNlRm9udDogaW5jcmVhc2VGb250U2l6ZSxcbiAgICBkZWNyZWFzZUZvbnQ6IGRlY3JlYXNlRm9udFNpemUsXG4gICAgdG9nZ2xlQ29udHJhc3Q6IHRvZ2dsZUNvbnRyYXN0LFxuICAgIGdlbmVyYXRlR3JheXNjYWxlSW1hZ2VzOiBnZW5lcmF0ZUdyYXlzY2FsZUltYWdlcyxcbiAgfTtcbn0oKSk7XG5cbi8qKlxuICogSW5pdCBBY2Nlc3NpYmlsaXR5IENvbnN0cnVjdG9yXG4gKiBAcmV0dXJuIHt2b2lkfSBIZWFkZXIuaW5pdCgpO1xuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICBCc0FjY2Vzc2liaWxpdHkuaW5pdCgpO1xufSk7XG4iLCJ2YXIgQnNBY2NvcmRpb24gPSAoZnVuY3Rpb24gKCkge1xuXG4gIHZhciBjb25maWcgPSB7XG4gICAgYWNjb3JkaW9uQnV0dG9uOiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtb3Blbi1hY2NvcmRpb24nKSxcbiAgICBhY2NvcmRpb246ICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1hY2NvcmRpb24nKSxcbiAgICBhY2NvcmRpb25Db250ZW50OiAgICcuYnMtanMtYWNjb3JkaW9uLWNvbnRlbnQnLFxuICAgIGJvZHk6ICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLFxuICAgIGRpc2FibGVkT25EZXNrdG9wOiAgJ2JzLWpzLWFjY29yZGlvbi1kaXNhYmxlZC1kZXNrdG9wJ1xuICB9XG5cbiAgdmFyIG1vZENsYXNzID0ge1xuICAgIGFjY29yZGlvbk9wZW5DbGFzczogJ2JzLWFjY29yZGlvbl9faXRlbS0tb3BlbidcbiAgfTtcblxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgIC8vIENoZWNrIGlmIGFjY29yZGlvbiBzaG91ZCBiZSBkaXNhYmxlZCBvbiBkZXNrdG9wXG4gICAgZGlzYWJsZUFjY29yZGlvbk9uRGVza3RvcCgpO1xuXG4gICAgLy8gVG9nZ2xlIGFjY29yZGlvbiBpdGVtIG9uIGNsaWNrXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb25maWcuYWNjb3JkaW9uQnV0dG9uLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBjb25maWcuYWNjb3JkaW9uQnV0dG9uW2ldLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICdjbGljaycsXG4gICAgICAgIHRvZ2dsZUFjY29yZGlvbkl0ZW0uYmluZChudWxsLCBjb25maWcuYWNjb3JkaW9uQnV0dG9uW2ldKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgdXBkYXRlQ29udGVudEhlaWdodCgpO1xuICAgICAgZGlzYWJsZUFjY29yZGlvbk9uRGVza3RvcCgpO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciB0b2dnbGVBY2NvcmRpb25JdGVtID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICBpZiAoaXNBY2NvcmRpb25PcGVuKGVsZW1lbnQpKSBjbG9zZUFjY29yZGlvbkl0ZW0oZWxlbWVudCk7XG4gICAgZWxzZSBvcGVuQWNjb3JkaW9uSXRlbShlbGVtZW50KTtcbiAgfTtcblxuICB2YXIgaXNBY2NvcmRpb25PcGVuID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICB2YXIgaXRlbSA9IGdldFBhcmVudChlbGVtZW50LCAnYnMtYWNjb3JkaW9uX19pdGVtJyk7XG4gICAgcmV0dXJuIGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKG1vZENsYXNzLmFjY29yZGlvbk9wZW5DbGFzcyk7XG4gIH07XG5cbiAgdmFyIG9wZW5BY2NvcmRpb25JdGVtID0gZnVuY3Rpb24gKG9wZW5FbGVtZW50KSB7XG4gICAgdmFyIGl0ZW0gPSBnZXRQYXJlbnQob3BlbkVsZW1lbnQsICdicy1hY2NvcmRpb25fX2l0ZW0nKTtcbiAgICB2YXIgY29udGVudCA9IGl0ZW0ucXVlcnlTZWxlY3Rvcihjb25maWcuYWNjb3JkaW9uQ29udGVudCk7XG4gICAgdmFyIGNvbnRlbnRIZWlnaHQgPSBjb250ZW50LnNjcm9sbEhlaWdodDtcblxuICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChtb2RDbGFzcy5hY2NvcmRpb25PcGVuQ2xhc3MpO1xuICAgIGNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gY29udGVudEhlaWdodCArICdweCc7XG4gIH07XG5cbiAgdmFyIGNsb3NlQWNjb3JkaW9uSXRlbSA9IGZ1bmN0aW9uIChjbG9zZUVsZW1lbnQpIHtcbiAgICB2YXIgaXRlbSA9IGdldFBhcmVudChjbG9zZUVsZW1lbnQsICdicy1hY2NvcmRpb25fX2l0ZW0nKTtcbiAgICB2YXIgY29udGVudCA9IGl0ZW0ucXVlcnlTZWxlY3Rvcihjb25maWcuYWNjb3JkaW9uQ29udGVudCk7XG4gICAgdmFyIGNvbnRlbnRIZWlnaHQgPSBjb250ZW50LnNjcm9sbEhlaWdodDtcblxuICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShtb2RDbGFzcy5hY2NvcmRpb25PcGVuQ2xhc3MpO1xuICAgIGNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gMDtcbiAgfTtcblxuICAvLyBVcGRhdGVzIGNvbnRlbnQgaGVpZ2h0IG9uIHdpbmRvdyByZXNpemVcbiAgdmFyIHVwZGF0ZUNvbnRlbnRIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtYWNjb3JkaW9uX19pdGVtJyk7XG5cbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGl0ZW1zLCBmdW5jdGlvbihlbGVtZW50LCBpKXtcbiAgICAgIHZhciBjb250ZW50ICAgICAgID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5hY2NvcmRpb25Db250ZW50KTtcbiAgICAgIHZhciBjb250ZW50SGVpZ2h0ID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcuYnMtYWNjb3JkaW9uX19ib3gnKS5zY3JvbGxIZWlnaHQgKyAncHgnO1xuICAgICAgdmFyIGFjY29yZGlvbiAgICAgPSBnZXRQYXJlbnRzKGVsZW1lbnQsIGNvbmZpZy5kaXNhYmxlZE9uRGVza3RvcClbMF07XG5cbiAgICAgIC8vIElmIHRoZSAuYnMtanMtYWNjb3JkaW9uLWNvbnRlbnQgaGVpZ2h0IGlzIGRpZmZlcmVudCBmcm9tIGl0cyBjb250ZW50LCB1cGRhdGVzIGl0cyBoZWlnaHRcbiAgICAgIGlmKCBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhtb2RDbGFzcy5hY2NvcmRpb25PcGVuQ2xhc3MpICYmIHBhcnNlSW50KGNvbnRlbnQuc3R5bGUuaGVpZ2h0KSAhPSBjb250ZW50SGVpZ2h0ICkge1xuICAgICAgICBjb250ZW50LnN0eWxlLmhlaWdodCA9IGNvbnRlbnRIZWlnaHQ7XG4gICAgICB9XG5cblxuICAgICAgLy8gSWYgYWNjb3JkaW9uIGlzIHNldCB0byBiZSBkaXNhYmxlZCBvbiBkZXNrdG9wLCB1cGRhdGUgaXRlbXMgaGVpZ2h0XG4gICAgICBpZihhY2NvcmRpb24pIHtcbiAgICAgICAgaWYoXG4gICAgICAgICAgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKG1vZENsYXNzLmFjY29yZGlvbk9wZW5DbGFzcykgJiYgcGFyc2VJbnQoY29udGVudC5zdHlsZS5oZWlnaHQpICE9IGNvbnRlbnRIZWlnaHQpIHx8XG4gICAgICAgICAgKCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhtb2RDbGFzcy5hY2NvcmRpb25PcGVuQ2xhc3MpICYmIHdpbmRvdy5pbm5lcldpZHRoID49IDEyMDApXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gY29udGVudEhlaWdodDtcbiAgICAgICAgfSBlbHNlIGlmKCAhZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMobW9kQ2xhc3MuYWNjb3JkaW9uT3BlbkNsYXNzKSAmJiB3aW5kb3cuaW5uZXJXaWR0aCA8IDEyMDAgKSB7XG4gICAgICAgICAgY29udGVudC5zdHlsZS5oZWlnaHQgPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyBDaGVja3MgaWYgdGhlIGFjY29yZGlvbiBzaG91bGQgYmUgZGlzYWJsZWQgb24gZGVza3RvcFxuICAvLyBhbmQgdGhlbiBkaXNhYmxlIGl0cyBidXR0b25zXG4gIHZhciBkaXNhYmxlQWNjb3JkaW9uT25EZXNrdG9wID0gZnVuY3Rpb24oKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuYWNjb3JkaW9uLCBmdW5jdGlvbihlbGVtZW50LCBpKXtcbiAgICAgIGlmKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNvbmZpZy5kaXNhYmxlZE9uRGVza3RvcCkpIHRvZ2dsZUJ1dHRvbnMoZWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBEaXNhYmxlIHRoZSBhY2NvcmRpb24gYnV0dG9uc1xuICB2YXIgdG9nZ2xlQnV0dG9ucyA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICB2YXIgaXRlbXMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1vcGVuLWFjY29yZGlvbicpO1xuXG4gICAgaWYod2luZG93LmlubmVyV2lkdGggPj0gMTIwMCkge1xuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChpdGVtcywgZnVuY3Rpb24oZWwsIGkpe1xuICAgICAgICBlbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChpdGVtcywgZnVuY3Rpb24oZWwsIGkpe1xuICAgICAgICBlbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0XG4gIH07XG59KCkpO1xuXG4vKipcbiAqIEluaXQgTW9kYWwgQ29uc3RydWN0b3JcbiAqIEByZXR1cm4ge3ZvaWR9IEhlYWRlci5pbml0KCk7XG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtYWNjb3JkaW9uJykubGVuZ3RoKSB7XG4gICAgQnNBY2NvcmRpb24uaW5pdCgpO1xuICB9XG59KTtcbiIsIi8qKlxuICogQmFubmVyIFRvcG9cbiAqIEByZXR1cm4gTW9kdWxlIGNvbmZpZ1xuICovXG52YXIgQnNCYW5uZXJUb3BvID0gKGZ1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIEluaXQgZnVuY3Rpb25cbiAgICogQHJldHVybiB7RnVuY3Rpb259IE1vZHVsZSdzIHNjb3BlIGZ1bmN0aW9uc1xuICAgKi9cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWJhbm5lci10aXRsZS1oaWdobGlnaHQnKTtcbiAgICBpZiAoZWwpIHtcbiAgICAgIHZhciBkYXRhID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWhpZ2hsaWdodCcpO1xuICAgICAgaGlnaGxpZ2h0KGVsLCBkYXRhKTtcbiAgICB9XG5cbiAgICBzZXRTbGlkZXIoKTtcbiAgfTtcblxuICB2YXIgaGlnaGxpZ2h0ID0gZnVuY3Rpb24gKGVsLCBkYXRhKSB7XG4gICAgLy8gdmFyIHRleHRWZWxvY2l0eSA9IDEwMDtcbiAgICB2YXIgcGF1c2VUaW1lID0gMjAwMDtcbiAgICAvLyB2YXIgZGF0YUFyciA9IGRhdGEuc3BsaXQoL1sgLF0rLyk7XG4gICAgdmFyIGRhdGFBcnIgPSBkYXRhLnNwbGl0KCcsJyk7XG4gICAgLy8gdmFyIGRhdGFMZW4gPSBkYXRhQXJyLmxlbmd0aDtcbiAgICAvLyB2YXIgaSA9IDA7XG5cbiAgICBpZiAoZGF0YUFycikge1xuICAgICAgQnNUZXh0VHlwZS5pbml0KHtcbiAgICAgICAgZWw6IGVsLFxuICAgICAgICB0ZXh0QXJyOiBkYXRhQXJyLFxuICAgICAgICBwYXVzZVRpbWU6IHBhdXNlVGltZSxcbiAgICAgIH0pO1xuICAgICAgLy8gbmV3IFR4dFR5cGUoZWwsIGRhdGFBcnIsIHBhdXNlVGltZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBzZXRTbGlkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJhbm5lckxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtYmFubmVyX19saXN0Jyk7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChiYW5uZXJMaXN0LCBmdW5jdGlvbiAobGlzdCkge1xuICAgICAgdmFyIGJhbm5lckl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtYmFubmVyX19pdGVtJyk7XG4gICAgICB2YXIgYnV0dG9uUHJldiA9IGxpc3QucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuYnMtYmFubmVyX19zbGlkZXItYnV0dG9uLnByZXYnKTtcbiAgICAgIHZhciBidXR0b25OZXh0ID0gbGlzdC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5icy1iYW5uZXJfX3NsaWRlci1idXR0b24ubmV4dCcpO1xuICAgICAgdmFyIGZsa3R5ID0gbnVsbDtcbiAgICAgIHZhciBzZXRQcmV2TmV4dFRodW1ibmFpbCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICB2YXIgc2xpZGVzID0gZmxrdHkuY2VsbHM7XG4gICAgICAgIHZhciBwcmV2U2xpZGUgPSAoXG4gICAgICAgICAgKGluZGV4IC0gMSkgPiAtMVxuICAgICAgICApID8gc2xpZGVzW2luZGV4IC0gMV0uZWxlbWVudFxuICAgICAgICAgIDogc2xpZGVzW3NsaWRlcy5sZW5ndGggLSAxXS5lbGVtZW50O1xuICAgICAgICB2YXIgbmV4dFNsaWRlID0gKFxuICAgICAgICAgIChpbmRleCArIDEpIDwgc2xpZGVzLmxlbmd0aFxuICAgICAgICApID8gc2xpZGVzW2luZGV4ICsgMV0uZWxlbWVudFxuICAgICAgICAgIDogc2xpZGVzWzBdLmVsZW1lbnQ7XG4gICAgICAgIHZhciBwcmV2VGh1bWJTcmMgPSBwcmV2U2xpZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXRodW1ibmFpbC1zcmMnKTtcbiAgICAgICAgdmFyIG5leHRUaHVtYlNyYyA9IG5leHRTbGlkZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGh1bWJuYWlsLXNyYycpO1xuICAgICAgICB2YXIgYnV0dG9uUHJldkltZyA9IGJ1dHRvblByZXYucXVlcnlTZWxlY3RvcignaW1nJyk7XG4gICAgICAgIHZhciBidXR0b25OZXh0SW1nID0gYnV0dG9uTmV4dC5xdWVyeVNlbGVjdG9yKCdpbWcnKTtcbiAgICAgICAgdmFyIHByZXZUaHVtYkxhYmVsID0gcHJldlNsaWRlLmdldEF0dHJpYnV0ZSgnZGF0YS10aHVtYm5haWwtbGFiZWwnKTtcbiAgICAgICAgdmFyIG5leHRUaHVtYkxhYmVsID0gbmV4dFNsaWRlLmdldEF0dHJpYnV0ZSgnZGF0YS10aHVtYm5haWwtbGFiZWwnKTtcbiAgICAgICAgdmFyIGJ1dHRvblByZXZMYWJlbCA9IGJ1dHRvblByZXYucXVlcnlTZWxlY3RvcignLmJzLWJhbm5lcl9fc2xpZGVyLXByZXZpZXctbGFiZWwnKTtcbiAgICAgICAgdmFyIGJ1dHRvbk5leHRMYWJlbCA9IGJ1dHRvbk5leHQucXVlcnlTZWxlY3RvcignLmJzLWJhbm5lcl9fc2xpZGVyLXByZXZpZXctbGFiZWwnKTtcblxuICAgICAgICBidXR0b25QcmV2SW1nLnNyYyA9IHByZXZUaHVtYlNyYztcbiAgICAgICAgYnV0dG9uTmV4dEltZy5zcmMgPSBuZXh0VGh1bWJTcmM7XG4gICAgICAgIGJ1dHRvblByZXZMYWJlbC5pbm5lckhUTUwgPSBwcmV2VGh1bWJMYWJlbDtcbiAgICAgICAgYnV0dG9uTmV4dExhYmVsLmlubmVySFRNTCA9IG5leHRUaHVtYkxhYmVsO1xuICAgICAgfTtcblxuICAgICAgaWYgKGJhbm5lckl0ZW1zICYmIGJhbm5lckl0ZW1zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZmxrdHkgPSBuZXcgRmxpY2tpdHkobGlzdCwge1xuICAgICAgICAgIHdyYXBBcm91bmQ6IHRydWUsXG4gICAgICAgICAgcGFnZURvdHM6IHRydWUsXG4gICAgICAgICAgcHJldk5leHRCdXR0b25zOiBmYWxzZSxcbiAgICAgICAgICBhZGFwdGl2ZUhlaWdodDogdHJ1ZSxcbiAgICAgICAgICBhdXRvUGxheTogNTAwMCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2V0UHJldk5leHRUaHVtYm5haWwoMCk7XG4gICAgICAgIGZsa3R5Lm9uKCdzZWxlY3QnLCBzZXRQcmV2TmV4dFRodW1ibmFpbCk7XG5cbiAgICAgICAgYnV0dG9uUHJldi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBmbGt0eS5wcmV2aW91cygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBidXR0b25OZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGZsa3R5Lm5leHQoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICB9O1xufSgpKTtcblxuLyoqXG4gKiBJbml0IEhlYWRlciBDb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH0gSGVhZGVyLmluaXQoKTtcbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1iYW5uZXInKSkge1xuICAgIEJzQmFubmVyVG9wby5pbml0KCk7XG4gIH1cbn0pO1xuIiwidmFyIEJzQm94TWVudSA9IChmdW5jdGlvbiAoKSB7XG5cbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBtZW51QnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtYm94LS1tZW51JyksXG4gICAgbWVudUJ1dHRvbkNsYXNzOiAnYnMtYm94X19tZW51JyxcbiAgICBhY3RpdmVDb250ZW50Q2xhc3M6ICdicy1ib3hfX2NvbnRlbnQtLWFjdGl2ZScsXG4gICAgYWN0aXZlTWVudUNsYXNzOiAnYnMtYm94X19tZW51LS1hY3RpdmUnLFxuICB9O1xuXG4gIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgLy8gdmFyIHJlc2l6ZU1lbnUgPSBkZWJvdW5jZSh0b2RvLCA1MDApO1xuICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVNZW51KTtcblxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLm1lbnVCdXR0b24sIGZ1bmN0aW9uIChlbCkge1xuICAgICAgdmFyIGJveExpbmtzID0gZWwucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuYnMtYm94X19jb250ZW50Jyk7XG4gICAgICB2YXIgYm94TGlua3NMaXN0ID0gYm94TGlua3MucXVlcnlTZWxlY3RvcignLmJzLWJveF9fbGlzdCcpLm9mZnNldEhlaWdodDtcblxuICAgICAgLy8gZGVib3VuY2Ugc2V0VGltZSBvZmZzZXQgZWxlbSBhbmQgc2hvdWxkIHJlbW92ZSBlbGVtZW50cyBhY3RpdmVzIHdoZW4gcmVzaXplXG4gICAgICB2YXIgcmVzaXplTWVudUJveCA9IGRlYm91bmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYm94TGlua3NMaXN0ID0gYm94TGlua3MucXVlcnlTZWxlY3RvcignLmJzLWJveF9fbGlzdCcpLm9mZnNldEhlaWdodDtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuYWN0aXZlTWVudUNsYXNzKTtcbiAgICAgICAgYm94TGlua3MuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuYWN0aXZlQ29udGVudENsYXNzKTtcbiAgICAgICAgYm94TGlua3Muc3R5bGUgPSAnJztcbiAgICAgICAgLy8gbWVudSBidXR0b24gYWN0aXZlIGJ5IGJyZWFrcG9pbnRcbiAgICAgICAgbWVudUJveEFjdGl2YXRlZChlbCk7XG4gICAgICB9KTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVNZW51Qm94KTtcbiAgICAgIFxuICAgICAgLy8gbWVudSBidXR0b24gYWN0aXZlIGJ5IGJyZWFrcG9pbnRcbiAgICAgIG1lbnVCb3hBY3RpdmF0ZWQoZWwpO1xuXG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgY29udGVudFRvZ2dsZSA9IGJveExpbmtzLmNsYXNzTGlzdC5jb250YWlucyhjb25maWcuYWN0aXZlQ29udGVudENsYXNzKTtcblxuICAgICAgICBpZiAoIWNvbnRlbnRUb2dnbGUpIHtcbiAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5hY3RpdmVNZW51Q2xhc3MpO1xuICAgICAgICAgIGJveExpbmtzLmNsYXNzTGlzdC5hZGQoY29uZmlnLmFjdGl2ZUNvbnRlbnRDbGFzcyk7XG4gICAgICAgICAgYm94TGlua3Muc3R5bGUuaGVpZ2h0ID0gYm94TGlua3NMaXN0ICsgJ3B4JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5hY3RpdmVNZW51Q2xhc3MpO1xuICAgICAgICAgIGJveExpbmtzLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmFjdGl2ZUNvbnRlbnRDbGFzcyk7XG4gICAgICAgICAgYm94TGlua3Muc3R5bGUuaGVpZ2h0ID0gJzAnO1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cblxuICB2YXIgbWVudUJveEFjdGl2YXRlZCA9IGZ1bmN0aW9uIChlbCkge1xuICAgIHZhciB3aXRkaCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIGlmICh3aXRkaCA+IDc2OCkge1xuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcubWVudUJ1dHRvbkNsYXNzKTtcbiAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoY29uZmlnLm1lbnVCdXR0b25DbGFzcyk7XG4gICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdCxcbiAgfTtcbn0oKSk7XG5cbi8qKlxuKiBAcmV0dXJuIHt2b2lkfSBIZWFkZXIuaW5pdCgpO1xuKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1ib3gtLW1lbnUnKS5sZW5ndGgpIHtcbiAgICBCc0JveE1lbnUuaW5pdCgpO1xuICB9XG59KTtcbiIsImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBtYWluQ2FyZEZsaXBSZWFkeSk7XG5cbi8qKlxuICogW21haW5DYXJkRmxpcFJlYWR5IGRlc2NyaXB0aW9uXVxuICogQHJldHVybiB7dm9pZH0gTWFpbkNhcmQuaW5pdCgpXG4gKi9cbmZ1bmN0aW9uIG1haW5DYXJkRmxpcFJlYWR5KCkge1xuICB2YXIgbWFpbkNhcmQgPSBuZXcgQnNDYXJkRmxpcCgpO1xuICBtYWluQ2FyZC5pbml0KCk7XG59XG5cbi8qKlxuICogQnNDYXJkRmxpcFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEJzQ2FyZEZsaXAoKSB7XG4gIHRoaXMuY2FyZFNlcnZpY2VzVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1icy1jYXJkLXNlcnZpY2VzX190ZXh0Jyk7XG59XG5cbkJzQ2FyZEZsaXAucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogQnNDYXJkRmxpcCxcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBpO1xuICAgIHZhciBfID0gdGhpcztcbiAgICB2YXIgaXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1icy1vcGVuLWZsaXAtY2FyZCcpO1xuICAgIC8vIHZhciBjYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWZsaXAtY2FyZCcpO1xuICAgIHZhciBjbG9zZUZsaXBDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWJzLWNsb3NlLWZsaXAtY2FyZCcpO1xuICAgIHZhciBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuXG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgNzY4KSBib2R5LmNsYXNzTGlzdC5hZGQoJ2JzLWlzLW1vYmlsZScpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCA3NjgpIGJvZHkuY2xhc3NMaXN0LmFkZCgnYnMtaXMtbW9iaWxlJyk7XG4gICAgICBlbHNlIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnYnMtaXMtbW9iaWxlJyk7XG4gICAgfSk7XG5cbiAgICBpZiAoaXRlbSkge1xuICAgICAgZm9yIChpID0gMDsgaSA8IGl0ZW0ubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaXRlbVtpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfLl9vcGVuRmxpcENhcmQodGhpcyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgY2xvc2VGbGlwQ2FyZC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjbG9zZUZsaXBDYXJkW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIHZhciBfID0gdGhpcztcbiAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYnMtZmxpcC1jYXJkLS1pcy1vcGVuJyk7XG4gICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2JzLWZsaXAtY2FyZC0taXMtcmVtb3ZlZCcpO1xuICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2JzLWNhcmQtc2VydmljZXNfX2l0ZW0tLW5vLWhvdmVyJyk7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYnMtZmxpcC1jYXJkLS1pcy1yZW1vdmVkJyk7XG4gICAgICAgICAgICBfLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYnMtZmxpcC1jYXJkLS1pcy1maXhlZCcpO1xuICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBfb3BlbkZsaXBDYXJkOiBmdW5jdGlvbiAoZWwpIHtcbiAgICBlbC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZCgnYnMtZmxpcC1jYXJkLS1pcy1maXhlZCcpO1xuICAgIGVsLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuYWRkKCdicy1mbGlwLWNhcmQtLWlzLW9wZW4nKTtcbiAgICBlbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2JzLWNhcmQtc2VydmljZXNfX2l0ZW0tLW5vLWhvdmVyJyk7XG4gIH0sXG59O1xuIiwiLyoqXG4gKiBDb21wYXJlIFNlbGVjdG9yXG4gKiBAcmV0dXJuIE1vZHVsZSBjb25maWdcbiAqL1xudmFyIEJzQ29tcGFyZVNlbGVjdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIEluaXQgZnVuY3Rpb25cbiAgICogQHJldHVybiB7RnVuY3Rpb259IE1vZHVsZSdzIHNjb3BlIGZ1bmN0aW9uc1xuICAgKi9cblxuICAgdmFyIGNvbmZpZyA9IHtcbiAgICBjaGVja2JveEl0ZW1zIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWNvbXBhcmVfX3NlbGVjdC1jYXJkcycpLFxuICAgIGxpc3RJdGVtIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWNvbXBhcmVfX3NlbGVjdC1jYXJkJyksXG4gICAgcmVzdWx0TGlzdEl0ZW0gOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtY29tcGFyZV9fcmVzdWx0IC5icy1tZWRpYV9faXRlbScpLFxuICAgIGJ1dHRvbkNvbXBhcmUgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtanMtY29tcGFyZScpLFxuICAgIGJ1dHRvbk5ld0NvbXBhcmUgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtanMtbmV3LWNvbXBhcmUnKSxcbiAgICBjb21wYXJlUmVzdWx0IDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWNvbXBhcmVfX3Jlc3VsdCcpLFxuICAgIGNvbXBhcmVMaXN0IDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWNvbXBhcmVfX3dyYXBwZXInKSxcbiAgICBidXR0b25JdGVtIDogJycsXG4gICAgY2hlY2sgOiAnJyxcbiAgICBjb3VudGVyIDogMCxcbiAgICBsaW1pdCA6IDMsXG4gICAgbWluU2l6ZUxpbWl0IDogMixcbiAgIH07XG5cbiAgIHZhciByZXN1bHRzID0ge1xuICAgIGJ1dHRvbkFuY2hvciA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1qcy1uZXctY29tcGFyZScpLFxuICAgIHNtb290aFNjcm9sbFN0ZXBzIDogMjUsXG4gICAgc2Nyb2xsQW5jaG9yR3V0dGVyIDogMTIwLFxuICAgIG5ld0NvbXBhcmVSZXN1bHQgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtY29tcGFyZV9fc2VsZWN0LWNhcmRzJyksXG4gICB9O1xuXG4gICBpZiAoY29uZmlnLmNoZWNrYm94SXRlbXMpIHtcbiAgICB2YXIgc2VsZWN0b3IgPSB7XG4gICAgICBjaGVja0l0ZW0gOiBjb25maWcuY2hlY2tib3hJdGVtcy5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKSxcbiAgICAgfTtcbiAgIH07XG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChzZWxlY3Rvci5jaGVja0l0ZW0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICBjb25maWcuYnV0dG9uSXRlbSA9IGU7XG4gICAgICBjb25maWcuYnV0dG9uSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBjb25maWcuY2hlY2sgPSBlbC50YXJnZXQ7XG4gICAgICAgIG5ld0NoZWNrZXIoY29uZmlnLmNoZWNrKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmVzdWx0cy5idXR0b25BbmNob3IuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHNjcm9sbCA9IG5ldyBTbW9vdGhTY3JvbGwoKTtcblxuICAgICAgaWYgKGNvbmZpZy5jb21wYXJlTGlzdCkge1xuICAgICAgICBzY3JvbGwuYW5pbWF0ZVNjcm9sbChjb25maWcuY29tcGFyZUxpc3QsIDAsIHtcbiAgICAgICAgICB1cGRhdGVVUkw6IGZhbHNlLFxuICAgICAgICAgIGhlYWRlcjogJy5icy1oZWFkZXInLFxuICAgICAgICAgIG9mZnNldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIDEwMDtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGRpc3BhcmEgYcOnw6NvIGRvIGNvbXBhcmFyXG4gICAgY29uZmlnLmJ1dHRvbkNvbXBhcmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICBjb25maWcuY29tcGFyZVJlc3VsdC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgICAgdmFyIGZpbHRlckl0ZW1zID0gT2JqZWN0LnZhbHVlcyhzZWxlY3Rvci5jaGVja0l0ZW0pO1xuXG4gICAgICB2YXIgZmlsdGVyZWQgPSBmaWx0ZXJJdGVtcy5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5jaGVja2VkO1xuICAgICAgfSk7XG5cbiAgICAgIHZhciBjb250ZW50UmVzdWx0ID0gZmlsdGVyZWQubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbXBhcmUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5yZXN1bHRMaXN0SXRlbSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHZhciBzY3JvbGwgPSBuZXcgU21vb3RoU2Nyb2xsKCk7XG4gICAgICAgIHZhciBpdGVtQ29tcGFyZWQgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29tcGFyZScpO1xuXG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2JzLWNvbXBhcmVfX2FjdGl2ZScpO1xuXG4gICAgICAgIGlmIChjb250ZW50UmVzdWx0LmluY2x1ZGVzKGl0ZW1Db21wYXJlZCkpIHtcbiAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdicy1jb21wYXJlX19hY3RpdmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb25maWcuY29tcGFyZVJlc3VsdCkge1xuICAgICAgICAgIHNjcm9sbC5hbmltYXRlU2Nyb2xsKGNvbmZpZy5jb21wYXJlUmVzdWx0LCAwLCB7XG4gICAgICAgICAgICB1cGRhdGVVUkw6IGZhbHNlLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgbmV3Q2hlY2tlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGUuY2hlY2tlZCkgY29uZmlnLmNvdW50ZXIrKztcbiAgICBlbHNlIGNvbmZpZy5jb3VudGVyLS07XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChzZWxlY3Rvci5jaGVja0l0ZW0sIGZ1bmN0aW9uIChlbCkge1xuICAgICAgY29uZmlnLmJ1dHRvbkl0ZW0gPSBlbDtcbiAgICAgIGlmIChjb25maWcuY291bnRlciA9PT0gY29uZmlnLmxpbWl0KSB7IC8vLSAzIGxpbWl0IGRlZmF1bHRcbiAgICAgICAgaWYgKCFjb25maWcuYnV0dG9uSXRlbS5jaGVja2VkKSB7XG4gICAgICAgICAgY29uZmlnLmJ1dHRvbkl0ZW0uZGlzYWJsZWQgPSB0cnVlOyAvLyBhbmQgZGlzYWJsZSB1bmNoZWNrZWQgY2hlY2tib3hlc1xuICAgICAgICAgIGNvbmZpZy5idXR0b25Db21wYXJlLmNsYXNzTGlzdC5yZW1vdmUoJ2JzLWJ1dHRvbi0tZGlzYWJsZWQnKTtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjb25maWcuY291bnRlciA9PT0gY29uZmlnLm1pblNpemVMaW1pdCkge1xuICAgICAgICAgIGNvbmZpZy5idXR0b25JdGVtLmRpc2FibGVkID0gZmFsc2U7IC8vIGVuYWJsZSB1bmNoZWNrZWQgY2hlY2tib3hlc1xuICAgICAgICAgIGNvbmZpZy5idXR0b25Db21wYXJlLmNsYXNzTGlzdC5yZW1vdmUoJ2JzLWJ1dHRvbi0tZGlzYWJsZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIWNvbmZpZy5idXR0b25JdGVtLmNoZWNrZWQpIHtcbiAgICAgICAgICAgIGNvbmZpZy5idXR0b25JdGVtLmRpc2FibGVkID0gZmFsc2U7IC8vIGVuYWJsZSB1bmNoZWNrZWQgY2hlY2tib3hlc1xuICAgICAgICAgICAgY29uZmlnLmJ1dHRvbkNvbXBhcmUuY2xhc3NMaXN0LmFkZCgnYnMtYnV0dG9uLS1kaXNhYmxlZCcpO1xuICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdCxcbiAgfTtcbn0oKSk7XG5cbi8qKlxuICogSW5pdCBIZWFkZXIgQ29uc3RydWN0b3JcbiAqIEByZXR1cm4ge3ZvaWR9IEhlYWRlci5pbml0KCk7XG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtY29tcGFyZV9fc2VsZWN0LWNhcmRzJykpIHtcbiAgICBCc0NvbXBhcmVTZWxlY3Rvci5pbml0KCk7XG4gIH1cbn0pO1xuIiwiLyoqXG4gKiBDb250ZXh0IE1lbnVcbiAqL1xudmFyIEJzQ29udGV4dE1lbnUgPSAoZnVuY3Rpb24gKCkge1xuICAvLyBDb25maWdcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBidXR0b25zOiB7XG4gICAgICB0cmlnZ2VyOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtdHJpZ2dlci1jb250ZXh0LW1lbnUnKSxcbiAgICB9LFxuICAgIGNsYXNzZXM6IHtcbiAgICAgIG9wZW46ICdicy1jb250ZXh0LW1lbnUtLW9wZW4nLFxuICAgICAgY29udGV4dE1lbnU6ICdicy1jb250ZXh0LW1lbnUnLFxuICAgIH0sXG4gIH07XG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gQWJyZS9mZWNoYSBvIENvbnRleHQgTWVudVxuICAgIGlmIChjb25maWcuYnV0dG9ucy50cmlnZ2VyKSB7XG4gICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5idXR0b25zLnRyaWdnZXIsIGZ1bmN0aW9uIChidXR0b24pIHtcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIHRvZ2dsZUNvbnRleHRNZW51KGJ1dHRvbik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciB0b2dnbGVDb250ZXh0TWVudSA9IGZ1bmN0aW9uIChidXR0b24pIHtcbiAgICB2YXIgaXNPcGVuID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy4nICsgY29uZmlnLmNsYXNzZXMuY29udGV4dE1lbnUpLmNsYXNzTGlzdC5jb250YWlucyhjb25maWcuY2xhc3Nlcy5vcGVuKTtcblxuICAgIGlmIChpc09wZW4pIGNsb3NlQ29udGV4dE1lbnUoYnV0dG9uKTtcbiAgICBlbHNlIG9wZW5Db250ZXh0TWVudShidXR0b24pO1xuICB9O1xuXG4gIHZhciBvcGVuQ29udGV4dE1lbnUgPSBmdW5jdGlvbiAoYnV0dG9uKSB7XG4gICAgY2xvc2VBbGxDb250ZXh0TWVudSgpO1xuICAgIGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcuJyArIGNvbmZpZy5jbGFzc2VzLmNvbnRleHRNZW51KS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5jbGFzc2VzLm9wZW4pO1xuICB9O1xuXG4gIHZhciBjbG9zZUNvbnRleHRNZW51ID0gZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgIGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcuJyArIGNvbmZpZy5jbGFzc2VzLmNvbnRleHRNZW51KS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5jbGFzc2VzLm9wZW4pO1xuICB9O1xuXG4gIHZhciBjbG9zZUFsbENvbnRleHRNZW51ID0gZnVuY3Rpb24gKCkge1xuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBjb25maWcuY2xhc3Nlcy5vcGVuKSwgZnVuY3Rpb24gKGNvbnRleHRNZW51KSB7XG4gICAgICBjb250ZXh0TWVudS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5jbGFzc2VzLm9wZW4pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIENsb3NlIG1lbnUgb24gY2xpY2sgb3V0c2lkZVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgY2xvc2VBbGxDb250ZXh0TWVudSgpO1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGluaXQ6IGluaXQsXG4gICAgY2xvc2VBbGxDb250ZXh0TWVudTogY2xvc2VBbGxDb250ZXh0TWVudSxcbiAgfTtcbn0oKSk7XG5cbi8qKlxuICogSW5pdCBCc0NvbnRleHRNZW51IGNvbnN0cnVjdG9yXG4gKiBAcmV0dXJuIHt2b2lkfSBCc0NvbnRleHRNZW51LmluaXQoKTtcbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1jb250ZXh0LW1lbnUnKS5sZW5ndGgpIHtcbiAgICBCc0NvbnRleHRNZW51LmluaXQoKTtcbiAgfVxufSk7XG4iLCJ2YXIgQnNEYXRlUGlja2VyID0gKGZ1bmN0aW9uICgpIHtcblxuICB2YXIgY29uZmlnID0ge1xuICAgIHN0YXJJbnB1dERlZmF1bHQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W2RhdGEtdHlwZT1cImRhdGVwaWNrZXJcIl0nKSxcbiAgICBzdGFySW5wdXRSYW5nZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbZGF0YS10eXBlPVwiZGF0ZXBpY2tlci0tcmFuZ2VcIl0nKSxcbiAgICBzZWxlY3RvcjogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLXBpY2tlcl9faXRlbScpLFxuICAgIHVsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtanMtcGlja2VyTGlzdCcpLFxuICAgIGJ1dHRvbjogJycsXG4gICAgZGF0YUl0ZW06ICcnLFxuICAgIG9iamVjdEF0dHJpYnV0ZTogJycsXG4gICAgcmVzZXRQaWNrZXI6ICcnLFxuICAgIG9wdEZvb3RlcjogJycsXG4gICAgbGlnaHRwaWNrOiAnJyxcbiAgICB0b2dnbGVDYWxlbmRhcjogJycsXG4gIH07XG5cbiAgdmFyIHNldCA9IGZ1bmN0aW9uIChlbCkge1xuXG4gICAgdmFyIGlzUmFuZ2UgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpID09PSAnZGF0ZXBpY2tlci0tcmFuZ2UnO1xuXG4gICAgaWYgKGlzUmFuZ2UpIHNldFBpY2tlclJhbmdlKGVsKTtcbiAgICBlbHNlIHNldFBpY2tlcihlbCk7XG4gIH07XG5cbiAgdmFyIHNldFBpY2tlciA9IGZ1bmN0aW9uIChlbCkge1xuICAgIHZhciBlbFBhcmVudCA9IGVsLnBhcmVudE5vZGU7XG4gICAgdmFyIHBpY2tlciA9IG51bGw7XG4gICAgdmFyIGRhdGVQZXJpb2QgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGF0ZXBpY2tlci1wZXJpb2QnKSB8fCAnJztcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgIGZpZWxkOiBlbCxcbiAgICAgIHBhcmVudEVsOiBlbFBhcmVudCxcbiAgICAgIHN0YXJ0RGF0ZTogZWwudmFsdWUgfHwgbnVsbCxcbiAgICAgIGxhbmc6ICdwdC1CUicsXG4gICAgICBtaW5EYXRlOiBkYXRlUGVyaW9kID09PSAnc3RhcnRUb2RheScgPyBtb21lbnQoKS5lbmRPZignZGF5JykgOiBudWxsLFxuICAgICAgbWF4RGF0ZTogIWRhdGVQZXJpb2QgfHwgZGF0ZVBlcmlvZCA9PT0gJ2VuZFRvZGF5JyA/IG1vbWVudCgpLmVuZE9mKCdkYXknKSA6IG51bGwsXG4gICAgfTtcblxuICAgIHBpY2tlciA9IG5ldyBMaWdodHBpY2sob3B0aW9ucyk7XG5cbiAgICAvLyBDbG9zZSBwaWNrZXIgb24ga2V5ZG93blxuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICBwaWNrZXIuaGlkZSgpO1xuICAgIH0pO1xuXG4gICAgLy8gRm9jdXNcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIEZpeCBidWcgSUUxMSB1c2Ugc2V0VGltZW91dFxuICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIHNlbGVjdG9yRGF0ZSgpO1xuICAgICAgICBlbC5mb2N1cygpO1xuICAgICAgfSwgMTApO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBzZXRQaWNrZXJSYW5nZSA9IGZ1bmN0aW9uIChlbCkge1xuICAgIHZhciBlbFBhcmVudCA9IGVsLnBhcmVudE5vZGU7XG4gICAgdmFyIHBpY2tlciA9IG5ldyBMaWdodHBpY2soe1xuICAgICAgZmllbGQ6IGVsLFxuICAgICAgcGFyZW50RWw6IGVsUGFyZW50LFxuICAgICAgc3RhcnREYXRlOiBlbC52YWx1ZSB8fCBudWxsLFxuICAgICAgc2VwYXJhdG9yOiAoZWwuZGF0YXNldC5zZXBhcmF0b3IpIHx8ICcgLSAnLFxuICAgICAgbGFuZzogJ3B0LUJSJyxcbiAgICAgIHNpbmdsZURhdGU6IGZhbHNlLFxuICAgICAgbWF4RGF0ZTogbW9tZW50KCkuZW5kT2YoJ2RheScpLFxuICAgICAgZm9vdGVyOiB0cnVlLFxuICAgICAgbG9jYWxlOiB7XG4gICAgICAgIHRvb2x0aXA6IHtcbiAgICAgICAgICBvbmU6ICdEaWEnLFxuICAgICAgICAgIG90aGVyOiAnRGlhcycsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgb25TZWxlY3Q6IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgIHZhciBzdHIgPSBkYXRlID8gZGF0ZS50b1N0cmluZygpIDogJyc7XG4gICAgICAgIGVuYWJsZUNsZWFuQnV0dG9uKHN0cik7XG4gICAgICB9LFxuICAgIH0pO1xuICAgIHZhciByZXNldFBpY2tlciA9IHBpY2tlci5lbC5xdWVyeVNlbGVjdG9yKCcubGlnaHRwaWNrX19yZXNldC1hY3Rpb24nKTtcbiAgICB2YXIgb3B0Rm9vdGVyID0gcGlja2VyLmVsLnF1ZXJ5U2VsZWN0b3IoJy5saWdodHBpY2tfX2Zvb3RlcicpO1xuICAgIHZhciBjb250cm9sID0gZWwuY2xvc2VzdCgnLmJzLWZvcm1fX2NvbnRyb2wnKTtcbiAgICB2YXIgcGlja2VyTGlzdCA9IGNvbnRyb2wucXVlcnlTZWxlY3RvcignLmJzLWpzLXBpY2tlckxpc3QnKTtcbiAgICB2YXIgcGlja2VySXRlbXMgPSBwaWNrZXJMaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1waWNrZXJfX2l0ZW0nKTtcbiAgICB2YXIgcmFuZ2VQZXJpb2RzID0gW1xuICAgICAgeyBhdHRyaWJ1dGU6ICd0b2RheScsIHZhbHVlOiAnJyB9LFxuICAgICAgeyBhdHRyaWJ1dGU6ICdsYXN0LXdlZWsnLCB2YWx1ZTogJzcnIH0sXG4gICAgICB7IGF0dHJpYnV0ZTogJ2xhc3QtbW9udGgnLCB2YWx1ZTogJzMwJyB9LFxuICAgICAgeyBhdHRyaWJ1dGU6ICdsYXN0LW1vcmUnLCB2YWx1ZTogJzkwJyB9LFxuICAgIF07XG4gICAgdmFyIGVuYWJsZUNsZWFuQnV0dG9uID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgcmVzZXRQaWNrZXIucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzZXRQaWNrZXIuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAob3B0Rm9vdGVyKSB7XG4gICAgICAvLyBBcHBlbmQgRm9vdGVyICsgSUUgMTEgc3Vwb3J0XG4gICAgICBvcHRGb290ZXIuaW5zZXJ0QmVmb3JlKHBpY2tlckxpc3QsIG9wdEZvb3Rlci5maXJzdENoaWxkKTtcblxuICAgICAgLy8gQ3JpYSAgZnVuw6fDo28gcGFyYSBsaW1wYXIgYXMgZGF0YXMgc2VsY2lvbmFkYXNcbiAgICAgIHJlc2V0UGlja2VyLmlubmVySFRNTCA9ICdMaW1wYXInO1xuICAgICAgcmVzZXRQaWNrZXIuY2xhc3NMaXN0LmFkZCgnYnMtcGlja2VyX19pdGVtJyk7XG4gICAgICByZXNldFBpY2tlci5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG5cbiAgICAgIC8vIEVuYWJsZSByZXNldFBpY2tlciBidXR0b24gaWYgaW5wdXQgaGFzIHZhbHVlXG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBlbmFibGVDbGVhbkJ1dHRvbik7XG4gICAgfVxuXG4gICAgLy8gRmlsdGVyIFNlbGVjdGlvbiBsYXN0IGRhdGVzXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChwaWNrZXJJdGVtcywgZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgIHZhciBidXR0b24gPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJ2EnKTtcblxuICAgICAgaWYgKCFidXR0b24pIHJldHVybjtcblxuICAgICAgLy8gcGVybWl0ZSBzZWxlY2lvbmFyIG8gZGlhLCBubyBmaWx0cm8vIG7Do28gw6kgZGVmYXVsdCBkbyBwbHVnaW5cbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBkYXRhSXRlbSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1waWNrZXInKTtcblxuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHJhbmdlUGVyaW9kcywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgdmFyIG9iamVjdEF0dHJpYnV0ZSA9IGV2ZW50LmF0dHJpYnV0ZTtcbiAgICAgICAgICB2YXIgc3VidHJhY3REYXlzID0gbW9tZW50KCkuc3VidHJhY3QoZXZlbnQudmFsdWUsICdkYXknKTtcbiAgICAgICAgICB2YXIgY3VycmVudERheSA9IG1vbWVudCgpLmVuZE9mKCdkYXknKTtcblxuICAgICAgICAgIC8vIEdldCBvYmplY3RzIGluIGxpc3QsIHRvIHVwZGF0ZSBsYXN0IGRheXNcbiAgICAgICAgICBpZiAob2JqZWN0QXR0cmlidXRlID09PSBkYXRhSXRlbSkge1xuICAgICAgICAgICAgcGlja2VyLnNldERhdGVSYW5nZShzdWJ0cmFjdERheXMsIGN1cnJlbnREYXkpO1xuICAgICAgICAgICAgcGlja2VyLmhpZGUoKTtcbiAgICAgICAgICB9IGVsc2UgcGlja2VyLmhpZGUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgIC8vIFJhbmdlICsgRmlsdGVyIERhdGVcbiAgICBpZiAoY29uZmlnLnN0YXJJbnB1dFJhbmdlLmxlbmd0aCA+IDApIHtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLnN0YXJJbnB1dFJhbmdlLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgc2V0UGlja2VyUmFuZ2UoZWwpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU0lNUExFIGRhdGVcbiAgICBpZiAoY29uZmlnLnN0YXJJbnB1dERlZmF1bHQubGVuZ3RoID4gMCkge1xuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuc3RhcklucHV0RGVmYXVsdCwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHNldFBpY2tlcihlbCk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgc2V0OiBzZXQsXG4gICAgc2V0UGlja2VyOiBzZXRQaWNrZXIsXG4gICAgc2V0UmFuZ2U6IHNldFBpY2tlclJhbmdlLFxuICAgIGluaXQ6IGluaXQsXG4gIH07XG59KCkpO1xuXG4vKipcbiogSW5pdCBNb2RhbCBDb25zdHJ1Y3RvclxuKiBAcmV0dXJuIHt2b2lkfSBIZWFkZXIuaW5pdCgpO1xuKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1saWdodHBpY2snKS5sZW5ndGgpIHtcbiAgICBCc0RhdGVQaWNrZXIuaW5pdCgpO1xuICB9XG59KTtcbiIsIi8qKlxuICogRHJvcGRvd24gbWVudVxuICogZS5nLjogTm90aWZpY2F0aW9uIGFuZCBTd2l0Y2ggVXNlciBNZW51XG4gKi9cbnZhciBCc0Ryb3Bkb3duTWVudSA9IChmdW5jdGlvbiAoKSB7XG4gIC8vIENvbmZpZ1xuICB2YXIgY29uZmlnID0ge1xuICAgIGJ1dHRvbnM6IHtcbiAgICAgIGRyb3Bkb3duTWVudVRyaWdnZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy10b2dnbGUtZHJvcGRvd24tbWVudScpLFxuICAgICAgbWFya0FsbEFzUmVhZDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWpzLW1hcmstYWxsLXVucmVhZCcpLFxuICAgICAgbWFya0FzVW5yZWFkOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtbWFyay11bnJlYWQnKSxcbiAgICAgIG9wZW5Ecm9wZG93bk1lbnU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy11c2VyLW1lbnVfX2Ryb3Bkb3duIC5icy1qcy1vcGVuLW1vZGFsJyksXG4gICAgICByZW1vdmVOb3RpZmljYXRpb246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1yZW1vdmUtbm90aWZpY2F0aW9uJyksXG4gICAgfSxcbiAgICBjbGFzc2VzOiB7XG4gICAgICBkcm9wZG93bkhhc05vdGlmaWNhdGlvbjogJ2JzLWRyb3Bkb3duLW5vdGlmaWNhdGlvbi0taGFzLW5vdGlmaWNhdGlvbicsXG4gICAgICBkcm9wZG93bk1lbnVPcGVuOiAnYnMtZHJvcGRvd24tbWVudS0tb3BlbicsXG4gICAgICBoYXNOb3RpZmljYXRpb246ICdicy1kcm9wZG93bi1ub3RpZmljYXRpb25fX2l0ZW0tLWhhcy1ub3RpZmljYXRpb24nLFxuICAgICAgaW5Eb3duOiAnYnMtZHJvcGRvd24tbm90aWZpY2F0aW9uX19udW1iZXItLWluLWRvd24tY291bnQnLFxuICAgICAgaW5VcDogJ2JzLWRyb3Bkb3duLW5vdGlmaWNhdGlvbl9fbnVtYmVyLS1pbi11cC1jb3VudCcsXG4gICAgICBvdXREb3duOiAnYnMtZHJvcGRvd24tbm90aWZpY2F0aW9uX19udW1iZXItLW91dC1kb3duLWNvdW50JyxcbiAgICAgIG91dFVwOiAnYnMtZHJvcGRvd24tbm90aWZpY2F0aW9uX19udW1iZXItLW91dC11cC1jb3VudCcsXG4gICAgICBub3RpZmljYXRpb25OdW1iZXI6ICdicy1kcm9wZG93bi1ub3RpZmljYXRpb25fX251bWJlcicsXG4gICAgfSxcbiAgICBkcm9wZG93bk1lbnU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1kcm9wZG93bi1tZW51JyksXG4gICAgbm90aWZpY2F0aW9uTWVudTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWRyb3Bkb3duLW5vdGlmaWNhdGlvbicpLFxuICAgIG5vdGlmaWNhdGlvbkNvdW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtZHJvcGRvd24tbm90aWZpY2F0aW9uX19jb3VudCcpLFxuICAgIG5vdGlmaWNhdGlvbkNvdW50SW50OiBudWxsLFxuICAgIG5vdGlmaWNhdGlvbkl0ZW1zOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtZHJvcGRvd24tbWVudS1pdGVtJyksXG4gIH07XG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gSW5pY2lhbGl6YSBvIHZhbG9yIGRhIG5vdGlmaWNhw6fDo29cbiAgICB2YXIgaGFzTm90aWZpY2F0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBjb25maWcuY2xhc3Nlcy5kcm9wZG93bkhhc05vdGlmaWNhdGlvbik7XG4gICAgaWYgKGhhc05vdGlmaWNhdGlvbikge1xuICAgICAgY29uZmlnLm5vdGlmaWNhdGlvbkNvdW50SW50ID0gcGFyc2VJbnQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWRyb3Bkb3duLW5vdGlmaWNhdGlvbl9fY291bnQnKS50ZXh0Q29udGVudCwgMTApO1xuXG4gICAgICAvLyBNYXJjYSBub3RpZmljYcOnw6NvIGNvbW8gbGlkYVxuICAgICAgaWYgKGNvbmZpZy5ub3RpZmljYXRpb25JdGVtcykge1xuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5ub3RpZmljYXRpb25JdGVtcywgZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG1hcmtOb3RpZmljYXRpb25Bc1JlYWQobm90aWZpY2F0aW9uKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIE1hcmNhIGEgbm90aWZpY2HDp8OjbyBjb21vIG7Do28gbGlkYVxuICAgICAgaWYgKGNvbmZpZy5idXR0b25zLm1hcmtBc1VucmVhZCkge1xuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5idXR0b25zLm1hcmtBc1VucmVhZCwgZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgbWFya05vdGlmaWNhdGlvbkFzVW5yZWFkKG5vdGlmaWNhdGlvbik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBNYXJjYSB0b2RhcyBhcyBub3RpZmljYcOnw7VlcyBsaWRhc1xuICAgICAgaWYgKGNvbmZpZy5idXR0b25zLm1hcmtBbGxBc1JlYWQpIHtcbiAgICAgICAgY29uZmlnLmJ1dHRvbnMubWFya0FsbEFzUmVhZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgaGFzTm90aWZpY2F0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBjb25maWcuY2xhc3Nlcy5oYXNOb3RpZmljYXRpb24pO1xuICAgICAgICAgIHZhciBkcm9wZG93biA9IGdldFBhcmVudHModGhpcywgJ2JzLWRyb3Bkb3duLW1lbnUnLCB0cnVlKVswXTtcblxuICAgICAgICAgIGNvbmZpZy5ub3RpZmljYXRpb25Db3VudEludCA9IDA7XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBjb25maWcuY2xhc3Nlcy5ub3RpZmljYXRpb25OdW1iZXIpLnRleHRDb250ZW50ID0gY29uZmlnLm5vdGlmaWNhdGlvbkNvdW50SW50O1xuICAgICAgICAgIGRyb3Bkb3duLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmNsYXNzZXMuZHJvcGRvd25IYXNOb3RpZmljYXRpb24pO1xuXG4gICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChoYXNOb3RpZmljYXRpb24sIGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5jbGFzc2VzLmhhc05vdGlmaWNhdGlvbik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgbm90aWZpY2HDp8Ojb1xuICAgICAgaWYgKGNvbmZpZy5idXR0b25zLnJlbW92ZU5vdGlmaWNhdGlvbikge1xuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5idXR0b25zLnJlbW92ZU5vdGlmaWNhdGlvbiwgZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgcmVtb3ZlTm90aWZpY2F0aW9uKGJ1dHRvbik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFicmUvZmVjaGEgbyBEcm9wZG93biBNZW51XG4gICAgaWYgKGNvbmZpZy5idXR0b25zLmRyb3Bkb3duTWVudVRyaWdnZXIpIHtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLmJ1dHRvbnMuZHJvcGRvd25NZW51VHJpZ2dlciwgZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIHRvZ2dsZURyb3Bkb3duTWVudShidXR0b24pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBQcmV2aW5lIGJ1ZyBhbyBjYXJyZWdhciBvIGNvbXBvbmVudGVcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBCc1RleHRFbGxpcHNpcy5pbml0KHtcbiAgICAgICAgICBlbGVtZW50OiAnLmJzLWRyb3Bkb3duLW1lbnVfX2Rlc2NyaXB0aW9uJyxcbiAgICAgICAgICBtYXhIZWlnaHQ6IDQyLFxuICAgICAgICB9KTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfVxuICB9O1xuXG4gIHZhciB0b2dnbGVEcm9wZG93bk1lbnUgPSBmdW5jdGlvbiAoYnV0dG9uKSB7XG4gICAgdmFyIGlzT3BlbiA9IGJ1dHRvbi5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucyhjb25maWcuY2xhc3Nlcy5kcm9wZG93bk1lbnVPcGVuKTtcblxuICAgIGlmIChpc09wZW4pIGNsb3NlRHJvcGRvd25NZW51KCk7XG4gICAgZWxzZSBvcGVuRHJvcGRvd25NZW51QnV0dG9uKGJ1dHRvbik7XG4gIH07XG5cbiAgdmFyIG9wZW5Ecm9wZG93bk1lbnVCdXR0b24gPSBmdW5jdGlvbiAoYnV0dG9uKSB7XG4gICAgY2xvc2VEcm9wZG93bk1lbnUoKTtcbiAgICBidXR0b24ucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5jbGFzc2VzLmRyb3Bkb3duTWVudU9wZW4pO1xuICB9O1xuXG4gIHZhciBjbG9zZURyb3Bkb3duTWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICBCc0NvbnRleHRNZW51LmNsb3NlQWxsQ29udGV4dE1lbnUoKTtcblxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLmJ1dHRvbnMuZHJvcGRvd25NZW51VHJpZ2dlciwgZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgICAgYnV0dG9uLnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuY2xhc3Nlcy5kcm9wZG93bk1lbnVPcGVuKTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgbWFya05vdGlmaWNhdGlvbkFzVW5yZWFkID0gZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xuICAgIHZhciBub3RpZmljYXRpb25JdGVtID0gZ2V0UGFyZW50cyhub3RpZmljYXRpb24sICdicy1kcm9wZG93bi1tZW51X19pdGVtJywgdHJ1ZSlbMF07XG5cbiAgICBpZiAoIW5vdGlmaWNhdGlvbkl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKGNvbmZpZy5jbGFzc2VzLmhhc05vdGlmaWNhdGlvbikpIHtcbiAgICAgIG5vdGlmaWNhdGlvbkl0ZW0uY2xhc3NMaXN0LmFkZChjb25maWcuY2xhc3Nlcy5oYXNOb3RpZmljYXRpb24pO1xuICAgICAgaW5jcmVhc2VOb3RpZmljYXRpb25Db3VudCgpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgbWFya05vdGlmaWNhdGlvbkFzUmVhZCA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcbiAgICBpZiAobm90aWZpY2F0aW9uLmNsYXNzTGlzdC5jb250YWlucyhjb25maWcuY2xhc3Nlcy5oYXNOb3RpZmljYXRpb24pKSB7XG4gICAgICBub3RpZmljYXRpb24uY2xhc3NMaXN0LnJlbW92ZShjb25maWcuY2xhc3Nlcy5oYXNOb3RpZmljYXRpb24pO1xuICAgICAgZGVjcmVhc2VOb3RpZmljYXRpb25Db3VudCgpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgcmVtb3ZlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgIC8vIFNlbGVjaW9uYSBhIG5vdGlmaWNhw6fDo29cbiAgICB2YXIgbm90aWZpY2F0aW9uSXRlbSA9IGdldFBhcmVudHMoYnV0dG9uLCAnYnMtZHJvcGRvd24tbWVudV9faXRlbScsIHRydWUpWzBdO1xuXG4gICAgLy8gUmVtb3ZlIGEgbm90aWZpY2HDp8OjbyBkYSBsaXN0YVxuICAgIG5vdGlmaWNhdGlvbkl0ZW0uY2xhc3NMaXN0LmFkZCgnYnMtZHJvcGRvd24tbWVudV9faXRlbS0tcmVtb3ZpbmcnKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIG5vdGlmaWNhdGlvbkl0ZW0ucmVtb3ZlKCk7XG4gICAgfSwgMjAwKTtcblxuICAgIC8vIFZlcmlmaWNhIHNlIGEgbm90aWZpw6fDo28gdGVtIGEgY2xhc3NlIHBhcmEgYXR1YWxpemFyIG8gY29udGFkb3JcbiAgICBpZiAobm90aWZpY2F0aW9uSXRlbS5jbGFzc0xpc3QuY29udGFpbnMoY29uZmlnLmNsYXNzZXMuaGFzTm90aWZpY2F0aW9uKSkge1xuICAgICAgZGVjcmVhc2VOb3RpZmljYXRpb25Db3VudCgpO1xuICAgIH1cbiAgfTtcblxuICAvLyBBdW1lbnRhIG8gY29udGFkb3IgZGUgbm90aWZpY2HDp8O1ZXNcbiAgdmFyIGluY3JlYXNlTm90aWZpY2F0aW9uQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uZmlnLm5vdGlmaWNhdGlvbkNvdW50SW50Kys7XG5cbiAgICAvLyB2ZXJpZmljYSBzZSBvIGNvbnRhZG9yIGVzdMOhIHNlbmRvIGV4aWJpZG9cbiAgICBpZiAoXG4gICAgICBjb25maWcubm90aWZpY2F0aW9uQ291bnRJbnQgPiAwICYmXG4gICAgICAhY29uZmlnLm5vdGlmaWNhdGlvbk1lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKGNvbmZpZy5jbGFzc2VzLmRyb3Bkb3duSGFzTm90aWZpY2F0aW9uKVxuICAgICkge1xuICAgICAgY29uZmlnLm5vdGlmaWNhdGlvbk1lbnUuY2xhc3NMaXN0LmFkZChjb25maWcuY2xhc3Nlcy5kcm9wZG93bkhhc05vdGlmaWNhdGlvbik7XG4gICAgfVxuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBjb25maWcuY2xhc3Nlcy5ub3RpZmljYXRpb25OdW1iZXIpLmNsYXNzTGlzdC5hZGQoY29uZmlnLmNsYXNzZXMub3V0VXApO1xuICAgIHVwZGF0ZU5vdGlmaWNhdGlvbignaW5jcmVhc2UnKTtcbiAgfTtcblxuICAvLyBEaW1pbnVpIG8gY29udGFkb3IgZGUgbm90aWZpY2HDp8O1ZXNcbiAgdmFyIGRlY3JlYXNlTm90aWZpY2F0aW9uQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGNvbmZpZy5ub3RpZmljYXRpb25Db3VudEludCA+IDApIHtcbiAgICAgIGNvbmZpZy5ub3RpZmljYXRpb25Db3VudEludC0tO1xuXG4gICAgICAvLyB2ZXJpZmljYSBzZSBvIGNvbnRhZG9yIGVzdMOhIHNlbmRvIGV4aWJpZG9cbiAgICAgIGlmIChjb25maWcubm90aWZpY2F0aW9uQ291bnRJbnQgPT09IDApIHtcbiAgICAgICAgY29uZmlnLm5vdGlmaWNhdGlvbk1lbnUuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuY2xhc3Nlcy5kcm9wZG93bkhhc05vdGlmaWNhdGlvbik7XG4gICAgICB9XG5cbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgY29uZmlnLmNsYXNzZXMubm90aWZpY2F0aW9uTnVtYmVyKS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5jbGFzc2VzLm91dERvd24pO1xuICAgICAgdXBkYXRlTm90aWZpY2F0aW9uKCdkZWNyZWFzZScpO1xuICAgIH1cbiAgfTtcblxuICAvLyBBdHVhbGl6YSBvIGNvbnRhZG9yIGRlIG5vdGlmaWNhw6fDtWVzXG4gIHZhciB1cGRhdGVOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAoaW5jcmVhc2VEZWNyZWFzZSkge1xuICAgIC8vIGRlYnVnZ2VyO1xuICAgIHZhciBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIHZhciBhbmltYXRpb25DbGFzc2VzID0gZ2V0Tm90aWZpY2F0aW9uQ2xhc3MoaW5jcmVhc2VEZWNyZWFzZSk7XG5cbiAgICAvLyBJbmNsdWkgbyBub3ZvIGNvbnRhZG9yIG5vIERPTVxuICAgIC8vIENvbW8gc2UgZXN0aXZlc3NlIGVtcHVycmFuZG8gbyBjb250YWRvciBhbnRpZ28gcGFyYSBjaW1hL2JhaXhvXG4gICAgc3Bhbi50ZXh0Q29udGVudCA9IGNvbmZpZy5ub3RpZmljYXRpb25Db3VudEludDtcbiAgICBzcGFuLmNsYXNzTGlzdC5hZGQoJ2JzLWRyb3Bkb3duLW5vdGlmaWNhdGlvbl9fbnVtYmVyJywgYW5pbWF0aW9uQ2xhc3Nlc1swXSk7XG4gICAgY29uZmlnLm5vdGlmaWNhdGlvbkNvdW50LmFwcGVuZENoaWxkKHNwYW4pO1xuXG4gICAgLy8gRGVsYXkgcGFyYSBxdWUgbyBjb250YWRvciBzZWphIGVtcHVycmFkb1xuICAgIC8vIEVudMOjbyByZW1vdmVtb3MgbyBjb250YWRvciBhbnRpZ28gZSBhIGNsYXNzZSBkZSBhbmltYcOnw6NvIGRvIG5vdm8gY29udGFkb3JcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgYW5pbWF0aW9uQ2xhc3Nlc1sxXSkucmVtb3ZlKCk7XG4gICAgICBzcGFuLmNsYXNzTGlzdC5yZW1vdmUoYW5pbWF0aW9uQ2xhc3Nlc1swXSk7XG4gICAgfSwgMjAwKTtcbiAgfTtcblxuICAvLyBPYnTDqW0gYSBjbGFzc2UgZGUgYW5pbWHDp8OjbyBkbyBjb250YWRvciBkZSBub3RpZmljYcOnw7Vlc1xuICB2YXIgZ2V0Tm90aWZpY2F0aW9uQ2xhc3MgPSBmdW5jdGlvbiAoaW5jcmVhc2VEZWNyZWFzZSkge1xuICAgIHZhciBjbGFzc0luID0gJyc7XG4gICAgdmFyIGNsYXNzT3V0ID0gJyc7XG5cbiAgICAvLyBBdHJpYnVpIGFzIGNsYXNzZXMgQ1NTIGRlIGFuaW1hw6fDo29cbiAgICBpZiAoaW5jcmVhc2VEZWNyZWFzZSA9PT0gJ2luY3JlYXNlJykge1xuICAgICAgY2xhc3NJbiA9IGNvbmZpZy5jbGFzc2VzLmluVXA7XG4gICAgICBjbGFzc091dCA9IGNvbmZpZy5jbGFzc2VzLm91dFVwO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbGFzc0luID0gY29uZmlnLmNsYXNzZXMuaW5Eb3duO1xuICAgICAgY2xhc3NPdXQgPSBjb25maWcuY2xhc3Nlcy5vdXREb3duO1xuICAgIH1cblxuICAgIHJldHVybiBbY2xhc3NJbiwgY2xhc3NPdXRdO1xuICB9O1xuXG4gIC8vIENsb3NlIG1lbnUgb24gY2xpY2sgb3V0c2lkZVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5idXR0b25zLmRyb3Bkb3duTWVudVRyaWdnZXIsIGZ1bmN0aW9uIChidXR0b24pIHtcbiAgICAgIGlmIChcbiAgICAgICAgYnV0dG9uLnBhcmVudE5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKGNvbmZpZy5jbGFzc2VzLmRyb3Bkb3duTWVudU9wZW4pICYmXG4gICAgICAgICFidXR0b24ubmV4dEVsZW1lbnRTaWJsaW5nLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgY2xvc2VEcm9wZG93bk1lbnUoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGluaXQ6IGluaXQsXG4gIH07XG59KCkpO1xuXG4vKipcbiAqIEluaXQgQnNEcm9wZG93bk1lbnUgY29uc3RydWN0b3JcbiAqIEByZXR1cm4ge3ZvaWR9IEJzRHJvcGRvd25NZW51LmluaXQoKTtcbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1kcm9wZG93bi1tZW51JykubGVuZ3RoKSB7XG4gICAgQnNEcm9wZG93bk1lbnUuaW5pdCgpO1xuICB9XG59KTtcbiIsIi8qKlxuICogQnMgRmlsdGVyIChhbmNob3IpXG4gKi9cbnZhciBCc0ZpbHRlciA9IChmdW5jdGlvbiAoKSB7XG4gIC8vIEVsZW1lbnRzXG4gIHZhciBlbGVtZW50cyA9IHt9O1xuICB2YXIgJCA9IGVsZW1lbnRzO1xuICAkLmJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG4gICQuZmlsdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWpzLWZpbHRlcicpO1xuXG4gIGlmICghJC5maWx0ZXIpIHJldHVybjtcblxuICAkLm5hdiA9ICQuZmlsdGVyLnF1ZXJ5U2VsZWN0b3IoJy5icy1qcy1maWx0ZXItLW5hdicpO1xuICAkLnRvZ2dsZSA9ICQuZmlsdGVyLnF1ZXJ5U2VsZWN0b3IoJy5icy1qcy1maWx0ZXItLXRvZ2dsZScpO1xuICAvLyAkLmRyb3Bkb3duID0gbmV3IEJzRHJvcGRvd24oKTtcbiAgJC5saXN0ID0gJC5maWx0ZXIucXVlcnlTZWxlY3RvcignLmJzLWpzLWZpbHRlci0tbGlzdCcpO1xuICAkLmdyaWQgPSAkLmZpbHRlci5xdWVyeVNlbGVjdG9yKCcuZ3JpZCcpO1xuICAkLml0ZW1zID0gJC5saXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1maWx0ZXItLWl0ZW0nKTtcblxuICAvLyBDb25maWdcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBmaWx0ZXI6IG51bGwsXG4gICAgaXRlbVNlbGVjdG9yOiAnLmJzLWpzLWZpbHRlci0taXRlbScsXG4gICAgaXRlbVNpemVyU2VsZWN0b3I6ICcuYnMtanMtZmlsdGVyLS1zaXplcicsXG4gICAgYnV0dG9uQWN0aXZlQ2xhc3M6ICdicy1maWx0ZXItbGluay0tYWN0aXZlJyxcbiAgICBpdGVtQWN0aXZlQ2xhc3M6ICdicy1maWx0ZXJfX2l0ZW0tLXZpc2libGUnLFxuICAgIGl0ZW1TZWxlY3Rvckxpc3Q6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1maWx0ZXItLWl0ZW0nKSxcbiAgICBidXR0b25zOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtZmlsdGVyLS1idXR0b24nKSxcbiAgICBzZWxlY3RzIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLWZpbHRlci0tbmF2IHNlbGVjdCcpLFxuICAgIGNoZWNrYm94ZXMgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtZmlsdGVyLS1uYXYgaW5wdXQnKSxcbiAgICBzbGlkZXIgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtanMtbW9kYWwtY2Fyb3VzZWwnKSxcbiAgICBzZWxlY3RzTm9kZSA6IFtdLFxuICAgIGNoZWNrYm94ZXNOb2RlIDogW11cbiAgfTtcblxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBSZXRvcm5hIGl0ZW5zIGZpbHRyYWRvc1xuICAgIGZpbHRlck1hc29ucnkoKVxuXG4gICAgLy8gLSBQZXJjb3JyZSBuYXZlZ2HDp8OjbyBkZSBpY29uZXMgb3UgdGFicyBzdXBlcmlvciBzZSBleHNpdGlyXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuYnV0dG9ucywgZnVuY3Rpb24gKGVsKSB7XG4gICAgICB2YXIgdGFnID0gZWwuZGF0YXNldC5maWx0ZXI7XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYWN0aXZlQnV0dG9uKGVsKVxuICAgICAgICBmaWx0ZXJJdGVtcyh0YWcpXG4gICAgICB9KVxuICAgIH0pXG4gICAgLy8tIHBlcmNvcnJlIHNlbGVjdHMgZSByZXRvcm5hXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuc2VsZWN0cywgZnVuY3Rpb24oZWxlbSkge1xuICAgICAgY29uZmlnLnNlbGVjdHNOb2RlLnB1c2goZWxlbSlcbiAgICB9KVxuICAgIC8vLSBwZXJjb3JyZSBjaGVja2JveCBwZWxvIGRhdGEgZmlsdGVyLCByZXRvcm5hIGUgYXR1YWxpemEgbyBjb21wb25lbnRlIHNlIGNoZWNrZWRcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5jaGVja2JveGVzLCBmdW5jdGlvbihlbGVtKSB7XG4gICAgICBjb25maWcuY2hlY2tib3hlc05vZGUucHVzaChlbGVtKTtcbiAgICAgIGlmIChlbGVtLmNoZWNrZWQpIHtcbiAgICAgICAgdmFyIHRhZyA9IGVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWZpbHRlcicpXG4gICAgICAgIGZpbHRlckl0ZW1zKHRhZylcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gQ29udGFjYXRlbmEgb3MgZWxlbWVudG8gZGUgc2VsZWN0IGUgY2hlY2tib3ggcGFyYSByZWFsaXphciBvIGZpbHRybyBtdWx0aXBsbyBuYSBzZXF1ZW5jaWFcbiAgICB2YXIgcmV0dXJuQWxsRXZlbnQgPSBjb25maWcuc2VsZWN0c05vZGUuY29uY2F0KGNvbmZpZy5jaGVja2JveGVzTm9kZSlcblxuICAgIC8vIC1BcGxpY2EgY29uZGnDp8O1ZXMgcGFyYSBzZXRhciBmaWx0cm9zIGUgc3VhcyBjb21wYXJhw6fDtWVzIGEgcGFydGlyIGRvIGV2ZW50byBjaGFuZ2VcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHJldHVybkFsbEV2ZW50LCBmdW5jdGlvbihlbGVtKXtcbiAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgcnVuKVxuICAgIH0pXG5cbiAgICBydW4oKTtcbiAgfTtcblxuICB2YXIgcnVuID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIG1hcCBpbnB1dCB2YWx1ZXMgdG8gYW4gYXJyYXlcbiAgICB2YXIgZXhjbHVzaXZlcyA9IFtdXG4gICAgdmFyIGluY2x1c2l2ZXMgPSBbXVxuXG4gICAgLy8tIEF0cmlidWkgb3B0aW9ucyBkZSBjYWRhIHNlbGVjdFxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLnNlbGVjdHMsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgdmFyIGF0dHIgPSBlbC5vcHRpb25zW2VsLnNlbGVjdGVkSW5kZXhdLmdldEF0dHJpYnV0ZSgnZGF0YS1maWx0ZXInKVxuICAgICAgLy92YXIgYXR0clZhbHVlID0gZWwub3B0aW9uc1tlbC5zZWxlY3RlZEluZGV4XS52YWx1ZVxuICAgICAgaWYgKGF0dHIpXG4gICAgICAgIGV4Y2x1c2l2ZXMucHVzaChhdHRyKTtcblxuICAgICAgLy8gUGVyY29ycmUgTGlzdGEgYXBvcyBzZWxlY3QgY2hhbmdlIGUgcmVtb3ZlIGEgY2xhc3NlIHBhcmEgbyBmbGlja2l0eSwgYXDDs3MgY2hhbmdlIMOpIGFkaWNpb25hZG8gbm8gT04uYXJyYW5nZSBhIGNsYXNzZSBubyBpdGVtIHNlbGVjaW9uYVxuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuaXRlbVNlbGVjdG9yTGlzdCxmdW5jdGlvbihlbCkge1xuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdicy1qcy1maWx0ZXItLW1vZGFsJyk7XG4gICAgICB9KVxuICAgIH0pXG5cbiAgICAvLyBBdHJpYnVpIGFvIENoZWNrYm94IG8gaXRlbSBhIHNlciB2ZXJpZmljYWRvXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuY2hlY2tib3hlcywgZnVuY3Rpb24gKGVsKSB7XG4gICAgICBpZiAoZWwuY2hlY2tlZCkge1xuICAgICAgICB2YXIgYXR0ciA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1maWx0ZXInKTtcbiAgICAgICAgaW5jbHVzaXZlcy5wdXNoKGF0dHIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQXJtYXplbmEgb3Mgb3B0aW9ucyBlIG9zIHNlcGFyYVxuICAgIGV4Y2x1c2l2ZXMgPSBleGNsdXNpdmVzLmpvaW4oJycpO1xuXG4gICAgdmFyIHRhZztcbiAgICAvLyBWZXJpZmljYcOnw6NvIHNlIGhvdXZlciBjaGVja2Vib3hcbiAgICBpZiAoaW5jbHVzaXZlcy5sZW5ndGgpe1xuICAgICAgLy8gTWFwIHBhcmEgcmV0b3JuYXIgb3MgZG9pcyB2YWxvcmVzIGUgb3Mgc2VwYXJhXG4gICAgICAvLyBkZWJ1Z2dlclxuICAgICAgdGFnID0gaW5jbHVzaXZlcy5tYXAoIGZ1bmN0aW9uKCB2YWx1ZSApIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlICsgZXhjbHVzaXZlc1xuICAgICAgfSlcbiAgICAgIHRhZyA9IHRhZy5qb2luKCcsICcpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRhZyA9IGV4Y2x1c2l2ZXM7XG4gICAgfVxuICAgIGZpbHRlckl0ZW1zKHRhZylcbiAgfVxuXG4gIHZhciBmaWx0ZXJNYXNvbnJ5ID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbmZpZy5maWx0ZXIgPSBuZXcgSXNvdG9wZSgkLmxpc3QsIHtcbiAgICAgIGxheW91dE1vZGU6ICdwYWNrZXJ5JyxcbiAgICAgIGl0ZW1TZWxlY3RvcjogY29uZmlnLml0ZW1TZWxlY3RvcixcbiAgICAgIGNvbHVtbldpZHRoOiBjb25maWcuaXRlbVNpemVyU2VsZWN0b3IsXG4gICAgICBwZXJjZW50UG9zaXRpb246IHRydWUsXG4gICAgICByb3dIZWlnaHQ6IDMyMCxcbiAgICB9KTtcblxuICAgIC8vIEFwbGljYSBmdW7Dp8OjbyBkYSBjbGFzc2UgbW9kYWwgYSBpdGVucyByZXRvcm5hZG9zXG4gICAgY29uZmlnLmZpbHRlci5vbignYXJyYW5nZUNvbXBsZXRlJywgZnVuY3Rpb24gKGZpbHRlcmVkSXRlbXMpIHtcbiAgICAgIHZhciBmaWx0ZXJlZEl0ZW1zQXJyYXkgPSBmaWx0ZXJlZEl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbS5lbGVtZW50O1xuICAgICAgfSk7XG5cblxuICAgICAgdmFyIGZpbHRlcmVkSXRlbXNJbmRleCA9IEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChjb25maWcuaXRlbVNlbGVjdG9yTGlzdCwgZnVuY3Rpb24gKGVsLCBpbmRleCkge1xuICAgICAgICAvLyBpZiAoZmlsdGVyZWRJdGVtc0FycmF5LmluZGV4T2YoZWwpKVxuICAgICAgICBpZiAoZmlsdGVyZWRJdGVtc0FycmF5LmluY2x1ZGVzKGVsKSlcbiAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICB9KTtcblxuICAgICAgdmFyIGl0ZW1zSW5kZXggPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoZmlsdGVyZWRJdGVtc0luZGV4LCBmdW5jdGlvbiAoZWwsIGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgZWwgIT09ICd1bmRlZmluZWQnXG4gICAgICB9KTtcblxuICAgICAgLy9kZWJ1Z2dlclxuICAgICAgaWYgKGNvbmZpZy5zbGlkZXIpIEJzTW9kYWxMaXN0LmxvYWRTbGlkZXIoY29uZmlnLnNsaWRlciwgaXRlbXNJbmRleCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gLSBBcGxpY2EgZmlsdGVyIHRhZyBkYXMgY29uZmlndXJhw6fDtWVzIGUgY29uZGnDp8O1ZXNcbiAgdmFyIGZpbHRlckl0ZW1zID0gZnVuY3Rpb24gKHRhZykge1xuICAgIGlmICh0eXBlb2YgdGFnICE9PSAnc3RyaW5nJykgcmV0dXJuXG4gICAgaWYgKHRhZyAhPT0gJyonICYmIHRhZy5pbmRleE9mKCcuJykgIT09IDAgJiYgdGFnICE9PSAnJykge1xuICAgICAgdGFnID0gJy4nICsgdGFnO1xuICAgIH1cbiAgICBjb25maWcuZmlsdGVyLmFycmFuZ2UoeyBmaWx0ZXI6IHRhZyB9KVxuICB9XG5cbiAgdmFyIGFjdGl2ZUJ1dHRvbiA9IGZ1bmN0aW9uIChlbCkge1xuICAgIHZhciBpdGVtQWN0aXZlID0gJC5uYXYucXVlcnlTZWxlY3RvcignLicgKyBjb25maWcuYnV0dG9uQWN0aXZlQ2xhc3MpO1xuICAgIGlmIChpdGVtQWN0aXZlKSBpdGVtQWN0aXZlLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmJ1dHRvbkFjdGl2ZUNsYXNzKTtcbiAgICBlbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5idXR0b25BY3RpdmVDbGFzcyk7XG4gICAgdXBkYXRlTGFiZWwoZWwuaW5uZXJIVE1MKTtcbiAgfTtcblxuICB2YXIgdXBkYXRlTGFiZWwgPSBmdW5jdGlvbiAobGFiZWwpIHtcbiAgICB2YXIgc3BhbiA9ICQudG9nZ2xlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKTtcbiAgICBzcGFuLmlubmVySFRNTCA9IGxhYmVsO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdCxcbiAgICBmaWx0ZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBjb25maWcuZmlsdGVyXG4gICAgfSxcbiAgICBydW46IHJ1bixcbiAgfTtcbn0oKSk7XG5cbi8qKlxuICogSW5pdCBGaWx0ZXIgQ29uc3RydWN0b3JcbiAqIEByZXR1cm4ge3ZvaWR9IEhlYWRlci5pbml0KCk7XG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtZmlsdGVyJykubGVuZ3RoKSB7XG4gICAgQnNGaWx0ZXIuaW5pdCgpO1xuICB9XG59KVxuIiwiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIG1haW5Gb290ZXJSZWFkeSk7XG5cbi8qKlxuICogSW5pdCBGb290ZXJcbiAqL1xuZnVuY3Rpb24gbWFpbkZvb3RlclJlYWR5KCkge1xuICB2YXIgbWFpblJlYWR5ID0gbmV3IEJzRm9vdGVyKCk7XG4gIG1haW5SZWFkeS5pbml0KCk7XG59XG5cbi8qKlxuICogRm9vdGVyXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gQnNGb290ZXIoKSB7XG4gIHRoaXMuZGVmYXVsdFRpdGxlSGVpZ2h0ID0gNjA7XG4gIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgdGhpcy5idXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtaXRlbS1saXN0Jyk7XG4gIHRoaXMubWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1pdGVtLW1lbnUnKTtcbiAgdGhpcy5pc01vYmlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gd2luZG93LmlubmVyV2lkdGggPCA3Njg7XG4gIH07XG59XG5cbkJzRm9vdGVyLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IEJzRm9vdGVyLFxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF8gPSB0aGlzO1xuICAgIHZhciBpO1xuXG4gICAgaWYgKHRoaXMuaXNNb2JpbGUoKSAmJiAhdGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgdGhpcy5fYnVpbGQoKTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmJ1dHRvbi5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICB0aGlzLmJ1dHRvbltpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoIXRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdicy1mb290ZXItbmF2X19ncm91cC0taXMtb3BlbicpKSB7XG4gICAgICAgICAgICBfLl9jbG9zZSgpO1xuICAgICAgICAgICAgXy5fb3Blbih0aGlzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgXy5fY2xvc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5tZW51Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHRoaXMubWVudVtpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghdGhpcy5pc01vYmlsZSgpICYmIHRoaXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgIHRoaXMuX2Rlc3Ryb3koKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNNb2JpbGUoKSAmJiB0aGlzLmluaXRpYWxpemVkKSB7XG4gICAgICAvLyBkZWJ1Z2dlcjtcbiAgICB9XG5cbiAgICB3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfLl9yZXNpemUoKTtcbiAgICB9O1xuICB9LFxuXG4gIF9yZXNpemU6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5pc01vYmlsZSgpICYmICF0aGlzLmluaXRpYWxpemVkKSB7XG4gICAgICB0aGlzLl9idWlsZCgpO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNNb2JpbGUoKSAmJiB0aGlzLmluaXRpYWxpemVkKSB7XG4gICAgICB0aGlzLl9kZXN0cm95KCk7XG4gICAgfVxuICB9LFxuXG4gIF9idWlsZDogZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5idXR0b24ubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGlmICghdGhpcy5idXR0b25baV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdicy1mb290ZXItbmF2X19ncm91cC0taXMtb3BlbicpKSB7XG4gICAgICAgIHRoaXMuYnV0dG9uW2ldLnN0eWxlLmhlaWdodCA9IHRoaXMuZGVmYXVsdFRpdGxlSGVpZ2h0ICsgJ3B4JztcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gIH0sXG5cbiAgX2Rlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYnV0dG9uLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICB0aGlzLmJ1dHRvbltpXS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgfVxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgfSxcblxuICBfb3BlbjogZnVuY3Rpb24gKGVsKSB7XG4gICAgdmFyIGk7XG4gICAgdmFyIGVsZW1Db250YWluZXIgPSBlbC5xdWVyeVNlbGVjdG9yKCcuanMtaXRlbS1tZW51Jyk7XG4gICAgdmFyIHRpdGxlSGVpZ2h0ID0gZWwub2Zmc2V0SGVpZ2h0O1xuICAgIHZhciBlbGVtSGVpZ2h0ID0gZWxlbUNvbnRhaW5lci5vZmZzZXRIZWlnaHQgKyB0aXRsZUhlaWdodDtcblxuICAgIGlmICh0aGlzLmlzTW9iaWxlKCkpIHtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmJ1dHRvbi5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICB0aGlzLmJ1dHRvbltpXS5zdHlsZS5oZWlnaHQgPSB0aXRsZUhlaWdodCArICdweCc7XG4gICAgICB9XG5cbiAgICAgIGVsLnN0eWxlLmhlaWdodCA9IGVsZW1IZWlnaHQgKyAncHgnO1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYnMtZm9vdGVyLW5hdl9fZ3JvdXAtLWlzLW9wZW4nKTtcbiAgICB9XG4gIH0sXG5cbiAgX2Nsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGk7XG4gICAgdmFyIHRpdGxlSGVpZ2h0ID0gdGhpcy5kZWZhdWx0VGl0bGVIZWlnaHQ7XG4gICAgaWYgKHRoaXMuaXNNb2JpbGUoKSkge1xuICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuYnV0dG9uLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHRoaXMuYnV0dG9uW2ldLnN0eWxlLmhlaWdodCA9IHRpdGxlSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgdGhpcy5idXR0b25baV0uY2xhc3NMaXN0LnJlbW92ZSgnYnMtZm9vdGVyLW5hdl9fZ3JvdXAtLWlzLW9wZW4nKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG59O1xuIiwiLyoqXG4gKiBHYWxsZXJ5XG4gKiBAcmV0dXJuIE1vZHVsZSBjb25maWdcbiAqL1xudmFyIEJzR2FsbGVyeSA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG4gIHZhciBlbGVtID0gZWxlbWVudDtcbiAgdmFyIGNvbmZpZyA9IHt9O1xuXG4gIHZhciBzZXRDb25maWcgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZWw6IGVsLFxuICAgICAgbmF2SXRlbXM6IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1nYWxsZXJ5X190aHVtYicpLFxuICAgICAgaW1hZ2VzOiBlbC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtZ2FsbGVyeV9faXRlbScpLFxuICAgICAgbmF2SXRlbUFjdGl2ZUNsYXNzOiAnYnMtZ2FsbGVyeV9fdGh1bWItLWFjdGl2ZScsXG4gICAgICBpbWFnZUFjdGl2ZUNsYXNzOiAnYnMtZ2FsbGVyeV9faXRlbS0tYWN0aXZlJyxcbiAgICAgIHBhZ1RvdGFsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtZ2FsbGVyeV9fcGFnaW5hdGlvbi0tdG90YWwnKSxcbiAgICAgIHBhZ0NvdW50ZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1nYWxsZXJ5X19wYWdpbmF0aW9uLS1jb3VudGVyJyksXG4gICAgICBuYXZJbmRleDogMCxcbiAgICAgIG5hdk1vbWVudDogMCxcbiAgICB9O1xuICB9O1xuXG4gIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghZWxlbSB8fCB0eXBlb2YgZWxlbSAhPT0gJ29iamVjdCcpIHJldHVybjtcbiAgICBjb25maWcgPSBzZXRDb25maWcoZWxlbSk7XG5cbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5uYXZJdGVtcywgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG5cbiAgICAgIC8vIHN1bSBpbmRleCwgYWZ0ZXIgZWFjaCAtIHByaW50IGRpdlxuICAgICAgY29uZmlnLm5hdkluZGV4ID0gaW5kZXggKyAxO1xuXG4gICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2V0SXRlbS5iaW5kKG51bGwsIGl0ZW0pKTtcblxuICAgIH0pO1xuXG4gICAgY29uZmlnLnBhZ1RvdGFsLmlubmVySFRNTCA9IGNvbmZpZy5uYXZJbmRleDtcbiAgfTtcblxuICB2YXIgc2V0SXRlbSA9IGZ1bmN0aW9uIChuYXZJdGVtKSB7XG4gICAgdmFyIHRhcmdldEluZGV4ID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChjb25maWcubmF2SXRlbXMsIG5hdkl0ZW0pO1xuICAgIHZhciBjdXJyZW50TmF2SXRlbUFjdGl2ZSA9IGNvbmZpZy5lbC5xdWVyeVNlbGVjdG9yKCcuJyArIGNvbmZpZy5uYXZJdGVtQWN0aXZlQ2xhc3MpO1xuICAgIHZhciBjdXJyZW50SW1hZ2VBY3RpdmUgPSBjb25maWcuZWwucXVlcnlTZWxlY3RvcignLicgKyBjb25maWcuaW1hZ2VBY3RpdmVDbGFzcyk7XG5cbiAgICBjdXJyZW50TmF2SXRlbUFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5uYXZJdGVtQWN0aXZlQ2xhc3MpO1xuICAgIGN1cnJlbnRJbWFnZUFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbWFnZUFjdGl2ZUNsYXNzKTtcblxuICAgIG5hdkl0ZW0uY2xhc3NMaXN0LmFkZChjb25maWcubmF2SXRlbUFjdGl2ZUNsYXNzKTtcbiAgICBjb25maWcuaW1hZ2VzW3RhcmdldEluZGV4XS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbWFnZUFjdGl2ZUNsYXNzKTtcblxuICAgIC8vIFBhdXNhIG9zIHbDrWRlb3MgcXVlIGVzdGVqYW0gcm9kYW5kbyBkZW50cm8gZG8gbW9kYWxcbiAgICBpZiAoY3VycmVudEltYWdlQWN0aXZlLnF1ZXJ5U2VsZWN0b3IoJy5icy12aWRlbycpKSB7XG4gICAgICBCc1lUUGxheWVycy5nZXRQbGF5ZXIoY3VycmVudEltYWdlQWN0aXZlLnF1ZXJ5U2VsZWN0b3IoJy5icy12aWRlbycpLmlkKS5zdG9wVmlkZW8oKTtcbiAgICB9XG5cbiAgICAvLyBzdW0gaW5kZXggLSBwcmludCBkaXZcbiAgICBjb25maWcubmF2TW9tZW50ID0gdGFyZ2V0SW5kZXggKyAxO1xuICAgIGNvbmZpZy5wYWdDb3VudGVyLmlubmVySFRNTCA9IGNvbmZpZy5uYXZNb21lbnQ7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICB9O1xufTtcblxuLyoqXG4gKiBJbml0IEhlYWRlciBDb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH0gSGVhZGVyLmluaXQoKTtcbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIGdhbGxlcmllcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1nYWxsZXJ5Jyk7XG4gIGlmIChnYWxsZXJpZXMubGVuZ3RoKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChnYWxsZXJpZXMsIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICB2YXIgZ2FsbGVyeSA9IEJzR2FsbGVyeShlbGVtZW50LCB7fSk7XG4gICAgICBnYWxsZXJ5LmluaXQoKTtcbiAgICB9KTtcbiAgfVxufSk7XG4iLCIvKipcbiAqIEdyaWRcbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgLyogR3JpZCBGaWx0ZXIgZHJvcGRvd24gKi9cbiAgdmFyIGdyaWRGb3JtYXRUb2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtZ3JpZC10b2dnbGUtZm9ybWF0Jyk7XG4gIHZhciBkcm9wZG93blRvZ2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1qcy1ncmlkLXRvZ2dsZS1kcm9wZG93bicpO1xuICB2YXIgZ3JpZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtZ3JpZF9fbGlzdCcpO1xuICB2YXIgZ3JpZERyb3Bkb3duID0gbmV3IEJzRHJvcGRvd24oKTtcbiAgdmFyIGdyaWRGb3JtYXRDbGFzc2VzID0ge1xuICAgIGdyaWQ6ICdicy1tZWRpYS0tY29sMycsXG4gICAgbGlzdDogJ2JzLW1lZGlhLS1ob3Jpem9udGFsIGJzLW1lZGlhLS1pbWFnZS1wcm9wLTEtNCBicy1tZWRpYS0taHInLFxuICB9O1xuXG4gIGlmIChkcm9wZG93blRvZ2dsZSkge1xuICAgIGdyaWREcm9wZG93bi5pbml0KGRyb3Bkb3duVG9nZ2xlLCB7XG4gICAgICBkcm9wZG93bkVsZW1lbnQ6IGRyb3Bkb3duVG9nZ2xlLnBhcmVudE5vZGUsXG4gICAgICBkcm9wZG93bkFjdGl2ZUNsYXNzOiAnYnMtaXMtZXhwYW5kZWQnLFxuICAgIH0pO1xuICB9XG5cbiAgaWYgKGdyaWRMaXN0ICYmIGdyaWRGb3JtYXRUb2dnbGUpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGdyaWRGb3JtYXRUb2dnbGUsIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIHZhciB0eXBlID0gZXYuY3VycmVudFRhcmdldC52YWx1ZTtcbiAgICAgICAgZ3JpZExpc3QuY2xhc3NOYW1lID0gJ2JzLW1lZGlhIGJzLWdyaWRfX2xpc3QgJyArIGdyaWRGb3JtYXRDbGFzc2VzW3R5cGVdO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn0pO1xuIiwiLy8gLyoqXG4vLyAgKiBIZWFkZXJcbi8vICAqIEByZXR1cm4gTW9kdWxlIGNvbmZpZ1xuLy8gICovXG4vLyB2YXIgQnNIZWFkZXIgPSAoZnVuY3Rpb24gKCkge1xuLy8gICAvLyBDbGFzcyBNb2RpZmllcnNcbi8vICAgdmFyIG1vZENsYXNzID0ge1xuLy8gICAgIGhlYWRlckZpeGVkOiAnYnMtaGVhZGVyLS1maXhlZCcsXG4vLyAgICAgaGVhZGVyRmxvYXRpbmc6ICdicy1oZWFkZXItLWZsb2F0aW5nJyxcbi8vICAgICBoZWFkZXJBY2Nlc3NBY3RpdmU6ICdicy1oZWFkZXItLWFjY2Vzcy1vcGVuJyxcbi8vICAgICBhY2Nlc3NQYW5lbEFjdGl2ZTogJ2JzLWhlYWRlci1hY2Nlc3MtLW9wZW4nLFxuLy8gICAgIHRhYkFjdGl2ZTogJ2JzLXRhYnNfX2l0ZW0tLWFjdGl2ZScsXG4vLyAgICAgdGFiUGFuZWxBY3RpdmU6ICdicy10YWJzX19wYW5lbC0tYWN0aXZlJyxcbi8vICAgfTtcblxuLy8gICAvLyBET00gRWxlbWVudHNcbi8vICAgdmFyIGVsID0ge1xuLy8gICAgIGhlYWRlcjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWhlYWRlcicpLFxuLy8gICAgIG5hdkxpbmtzOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtaGVhZGVyLWxpbmtzJyksXG4vLyAgICAgYWNjZXNzUGFuZWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1oZWFkZXItYWNjZXNzJyksXG4vLyAgICAgYWNjZXNzTW9kYWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1oZWFkZXItYWNjZXNzX19tb2RhbCcpLFxuLy8gICAgIGFjY2Vzc1RhYnM6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy10YWJzJyksXG4vLyAgICAgYWNjZXNzVGFic05hdjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLXRhYnNfX25hdicpLFxuLy8gICAgIGFjY2Vzc1RhYnNJdGVtOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtdG9nZ2xlLXRhYicpLFxuLy8gICAgIGFjY2Vzc1RhYnNDb250YWluZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy10YWJzX19jb250YWluZXInKSxcbi8vICAgICBhY2Nlc3NUYWJzUGFuZWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy10YWJzX19wYW5lbCcpLFxuLy8gICAgIC8vIFRyaWdnZXJzXG4vLyAgICAgYnRuVG9nZ2xlQWNjZXNzUGFuZWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1qcy10b2dnbGUtYWNjZXNzLXBhbmVsJyksXG4vLyAgICAgYnRuQ2xvc2VBY2Nlc3NNb2RhbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWpzLWNsb3NlLWFjY2Vzcy1tb2RhbCcpLFxuLy8gICB9O1xuXG4vLyAgIC8qKlxuLy8gICAgKiBJbml0IGZ1bmN0aW9uXG4vLyAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBNb2R1bGUncyBzY29wZSBmdW5jdGlvbnNcbi8vICAgICovXG4vLyAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xuLy8gICAgIC8vIFRvZ2dsZSBBY2Nlc3MgUGFuZWxcbi8vICAgICBpZiAoZWwuYnRuVG9nZ2xlQWNjZXNzUGFuZWwpIHtcbi8vICAgICAgIGVsLmJ0blRvZ2dsZUFjY2Vzc1BhbmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3RvZ2dsZUFjY2Vzc1BhbmVsKTtcbi8vICAgICB9XG5cbi8vICAgICAvLyBDbG9zZSBBY2Nlc3MgUGFuZWwgTW9iaWxlIChNb2RhbClcbi8vICAgICBpZiAoZWwuYnRuQ2xvc2VBY2Nlc3NNb2RhbCkge1xuLy8gICAgICAgZWwuYnRuQ2xvc2VBY2Nlc3NNb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9jbG9zZUFjY2Vzc1BhbmVsKTtcbi8vICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuLy8gICAgICAgICBpZiAoXG4vLyAgICAgICAgICAgIWVsLmFjY2Vzc1RhYnMuY29udGFpbnMoZXZlbnQudGFyZ2V0KSAmJlxuLy8gICAgICAgICAgICFlbC5idG5Ub2dnbGVBY2Nlc3NQYW5lbC5jb250YWlucyhldmVudC50YXJnZXQpKSB7XG4vLyAgICAgICAgICAgX2Nsb3NlQWNjZXNzUGFuZWwoKTtcbi8vICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4vLyAgICAgICAgIH1cbi8vICAgICAgIH0pO1xuLy8gICAgIH1cblxuLy8gICAgIC8vIENoYW5nZSBBY2Nlc3MgUGFuZWwgVGFic1xuLy8gICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWwuYWNjZXNzVGFic0l0ZW0ubGVuZ3RoOyBpICs9IDEpIHtcbi8vICAgICAgIGVsLmFjY2Vzc1RhYnNJdGVtW2ldLmFkZEV2ZW50TGlzdGVuZXIoXG4vLyAgICAgICAgICdjbGljaycsXG4vLyAgICAgICAgIF9jaGFuZ2VUYWIuYmluZChudWxsLCBlbC5hY2Nlc3NUYWJzSXRlbVtpXSlcbi8vICAgICAgICk7XG4vLyAgICAgfVxuXG4vLyAgICAgLy8gU2V0IGZsb2F0aW5nIGNsYXNzIHRvIGhlYWVyXG4vLyAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIF9zZXRIZWFkZXJGbG9hdGluZyk7XG4vLyAgIH07XG5cbi8vICAgdmFyIF90b2dnbGVBY2Nlc3NQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbi8vICAgICB2YXIgYWNjZXNzSXNBY3RpdmUgPSAoXG4vLyAgICAgICAhZWwuaGVhZGVyLmNsYXNzTGlzdC5jb250YWlucyhtb2RDbGFzcy5oZWFkZXJBY2Nlc3NBY3RpdmUpIHx8XG4vLyAgICAgICAhZWwuYWNjZXNzUGFuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKG1vZENsYXNzLmFjY2Vzc1BhbmVsQWN0aXZlKVxuLy8gICAgICk7XG4vLyAgICAgaWYgKGFjY2Vzc0lzQWN0aXZlKSBfb3BlbkFjY2Vzc1BhbmVsKCk7XG4vLyAgICAgZWxzZSBfY2xvc2VBY2Nlc3NQYW5lbCgpO1xuLy8gICB9O1xuXG4vLyAgIHZhciBfb3BlbkFjY2Vzc1BhbmVsID0gZnVuY3Rpb24gKCkge1xuLy8gICAgIGVsLmhlYWRlci5jbGFzc0xpc3QuYWRkKG1vZENsYXNzLmhlYWRlckFjY2Vzc0FjdGl2ZSk7XG4vLyAgICAgZWwuYWNjZXNzUGFuZWwuY2xhc3NMaXN0LmFkZChtb2RDbGFzcy5hY2Nlc3NQYW5lbEFjdGl2ZSk7XG4vLyAgIH07XG5cbi8vICAgdmFyIF9jbG9zZUFjY2Vzc1BhbmVsID0gZnVuY3Rpb24gKCkge1xuLy8gICAgIGVsLmhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKG1vZENsYXNzLmhlYWRlckFjY2Vzc0FjdGl2ZSk7XG4vLyAgICAgZWwuYWNjZXNzUGFuZWwuY2xhc3NMaXN0LnJlbW92ZShtb2RDbGFzcy5hY2Nlc3NQYW5lbEFjdGl2ZSk7XG4vLyAgIH07XG5cbi8vICAgdmFyIF9jaGFuZ2VUYWIgPSBmdW5jdGlvbiAodGFiQWN0aXZlKSB7XG4vLyAgICAgdmFyIHRhYkluZGV4ID0gW10uc2xpY2UuY2FsbCh0YWJBY3RpdmUucGFyZW50Tm9kZS5jaGlsZHJlbikuaW5kZXhPZih0YWJBY3RpdmUpO1xuXG4vLyAgICAgLy8gQ2xlYW4gYWN0aXZlIHRhYiBjbGFzc1xuLy8gICAgIGVsLmFjY2Vzc1RhYnNOYXYucXVlcnlTZWxlY3RvcignLicgKyBtb2RDbGFzcy50YWJBY3RpdmUpXG4vLyAgICAgICAuY2xhc3NMaXN0LnJlbW92ZShtb2RDbGFzcy50YWJBY3RpdmUpO1xuXG4vLyAgICAgLy8gU2V0IGFjdGl2ZSBjbGFzcyB0byBjbGlja2VkIHRhYlxuLy8gICAgIHRhYkFjdGl2ZS5jbGFzc0xpc3QuYWRkKG1vZENsYXNzLnRhYkFjdGl2ZSk7XG5cbi8vICAgICAvLyBDbGVhbiBhY3RpdmUgdGFicycgcGFuZWwgY2xhc3Ncbi8vICAgICBlbC5hY2Nlc3NUYWJzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy4nICsgbW9kQ2xhc3MudGFiUGFuZWxBY3RpdmUpXG4vLyAgICAgICAuY2xhc3NMaXN0LnJlbW92ZShtb2RDbGFzcy50YWJQYW5lbEFjdGl2ZSk7XG5cbi8vICAgICAvLyBTZXQgYWN0aXZlIGNsYXNzIHRvIHBhbmVsIHRoYXQgcmVmZXJzIHRvIHRhYiBjbGlja2VkXG4vLyAgICAgZWwuYWNjZXNzVGFic1BhbmVsW3RhYkluZGV4XS5jbGFzc0xpc3QuYWRkKG1vZENsYXNzLnRhYlBhbmVsQWN0aXZlKTtcbi8vICAgfTtcblxuLy8gICB2YXIgX3NldEhlYWRlckZsb2F0aW5nID0gZnVuY3Rpb24gKCkge1xuLy8gICAgIGlmIChfd2luZG93U2Nyb2xsRGlyZWN0aW9uKCkgPT09ICdkb3duJykgZWwuaGVhZGVyLmNsYXNzTGlzdC5hZGQobW9kQ2xhc3MuaGVhZGVyRmxvYXRpbmcpO1xuLy8gICAgIGVsc2UgZWwuaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUobW9kQ2xhc3MuaGVhZGVyRmxvYXRpbmcpO1xuLy8gICB9O1xuXG4vLyAgIHZhciBfd2luZG93U2Nyb2xsRGlyZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuLy8gICAgIHZhciBsYXN0U2Nyb2xsVG9wID0gMDtcbi8vICAgICB2YXIgY3VycmVudFBvc2l0aW9uID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4vLyAgICAgdmFyIGRpcmVjdGlvbiA9ICcnO1xuXG4vLyAgICAgLy8gZG93blxuLy8gICAgIGlmIChjdXJyZW50UG9zaXRpb24gPiBsYXN0U2Nyb2xsVG9wKSB7XG4vLyAgICAgICBkaXJlY3Rpb24gPSAnZG93bic7XG4vLyAgICAgLy8gdXBcbi8vICAgICB9IGVsc2Uge1xuLy8gICAgICAgZGlyZWN0aW9uID0gJ3VwJztcbi8vICAgICB9XG5cbi8vICAgICBsYXN0U2Nyb2xsVG9wID0gY3VycmVudFBvc2l0aW9uO1xuXG4vLyAgICAgcmV0dXJuIGRpcmVjdGlvbjtcbi8vICAgfTtcblxuLy8gICByZXR1cm4ge1xuLy8gICAgIGluaXQ6IGluaXQsXG4vLyAgIH07XG4vLyB9KCkpO1xuXG4vLyAvKipcbi8vICAqIEluaXQgSGVhZGVyIENvbnN0cnVjdG9yXG4vLyAgKiBAcmV0dXJuIHt2b2lkfSBIZWFkZXIuaW5pdCgpO1xuLy8gICovXG4vLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuLy8gICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWhlYWRlcicpKSB7XG4vLyAgICAgQnNIZWFkZXIuaW5pdCgpO1xuLy8gICB9XG4vLyB9KTtcbiIsIi8qKlxuICogQnMgSGVhZGVyXG4gKlxuICogW1RPRE9dOiBSZWZhdG9yYXIgcGFyYSBxdWUgb3MgZWxlbWVudG9zIGRvIGNvbmZpZyByZWZlcmVuY2llbSB1bSBjb21wb25lbnRlXG4gKiBoZWFkZXIgZXNwZWPDrWZpY28gYW8gaW52w6lzIGRlIHBlZ2FyIHRvZG9zIG9zIGV4aXN0ZW50ZXMgbm8gZG9jdW1lbnRvLlxuICovXG52YXIgQnNIZWFkZXIgPSAoZnVuY3Rpb24gKCkge1xuICAvLyBDb25maWdcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBoZWFkZXJDb250YWluZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1oZWFkZXJfX2NvbnRhaW5lcicpLFxuICAgIGhhc1RyYW5zcGFyZW5jeUNsYXNzOiAnYnMtaGVhZGVyLS1oYXMtdHJhbnNwYXJlbmN5JyxcbiAgICBoZWFkZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1oZWFkZXInKSxcbiAgICBoZWFkZXJUb3A6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1oZWFkZXJfX3RvcCcpLFxuICAgIGhlYWRlck1haW46IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1oZWFkZXJfX21haW4nKSxcbiAgICBoZWFkZXJGbG9hdGluZ0NsYXNzOiAnYnMtaGVhZGVyLS1mbG9hdGluZycsXG4gICAgaGVhZGVyUGlubmVkQ2xhc3M6ICdicy1oZWFkZXItLXBpbm5lZCcsXG4gICAgaGVhZGVyVG9wUG9zaXRpb25Ub0Zsb2F0OiAwLFxuICAgIGhlYWRlclRvcFBvc2l0aW9uVG9QaW46IDExMCxcbiAgICBoZWFkZXJUb3BQb3NpdGlvblRvVHJhbnNwYXJlbmN5OiAwLFxuICAgIGhlYWRlclRyYW5zcGFyZW50Q2xhc3M6ICdicy1oZWFkZXItLXRyYW5zcGFyZW50JyxcbiAgICBoZWFkZXJVbnBpbm5lZENsYXNzOiAnYnMtaGVhZGVyLS11bnBpbm5lZCcsXG4gICAgaXNGaXhlZENsYXNzOiAnYnMtaGVhZGVyLS1maXhlZCcsXG4gICAgaXNTdGF0aWNDbGFzczogJ2JzLWhlYWRlci0tc3RhdGljJyxcbiAgICBzY3JvbGxUb3BQb3NpdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICAgIH0sXG4gICAgc2Nyb2xsRGlyZWN0aW9uOiAwLFxuICAgIGxhc3RTY3JvbGxUb3A6IDAsXG4gIH07XG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gU2V0IGhlYWRlciB0cmFuc3BhcmVudCBvbiBob21lIHBhZ2UgbG9hZFxuICAgIHNldEhlYWRlclRyYW5zcGFyZW50KCk7XG5cbiAgICBpZiAoY29uZmlnLmhlYWRlci5jbGFzc0xpc3QuY29udGFpbnMoY29uZmlnLmlzU3RhdGljQ2xhc3MpKSByZXR1cm47XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xuICAgICAgc2V0SGVhZGVyUGlubmVkKCk7XG4gICAgICBzZXRIZWFkZXJGbG9hdGluZygpO1xuICAgICAgc2V0SGVhZGVyVHJhbnNwYXJlbnQoKTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgc2V0SGVhZGVyRmxvYXRpbmcgPSBmdW5jdGlvbiAoZm9yY2UpIHtcbiAgICBpZiAodHlwZW9mIGZvcmNlID09PSAndW5kZWZpbmVkJykgZm9yY2UgPSBmYWxzZTtcbiAgICB2YXIgaGVhZGVySGVpZ2h0ID0gY29uZmlnLmhlYWRlck1haW4ub2Zmc2V0SGVpZ2h0ICsgY29uZmlnLmhlYWRlclRvcC5vZmZzZXRIZWlnaHQ7XG4gICAgaWYgKGNvbmZpZy5zY3JvbGxUb3BQb3NpdGlvbigpID4gY29uZmlnLmhlYWRlclRvcFBvc2l0aW9uVG9GbG9hdCB8fCBmb3JjZSkge1xuICAgICAgYWRqdXN0Qm9keU1hcmdpbihoZWFkZXJIZWlnaHQpO1xuICAgICAgY29uZmlnLmhlYWRlci5jbGFzc0xpc3QuYWRkKGNvbmZpZy5oZWFkZXJGbG9hdGluZ0NsYXNzKTtcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5zY3JvbGxUb3BQb3NpdGlvbigpIDwgMSkge1xuICAgICAgYWRqdXN0Qm9keU1hcmdpbigwKTtcbiAgICAgIGNvbmZpZy5oZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaGVhZGVyRmxvYXRpbmdDbGFzcyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBzZXRIZWFkZXJQaW5uZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGNvbmZpZy5zY3JvbGxUb3BQb3NpdGlvbigpID4gY29uZmlnLmhlYWRlclRvcFBvc2l0aW9uVG9QaW4pIHtcbiAgICAgIGlmIChCc1NlYXJjaEZvcm0uaXNPcGVuKCkgfHwgQnNTZWFyY2hGb3JtLmhhc0ZvY3VzKCkpIHJldHVybjtcbiAgICAgIGlmIChnZXRTY3JvbGxEaXJlY3Rpb24oKSA9PT0gJ2Rvd24nKSB7XG4gICAgICAgIGNvbmZpZy5oZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaGVhZGVyUGlubmVkQ2xhc3MpO1xuICAgICAgICBjb25maWcuaGVhZGVyLmNsYXNzTGlzdC5hZGQoY29uZmlnLmhlYWRlclVucGlubmVkQ2xhc3MpO1xuICAgICAgICAvLyBCc1NlYXJjaEZvcm0uY2xvc2UoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbmZpZy5oZWFkZXIuY2xhc3NMaXN0LmFkZChjb25maWcuaGVhZGVyUGlubmVkQ2xhc3MpO1xuICAgICAgICBjb25maWcuaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmhlYWRlclVucGlubmVkQ2xhc3MpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25maWcuaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmhlYWRlclVucGlubmVkQ2xhc3MpO1xuXG4gICAgICBpZiAoY29uZmlnLnNjcm9sbFRvcFBvc2l0aW9uKCkgPiAwKSB7XG4gICAgICAgIGNvbmZpZy5oZWFkZXIuY2xhc3NMaXN0LmFkZChjb25maWcuaGVhZGVyUGlubmVkQ2xhc3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uZmlnLmhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5oZWFkZXJQaW5uZWRDbGFzcyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhciBzZXRIZWFkZXJUcmFuc3BhcmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWhlYWRlckhhc1RyYW5zcGFyZW5jeSgpKSByZXR1cm47XG4gICAgaWYgKFxuICAgICAgY29uZmlnLnNjcm9sbFRvcFBvc2l0aW9uKCkgPT09IDAgfHxcbiAgICAgIGNvbmZpZy5zY3JvbGxUb3BQb3NpdGlvbigpIDwgY29uZmlnLmhlYWRlclRvcFBvc2l0aW9uVG9UcmFuc3BhcmVuY3kpIHtcbiAgICAgIGNvbmZpZy5oZWFkZXIuY2xhc3NMaXN0LmFkZChjb25maWcuaGVhZGVyVHJhbnNwYXJlbnRDbGFzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbmZpZy5oZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaGVhZGVyVHJhbnNwYXJlbnRDbGFzcyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBnZXRTY3JvbGxEaXJlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gZG93blxuICAgIGlmIChjb25maWcuc2Nyb2xsVG9wUG9zaXRpb24oKSA+IGNvbmZpZy5sYXN0U2Nyb2xsVG9wKSB7XG4gICAgICBjb25maWcuc2Nyb2xsRGlyZWN0aW9uID0gJ2Rvd24nO1xuICAgIC8vIHVwXG4gICAgfSBlbHNlIGlmIChjb25maWcuc2Nyb2xsVG9wUG9zaXRpb24oKSA9PT0gY29uZmlnLmxhc3RTY3JvbGxUb3ApIHtcbiAgICAgIC8vIGNvbmZpZy5zY3JvbGxEaXJlY3Rpb24gPSAnJztcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5zY3JvbGxUb3BQb3NpdGlvbigpIDwgY29uZmlnLmxhc3RTY3JvbGxUb3ApIHtcbiAgICAgIGNvbmZpZy5zY3JvbGxEaXJlY3Rpb24gPSAndXAnO1xuICAgIH1cblxuICAgIGNvbmZpZy5sYXN0U2Nyb2xsVG9wID0gY29uZmlnLnNjcm9sbFRvcFBvc2l0aW9uKCk7XG5cbiAgICByZXR1cm4gY29uZmlnLnNjcm9sbERpcmVjdGlvbjtcbiAgfTtcblxuICB2YXIgaXNIZWFkZXJGbG9hdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY29uZmlnLmhlYWRlci5jbGFzc0xpc3QuY29udGFpbnMoY29uZmlnLmhlYWRlckZsb2F0aW5nQ2xhc3MpO1xuICB9O1xuXG4gIHZhciBoZWFkZXJIYXNUcmFuc3BhcmVuY3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNvbmZpZy5oZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKGNvbmZpZy5oYXNUcmFuc3BhcmVuY3lDbGFzcyk7XG4gIH07XG5cbiAgdmFyIGhlYWRlcklzRml4ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNvbmZpZy5oZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKGNvbmZpZy5pc0ZpeGVkQ2xhc3MpO1xuICB9O1xuXG4gIHZhciBhZGp1c3RCb2R5TWFyZ2luID0gZnVuY3Rpb24gKG1hcmdpbikge1xuICAgIGlmIChjb25maWcuaGVhZGVyQ29udGFpbmVyKSB7XG4gICAgICBpZiAoIWhlYWRlcklzRml4ZWQoKSAmJiBtYXJnaW4pIHtcbiAgICAgICAgY29uZmlnLmhlYWRlckNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBtYXJnaW4gKyAncHgnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uZmlnLmhlYWRlckNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghaGVhZGVySXNGaXhlZCgpKSB7XG4gICAgICAvLyBkZXByZWNhdGVkXG4gICAgICAvLyBoZWFkZXIgbXVzdCBhbHdheXMgaGF2ZSBhIGNvbnRhaW5lciBlbGVtZW50XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpblRvcCA9IG1hcmdpbiArICdweCc7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdCxcbiAgICBlbDogY29uZmlnLmhlYWRlcixcbiAgICBpc0Zsb2F0aW5nOiBpc0hlYWRlckZsb2F0aW5nLFxuICAgIHNldEhlYWRlckZsb2F0aW5nOiBzZXRIZWFkZXJGbG9hdGluZyxcbiAgICBoZWFkZXJQaW5uZWQ6IGNvbmZpZy5oZWFkZXJQaW5uZWRDbGFzcyxcbiAgfTtcbn0oKSk7XG5cbi8qKlxuICogSW5pdCBIZWFkZXIgQ29uc3RydWN0b3JcbiAqIEByZXR1cm4ge3ZvaWR9IEhlYWRlci5pbml0KCk7XG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtaGVhZGVyJykubGVuZ3RoKSB7XG4gICAgQnNIZWFkZXIuaW5pdCgpO1xuICB9XG59KTtcbiIsIi8qKlxuICogQnNMaXN0QWNjb3JkaW9uXG4gKi9cbnZhciBCc0xpc3RBY2NvcmRpb24gPSAoZnVuY3Rpb24gKCkge1xuICB2YXIgY29uZmlnID0ge307XG5cbiAgdmFyIHNldENvbmZpZyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgbGlzdDogJy5icy1qcy1saXN0LWFjY29yZGlvbicsXG4gICAgICBpdGVtOiAnLmJzLWpzLWxpc3QtYWNjb3JkaW9uX19pdGVtJyxcbiAgICAgIHRvZ2dsZUJ1dHRvbjogJy5icy1qcy1saXN0LWFjY29yZGlvbl9fdG9nZ2xlJyxcbiAgICAgIGl0ZW1FeHBhbmRlZENsYXNzOiAnYnMtaXMtZXhwYW5kZWQnLFxuICAgIH07XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSBvcHRpb25zID0ge307XG4gICAgcmV0dXJuIGV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuICB9O1xuXG4gIHZhciBpbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICB2YXIgbGlzdEFjY29yZGlvbjtcblxuICAgIGNvbmZpZyA9IHNldENvbmZpZyhvcHRpb25zKTtcbiAgICBsaXN0QWNjb3JkaW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcubGlzdCk7XG5cbiAgICBpZiAoIWxpc3RBY2NvcmRpb24ubGVuZ3RoKSByZXR1cm47XG5cbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGxpc3RBY2NvcmRpb24sIGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgICB2YXIgaXRlbXMgPSBsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLml0ZW0pO1xuXG4gICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB2YXIgYnV0dG9uID0gaXRlbS5xdWVyeVNlbGVjdG9yKGNvbmZpZy50b2dnbGVCdXR0b24pO1xuXG4gICAgICAgIGlmIChidXR0b24pIHtcbiAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0b2dnbGVJdGVtKGl0ZW0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgZXh0ZW5kID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG5cbiAgdmFyIGV4cGFuZEl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChjb25maWcuaXRlbUV4cGFuZGVkQ2xhc3MpO1xuICB9O1xuXG4gIHZhciBjb2xsYXBzZUl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaXRlbUV4cGFuZGVkQ2xhc3MpO1xuICB9O1xuXG4gIHZhciB0b2dnbGVJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpZiAoaXRlbUlzRXhwYW5kZWQoaXRlbSkpIGNvbGxhcHNlSXRlbShpdGVtKTtcbiAgICBlbHNlIGV4cGFuZEl0ZW0oaXRlbSk7XG4gIH07XG5cbiAgdmFyIGl0ZW1Jc0V4cGFuZGVkID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICByZXR1cm4gaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoY29uZmlnLml0ZW1FeHBhbmRlZENsYXNzKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGluaXQ6IGluaXQsXG4gICAgZXhwYW5kOiBleHBhbmRJdGVtLFxuICAgIGNvbGxhcHNlOiBjb2xsYXBzZUl0ZW0sXG4gICAgdG9nZ2xlOiB0b2dnbGVJdGVtLFxuICB9O1xufSgpKTtcblxuLyoqXG4gKiBJbml0IExpc3RBY2NvcmRpb24gY29uc3RydWN0b3JcbiAqIEByZXR1cm4ge3ZvaWR9IExpc3RBY2NvcmRpb24uaW5pdCgpO1xuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWxpc3QtZGVzY3JpcHRpb24tLWFjY29yZGlvbicpLmxlbmd0aCkge1xuICAgIEJzTGlzdEFjY29yZGlvbi5pbml0KHtcbiAgICAgIGl0ZW06ICcuYnMtbGlzdC1kZXNjcmlwdGlvbl9faXRlbScsXG4gICAgICB0b2dnbGVCdXR0b246ICcuYnMtbGlzdC1kZXNjcmlwdGlvbl9fdGl0bGUnLFxuICAgIH0pO1xuICB9XG59KTtcbiIsInZhciBCc0Rvd25sb2Fkc0xpc3QgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xuICAvLyBDb25maWcgTGlzdCBhbmQgU2VsZWN0XG4gIHZhciBlbGVtID0gZWxlbWVudDtcbiAgdmFyIGNvbmZpZyA9IHt9O1xuICB2YXIgc2V0Q29uZmlnID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVsOiBlbCxcbiAgICAgIGJvZHk6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKSxcbiAgICAgIGl0ZW1zOiBlbC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtZG93bmxvYWRfX2l0ZW0nKSxcbiAgICAgIGl0ZW1zSW5wdXQ6IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1kb3dubG9hZHMtaW5wdXQnKSxcbiAgICAgIGZpbHRlckZvcm06IGVsLnF1ZXJ5U2VsZWN0b3IoJy5icy1qcy1kb3dubG9hZHMtZmlsdGVyJyksXG4gICAgICBmaWx0ZXJJbnB1dHM6IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1kb3dubG9hZHMtZmlsdGVyIC5icy1mb3JtX19maWVsZCcpLFxuICAgICAgY2F0ZWdvcmllczogZWwucXVlcnlTZWxlY3RvckFsbCgnLmJzLWRvd25sb2FkX19saXN0JyksXG4gICAgICBhY2NvcmRpb25CdXR0b246IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1vcGVuLWFjY29yZGlvbicpLFxuICAgICAgYWNjb3JkaW9uOiBlbC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtZG93bmxvYWRfX2NvbnRlbnQtLWFjY29yZGlvbicpLFxuICAgICAgYWNjb3JkaW9uTGlzdDogZWwucXVlcnlTZWxlY3RvckFsbCgnLmJzLWRvd25sb2FkLS1hY2NvcmRpb24nKSxcbiAgICAgIGRvd25sb2FkQnV0dG9uOiBlbC5xdWVyeVNlbGVjdG9yKCcuYnMtanMtZG93bmxvYWRzLWJ1dHRvbicpLFxuICAgICAgYWNjb3JkaW9uQ29udGVudENsYXNzOiAnYnMtanMtZG93bmxvYWRfX2NvbnRlbnQtLWFjY29yZGlvbicsXG4gICAgICBpdGVtQWN0aXZlQ2xhc3M6ICdicy1kb3dubG9hZF9faXRlbS0tYWN0aXZlJyxcbiAgICAgIGNhdGVnb3J5QWN0aXZlQ2xhc3M6ICdicy1kb3dubG9hZF9fbGlzdC0tYWN0aXZlJyxcbiAgICAgIGFjY29yZGlvbk9wZW5DbGFzczogJ2JzLWRvd25sb2FkX19saXN0LS1vcGVuJyxcbiAgICAgIGFjY29yZGlvblJlc2l6ZXI6IG51bGwsXG4gICAgICBsYXN0SW5wdXRDaGVja2VkOiBudWxsLFxuICAgICAgemlwT25DbGllbnQ6IHRydWUsXG4gICAgICB6aXBGaWxlSWQ6IG51bGwsXG4gICAgICBkb3dubG9hZFByb2dyZXNzOiBuZXcgQnNTbmFja1Byb2dyZXNzKCksXG4gICAgICBkb3dubG9hZElzQWN0aXZlOiBmYWxzZSxcbiAgICB9O1xuICB9O1xuXG4gIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghZWxlbSB8fCB0eXBlb2YgZWxlbSAhPT0gJ29iamVjdCcpIHJldHVybjtcbiAgICBjb25maWcgPSBzZXRDb25maWcoZWxlbSk7XG5cbiAgICAvLyBJbml0IGRvd25sb2FkIHByb2dyZXNzXG4gICAgY29uZmlnLmRvd25sb2FkUHJvZ3Jlc3MuaW5pdCgpO1xuICAgIGNvbmZpZy5kb3dubG9hZFByb2dyZXNzLm9uQ2FuY2VsKGFib3J0ZG93bmxvYWQpO1xuXG4gICAgLy8gQWRkIGV2ZW50IGZvciBmaWx0ZXJzXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuZmlsdGVySW5wdXRzLCBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQubmFtZSA9PT0gJ3llYXInKSBidWlsZFllYXJTZWxlY3QoaW5wdXQpO1xuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBoYW5kbGVGaWx0ZXJzKGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgYWRqdXN0QWNjb3JkaW9uSXRlbXNIZWlnaHQoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBUb2dnbGUgYWNjb3JkaW9uIGl0ZW0gb24gY2xpY2tcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5hY2NvcmRpb25CdXR0b24sIGZ1bmN0aW9uIChlbCkge1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgdG9nZ2xlQWNjb3JkaW9uSXRlbS5iaW5kKG51bGwsIGVsKVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYW4gYWNjb3JkaW9uIGl0ZW0gYWN0aXZlIGFuZCBhZGp1c3QgaXRzIGhlaWdodFxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLmFjY29yZGlvbkxpc3QsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgdmFyIGFjY09wZW4gPSBlbC5jbGFzc0xpc3QuY29udGFpbnMoY29uZmlnLmFjY29yZGlvbk9wZW5DbGFzcyk7XG5cbiAgICAgIGlmIChhY2NPcGVuKSB7XG4gICAgICAgIHZhciBjb250ZW50ID0gZWwucXVlcnlTZWxlY3RvcignLicgKyBjb25maWcuYWNjb3JkaW9uQ29udGVudENsYXNzKTtcbiAgICAgICAgdmFyIGNvbnRlbnRIZWlnaHQgPSBjb250ZW50LnNjcm9sbEhlaWdodDtcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChjb25maWcuYWNjb3JkaW9uT3BlbkNsYXNzKTtcbiAgICAgICAgY29udGVudC5zdHlsZS5oZWlnaHQgPSBjb250ZW50SGVpZ2h0ICsgJ3B4JztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEFkZCBldmVudCBmb3IgYWxsIGNoZWNrYm94ZXNcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5pdGVtc0lucHV0LCBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlSXRlbXNDaGVja2JveCk7XG4gICAgfSk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGNvbmZpZy5hY2NvcmRpb25SZXNpemVyKTtcbiAgICAgIGNvbmZpZy5hY2NvcmRpb25SZXNpemVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFkanVzdEFjY29yZGlvbkl0ZW1zSGVpZ2h0KCk7XG4gICAgICB9LCAzMDApO1xuICAgIH0pO1xuXG4gICAgaWYgKGNvbmZpZy5kb3dubG9hZEJ1dHRvbikge1xuICAgICAgY29uZmlnLmRvd25sb2FkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkRG93bmxvYWRMaXN0ZW5lcik7XG4gICAgfVxuICB9O1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEFjY29yZGlvblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhY2NvcmRpb24gaXRlbSdzIGV4cGFuZGVkXG4gICAqIEBwYXJhbSAge29iamVjdH0gIGVsICBhbiBIVE1MIGVsZW1lbnQgb2YgdGhlIGFjY29yZGlvbiBpdGVtXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59ICAgICB0cnVlIGlmIGFjY29yZGlvbiBpdGVtIGlzIG9wZW5cbiAgICovXG4gIHZhciBpc0FjY29yZGlvbk9wZW4gPSBmdW5jdGlvbiAoZWwpIHtcbiAgICB2YXIgaXRlbSA9IGdldFBhcmVudChlbCwgJ2JzLWRvd25sb2FkX19saXN0Jyk7XG4gICAgLy8gdmFyIGl0ZW0yID0gY2xvc2VzdChlbCwgJy5icy1kb3dubG9hZF9fbGlzdCcpO1xuICAgIC8vIGRlYnVnZ2VyO1xuICAgIHJldHVybiBpdGVtLmNsYXNzTGlzdC5jb250YWlucyhjb25maWcuYWNjb3JkaW9uT3BlbkNsYXNzKTtcbiAgfTtcblxuICAvKipcbiAgICogdG9nZ2xlIEFjY29yZGlvbiBJdGVtXG4gICAqIEBwYXJhbSAge29iamVjdH0gZWwgSFRNTCBlbGVtZW50IG9mIHRoZSBhY2NvcmRpb24gaXRlbVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgdmFyIHRvZ2dsZUFjY29yZGlvbkl0ZW0gPSBmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAoaXNBY2NvcmRpb25PcGVuKGVsKSkgY2xvc2VBY2NvcmRpb25JdGVtKGVsKTtcbiAgICBlbHNlIG9wZW5BY2NvcmRpb25JdGVtKGVsKTtcbiAgfTtcblxuICAvKipcbiAgICogb3BlbiBBY2NvcmRpb24gSXRlbVxuICAgKiBAcGFyYW0gIHtvYmplY3R9IGVsIEhUTUwgZWxlbWVudCBvZiB0aGUgYWNjb3JkaW9uIGl0ZW1cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHZhciBvcGVuQWNjb3JkaW9uSXRlbSA9IGZ1bmN0aW9uIChlbCkge1xuICAgIHZhciBpdGVtID0gZ2V0UGFyZW50KGVsLCAnYnMtZG93bmxvYWRfX2xpc3QnKTtcbiAgICB2YXIgY29udGVudCA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLicgKyBjb25maWcuYWNjb3JkaW9uQ29udGVudENsYXNzKTtcbiAgICB2YXIgY29udGVudEhlaWdodCA9IGNvbnRlbnQuc2Nyb2xsSGVpZ2h0O1xuXG4gICAgaXRlbS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5hY2NvcmRpb25PcGVuQ2xhc3MpO1xuICAgIGNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gY29udGVudEhlaWdodCArICdweCc7XG4gIH07XG5cbiAgLyoqXG4gICAqIGNsb3NlIEFjY29yZGlvbiBJdGVtXG4gICAqIEBwYXJhbSAge29iamVjdH0gZWwgSFRNTCBlbGVtZW50IG9mIHRoZSBhY2NvcmRpb24gaXRlbVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgdmFyIGNsb3NlQWNjb3JkaW9uSXRlbSA9IGZ1bmN0aW9uIChlbCkge1xuICAgIHZhciBpdGVtID0gZ2V0UGFyZW50KGVsLCAnYnMtZG93bmxvYWRfX2xpc3QnKTtcbiAgICB2YXIgY29udGVudCA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLicgKyBjb25maWcuYWNjb3JkaW9uQ29udGVudENsYXNzKTtcblxuICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShjb25maWcuYWNjb3JkaW9uT3BlbkNsYXNzKTtcbiAgICBjb250ZW50LnN0eWxlLmhlaWdodCA9IDA7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkanVzdCBIZWlnaHQgb2YgYWxsIEFjY29yZGlvbiBJdGVtc1xuICAgKiBXaGVuIGl0ZW1zIGFyZSBmaWx0ZXJlZCBvciB0aGUgdmlld3BvcnQgY2hhbmdlcywgdGhlIGhlaWdodCBvZiBlYWNoXG4gICAqIGFjY29yZGlvbiBpdGVtIG11c3QgYmUgYWRqdXN0ZWQgYWNjb3JkaW5nIHRvIGl0cyBjb250ZW50IGhlaWdodFxuICAgKlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgdmFyIGFkanVzdEFjY29yZGlvbkl0ZW1zSGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhY3RpdmVJdGVtcyA9IGNvbmZpZy5lbC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtZG93bmxvYWQtLWFjY29yZGlvbi4nICsgY29uZmlnLmFjY29yZGlvbk9wZW5DbGFzcyk7XG5cbiAgICAvLyBpZiBoYXMgZXhwYW5kZWQgaXRlbXNcbiAgICBpZiAoYWN0aXZlSXRlbXMubGVuZ3RoKSB7XG4gICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGFjdGl2ZUl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB2YXIgaXRlbUNoaWxkcmVuID0gaXRlbS5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtZG93bmxvYWRfX2l0ZW0nKTtcbiAgICAgICAgdmFyIGNvbnRlbnQgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy4nICsgY29uZmlnLmFjY29yZGlvbkNvbnRlbnRDbGFzcyk7XG4gICAgICAgIC8vIHN1bSBvZiBlYWNoIGNoaWxkcmVuIGhlaWdodFxuICAgICAgICB2YXIgY2hpbGRyZW5IZWlnaHQgPSBBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwoaXRlbUNoaWxkcmVuLCBmdW5jdGlvbiAodG90YWwsIHN1Yml0ZW0pIHtcbiAgICAgICAgICB0b3RhbCArPSBzdWJpdGVtLnNjcm9sbEhlaWdodDtcbiAgICAgICAgICByZXR1cm4gdG90YWw7XG4gICAgICAgIH0sIDApO1xuICAgICAgICAvLyB1cGRhdGUgYWNjb3JkaW9uIGl0ZW0gaGVpZ2h0XG4gICAgICAgIGNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gY2hpbGRyZW5IZWlnaHQgKyAncHgnO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIERvd25sb2FkcyBvZiBtdWx0aXBsZSBpdGVtc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8qKlxuICAgKiBoYW5kbGUgSXRlbXMgQ2hlY2tib3hcbiAgICogQHBhcmFtICB7b2JqZWN0fSAgZXZlbnQgIGEgY2hhbmdlIGV2ZW50XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB2YXIgaGFuZGxlSXRlbXNDaGVja2JveCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBpbnB1dEVsID0gZXZlbnQudGFyZ2V0O1xuICAgIHZhciBzZWxlY3RlZElucHV0cyA9IG51bGw7XG4gICAgdmFyIHByb2dyZXNzVGV4dCA9IGZ1bmN0aW9uIChpdGVtc0Ftb3VudCkge1xuICAgICAgdmFyIHRleHQgPSAnJztcbiAgICAgIHRleHQgKz0gaXRlbXNBbW91bnQgKyAnIGFycXVpdm8nICsgKGl0ZW1zQW1vdW50ID4gMSA/ICdzICcgOiAnJyk7XG4gICAgICB0ZXh0ICs9ICcgc2VsZWNpb25hZG8nICsgKGl0ZW1zQW1vdW50ID4gMSA/ICdzJyA6ICcnKTtcbiAgICAgIHJldHVybiB0ZXh0O1xuICAgIH07XG5cbiAgICAvLyBlbmFibGUvZGlzYWJsZSBkb3dubG9hZCBidXR0b25cbiAgICB0b2dnbGVEb3dubG9hZEJ1dHRvbigpO1xuICAgIC8vIHNoaWZ0LXNlbGVjdCBtdWx0aXBsZSBpdGVtc1xuICAgIHNoaWZ0U2VsZWN0TXVsdGlwbGVJdGVtcyhldmVudCk7XG4gICAgLy8gdG9nZ2xlIGl0ZW0gYWN0aXZlIHN0eWxlXG4gICAgdG9nZ2xlSXRlbUNoZWNrYm94KGlucHV0RWwpO1xuXG4gICAgLy8gZ2V0IHRoZSB1cGRhdGVkIGxpc3Qgb2YgY2hlY2tlZFxuICAgIHNlbGVjdGVkSW5wdXRzID0gZ2V0Q2hlY2tlZEl0ZW1zKCk7XG5cbiAgICAvLyBpZiB0aGVyZSdzIGNoZWNrZWQgaXRlbXMsIHNob3cgc25hY2tiYXJcbiAgICBpZiAoc2VsZWN0ZWRJbnB1dHMubGVuZ3RoKSB7XG4gICAgICBjb25maWcuZG93bmxvYWRQcm9ncmVzcy5zaG93KCk7XG4gICAgICBjb25maWcuZG93bmxvYWRQcm9ncmVzcy5zZXRQcm9ncmVzcygnJywgcHJvZ3Jlc3NUZXh0KHNlbGVjdGVkSW5wdXRzLmxlbmd0aCkpO1xuICAgICAgY29uZmlnLmRvd25sb2FkUHJvZ3Jlc3MuYWN0aXZlQnV0dG9uKCdpY29uLW5hdi1iYWl4YXInLCAnRmF6ZXIgZG93bmxvYWQnLCBhZGREb3dubG9hZExpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uZmlnLmRvd25sb2FkUHJvZ3Jlc3MuaGlkZSgpO1xuICAgICAgY29uZmlnLmRvd25sb2FkUHJvZ3Jlc3MuZGlzYWJsZUJ1dHRvbigpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgYWRkRG93bmxvYWRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZmlsZW5hbWUgPSBjb25maWcuZG93bmxvYWRCdXR0b24uZGF0YXNldC56aXBGaWxlbmFtZTtcbiAgICBnZW5lcmF0ZVppcEZpbGUoZmlsZW5hbWUpO1xuICB9O1xuXG4gIHZhciBhYm9ydGRvd25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIFJlc2V0IHByb2dyZXNzXG4gICAgY29uZmlnLmRvd25sb2FkUHJvZ3Jlc3MuZWxlbWVudHMucHJvZ3Jlc3MuY2xhc3NMaXN0LnJlbW92ZSgnYnMtcHJvZ3Jlc3MtLWlzLWxvYWRpbmcnKTtcbiAgICBjb25maWcuZG93bmxvYWRQcm9ncmVzcy5zZXRQcm9ncmVzcygpO1xuICAgIGNvbmZpZy5kb3dubG9hZFByb2dyZXNzLmhpZGUoKTtcblxuICAgIC8vIERpc2FibGUgZG93bmxvYWQgYnV0dG9uIGFuZCB1bmNoZWNrIGl0ZW1zXG4gICAgdW5jaGVja0FsbEl0ZW1zKCk7XG4gICAgdG9nZ2xlRG93bmxvYWRCdXR0b24oKTtcblxuICAgIC8vIEFib3J0IGlmIG9uIGRvd25sb2FkaW5nIG9yIHppcHBpbmcgcHJvY2Vzc1xuICAgIGNvbmZpZy5kb3dubG9hZElzQWN0aXZlID0gZmFsc2U7XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIGdldCBjaGVja2VkIGl0ZW1zXG4gICAqIEByZXR1cm4ge2FycmF5fSBsaXN0IG9mIGNoZWNrZWQgaW5wdXRzXG4gICAqL1xuICB2YXIgZ2V0Q2hlY2tlZEl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjb25maWcuZWwucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLWRvd25sb2Fkcy1pbnB1dDpjaGVja2VkJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrIGFsbCBpdGVtc1xuICAgKi9cbiAgdmFyIGNoZWNrQWxsSXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuaXRlbXNJbnB1dCwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICB0b2dnbGVJdGVtQ2hlY2tib3goZWwsIHRydWUpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVbmNoZWNrIGFsbCBpdGVtc1xuICAgKi9cbiAgdmFyIHVuY2hlY2tBbGxJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2hlY2tlZElucHV0cyA9IGdldENoZWNrZWRJdGVtcygpO1xuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY2hlY2tlZElucHV0cywgZnVuY3Rpb24gKGVsKSB7XG4gICAgICB0b2dnbGVJdGVtQ2hlY2tib3goZWwsIGZhbHNlKTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogdG9nZ2xlIEl0ZW0gQ2hlY2tib3hcbiAgICogQHBhcmFtICB7b2JqZWN0fSAgY2hlY2tib3ggIHRoZSBIVE1MIGVsZW1lbnQgb2YgdGhlIGNoZWNrYm94XG4gICAqIEBwYXJhbSAge2Jvb2xlYW59IGNoZWNrICAgICBmb3JjZSBjaGVjayB0cnVlL2ZhbHNlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB2YXIgdG9nZ2xlSXRlbUNoZWNrYm94ID0gZnVuY3Rpb24gKGNoZWNrYm94LCBjaGVjaykge1xuICAgIC8vIEdldCBkaXYgcGFyZW50IHRvIGFwcGx5IGNvbmRpdGlvbnNcbiAgICB2YXIgaW5wdXRJdGVtID0gY2hlY2tib3guY2xvc2VzdCgnLmJzLWRvd25sb2FkX19pdGVtJyk7XG4gICAgdmFyIGNoZWNrZWQgPSAodHlwZW9mIGNoZWNrID09PSAnYm9vbGVhbicpID8gY2hlY2sgOiBjaGVja2JveC5jaGVja2VkO1xuXG4gICAgLy8gSWYgY2hlY2tib3ggaXMgY2hlY2tlZCBvciBzaG91bGQgYmUgZm9yY2VkIHRvXG4gICAgaWYgKGNoZWNrZWQpIHtcbiAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgaW5wdXRJdGVtLmNsYXNzTGlzdC5hZGQoY29uZmlnLml0ZW1BY3RpdmVDbGFzcyk7XG4gICAgLy8gSWYgY2hlY2tib3ggaXMgdW5jaGVja2VkIG9yIHNob3VsZCBiZSBmb3JjZWQgdG9cbiAgICB9IGVsc2Uge1xuICAgICAgY2hlY2tib3guY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgaW5wdXRJdGVtLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLml0ZW1BY3RpdmVDbGFzcyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiB0b2dnbGUgRG93bmxvYWQgQnV0dG9uXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB2YXIgdG9nZ2xlRG93bmxvYWRCdXR0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGRvd25sb2FkQnV0dG9uID0gY29uZmlnLmRvd25sb2FkQnV0dG9uO1xuICAgIHZhciBkb3dubG9hZEJ1dHRvblRpdGxlID0gJyc7XG4gICAgdmFyIGhhc0lucHV0Q2hlY2tlZCA9IGdldENoZWNrZWRJdGVtcygpLmxlbmd0aDtcblxuICAgIGlmIChkb3dubG9hZEJ1dHRvbikge1xuICAgICAgLy8gZW5hYmxlIGRvd25sb2FkIGJ1dHRvbiBpZiBoYXMgc29tZSBpbnB1dCBjaGVja2VkXG4gICAgICBpZiAoIWhhc0lucHV0Q2hlY2tlZCkge1xuICAgICAgICBkb3dubG9hZEJ1dHRvblRpdGxlID0gZG93bmxvYWRCdXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLWRpc2FibGUtdGl0bGUnKSB8fCAnJztcbiAgICAgICAgZG93bmxvYWRCdXR0b24udGl0bGUgPSBkb3dubG9hZEJ1dHRvblRpdGxlO1xuICAgICAgICBkb3dubG9hZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdicy1idXR0b24tLWRpc2FibGVkJyk7XG4gICAgICAgIGRvd25sb2FkQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIC8vIGRpc2FibGUgZG93bmxvYWQgYnV0dG9uIGlmIGhhc24ndCBhbnkgaW5wdXQgY2hlY2tlZFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG93bmxvYWRCdXR0b25UaXRsZSA9IGRvd25sb2FkQnV0dG9uLmdldEF0dHJpYnV0ZSgnZGF0YS1hY3RpdmUtdGl0bGUnKSB8fCAnJztcbiAgICAgICAgZG93bmxvYWRCdXR0b24udGl0bGUgPSBkb3dubG9hZEJ1dHRvblRpdGxlO1xuICAgICAgICBkb3dubG9hZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdicy1idXR0b24tLWRpc2FibGVkJyk7XG4gICAgICAgIGRvd25sb2FkQnV0dG9uLmRpc2FibGVkID0gJyc7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTaGlmdC1zZWxlY3QgTXVsdGlwbGUgSXRlbXNcbiAgICogU2VsZWN0IGFsbCBjaGVja2JveGVzIGJldHdlZW4gbGFzdENoZWNrZWQgYW5kIGN1cnJlbnRDaGVja2VkIGlmXG4gICAqIHNoaWZ0S2V5IGlzIHByZXNzZWQgZHVyaW5nIGNsaWNrXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gZSAgYSBjbGljayBldmVudCBpbiBhIGNoZWNrYm94XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB2YXIgc2hpZnRTZWxlY3RNdWx0aXBsZUl0ZW1zID0gZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgaW5wdXQgPSBlLnRhcmdldDtcbiAgICB2YXIgc3RhcnQgPSBudWxsO1xuICAgIHZhciBlbmQgPSBudWxsO1xuXG4gICAgaWYgKChpbnB1dCB8fCB7fSkudHlwZSAhPT0gJ2NoZWNrYm94JykgcmV0dXJuO1xuXG4gICAgaWYgKCFjb25maWcubGFzdElucHV0Q2hlY2tlZCkge1xuICAgICAgY29uZmlnLmxhc3RJbnB1dENoZWNrZWQgPSBpbnB1dDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZS5zaGlmdEtleSkge1xuICAgICAgc3RhcnQgPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGNvbmZpZy5pdGVtc0lucHV0LCBjb25maWcubGFzdElucHV0Q2hlY2tlZCk7XG4gICAgICBlbmQgPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGNvbmZpZy5pdGVtc0lucHV0LCBpbnB1dCk7XG5cbiAgICAgIGlmIChNYXRoLmFicyhzdGFydCAtIGVuZCkgPiAxKSB7XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShjb25maWcuaXRlbXNJbnB1dCwgW1xuICAgICAgICAgIE1hdGgubWluKHN0YXJ0LCBlbmQpLFxuICAgICAgICAgIE1hdGgubWF4KHN0YXJ0LCBlbmQpICsgMSxcbiAgICAgICAgXSkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgIHRvZ2dsZUl0ZW1DaGVja2JveChpdGVtLCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uZmlnLmxhc3RJbnB1dENoZWNrZWQgPSBpbnB1dDtcbiAgfTtcblxuICAvKipcbiAgICogWmlwIEZpbGUgR2VuZXJhdGVcbiAgICogQHBhcmFtICB7U3RyaW5nfSB6aXBOYW1lIE5hbWUgb2YgdGhlIHppcCBmaWxlXG4gICAqL1xuICB2YXIgZ2VuZXJhdGVaaXBGaWxlID0gZnVuY3Rpb24gKHppcE5hbWUpIHtcbiAgICB2YXIgY2hlY2tlZElucHV0cyA9IGNvbmZpZy5lbC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtZG93bmxvYWRzLWlucHV0OmNoZWNrZWQnKTtcbiAgICB2YXIgemlwID0gbnVsbDtcbiAgICB2YXIgcHJvZ3Jlc3MgPSBudWxsO1xuICAgIHZhciBwZXJjZW50YWdlID0gLTE7XG4gICAgdmFyIHBhcnRpYWxQZXJjZW50YWdlID0gMDtcbiAgICB2YXIgdXJscyA9IFtdO1xuXG4gICAgLy8gQ2hlY2sgaWYgYWxsIGRlcGVuZGVuY2llcyBleGlzdHNcbiAgICBpZiAoXG4gICAgICAhY29uZmlnLnppcE9uQ2xpZW50IHx8XG4gICAgICB0eXBlb2YgSlNaaXAgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICB0eXBlb2Ygc2F2ZUFzID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgdHlwZW9mIGZvckVhY2hQcm9taXNlID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgdHlwZW9mIGdldCA9PT0gJ3VuZGVmaW5lZCdcbiAgICApIHJldHVybjtcblxuICAgIC8vIFNldCBkZWZhdWx0IHZhbHVlIGZvciB6aXBOYW1lXG4gICAgaWYgKHR5cGVvZiB6aXBOYW1lICE9PSAnc3RyaW5nJykgemlwTmFtZSA9ICdkb3dubG9hZC56aXAnO1xuXG4gICAgLy8gSWYgdGhlcmUncyBvbmUgb3IgbW9yZSBpbnB1dHMgY2hlY2tlZFxuICAgIGlmIChjaGVja2VkSW5wdXRzLmxlbmd0aCkge1xuICAgICAgLy8gY3JlYXRlIGFuIGFycmF5IHdpdGggdGhlIFVSTCBvZiB0aGUgZmlsZXNcbiAgICAgIC8vIG9mIGVhY2ggY2hlY2tlZCBpbnB1dCB0byBaSVBcbiAgICAgIHVybHMgPSBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoY2hlY2tlZElucHV0cywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdmFyIGRvd25sb2FkSXRlbSA9IGl0ZW0uY2xvc2VzdCgnLmJzLWRvd25sb2FkX19pdGVtJyk7XG4gICAgICAgIHZhciBocmVmID0gZG93bmxvYWRJdGVtLnF1ZXJ5U2VsZWN0b3IoJ2EnKS5ocmVmO1xuICAgICAgICByZXR1cm4gaHJlZjtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTdGFydCBKU1ppcCBhbmQgQnNTbmFja1Byb2dyZXNzXG4gICAgICB6aXAgPSBuZXcgSlNaaXAoKTtcbiAgICAgIHByb2dyZXNzID0gY29uZmlnLmRvd25sb2FkUHJvZ3Jlc3M7XG4gICAgICBwcm9ncmVzcy5lbGVtZW50cy5wcm9ncmVzcy5jbGFzc0xpc3QuYWRkKCdicy1wcm9ncmVzcy0taXMtbG9hZGluZycpO1xuICAgICAgcHJvZ3Jlc3MuZGlzYWJsZUJ1dHRvbigpO1xuICAgICAgcHJvZ3Jlc3Muc2hvdygpO1xuICAgICAgLy8gY29uc29sZS5sb2coJ3N0YXJ0aW5nIGRvd25sb2FkcycpO1xuICAgICAgcHJvZ3Jlc3Muc2V0UHJvZ3Jlc3MoMCwgJ0JhaXhhbmRvICcgKyB1cmxzLmxlbmd0aCArICcgYXJxdWl2bycgKyAodXJscy5sZW5ndGggPiAxID8gJ3MnIDogJycpKTtcblxuICAgICAgLy8gU2V0IHRydWUgdG8gZG93bmxvYWRJc0FjdGl2ZVxuICAgICAgLy8gSXQncyB1c2VkIHRvIGNhbmNlbCB0aGUgcHJvY2VzcyAoemlwcGluZyBwcm9jZXNzIGp1c3QgcnVuIHdoZW4gaXQnc1xuICAgICAgLy8gdHJ1ZSwgc28gYSBjYW5jZWwgYWN0aW9uIGp1c3QgbmVlZCB0byBzZXQgaXQgdG8gZmFsc2UpIHNpbmNlIEpTWmlwXG4gICAgICAvLyBoYXZlIG5vIGFib3J0IG1ldGhvZFxuICAgICAgY29uZmlnLmRvd25sb2FkSXNBY3RpdmUgPSB0cnVlO1xuXG4gICAgICAvLyBsb29wIGZvciBlYWNoIFVSTCBhcyBhIHByb21pc2VcbiAgICAgIGZvckVhY2hQcm9taXNlKHVybHMsIGZ1bmN0aW9uIChmaWxlcGF0aCkge1xuICAgICAgICB2YXIgZmlsZW5hbWUgPSBnZXRGaWxlbmFtZUZyb21QYXRoKGZpbGVwYXRoKTtcblxuICAgICAgICAvLyBjb25zb2xlLmxvZygnc3RhcnRpbmcgJyArIGZpbGVuYW1lKTtcbiAgICAgICAgLy8gcHJvZ3Jlc3Muc2V0UHJvZ3Jlc3MoMCk7XG5cbiAgICAgICAgaWYgKCFjb25maWcuZG93bmxvYWRJc0FjdGl2ZSkgcmV0dXJuO1xuXG4gICAgICAgIC8vIFJlcXVlc3QgWE1MSHR0cCBmcm9tIHVybFxuICAgICAgICByZXR1cm4gZ2V0KGZpbGVwYXRoLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZXZlbnQubGVuZ3RoQ29tcHV0YWJsZSkge1xuICAgICAgICAgICAgdmFyIGZpbGVQZXJjZW50YWdlID0gcGFyc2VJbnQoKGV2ZW50LmxvYWRlZCAvIGV2ZW50LnRvdGFsKSAqIDEwMCwgMTApO1xuICAgICAgICAgICAgdmFyIHBhcnRpYWxGaWxlUGVyY2VudGFnZSA9IHBhcnNlSW50KGZpbGVQZXJjZW50YWdlIC8gdXJscy5sZW5ndGgsIDEwKTtcbiAgICAgICAgICAgIHZhciBuZXdQZXJjZW50YWdlID0gcGFydGlhbFBlcmNlbnRhZ2UgKyBwYXJ0aWFsRmlsZVBlcmNlbnRhZ2U7XG4gICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGlmIChuZXdQZXJjZW50YWdlID4gcGVyY2VudGFnZSkge1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0b3RhbCBwZXJjZW50YWdlXG4gICAgICAgICAgICAgICAgLy8gVGhlIHRvdGFsIHZhbHVlIGlzIHRoZSBoaWdoZXIgbnVtYmVyIGJldHdlZW4gdGhlIHN1bSBvZiB0aGVcbiAgICAgICAgICAgICAgICAvLyBsYXN0IHBhcnRpYWwgcGVyY2VudGFnZSB3aXRoIHRoZSBjdXJyZW50IGZpbGUgcGFydGlhbCBwZXJjZW50YWdlXG4gICAgICAgICAgICAgICAgLy8gYW5kIHRoZSBjdXJyZW50IHBlcmNlbnRhZ2VcbiAgICAgICAgICAgICAgICBwZXJjZW50YWdlID0gbmV3UGVyY2VudGFnZTtcblxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBwcm9ncmVzc1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkb3dubG9hZGluZyAnICsgZmlsZW5hbWUsIHBlcmNlbnRhZ2UpO1xuICAgICAgICAgICAgICAgIHByb2dyZXNzLnNldFByb2dyZXNzKHBlcmNlbnRhZ2UpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgc2luZ2xlIGZpbGUgaXMgZG93bmxvYWRlZCwgdXBkYXRlIHRoZSBwYXJ0aWFsXG4gICAgICAgICAgICAgIC8vIHBlcmNlbnRhZ2Ugd2l0aCB0aGUgY3VycmVudCBwZXJjZW50YWdlIHZhbHVlXG4gICAgICAgICAgICAgIGlmIChmaWxlUGVyY2VudGFnZSA+PSAxMDApIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgICAgICAgICBwYXJ0aWFsUGVyY2VudGFnZSA9IHBlcmNlbnRhZ2U7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3Muc2V0UHJvZ3Jlc3MocGVyY2VudGFnZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEwKTtcblxuICAgICAgICAgICAgaWYgKCFjb25maWcuZG93bmxvYWRJc0FjdGl2ZSkgdGhpcy5hYm9ydCgpO1xuXG4gICAgICAgICAgICBpZiAoZmlsZVBlcmNlbnRhZ2UgPj0gMTAwKSB7XG4gICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICBwZXJjZW50YWdlID0gbmV3UGVyY2VudGFnZTtcbiAgICAgICAgICAgICAgcGFydGlhbFBlcmNlbnRhZ2UgPSBwZXJjZW50YWdlO1xuICAgICAgICAgICAgICBwcm9ncmVzcy5zZXRQcm9ncmVzcyhwZXJjZW50YWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVW5hYmxlIHRvIGNvbXB1dGUgcHJvZ3Jlc3MgaW5mb3JtYXRpb24gc2luY2UgdGhlIHRvdGFsIHNpemUgaXMgdW5rbm93blxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdVbmFibGUgdG8gY29tcHV0ZSBwcm9ncmVzcyBpbmZvcm1hdGlvbiBzaW5jZSB0aGUgdG90YWwgc2l6ZSBpcyB1bmtub3duJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAvLyBnZXQgdGhlblxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FkZGluZyB0byB6aXAnLCBwZXJjZW50YWdlKTtcbiAgICAgICAgICAgIHppcC5maWxlKGdldEZpbGVuYW1lRnJvbVBhdGgoZmlsZXBhdGgpLCByZXNwb25zZSk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgICAvLyBmb3JFYWNoUHJvbWlzZSB0aGVuXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgemlwUGVyY2VudGFnZSA9IDA7XG5cbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYWxsIGZpbGVzIGRvd25sb2FkZWQnKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc3RhcnRpbmcgemlwcGluZycpO1xuXG4gICAgICAgICAgcHJvZ3Jlc3Muc2V0UHJvZ3Jlc3MoMCwgJ0NvbXBhY3RhbmRvJyk7XG5cbiAgICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIFwidmFsaWRcIiAoc3RhdHVzIDIwMCkgZmlsZXMgdG8gemlwXG4gICAgICAgICAgLy8gQWJvcnQgemlwcGluZyBhbmQgdGhyb3cgZXJyb3JcbiAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoemlwLmZpbGVzKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGFib3J0ZG93bmxvYWQoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZmlsZXMgZm91bmQgdG8gemlwJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gU3RvcCBpZiB6aXAgaXMgbm8gYWN0aXZlXG4gICAgICAgICAgaWYgKCFjb25maWcuZG93bmxvYWRJc0FjdGl2ZSkgcmV0dXJuO1xuXG4gICAgICAgICAgLy8gc3RhcnQgemlwcGluZyBwcm9jZXNzXG4gICAgICAgICAgemlwLmdlbmVyYXRlQXN5bmMoeyB0eXBlOiAnYmxvYicgfSwgZnVuY3Rpb24gdXBkYXRlQ2FsbGJhY2sobWV0YWRhdGEpIHtcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9BbWluNTJKL0Rvd25sb2FkLVByb2dyZXNzL2Jsb2IvbWFzdGVyL2Rpc3QvZG93bmxvYWQtcHJvZ3Jlc3MuanNcbiAgICAgICAgICAgIHZhciBjdXJyZW50WmlwUGVyY2VudGFnZSA9IHBhcnNlSW50KG1ldGFkYXRhLnBlcmNlbnQsIDEwKTtcbiAgICAgICAgICAgIHZhciBuZXdQZXJjZW50YWdlID0gKFxuICAgICAgICAgICAgICBjdXJyZW50WmlwUGVyY2VudGFnZSA+IHppcFBlcmNlbnRhZ2VcbiAgICAgICAgICAgICkgPyBjdXJyZW50WmlwUGVyY2VudGFnZSA6IHppcFBlcmNlbnRhZ2U7XG5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG1ldGFkYXRhLnBlcmNlbnQpO1xuICAgICAgICAgICAgLy8gcHJvZ3Jlc3Muc2V0UHJvZ3Jlc3MobWV0YWRhdGEucGVyY2VudCk7XG5cbiAgICAgICAgICAgIGlmICghY29uZmlnLmRvd25sb2FkSXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh6aXBJbnRlcnZhbCk7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHppcEludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBpZiAoY3VycmVudFppcFBlcmNlbnRhZ2UgPj0gMTAwKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh6aXBJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3Muc2V0UHJvZ3Jlc3MoY3VycmVudFppcFBlcmNlbnRhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIHppcFBlcmNlbnRhZ2UgPSBuZXdQZXJjZW50YWdlOztcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coemlwUGVyY2VudGFnZSArICclJyk7XG4gICAgICAgICAgICAgIHByb2dyZXNzLnNldFByb2dyZXNzKGN1cnJlbnRaaXBQZXJjZW50YWdlKTtcblxuICAgICAgICAgICAgICBjbGVhckludGVydmFsKHppcEludGVydmFsKTtcbiAgICAgICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50WmlwUGVyY2VudGFnZSA+PSAxMDApIHtcbiAgICAgICAgICAgICAgLy8gY2xlYXJJbnRlcnZhbCh6aXBJbnRlcnZhbCk7XG4gICAgICAgICAgICAgIC8vIHByb2dyZXNzLnNldFByb2dyZXNzKGN1cnJlbnRaaXBQZXJjZW50YWdlLCAnYycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdmaW5pc2ggemlwcGluZycpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3NhdmUgZmlsZScpO1xuICAgICAgICAgICAgLy8gZGVidWdnZXI7XG5cbiAgICAgICAgICAgIC8vIFN0b3AgaWYgemlwIGlzIG5vIGFjdGl2ZVxuICAgICAgICAgICAgaWYgKCFjb25maWcuZG93bmxvYWRJc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZpbScpO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcHJvZ3Jlc3Muc2V0UHJvZ3Jlc3MoJycsICdEb3dubG9hZCBjb25jbHXDrWRvIScpO1xuICAgICAgICAgICAgICBwcm9ncmVzcy5lbGVtZW50cy5wcm9ncmVzcy5jbGFzc0xpc3QucmVtb3ZlKCdicy1wcm9ncmVzcy0taXMtbG9hZGluZycpO1xuICAgICAgICAgICAgICB1bmNoZWNrQWxsSXRlbXMoKTtcbiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MuaGlkZSgpO1xuICAgICAgICAgICAgICB9LCA1MDAwKTtcblxuICAgICAgICAgICAgICAvLyBTdG9wIGlmIHppcCBpcyBubyBhY3RpdmVcbiAgICAgICAgICAgICAgaWYgKCFjb25maWcuZG93bmxvYWRJc0FjdGl2ZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgIC8vIHJ1biBzYXZlQXMgb24gYnJvd3NlclxuICAgICAgICAgICAgICBzYXZlQXMoY29udGVudCwgemlwTmFtZSk7XG4gICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBzdG9yZVppcEZpbGUgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgIGNvbmZpZy56aXBGaWxlSWQgPSBEYXRlLm5vdygpO1xuICAgIC8vIFNhbHZhIG9zIGRhZG9zIG5hIHNlc3Npb25TdG9yYWdlXG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShjb25maWcuemlwRmlsZUlkLCBjb250ZW50KTtcbiAgfTtcblxuICB2YXIgZ2V0WmlwRmlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBPYnTDqW0gb3MgZGFkb3MgZGEgc2Vzc2lvblN0b3JhZ2VcbiAgICByZXR1cm4gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShjb25maWcuemlwRmlsZUlkKTtcbiAgfTtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBGaWx0ZXIgSXRlbXNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvKipcbiAgICogUmV0b3JuYSB1bSBhcnJheSBjb20gdG9kb3Mgb3MgYW5vcyBkZSBhY29yZG8gY29tIG9zIGl0ZW5zIHBhcmEgZG93bmxvYWRcbiAgICpcbiAgICogQHBhcmFtICB7b2JqZWN0fSBwYXJlbnRFbCB1bSBlbGVtZW50byBwYWkgZGUgdG9kb3Mgb3MgaXRlbnNcbiAgICogQHJldHVybiB7YXJyYXl9ICAgICAgICAgICBhcnJheSBjb20gb3MgYW5vcyBkaXNwb27DrXZlaXNcbiAgICovXG4gIHZhciBnZXRBY3RpdmVZZWFycyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJyWWVhcnMgPSBbXTtcbiAgICB2YXIgY2F0ZWdvcmllcyA9IGNvbmZpZy5lbC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtZG93bmxvYWRfX2xpc3QtLWFjdGl2ZScpO1xuXG4gICAgYXJyWWVhcnMgPSBBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwoY2F0ZWdvcmllcywgZnVuY3Rpb24gKHllYXJzLCBjYXRlZ29yeSkge1xuICAgICAgdmFyIGl0ZW1ZZWFycyA9IGdldFllYXJzQnlDYXRlZ29yeShjYXRlZ29yeSk7XG4gICAgICBpZiAoY2F0ZWdvcnkuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnKSB7XG4gICAgICAgIGl0ZW1ZZWFycy5mb3JFYWNoKGZ1bmN0aW9uICh5ZWFyKSB7XG4gICAgICAgICAgaWYgKCF5ZWFycy5pbmNsdWRlcyh5ZWFyKSkgeWVhcnMucHVzaCh5ZWFyKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4geWVhcnM7XG4gICAgfSwgW10pO1xuXG4gICAgcmV0dXJuIGFyclllYXJzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEgLSBiOyB9KS5yZXZlcnNlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyaWEgdW0gYXJyYXkgY29tIHRvZG9zIG9zIGFub3MgZGUgYWNvcmRvIGNvbSBvcyBpdGVucyBwYXJhIGRvd25sb2FkXG4gICAqXG4gICAqIEBwYXJhbSAge29iamVjdH0gIGNhdGVnb3J5ICAgdW0gZWxlbWVudG8gcGFpIGRlIHRvZG9zIG9zIGl0ZW5zXG4gICAqIEBwYXJhbSAge2Jvb2xlYW59IG9ubHlBY3RpdmUgLi4uXG4gICAqIEByZXR1cm4ge2FycmF5fSAgICAgICAgICAgICAgYXJyYXkgY29tIG9zIGFub3MgZGlzcG9uw612ZWlzXG4gICAqL1xuICB2YXIgZ2V0WWVhcnNCeUNhdGVnb3J5ID0gZnVuY3Rpb24gKGNhdGVnb3J5LCBvbmx5QWN0aXZlKSB7XG4gICAgdmFyIGFyclllYXJzID0gW107XG4gICAgdmFyIGl0ZW1zID0gbnVsbDtcblxuICAgIGlmICghY2F0ZWdvcnkgfHwgdHlwZW9mIGNhdGVnb3J5ICE9PSAnb2JqZWN0JykgcmV0dXJuIGFyclllYXJzO1xuICAgIGlmICh0eXBlb2Ygb25seUFjdGl2ZSAhPT0gJ2Jvb2xlYW4nKSBvbmx5QWN0aXZlID0gZmFsc2U7XG5cbiAgICBpdGVtcyA9IGNhdGVnb3J5LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1kb3dubG9hZF9faXRlbVtkYXRhLWRvd25sb2FkLXllYXJdJyk7XG5cbiAgICBhcnJZZWFycyA9IEFycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbChpdGVtcywgZnVuY3Rpb24gKHllYXJzLCBpdGVtKSB7XG4gICAgICB2YXIgaXRlbVllYXJzID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZG93bmxvYWQteWVhcicpLnNwbGl0KCcgJyk7XG4gICAgICBpZiAob25seUFjdGl2ZSkge1xuICAgICAgICBpZiAoaXRlbS5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZScpIHtcbiAgICAgICAgICBpdGVtWWVhcnMuZm9yRWFjaChmdW5jdGlvbiAoeWVhcikge1xuICAgICAgICAgICAgaWYgKCF5ZWFycy5pbmNsdWRlcyh5ZWFyKSkgeWVhcnMucHVzaCh5ZWFyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlbVllYXJzLmZvckVhY2goZnVuY3Rpb24gKHllYXIpIHtcbiAgICAgICAgICBpZiAoIXllYXJzLmluY2x1ZGVzKHllYXIpKSB5ZWFycy5wdXNoKHllYXIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB5ZWFycztcbiAgICB9LCBbXSk7XG5cbiAgICByZXR1cm4gYXJyWWVhcnMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYSAtIGI7IH0pLnJldmVyc2UoKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JpYSB1bSBhcnJheSBjb20gdG9kb3Mgb3MgYW5vcyBkZSBhY29yZG8gY29tIG9zIGl0ZW5zIHBhcmEgZG93bmxvYWRcbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSB5ZWFyIHVtIGVsZW1lbnRvIHBhaSBkZSB0b2RvcyBvcyBpdGVuc1xuICAgKiBAcmV0dXJuIHthcnJheX0gICAgICAgYXJyYXkgY29tIG9zIGFub3MgZGlzcG9uw612ZWlzXG4gICAqL1xuICB2YXIgZ2V0Q2F0ZWdvcmllc0J5WWVhciA9IGZ1bmN0aW9uICh5ZWFyKSB7XG4gICAgdmFyIGFyckNhdGVnb3JpZXMgPSBbXTtcblxuICAgIGlmICh0eXBlb2YgeWVhciAhPT0gJ3N0cmluZycgfHwgeWVhciA9PT0gJycpIHJldHVybiBhcnJDYXRlZ29yaWVzO1xuXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuY2F0ZWdvcmllcywgZnVuY3Rpb24gKGNhdGVnb3J5KSB7XG4gICAgICB2YXIgaXRlbXMgPSBjYXRlZ29yeS5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtZG93bmxvYWRfX2l0ZW1bZGF0YS1kb3dubG9hZC15ZWFyXScpO1xuXG4gICAgICBBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB2YXIgaXRlbVllYXJzID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZG93bmxvYWQteWVhcicpLnNwbGl0KCcgJyk7XG4gICAgICAgIGlmIChpdGVtWWVhcnMuaW5jbHVkZXMoeWVhcikpIHJldHVybiBhcnJDYXRlZ29yaWVzLnB1c2goY2F0ZWdvcnkpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYXJyQ2F0ZWdvcmllcztcbiAgfTtcblxuICAvKipcbiAgICogQ3JpYSBvIGZpbHRybyBkZSBhbm9cbiAgICogUG9wdWxhIG8gc2VsZWN0IGRlIGZpbHRybyBkZSBhbm9zIGRlIGFjb3JkbyBjb20gb3MgYW5vcyBjYWRhc3RyYWRvcyBub3MgaXRlbnNcbiAgICpcbiAgICogQHBhcmFtICB7b2JqZWN0fSBzZWxlY3QgYSB0YWcgc2VsZWN0IHF1ZSB2YWkgcmVjZWJlciBvcyBhbm9zIGNvbW8gb3B0aW9uc1xuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgdmFyIGJ1aWxkWWVhclNlbGVjdCA9IGZ1bmN0aW9uIChzZWxlY3QpIHtcbiAgICB2YXIgeWVhcnMgPSBnZXRBY3RpdmVZZWFycygpO1xuXG4gICAgeWVhcnMuZm9yRWFjaChmdW5jdGlvbiAoeWVhcikge1xuICAgICAgdmFyIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgb3B0aW9uLnZhbHVlID0geWVhcjtcbiAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IHllYXI7XG4gICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgaGFuZGxlRmlsdGVycyA9IGZ1bmN0aW9uIChzZWxlY3QpIHtcbiAgICB2YXIgY2F0ZWdvcnlJbnB1dCA9IGNvbmZpZy5maWx0ZXJGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5icy1mb3JtX19maWVsZFtuYW1lPVwiY2F0ZWdvcnlcIl0nKTtcbiAgICB2YXIgeWVhcklucHV0ID0gY29uZmlnLmZpbHRlckZvcm0ucXVlcnlTZWxlY3RvcignLmJzLWZvcm1fX2ZpZWxkW25hbWU9XCJ5ZWFyXCJdJyk7XG4gICAgdmFyIHNlbGVjdGVkQ2F0ZWdvcnlJZCA9IChjYXRlZ29yeUlucHV0ICYmIGNhdGVnb3J5SW5wdXQudmFsdWUpID8gY2F0ZWdvcnlJbnB1dC52YWx1ZSA6IG51bGw7XG4gICAgdmFyIHNlbGVjdGVkQ2F0ZWdvcnkgPSBjb25maWcuZWwucXVlcnlTZWxlY3RvcignW2RhdGEtZG93bmxvYWQtY2F0ZWdvcnk9XCInICsgc2VsZWN0ZWRDYXRlZ29yeUlkICsgJ1wiXScpO1xuICAgIHZhciBzZWxlY3RlZFllYXIgPSAoeWVhcklucHV0ICYmIHllYXJJbnB1dC52YWx1ZSkgPyB5ZWFySW5wdXQudmFsdWUgOiBudWxsO1xuICAgIC8vIHZhciBjYXRlZ29yeU9wdGlvbnMgPSAoY2F0ZWdvcnlJbnB1dCkgPyBjYXRlZ29yeUlucHV0LnF1ZXJ5U2VsZWN0b3JBbGwoJ29wdGlvbicpIDogbnVsbDtcbiAgICB2YXIgeWVhck9wdGlvbnMgPSAoeWVhcklucHV0KSA/IHllYXJJbnB1dC5xdWVyeVNlbGVjdG9yQWxsKCdvcHRpb24nKSA6IG51bGw7XG4gICAgdmFyIGNhdGVnb3JpZXMgPSBjb25maWcuY2F0ZWdvcmllcztcbiAgICB2YXIgYWN0aXZlQ2F0ZWdvcmllcyA9IG51bGw7XG4gICAgdmFyIGFjdGl2ZVllYXJzID0gW107XG5cbiAgICAvKipcbiAgICAgKiBGaWx0cmEgYSBsaXN0YSBkZSBkb3dubG9hZHMgcG9yIGNhdGVnb3JpYXMgZGUgZG93bmxvYWRzXG4gICAgICovXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjYXRlZ29yaWVzLCBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcbiAgICAgIC8vIElEIGRhIGNhdGVnb3JpYSBhdHVhbFxuICAgICAgdmFyIGNhdGVnb3J5SWQgPSBjYXRlZ29yeS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZG93bmxvYWQtY2F0ZWdvcnknKTtcbiAgICAgIC8vIEl0ZW5zIHBhcmEgZG93bmxvYWQgZGEgY2F0ZWdvcmlhIGF0dWFsXG4gICAgICB2YXIgY2F0ZWdvcnlJdGVtcyA9IGNhdGVnb3J5LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWRvd25sb2FkLXllYXJdJyk7XG4gICAgICB2YXIgaGlkZUdyb3VwID0gdHJ1ZTtcblxuICAgICAgLy8gU2UgaMOhIHVtYSBjYXRlZ29yaWEgc2VsZWNpb25hIG5vIGZpbHRybyBlIG7Do28gZm9yIGVzc2EsIGVzY29uZGVcbiAgICAgIGlmIChzZWxlY3RlZENhdGVnb3J5SWQpIHtcbiAgICAgICAgaWYgKHNlbGVjdGVkQ2F0ZWdvcnlJZCA9PT0gY2F0ZWdvcnlJZCkgaGlkZUdyb3VwID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBoaWRlR3JvdXAgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gU2UgaMOhIHVtIGFubyBzZWxlY2lvbmFkbyBubyBmaWx0cm8sIHJlc2V0YSBhIGhpZGVHcm91cCBwYXJhIG8gZmlsdHJvXG4gICAgICAvLyBkZSBhbm8gdHJhdGFyIHNlIGVzY29uZGUgb3UgbsOjbyBvIGdydXBvXG4gICAgICBpZiAoc2VsZWN0ZWRZZWFyKSB7XG4gICAgICAgIGhpZGVHcm91cCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlIG7Do28gaMOhIGNhdGVnb3JpYXMgc2VsZWNpb25hZGFzIG91IHNlIGEgY2F0ZWdvcmlhIHNlbGVjaW9uYWRvXG4gICAgICAvLyBmb3IgYSBjYXRlZ29yaWEgYXR1YWwgbm8gbG9vcFxuICAgICAgaWYgKCFzZWxlY3RlZENhdGVnb3J5SWQgfHwgc2VsZWN0ZWRDYXRlZ29yeUlkID09PSBjYXRlZ29yeUlkKSB7XG4gICAgICAgIC8vIFNlIGjDoSBpdGVucyBkZW50cm8gZGVzc2EgY2F0ZWdvcmlhXG4gICAgICAgIGlmIChjYXRlZ29yeUl0ZW1zICYmIGNhdGVnb3J5SXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgKiBGaWx0cmEgb3MgaXRlbnMgZGEgbGlzdGEgZGUgZG93bmxvYWRzIHBvciBhbm9cbiAgICAgICAgICAqL1xuICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY2F0ZWdvcnlJdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIC8vIEFub3MgY2FkYXN0cmFkb3MgcGFyYSBvIGl0ZW1cbiAgICAgICAgICAgIHZhciBpdGVtWWVhcnMgPSBpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1kb3dubG9hZC15ZWFyJykuc3BsaXQoJyAnKTtcblxuICAgICAgICAgICAgLy8gU2UgbyBmaWx0cm8gZGUgYW5vcyBleGlzdGUsIG7Do28gZXN0w6EgdmF6aW8gZSBlc3RlIGl0ZW1cbiAgICAgICAgICAgIC8vIE7Dg08gcG9zc3VpIG8gYW5vIGZpbHRyYWRvLCBlc2NvbmRlIG8gaXRlbVxuICAgICAgICAgICAgaWYgKHllYXJJbnB1dCAmJiB5ZWFySW5wdXQudmFsdWUpIHtcbiAgICAgICAgICAgICAgaWYgKCFpdGVtWWVhcnMuaW5jbHVkZXMoeWVhcklucHV0LnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICBoaWRlR3JvdXAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaXRlbS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgIGhpZGVHcm91cCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEVzY29uZGUgYSBjYXRlZ29yaWFcbiAgICAgIGlmIChoaWRlR3JvdXApIHtcbiAgICAgICAgY2F0ZWdvcnkuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuY2F0ZWdvcnlBY3RpdmVDbGFzcyk7XG4gICAgICAgIGNhdGVnb3J5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYXRlZ29yeS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5jYXRlZ29yeUFjdGl2ZUNsYXNzKTtcbiAgICAgICAgY2F0ZWdvcnkuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGNhdGVnb3J5SW5wdXQgJiYgc2VsZWN0ID09PSB5ZWFySW5wdXQpIHtcbiAgICAgIGFjdGl2ZUNhdGVnb3JpZXMgPSBnZXRDYXRlZ29yaWVzQnlZZWFyKHNlbGVjdGVkWWVhcik7XG4gICAgICBpZiAoY2F0ZWdvcmllcykge1xuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNhdGVnb3JpZXMsIGZ1bmN0aW9uIChjYXRlZ29yeSkge1xuICAgICAgICAgIHZhciBpZCA9IGNhdGVnb3J5LmdldEF0dHJpYnV0ZSgnZGF0YS1kb3dubG9hZC1jYXRlZ29yeScpO1xuICAgICAgICAgIHZhciBvcHRpb24gPSBjYXRlZ29yeUlucHV0LnF1ZXJ5U2VsZWN0b3IoJ29wdGlvblt2YWx1ZT1cIicgKyBpZCArICdcIl0nKTtcbiAgICAgICAgICBpZiAoYWN0aXZlQ2F0ZWdvcmllcy5sZW5ndGggJiYgIWFjdGl2ZUNhdGVnb3JpZXMuaW5jbHVkZXMoY2F0ZWdvcnkpKSB7XG4gICAgICAgICAgICBvcHRpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIG9wdGlvbi5zdHlsZS5jb2xvciA9ICdyZWQnO1xuICAgICAgICAgICAgb3B0aW9uLmRpc2FibGVkID0gJ2Rpc2FibGVkJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9uLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIG9wdGlvbi5zdHlsZS5jb2xvciA9ICcnO1xuICAgICAgICAgICAgb3B0aW9uLmRpc2FibGVkID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoeWVhcklucHV0ICYmIHNlbGVjdCA9PT0gY2F0ZWdvcnlJbnB1dCkge1xuICAgICAgYWN0aXZlWWVhcnMgPSBnZXRZZWFyc0J5Q2F0ZWdvcnkoc2VsZWN0ZWRDYXRlZ29yeSk7XG4gICAgICB5ZWFyT3B0aW9ucyA9IHllYXJJbnB1dC5xdWVyeVNlbGVjdG9yQWxsKCdvcHRpb24nKTtcbiAgICAgIGlmICh5ZWFyT3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh5ZWFyT3B0aW9ucywgZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICAgIGlmIChvcHRpb24udmFsdWUgJiYgYWN0aXZlWWVhcnMubGVuZ3RoICYmICFhY3RpdmVZZWFycy5pbmNsdWRlcyhvcHRpb24udmFsdWUpKSB7XG4gICAgICAgICAgICBvcHRpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIG9wdGlvbi5zdHlsZS5jb2xvciA9ICdyZWQnO1xuICAgICAgICAgICAgb3B0aW9uLmRpc2FibGVkID0gJ2Rpc2FibGVkJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9uLnN0eWxlLmNvbG9yID0gJyc7XG4gICAgICAgICAgICBvcHRpb24uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgb3B0aW9uLmRpc2FibGVkID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICAgIHByb2dyZXNzOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gY29uZmlnLmRvd25sb2FkUHJvZ3Jlc3NcbiAgICB9LFxuICAgIGZpbHRlcjogaGFuZGxlRmlsdGVycyxcbiAgfTtcbn07XG5cbi8qKlxuICogSW5pdCBNb2RhbCBDb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH0gSGVhZGVyLmluaXQoKTtcbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgd2luZG93LmRvd25sb2Fkc0FyciA9IFtdO1xuICB2YXIgZG93bmxvYWRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWRvd25sb2FkJyk7XG4gIGlmIChkb3dubG9hZHMubGVuZ3RoKSB7XG4gICAgdmFyIGRvd25sb2FkID0gbnVsbDtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGRvd25sb2FkcywgZnVuY3Rpb24gKGVsKSB7XG4gICAgICBkb3dubG9hZCA9IG5ldyBCc0Rvd25sb2Fkc0xpc3QoZWwpO1xuICAgICAgZG93bmxvYWQuaW5pdCgpO1xuICAgICAgZG93bmxvYWRzQXJyLnB1c2goZG93bmxvYWQpO1xuICAgIH0pO1xuICB9XG59KTtcbiIsIi8qKlxuICogU2NyaXB0IG1hcGEgKyBjYXJkIHRlbGVmb25lXG4gKi9cbnZhciBNdWx0aU1hcmtlck1hcCA9IChmdW5jdGlvbiAoKSB7XG5cbiAgdmFyIG1hcEVsZW1lbnRBbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGktbWFwcycpO1xuXG4gIHZhciBpbml0ID0gZnVuY3Rpb24gKG1hcFNlbGVjdG9yKSB7XG4gICAgdmFyIG1hcEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1hcFNlbGVjdG9yKTtcbiAgICBcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG1hcEVsZW1lbnRBbGwsIGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICBtYXBFbDogZWxlbSxcbiAgICAgICAgbWFwTG9jYXRpb25zOiBlbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1tYXAtaW5mb19fbG9jYXRpb24nKSxcbiAgICAgICAgY2VudGVyUG9pbnRMYXQ6IGVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLW1hcC1sYXQnKSxcbiAgICAgICAgY2VudGVyUG9pbnRMbmc6IGVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLW1hcC1sbmcnKSxcbiAgICAgICAgaW5zaWRlVGl0bGU6ICcnLFxuICAgICAgICBpbnNpZGVBZGRyZXNzOiAnJyxcbiAgICAgICAgaW5zaWRlTGF0OiAnJyxcbiAgICAgICAgaW5zaWRlTG5nOiAnJyxcbiAgICAgICAgZmluYWxMaXN0OiBbXSxcbiAgICAgIH07XG4gICAgICBcbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLm1hcExvY2F0aW9ucywgZnVuY3Rpb24gKGUsIGluZGV4KSB7XG4gICAgICAgIGNvbmZpZy5pbnNpZGVUaXRsZSA9IGUuZ2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJyk7XG4gICAgICAgIGNvbmZpZy5pbnNpZGVBZGRyZXNzID0gZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWRkcmVzcycpO1xuICAgICAgICBjb25maWcuaW5zaWRlTGF0ID0gZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGF0Jyk7XG4gICAgICAgIGNvbmZpZy5pbnNpZGVMbmcgPSBlLmdldEF0dHJpYnV0ZSgnZGF0YS1sbmcnKTtcbiAgXG4gICAgICAgIHZhciBsaXN0SW5zaWRlID0ge1xuICAgICAgICAgIGlkOiBpbmRleCxcbiAgICAgICAgICBhZGRyZXNzOiBjb25maWcuaW5zaWRlQWRkcmVzcyxcbiAgICAgICAgICBsYXQ6IGNvbmZpZy5pbnNpZGVMYXQsXG4gICAgICAgICAgbG5nOiBjb25maWcuaW5zaWRlTG5nLFxuICAgICAgICAgIGZuOiBmdW5jdGlvbiAoKSB7IHJldHVybiBzY3JvbGxUbyhpbmRleCk7IH0sXG4gICAgICAgICAgaW5mb1dpbmRvdzoge1xuICAgICAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgICAgICB0aXRsZTogY29uZmlnLmluc2lkZVRpdGxlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gIFxuICAgICAgICBjb25maWcuZmluYWxMaXN0LnB1c2gobGlzdEluc2lkZSk7XG4gIFxuICAgICAgfSk7XG4gIFxuICAgICAgaWYgKGNvbmZpZy5tYXBFbCAmJiBjb25maWcuZmluYWxMaXN0Lmxlbmd0aCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICBtYXBIZWlnaHQ6IDUwMCxcbiAgICAgICAgICBsb2NhdGlvbnM6IGNvbmZpZy5maW5hbExpc3QsXG4gICAgICAgICAgbWFwT3B0aW9uczoge1xuICAgICAgICAgICAgem9vbTogMTQsXG4gICAgICAgICAgICBjZW50ZXI6IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoY29uZmlnLmNlbnRlclBvaW50TGF0LCBjb25maWcuY2VudGVyUG9pbnRMbmcpLFxuICAgICAgICAgICAgbWFwVHlwZUlkOiBnb29nbGUubWFwcy5NYXBUeXBlSWQuUk9BRE1BUCxcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICBcbiAgICAgICAgQnNNYXBzLmluaXQoY29uZmlnLm1hcEVsLCBvcHRpb25zKTtcbiAgICAgIH0gXG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHNjcm9sbFRvID0gZnVuY3Rpb24gKGVsZW1lbnRJZCkge1xuICAgIHZhciB0YXJnZXRBbmNob3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zY3JvbGwtYW5jaG9yPVwiJyArIGVsZW1lbnRJZCArICdcIl0nKTtcblxuICAgIGlmICh0YXJnZXRBbmNob3IpIHtcbiAgICAgIHZhciBzY3JvbGwgPSBuZXcgU21vb3RoU2Nyb2xsKCk7XG4gICAgICB2YXIgY3VycmVudEFjdGl2ZSA9IHRhcmdldEFuY2hvci5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5icy1pcy1hY3RpdmUnKTtcbiAgICAgIGlmIChjdXJyZW50QWN0aXZlKSBjdXJyZW50QWN0aXZlLmNsYXNzTGlzdC5yZW1vdmUoJ2JzLWlzLWFjdGl2ZScpO1xuICAgICAgdGFyZ2V0QW5jaG9yLmNsYXNzTGlzdC5hZGQoJ2JzLWlzLWFjdGl2ZScpO1xuICAgICAgc2Nyb2xsLmFuaW1hdGVTY3JvbGwodGFyZ2V0QW5jaG9yLCAwLCB7IHNwZWVkOiAzMDAgfSk7XG4gICAgfVxuICB9O1xuXG5cbiAgdmFyIG1hcEFkZHJlc3MgPSBmdW5jdGlvbiAoYWRkKSB7XG4gICAgdmFyIGdlb2NvZGVyO1xuICAgIHZhciBtYXA7XG4gICAgdmFyIG1hcmtlcjtcblxuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgem9vbTogMTgsXG4gICAgICBtYXBUeXBlSWQ6IGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQXG4gICAgfTtcblxuICAgIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5icy1qcy1tYXBcIiksIG9wdGlvbnMpO1xuICAgIGdlb2NvZGVyID0gbmV3IGdvb2dsZS5tYXBzLkdlb2NvZGVyKCk7XG4gICAgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICBtYXA6IG1hcCxcbiAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICB9KTtcblxuICAgIGdlb2NvZGVyLmdlb2NvZGUoeyAnYWRkcmVzcyc6IGFkZCArICcsIEJyYXNpbCcsICdyZWdpb24nOiAnQlInIH0sIGZ1bmN0aW9uIChyZXN1bHRzLCBzdGF0dXMpIHtcblxuICAgICAgaWYgKHN0YXR1cyA9PSBnb29nbGUubWFwcy5HZW9jb2RlclN0YXR1cy5PSykge1xuICAgICAgICBpZiAocmVzdWx0c1swXSkge1xuICAgICAgICAgIHZhciBsYXRpdHVkZSA9IHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24ubGF0KCk7XG4gICAgICAgICAgdmFyIGxvbmdpdHVkZSA9IHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24ubG5nKCk7XG5cbiAgICAgICAgICB2YXIgbG9jYXRpb24gPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxhdGl0dWRlLCBsb25naXR1ZGUpO1xuICAgICAgICAgIG1hcmtlci5zZXRQb3NpdGlvbihsb2NhdGlvbik7XG4gICAgICAgICAgbWFwLnNldENlbnRlcihsb2NhdGlvbik7XG4gICAgICAgICAgbWFwLnNldFpvb20oMTUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICB9O1xufSgpKTtcblxuLyoqXG4gKiBJbml0IE11bHRpTWFya2VyTWFwIGNvbnN0cnVjdG9yXG4gKiBAcmV0dXJuIHt2b2lkfSBNdWx0aU1hcmtlck1hcC5pbml0KCk7XG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGktbWFwcycpLmxlbmd0aCkge1xuICAgIGluaXRHb29nbGVNYXAoZnVuY3Rpb24gKCkge1xuICAgICAgTXVsdGlNYXJrZXJNYXAuaW5pdCgnLmJzLWpzLW1hcCcpO1xuICAgIH0pO1xuICB9XG59KTtcbiIsIi8qKlxuICogQnNNZWRpYVNsaWRlclxuICogQHJldHVybiBNb2R1bGUgY29uZmlnXG4gKi9cbnZhciBCc01lZGlhU2xpZGVyID0gKGZ1bmN0aW9uICgpIHtcblxuICAvLyBDb25maWdcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBjb250YWluZXJzOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtc2xpZGVyJyksXG4gIH1cblxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLmNvbnRhaW5lcnMsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBjb250YWluZXIgPSBlO1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGluaXRDYXJvdXNlbENvbnRhaW5lcihjb250YWluZXIpO1xuICAgICAgfSwgNDAwKTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgaW5pdENhcm91c2VsQ29udGFpbmVyID0gZnVuY3Rpb24gKCBjb250YWluZXIgKSB7XG5cbiAgICB2YXIgY2Fyb3VzZWwgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmJzLW1lZGlhX19saXN0Jyk7XG4gICAgdmFyIHBhbmVsID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5icy1tZWRpYV9fbmF2IC5icy1tZWRpYV9fbGlzdCcpO1xuICAgIHZhciBsb2FkaW5nID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5icy1sb2FkaW5nJyk7XG5cbiAgICB2YXIgZmxrdHkgPSBuZXcgRmxpY2tpdHkoY2Fyb3VzZWwsIHtcbiAgICAgIGFzTmF2Rm9yOiBwYW5lbCxcbiAgICAgIGdyb3VwQ2VsbHM6ICd0cnVlJyxcbiAgICAgIGNlbGxBbGlnbjogJ2xlZnQnLFxuICAgICAgY29udGFpbjogdHJ1ZSxcbiAgICAgIHByZXZOZXh0QnV0dG9uczogZmFsc2UsXG4gICAgICBvbjoge1xuICAgICAgICByZWFkeTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbG9hZGluZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGxvYWRpbmcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBuYXYgaXRlbXMgY29udGVudFxuXG4gICBpZiAocGFuZWwpIHtcblxuICAgICAgZmxrdHlBID0gbmV3IEZsaWNraXR5KHBhbmVsLCB7XG4gICAgICAgIHBhZ2VEb3RzOiBmYWxzZSxcbiAgICAgICAgY2VsbEFsaWduOiAnbGVmdCcsXG4gICAgICAgIHByZXZOZXh0QnV0dG9uczogZmFsc2UsXG4gICAgICAgIGFkYXB0aXZlSGVpZ2h0OiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIHZhciBuYXZDbG9zZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYnMtbWVkaWFfX25hdi0tY2xvc2UnKTtcbiAgICAgIHZhciBuYXZDb250ZW50ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5icy1tZWRpYV9fbmF2Jyk7XG4gICAgICB2YXIgbmF2SXRlbSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtbWVkaWFfX2l0ZW0nKTtcblxuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChuYXZJdGVtLCBmdW5jdGlvbihlKSB7XG5cbiAgICAgICAgZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBuYXZDb250ZW50LmNsYXNzTGlzdC5hZGQoJ2JzLW1lZGlhX19uYXYtLWFjdGl2ZScpO1xuICAgICAgICAgIH0sIDQwMCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cblxuICAgICAgbmF2Q2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgbmF2Q29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdicy1tZWRpYV9fbmF2LS1hY3RpdmUnKTtcbiAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgLy8gYnV0dG9ucyBhY3Rpb25zIG1vdmUgLSBsZWZ0XG4gICAgdmFyIHByZXZpb3VzQnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5icy1tZWRpYV9fYXJyb3ctcHJldicpO1xuICAgIHByZXZpb3VzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBmbGt0eS5wcmV2aW91cygpO1xuICAgIH0pO1xuXG4gICAgLy8gYnV0dG9ucyBhY3Rpb25zIG1vdmUgLSByaWdodFxuICAgIHZhciBuZXh0QnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5icy1tZWRpYV9fYXJyb3ctbmV4dCcpO1xuICAgIG5leHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIGZsa3R5Lm5leHQoKTtcbiAgICB9KTtcblxuICAgIC8vIGZsa3R5Lm9uKCAnc2Nyb2xsJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gICBmbGt0eS5kZXN0cm95KClcbiAgICAvLyAgIGZsa3R5ID0gbmV3IEZsaWNraXR5KHBhbmVsKTtcbiAgICAvLyB9KTtcblxuICAgIG5leHRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgIGNhcm91c2VsLmNsYXNzTGlzdC5hZGQoJ2JzLW1lZGlhX19saXN0LS1saW5lYXItbmV4dCcpO1xuXG5cbiAgICBmbGt0eS5vbignY2VsbFNlbGVjdCcsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgLy8gY2xhc3MgYWRkIG9yIHJlbW92ZSBlZmZlY3Qgb3ZlciBpbiBwb3NpdGlvbiBpbml0aWFsXG4gICAgICBpZiAoIWZsa3R5LmNlbGxzW2Zsa3R5LnNlbGVjdGVkSW5kZXggLSAxXSkge1xuXG4gICAgICAgIG5leHRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICBjYXJvdXNlbC5jbGFzc0xpc3QuYWRkKCdicy1tZWRpYV9fbGlzdC0tbGluZWFyLW5leHQnKTtcblxuICAgICAgICBwcmV2aW91c0J1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgIGNhcm91c2VsLmNsYXNzTGlzdC5yZW1vdmUoJ2JzLW1lZGlhX19saXN0LS1saW5lYXItcHJldicpO1xuXG4gICAgICAgIC8vIGNsYXNzIGFkZCBvciByZW1vdmUgZWZmZWN0IG92ZXIgaW4gcG9zaXRpb24gZmluYWxcbiAgICAgIH0gZWxzZSBpZighZmxrdHkuY2VsbHNbZmxrdHkuY2VsbHMubGVuZ3RoXSkge1xuXG4gICAgICAgIHByZXZpb3VzQnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSggJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyApO1xuICAgICAgICBjYXJvdXNlbC5jbGFzc0xpc3QuYWRkKCdicy1tZWRpYV9fbGlzdC0tbGluZWFyLXByZXYnKTtcblxuICAgICAgICAvLyBjbGFzcyBhZGQgb3IgcmVtb3ZlIGVmZmVjdCBvdmVyIGluIG1pZGRsZSBwb3NpdGlvbiB0byBpdGVtcyBiaWcgdGhhbiBzaWRlc1xuICAgICAgICBpZiAoZmxrdHkuc2VsZWN0ZWRJbmRleCA9PT0gKGZsa3R5LnBhZ2VEb3RzLmRvdHMubGVuZ3RoIC0gMSkpIHtcblxuICAgICAgICAgIG5leHRCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAgIGNhcm91c2VsLmNsYXNzTGlzdC5yZW1vdmUoJ2JzLW1lZGlhX19saXN0LS1saW5lYXItbmV4dCcpO1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgcHJldmlvdXNCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAgIG5leHRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuXG4gICAgICAgICAgY2Fyb3VzZWwuY2xhc3NMaXN0LmFkZCgnYnMtbWVkaWFfX2xpc3QtLWxpbmVhci1uZXh0Jyk7XG4gICAgICAgICAgY2Fyb3VzZWwuY2xhc3NMaXN0LmFkZCgnYnMtbWVkaWFfX2xpc3QtLWxpbmVhci1wcmV2Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuXG4gICAgaWYgKCFjYXJvdXNlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWRyYWdnYWJsZScpKSB7XG4gICAgICBjYXJvdXNlbC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5icy1tZWRpYV9fYXJyb3dzJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGluaXQ6IGluaXQsXG4gIH07XG59KCkpO1xuXG4vKipcbiAqIEluaXQgTWVudSBDb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH0gTWVudS5pbml0KCk7XG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtbWVkaWFfX3NsaWRlcicpKSB7XG4gICAgQnNNZWRpYVNsaWRlci5pbml0KCk7XG4gIH1cbn0pO1xuIiwiLyoqXG4gKiBNZW51XG4gKiBAcmV0dXJuIE1vZHVsZSBjb25maWdcbiAqL1xudmFyIE1lbnUgPSAoZnVuY3Rpb24gKCkge1xuICAvLyBDbGFzcyBNb2RpZmllcnNcbiAgdmFyIG1vZENsYXNzID0ge1xuICAgIG92ZXJmbG93SGlkZGVuOiAnYnMtb3ZlcmZsb3ctLWhpZGRlbicsXG4gICAgaGFtYnVyZ2VyQWN0aXZlOiAnYnMtaGVhZGVyX19uYXYtdG9nZ2xlLS1vcGVuJyxcbiAgICBtZW51QWN0aXZlOiAnYnMtbWVudS0tb3BlbicsXG4gICAgbWVudUl0ZW1IYXNDaGlsZDogJ2JzLW1lbnVfX2l0ZW0tLWhhcy1jaGlsZCcsXG4gICAgbWVudUl0ZW1PcGVuOiAnYnMtbWVudV9faXRlbS0tb3BlbicsXG4gICAgbWVudUxpc3RPcGVuOiAnYnMtbWVudV9fc3VibGlzdC0tb3BlbicsXG4gICAgb3ZlcmxheUJnOiAnYnMtb3ZlcmxheS0tbmF2JyxcbiAgICB2aXNpYmxlOiAnYnMtaXMtdmlzaWJsZScsXG4gIH07XG5cbiAgLy8gRE9NIEVsZW1lbnRzXG4gIHZhciBlbCA9IHtcbiAgICBib2R5OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JyksXG4gICAgY2xvc2VNZW51OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtY2xvc2UtbWVudScpLFxuICAgIGN1cnJlbnRNZW51OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtbWVudV9fc3VibGlzdC0tY3VycmVudCcpLFxuICAgIHN1Ymxpc3Q6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1tZW51X19zdWJsaXN0JyksXG4gICAgLy8gdHJ1ZSA9IHZvbHRhbmRvXG4gICAgLy8gZmFsc2UgPSBwcsOzeGltbyBtZW51XG4gICAgZGlyZWN0aW9uOiAnJyxcbiAgICBuZXh0TWVudTogJycsXG4gICAgaGFtYnVyZ2VyOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtaGVhZGVyX19uYXYtdG9nZ2xlJyksXG4gICAgbWVudTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLW1lbnUnKSxcbiAgICBtZW51QnV0dG9uczogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLW1lbnUtaXRlbScpLFxuICAgIG92ZXJsYXk6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1vdmVybGF5JyksXG4gIH07XG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gVG9nZ2xlIG1lbnVcbiAgICBpZiAoZWwuaGFtYnVyZ2VyKSB7XG4gICAgICBlbC5oYW1idXJnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfb3Blbk1lbnUpO1xuICAgIH1cblxuICAgIC8vIEV4cGFuZCBzdWJsaXN0cyBpbnNpZGUgbWFpbiBNZW51XG4gICAgaWYgKGVsLm1lbnVCdXR0b25zKSB7XG4gICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGVsLm1lbnVCdXR0b25zLCBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgdmFyIGN1cnJlbnRNZW51ID0gZ2V0UGFyZW50cyhlbGVtZW50LCAnanMtbWVudScsIHRydWUpWzBdO1xuICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnYnMtbWVudV9fYmFjaycpO1xuICAgICAgICAgIHZhciBwYXJlbnQgPSBlbGVtZW50LmNsb3Nlc3QoJy5icy1tZW51X19pdGVtJyk7XG4gICAgICAgICAgdmFyIG5leHRNZW51O1xuXG4gICAgICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgLy8gZ2V0IHByZXZpb3VzIG1lbnUgKHBhcmVudCBtZW51KVxuICAgICAgICAgICAgbmV4dE1lbnUgPSBnZXRQYXJlbnRzKGVsZW1lbnQsICdqcy1tZW51JylbMV07XG4gICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50Lm5leHRFbGVtZW50U2libGluZykge1xuICAgICAgICAgICAgLy8gb3IgZ2V0IHRoZSBzdWJtZW51XG4gICAgICAgICAgICBuZXh0TWVudSA9IGVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBmaXggd2hlbiB3ZWJsaWJyYXMgaXMgYWN0aXZlXG4gICAgICAgICAgICBuZXh0TWVudSA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCcuanMtbWVudScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlJ3MgYSBzdWJtZW51IGZvciB0aGlzIGl0ZW1cbiAgICAgICAgICBpZiAobmV4dE1lbnUpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjdXJyZW50TWVudS5zY3JvbGxUb3AgPSAwO1xuXG4gICAgICAgICAgICAvLyBvcGVuIGl0XG4gICAgICAgICAgICBfdXBkYXRlUG9zaXRpb25zKGN1cnJlbnRNZW51LCBuZXh0TWVudSwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIF9vcGVuU3ViTWVudSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBhZGQgY2xhc3MgY3VycmVudFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBDbG9zZSBtZW51IG9uIGVzYyBrZXkgcHJlc3NcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZWwubWVudS5jbGFzc0xpc3QuY29udGFpbnMobW9kQ2xhc3MubWVudUFjdGl2ZSkpIGlmIChlLmtleUNvZGUgPT09IDI3KSBfY2xvc2VNZW51KCk7XG4gICAgfSk7XG5cbiAgICAvLyBDbG9zZSBtZW51XG4gICAgZWwuY2xvc2VNZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgX2Nsb3NlTWVudSgpO1xuICAgIH0pO1xuXG4gICAgLy8gQ2xvc2UgbWVudSBvbiBjbGljayBvdXRzaWRlXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdib2R5LCBodG1sJyksIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBlbC5tZW51LmNsYXNzTGlzdC5jb250YWlucyhtb2RDbGFzcy5tZW51QWN0aXZlKSAmJlxuICAgICAgICAgICFlbC5tZW51LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkgJiZcbiAgICAgICAgICAhZWwuaGFtYnVyZ2VyLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgICBfY2xvc2VNZW51KCk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgX29wZW5TdWJNZW51ID0gZnVuY3Rpb24gKCkge1xuICAgIF9tZW51T3V0KCk7XG4gICAgX21lbnVJbigpO1xuICB9O1xuXG4gIHZhciBfbWVudU91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBlbC5jdXJyZW50TWVudS5jbGFzc0xpc3QucmVtb3ZlKG1vZENsYXNzLm1lbnVMaXN0T3Blbik7XG4gIH07XG5cbiAgdmFyIF9tZW51SW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgZWwubmV4dE1lbnUuY2xhc3NMaXN0LmFkZChtb2RDbGFzcy5tZW51TGlzdE9wZW4pO1xuXG4gICAgX3VwZGF0ZVBvc2l0aW9ucyhlbC5uZXh0TWVudSwgJycsIGVsLmRpcmVjdGlvbik7XG4gIH07XG5cbiAgdmFyIF91cGRhdGVQb3NpdGlvbnMgPSBmdW5jdGlvbiAoY3VycmVudE1lbnUsIG5leHRNZW51LCBkaXJlY3Rpb24pIHtcbiAgICBlbC5jdXJyZW50TWVudSA9IGN1cnJlbnRNZW51O1xuICAgIGVsLm5leHRNZW51ID0gbmV4dE1lbnU7XG4gICAgZWwuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICB9O1xuXG4gIHZhciBfb3Blbk1lbnUgPSBmdW5jdGlvbiAoKSB7XG4gICAgZWwuaGFtYnVyZ2VyLmNsYXNzTGlzdC5hZGQobW9kQ2xhc3MuaGFtYnVyZ2VyQWN0aXZlKTtcbiAgICBlbC5tZW51LmNsYXNzTGlzdC5hZGQobW9kQ2xhc3MubWVudUFjdGl2ZSk7XG4gICAgZWwuYm9keS5jbGFzc0xpc3QuYWRkKG1vZENsYXNzLm92ZXJmbG93SGlkZGVuKTtcbiAgICBlbC5vdmVybGF5LmNsYXNzTGlzdC5hZGQobW9kQ2xhc3MudmlzaWJsZSk7XG4gICAgZWwub3ZlcmxheS5jbGFzc0xpc3QuYWRkKG1vZENsYXNzLm92ZXJsYXlCZyk7XG4gIH07XG5cbiAgdmFyIF9jbG9zZU1lbnUgPSBmdW5jdGlvbiAoKSB7XG4gICAgZWwuaGFtYnVyZ2VyLmNsYXNzTGlzdC5yZW1vdmUobW9kQ2xhc3MuaGFtYnVyZ2VyQWN0aXZlKTtcbiAgICBlbC5tZW51LmNsYXNzTGlzdC5yZW1vdmUobW9kQ2xhc3MubWVudUFjdGl2ZSk7XG4gICAgZWwuYm9keS5jbGFzc0xpc3QucmVtb3ZlKG1vZENsYXNzLm92ZXJmbG93SGlkZGVuKTtcbiAgICBlbC5vdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUobW9kQ2xhc3MudmlzaWJsZSk7XG4gICAgZWwub3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKG1vZENsYXNzLm92ZXJsYXlCZyk7XG5cbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGVsLnN1Ymxpc3QsIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMobW9kQ2xhc3MubWVudUxpc3RPcGVuKSkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUobW9kQ2xhc3MubWVudUxpc3RPcGVuKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGluaXQ6IGluaXQsXG4gIH07XG59KCkpO1xuXG4vKipcbiAqIEluaXQgTWVudSBDb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH0gTWVudS5pbml0KCk7XG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtbWVudScpKSB7XG4gICAgTWVudS5pbml0KCk7XG4gIH1cbn0pO1xuIiwiLyoqXG4gKiBNZW51IGNvbSBEcm9wZG93blxuICovXG52YXIgQnNRdWlja01lbnVEcm9wID0gKGZ1bmN0aW9uICgpIHtcbiAgLy8gQ29uZmlnXG4gIHZhciBjb25maWcgPSB7XG4gICAgYnV0dG9uczoge1xuICAgICAgYmFjazogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLXF1aWNrLW1lbnVfX2JhY2snKSxcbiAgICAgIGl0ZW06IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1xdWljay1tZW51X19tZW51IC5icy1xdWljay1tZW51X19pdGVtJyksXG4gICAgICB0cmlnZ2VyTWVudTogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLXF1aWNrLXRyaWdnZXItbWVudScpLFxuICAgIH0sXG4gICAgY2xhc3Nlczoge1xuICAgICAgaXRlbVN1Ym1lbnVPcGVuOiAnYnMtcXVpY2stbWVudV9faXRlbS0tc3ViLW9wZW4nLFxuICAgICAgbWVudU9wZW46ICdicy1xdWljay1tZW51X19tZW51LS1vcGVuJyxcbiAgICAgIHNvcnRhYmxlOiAnYnMtcXVpY2stbWVudV9fbWVudS0tc29ydGFibGUnLFxuICAgICAgc3ViU3VibWVudU9wZW46ICdicy1xdWljay1tZW51X19tZW51LS1zdWItb3BlbicsXG4gICAgICB0cmlnZ2VyTWVudUFjdGl2ZTogJ2JzLXF1aWNrLW1lbnVfX2l0ZW0tLWFjdGl2ZScsXG4gICAgfSxcbiAgICBjb250YWluZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1xdWljay1tZW51JyksXG4gICAgbWVudTogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLXF1aWNrLW1lbnVfX21lbnUnKSxcbiAgICB3cmFwcGVyOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtcXVpY2stbWVudV9fZHJvcGRvd24nKSxcbiAgICBzb3J0YWJsZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLXF1aWNrLW1lbnVfX21lbnUuYnMtcXVpY2stbWVudV9fbWVudS0tc29ydGFibGUnKSxcbiAgfTtcblxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgIC8vIFJlY2FsY3VsYSBvIHBvc2ljaW9uYW1lbnRvIGRvIG1lbnVcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIF9jYWxjU3VibWVudVBvc2l0aW9uKCk7XG4gICAgfSwgNTAwKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBfY2FsY1N1Ym1lbnVQb3NpdGlvbigpO1xuICAgIH0pO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF9jbG9zZUFsbE1lbnVzKCk7XG4gICAgfSk7XG5cbiAgICBjb25maWcuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF9jbG9zZUFsbE1lbnVzKCk7XG4gICAgfSk7XG5cbiAgICBfaW5pdFNoYWRvdygpO1xuXG4gICAgaWYgKGNvbmZpZy5idXR0b25zLnRyaWdnZXJNZW51KSB7XG4gICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5idXR0b25zLnRyaWdnZXJNZW51LCBmdW5jdGlvbiAoYnV0dG9uKSB7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgX2NhbGNTdWJtZW51UG9zaXRpb24oKTtcblxuICAgICAgICAgIHZhciBtZW51ID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy5icy1xdWljay1tZW51X19tZW51Jyk7XG4gICAgICAgICAgdmFyIGlzTWVudU9wZW4gPSAobWVudS5jbGFzc0xpc3QuY29udGFpbnMoY29uZmlnLmNsYXNzZXMubWVudU9wZW4pKSA9PT0gdHJ1ZTtcblxuICAgICAgICAgIGlmIChpc01lbnVPcGVuICYmIG1lbnUpIHtcbiAgICAgICAgICAgIF9jbG9zZU1lbnUobWVudSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX2Nsb3NlQWxsTWVudXMoKTtcbiAgICAgICAgICAgIF9vcGVuTWVudShtZW51KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5idXR0b25zLml0ZW0pIHtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLmJ1dHRvbnMuaXRlbSwgZnVuY3Rpb24gKGJ1dHRvbikge1xuICAgICAgICB2YXIgc3VibWVudSA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcuYnMtcXVpY2stbWVudV9fc3VibWVudScpO1xuICAgICAgICBjb25zb2xlLmxvZyhzdWJtZW51KVxuXG4gICAgICAgIGlmIChzdWJtZW51KSB7XG4gICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHZhciBwYXJlbnRNZW51ID0gYnV0dG9uLnBhcmVudE5vZGU7XG5cbiAgICAgICAgICAgIHBhcmVudE1lbnUuY2xhc3NMaXN0LmFkZChjb25maWcuY2xhc3Nlcy5zdWJTdWJtZW51T3Blbik7XG4gICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChjb25maWcuY2xhc3Nlcy5pdGVtU3VibWVudU9wZW4pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmJ1dHRvbnMuYmFjaykge1xuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuYnV0dG9ucy5iYWNrLCBmdW5jdGlvbiAoYnV0dG9uKSB7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICB2YXIgbWVudUl0ZW0gPSBnZXRQYXJlbnRzKGJ1dHRvbiwgY29uZmlnLmNsYXNzZXMuaXRlbVN1Ym1lbnVPcGVuLCB0cnVlKVswXTtcbiAgICAgICAgICB2YXIgbWVudSA9IGdldFBhcmVudHMoYnV0dG9uLCBjb25maWcuY2xhc3Nlcy5zdWJTdWJtZW51T3BlbiwgdHJ1ZSlbMF07XG5cbiAgICAgICAgICBpZiAobWVudUl0ZW0pIHtcbiAgICAgICAgICAgIG1lbnVJdGVtLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmNsYXNzZXMuaXRlbVN1Ym1lbnVPcGVuKTtcbiAgICAgICAgICAgIG1lbnUuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuY2xhc3Nlcy5zdWJTdWJtZW51T3Blbik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChjb25maWcuc29ydGFibGUpIHtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLnNvcnRhYmxlLCBmdW5jdGlvbiAobWVudSkge1xuICAgICAgICBkcmFndWxhKFttZW51XSwge1xuICAgICAgICAgIG1vdmVzOiBmdW5jdGlvbiAoZWwsIHNvdXJjZSwgaGFuZGxlLCBzaWJsaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gKCFlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2JzLXF1aWNrLW1lbnVfX2Zhdm9yaXRlJykpICYmIHRydWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuXG4gICAgfVxuXG4gICAgLy8gRmVjaGEgbyBtZW51IHF1YW5kbyBjbGljYXIgZm9yYSBkZWxlXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdib2R5LCBodG1sJyksIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBwYXJlbnRNZW51ID0gZ2V0UGFyZW50KGV2ZW50LnRhcmdldCwgJ2JzLXF1aWNrLW1lbnVfX2Ryb3Bkb3duJyk7XG4gICAgICAgIGlmICghcGFyZW50TWVudSkge1xuICAgICAgICAgIF9jbG9zZUFsbE1lbnVzKCk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBDYWxjdWxhIGEgcG9zacOnw6NvIGVtIHF1ZSBvIHN1Ym1lbnUgZGV2ZSBhYnJpclxuICB2YXIgX2NhbGNTdWJtZW51UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1lbnVzID0gY29uZmlnLm1lbnU7XG5cbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG1lbnVzLCBmdW5jdGlvbiAobWVudSkge1xuICAgICAgdmFyIGxlZnQgPSBtZW51LnBhcmVudE5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcbiAgICAgIHZhciB0b3AgPSBtZW51LnBhcmVudE5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tO1xuXG4gICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPj0gNTc2KSB7XG4gICAgICAgIG1lbnUuc3R5bGUubGVmdCA9IGxlZnQgKyAncHgnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm8gbW9iaWxlIG8gbWVudSDDqSAxMDAlLCBlbnTDo28gbsOjbyBkZXZlIHNlciBzZXRhZG8gYSBwb3Npw6fDo28gbGVmdFxuICAgICAgICBtZW51LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdsZWZ0Jyk7XG4gICAgICB9XG4gICAgICBtZW51LnN0eWxlLnRvcCA9IHRvcCArICdweCc7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIF9vcGVuTWVudSA9IGZ1bmN0aW9uIChtZW51KSB7XG4gICAgbWVudS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoY29uZmlnLmNsYXNzZXMudHJpZ2dlck1lbnVBY3RpdmUpO1xuICAgIG1lbnUuY2xhc3NMaXN0LmFkZChjb25maWcuY2xhc3Nlcy5tZW51T3Blbik7XG4gIH07XG5cbiAgdmFyIF9jbG9zZU1lbnUgPSBmdW5jdGlvbiAobWVudSkge1xuICAgIG1lbnUucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5jbGFzc2VzLnRyaWdnZXJNZW51QWN0aXZlKTtcbiAgICBtZW51LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmNsYXNzZXMubWVudU9wZW4pO1xuICB9O1xuXG4gIHZhciBfY2xvc2VBbGxNZW51cyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3BlbmVkTWVudXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGNvbmZpZy5jbGFzc2VzLm1lbnVPcGVuKTtcbiAgICB2YXIgb3BlbmVkU3VibWVudXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGNvbmZpZy5jbGFzc2VzLnN1YlN1Ym1lbnVPcGVuKTtcbiAgICB2YXIgb3BlbmVkSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGNvbmZpZy5jbGFzc2VzLml0ZW1TdWJtZW51T3Blbik7XG5cbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG9wZW5lZE1lbnVzLCBmdW5jdGlvbiAobWVudSkge1xuICAgICAgbWVudS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5jbGFzc2VzLm1lbnVPcGVuKTtcbiAgICAgIG1lbnUucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5jbGFzc2VzLnRyaWdnZXJNZW51QWN0aXZlKTtcbiAgICB9KTtcblxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwob3BlbmVkU3VibWVudXMsIGZ1bmN0aW9uIChzdWJtZW51KSB7XG4gICAgICBzdWJtZW51LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmNsYXNzZXMuc3ViU3VibWVudU9wZW4pO1xuICAgIH0pO1xuXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChvcGVuZWRJdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShjb25maWcuY2xhc3Nlcy5pdGVtU3VibWVudU9wZW4pO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBfaW5pdFNoYWRvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBzaGFkb3dTdGFydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1xdWljay1tZW51X19zaGFkb3ctLXN0YXJ0Jyk7XG4gICAgY29uc3Qgc2hhZG93RW5kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLXF1aWNrLW1lbnVfX3NoYWRvdy0tZW5kJyk7XG5cbiAgICAvKipcbiAgICAgKiBEZWZpbmUgc2UgYXMgc29tYnJhcyBkZXZlbSBlc3RhciB2aXPDrXZlaXNcbiAgICAgKiBodHRwczovL21hcmt1cy5vYmVybGVobmVyLm5ldC9ibG9nL2J1aWxkaW5nLWEtcmVzcG9uc2l2ZS1wcmlvcml0eS1wbHVzLWhvcml6b250YWwtc2Nyb2xsLW5hdmlnYXRpb24vXG4gICAgKi9cbiAgICBmdW5jdGlvbiBoYW5kbGVTaGFkb3dWaXNpYmlsaXR5KCkge1xuICAgICAgY29uc3QgbWF4U2Nyb2xsU3RhcnRSZWFjaGVkID0gY29uZmlnLndyYXBwZXIuc2Nyb2xsTGVmdCA8PSAwO1xuICAgICAgY29uc3QgbWF4U2Nyb2xsRW5kUmVhY2hlZCA9XG4gICAgICAgIGNvbmZpZy53cmFwcGVyLnNjcm9sbExlZnQgPj0gY29uZmlnLndyYXBwZXIuc2Nyb2xsV2lkdGggLSBjb25maWcud3JhcHBlci5vZmZzZXRXaWR0aCAtIDU7XG5cbiAgICAgIHRvZ2dsZVNoYWRvdyhzaGFkb3dTdGFydCwgbWF4U2Nyb2xsU3RhcnRSZWFjaGVkKTtcbiAgICAgIHRvZ2dsZVNoYWRvdyhzaGFkb3dFbmQsIG1heFNjcm9sbEVuZFJlYWNoZWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4aWJlL29jdWx0YSBhcyBzb21icmFzXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbCBzb21icmFcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IG1heFNjcm9sbFJlYWNoZWQgYXRpbmdpdSBvIGxpbWl0ZSBkbyBzY3JvbGwgKGluw61jaW8gb3UgZmltKVxuICAgICovXG4gICAgZnVuY3Rpb24gdG9nZ2xlU2hhZG93KGVsLCBtYXhTY3JvbGxSZWFjaGVkKSB7XG4gICAgICBjb25zdCBzaGFkb3dJc1Zpc2libGUgPSBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLXZpc2libGUnKTtcbiAgICAgIGNvbnN0IHNob3dTaGFkb3cgPSAhbWF4U2Nyb2xsUmVhY2hlZCAmJiAhc2hhZG93SXNWaXNpYmxlO1xuICAgICAgY29uc3QgaGlkZVNoYWRvdyA9IG1heFNjcm9sbFJlYWNoZWQgJiYgc2hhZG93SXNWaXNpYmxlO1xuXG4gICAgICAvLyBVc2luZyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgZm9yIG9wdGltYWwgc2Nyb2xsIHBlcmZvcm1hbmNlLlxuICAgICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ0Nzc5MzE2XG4gICAgICBpZiAoc2hvd1NoYWRvdykge1xuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHsgZWwuY2xhc3NMaXN0LmFkZCgnaXMtdmlzaWJsZScpOyB9KTtcbiAgICAgIH0gZWxzZSBpZiAoaGlkZVNoYWRvdykge1xuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHsgZWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtdmlzaWJsZScpOyB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25maWcud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBoYW5kbGVTaGFkb3dWaXNpYmlsaXR5KCk7XG4gICAgfSk7XG5cbiAgICBoYW5kbGVTaGFkb3dWaXNpYmlsaXR5KCk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICB9O1xufSgpKTtcblxuLyoqXG4gKiBJbml0IE1lbnUgY29tIERyb3Bkb3duXG4gKiBAcmV0dXJuIHt2b2lkfSBCc01kLmluaXQoKTtcbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1xdWljay1tZW51JykubGVuZ3RoKSB7XG4gICAgQnNRdWlja01lbnVEcm9wLmluaXQoKTtcbiAgfVxufSk7XG4iLCIvKipcbiAqIEJzIE1vZGFsXG4gKlxuICogUmVmZXJlbmNlOlxuICpcbiAqIFtUT0RPXTogUmVmYXRvcmFyIHBhcmEgcXVlIG9zIGVsZW1lbnRvcyBkbyBjb25maWcgcmVmZXJlbmNpZW1cbiAqIHVtIG1vZGFsIGVzcGVjw61maWNvIGFvIGludsOpcyBkZSBwZWdhciB0b2RvcyBvcyBleGlzdGVudGVzIG5vIGRvY3VtZW50by5cbiAqL1xudmFyIEJzTW9kYWwgPSAoZnVuY3Rpb24gKCkge1xuICAvLyBDb25maWdcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBhbGxOb2RlczogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnKicpLFxuICAgIGJvZHk6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKSxcbiAgICBhbmNob3JzOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhJyksXG4gICAgY3VycmVudFpJbmRleDogNDAwLFxuICAgIGxhc3RGb2N1czogW10sXG4gICAgbGFzdE9wZW5lZE1vZGFsczogW10sXG4gICAgbW9kYWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1tb2RhbCcpLFxuICAgIG1vZGFsTWFpbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLW1haW4nKSxcbiAgICBtb2RhbEFjdGl2ZUNsYXNzOiAnYnMtbW9kYWwtLW9wZW4nLFxuICAgIG1vZGFsQ2xvc2U6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1jbG9zZS1tb2RhbCcpLFxuICAgIG1vZGFsQ2xvc2VBbGw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1jbG9zZS1hbGwtbW9kYWxzJyksXG4gICAgbW9kYWxPcGVuOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtb3Blbi1tb2RhbCcpLFxuICAgIG1vZGFsT3BlbkFuZENsb3NlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtb3Blbi1jbG9zZS1tb2RhbCcpLFxuICAgIG1vZGFsT3BlbmVkUGFnZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWpzLW9wZW5lZCcpLFxuICAgIG92ZXJmbG93SGlkZGVuOiAnYnMtb3ZlcmZsb3ctLWhpZGRlbicsXG4gIH07XG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gQ2xvc2UgbW9kYWwgb24gY2xpY2sgb3V0c2lkZVxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYm9keSwgaHRtbCcpLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBtb2RhbEFjdGl2ZSA9IGlzTW9kYWxBY3RpdmUoKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG1vZGFsQWN0aXZlICYmXG4gICAgICAgICAgbW9kYWxBY3RpdmUuY29udGFpbnMoZXZlbnQudGFyZ2V0KSAmJlxuICAgICAgICAgICFtb2RhbEFjdGl2ZS5xdWVyeVNlbGVjdG9yKCcuYnMtbW9kYWxfX2NvbnRhaW5lcicpLmNvbnRhaW5zKGV2ZW50LnRhcmdldClcbiAgICAgICAgKSB7XG4gICAgICAgICAgY2xvc2VNb2RhbCgpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBPcGVuIG1vZGFsIG9uIGNsaWNrXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcubW9kYWxPcGVuLCBmdW5jdGlvbiAob3BlbmVyKSB7XG4gICAgICBpZiAob3BlbmVyLnRhZ05hbWUgPT09ICdGT1JNJykge1xuICAgICAgICBvcGVuRXZlbnQgPSBvcGVuZXIuZ2V0QXR0cmlidXRlKCdkYXRhLXZhbGlkYXRlLWNhbGxiYWNrJykgPyAnZm9ybUlzVmFsaWQnIDogJ3N1Ym1pdCc7XG4gICAgICAgIG9wZW5lci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgIG9wZW5FdmVudCxcbiAgICAgICAgICBvcGVuTW9kYWwuYmluZChudWxsLCBvcGVuZXIpXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcGVuZXIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAnY2xpY2snLFxuICAgICAgICAgIG9wZW5Nb2RhbC5iaW5kKG51bGwsIG9wZW5lcilcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIE9wZW4gbW9kYWwgZnJvbSBhbmNob3IgaHJlZlxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLmFuY2hvcnMsIGZ1bmN0aW9uIChhbmNob3IpIHtcbiAgICAgIHZhciBoYXNoID0gZ2V0SGFzaEFzSWRGcm9tVXJsU3RyaW5nKGFuY2hvci5ocmVmKTtcbiAgICAgIGlmIChoYXNoLmxlbmd0aCA+IDEpIGFuY2hvci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Nb2RhbC5iaW5kKG51bGwsIGhhc2gpKTtcbiAgICB9KTtcblxuICAgIC8vIE9wZW4gbW9kYWwgb24gcGFnZSBsb2FkXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaGFzaCA9IGdldEhhc2hBc0lkRnJvbVVybFN0cmluZyh3aW5kb3cubG9jYXRpb24uaGFzaCk7XG4gICAgICBpZiAoaGFzaC5sZW5ndGggPiAxKSBvcGVuTW9kYWwoaGFzaCk7XG4gICAgfSk7XG5cbiAgICAvLyBPcGVuIG1vZGFsIG9uIGhhc2hjaGFuZ2VcbiAgICAvLyBEZXByZWNhdGVkOlxuICAgIC8vICAgLSBub3Qgb3BlbiB3aGVuIHBhZ2UgbG9hZHNcbiAgICAvLyAgIC0gbm90IGZpcmVzIHdoZW4gdGhlIGhhc2ggaXMgdGhlIHNhbWVcbiAgICAvLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIG9wZW5Nb2RhbC5iaW5kKG51bGwsIHdpbmRvdy5sb2NhdGlvbi5oYXNoKSk7XG5cbiAgICAvLyBDbG9zZSBtb2RhbCBvbiBjbGlja1xuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLm1vZGFsQ2xvc2UsIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjbG9zZU1vZGFsKGVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBDbG9zZSB0aGUgY3VycmVudCBtb2RhbCBhbmQgb3BlbnMgYW5vdGhlclxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLm1vZGFsT3BlbkFuZENsb3NlLCBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2xvc2VNb2RhbCgpO1xuICAgICAgICBvcGVuTW9kYWwoZWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIENsb3NlIGFsbCBtb2RhbHNcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5tb2RhbENsb3NlQWxsLCBmdW5jdGlvbiAoY2xvc2VNb2RhbCkge1xuICAgICAgY2xvc2VNb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2xvc2VBbGxNb2RhbHMoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gUmVzdHJpbmdlIGZvY28gbm8gZWxlbWVudG8gZG8gbW9kYWxcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5hbGxOb2RlcywgZnVuY3Rpb24gKG5vZGVJdGVtKSB7XG4gICAgICBub2RlSXRlbS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZvY3VzUmVzdHJpY3QpO1xuICAgIH0pO1xuXG4gICAgLy8gQ2xvc2UgbW9kYWwgb24gZXNjIGtleSBwcmVzc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoaXNNb2RhbEFjdGl2ZSgpKSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMjcpIGNsb3NlTW9kYWwoKTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogT3BlbiBNb2RhbFxuICAgKiBAcGFyYW0gIHtPYmplY3R9IG9wZW5FbGVtZW50ICBtb2RhbCBlbGVtZW50XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB2YXIgb3Blbk1vZGFsID0gZnVuY3Rpb24gKG9wZW5FbGVtZW50KSB7XG4gICAgdmFyIG1vZGFsID0gZ2V0TW9kYWwob3BlbkVsZW1lbnQpO1xuXG4gICAgLy8gQXR1YWxpemEgbyDDumx0aW1vIGJvdMOjbyBjb20gZm9jb1xuICAgIGNvbmZpZy5sYXN0Rm9jdXMucHVzaChkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcblxuICAgIGlmIChtb2RhbCkge1xuXG4gICAgICBpZiAoY29uZmlnLmxhc3RPcGVuZWRNb2RhbHMuaW5jbHVkZXMobW9kYWwpKSByZXR1cm47XG5cbiAgICAgIGNvbmZpZy5sYXN0T3BlbmVkTW9kYWxzLnB1c2gobW9kYWwpO1xuICAgICAgY29uZmlnLmJvZHkuY2xhc3NMaXN0LmFkZChjb25maWcub3ZlcmZsb3dIaWRkZW4pO1xuICAgICAgY29uZmlnLm1vZGFsT3BlbiA9IHRydWU7XG5cbiAgICAgIC8vIEZvY8OhdmVsLCBtYXMgcXVlIG7Do28gZGV2ZSBzZXIgbG9jYWxpemFkbyBwZWxhIG5hdmVnYcOnw6NvIHNlcXVlbmNpYWwgZG8gdGVjbGFkb1xuICAgICAgbW9kYWwuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5tb2RhbEFjdGl2ZUNsYXNzKTtcbiAgICAgIG1vZGFsLmZvY3VzKCk7XG5cbiAgICAgIG1vZGFsLnNldEF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcsICd0cnVlJyk7XG4gICAgICBjb25maWcubW9kYWxNYWluLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuXG4gICAgICAvLyBJbmNyZW1lbnRhIG8gei1pbmRleCBkbyBtb2RhbFxuICAgICAgc2V0WkluZGV4KG1vZGFsKTtcblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ2xvc2UgTW9kYWxcbiAgICogQHBhcmFtICB7T2JqZWN0fSBjbG9zZUVsZW1lbnQgIG1vZGFsIGVsZW1lbnRcbiAgICogQHBhcmFtICB7T2JqZWN0fSBvcHRpb25zICAgICAgIGN1c3RvbSBvcHRpb25zXG4gICAqL1xuICB2YXIgY2xvc2VNb2RhbCA9IGZ1bmN0aW9uIChjbG9zZUVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICB2YXIgbW9kYWwgPSBnZXRNb2RhbChjbG9zZUVsZW1lbnQpO1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0Jykgb3B0aW9ucyA9IHt9O1xuXG4gICAgaWYgKG1vZGFsKSB7XG4gICAgICBpZiAobW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdicy1tb2RhbC0tdW5jbG9zYWJsZScpICYmICFvcHRpb25zLmZvcmNlQ2xvc2UpIHJldHVybjtcblxuICAgICAgY29uZmlnLmxhc3RPcGVuZWRNb2RhbHMucG9wKCk7XG4gICAgICBjb25maWcubW9kYWxPcGVuID0gZmFsc2U7XG5cbiAgICAgIC8vIFBhdXNhIG9zIHbDrWRlb3MgcXVlIGVzdGVqYW0gcm9kYW5kbyBkZW50cm8gZG8gbW9kYWxcbiAgICAgIHN0b3BBbGxNb2RhbFZpZGVvcyhtb2RhbCk7XG5cbiAgICAgIC8vIEZvY8OhdmVsLCBtYXMgcXVlIG7Do28gZGV2ZSBzZXIgbG9jYWxpemFkbyBwZWxhIG5hdmVnYcOnw6NvIHNlcXVlbmNpYWwgZG8gdGVjbGFkb1xuICAgICAgbW9kYWwuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcubW9kYWxBY3RpdmVDbGFzcyk7XG5cbiAgICAgIG1vZGFsLnNldEF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcsICdmYWxzZScpO1xuICAgICAgY29uZmlnLm1vZGFsTWFpbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XG5cbiAgICAgIC8vIEFkaWNpb25hciBvIGZvY28gbm8gZWxlbWVudG8gZG8gYm90w6NvIGFzc2ltIHF1ZSBlbmNlcnJhIG8gbW9kYWxcbiAgICAgIGNvbmZpZy5sYXN0Rm9jdXNbY29uZmlnLmxhc3RGb2N1cy5sZW5ndGggLSAxXS5mb2N1cygpO1xuICAgICAgY29uZmlnLmxhc3RGb2N1cy5wb3AoKTtcblxuICAgICAgLy8gU2UgbsOjbyBob3V2ZXIgbWFpcyBtb2RhaXMgYXRpdm9zLCByZW1vdmUgbyBibG9xdWVpbyBkbyBzY3JvbGwgZG8gYm9keVxuICAgICAgaWYgKCFpc01vZGFsQWN0aXZlKCkpIHtcbiAgICAgICAgY29uZmlnLmJvZHkuY2xhc3NMaXN0LnJlbW92ZShjb25maWcub3ZlcmZsb3dIaWRkZW4pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ2xvc2UgQWxsIEFjdGl2ZSBNb2RhbFxuICAgKi9cbiAgdmFyIGNsb3NlQWxsTW9kYWxzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcGVuTW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBjb25maWcubW9kYWxBY3RpdmVDbGFzcyk7XG5cbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG9wZW5Nb2RhbHMsIGZ1bmN0aW9uIChtb2RhbCkge1xuICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcubW9kYWxBY3RpdmVDbGFzcyk7XG4gICAgICAvLyBGb2PDoXZlbCwgbWFzIHF1ZSBuw6NvIGRldmUgc2VyIGxvY2FsaXphZG8gcGVsYSBuYXZlZ2HDp8OjbyBzZXF1ZW5jaWFsIGRvIHRlY2xhZG9cbiAgICAgIG1vZGFsLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcbiAgICAgIG1vZGFsLnNldEF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcsICdmYWxzZScpO1xuICAgIH0pO1xuXG4gICAgY29uZmlnLm1vZGFsTWFpbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XG5cbiAgICBjb25maWcuYm9keS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5vdmVyZmxvd0hpZGRlbik7XG4gICAgLy8gQWRpY2lvbmFyIG8gZm90byBubyBlbGVtZW50byBkbyBib3TDo28gYXNzaW0gcXVlIGVuY2VycmEgbyBtb2RhbFxuICAgIGNvbmZpZy5sYXN0Rm9jdXNbY29uZmlnLmxhc3RGb2N1cy5sZW5ndGggLSAxXS5mb2N1cygpO1xuICAgIGNvbmZpZy5sYXN0Rm9jdXMgPSBbXTtcbiAgICBjb25maWcubW9kYWxPcGVuID0gZmFsc2U7XG4gIH07XG5cbiAgLy8gRm9jbyByZXN0cml0byBhbyBtb2RhbFxuICB2YXIgZm9jdXNSZXN0cmljdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIC8vIHZhciBjdXJyZW50TW9kYWwgPSBnZXRQYXJlbnRzKGV2ZW50LnRhcmdldCwgY29uZmlnLm1vZGFsQWN0aXZlQ2xhc3MpWzBdO1xuICAgIHZhciBjdXJyZW50TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIGNvbmZpZy5tb2RhbEFjdGl2ZUNsYXNzKTtcblxuICAgIGlmIChjdXJyZW50TW9kYWwpIHtcbiAgICAgIGlmIChjb25maWcubW9kYWxPcGVuICYmICFjdXJyZW50TW9kYWwuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgY3VycmVudE1vZGFsLmZvY3VzKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgR2V0IE1vZGFsXG4gICAqIEBwYXJhbSAge1N0cmluZ3xPYmplY3R9IGVsZW1lbnQgIHRoZSBpZCBvZiBhIG1vZGFsIGFzIHN0cmluZyBvciBhIEhUTUxFbGVtZW50XG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggZGF0YS1tb2RhbC10YXJnZXQgb3IgZGF0YS1tb2RhbC1pZFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzXG4gICAqIEByZXR1cm4ge09iamVjdH0gICAgICAgICAgICAgICAgIHRoZSBtb2RhbCBIVE1MRWxlbWVudFxuICAgKi9cbiAgdmFyIGdldE1vZGFsID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICB2YXIgbW9kYWw7XG4gICAgdmFyIG1vZGFsSWQ7XG5cbiAgICAvLyB0aGUgZnVuY3Rpb24gYWNjZXB0IGEgc3RyaW5nIHdpdGggdGhlIElEIG9yXG4gICAgLy8gdGhlIEhUTUxFbGVtZW50IG9iamVjdCBvZiB0aGUgbW9kYWxcbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgLy8gaWYgaXQncyBhIHN0cmluZywgZ2V0IGl0IGFzIG1vZGFsSWRcbiAgICAgIGlmICh0eXBlb2YgZWxlbWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgbW9kYWxJZCA9IGVsZW1lbnQ7XG4gICAgICAvLyBpZiBpdCdzIG5vdCBhIHN0cmluZywgYXNzdW1lIGl0J3MgYW4gZWxlbWVudFxuICAgICAgLy8gaWYgdGhlIGVsZW1lbnQgaGF2ZSBhIG1vZGFsJ3MgSUQgaW4gaXRzIGRhdGFzZXQsIHNldCBpdCB0byBtb2RhbElkXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb2RhbElkID0gKGVsZW1lbnQuZGF0YXNldC5tb2RhbFRhcmdldCkgfHwgZWxlbWVudC5kYXRhc2V0Lm1vZGFsSWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIGFuIElEIHdhcyBmb3VuZCBpbiB0aGUgcHJldmlvdXMgc3RlcFxuICAgICAgaWYgKG1vZGFsSWQpIHtcbiAgICAgICAgLy8gcmVtb3ZlIGFsbCBcInNwZWNpYWwgY2hhcmFjdGVyc1wiIChpbmNsdWRpbmcgIylcbiAgICAgICAgbW9kYWxJZCA9IG1vZGFsSWQucmVwbGFjZSgvW15hLXpBLVowLTktX10vZywgJycpO1xuICAgICAgICAvLyBzZWFyY2ggZm9yIGEgbW9kYWwgZWxlbWVudCB3aXRoIGRhdGEtbW9kYWwtaWQgb3IgaWQgYXR0cmlidXRlc1xuICAgICAgICAvLyB3aXRoIHRoYXQgbWF0Y2hlcyB0aGUgbW9kYWxJZFxuICAgICAgICBtb2RhbCA9IChcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtbW9kYWxbZGF0YS1tb2RhbC1pZD1cIicgKyBtb2RhbElkICsgJ1wiXScpIHx8XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLW1vZGFsIycgKyBtb2RhbElkKVxuICAgICAgICApO1xuXG4gICAgICAvLyBpZiBhbiBJRCB3YXMgbm90IGZvdW5kIGFuZCBhc3N1bWluZyBlbGVtZW50IGlzIGFuIHZhbGlkIEhUTUxFbGVtZW50LFxuICAgICAgLy8gY2hlY2sgaWYgZWxlbWVudCBpcyBpbnNpZGUgYSBtb2RhbCBhbmQsIGlmIHRydWUsIHJldHVybiB0aGF0IG1vZGFsXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb2RhbCA9IGdldFBhcmVudHMoZWxlbWVudCwgJ2JzLW1vZGFsJylbMF07XG4gICAgICB9XG5cbiAgICAvLyBpZiBlbGVtZW50IHBhcmFtZXRlciBpcyBub3QgcGFzc2VkLCB0cnkgdG8gZ2V0IHRoZSBsYXN0IG9wZW5lZCBtb2RhbFxuICAgIH0gZWxzZSB7XG4gICAgICBtb2RhbCA9IGNvbmZpZy5sYXN0T3BlbmVkTW9kYWxzW2NvbmZpZy5sYXN0T3BlbmVkTW9kYWxzLmxlbmd0aCAtIDFdO1xuICAgIH1cblxuICAgIHJldHVybiBtb2RhbDtcbiAgfTtcblxuICAvKipcbiAgICogSXMgTW9kYWwgQWN0aXZlXG4gICAqIENoZWNrIGlmIHRoZXJlJ3MgYSBtb2RhbCBhY3RpdmVcbiAgICogQHJldHVybiB7Qm9vbGVhbnxPYmplY3R9IHRydWUgaWYgdGhlcmUncyBhdCBsZWFzdCBvbmUgbW9kYWwgYWN0aXZlXG4gICAqL1xuICB2YXIgaXNNb2RhbEFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbW9kYWxzID0gY29uZmlnLmxhc3RPcGVuZWRNb2RhbHM7XG4gICAgcmV0dXJuIG1vZGFscy5sZW5ndGggJiYgbW9kYWxzW21vZGFscy5sZW5ndGggLSAxXTtcbiAgfTtcblxuICAvKipcbiAgICogU3RvcCBhbGwgdmlkZW9zIGluc2lkZSBtb2RhbFxuICAgKiBSZW1vdmUgdGhlIHZpZGVvIGVsZW1lbnQgZnJvbSBub2RlIGFuZCBpbnNlcnQgaXQgYWdhaW4uIEl0IHN0b3BzIHRoZSB2aWRlbyFcbiAgICogQHBhcmFtICB7T2JqZWN0fSBtb2RhbCB0aGUgcGFyZW50IGVsZW1lbnQgb2YgdmlkZW8gZWxlbWVudHNcbiAgICovXG4gIHZhciBzdG9wQWxsTW9kYWxWaWRlb3MgPSBmdW5jdGlvbiAobW9kYWwpIHtcbiAgICB2YXIgdmlkZW9zID0gbW9kYWwucXVlcnlTZWxlY3RvckFsbCgnLmJzLXZpZGVvJyk7XG5cbiAgICBpZiAodmlkZW9zLmxlbmd0aCkge1xuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh2aWRlb3MsIGZ1bmN0aW9uICh2aWRlbykge1xuICAgICAgICB2YXIgcGxheWVyID0gQnNZVFBsYXllcnMuZ2V0UGxheWVyKHZpZGVvLmlkKTtcbiAgICAgICAgcGxheWVyLnN0b3BWaWRlbygpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEZheiBjb20gcXVlIG8gw7psdGltbyBtb2RhbCB0ZW5oYSBvIHotaW5kZXggbWFpb3JcbiAgdmFyIHNldFpJbmRleCA9IGZ1bmN0aW9uIChtb2RhbCkge1xuICAgIGNvbmZpZy5jdXJyZW50WkluZGV4ID0gKytjb25maWcuY3VycmVudFpJbmRleDtcbiAgICBtb2RhbC5zdHlsZS56SW5kZXggPSBjb25maWcuY3VycmVudFpJbmRleDtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGluaXQ6IGluaXQsXG4gICAgb3Blbjogb3Blbk1vZGFsLFxuICAgIGNsb3NlOiBjbG9zZU1vZGFsLFxuICAgIHJlc3RyaWN0OiBmb2N1c1Jlc3RyaWN0LFxuICB9O1xufSgpKTtcblxuLyoqXG4gKiBJbml0IE1vZGFsIENvbnN0cnVjdG9yXG4gKiBAcmV0dXJuIHt2b2lkfSBIZWFkZXIuaW5pdCgpO1xuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLW1vZGFsJykubGVuZ3RoKSB7XG4gICAgQnNNb2RhbC5pbml0KCk7XG4gIH1cbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1qcy1vcGVuZWQnKSkge1xuICAgIEJzTW9kYWwub3Blbihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtanMtb3BlbmVkJykpO1xuICB9XG59KTtcbiIsIi8qKlxuICogQnMgQWxlcnRcbiAqIEEgdmFyaWF0aW9uIG9mIG1vZGFsIGZvciBhbGVydGRpYWxvZ1xuICpcbiAqIEB1c2VcbiAqICAgQnNBbGVydCh7XG4gKiAgICAgaWQ6ICd1bmlxdWVJRCcsXG4gKiAgICAgdHlwZTogJ3N1Y2Nlc3MvZXJyb3Ivd2FybmluZy9pbmZvL3F1ZXN0aW9uL2xvYWRpbmcnLFxuICogICAgIHRpdGxlOiAnVGl0bGUgb2YgYWxlcnQnLFxuICogICAgIGNvbnRlbnQ6ICdEZXNjcmlwdGlvbiBvciBIVE1MIGZvciB0aGUgY29udGVudCcsXG4gKiAgICAgYnV0dG9uTGFiZWw6ICd0ZXh0IG9mIHRoZSBidXR0b24nLFxuICogICB9KVxuICpcbiAqL1xudmFyIEJzQWxlcnQgPSAoZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogR2VuZXJhbCBjb25maWdcbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHZhciBjb25maWcgPSB7fTtcblxuICAvKipcbiAgICogU2V0IENvbmZpZ1xuICAgKiBAcGFyYW0gIHtPYmplY3R9IG9wdGlvbnMgQ3VzdG9tIG9wdGlvbnNcbiAgICogQHJldHVybiB7T2JqZWN0fSAgICAgICAgIERlZmF1bHQgb3B0aW9ucyBleHRlbmQgYnkgY3VzdG9tXG4gICAqL1xuICB2YXIgc2V0Q29uZmlnID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZXh0ZW5kKHtcbiAgICAgIGlkOiAnJyxcbiAgICAgIHR5cGU6ICcnLFxuICAgICAgdGl0bGU6ICcnLFxuICAgICAgY29udGVudDogJycsXG4gICAgICBmb290ZXI6ICcnLFxuICAgICAgYnV0dG9uTGFiZWw6ICcnLFxuICAgICAgc2hvd0Nsb3NlQnV0dG9uOiBmYWxzZSxcbiAgICAgIHVuY2xvc2FibGU6IGZhbHNlLFxuICAgIH0sIG9wdGlvbnMsIHtcbiAgICAgIG1vZGFsQWN0aXZlOiBjb25maWcubW9kYWxBY3RpdmUgfHwge30sXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyeXB0byBWYWx1ZVxuICAgKiBHZXJhZG9yIGNyaXB0b2dyw6FmaWNvIGRlIG7Dum1lcm9zIGFsZWF0w7NyaW9zXG4gICAqXG4gICAqIEBpbmZvIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL3B0LUJSL2RvY3MvV2ViL0FQSS9XaW5kb3cvY3J5cHRvXG4gICAqIEByZXR1cm4ge1N0cmluZ30gYSByYW5kb20gdmFsdWVcbiAgICovXG4gIHZhciBjcnlwdG9WYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY3J5cHRvT2JqID0gd2luZG93LmNyeXB0byB8fCB3aW5kb3cubXNDcnlwdG87IC8vIGZvciBJRSAxMVxuICAgIHJldHVybiAoY3J5cHRvT2JqLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDMyQXJyYXkoMSkpWzBdKS50b1N0cmluZygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTaG93IEFsZXJ0XG4gICAqIEBwYXJhbSAge09iamVjdH0gb3B0aW9ucyBvYmplY3Qgb2Ygb3B0aW9uc1xuICAgKi9cbiAgdmFyIHNob3cgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIHZhciBtb2RhbENvbmZpZyA9IHNldENvbmZpZyhvcHRpb25zKTtcbiAgICB2YXIgbW9kYWxFeGlzdCA9IG1vZGFsQ29uZmlnLmlkID09PSBtb2RhbENvbmZpZy5tb2RhbEFjdGl2ZS5pZDtcbiAgICBjb25maWcgPSBtb2RhbENvbmZpZztcblxuICAgIGlmIChtb2RhbEV4aXN0KSB7XG4gICAgICB1cGRhdGVNb2RhbENvbnRlbnQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gYXBwZW5kIGFsZXJ0IG1vZGFsIHRvIGJvZHlcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYnVpbGRNb2RhbCgpKTtcbiAgICB9XG5cbiAgICAvLyB0aGUgdGltZW91dCBpcyBuZWNlc3NhcnkgdG8gYXZvaWQgcHJvYmxlbXMgd2l0aCBtb2RhbCdzIGRlZmF1bHRcbiAgICAvLyBhbmltYXRpb24gdGhhdCBkb24ndCBydW4gb24gZmlyc3QgY2FsbCBvZiBCc0FsZXJ0KCkgb24gY2hyb21lXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBvcGVuIGFsZXJ0IG1vZGFsXG4gICAgICBCc01vZGFsLm9wZW4oY29uZmlnLmlkKTtcbiAgICB9LCAxMDApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBCdWlsZCBNb2RhbFxuICAgKiBDcmVhdGUgdGhlIG1vZGFsIGVsZW1lbnQgd2l0aCBmdWxsIHN0cnVjdHVyZSwgY29uZmlnIGFuZCBjb250ZW50XG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSB0aGUgbW9kYWwgZWxlbWVudFxuICAgKi9cbiAgdmFyIGJ1aWxkTW9kYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1vZGFsUmVhbElkID0gKGNvbmZpZy5pZCB8fCBjcnlwdG9WYWx1ZSgpKTtcbiAgICB2YXIgbW9kYWxJZCA9ICdhbGVydG1vZGFsLS0nICsgbW9kYWxSZWFsSWQ7XG4gICAgdmFyIG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIG1vZGFsQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hlYWRlcicpO1xuICAgIHZhciBib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIGZvb3RlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvb3RlcicpO1xuICAgIHZhciB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0cm9uZycpO1xuICAgIHZhciBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHZhciBhbGVydEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAvLyBTZXQgdGhlIElEIG9mIG1vZGFsIG9uIGNvbmZpZ1xuICAgIGNvbmZpZy5pZCA9IG1vZGFsSWQ7XG5cbiAgICAvLyBSZW1vdmUgYWN0aXZlIG1vZGFsIGFuZCBzZXQgY3VycmVudCBhcyBhY3RpdmVcbiAgICBpZiAoY29uZmlnLm1vZGFsQWN0aXZlLm1vZGFsKSBjb25maWcubW9kYWxBY3RpdmUubW9kYWwucmVtb3ZlKCk7XG4gICAgY29uZmlnLm1vZGFsQWN0aXZlLm1vZGFsID0gbW9kYWw7XG5cbiAgICAvLyBTZXQgbW9kYWwgZWxlbWVudCBjb25maWdcbiAgICBtb2RhbC5pZCA9IG1vZGFsSWQ7XG4gICAgbW9kYWwucm9sZSA9ICdhbGVydGRpYWxvZyc7XG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnYnMtbW9kYWwnKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdicy1tb2RhbC0tb3ZlcmxheS1kYXJrJyk7XG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnYnMtbW9kYWwtLWFsZXJ0Jyk7XG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnYnMtYWxlcnQnKTtcbiAgICBtb2RhbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kYWwtaWQnLCBtb2RhbFJlYWxJZCk7XG4gICAgbW9kYWwuc2V0QXR0cmlidXRlKCdkYXRhLWFsZXJ0LXR5cGUnLCBjb25maWcudHlwZSk7XG4gICAgbW9kYWwuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsbGVkYnknLCAnYWxlcnRtb2RhbC1oZWFkaW5nLS0nICsgbW9kYWxJZCk7XG4gICAgbW9kYWwuc2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5JywgJ2FsZXJ0bW9kYWwtdGV4dC0tJyArIG1vZGFsSWQpO1xuICAgIGNvbmZpZy5tb2RhbEFjdGl2ZS5tb2RhbCA9IG1vZGFsO1xuICAgIGNvbmZpZy5tb2RhbEFjdGl2ZS5pZCA9IG1vZGFsUmVhbElkO1xuXG4gICAgLy8gYWRkIG1vZGFsJ3MgdW5jbG9zYWJsZSBjbGFzc1xuICAgIGlmIChjb25maWcudW5jbG9zYWJsZSkgbW9kYWwuY2xhc3NMaXN0LmFkZCgnYnMtbW9kYWwtLXVuY2xvc2FibGUnKTtcblxuICAgIC8vIFNldCBtb2RhbCdzIGNvbnRhaW5lciBjb25maWdcbiAgICBtb2RhbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdicy1tb2RhbF9fY29udGFpbmVyJyk7XG5cbiAgICAvLyBTZXQgbW9kYWwncyBoZWFkZXIgY29uZmlnXG4gICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoJ2JzLW1vZGFsX19oZWFkZXInKTtcbiAgICBoZWFkZXIuaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwiYnMtYWxlcnRfX2ljb25cIj48L3NwYW4+JztcblxuICAgIC8vIFNldCBtb2RhbCdzIGZvb3RlciBjb25maWcgYW5kIGNvbnRlbnRcbiAgICBmb290ZXIuY2xhc3NMaXN0LmFkZCgnYnMtbW9kYWxfX2Zvb3RlcicpO1xuICAgIGZvb3Rlci5pbm5lckhUTUwgPSBjb25maWcuZm9vdGVyO1xuICAgIGNvbmZpZy5tb2RhbEFjdGl2ZS5mb290ZXIgPSBmb290ZXI7XG5cbiAgICAvLyBTZXQgbW9kYWwncyBib2R5IGNvbmZpZ1xuICAgIGJvZHkudGFiSW5kZXggPSAwO1xuICAgIGJvZHkuY2xhc3NMaXN0LmFkZCgnYnMtbW9kYWxfX2JvZHknKTtcblxuICAgIC8vIFNldCBhbGVydCdzIHRpdGxlIGNvbmZpZyBhbmQgY29udGVudFxuICAgIHRpdGxlLmlkID0gJ2FsZXJ0bW9kYWwtaGVhZGluZy0tJyArIG1vZGFsSWQ7XG4gICAgdGl0bGUuY2xhc3NMaXN0LmFkZCgnYnMtYWxlcnRfX3RpdGxlJyk7XG4gICAgdGl0bGUuaW5uZXJIVE1MID0gY29uZmlnLnRpdGxlO1xuICAgIGNvbmZpZy5tb2RhbEFjdGl2ZS50aXRsZSA9IHRpdGxlO1xuXG4gICAgLy8gU2V0IGFsZXJ0J3MgdGl0bGUgY29uZmlnIGFuZCBjb250ZW50XG4gICAgY29udGVudC5pZCA9ICdhbGVydG1vZGFsLXRleHQtLScgKyBtb2RhbElkO1xuICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnYnMtYWxlcnRfX2NvbnRlbnQnKTtcbiAgICBjb250ZW50LmlubmVySFRNTCA9IGNvbmZpZy5jb250ZW50O1xuICAgIGNvbmZpZy5tb2RhbEFjdGl2ZS5jb250ZW50ID0gY29udGVudDtcblxuICAgIGNsb3NlQnV0dG9uLnRpdGxlID0gJ0ZlY2hhcic7XG4gICAgY2xvc2VCdXR0b24udHlwZSA9ICdidXR0b24nO1xuICAgIGNsb3NlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2JzLW1vZGFsX19jbG9zZS1idG4nKTtcbiAgICBjbG9zZUJ1dHRvbi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJpY29uLW5hdi1mZWNoYXJcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JztcbiAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIEJzTW9kYWwuY2xvc2UoY29uZmlnLmlkKSk7XG5cbiAgICBhbGVydEJ1dHRvbi50eXBlID0gJ2J1dHRvbic7XG4gICAgYWxlcnRCdXR0b24uY2xhc3NMaXN0LmFkZCgnYnMtYnV0dG9uJywgJ2JzLWFsZXJ0X19idXR0b24nKTtcbiAgICBhbGVydEJ1dHRvbi5pbm5lckhUTUwgPSBjb25maWcuYnV0dG9uTGFiZWw7XG4gICAgYWxlcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBCc01vZGFsLmNsb3NlKGNvbmZpZy5pZCk7XG4gICAgfSk7XG4gICAgY29uZmlnLm1vZGFsQWN0aXZlLmJ1dHRvbiA9IGFsZXJ0QnV0dG9uO1xuXG4gICAgLy8gYXBwZW5kIG1vZGFsIGVsZW1lbnRzXG4gICAgbW9kYWwuYXBwZW5kQ2hpbGQobW9kYWxDb250YWluZXIpO1xuICAgIG1vZGFsQ29udGFpbmVyLmFwcGVuZENoaWxkKGhlYWRlcik7XG4gICAgbW9kYWxDb250YWluZXIuYXBwZW5kQ2hpbGQoYm9keSk7XG4gICAgbW9kYWxDb250YWluZXIuYXBwZW5kQ2hpbGQoZm9vdGVyKTtcbiAgICBpZiAoY29uZmlnLnNob3dDbG9zZUJ1dHRvbikgbW9kYWxDb250YWluZXIuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xuXG4gICAgLy8gYXBwZW5kIGFsZXJ0IGVsZW1lbnRzXG4gICAgYm9keS5hcHBlbmRDaGlsZCh0aXRsZSk7XG4gICAgYm9keS5hcHBlbmRDaGlsZChjb250ZW50KTtcbiAgICBib2R5LmFwcGVuZENoaWxkKGFsZXJ0QnV0dG9uKTtcblxuICAgIHJldHVybiBtb2RhbDtcbiAgfTtcblxuICAvKipcbiAgICogVXBkYXRlIE1vZGFsXG4gICAqIFVwZGF0ZSB0aGUgY29udGVudCBvZiBhbiBleGlzdGVudCBtb2RhbFxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gdGhlIHVwZGF0ZWQgbW9kYWwgZWxlbWVudFxuICAgKi9cbiAgdmFyIHVwZGF0ZU1vZGFsQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbW9kYWwgPSBjb25maWcubW9kYWxBY3RpdmUubW9kYWw7XG4gICAgdmFyIGZvb3RlciA9IGNvbmZpZy5tb2RhbEFjdGl2ZS5mb290ZXI7XG4gICAgdmFyIHRpdGxlID0gY29uZmlnLm1vZGFsQWN0aXZlLnRpdGxlO1xuICAgIHZhciBjb250ZW50ID0gY29uZmlnLm1vZGFsQWN0aXZlLmNvbnRlbnQ7XG4gICAgdmFyIGJ1dHRvbiA9IGNvbmZpZy5tb2RhbEFjdGl2ZS5idXR0b247XG5cbiAgICAvLyByZW1vdmUgbW9kYWwncyB1bmNsb3NhYmxlIGNsYXNzXG4gICAgaWYgKCFjb25maWcudW5jbG9zYWJsZSkgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYnMtbW9kYWwtLXVuY2xvc2FibGUnKTtcblxuICAgIGZvb3Rlci5pbm5lckhUTUwgPSBjb25maWcuZm9vdGVyO1xuICAgIHRpdGxlLmlubmVySFRNTCA9IGNvbmZpZy50aXRsZTtcbiAgICBjb250ZW50LmlubmVySFRNTCA9IGNvbmZpZy5jb250ZW50O1xuICAgIGJ1dHRvbi5pbm5lckhUTUwgPSBjb25maWcuYnV0dG9uTGFiZWw7XG5cbiAgICBtb2RhbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtYWxlcnQtdHlwZScsIGNvbmZpZy50eXBlKTtcblxuICAgIHJldHVybiBtb2RhbDtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHNob3c6IHNob3csXG4gIH07XG59KCkpO1xuIiwiLyoqXG4gKiBCcyBNb2RhbCBMaXN0IChhbmNob3IpXG4gKi9cbnZhciBCc01vZGFsTGlzdCA9IChmdW5jdGlvbiAoKSB7XG5cbiAgLy8gY29uZmlnXG4gIHZhciBjb25maWcgPSB7XG4gICAgY2Fyb3VzZWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1qcy1tb2RhbC1jYXJvdXNlbCcpLFxuICAgIHByZXZpb3VzQnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtbW9kYWwtLXByZXZpb3VzJyksXG4gICAgbmV4dEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLW1vZGFsLS1uZXh0JyksXG4gICAgbW9kYWxBY3RpdmVDbGFzczogJ2JzLW1vZGFsLS1vcGVuJyxcbiAgICAvLyBzZWxlY3RzOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtanMtZmlsdGVyIHNlbGVjdCcpLFxuICAgIGl0ZW06IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1maWx0ZXItLW1vZGFsJyksXG4gICAgc2xpZGVyOiAnJyxcbiAgfTtcbiAgdmFyIGZsa3R5ID0gJyc7XG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAvLyAtIFBlcmNvcnJlIENhcm9zZWxzIGV4aXN0ZW50ZXMgbmEgUGFnaW5hIHBhciBhbW9udGFyIG8gZmxpY2tpdHlcbiAgICAvLyAtIEF0aXZhIG1vZGFsIGNvcnJldG8gY29uZm9ybWUgbyBpbmRleCBkZSBjYWRhIGVsZW1lbnRvIGNsaWNhZG9cbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5pdGVtLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgIHZhciBidXR0b24gPSBlbC5xdWVyeVNlbGVjdG9yKCdhJyk7XG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmaWx0ZXJUZXN0ZSA9IEJzRmlsdGVyLmZpbHRlcigpO1xuICAgICAgICB2YXIgZmlsdGVySXRlbnMgPSBmaWx0ZXJUZXN0ZS5nZXRGaWx0ZXJlZEl0ZW1FbGVtZW50cygpO1xuXG4gICAgICAgIG9wZW5Nb2RhbChmaWx0ZXJJdGVucy5pbmRleE9mKGVsKSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIC0gQXBsaWNhIG11ZGFuw6dhcyBwYXJhIGFicmlyIG1vZGFsIG5vIGVsZW1lbnRvXG4gICAgdmFyIG9wZW5Nb2RhbCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgLy8gaW5kZXggPSBbdmFsdWVdIHNlbGVjdGVkLFxuICAgICAgLy8gaXNXcmFwcGVkID0gWyB0cnVlID0+IMO6bHRpbW8gc2xpZGUgc2Vyw6Egc2VsZWNpb25hZG8gc2Ugbm8gcHJpbWVpcm8gc2xpZGUuXSwgXG4gICAgICAvLyBpc0luc3RhbnQgPSBbdHJ1ZSAgPT4gcmVtb3ZlIGFuaW1hdGlvbiBvcGVuIGluZGV4XSBmZ2ZcbiAgICAgIGZsa3R5LnNlbGVjdChpbmRleCwgZmFsc2UsIHRydWUpO1xuICAgICAgQnNNb2RhbC5vcGVuKCcjbmV3TW9kYWwnKTtcblxuICAgICAgLy8gdmFycyBvdXQsIGdldCBtb21lbnQgaGVpZ2h0IGFuZCBtb2RhbCBvcGVuXG4gICAgICB2YXIgaGVpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLW1vZGFsLS1vcGVuJyk7XG4gICAgICB2YXIgaXRlbVNsaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLW1vZGFsX19pdGVtJyk7XG4gICAgICB2YXIgaGVpZ2h0V2luZG93ID0gMTAwO1xuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChpdGVtU2xpZGUsIGZ1bmN0aW9uIChlbGVtKSB7XG5cbiAgICAgICAgLy8gY29uc3RydWN0IGFmdGVyIHNsaWRlciBtb3VudFxuICAgICAgICB2YXIgbW9kYWxDbG9zZSA9IGVsZW0ucXVlcnlTZWxlY3RvcignLmJzLWpzLWNsb3NlLW1vZGFsJyk7XG4gICAgICAgIHZhciBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1tb2RhbCcpO1xuICAgICAgICAvLyBjbG9zZSBjdXN0b20gdG8gbW9kYWwgKyBzbGlkZXJcbiAgICAgICAgbW9kYWxDbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBtb2RhbC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcubW9kYWxBY3RpdmVDbGFzcyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBtb2RhbEJvZHkgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5icy1tb2RhbF9fYm9keScpO1xuICAgICAgICBtb2RhbEJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcblxuICAgICAgICB2YXIgaGVpZ2h0TW9kYWwgPSBoZWlnaHQuY2xpZW50SGVpZ2h0IC0gaGVpZ2h0V2luZG93O1xuICAgICAgICBlbGVtLnN0eWxlLmhlaWdodCA9IGhlaWdodE1vZGFsICsgJ3B4JztcbiAgICAgICAgZWxlbS5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcbiAgICAgIH0pO1xuICAgICAgLy8gcmVzaXplIGhlaWdodCB0byBhcHBwbHkgcmVuZGVyIGhlaWdodCBib3hcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBoZWlnaHRJbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1tb2RhbC0tb3BlbicpO1xuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGl0ZW1TbGlkZSwgZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgICB2YXIgaGVpZ2h0TW9kYWwgPSBoZWlnaHRJbm5lci5jbGllbnRIZWlnaHQgLSBoZWlnaHRXaW5kb3c7XG4gICAgICAgICAgZWxlbS5zdHlsZS5oZWlnaHQgPSBoZWlnaHRNb2RhbCArICdweCc7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBsb2FkRmxpY2tpdHkgPSBmdW5jdGlvbiAoY2Fyb3VzZWwsIGl0ZW1zKSB7XG4gICAgdmFyIGZsaWNraXR5T3B0aW9ucyA9IHtcbiAgICAgIGFkYXB0aXZlSGVpZ2h0OiB0cnVlLFxuICAgICAgd2F0Y2hDU1M6IGZhbHNlLFxuICAgIH07XG4gICAgdmFyIGNhcm91c2VsSXRlbXM7XG5cbiAgICAvLyByZWNlYmVyIGluZGV4IGRvcyBpdGVucyBjb25mb3JtZSBvIGZpbHRyb1xuICAgIGlmIChpdGVtcykge1xuICAgICAgaWYgKGNvbmZpZy5zbGlkZXIpIGNvbmZpZy5zbGlkZXIucmVtb3ZlKCk7XG4gICAgICBjb25maWcuc2xpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBjYXJvdXNlbEl0ZW1zID0gY2Fyb3VzZWwucXVlcnlTZWxlY3RvckFsbCgnLmJzLW1vZGFsX19pdGVtJyk7XG4gICAgICBjYXJvdXNlbC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGNvbmZpZy5zbGlkZXIpO1xuICAgIH1cbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNhcm91c2VsSXRlbXMsIGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgdmFyIGNoaWxkSW5kZXggPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGNhcm91c2VsSXRlbXMsIGNoaWxkKTtcbiAgICAgIGlmIChpdGVtcy5pbmNsdWRlcyhjaGlsZEluZGV4KSkge1xuICAgICAgICBjb25maWcuc2xpZGVyLmFwcGVuZENoaWxkKGNoaWxkLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICB9XG4gICAgfSlcbiAgICAvLyBkZWJ1Z2dlcjtcblxuICAgIGZsa3R5ID0gbmV3IEZsaWNraXR5KGNvbmZpZy5zbGlkZXIsIGZsaWNraXR5T3B0aW9ucyk7XG4gICAgd2luZG93LmZsa3R5ID0gZmxrdHk7XG5cbiAgICAvLyBTZXQgTGluayB0byBzb2NpYWwgbWVkaWFcbiAgICBmbGt0eS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHNlbGVjdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmlzLXNlbGVjdGVkJyk7XG4gICAgICB2YXIgaWQgPSBzZWxlY3RlZC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaGFzaCcpO1xuICAgICAgd2luZG93LmxvY2F0aW9uID0gJyNwcmV2aWV3JyArIGlkO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdCxcbiAgICBsb2FkU2xpZGVyOiBsb2FkRmxpY2tpdHksXG4gIH07XG59KCkpO1xuXG4vKipcbiAqIEluaXQgRmlsdGVyIENvbnN0cnVjdG9yXG4gKiBAcmV0dXJuIHt2b2lkfSBIZWFkZXIuaW5pdCgpO1xuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLW1vZGFsLS1saXN0JykubGVuZ3RoKSB7XG4gICAgQnNNb2RhbExpc3QuaW5pdCgpO1xuICB9XG59KVxuIiwiLyoqXG4gKiBCYW5uZXIgVG9wb1xuICogQHJldHVybiBNb2R1bGUgY29uZmlnXG4gKi9cbnZhciBCc01vc2FpY28gPSAoZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogSW5pdCBmdW5jdGlvblxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gTW9kdWxlJ3Mgc2NvcGUgZnVuY3Rpb25zXG4gICAqL1xuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtbW9zYWljby1yZXZlYWwnKTtcbiAgICB2YXIgbGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1tb3NhaWNvX19saW5rJyk7XG5cbiAgICByZXZlYWwoZWxlbWVudHMsIGxpbmspO1xuICB9O1xuXG4gIHZhciByZXZlYWwgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGxpbmspIHtcbiAgICAvLyBodHRwczovL3Njcm9sbHJldmVhbGpzLm9yZy9cbiAgICB3aW5kb3cuc3IgPSBTY3JvbGxSZXZlYWwoKTtcblxuICAgIHNyLnJldmVhbChcbiAgICAgIGVsZW1lbnRzLFxuICAgICAge1xuICAgICAgICBkdXJhdGlvbjogMTMzNyxcbiAgICAgICAgb3JpZ2luOiAnYm90dG9tJyxcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgIGRpc3RhbmNlOiAnNDBweCcsXG4gICAgICAgIHJldmVhbDogcmV2ZWFsLFxuICAgICAgfSxcbiAgICAgIDEwMFxuICAgICk7XG4gIH07XG5cblxuICByZXR1cm4ge1xuICAgIGluaXQ6IGluaXQsXG4gIH07XG59KCkpO1xuXG4vKipcbiAqIEluaXQgSGVhZGVyIENvbnN0cnVjdG9yXG4gKiBAcmV0dXJuIHt2b2lkfSBIZWFkZXIuaW5pdCgpO1xuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLW1vc2FpY28tcmV2ZWFsJykpIHtcbiAgICBCc01vc2FpY28uaW5pdCgpO1xuICB9XG59KTtcbiIsIi8qKlxuICogQnMgTXVyYWwgKGlzb3RvcGUvbWFzb25yeSlcbiAqL1xudmFyIEJzTXVyYWwgPSAoZnVuY3Rpb24gKCkge1xuICAvLyBDb25maWdcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBtdXJhbDogbnVsbCxcbiAgfTtcblxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uIChlbCkge1xuICAgIGVsID0gdHlwZW9mIGVsID09PSAnc3RyaW5nJyA/IHF1ZXJ5U2VsZWN0b3IoZWwpIDogZWw7XG4gICAgZmlsdGVyTWFzb25yeShlbCk7XG4gIH07XG5cbiAgdmFyIGZpbHRlck1hc29ucnkgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICBjb25maWcubGlzdCA9IG5ldyBJc290b3BlKGVsLCB7XG4gICAgICBsYXlvdXRNb2RlOiAncGFja2VyeScsXG4gICAgICBpdGVtU2VsZWN0b3I6IGNvbmZpZy5pdGVtU2VsZWN0b3IsXG4gICAgICBjb2x1bW5XaWR0aDogY29uZmlnLml0ZW1TaXplclNlbGVjdG9yLFxuICAgICAgcGVyY2VudFBvc2l0aW9uOiB0cnVlLFxuICAgICAgcm93SGVpZ2h0OiAzMjAsXG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICAgIGxpc3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBjb25maWcubGlzdDtcbiAgICB9LFxuICB9O1xufSgpKTtcblxuLyoqXG4gKiBJbml0IE11cmFsIENvbnN0cnVjdG9yXG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBtdXJhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtbXVyYWwnKTtcbiAgaWYgKG11cmFscy5sZW5ndGgpIHtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG11cmFscywgZnVuY3Rpb24gKGVsKSB7XG4gICAgICBCc011cmFsLmluaXQoZWwpO1xuICAgIH0pXG4gIH1cbn0pO1xuIiwidmFyIEJzU25hY2tQcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gQ29uZmlnIExpc3QgYW5kIFNlbGVjdFxuICB2YXIgY29uZmlnID0ge1xuICAgIGVsOiB7XG4gICAgICBzbmFjazogbnVsbCxcbiAgICAgIHByb2dyZXNzOiBudWxsLFxuICAgICAgcHJvZ3Jlc3NUZXh0OiBudWxsLFxuICAgICAgcHJvZ3Jlc3NCYXI6IG51bGwsXG4gICAgICBwcm9ncmVzc1ZhbHVlOiBudWxsLFxuICAgICAgcHJvZ3Jlc3NMaW5rOiBudWxsLFxuICAgICAgcHJvZ3Jlc3NDYW5jZWw6IG51bGwsXG4gICAgICBwcm9ncmVzc0J1dHRvbnM6IG51bGwsXG4gICAgfSxcbiAgICBjbGFzc2VzOiB7XG4gICAgICBzbmFjazogJ2JzLXNuYWNrYmFyLS1wcm9ncmVzcycsXG4gICAgICBwcm9ncmVzczogJ2JzLXByb2dyZXNzJyxcbiAgICAgIHByb2dyZXNzVGV4dDogJ2JzLXByb2dyZXNzX190ZXh0JyxcbiAgICAgIHByb2dyZXNzQmFyOiAnYnMtcHJvZ3Jlc3NfX2JhcicsXG4gICAgICBwcm9ncmVzc1ZhbHVlOiAnYnMtcHJvZ3Jlc3NfX3ZhbHVlJyxcbiAgICAgIHByb2dyZXNzTGluazogJ2JzLXByb2dyZXNzX19saW5rJyxcbiAgICAgIHByb2dyZXNzQ2FuY2VsOiAnYnMtcHJvZ3Jlc3NfX2NhbmNlbCcsXG4gICAgICBwcm9ncmVzc0J1dHRvbnM6ICdicy1wcm9ncmVzc19fYWN0aW9ucycsXG4gICAgICB2aXNpYmxlOiAnYnMtc25hY2tiYXItLXZpc2libGUnLFxuICAgIH0sXG4gICAgc3RhdGU6IHtcbiAgICAgIHByb2dyZXNzOiAnMCUnLFxuICAgICAgbWVzc2FnZTogJ0JhaXhhbmRvJyxcbiAgICB9LFxuICAgIGV2ZW50czoge1xuICAgICAgbGluazogZnVuY3Rpb24gKCkge30sXG4gICAgICBjYW5jZWw6IGZ1bmN0aW9uICgpIHt9LFxuICAgIH0sXG4gIH07XG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgYnVpbGRTbmFjaygpO1xuICAgIGJ1aWxkUHJvZ3Jlc3MoKTtcbiAgICBjb25maWcuZWwuc25hY2suYXBwZW5kQ2hpbGQoY29uZmlnLmVsLnByb2dyZXNzKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbmZpZy5lbC5zbmFjayk7XG4gIH07XG5cbiAgdmFyIGJ1aWxkUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uZmlnLmVsLnByb2dyZXNzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uZmlnLmVsLnByb2dyZXNzVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBjb25maWcuZWwucHJvZ3Jlc3NCYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgY29uZmlnLmVsLnByb2dyZXNzVmFsdWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgY29uZmlnLmVsLnByb2dyZXNzQnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBjb25maWcuZWwucHJvZ3Jlc3NMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgY29uZmlnLmVsLnByb2dyZXNzQ2FuY2VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG5cbiAgICBjb25maWcuZWwucHJvZ3Jlc3MuY2xhc3NMaXN0LmFkZChjb25maWcuY2xhc3Nlcy5wcm9ncmVzcyk7XG4gICAgY29uZmlnLmVsLnByb2dyZXNzVGV4dC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5jbGFzc2VzLnByb2dyZXNzVGV4dCk7XG4gICAgY29uZmlnLmVsLnByb2dyZXNzQmFyLmNsYXNzTGlzdC5hZGQoY29uZmlnLmNsYXNzZXMucHJvZ3Jlc3NCYXIpO1xuICAgIGNvbmZpZy5lbC5wcm9ncmVzc1ZhbHVlLmNsYXNzTGlzdC5hZGQoY29uZmlnLmNsYXNzZXMucHJvZ3Jlc3NWYWx1ZSk7XG4gICAgY29uZmlnLmVsLnByb2dyZXNzQnV0dG9ucy5jbGFzc0xpc3QuYWRkKGNvbmZpZy5jbGFzc2VzLnByb2dyZXNzQnV0dG9ucyk7XG4gICAgY29uZmlnLmVsLnByb2dyZXNzTGluay5jbGFzc0xpc3QuYWRkKGNvbmZpZy5jbGFzc2VzLnByb2dyZXNzTGluayk7XG4gICAgY29uZmlnLmVsLnByb2dyZXNzQ2FuY2VsLmNsYXNzTGlzdC5hZGQoY29uZmlnLmNsYXNzZXMucHJvZ3Jlc3NDYW5jZWwpO1xuXG4gICAgY29uZmlnLmVsLnByb2dyZXNzVGV4dC5pbm5lckhUTUwgPSBjb25maWcuc3RhdGUubWVzc2FnZTtcbiAgICBjb25maWcuZWwucHJvZ3Jlc3NWYWx1ZS5pbm5lckhUTUwgPSBjb25maWcuc3RhdGUucHJvZ3Jlc3M7XG5cbiAgICBjb25maWcuZWwucHJvZ3Jlc3NMaW5rLnR5cGUgPSAnYnV0dG9uJztcblxuICAgIGNvbmZpZy5lbC5wcm9ncmVzc0NhbmNlbC50eXBlID0gJ2J1dHRvbic7XG4gICAgY29uZmlnLmVsLnByb2dyZXNzQ2FuY2VsLnRpdGxlID0gJ0NhbmNlbGFyJztcbiAgICBjb25maWcuZWwucHJvZ3Jlc3NDYW5jZWwuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiaWNvbi1uYXYtZmVjaGFyXCI+PC9pPic7XG4gICAgY29uZmlnLmVsLnByb2dyZXNzQ2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgc2V0UHJvZ3Jlc3MoKTtcbiAgICAgIGhpZGUoMCk7XG4gICAgfSk7XG5cbiAgICBjb25maWcuZWwucHJvZ3Jlc3NCdXR0b25zLmFwcGVuZENoaWxkKGNvbmZpZy5lbC5wcm9ncmVzc0xpbmspO1xuICAgIGNvbmZpZy5lbC5wcm9ncmVzc0J1dHRvbnMuYXBwZW5kQ2hpbGQoY29uZmlnLmVsLnByb2dyZXNzQ2FuY2VsKTtcblxuICAgIGNvbmZpZy5lbC5wcm9ncmVzcy5hcHBlbmRDaGlsZChjb25maWcuZWwucHJvZ3Jlc3NUZXh0KTtcbiAgICBjb25maWcuZWwucHJvZ3Jlc3MuYXBwZW5kQ2hpbGQoY29uZmlnLmVsLnByb2dyZXNzQmFyKTtcbiAgICBjb25maWcuZWwucHJvZ3Jlc3MuYXBwZW5kQ2hpbGQoY29uZmlnLmVsLnByb2dyZXNzVmFsdWUpO1xuICAgIGNvbmZpZy5lbC5wcm9ncmVzcy5hcHBlbmRDaGlsZChjb25maWcuZWwucHJvZ3Jlc3NCdXR0b25zKTtcbiAgfTtcblxuICB2YXIgYnVpbGRTbmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25maWcuZWwuc25hY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25maWcuZWwuc25hY2suY2xhc3NOYW1lID0gJ2JzLXNuYWNrYmFyIGJzLXNuYWNrYmFyLS1wcm9ncmVzcyBicy1zbmFja2Jhci0tYWxpZ24tbGVmdCBicy1zbmFja2Jhci0tYWxlcnQnO1xuICAgIGNvbmZpZy5lbC5zbmFjay5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYWxlcnQnKTtcbiAgICBjb25maWcuZWwuc25hY2suc2V0QXR0cmlidXRlKCdkYXRhLXNuYWNrYmFyLWlkJywgJ2JzLWRvd25sb2Fkcy1wcm9ncmVzcycpO1xuICB9O1xuXG4gIHZhciBzaG93ID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbmZpZy5lbC5zbmFjay5jbGFzc0xpc3QuYWRkKGNvbmZpZy5jbGFzc2VzLnZpc2libGUpO1xuICB9O1xuXG4gIHZhciBoaWRlID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbmZpZy5lbC5zbmFjay5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5jbGFzc2VzLnZpc2libGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgYSBuZXcgcHJvZ3Jlc3MgdG8gc25hY2tiYXJcbiAgICogQHBhcmFtICB7TnVtYmVyfFN0cmluZ30gcHJvZ3Jlc3MgIGEgbnVtZXJpYyB2YWx1ZSBmb3IgcHJvZ3Jlc3Mgb3IgYSBzdHJpbmdcbiAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgICAgbWVzc2FnZSAgIGEgdGV4dCB0byBkZXNjcmliZSB0aGUgc3RhdGUgb2YgcHJvZ3Jlc3NcbiAgICogQHJldHVybiB7Vm9pZH1cbiAgICovXG4gIHZhciBzZXRQcm9ncmVzcyA9IGZ1bmN0aW9uIChwcm9ncmVzcywgbWVzc2FnZSkge1xuICAgIC8vIFVwZGF0ZSBpZiBwcm9ncmVzcyBpcyBhIGRpZmZlcmVudCBudW1iZXIgb2YgY3VycmVudCBpbiBzdGF0ZVxuICAgIGlmICh0eXBlb2YgcHJvZ3Jlc3MgPT09ICdudW1iZXInICYmIGNvbmZpZy5zdGF0ZS5wcm9ncmVzcyAhPT0gcHJvZ3Jlc3MpIHtcbiAgICAgIGNvbmZpZy5zdGF0ZS5wcm9ncmVzcyA9IHByb2dyZXNzICsgJyUnO1xuICAgICAgY29uZmlnLmVsLnByb2dyZXNzVmFsdWUuaW5uZXJIVE1MID0gY29uZmlnLnN0YXRlLnByb2dyZXNzO1xuICAgICAgY29uZmlnLmVsLnByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gY29uZmlnLnN0YXRlLnByb2dyZXNzO1xuICAgIH0gZWxzZSBpZiAoIXByb2dyZXNzKSB7XG4gICAgICBjb25maWcuZWwucHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSAwO1xuICAgICAgY29uZmlnLmVsLnByb2dyZXNzVmFsdWUuaW5uZXJIVE1MID0gJyc7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGlubmVySFRNTCBvZiBwcm9ncmVzc1ZhbHVlIGlmIHByb2dyZXNzIGlzIGEgc3RyaW5nXG4gICAgLy8gSXQncyB1c2VmdWwgdG8gYWRkIGEgbG9hZGluZ3MgY29tcG9uZW50IG9yIGN1c3RvbSBsaW5rcyBpbiBsaWV1IG9mIGFcbiAgICAvLyBudW1lcmljIHZhbHVlIG9uIHRoZSByaWdodCBvZiB0aGUgc25hY2tiYXJcbiAgICBpZiAocHJvZ3Jlc3MgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICBjb25maWcuZWwucHJvZ3Jlc3NWYWx1ZS5pbm5lckhUTUwgPSAnJztcbiAgICAgIGNvbmZpZy5lbC5wcm9ncmVzc1ZhbHVlLmFwcGVuZENoaWxkKHByb2dyZXNzKTtcbiAgICAgIGNvbmZpZy5lbC5wcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9IDA7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGlmIG1lc3NhZ2UgaXMgYSBkaWZmZXJlbnQgc3RyaW5nIG9mIGN1cnJlbnQgaW4gc3RhdGVcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnICYmIGNvbmZpZy5zdGF0ZS5tZXNzYWdlICE9PSBtZXNzYWdlKSB7XG4gICAgICBjb25maWcuc3RhdGUubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICBjb25maWcuZWwucHJvZ3Jlc3NUZXh0LmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgfVxuICB9O1xuXG4gIHZhciBhZGRCdXR0b24gPSBmdW5jdGlvbiAoaWNvbkNsYXNzLCBtZXNzYWdlLCBjYikge1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBpY29uQ2xhc3MgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgbWVzc2FnZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uZmlnLmV2ZW50cy5saW5rID0gY2I7XG4gICAgICBjb25maWcuZWwucHJvZ3Jlc3NMaW5rLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cIicgKyBpY29uQ2xhc3MgKyAnXCI+PC9pPic7XG4gICAgICBjb25maWcuZWwucHJvZ3Jlc3NMaW5rLnRpdGxlID0gbWVzc2FnZTtcbiAgICAgIGNvbmZpZy5lbC5wcm9ncmVzc0xpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjb25maWcuZXZlbnRzLmxpbmspO1xuICAgICAgcmV0dXJuIGNvbmZpZy5lbC5wcm9ncmVzc0xpbms7XG4gICAgfVxuXG4gICAgLy8gdGhyb3cgbmV3IEVycm9yKCdhbGwgYXJndW1lbnRzIGFyZSByZXF1aXJlZC4nKTtcbiAgfTtcblxuICB2YXIgcmVtb3ZlQnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbmZpZy5lbC5wcm9ncmVzc0xpbmsuaW5uZXJIVE1MID0gJyc7XG4gICAgY29uZmlnLmVsLnByb2dyZXNzTGluay5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbmZpZy5ldmVudHMubGluayk7XG4gIH07XG5cbiAgdmFyIG9uQ2FuY2VsID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgaWYgKHR5cGVvZiBjYiAhPT0gJ2Z1bmN0aW9uJykgY2IgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICBjb25maWcuZWwucHJvZ3Jlc3NDYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjYik7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICAgIHNob3c6IHNob3csXG4gICAgaGlkZTogaGlkZSxcbiAgICBzZXRQcm9ncmVzczogc2V0UHJvZ3Jlc3MsXG4gICAgYWN0aXZlQnV0dG9uOiBhZGRCdXR0b24sXG4gICAgZGlzYWJsZUJ1dHRvbjogcmVtb3ZlQnV0dG9uLFxuICAgIG9uQ2FuY2VsOiBvbkNhbmNlbCxcbiAgICBlbGVtZW50czogY29uZmlnLmVsLFxuICB9O1xufTtcblxuXG4vKipcbiAqIEluaXQgQnNTbmFja2JhciBjb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH0gQnNTbmFja2Jhci5pbml0KCk7XG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIC8vIHdpbmRvdy5wcm9ncmVzcyA9IG5ldyBCc1NuYWNrUHJvZ3Jlc3MoKVxuICAvLyBwcm9ncmVzcy5pbml0KCk7XG4gIC8vIHByb2dyZXNzLnNob3coKTtcbn0pO1xuIiwiLyoqXG4gKiBCcyBDYXJvdXNlbFxuICovXG52YXIgQnNDYXJvdXNlbCA9IChmdW5jdGlvbiAoKSB7XG5cbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBjYXJvdXNlbERlZmF1bHQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1xdWljay1tZW51Om5vdCguYnMtcXVpY2stbWVudS0taWNvbikgLmJzLWpzLWNhcm91c2VsJyksXG4gICAgY2Fyb3VzZWxCb3g6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1xdWljay1tZW51X19ib3gnKSxcbiAgICBvdmVyUHJldjogJ2JzLXF1aWNrLW1lbnUtLW92ZXItcHJldicsXG4gICAgb3Zlck5leHQ6ICdicy1xdWljay1tZW51LS1vdmVyLW5leHQnLFxuICB9XG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAvLyBldml0YSBidWcgZGUgcmVuZGVyaXphw6fDo29cbiAgICBkZWJvdW5jZShidWlsZE1lbnUoKSk7XG5cbiAgfTtcblxuICB2YXIgYnVpbGRNZW51ID0gZnVuY3Rpb24oKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuY2Fyb3VzZWxEZWZhdWx0LCBmdW5jdGlvbiAoZWwpIHtcblxuICAgICAgLy8gISEtIFNFVCBERSBDT05GSUdVUkHDh8ODTyBQQURSw4NPXG4gICAgICB2YXIgZmxpY2tpdHlPcHRpb25zRGVmYXVsdHMgPSB7XG4gICAgICAgIGNvbnRhaW46IHRydWUsXG4gICAgICAgIHByZXZOZXh0QnV0dG9uczogZmFsc2UsXG4gICAgICAgIGNlbGxBbGlnbjogJ2xlZnQnLFxuICAgICAgICBncm91cENlbGxzOiB0cnVlLFxuICAgICAgICB3YXRjaENTUzogdHJ1ZSxcbiAgICAgICAgYWRhcHRpdmVIZWlnaHQ6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICAvLyAtIEV4ZWN1dGEgZSBBcGxpY2EgU2V0IGRlIGNvbmZpZ3VyYcOnw7Vlc1xuICAgICAgdmFyIGZsa3R5ID0gbmV3IEZsaWNraXR5KCBlbCwgZmxpY2tpdHlPcHRpb25zRGVmYXVsdHMgKTtcbiAgICAgIC8vIGRlYnVnZ2VyXG4gICAgICAvLyBjbGFzcyBhY3RpdmUgb3ZlciBlZmZlY3QgbW9yZSBpdGVtcyByaWdodCBzaWRlXG5cbiAgICAgIHZhciBjYXJvdXNlbEJveCA9IGVsLnBhcmVudE5vZGUuY2xvc2VzdCgnLmJzLXF1aWNrLW1lbnVfX2JveCcpO1xuXG4gICAgICB2YXIgZmxpY2tpdHlWaWV3ID0gZWwucXVlcnlTZWxlY3RvcignLmZsaWNraXR5LXZpZXdwb3J0Jyk7XG4gICAgICAvLyBvbmx5IGFwcGx5IGNsYXNzIHJlbGF0aXZlIElOSVQgbmF2aXRnYXRpb25cbiAgICAgIGlmIChmbGlja2l0eVZpZXcpIHtcbiAgICAgICAgdmFyIGNhcm91c2VsQm94UGFyZW50ID0gZmxpY2tpdHlWaWV3LnBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgY2Fyb3VzZWxCb3hQYXJlbnQuY2xhc3NMaXN0LmFkZChjb25maWcub3Zlck5leHQpO1xuICAgICAgfVxuXG4gICAgICBmbGt0eS5vbignc2VsZWN0JywgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIC8vIGNsYXNzIGFkZCBvciByZW1vdmUgZWZmZWN0IG92ZXIgaW4gcG9zaXRpb24gaW5pdGlhbFxuICAgICAgICBpZiAoIWZsa3R5LmNlbGxzW2Zsa3R5LnNlbGVjdGVkSW5kZXggLSAxXSkge1xuXG4gICAgICAgICAgY2Fyb3VzZWxCb3guY2xhc3NMaXN0LnJlbW92ZShjb25maWcub3ZlclByZXYpO1xuICAgICAgICAgIGNhcm91c2VsQm94LmNsYXNzTGlzdC5hZGQoY29uZmlnLm92ZXJOZXh0KTtcblxuICAgICAgICAgIC8vIGNsYXNzIGFkZCBvciByZW1vdmUgZWZmZWN0IG92ZXIgaW4gcG9zaXRpb24gZmluYWxcbiAgICAgICAgfSBlbHNlIGlmKCFmbGt0eS5jZWxsc1tmbGt0eS5jZWxscy5sZW5ndGhdKSB7XG5cbiAgICAgICAgICBjYXJvdXNlbEJveC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5vdmVyUHJldik7XG5cbiAgICAgICAgICAvLyBjbGFzcyBhZGQgb3IgcmVtb3ZlIGVmZmVjdCBvdmVyIGluIG1pZGRsZSBwb3NpdGlvbiB0byBpdGVtcyBiaWcgdGhhbiBzaWRlc1xuICAgICAgICAgIGlmIChmbGt0eS5zZWxlY3RlZEluZGV4ID09PSAoZmxrdHkucGFnZURvdHMuZG90cy5sZW5ndGggLSAxKSkge1xuICAgICAgICAgICAgY2Fyb3VzZWxCb3guY2xhc3NMaXN0LnJlbW92ZShjb25maWcub3Zlck5leHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYXJvdXNlbEJveC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5vdmVyTmV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICB9O1xufSgpKTtcblxuLyoqXG4gKiBJbml0XG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBjYXJvdXNlbERlZmF1bHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtcXVpY2stbWVudTpub3QoLmJzLXF1aWNrLW1lbnUtLWljb24pIC5icy1qcy1jYXJvdXNlbCcpO1xuICBpZiAoY2Fyb3VzZWxEZWZhdWx0Lmxlbmd0aCkge1xuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY2Fyb3VzZWxEZWZhdWx0LCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgIEJzQ2Fyb3VzZWwuaW5pdChlbCk7XG4gICAgfSlcbiAgfVxufSk7XG4iLCIvKipcbiAqIEJzIENhcm91c2VsIEljb25zXG4gKi9cbnZhciBCc0Nhcm91c2VsSWNvbnMgPSAoZnVuY3Rpb24gKCkge1xuXG4gIHZhciBjb25maWcgPSB7XG4gICAgY2Fyb3VzZWxJY29uczogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLXF1aWNrLW1lbnUtLWljb24gLmJzLWpzLWNhcm91c2VsJyksXG4gICAgY2Fyb3VzZWxCb3g6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1xdWljay1tZW51X19ib3gnKSxcbiAgICBvdmVyUHJldjogJ2JzLXF1aWNrLW1lbnUtLW92ZXItcHJldicsXG4gICAgb3Zlck5leHQ6ICdicy1xdWljay1tZW51LS1vdmVyLW5leHQnLFxuICAgIGJveFNsaWRlcjogJycsXG4gICAgYm94Vmlld3BvcnQ6ICcnLFxuICAgIGJveFZpZXdwb3J0SXRlbTogJycsXG4gICAgYm94TmV3OiAnJyxcbiAgICBib3hTbGlkZXJDbG9uZTogJycsXG4gICAgb2ZmU2V0OiAnJyxcbiAgICBib3hJdGVtOiAnJyxcbiAgICB0b3RhbFJlZHVjZTogJycsXG4gICAgYm94U2l6ZTogJycsXG4gICAgdG90YWxJbmRleDogJycsXG4gICAgY2FsY1BlcmM6ICcnLFxuICAgIHBhcmVudDogJycsXG4gICAgdmlld01vZDogJycsXG4gIH07XG5cblxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgIC8vIGV2aXRhIGJ1ZyBkZSByZW5kZXJpemHDp8Ojb1xuICAgIHNldFRpbWVvdXQgKGZ1bmN0aW9uICgpIHtcblxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGdldE1lbnUoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyByZXR1cm4gbWVudSBkZWZhdWx0IGNvbmZpZ3VyYXRpb25cbiAgICAgIGdldE1lbnUoKTtcblxuICAgIH0sIDQwMCk7XG5cblxuICB9O1xuXG4gIHZhciBnZXRNZW51ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuY2Fyb3VzZWxJY29ucywgZnVuY3Rpb24gKGVsZW0pIHtcblxuICAgICAgLy8gISEtIFNFVCBERSBDT05GSUdVUkHDh8ODTyBQQURSw4NPXG4gICAgICB2YXIgZmxpY2tpdHlPcHRpb25zID0ge1xuICAgICAgICBjb250YWluOiB0cnVlLFxuICAgICAgICBwcmV2TmV4dEJ1dHRvbnM6IGZhbHNlLFxuICAgICAgICBjZWxsQWxpZ246ICdsZWZ0JyxcbiAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgfTtcbiAgICAgIGZsaWNraXR5T3B0aW9uc0ZhbHNlID0ge1xuICAgICAgICBjb250YWluOiB0cnVlLFxuICAgICAgICBwcmV2TmV4dEJ1dHRvbnM6IGZhbHNlLFxuICAgICAgICBjZWxsQWxpZ246ICdsZWZ0JyxcbiAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIHZhciBjYXJvdXNlbEJveCA9IGVsZW0ucGFyZW50Tm9kZS5jbG9zZXN0KCcuYnMtcXVpY2stbWVudV9fYm94Jyk7XG5cbiAgICAgIC8vIHRoZSBuZXcgc2VsZWN0b3IgcGFyZW50XG4gICAgICBjb25maWcuYm94TmV3ID0gZWxlbTtcbiAgICAgIGNvbmZpZy5vZmZTZXQgPSBjb25maWcuYm94TmV3Lm9mZnNldFdpZHRoO1xuXG4gICAgICAvLyBwYXJlbnQgaXRlbXNcbiAgICAgIGNvbmZpZy5ib3hJdGVtID0gY29uZmlnLmJveE5ldy5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtcXVpY2stbWVudV9faXRlbScpO1xuXG4gICAgICBjb25maWcudG90YWxSZWR1Y2UgPSBBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwoY29uZmlnLmJveEl0ZW0sIGZ1bmN0aW9uIChpLCBlbCkge1xuICAgICAgICB2YXIgaSA9IGkgKyBlbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9LCAwKTtcblxuICAgICAgLy8gaW5pdCBmbGlja3R5XG4gICAgICB2YXIgZmxrdHkgPSBuZXcgRmxpY2tpdHkoIGVsZW0sIGZsaWNraXR5T3B0aW9ucyApO1xuXG4gICAgICAvLyBpZiBmbGlja2l0eSBnZXQgYm94IHNsaWRlclxuICAgICAgY29uZmlnLmJveFNsaWRlciA9IGVsZW0ucXVlcnlTZWxlY3RvcignLmZsaWNraXR5LXNsaWRlcicpO1xuXG4gICAgICBjb25maWcuYm94U2l6ZSA9IGNvbmZpZy5vZmZTZXQ7XG5cbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLmJveEl0ZW0sIGZ1bmN0aW9uIChlbCkge1xuXG4gICAgICAgIC8vIGlmIHRvdGFsIGl0ZW1zIGxlc3MgbWF4IGJveFxuICAgICAgICBpZiAoY29uZmlnLnRvdGFsUmVkdWNlIDwgY29uZmlnLmJveFNpemUpIHtcbiAgICAgICAgICAvLyBkZWJ1Z2dlclxuICAgICAgICAgIC8vIGNhbGN1bGF0ZSB3aWR0aCByZWFsXG4gICAgICAgICAgZWwuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgICAgZWwuc3R5bGUucG9zaXRpb24gPSAnaW5pdGlhbCc7XG5cbiAgICAgICAgICAvLyBhcHBseSB0byBwYXJlbnQgbW9kaWZpZXJzXG4gICAgICAgICAgY29uZmlnLnBhcmVudCA9IGVsLnBhcmVudE5vZGU7XG4gICAgICAgICAgY29uZmlnLnBhcmVudC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICAgIGNvbmZpZy5wYXJlbnQuc3R5bGUudHJhbnNmb3JtID0gJyc7XG5cbiAgICAgICAgICAvLyByZWluaXRpYXRlIGZsaWNraXR5LCB0byByZXNpemUgaXRlbXMgd2l0aCBidWdcbiAgICAgICAgICBmbGt0eS5kZXN0cm95KCk7XG4gICAgICAgICAgLy8gZmxrdHkgPSBuZXcgRmxpY2tpdHkoIGNvbmZpZy5jYXJvdXNlbEljb25zLCBmbGlja2l0eU9wdGlvbnNGYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gZGVidWdnZXJcbiAgICAgICAgICBlbC5zdHlsZS53aWR0aCA9ICcnO1xuICAgICAgICAgIGVsLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAvLyBhcHBseSB0byBwYXJlbnQgbW9kaWZpZXJzXG4gICAgICAgICAgY29uZmlnLnBhcmVudCA9IGVsLnBhcmVudE5vZGU7XG4gICAgICAgICAgY29uZmlnLnBhcmVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgLy8gY2xhc3MgYWN0aXZlIG92ZXIgZWZmZWN0IG1vcmUgaXRlbXMgcmlnaHQgc2lkZVxuICAgICAgICAgIGNhcm91c2VsQm94LmNsYXNzTGlzdC5hZGQoY29uZmlnLm92ZXJOZXh0KTtcblxuICAgICAgICAgIC8vIHJlaW5pdGlhdGUgZmxpY2tpdHksIHRvIHJlc2l6ZSBpdGVtcyB3aXRoIGJ1Z1xuICAgICAgICAgIGZsa3R5LmRlc3Ryb3koKTtcbiAgICAgICAgICAvLyBkZWJ1Z2dlclxuICAgICAgICAgIGZsa3R5ID0gbmV3IEZsaWNraXR5KCBlbGVtLCBmbGlja2l0eU9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZmxrdHkub24oJ3NlbGVjdCcsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAvLyBjbGFzcyBhZGQgb3IgcmVtb3ZlIGVmZmVjdCBvdmVyIGluIHBvc2l0aW9uIGluaXRpYWxcbiAgICAgICAgaWYgKCFmbGt0eS5jZWxsc1tmbGt0eS5zZWxlY3RlZEluZGV4IC0gMV0pIHtcblxuICAgICAgICAgIGNhcm91c2VsQm94LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLm92ZXJQcmV2KTtcbiAgICAgICAgICBjYXJvdXNlbEJveC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5vdmVyTmV4dCk7XG5cbiAgICAgICAgICAvLyBjbGFzcyBhZGQgb3IgcmVtb3ZlIGVmZmVjdCBvdmVyIGluIHBvc2l0aW9uIGZpbmFsXG4gICAgICAgIH0gZWxzZSBpZighZmxrdHkuY2VsbHNbZmxrdHkuY2VsbHMubGVuZ3RoXSkge1xuXG4gICAgICAgICAgY2Fyb3VzZWxCb3guY2xhc3NMaXN0LmFkZChjb25maWcub3ZlclByZXYpO1xuXG4gICAgICAgICAgLy8gY2xhc3MgYWRkIG9yIHJlbW92ZSBlZmZlY3Qgb3ZlciBpbiBtaWRkbGUgcG9zaXRpb24gdG8gaXRlbXMgYmlnIHRoYW4gc2lkZXNcbiAgICAgICAgICBpZiAoZmxrdHkuc2VsZWN0ZWRJbmRleCA9PT0gKGZsa3R5LnBhZ2VEb3RzLmRvdHMubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgICAgIGNhcm91c2VsQm94LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLm92ZXJOZXh0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2Fyb3VzZWxCb3guY2xhc3NMaXN0LmFkZChjb25maWcub3Zlck5leHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICB9O1xufSgpKTtcblxuLyoqXG4gKiBJbml0IE11cmFsIENvbnN0cnVjdG9yXG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBjYXJvdXNlbEljb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLXF1aWNrLW1lbnUtLWljb24gLmJzLWpzLWNhcm91c2VsJyk7XG4gIGlmIChjYXJvdXNlbEljb25zLmxlbmd0aCkge1xuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY2Fyb3VzZWxJY29ucywgZnVuY3Rpb24gKGVsKSB7XG4gICAgICBCc0Nhcm91c2VsSWNvbnMuaW5pdChlbCk7XG4gICAgfSlcbiAgfVxufSk7XG4iLCIvKipcbiAqIEJzIFF1aWNrTWVudSAoYW5jaG9yKVxuICpcbiAqIFRPRE86XG4gKiAxLiBFc2NvbmRlciAodHJhbnNsYXRlOi0xMDAlKSBtZW51IGZpeG8gcXVhbmRvIHBhc3NhclxuICogZGEgw7psdGltYSBzZcOnw6NvIGRhIHDDoWdpbmEgKGdlcmFsbWVudGUsIHNvYnJlIG8gZm9vdGVyKSBlXG4gKiB2b2x0YXIgYSBtb3N0cmFyIHF1YW5kbyBzdWJpciBhIHDDoWdpbmEgbm92YW1lbnRlO1xuICpcbiAqIDIuIENhbGN1bGFyIGEgdmVsb2NpZGFkZSBkbyBzbW9vdGggc2Nyb2xsIHJlbGF0aXZvIMOgIHBvc2nDp8Ojb1xuICogZGEgc2XDp8OjbywgcGFyYSBxdWUgYSBhbmltYcOnw6NvIGRvIHNjcm9sbCBsZXZlIHNlbXByZSBvXG4gKiBtZXNtbyB0ZW1wby4gRXg6IGxldmFyIG8gbWVzbW8gdGVtcG8gcGFyYSBzY3JvbGxhciBkYVxuICogc2XDp8OjbyAxIHBhcmEgMiBlIGRhIDEgcGFyYSBhIMO6bHRpbWEuXG4gKlxuICogMy4gUXVhbmRvIG8gc2Nyb2xsIHZhaSBkZSBiYWl4byBwYXJhIGNpbWEsIHBvciBjb250YSBkbyBIZWFkZXJcbiAqIGZpY2FyIHZpc8OtdmVsLCBvIG1lbnUgYWNhYmEgZmljYW5kbyBzb2JyZSBvIHTDrXR1bG8uIFByZWNpc2FcbiAqIGRlc2NvbnRhciBvIHRhbWFuaG8gZG8gaGVhZGVyIGRhIHBvc2nDp8OjbyBhbHZvIGRhIMOibmNvcmEuXG4gKi9cbnZhciBCc1F1aWNrTWVudSA9IChmdW5jdGlvbigpIHtcbiAgICAvLyBFbGVtZW50c1xuICAgIHZhciBlbGVtZW50cyA9IHt9O1xuICAgIHZhciAkID0gZWxlbWVudHM7XG4gICAgJC5ib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuICAgICQucXVpY2tNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWpzLXF1aWNrLW1lbnUtYW5jaG9yJyk7XG5cbiAgICBpZiAoISQucXVpY2tNZW51KSByZXR1cm47XG5cbiAgICAkLmZsb2F0ZXIgPSAkLnF1aWNrTWVudS5xdWVyeVNlbGVjdG9yKCcuYnMtcXVpY2stbWVudV9fd3JhcHBlcicpO1xuICAgICQubGlzdCA9ICQucXVpY2tNZW51LnF1ZXJ5U2VsZWN0b3IoJy5icy1xdWljay1tZW51X19saXN0Jyk7XG4gICAgJC50b2dnbGUgPSAkLnF1aWNrTWVudS5xdWVyeVNlbGVjdG9yKCcuYnMtcXVpY2stbWVudV9fdG9nZ2xlJyk7XG4gICAgJC5pdGVtcyA9ICQubGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtcXVpY2stbWVudV9fbGluaycpO1xuXG5cbiAgICAvLyBDb25maWdcbiAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICBxdWlja01lbnVBY3RpdmU6IGZhbHNlLFxuICAgICAgICBxdWlja01lbnVBY3RpdmVDbGFzczogJ2JzLXF1aWNrLW1lbnUtLW9wZW4nLFxuICAgICAgICBxdWlja01lbnVQaW5lZENsYXNzOiAnYnMtcXVpY2stbWVudS0tcGluZWQnLFxuICAgICAgICBpdGVtQWN0aXZlQ2xhc3M6ICdicy1xdWljay1tZW51X19saW5rLS1hY3RpdmUnLFxuICAgICAgICBzY3JvbGxUb3BQb3NpdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gICAgICAgIH0sXG4gICAgICAgIHRvcFBvc2l0aW9uVG9GbG9hdDogMCxcbiAgICAgICAgc2Nyb2xsRGlyZWN0aW9uOiAwLFxuICAgICAgICBsYXN0U2Nyb2xsVG9wOiAwLFxuICAgICAgICBzbW9vdGhTY3JvbGxTdGVwczogMjUsXG4gICAgICAgIHNjcm9sbEFuY2hvckd1dHRlcjogODAsXG4gICAgICAgIGFuY2hvclNlbGVjdG9yOiAnc2VjdGlvbicsXG4gICAgICAgIGxhc3RTZWxlY3RlZEFuY2hvcjogbnVsbFxuICAgIH07XG5cbiAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBUb2dnbGUgcXVpY2tNZW51XG4gICAgICAgIGlmICgkLnRvZ2dsZSkgJC50b2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVRdWlja01lbnUpO1xuXG4gICAgICAgIC8vIENsb3NlIHF1aWNrTWVudSBvbiBjbGljayBvdXRzaWRlXG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYm9keSwgaHRtbCcpLCBmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgcXVpY2tNZW51QWN0aXZlKCkgJiZcbiAgICAgICAgICAgICAgICAgICAgISQucXVpY2tNZW51LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkgJiZcbiAgICAgICAgICAgICAgICAgICAgISQudG9nZ2xlLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VRdWlja01lbnUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDbG9zZSBoZWFkZXIgb24gY2xpY2sgb3V0c2lkZVxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBGaXhhIG8gbWVudSBubyB0b3BvIGRhIHZpZXdwb3J0XG4gICAgICAgICAgICBzZXRQaW5lZCgpO1xuXG4gICAgICAgICAgICAvLyBFeGliZSBvIG1lbnUgYWJhaXhvIGRvIGhlYWRlciBxdWFuZG8gZXN0ZSBlc3TDoSB2aXPDrXZlbFxuICAgICAgICAgICAgaWYgKCFCc0hlYWRlci5pc0Zsb2F0aW5nKCkgfHwgQnNIZWFkZXIuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKEJzSGVhZGVyLmhlYWRlclBpbm5lZCkpIHtcbiAgICAgICAgICAgICAgICAkLmZsb2F0ZXIuc3R5bGUudG9wID0gQnNIZWFkZXIuZWwub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJC5mbG9hdGVyLnN0eWxlLnRvcCA9IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEF0aXZhIG8gaXRlbSBkZSBhY29yZG8gY29tIG8gc2Nyb2xsXG4gICAgICAgICAgICBzZXRBY3RpdmVJdGVtKGdldEFjdGl2ZUl0ZW0oKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENsaWNrIG1lbnUgYW5jaG9yc1xuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKCQuaXRlbXMsIGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICB2YXIgaGFzaCA9IGVsLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIC8vIFByZXZpbmUgbyBjbGlxdWUgc2UgbyBoYXNoIGZvciB1bWEgw6JuY29yYSB2w6FsaWRhXG4gICAgICAgICAgICAgICAgaWYgKHZhbGlkQW5jaG9yKGhhc2gpKSBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIC8vIFJldG9ybmEgc2UgZm9yIGludsOhbGlkYSAobWFudMOpbSBvIGNsaXF1ZSBwYWRyw6NvKVxuICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgLy8gUmV0b3JuYSBzZSBuw6NvIGV4aXN0ZSB1bWEgw6JuY29yYSBuYSBww6FnaW5hIChJRCkgcmVmZXJlbnRlIGFvIGhhc2ggZG8gaXRlbVxuICAgICAgICAgICAgICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcihoYXNoKSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2hhbWEgYSBmdW7Dp8OjbyBwYXJhIHJvbGFyIGEgcMOhZ2luYSBhdMOpIGEgw6JuY29yYVxuICAgICAgICAgICAgICAgIGdvdG9BbmNob3IoZWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgdG9nZ2xlUXVpY2tNZW51ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghcXVpY2tNZW51QWN0aXZlKCkpIG9wZW5RdWlja01lbnUoKTtcbiAgICAgICAgZWxzZSBjbG9zZVF1aWNrTWVudSgpO1xuICAgIH07XG5cbiAgICB2YXIgb3BlblF1aWNrTWVudSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkLnF1aWNrTWVudS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5xdWlja01lbnVBY3RpdmVDbGFzcyk7XG4gICAgfTtcblxuICAgIHZhciBjbG9zZVF1aWNrTWVudSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkLnF1aWNrTWVudS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5xdWlja01lbnVBY3RpdmVDbGFzcyk7XG4gICAgfTtcblxuICAgIHZhciBxdWlja01lbnVBY3RpdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICQucXVpY2tNZW51LmNsYXNzTGlzdC5jb250YWlucyhjb25maWcucXVpY2tNZW51QWN0aXZlQ2xhc3MpO1xuICAgIH07XG5cbiAgICB2YXIgZ290b0FuY2hvciA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgIHZhciBhbmNob3IgPSBlbC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICAgICAgdmFyIGFuY2hvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFuY2hvcik7XG4gICAgICAgIHZhciBhbmNob3JQb3NpdGlvbiA9IGFuY2hvckVsZW1lbnQub2Zmc2V0VG9wO1xuICAgICAgICB2YXIgaW50ZXJ2YWwgPSAwO1xuICAgICAgICB2YXIgc2Nyb2xsRG93biA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIGNvbmZpZy5zY3JvbGxUb3BQb3NpdGlvbigpICsgY29uZmlnLnNtb290aFNjcm9sbFN0ZXBzKTtcbiAgICAgICAgICAgIGlmIChjb25maWcuc2Nyb2xsVG9wUG9zaXRpb24oKSA+IChhbmNob3JQb3NpdGlvbiAtIGNvbmZpZy5zY3JvbGxBbmNob3JHdXR0ZXIpKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciBzY3JvbGxVcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIGNvbmZpZy5zY3JvbGxUb3BQb3NpdGlvbigpIC0gY29uZmlnLnNtb290aFNjcm9sbFN0ZXBzKTtcbiAgICAgICAgICAgIGlmIChjb25maWcuc2Nyb2xsVG9wUG9zaXRpb24oKSA8IChhbmNob3JQb3NpdGlvbiAtIGNvbmZpZy5zY3JvbGxBbmNob3JHdXR0ZXIpKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gRmVjaGEgYSBsaXN0YSBkbyBtZW51XG4gICAgICAgIGNsb3NlUXVpY2tNZW51KCk7XG5cbiAgICAgICAgLy8gU2Nyb2xsYSBhdMOpIGEgw6JuY29yYSBkbyBpdGVtIGNsaWNhZG9cbiAgICAgICAgLy8gU2UgYSDDom5jb3JhIGVzdMOhIGFiYWl4byBkYSBwb3Npw6fDo28gYXR1YWwgZGEgcMOhZ2luYVxuICAgICAgICBpZiAoY29uZmlnLnNjcm9sbFRvcFBvc2l0aW9uKCkgPCBhbmNob3JQb3NpdGlvbikge1xuICAgICAgICAgICAgaW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoc2Nyb2xsRG93biwgMik7XG4gICAgICAgICAgICAvLyBTZSBhIMOibmNvcmEgZXN0w6EgYWNpbWEgZGEgcG9zacOnw6NvIGF0dWFsIGRhIHDDoWdpbmFcbiAgICAgICAgfSBlbHNlIGlmIChjb25maWcuc2Nyb2xsVG9wUG9zaXRpb24oKSA+IGFuY2hvclBvc2l0aW9uKSB7XG4gICAgICAgICAgICBpbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbChzY3JvbGxVcCwgMik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHNldEFjdGl2ZUl0ZW0gPSBmdW5jdGlvbihhbmNob3IpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coYW5jaG9yKTtcblxuICAgICAgICBpZiAoYW5jaG9yID09PSBjb25maWcubGFzdFNlbGVjdGVkQW5jaG9yKSByZXR1cm47XG4gICAgICAgIGVsc2UgY29uZmlnLmxhc3RTZWxlY3RlZEFuY2hvciA9IGFuY2hvcjtcblxuICAgICAgICB2YXIgYW5jaG9ySGFzaCA9ICcjJyArIGFuY2hvci5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgIHZhciBtZW51SXRlbSA9ICQubGlzdC5xdWVyeVNlbGVjdG9yKCdbaHJlZj1cIicgKyBhbmNob3JIYXNoICsgJ1wiXScpO1xuICAgICAgICB2YXIgdGl0bGUgPSBtZW51SXRlbS50ZXh0Q29udGVudDtcblxuICAgICAgICAvLyBkZWJ1Z2dlcjtcblxuXG4gICAgICAgIC8vIERlc2F0aXZhIGl0ZW0gYXRpdm8gYXR1YWxtZW50ZVxuICAgICAgICBpZiAoJC5saXN0LnF1ZXJ5U2VsZWN0b3IoJy4nICsgY29uZmlnLml0ZW1BY3RpdmVDbGFzcykpIHtcbiAgICAgICAgICAgICQubGlzdC5xdWVyeVNlbGVjdG9yKCcuJyArIGNvbmZpZy5pdGVtQWN0aXZlQ2xhc3MpLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLml0ZW1BY3RpdmVDbGFzcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBdGl2YSBvIGl0ZW0gZGUgYWNvcmRvIGNvbSBhIHBvc2nDp8OjbyBhdHVhbFxuICAgICAgICBtZW51SXRlbS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pdGVtQWN0aXZlQ2xhc3MpO1xuXG4gICAgICAgIC8vIEFsdGVyYSBvIHRleHRvIGRvIGJvdMOjbyBkZSB0b2dnbGUgY29tIG8gdMOtdHVsbyBkbyBpdGVtIGNsaWNhZG9cbiAgICAgICAgJC50b2dnbGUuaW5uZXJUZXh0ID0gdGl0bGUudG9TdHJpbmcoKTtcblxuICAgICAgICAvLyBBbHRlcmEgbyBoYXNoIGRhIFVSTCBjb20gbyBoYXNoIGRhIMOibmNvcmEgY2xpY2FkYVxuICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgYW5jaG9ySGFzaCk7XG4gICAgfTtcblxuICAgIHZhciBnZXRBY3RpdmVJdGVtID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBwb3NpdGlvbnMgPSBnZXRBbmNob3JzUG9zaXRpb24oKTtcbiAgICAgICAgdmFyIHNjcm9sbCA9IGNvbmZpZy5zY3JvbGxUb3BQb3NpdGlvbigpO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHZhciBsZW5ndGggPSBwb3NpdGlvbnMubGVuZ3RoO1xuICAgICAgICB2YXIgb3V0cHV0ID0gMDtcblxuICAgICAgICAvLyBSZXR1cm4gYWN0aXZlIGVsZW1lbnQgYnkgb2Zmc2V0VG9wIHBvc2l0aW9uXG4gICAgICAgIGZvciAoOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGlmIChzY3JvbGwgPj0gKHBvc2l0aW9uc1tpXS50YXJnZXRQb3MgLSBjb25maWcuc2Nyb2xsQW5jaG9yR3V0dGVyKSkge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9IHBvc2l0aW9uc1tpXS50YXJnZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXR1cm4gZmlyc3QgaXRlbSBpZiBhbnkgaXMgcmV0dXJuZWQgZnJvbSBsb29waW5nIGFib3ZlXG4gICAgICAgIGlmICghb3V0cHV0KSBvdXRwdXQgPSBwb3NpdGlvbnNbMF0udGFyZ2V0O1xuXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfTtcblxuICAgIHZhciBnZXRBbmNob3JzUG9zaXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFtdO1xuXG4gICAgICAgIC8vIEdlcmEgdW0gYXJyYXkgY29tIGFzIMOibmNvcmFzIGUgc3VhcyByZXNwZWN0aXZhcyBwb3Npw6fDtWVzXG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoJC5pdGVtcywgZnVuY3Rpb24oZWwsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgYW5jaG9yID0gZWwuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4gICAgICAgICAgICB2YXIgYW5jaG9yRWxlbWVudDtcbiAgICAgICAgICAgIHZhciBhbmNob3JQb3NpdGlvbjtcblxuICAgICAgICAgICAgaWYgKCF2YWxpZEFuY2hvcihhbmNob3IpKSByZXR1cm47XG5cbiAgICAgICAgICAgIGFuY2hvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFuY2hvcik7XG4gICAgICAgICAgICBhbmNob3JQb3NpdGlvbiA9IGFuY2hvckVsZW1lbnQub2Zmc2V0VG9wO1xuXG4gICAgICAgICAgICBwb3NpdGlvbnNbaW5kZXhdID0ge1xuICAgICAgICAgICAgICAgIHRhcmdldDogYW5jaG9yRWxlbWVudCxcbiAgICAgICAgICAgICAgICB0YXJnZXRQb3M6IGFuY2hvclBvc2l0aW9uIC0gY29uZmlnLnNjcm9sbEFuY2hvckd1dHRlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwb3NpdGlvbnM7XG4gICAgfTtcblxuICAgIHZhciBzZXRQaW5lZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25maWcudG9wUG9zaXRpb25Ub0Zsb2F0ID0gJC5xdWlja01lbnUub2Zmc2V0VG9wIC0gcGFyc2VGbG9hdCgkLmZsb2F0ZXIuc3R5bGUudG9wKTtcbiAgICAgICAgaWYgKGNvbmZpZy5zY3JvbGxUb3BQb3NpdGlvbigpID4gY29uZmlnLnRvcFBvc2l0aW9uVG9GbG9hdCkge1xuICAgICAgICAgICAgJC5xdWlja01lbnUuY2xhc3NMaXN0LmFkZChjb25maWcucXVpY2tNZW51UGluZWRDbGFzcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkLnF1aWNrTWVudS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5xdWlja01lbnVQaW5lZENsYXNzKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zODg5OTYvcmVnZXgtZm9yLWphdmFzY3JpcHQtdG8tYWxsb3ctb25seS1hbHBoYW51bWVyaWMvMzg5MDIyIzM4OTAyMlxuICAgIHZhciB2YWxpZEFuY2hvciA9IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKC9eW2EtejAtOS1fXSsvKTtcbiAgICAgICAgdmFyIGlkID0gc3RyLnN1YnN0cmluZygxKTtcbiAgICAgICAgLy8gMTogaGFzICMgaW4gZmlyc3QgcG9zaXRpb24gKGlzIGFuIGludGVybmFsIGFuY2hvcilcbiAgICAgICAgcmV0dXJuIHN0ci5pbmRleE9mKCcjJykgPT09IDAgJiZcbiAgICAgICAgICAgIC8vIDI6IGhhcyBtb3JlIHRoYW4gMiBjaGFyYWN0ZXJzIChpcyBub3QgYW4gZW1wdHkgIyBsaW5rKVxuICAgICAgICAgICAgc3RyLmxlbmd0aCA+IDEgJiZcbiAgICAgICAgICAgIC8vIDM6IGhhcyBhbiBhbHBoYW51bWVyaWMgKHdpdGggZGFzaGVzIG9yIHVuZGVyc2NvcmVzKSBpZFxuICAgICAgICAgICAgcmVnZXgudGVzdChpZCk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGluaXQ6IGluaXQsXG4gICAgICAgIGdldEFjdGl2ZUl0ZW06IGdldEFjdGl2ZUl0ZW0sXG4gICAgICAgIHNldEFjdGl2ZUl0ZW06IHNldEFjdGl2ZUl0ZW0sXG4gICAgICAgIGdldEFuY2hvcnNQb3NpdGlvbjogZ2V0QW5jaG9yc1Bvc2l0aW9uLFxuICAgICAgICB2YWxpZEFuY2hvcjogdmFsaWRBbmNob3IsXG4gICAgfTtcbn0oKSk7XG5cbi8qKlxuICogSW5pdCBRdWlja01lbnUgQ29uc3RydWN0b3JcbiAqIEByZXR1cm4ge3ZvaWR9IEhlYWRlci5pbml0KCk7XG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLXF1aWNrLW1lbnUtYW5jaG9yJykubGVuZ3RoKSB7XG4gICAgICAgIEJzUXVpY2tNZW51LmluaXQoKTtcbiAgICB9XG59KTsiLCIvKipcclxuICogTWVudSBjb20gRHJvcGRvd25cclxuICovXHJcbnZhciBCc01kID0gKGZ1bmN0aW9uICgpIHtcclxuICAvLyBDb25maWdcclxuICB2YXIgY29uZmlnID0ge1xyXG4gICAgYnV0dG9uczoge1xyXG4gICAgICBiYWNrOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtbWRfX2JhY2snKSxcclxuICAgICAgaXRlbTogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLW1kX19tZW51IC5icy1tZF9faXRlbScpLFxyXG4gICAgICB0cmlnZ2VyTWVudTogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLW1kLXRyaWdnZXItbWVudScpLFxyXG4gICAgfSxcclxuICAgIGNsYXNzZXM6IHtcclxuICAgICAgaXRlbVN1Ym1lbnVPcGVuOiAnYnMtbWRfX2l0ZW0tLXN1Yi1vcGVuJyxcclxuICAgICAgbWVudU9wZW46ICdicy1tZF9fbWVudS0tb3BlbicsXHJcbiAgICAgIHNvcnRhYmxlOiAnYnMtbWRfX21lbnUtLXNvcnRhYmxlJyxcclxuICAgICAgc3ViU3VibWVudU9wZW46ICdicy1tZF9fbWVudS0tc3ViLW9wZW4nLFxyXG4gICAgICB0cmlnZ2VyTWVudUFjdGl2ZTogJ2JzLW1kX19pdGVtLS1hY3RpdmUnLFxyXG4gICAgfSxcclxuICAgIGNvbnRhaW5lcjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLW1kJyksXHJcbiAgICBtZW51OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtbWRfX21lbnUnKSxcclxuICAgIHdyYXBwZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1tZF9fd3JhcHBlcicpLFxyXG4gICAgc29ydGFibGU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1tZF9fbWVudS5icy1tZF9fbWVudS0tc29ydGFibGUnKSxcclxuICB9O1xyXG5cclxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIHZhciBmbGlja2l0eU9wdGlvbnNEZWZhdWx0cyA9IHtcclxuICAgIC8vICAgY29udGFpbjogdHJ1ZSxcclxuICAgIC8vICAgcHJldk5leHRCdXR0b25zOiBmYWxzZSxcclxuICAgIC8vICAgcGFnZURvdHM6IGZhbHNlLFxyXG4gICAgLy8gICBjZWxsQWxpZ246ICdsZWZ0JyxcclxuICAgIC8vICAgZ3JvdXBDZWxsczogdHJ1ZSxcclxuICAgIC8vICAgd2F0Y2hDU1M6IGZhbHNlLFxyXG4gICAgLy8gfTtcclxuICAgIC8vIC8vIC0gRXhlY3V0YSBlIEFwbGljYSBTZXQgZGUgY29uZmlndXJhw6fDtWVzXHJcbiAgICAvLyB2YXIgZmxrdHkgPSBuZXcgRmxpY2tpdHkoIGNvbmZpZy53cmFwcGVyLCBmbGlja2l0eU9wdGlvbnNEZWZhdWx0cyApO1xyXG5cclxuICAgIC8vIFJlY2FsY3VsYSBvIHBvc2ljaW9uYW1lbnRvIGRvIG1lbnVcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICBfY2FsY1N1Ym1lbnVQb3NpdGlvbigpO1xyXG4gICAgfSwgNTAwKTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBfY2FsY1N1Ym1lbnVQb3NpdGlvbigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgX2Nsb3NlQWxsTWVudXMoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbmZpZy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBfY2xvc2VBbGxNZW51cygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgX2luaXRTaGFkb3coKTtcclxuXHJcbiAgICBpZiAoY29uZmlnLmJ1dHRvbnMudHJpZ2dlck1lbnUpIHtcclxuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuYnV0dG9ucy50cmlnZ2VyTWVudSwgZnVuY3Rpb24gKGJ1dHRvbikge1xyXG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIF9jYWxjU3VibWVudVBvc2l0aW9uKCk7XHJcblxyXG4gICAgICAgICAgdmFyIG1lbnUgPSBidXR0b24ucXVlcnlTZWxlY3RvcignLmJzLW1kX19tZW51Jyk7XHJcbiAgICAgICAgICB2YXIgaXNNZW51T3BlbiA9IChtZW51LmNsYXNzTGlzdC5jb250YWlucyhjb25maWcuY2xhc3Nlcy5tZW51T3BlbikpID09PSB0cnVlO1xyXG5cclxuICAgICAgICAgIGlmIChpc01lbnVPcGVuICYmIG1lbnUpIHtcclxuICAgICAgICAgICAgX2Nsb3NlTWVudShtZW51KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIF9jbG9zZUFsbE1lbnVzKCk7XHJcbiAgICAgICAgICAgIF9vcGVuTWVudShtZW51KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNvbmZpZy5idXR0b25zLml0ZW0pIHtcclxuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuYnV0dG9ucy5pdGVtLCBmdW5jdGlvbiAoYnV0dG9uKSB7XHJcbiAgICAgICAgdmFyIHN1Ym1lbnUgPSBidXR0b24ucXVlcnlTZWxlY3RvcignLmJzLW1kX19zdWJtZW51Jyk7XHJcblxyXG4gICAgICAgIGlmIChzdWJtZW51KSB7XHJcbiAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHZhciBwYXJlbnRNZW51ID0gYnV0dG9uLnBhcmVudE5vZGU7XHJcblxyXG4gICAgICAgICAgICBwYXJlbnRNZW51LmNsYXNzTGlzdC5hZGQoY29uZmlnLmNsYXNzZXMuc3ViU3VibWVudU9wZW4pO1xyXG4gICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChjb25maWcuY2xhc3Nlcy5pdGVtU3VibWVudU9wZW4pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY29uZmlnLmJ1dHRvbnMuYmFjaykge1xyXG4gICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5idXR0b25zLmJhY2ssIGZ1bmN0aW9uIChidXR0b24pIHtcclxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICB2YXIgbWVudUl0ZW0gPSBnZXRQYXJlbnRzKGJ1dHRvbiwgY29uZmlnLmNsYXNzZXMuaXRlbVN1Ym1lbnVPcGVuLCB0cnVlKVswXTtcclxuICAgICAgICAgIHZhciBtZW51ID0gZ2V0UGFyZW50cyhidXR0b24sIGNvbmZpZy5jbGFzc2VzLnN1YlN1Ym1lbnVPcGVuLCB0cnVlKVswXTtcclxuXHJcbiAgICAgICAgICBpZiAobWVudUl0ZW0pIHtcclxuICAgICAgICAgICAgbWVudUl0ZW0uY2xhc3NMaXN0LnJlbW92ZShjb25maWcuY2xhc3Nlcy5pdGVtU3VibWVudU9wZW4pO1xyXG4gICAgICAgICAgICBtZW51LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmNsYXNzZXMuc3ViU3VibWVudU9wZW4pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY29uZmlnLnNvcnRhYmxlKSB7XHJcbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY29uZmlnLnNvcnRhYmxlLCBmdW5jdGlvbiAobWVudSkge1xyXG4gICAgICAgIGRyYWd1bGEoW21lbnVdLCB7XHJcbiAgICAgICAgICBtb3ZlczogZnVuY3Rpb24gKGVsLCBzb3VyY2UsIGhhbmRsZSwgc2libGluZykge1xyXG4gICAgICAgICAgICByZXR1cm4gKCFlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2JzLW1kX19mYXZvcml0ZScpKSAmJiB0cnVlO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyBGZWNoYSBvIG1lbnUgcXVhbmRvIGNsaWNhciBmb3JhIGRlbGVcclxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYm9keSwgaHRtbCcpLCBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIHBhcmVudE1lbnUgPSBnZXRQYXJlbnQoZXZlbnQudGFyZ2V0LCAnYnMtbWRfX3dyYXBwZXInKTtcclxuICAgICAgICBpZiAoIXBhcmVudE1lbnUpIHtcclxuICAgICAgICAgIF9jbG9zZUFsbE1lbnVzKCk7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vIENhbGN1bGEgYSBwb3Npw6fDo28gZW0gcXVlIG8gc3VibWVudSBkZXZlIGFicmlyXHJcbiAgdmFyIF9jYWxjU3VibWVudVBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1lbnVzID0gY29uZmlnLm1lbnU7XHJcblxyXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChtZW51cywgZnVuY3Rpb24gKG1lbnUpIHtcclxuICAgICAgdmFyIGxlZnQgPSBtZW51LnBhcmVudE5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcclxuICAgICAgdmFyIHRvcCA9IG1lbnUucGFyZW50Tm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b207XHJcblxyXG4gICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPj0gNTc2KSB7XHJcbiAgICAgICAgbWVudS5zdHlsZS5sZWZ0ID0gbGVmdCArICdweCc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gTm8gbW9iaWxlIG8gbWVudSDDqSAxMDAlLCBlbnTDo28gbsOjbyBkZXZlIHNlciBzZXRhZG8gYSBwb3Npw6fDo28gbGVmdFxyXG4gICAgICAgIG1lbnUuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2xlZnQnKTtcclxuICAgICAgfVxyXG4gICAgICBtZW51LnN0eWxlLnRvcCA9IHRvcCArICdweCc7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICB2YXIgX29wZW5NZW51ID0gZnVuY3Rpb24gKG1lbnUpIHtcclxuICAgIG1lbnUucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5jbGFzc2VzLnRyaWdnZXJNZW51QWN0aXZlKTtcclxuICAgIG1lbnUuY2xhc3NMaXN0LmFkZChjb25maWcuY2xhc3Nlcy5tZW51T3Blbik7XHJcbiAgfTtcclxuXHJcbiAgdmFyIF9jbG9zZU1lbnUgPSBmdW5jdGlvbiAobWVudSkge1xyXG4gICAgbWVudS5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmNsYXNzZXMudHJpZ2dlck1lbnVBY3RpdmUpO1xyXG4gICAgbWVudS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5jbGFzc2VzLm1lbnVPcGVuKTtcclxuICB9O1xyXG5cclxuICB2YXIgX2Nsb3NlQWxsTWVudXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgb3BlbmVkTWVudXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGNvbmZpZy5jbGFzc2VzLm1lbnVPcGVuKTtcclxuICAgIHZhciBvcGVuZWRTdWJtZW51cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgY29uZmlnLmNsYXNzZXMuc3ViU3VibWVudU9wZW4pO1xyXG4gICAgdmFyIG9wZW5lZEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBjb25maWcuY2xhc3Nlcy5pdGVtU3VibWVudU9wZW4pO1xyXG5cclxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwob3BlbmVkTWVudXMsIGZ1bmN0aW9uIChtZW51KSB7XHJcbiAgICAgIG1lbnUuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuY2xhc3Nlcy5tZW51T3Blbik7XHJcbiAgICAgIG1lbnUucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5jbGFzc2VzLnRyaWdnZXJNZW51QWN0aXZlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwob3BlbmVkU3VibWVudXMsIGZ1bmN0aW9uIChzdWJtZW51KSB7XHJcbiAgICAgIHN1Ym1lbnUuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuY2xhc3Nlcy5zdWJTdWJtZW51T3Blbik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG9wZW5lZEl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmNsYXNzZXMuaXRlbVN1Ym1lbnVPcGVuKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHZhciBfaW5pdFNoYWRvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHNoYWRvd1N0YXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLW1kX19zaGFkb3ctLXN0YXJ0Jyk7XHJcbiAgICBjb25zdCBzaGFkb3dFbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtbWRfX3NoYWRvdy0tZW5kJyk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWZpbmUgc2UgYXMgc29tYnJhcyBkZXZlbSBlc3RhciB2aXPDrXZlaXNcclxuICAgICAqIGh0dHBzOi8vbWFya3VzLm9iZXJsZWhuZXIubmV0L2Jsb2cvYnVpbGRpbmctYS1yZXNwb25zaXZlLXByaW9yaXR5LXBsdXMtaG9yaXpvbnRhbC1zY3JvbGwtbmF2aWdhdGlvbi9cclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVTaGFkb3dWaXNpYmlsaXR5KCkge1xyXG4gICAgICBjb25zdCBtYXhTY3JvbGxTdGFydFJlYWNoZWQgPSBjb25maWcud3JhcHBlci5zY3JvbGxMZWZ0IDw9IDA7XHJcbiAgICAgIGNvbnN0IG1heFNjcm9sbEVuZFJlYWNoZWQgPVxyXG4gICAgICAgIGNvbmZpZy53cmFwcGVyLnNjcm9sbExlZnQgPj0gY29uZmlnLndyYXBwZXIuc2Nyb2xsV2lkdGggLSBjb25maWcud3JhcHBlci5vZmZzZXRXaWR0aCAtIDU7XHJcblxyXG4gICAgICB0b2dnbGVTaGFkb3coc2hhZG93U3RhcnQsIG1heFNjcm9sbFN0YXJ0UmVhY2hlZCk7XHJcbiAgICAgIHRvZ2dsZVNoYWRvdyhzaGFkb3dFbmQsIG1heFNjcm9sbEVuZFJlYWNoZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXhpYmUvb2N1bHRhIGFzIHNvbWJyYXNcclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWwgc29tYnJhXHJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IG1heFNjcm9sbFJlYWNoZWQgYXRpbmdpdSBvIGxpbWl0ZSBkbyBzY3JvbGwgKGluw61jaW8gb3UgZmltKVxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNoYWRvdyhlbCwgbWF4U2Nyb2xsUmVhY2hlZCkge1xyXG4gICAgICBjb25zdCBzaGFkb3dJc1Zpc2libGUgPSBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLXZpc2libGUnKTtcclxuICAgICAgY29uc3Qgc2hvd1NoYWRvdyA9ICFtYXhTY3JvbGxSZWFjaGVkICYmICFzaGFkb3dJc1Zpc2libGU7XHJcbiAgICAgIGNvbnN0IGhpZGVTaGFkb3cgPSBtYXhTY3JvbGxSZWFjaGVkICYmIHNoYWRvd0lzVmlzaWJsZTtcclxuXHJcbiAgICAgIC8vIFVzaW5nIHJlcXVlc3RBbmltYXRpb25GcmFtZSBmb3Igb3B0aW1hbCBzY3JvbGwgcGVyZm9ybWFuY2UuXHJcbiAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NDc3OTMxNlxyXG4gICAgICBpZiAoc2hvd1NoYWRvdykge1xyXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgeyBlbC5jbGFzc0xpc3QuYWRkKCdpcy12aXNpYmxlJyk7IH0pO1xyXG4gICAgICB9IGVsc2UgaWYgKGhpZGVTaGFkb3cpIHtcclxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHsgZWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtdmlzaWJsZScpOyB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbmZpZy53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgaGFuZGxlU2hhZG93VmlzaWJpbGl0eSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaGFuZGxlU2hhZG93VmlzaWJpbGl0eSgpO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBpbml0OiBpbml0LFxyXG4gIH07XHJcbn0oKSk7XHJcblxyXG4vKipcclxuICogSW5pdCBNZW51IGNvbSBEcm9wZG93blxyXG4gKiBAcmV0dXJuIHt2b2lkfSBCc01kLmluaXQoKTtcclxuICovXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1tZCcpLmxlbmd0aCkge1xyXG4gICAgQnNNZC5pbml0KCk7XHJcbiAgfVxyXG59KTtcclxuXHJcbiIsIi8qKlxyXG4gKiBCcyBTZWFyY2ggRW1wdHkgNDA0XHJcbiAqXHJcbiAqL1xyXG5cclxudmFyIEJzU2VhcmNoRW1wdHkgPSAoZnVuY3Rpb24gKCkge1xyXG4gIC8vIENvbmZpZ1xyXG4gIHZhciBjb25maWcgPSB7XHJcbiAgICB0YWc6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1zZWFyY2gtZW1wdHlfX3RhZycpLFxyXG4gICAgaXRlbXM6IFtdLFxyXG4gICAgcmFuZG9tSXRlbTogJycsXHJcbiAgfTtcclxuXHJcbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcudGFnLCBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgY29uZmlnLml0ZW1zLnB1c2goZWwudGV4dENvbnRlbnQpO1xyXG4gICAgfSk7XHJcbiAgICByYW5kb20oKTtcclxuICB9O1xyXG5cclxuICB2YXIgcmFuZG9tID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmFuZG9tSXRlbSA9IGNvbmZpZy5pdGVtc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb25maWcuaXRlbXMubGVuZ3RoICldOyBcclxuXHJcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy50YWcsIGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICB2YXIgdGFnQ29udGVudCA9IGVsLnRleHRDb250ZW50O1xyXG5cclxuICAgICAgaWYgKHJhbmRvbUl0ZW0gIT09IHRhZ0NvbnRlbnQpIHtcclxuICAgICAgICBlbC5yZW1vdmUoKTtcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBpbml0OiBpbml0XHJcbiAgfTtcclxufSgpKTtcclxuXHJcbi8qKlxyXG4gKiBJbml0IFNlYXJjaCBDb25zdHJ1Y3RvclxyXG4gKiBAcmV0dXJuIHt2b2lkfSBIZWFkZXIuaW5pdCgpO1xyXG4gKi9cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLXNlYXJjaC1lbXB0eV9fdGFnJykubGVuZ3RoKSB7XHJcbiAgICBCc1NlYXJjaEVtcHR5LmluaXQoKTtcclxuICB9XHJcbn0pO1xyXG4iLCIvKipcbiAqIEJzIFNlYXJjaFxuICpcbiAqIFtUT0RPXTogUmVmYXRvcmFyIHBhcmEgcXVlIG9zIGVsZW1lbnRvcyBkbyBjb25maWcgcmVmZXJlbmNpZW0gdW0gY29tcG9uZW50ZVxuICogc2VhcmNoIGVzcGVjw61maWNvIGFvIGludsOpcyBkZSBwZWdhciB0b2RvcyBvcyBleGlzdGVudGVzIG5vIGRvY3VtZW50by5cbiAqL1xudmFyIEJzU2VhcmNoRm9ybSA9IChmdW5jdGlvbiAoKSB7XG4gIC8vIENvbmZpZ1xuICB2YXIgY29uZmlnID0ge1xuICAgIGh0bWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2JvZHksIGh0bWwnKSxcbiAgICBoZWFkZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1oZWFkZXInKSxcbiAgICBzZWFyY2g6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1zZWFyY2gnKSxcbiAgICBzZWFyY2hJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWpzLXNlYXJjaC1pbnB1dCcpLFxuICAgIHNlYXJjaE9wZW46IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5icy1qcy1vcGVuLXNlYXJjaCcpLFxuICAgIHNlYXJjaENsb3NlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtanMtY2xvc2Utc2VhcmNoJyksXG4gICAgc2VhcmNoVG9nZ2xlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtanMtdG9nZ2xlLXNlYXJjaCcpLFxuICAgIHNlYXJjaElzT3BlbjogZmFsc2UsXG4gICAgc2VhcmNoSXNPcGVuQ2xhc3M6ICdicy1zZWFyY2gtLW9wZW4nLFxuICAgIGhlYWRlclNlYXJjaE9wZW5DbGFzczogJ2JzLWhlYWRlci0tc2VhcmNoLWlzLW9wZW4nLFxuICB9O1xuXG4gIC8vIHZhciAkID0gY29uZmlnO1xuXG4gIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIFJldHVybiBpZiBub3QgZXhpc3RzIHNlYXJjaCBjb21wb25lbnRcbiAgICBpZiAoIWNvbmZpZy5zZWFyY2gpIHJldHVybjtcblxuICAgIC8vIE9wZW4gc3VnZ2VzdGlvbnMgb24gc2VhcmNoIGlucHV0IGZvY3VzXG4gICAgaWYgKGNvbmZpZy5zZWFyY2hJbnB1dCkge1xuICAgICAgY29uZmlnLnNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBCc1NlYXJjaFN1Z2dlc3Rpb25zLm9wZW4oKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGxvYWRTZWFyY2hTdWdnZXN0aW9ucygpO1xuXG4gICAgLy8gVG9nZ2xlIHNlYXJjaFxuICAgIGlmIChjb25maWcuc2VhcmNoVG9nZ2xlKSBjb25maWcuc2VhcmNoVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlU2VhcmNoKTtcblxuICAgIC8vIE9wZW4gc2VhcmNoXG4gICAgaWYgKGNvbmZpZy5zZWFyY2hPcGVuKSBjb25maWcuc2VhcmNoT3Blbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5TZWFyY2gpO1xuXG4gICAgLy8gQ2xvc2Ugc2VhcmNoXG4gICAgaWYgKGNvbmZpZy5zZWFyY2hDbG9zZSkgY29uZmlnLnNlYXJjaENsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VTZWFyY2gpO1xuXG4gICAgLy8gQ2xvc2Ugc2VhcmNoIG9uIGNsaWNrIG91dHNpZGVcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5odG1sLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdib2R5LCBodG1sJykuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBzZWFyY2hJc09wZW4oKSAmJlxuICAgICAgICAgICFjb25maWcuc2VhcmNoLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkgJiZcbiAgICAgICAgICAhY29uZmlnLnNlYXJjaFRvZ2dsZS5jb250YWlucyhldmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgY2xvc2VTZWFyY2goKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciB0b2dnbGVTZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFzZWFyY2hJc09wZW4oKSkgb3BlblNlYXJjaCgpO1xuICAgIGVsc2UgY2xvc2VTZWFyY2goKTtcbiAgfTtcblxuICB2YXIgb3BlblNlYXJjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoY29uZmlnLnNlYXJjaCkge1xuICAgICAgY29uZmlnLnNlYXJjaC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5zZWFyY2hJc09wZW5DbGFzcyk7XG4gICAgICBjb25maWcuaGVhZGVyLmNsYXNzTGlzdC5hZGQoY29uZmlnLmhlYWRlclNlYXJjaE9wZW5DbGFzcyk7XG4gICAgICBCc0hlYWRlci5zZXRIZWFkZXJGbG9hdGluZyh0cnVlKTtcbiAgICAgIHRvZ2dsZUJvZHlPdmVyZmxvd0hpZGRlbigpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgY2xvc2VTZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGNvbmZpZy5zZWFyY2gpIHtcbiAgICAgIGNvbmZpZy5zZWFyY2guY2xhc3NMaXN0LnJlbW92ZShjb25maWcuc2VhcmNoSXNPcGVuQ2xhc3MpO1xuICAgICAgY29uZmlnLmhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5oZWFkZXJTZWFyY2hPcGVuQ2xhc3MpO1xuICAgICAgdG9nZ2xlQm9keU92ZXJmbG93SGlkZGVuKCk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBzZWFyY2hJc09wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFjb25maWcuc2VhcmNoKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGNvbmZpZy5zZWFyY2guY2xhc3NMaXN0LmNvbnRhaW5zKGNvbmZpZy5zZWFyY2hJc09wZW5DbGFzcyk7XG4gIH07XG5cbiAgdmFyIHNlYXJjaEhhc0ZvY3VzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBjb25maWcuc2VhcmNoSW5wdXQ7XG4gIH07XG5cbiAgdmFyIGxvYWRTZWFyY2hTdWdnZXN0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc3VnZ2VzdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtc2VhcmNoLXN1Z2dlc3Rpb25zJyk7XG4gICAgY29uZmlnLnN1Z2dlc3Rpb25zID0gW107XG5cbiAgICBpZiAoc3VnZ2VzdGlvbnMgJiYgc3VnZ2VzdGlvbnMubGVuZ3RoKSB7XG4gICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHN1Z2dlc3Rpb25zLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgdmFyIHN1Z2dlc3Rpb24gPSBuZXcgQnNTZWFyY2hTdWdnZXN0aW9ucyhlbCwge1xuICAgICAgICAgIGNvbnRlbnRDbGFzc2VzOiBbXG4gICAgICAgICAgICAnYnMtc2VhcmNoLXN1Z2dlc3Rpb25zX190ZXJtJyxcbiAgICAgICAgICAgICdicy1zZWFyY2gtc3VnZ2VzdGlvbnNfX2xvY2F0aW9uJyxcbiAgICAgICAgICBdLFxuICAgICAgICAgIG1heEl0ZW1zOiA4LFxuICAgICAgICAgIGRlZmF1bHRUaXRsZTogJ01haXMgQnVzY2Fkb3MnLFxuICAgICAgICAgIGRlZmF1bHRMaXN0OiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGxpbms6ICcjIScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICAnTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQnLFxuICAgICAgICAgICAgICAgICdpcnVyZSBkb2xvcicsXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuICAgICAgICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgICAgICAgJ2NvbnNlY3RldHVyIGFkaXBpc2ljaW5nIGVsaXQnLFxuICAgICAgICAgICAgICAgICdpbiByZXByZWhlbmRlcml0JyxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGxpbms6ICcjIScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICAnc2VkIGRvIGVpdXNtb2QgdGVtcG9yIGluY2lkaWR1bnQnLFxuICAgICAgICAgICAgICAgICd2b2x1cHRhdGUgdmVsaXQnLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbGluazogJyMhJyxcbiAgICAgICAgICAgICAgY29udGVudDogW1xuICAgICAgICAgICAgICAgICd1dCBsYWJvcmUgZXQgZG9sb3JlIG1hZ25hIGFsaXF1YScsXG4gICAgICAgICAgICAgICAgJ2Vzc2UgY2lsbHVtIGRvbG9yZScsXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuICAgICAgICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgICAgICAgJ1V0IGVuaW0gYWQgbWluaW0gdmVuaWFtJyxcbiAgICAgICAgICAgICAgICAnZXUgZnVnaWF0IG51bGxhJyxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGxpbms6ICcjIScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICAncXVpcyBub3N0cnVkIGV4ZXJjaXRhdGlvbiB1bGxhbWNvJyxcbiAgICAgICAgICAgICAgICAnZXhjZXB0ZXVyIHNpbnQgb2NjYWVjYXQnLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbGluazogJyMhJyxcbiAgICAgICAgICAgICAgY29udGVudDogW1xuICAgICAgICAgICAgICAgICdsYWJvcmlzIG5pc2kgdXQgYWxpcXVpcCBleCBlYScsXG4gICAgICAgICAgICAgICAgJ2N1cGlkYXRhdCBub24gcHJvaWRlbnQnLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbGluazogJyMhJyxcbiAgICAgICAgICAgICAgY29udGVudDogW1xuICAgICAgICAgICAgICAgICdjb21tb2RvIGNvbnNlcXVhdC4gRHVpcyBhdXRlJyxcbiAgICAgICAgICAgICAgICAncXVpIG9mZmljaWEgZGVzZXJ1bnQnLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zTGlzdDogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuICAgICAgICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgICAgICAgJ0xvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0JyxcbiAgICAgICAgICAgICAgICAnaXJ1cmUgZG9sb3InLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbGluazogJyMhJyxcbiAgICAgICAgICAgICAgY29udGVudDogW1xuICAgICAgICAgICAgICAgICdjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0JyxcbiAgICAgICAgICAgICAgICAnaW4gcmVwcmVoZW5kZXJpdCcsXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuICAgICAgICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgICAgICAgJ3NlZCBkbyBlaXVzbW9kIHRlbXBvciBpbmNpZGlkdW50JyxcbiAgICAgICAgICAgICAgICAndm9sdXB0YXRlIHZlbGl0JyxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGxpbms6ICcjIScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICAndXQgbGFib3JlIGV0IGRvbG9yZSBtYWduYSBhbGlxdWEnLFxuICAgICAgICAgICAgICAgICdlc3NlIGNpbGx1bSBkb2xvcmUnLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbGluazogJyMhJyxcbiAgICAgICAgICAgICAgY29udGVudDogW1xuICAgICAgICAgICAgICAgICdVdCBlbmltIGFkIG1pbmltIHZlbmlhbScsXG4gICAgICAgICAgICAgICAgJ2V1IGZ1Z2lhdCBudWxsYScsXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuICAgICAgICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgICAgICAgJ3F1aXMgbm9zdHJ1ZCBleGVyY2l0YXRpb24gdWxsYW1jbycsXG4gICAgICAgICAgICAgICAgJ2V4Y2VwdGV1ciBzaW50IG9jY2FlY2F0JyxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGxpbms6ICcjIScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICAnbGFib3JpcyBuaXNpIHV0IGFsaXF1aXAgZXggZWEnLFxuICAgICAgICAgICAgICAgICdjdXBpZGF0YXQgbm9uIHByb2lkZW50JyxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGxpbms6ICcjIScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICAnY29tbW9kbyBjb25zZXF1YXQuIER1aXMgYXV0ZScsXG4gICAgICAgICAgICAgICAgJ3F1aSBvZmZpY2lhIGRlc2VydW50JyxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIHN1Z2dlc3Rpb24uaW5pdCgpO1xuICAgICAgICBjb25maWcuc3VnZ2VzdGlvbnMucHVzaChzdWdnZXN0aW9uKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdCxcbiAgICB0b2dnbGU6IHRvZ2dsZVNlYXJjaCxcbiAgICBvcGVuOiBvcGVuU2VhcmNoLFxuICAgIGNsb3NlOiBjbG9zZVNlYXJjaCxcbiAgICBpc09wZW46IHNlYXJjaElzT3BlbixcbiAgICBoYXNGb2N1czogc2VhcmNoSGFzRm9jdXMsXG4gICAgaXNBY3RpdmU6IHNlYXJjaElzT3BlbiwgLy8gZGVwcmVjYXRlZFxuICB9O1xufSgpKTtcblxuLyoqXG4gKiBJbml0IFNlYXJjaCBDb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH0gSGVhZGVyLmluaXQoKTtcbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1zZWFyY2gnKS5sZW5ndGgpIHtcbiAgICBCc1NlYXJjaEZvcm0uaW5pdCgpO1xuICB9XG59KTtcbiIsIi8qKlxuICogQVRJVkFSIG8gU0VBUkNIIGFwbGljYXIgbmEgc2VjdGlvbiBhIGNsYXNzZVxuICogLS0tIGJzLWhlbHAtc2VhcmNoIC0tLS0tXG4gKiBBRElDSU9OQVIgTUVOU0FHRU0gVkFaSU8gZGVudHJvIGRlIHNlY3Rpb25cbiAqIC0tLS0gYnMtaGVscC1zZWFyY2hfX3NlYXJjaC1lbXB0eSAtLS0tXG4gKiBPUkdBTklaQVIgQ8OTRCBjYXNvIHV0aWxpemVcbiovXG5cbnZhciBCc1NlcmFjaEhlbHAgPSAoZnVuY3Rpb24oKSB7XG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAvKiBTZWxlY3QgdGhlIGlucHV0IHdoZXJlIHRoZSBrZXl3b3JkcyB3aWxsIGJlIHJldHJpZXZlZCAqL1xuICAgIHZhciBzZWFyY2hib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdicy1oZWxwLXNlYXJjaF9faW5wdXQnKVswXTtcblxuICAgIC8qIFRvIGV2ZXJ5IGtleSBwcmVzc2VkIGFuZCByZWxlYXNlZCAqL1xuICAgIHNlYXJjaGJveC5vbmtleXVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgLyoqXG4gICAgICAqIFRoaXMgd2lsbCBmaXggYSBzaW1wbGUgcHJvYmxlbTogV2hlbiB0aGUgc2VhcmNoIGlucHV0IGlzIGVtcHR5IGFmdGVyXG4gICAgICAqIHRyeWluZyB0byBmaW5kIGEga2V5d29yZCwgaXQgc2VsZWN0cyBhbGwgdGhlIGVsZW1lbnRzIGFuZCBoaWdobGlnaHRcbiAgICAgICovXG4gICAgICB2YXIga2V5d29yZHMgPSBzZWFyY2hib3gudmFsdWUudHJpbSgpLmxlbmd0aCA+IDAgPyBuZXcgUmVnRXhwKHNlYXJjaGJveC52YWx1ZS50cmltKCksIFwiZ2lcIikgOiAnJztcblxuICAgICAgLyogRGVmaW5lIHRoZSBwb3N0VGl0bGVzIHdoZXJlIHRoZSBzZWFyY2ggd2lsbCBydW4gKi9cbiAgICAgIC8vLSB2YXIgcG9zdFRpdGxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Bvc3RfX3RpdGxlJyk7XG5cbiAgICAgIHZhciBzZWxlY3RMaXN0PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtbWVkaWFfX2l0ZW0sLmJzLWFjY29yZGlvbl9faXRlbSwgYnMtbWVkaWFfX2l0ZW0nKTtcblxuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChzZWxlY3RMaXN0LCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgdmFyIHZhbExpc3QgPSBlbCAvLy0gRWFzaWVyIHRvIHJlYWRcbiAgICAgICAgdmFyIGF0dHJUZXh0ID0gdmFsTGlzdC50ZXh0Q29udGVudDtcbiAgICAgICAgLy8tIHZhciBhdHRyVGFnID0gdmFsTGlzdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZmlsdGVyLXRhZycpO1xuICAgICAgICAvLy0gdmFyIGtleSA9IGF0dHJUZXh0LmNvbmNhdChhdHRyVGFnKVxuICAgICAgICBcbiAgICAgICAgLy8tICBJZiB2YWwgYXRyaWJ1dGUgZGF0YS1maWx0ZXItdGFnIGVxdWFsIGtleSBxdWVyeVxuICAgICAgICBpZiAoKGF0dHJUZXh0Lm1hdGNoKGtleXdvcmRzKSkgJiYga2V5d29yZHMgIT09ICcnKSB7XG4gICAgICAgICAgLy8tIElmIHRoZSBlbGVtZW50IGRvbid0IGhhdmUgdGhlIGFjdGl2ZSBjbGFzcywgaXQgd2lsbCBhZGQgb25lXG4gICAgICAgICAgaWYgKCF2YWxMaXN0LmNsYXNzTGlzdC5jb250YWlucygnYnMtaGVscC1zZWFyY2hfX2hpZ2hsaWdodCcpKSB7XG4gICAgICAgICAgICB2YWxMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ2JzLWhlbHAtc2VhcmNoX19yZW1vdmUtaGlnaGxpZ2h0Jyk7XG4gICAgICAgICAgICB2YWxMaXN0LmNsYXNzTGlzdC5hZGQoJ2JzLWhlbHAtc2VhcmNoX19oaWdobGlnaHQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8tIFJlbW92ZSBhY3RpdmUgYW5kIGFkZCByZW1vdmUgZnJvbSBsaXN0IFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB2YWxMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ2JzLWhlbHAtc2VhcmNoX19oaWdobGlnaHQnKTtcbiAgICAgICAgICB2YWxMaXN0LmNsYXNzTGlzdC5hZGQoJ2JzLWhlbHAtc2VhcmNoX19yZW1vdmUtaGlnaGxpZ2h0Jyk7XG5cbiAgICAgICAgICBpZiAoa2V5d29yZHMgPT09ICcnKSB7XG4gICAgICAgICAgICB2YWxMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ2JzLWhlbHAtc2VhcmNoX19yZW1vdmUtaGlnaGxpZ2h0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2FwdHVyZSBhbGwgc2VjdGlvbnMgb24gdGhlIHBhZ2VcbiAgICAgIHZhciBzZWFyY2hMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWhlbHAtc2VhcmNoJyk7XG5cbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoc2VhcmNoTGlzdCwgZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAvLyBpZiBzZWN0aW9uIGJlbG9uZ3Mgc2VhcmNoIGZvciBlbGVtZW50c1xuICAgICAgICB2YXIgYWN0aXZlRmFsc2UgPSBlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JzLWhlbHAtc2VhcmNoX19oaWdobGlnaHQnKTtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBlLnF1ZXJ5U2VsZWN0b3IoJy5icy1oZWxwLXNlYXJjaF9fc2VhcmNoLWVtcHR5Jyk7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gYWN0aXZlIHJldHVybiB3aGlsZSBzZWFyY2ggcmV0dXJucyBhY3RpdmVcbiAgICAgICAgaWYgKGFjdGl2ZUZhbHNlLmxlbmd0aCA8IDEgJiYga2V5d29yZHMgIT09ICcnKSB7XG4gICAgICAgICAgbWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdicy1hY3RpdmUnKTtcbiAgICAgICAgICAvLy0gZGVidWdnZXIgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKCdicy1hY3RpdmUnKTtcbiAgICAgICAgfTtcblxuICAgICAgfSk7XG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGluaXQ6IGluaXRcbiAgfTtcblxufSkoKTtcblxuLyoqXG4gKiBJbml0IFF1aWNrTWVudSBDb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH0gSGVhZGVyLmluaXQoKTtcbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWhlbHAtc2VhcmNoJykubGVuZ3RoKSB7XG4gICAgQnNTZXJhY2hIZWxwLmluaXQoKTtcbiAgfVxufSk7IiwiLyoqXG4gKiBCcyBTZWFyY2ggU3VnZ2VzdGlvbnNcbiAqIEEgbGlzdCBvZiBzdWdnZXN0aW9ucyB0ZXJtcyB0byBzaG93IHdoZW4gc2VhcmNoIGlucHV0IGhhcyBmb2N1c1xuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gZWxlbWVudCBxdWVyeSBvZiBhIERPTSBlbGVtZW50XG4gKiBAcGFyYW0gIHtPYmplY3R9IG9wdGlvbnMgb3ZlcndyaXRlIGRlZmF1bHQgY29uZmlnXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG52YXIgQnNTZWFyY2hTdWdnZXN0aW9ucyA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG4gIC8vIENvbmZpZ1xuICB2YXIgZWxlbSA9IGVsZW1lbnQ7XG4gIHZhciBvcHQgPSAodHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnKSA/IG9wdGlvbnMgOiB7fTtcbiAgdmFyIGRlZmF1bHRzID0ge1xuICAgIC8vIHNlYXJjaCBpbnB1dFxuICAgIHNlYXJjaDogJy5icy1qcy1zZWFyY2gtaW5wdXQnLFxuICAgIC8vIHN1Z2dlc3Rpb25zIGJveFxuICAgIHN1Z2dlc3Rpb25zOiAnLmJzLWpzLXNlYXJjaC1zdWdnZXN0aW9ucycsXG4gICAgLy8gc3VnZ2VzdGlvbnMgbGlzdFxuICAgIGxpc3Q6ICcuYnMtc2VhcmNoLXN1Z2dlc3Rpb25zX19saXN0JyxcbiAgICAvLyBjbGFzcyB0byBzZXQgb3BlbiBzdWdnZXN0aW9uc1xuICAgIHN1Z2dlc3Rpb25zQWN0aXZlQ2xhc3M6ICdicy1zZWFyY2gtc3VnZ2VzdGlvbnMtLW9wZW4nLFxuICAgIC8vIGNsYXNzIHRvIGFkZCBsb2FkaW5nIGdpZiBpbiBsaXN0XG4gICAgc3VnZ2VzdGlvbnNMb2FkaW5nQ2xhc3M6ICdicy1zZWFyY2gtc3VnZ2VzdGlvbnMtLWxvYWRpbmcnLFxuICAgIC8vIGNsYXNzIG9mIGl0ZW1cbiAgICBsaXN0VGl0bGVDbGFzczogJ2JzLXNlYXJjaC1zdWdnZXN0aW9uc19fdGl0bGUnLFxuICAgIC8vIGNsYXNzIG9mIGl0ZW1cbiAgICBpdGVtQ2xhc3M6ICdicy1zZWFyY2gtc3VnZ2VzdGlvbnNfX2l0ZW0nLFxuICAgIC8vIGNsYXNzIHRvIHNldCBhbiBpdGVtIGFzIGFjdGl2ZSwgd2hlbiBzZWxlY3RlZCBieSBrZXlib2FyZCBhcnJvd3MgdXAvZG93blxuICAgIGl0ZW1zQWN0aXZlQ2xhc3M6ICdicy1zZWFyY2gtc3VnZ2VzdGlvbnNfX2l0ZW0tLWFjdGl2ZScsXG4gICAgLy8gY2xhc3Mgb2YgbGlua1xuICAgIGl0ZW1MaW5rQ2xhc3M6ICdicy1zZWFyY2gtc3VnZ2VzdGlvbnNfX2xpbmsnLFxuICAgIC8vIGNsYXNzIG9mIHRlcm1cbiAgICBpdGVtVGVybUNsYXNzOiAnYnMtc2VhcmNoLXN1Z2dlc3Rpb25zX190ZXJtJyxcbiAgICAvLyBjbGFzcyBvZiB0ZXJtIHR5cGVkXG4gICAgaXRlbVRlcm1UeXBlZENsYXNzOiAnYnMtc2VhcmNoLXN1Z2dlc3Rpb25zX190ZXJtLXR5cGVkJyxcbiAgICAvLyBjbGFzcyBvZiBsb2NhdGlvblxuICAgIGl0ZW1Mb2NhdGlvbkNsYXNzOiAnYnMtc2VhcmNoLXN1Z2dlc3Rpb25zX19sb2NhdGlvbicsXG4gICAgLy8gY29udGVudENsYXNzZXNcbiAgICBjb250ZW50Q2xhc3NlczogW10sXG4gICAgLy8gbWF4aW11bSBsaW1pdCBvZiBpdGVtcyBpbiB0aGUgbGlzdFxuICAgIG1heEl0ZW1zOiAwLFxuICAgIC8vIHN0b3JlcyB0aGUgY3VycmVudCBhY3RpdmUgaXRlbVxuICAgIGN1cnJlbnRBY3RpdmVJdGVtOiAnJyxcbiAgICAvLyBzdG9yZXMgdGhlIHNlYXJjaCBpbnB1dCB2YWx1ZSB0eXBlZFxuICAgIC8vIHRoZSBpbnB1dCB2YWx1ZSdzIGNoYW5nZSBkdXJpbmcga2V5Ym9hcmQgYXJyb3dzIG5hdmlnYXRpb24sIGJ1dCBuZWVkIHRvXG4gICAgLy8gYmFjayB0byB0aGUgdmFsdWUgdHlwZWQgcHJldmlvdXNseVxuICAgIHNlYXJjaFRlcm06ICcnLFxuICAgIC8vIHNldCB0aGUgdXBkYXRlIGZ1bmN0aW9uIHRoYXQgcmVidWlsZCBsaXN0IG9uIHR5cGVcbiAgICAvLyBieSBkZWZhdWx0LCB1c2VzIHRoZSB1cGRhdGVMaXN0KCkgZnVuY3Rpb25cbiAgICB1cGRhdGVMaXN0OiBmdW5jdGlvbiAobGlzdCkge1xuICAgICAgcmV0dXJuIHVwZGF0ZUxpc3QobGlzdCk7XG4gICAgfSxcbiAgICAvLyBkZWZhdWx0IHRpdGxlXG4gICAgLy8gZGlzcGxheWVkIHdoZW4gc2VhcmNoIGlucHV0IGhhcyBmb2N1cyBidXQgbm8gdmFsdWVcbiAgICBkZWZhdWx0VGl0bGU6ICcnLFxuICAgIC8vIGRlZmF1bHQgbGlzdFxuICAgIC8vIGRpc3BsYXllZCB3aGVuIHNlYXJjaCBpbnB1dCBoYXMgZm9jdXMgYnV0IG5vIHZhbHVlXG4gICAgZGVmYXVsdExpc3Q6IFtdLFxuICAgIC8vIHRpdGxlIGRpc3BsYXllZCB3aXRoaW4gZGluYW1pYyBzdWdnZXN0aW9uIGxpc3RcbiAgICBzdWdnZXN0aW9uc1RpdGxlOiAnJyxcbiAgICAvLyBsaXN0IGZpbHRlcmVkIGFuZCBkaXNwbGF5ZWQgZHVyaW5nIHR5cGUgb24gc2VhcmNoIGlucHV0XG4gICAgc3VnZ2VzdGlvbnNMaXN0OiBbXSxcbiAgICBvbkJ1aWxkTGlzdDogZnVuY3Rpb24gKCkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ2xpc3QgaGFzIGJ1aWxkZWQnKTtcbiAgICB9LFxuICB9O1xuICB2YXIgY29uZmlnID0ge307XG5cbiAgdmFyIGV4dGVuZCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcblxuICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbml0IHRoZSBjb21wb25lbnRcbiAgICogQHBhcmFtICB7T2JqZWN0fSBvcHRpb25zIG9wdGlvbnMgZm9yIHRoZSBjb250ZW50XG4gICAqL1xuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBEZWZpbmUgb3B0aW9uc1xuICAgIGNvbmZpZyA9IGV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdCk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xuICAgICAgY2xvc2VTdWdnZXN0aW9ucygpO1xuICAgIH0pO1xuXG4gICAgLy8gUHJldmluZSBxdWUgYW8gcmVjYXJyZWdhciBhIHDDoWdpbmEgdHJhZ2EgbyB2YWxvciBkbyBpbnB1dCBwcmVlbmNoaWRvXG4gICAgaWYgKGRldGVjdElFKCkpIHtcbiAgICAgIHZhciBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnNlYXJjaCk7XG4gICAgICBpZiAoc2VhcmNoSW5wdXQpIHNlYXJjaElucHV0LnZhbHVlID0gJyc7XG4gICAgfVxuXG4gICAgY29uZmlnLmJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdib2R5LCBodG1sJyk7XG4gICAgY29uZmlnLnNlYXJjaCA9ICh0eXBlb2YgY29uZmlnLnNlYXJjaCA9PT0gJ3N0cmluZycpID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc2VhcmNoKSA6IGNvbmZpZy5zZWFyY2g7XG4gICAgY29uZmlnLnN1Z2dlc3Rpb25zID0gKHR5cGVvZiBlbGVtID09PSAnc3RyaW5nJykgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW0pIDogZWxlbTtcbiAgICBjb25maWcubGlzdCA9IGNvbmZpZy5zdWdnZXN0aW9ucy5xdWVyeVNlbGVjdG9yKGNvbmZpZy5saXN0KTtcblxuICAgIC8vIFJldHVybiBpZiBub3QgZXhpc3RzIHNlYXJjaCBjb21wb25lbnRcbiAgICBpZiAoIWNvbmZpZy5zdWdnZXN0aW9ucyB8fCAhY29uZmlnLnNlYXJjaCkgcmV0dXJuO1xuXG4gICAgLy8gc2V0IGZ1bmN0aW9uIHRvIHVwZGF0ZSBsaXN0XG4gICAgc2V0Q3VzdG9tVXBkYXRlKGNvbmZpZy5zdWdnZXN0aW9uc0xpc3QpO1xuXG4gICAgLy8gT3BlbiBzdWdnZXN0aW9uc1xuICAgIGlmIChjb25maWcuc2VhcmNoKSBjb25maWcuc2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgb3BlblN1Z2dlc3Rpb25zKTtcblxuICAgIC8vIENsb3NlIHN1Z2dlc3Rpb25zXG4gICAgLy8gU2hvdWxkIGNsb3NlIG9ubHkgaW4gY2xpY2sgb3V0c2lkZVxuICAgIC8vIGlmIChjb25maWcuc2VhcmNoKSBjb25maWcuc2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBjbG9zZVN1Z2dlc3Rpb25zKTtcblxuICAgIC8vIEJ1aWxkIGRlZmF1bHQgbGlzdFxuICAgIGJ1aWxkTGlzdCgpO1xuXG4gICAgLy8gVW5zZWxlY3QgaXRlbXMgb24gc2VhcmNoIGlucHV0IGJsdXJcbiAgICBpZiAoY29uZmlnLnNlYXJjaCkgY29uZmlnLnNlYXJjaC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZGlzYWJsZUl0ZW1BY3RpdmUpO1xuXG4gICAgLy8gQ2xvc2Ugc2VhcmNoIG9uIGNsaWNrIG91dHNpZGVcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5ib2R5LCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBzdWdnZXN0aW9uc0lzT3BlbigpICYmXG4gICAgICAgICAgIWNvbmZpZy5zdWdnZXN0aW9ucy5jb250YWlucyhldmVudC50YXJnZXQpICYmXG4gICAgICAgICAgIWNvbmZpZy5zZWFyY2guY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgIGNsb3NlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gT24gc2VhcmNoIGlucHV0IGtleWJvYXJkIGV2ZW50c1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBrZXlVcCA9IGV2ZW50LmtleUNvZGUgPT09IDM4O1xuICAgICAgdmFyIGtleURvd24gPSBldmVudC5rZXlDb2RlID09PSA0MDtcbiAgICAgIHZhciBrZXlUYWIgPSBldmVudC5rZXlDb2RlID09PSA5O1xuICAgICAgLy8gdmFyIGtleUVudGVyID0gZXZlbnQua2V5Q29kZSA9PT0gMTM7XG4gICAgICAvLyB2YXIga2V5RXNjID0gZXZlbnQua2V5Q29kZSA9PT0gMjc7XG4gICAgICB2YXIgaXRlbXMgPSBjb25maWcubGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGNvbmZpZy5pdGVtQ2xhc3MpO1xuICAgICAgdmFyIGl0ZW1BY3RpdmUgPSBnZXRJdGVtQWN0aXZlKCk7XG4gICAgICB2YXIgaXRlbUFjdGl2ZUluZGV4ID0gKGl0ZW1BY3RpdmUpID9cbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChpdGVtcywgaXRlbUFjdGl2ZSkgOiAtMTtcblxuICAgICAgLy8gUnVuIG9ubHkgaWYgc2VhcmNoIHN1Z2dlc3Rpb25zIGlzIG9wZW5cbiAgICAgIGlmICghc3VnZ2VzdGlvbnNJc09wZW4oKSB8fCAhaXRlbXMubGVuZ3RoKSByZXR1cm47XG5cbiAgICAgIC8vIElmIHRhYiBpcyBwcmVzc2VkLCBDbG9zZSBzdWdnZXN0aW9ucyBvbiBzZWFyY2ggaW5wdXQgYmx1ciBpZiBmb2N1cydzIG5vdFxuICAgICAgLy8gaW4gc3VnZ2VzdGlvbnMncyBsaW5rc1xuICAgICAgaWYgKGtleVRhYiAmJiAhc2VhcmNoSGFzRm9jdXMoKSkgY2xvc2VTdWdnZXN0aW9ucygpO1xuXG4gICAgICAvL1xuICAgICAgLy8gU2VsZWN0IGl0ZW0gb24ga2V5Ym9hcmQgYXJyb3cgdXAvZG93biBtb3ZlXG4gICAgICAvL1xuICAgICAgLy8gSWYgYXJyb3cgdXAga2V5IGlzIHByZXNzZWRcbiAgICAgIGlmIChrZXlVcCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAvLyBJZiBoYXMgbm90IGFuIGl0ZW0gYWN0aXZlXG4gICAgICAgIGlmIChpdGVtQWN0aXZlSW5kZXggPCAwKSB7XG4gICAgICAgICAgLy8gc2VsZWN0IHRoZSBsYXN0IGl0ZW1cbiAgICAgICAgICBpdGVtc1tpdGVtcy5sZW5ndGggLSAxXS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pdGVtc0FjdGl2ZUNsYXNzKTtcbiAgICAgICAgICBjb25maWcuc2VhcmNoLnZhbHVlID0gZ2V0SXRlbUNvbnRlbnQoaXRlbXNbaXRlbXMubGVuZ3RoIC0gMV0pO1xuICAgICAgICAvLyBJZiBoYXMgYW4gaXRlbSBhY3RpdmUgYW5kIGl0J3Mgbm90IHRoZSBmaXJzdCBpdGVtXG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbUFjdGl2ZUluZGV4ID4gMCkge1xuICAgICAgICAgIC8vIHNlbGVjdCB0aGUgcHJldmlvdXMgaXRlbVxuICAgICAgICAgIGl0ZW1BY3RpdmUuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaXRlbXNBY3RpdmVDbGFzcyk7XG4gICAgICAgICAgaXRlbXNbaXRlbUFjdGl2ZUluZGV4IC0gMV0uY2xhc3NMaXN0LmFkZChjb25maWcuaXRlbXNBY3RpdmVDbGFzcyk7XG4gICAgICAgICAgY29uZmlnLnNlYXJjaC52YWx1ZSA9IGdldEl0ZW1Db250ZW50KGl0ZW1zW2l0ZW1BY3RpdmVJbmRleCAtIDFdKTtcbiAgICAgICAgLy8gSWYgaXRlbSBhY3RpdmUgaXMgdGhlIGZpcnN0IGl0ZW1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyB1bnNlbGVjdCBpdGVtIGFjdGl2ZVxuICAgICAgICAgIGl0ZW1BY3RpdmUuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaXRlbXNBY3RpdmVDbGFzcyk7XG4gICAgICAgICAgY29uZmlnLnNlYXJjaC52YWx1ZSA9IGNvbmZpZy5zZWFyY2hUZXJtO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTW92ZSB0aGUgY2FyZXQgdG8gdGhlIGVuZCBvZiBpbnB1dCdzIHZhbHVlXG4gICAgICAgIC8vIEJ5IGRlZmF1bHQsIGJyb3dzZXJzIHVzdWFsbHkgbW92ZSB0aGUgY2FyZXQgdG8gc3RhcnQgd2hlbiBhcnJvdyB1cCBpc1xuICAgICAgICAvLyBwcmVzc2VkIGluIGEgZm9jdXNlZCBpbnB1dFxuICAgICAgICBjb25maWcuc2VhcmNoLnNldFNlbGVjdGlvblJhbmdlKGNvbmZpZy5zZWFyY2gudmFsdWUubGVuZ3RoLCBjb25maWcuc2VhcmNoLnZhbHVlLmxlbmd0aCk7XG4gICAgICAvLyBJZiBhcnJvdyBkb3duIGtleSBpcyBwcmVzc2VkXG4gICAgICB9IGVsc2UgaWYgKGtleURvd24pIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgLy8gSWYgaGFzIG5vdCBhbiBpdGVtIGFjdGl2ZVxuICAgICAgICBpZiAoaXRlbUFjdGl2ZUluZGV4IDwgMCkge1xuICAgICAgICAgIC8vIHNlbGVjdCB0aGUgZmlyc3QgaXRlbVxuICAgICAgICAgIGl0ZW1zWzBdLmNsYXNzTGlzdC5hZGQoY29uZmlnLml0ZW1zQWN0aXZlQ2xhc3MpO1xuICAgICAgICAgIGNvbmZpZy5zZWFyY2gudmFsdWUgPSBnZXRJdGVtQ29udGVudChpdGVtc1swXSk7XG4gICAgICAgIC8vIElmIGhhcyBhbiBpdGVtIGFjdGl2ZSBhbmQgaXQncyBub3QgdGhlIGxhc3QgaXRlbVxuICAgICAgICB9IGVsc2UgaWYgKGl0ZW1BY3RpdmVJbmRleCA+PSAwICYmIGl0ZW1BY3RpdmVJbmRleCA8IChpdGVtcy5sZW5ndGggLSAxKSkge1xuICAgICAgICAgIC8vIHNlbGVjdCB0aGUgbmV4dCBpdGVtXG4gICAgICAgICAgaXRlbUFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pdGVtc0FjdGl2ZUNsYXNzKTtcbiAgICAgICAgICBpdGVtc1tpdGVtQWN0aXZlSW5kZXggKyAxXS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pdGVtc0FjdGl2ZUNsYXNzKTtcbiAgICAgICAgICBjb25maWcuc2VhcmNoLnZhbHVlID0gZ2V0SXRlbUNvbnRlbnQoaXRlbXNbaXRlbUFjdGl2ZUluZGV4ICsgMV0pO1xuICAgICAgICAvLyBJZiBpdGVtIGFjdGl2ZSBpcyB0aGUgbGFzdCBpdGVtXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gdW5zZWxlY3QgaXRlbSBhY3RpdmVcbiAgICAgICAgICBpdGVtQWN0aXZlLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLml0ZW1zQWN0aXZlQ2xhc3MpO1xuICAgICAgICAgIGNvbmZpZy5zZWFyY2gudmFsdWUgPSBjb25maWcuc2VhcmNoVGVybTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gT24gc2VhcmNoIGlucHV0IHR5cGVcbiAgICBjb25maWcuc2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gdXBkYXRlIHNlYXJjaFRlcm1cbiAgICAgIGNvbmZpZy5zZWFyY2hUZXJtID0gY29uZmlnLnNlYXJjaC52YWx1ZTtcblxuICAgICAgaWYgKCFzdWdnZXN0aW9uc0lzT3BlbigpKSBvcGVuU3VnZ2VzdGlvbnMoKTtcblxuICAgICAgLy8gcnVuIGN1c3RvbSBmdW5jdGlvbiB0byB1cGRhdGUgbGlzdFxuICAgICAgaWYgKGNvbmZpZy5zZWFyY2hUZXJtKSB7XG4gICAgICAgIGNvbmZpZy51cGRhdGVMaXN0KCk7XG4gICAgICAvLyBydW4gY3VzdG9tIGZ1bmN0aW9uIHRvIHVwZGF0ZSBsaXN0XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidWlsZExpc3QoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogT3BlbiBTdWdnZXN0aW9ucyBCb3hcbiAgICovXG4gIHZhciBvcGVuU3VnZ2VzdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gUHJldmluZSBidWcgbm8gSUUgYW8gY2FycmVnYXIgYSBww6FnaW5hXG4gICAgaWYgKChjb25maWcuc2VhcmNoID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSAmJiAoY29uZmlnLnN1Z2dlc3Rpb25zKSkge1xuICAgICAgY29uZmlnLnN1Z2dlc3Rpb25zLmNsYXNzTGlzdC5hZGQoY29uZmlnLnN1Z2dlc3Rpb25zQWN0aXZlQ2xhc3MpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ2xvc2UgU3VnZ2VzdGlvbnMgQm94XG4gICAqL1xuICB2YXIgY2xvc2VTdWdnZXN0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoY29uZmlnLnN1Z2dlc3Rpb25zKSBjb25maWcuc3VnZ2VzdGlvbnMuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuc3VnZ2VzdGlvbnNBY3RpdmVDbGFzcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBTdWdnZXN0aW9ucyBCb3hcbiAgICovXG4gIHZhciB0b2dnbGVTdWdnZXN0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXN1Z2dlc3Rpb25zSXNPcGVuKCkpIG9wZW5TdWdnZXN0aW9ucygpO1xuICAgIGVsc2UgY2xvc2VTdWdnZXN0aW9ucygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBTdWdnZXN0aW9ucyBCb3ggaXMgb3BlblxuICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIG9wZW5cbiAgICovXG4gIHZhciBzdWdnZXN0aW9uc0lzT3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY29uZmlnLnN1Z2dlc3Rpb25zLmNsYXNzTGlzdC5jb250YWlucyhjb25maWcuc3VnZ2VzdGlvbnNBY3RpdmVDbGFzcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEJ1aWxkIExpc3RcbiAgICogQnVpbGQgdGhlIGxpc3QgKDx1bD4vPGxpPikgb2Ygc3VnZ2VzdGlvbnNcbiAgICpcbiAgICogQHBhcmFtICB7QXJyYXl9ICAgIGxpc3QgIGxpc3Qgb2Ygc3VnZ2VzdGlvbnNcbiAgICogQHBhcmFtICB7U3RyaW5nfSAgIHRpdGxlIHRpdGxlIG9mIHRoZSBsaXN0XG4gICAqIEBwYXJhbSAge051bWJlcn0gICBsaW1pdCBsaW1pdCBvZiBzdWdnZXN0aW9uc1xuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gY2IgICAgY2FsbGJhY2sgY2FsbGVkIGFmdGVyIGxpc3QncyBidWlsZGVkXG4gICAqL1xuICB2YXIgYnVpbGRMaXN0ID0gZnVuY3Rpb24gKGxpc3QsIHRpdGxlLCBsaW1pdCwgY2IpIHtcbiAgICAvLyBDaGVjayBpZiBsaXN0IGV4aXN0cyBhbmQgaWYgaXQncyBhbiBhcnJheVxuICAgIGlmICh0eXBlb2YgbGlzdCA9PT0gJ3VuZGVmaW5lZCcgfHwgIUFycmF5LmlzQXJyYXkobGlzdCkpIHtcbiAgICAgIC8vIElmIG5vIGxpc3QgaXMgcGFzc2VkIGFuZCBhIGRlZmF1bHQgbGlzdCBleGlzdHMsIHVzZSBkZWZhdWx0IGluc3RlYWRcbiAgICAgIGlmIChjb25maWcuZGVmYXVsdExpc3QgJiYgQXJyYXkuaXNBcnJheShjb25maWcuZGVmYXVsdExpc3QpKSBsaXN0ID0gY29uZmlnLmRlZmF1bHRMaXN0O1xuICAgICAgLy8gSWYgbm8gbGlzdCBpcyBwYXNzZWQgYW5kIHRoZXJlJ3Mgbm8gZGVmYXVsdCBsaXN0LCB0aHJvdyBlcnJvclxuICAgICAgZWxzZSBsaXN0ID0gbnVsbDtcbiAgICAgIC8vIGVsc2UgdGhyb3cgbmV3IEVycm9yKCdBbiBhcnJheSBvZiBpdGVtcyBpcyByZXF1aXJlZCcpO1xuICAgIH1cblxuICAgIC8vIFNldCBkZWZhdWx0IGxpbWl0XG4gICAgaWYgKHR5cGVvZiBsaW1pdCA9PT0gJ3VuZGVmaW5lZCcpIGxpbWl0ID0gY29uZmlnLm1heEl0ZW1zO1xuXG4gICAgLy8gZGVzdHJveSBjdXJyZW50IGxpc3QgdG8gYXZvaWQgbXVsdGlwbGUgaW5zdGFuY2VzXG4gICAgZGVzdHJveUxpc3QoKTtcblxuICAgIC8vIENoYW5nZSB0aXRsZVxuICAgIHNldFRpdGxlKHRpdGxlKTtcblxuICAgIC8vIEJ1aWxkIGxpc3RcbiAgICBpZiAobGlzdCkge1xuICAgICAgbGlzdC5zb21lKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICBjb25maWcubGlzdC5hcHBlbmRDaGlsZChhZGRJdGVtKGl0ZW0pKTtcbiAgICAgICAgcmV0dXJuICsraW5kZXggPT09IGxpbWl0O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ2FsbGJhY2tcbiAgICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSBjYigpO1xuICAgIGVsc2UgY29uZmlnLm9uQnVpbGRMaXN0KGNvbmZpZy5zdWdnZXN0aW9ucyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIERlc3Ryb3kgTGlzdFxuICAgKiBSZW1vdmUgYWxsIGNoaWxkIG5vZGVzICg8bGk+KSBmcm9tIHRoZSBsaXN0ICg8dWw+KVxuICAgKi9cbiAgdmFyIGRlc3Ryb3lMaXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHNldFRpdGxlKCcnKTtcbiAgICBpZiAoY29uZmlnLmxpc3QuZmlyc3RDaGlsZCkgd2hpbGUgKGNvbmZpZy5saXN0LmZpcnN0Q2hpbGQpIGNvbmZpZy5saXN0LnJlbW92ZUNoaWxkKGNvbmZpZy5saXN0LmZpcnN0Q2hpbGQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGUgTGlzdFxuICAgKiBEZXN0cm95LCBmaWx0ZXIgYW5kIHJlYnVpbGQgdGhlIHN1Z2dlc3Rpb25zIGxpc3RcbiAgICpcbiAgICogQHBhcmFtICB7QXJyYXl9IGxpc3QgbGlzdCBvZiBzdWdnZXN0aW9uc1xuICAgKi9cbiAgdmFyIHVwZGF0ZUxpc3QgPSBmdW5jdGlvbiAobGlzdCkge1xuICAgIC8vIFVwZGF0ZSBzdWdnZXN0aW9ucyBsaXN0XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobGlzdCkpIGNvbmZpZy5zdWdnZXN0aW9uc0xpc3QgPSBsaXN0O1xuXG4gICAgLy8gZGVzdHJveSBjdXJyZW50IGxpc3QgdG8gYXZvaWQgbXVsdGlwbGUgaW5zdGFuY2VzXG4gICAgZGVzdHJveUxpc3QoKTtcblxuICAgIC8vIGFkZCBsb2FkaW5nXG4gICAgc2V0TG9hZGluZ1N0YXRlKHRydWUpO1xuXG4gICAgLy8gYnVpbGRcbiAgICBidWlsZExpc3QoZmlsdGVyTGlzdChjb25maWcuc3VnZ2VzdGlvbnNMaXN0LCBjb25maWcuc2VhcmNoVGVybSksICcnKTtcblxuICAgIC8vIHJlbW92ZSBsb2FkaW5nXG4gICAgc2V0TG9hZGluZ1N0YXRlKGZhbHNlKTtcbiAgfTtcblxuICAvKipcbiAgICogRmlsdGVyIExpc3RcbiAgICogRmlsdGVyIGFuIGFycmF5IG9mIG9iamVjdHMgdG8gcmV0dXJuIG9ubHkgdGhvc2Ugd2hvIGhhdmUgdGhlIHNlYXJjaCB0ZXJtXG4gICAqIGluIGl0cyBrZXkgdmFsdWUuXG4gICAqXG4gICAqIEBwYXJhbSAge0FycmF5fSAgbGlzdCAgIGxpc3Qgb2Ygb2JqZWN0c1xuICAgKiBAcGFyYW0gIHtTdHJpbmd9IHNlYXJjaCB0ZXh0IHRvIHNlYXJjaCBpbiBsaXN0XG4gICAqIEByZXR1cm4ge0FycmF5fSAgICAgICAgIGxpc3Qgb2Ygb2JqZWN0cyB3aG8gaGF2ZSBzZWFyY2ggc3RyaW5nIGluXG4gICAqL1xuICB2YXIgZmlsdGVyTGlzdCA9IGZ1bmN0aW9uIChsaXN0LCBzZWFyY2gpIHtcbiAgICByZXR1cm4gbGlzdC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIGlmICh0eXBlb2YgaXRlbS5jb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gaW5kZXhPZlNwZWNpYWwoaXRlbS5jb250ZW50LCBzZWFyY2gpID4gLTE7XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaXRlbS5jb250ZW50KSkge1xuICAgICAgICByZXR1cm4gaXRlbS5jb250ZW50LnNvbWUoZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICByZXR1cm4gdHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnICYmIGluZGV4T2ZTcGVjaWFsKGNvbnRlbnQsIHNlYXJjaCkgPiAtMTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCBUaXRsZVxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IHRpdGxlIGEgdGl0bGUgdG8gc3VnZ2VzdGlvbnMgbGlzdFxuICAgKi9cbiAgdmFyIHNldFRpdGxlID0gZnVuY3Rpb24gKHRpdGxlKSB7XG4gICAgdmFyIGVsVGl0bGUgPSBjb25maWcuc3VnZ2VzdGlvbnMucXVlcnlTZWxlY3RvcignLicgKyBjb25maWcubGlzdFRpdGxlQ2xhc3MpO1xuICAgIC8vIENoZWNrIGlmIHRpdGxlIGV4aXN0cyBhbmQgaWYgaXQncyBhbiBhcnJheVxuICAgIGlmICh0eXBlb2YgdGl0bGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBJZiBubyB0aXRsZSBpcyBwYXNzZWQgYW5kIGEgZGVmYXVsdCB0aXRsZSBleGlzdHMsIHVzZSBkZWZhdWx0IGluc3RlYWRcbiAgICAgIGlmICh0eXBlb2YgY29uZmlnLmRlZmF1bHRUaXRsZSA9PT0gJ3N0cmluZycpIHRpdGxlID0gY29uZmlnLmRlZmF1bHRUaXRsZTtcbiAgICAgIC8vIElmIG5vIHRpdGxlIGlzIHBhc3NlZCBhbmQgdGhlcmUncyBubyBkZWZhdWx0IHRpdGxlLCBzZXQgdGl0bGUgYXMgZW1wdHlcbiAgICAgIGVsc2UgdGl0bGUgPSAnJztcbiAgICB9XG4gICAgLy8gc2V0IHRpdGxlIGluIEhUTUxcbiAgICBpZiAoZWxUaXRsZSkgZWxUaXRsZS5pbm5lclRleHQgPSB0aXRsZTtcbiAgfTtcblxuICAvKipcbiAgICogQ3VzdG9tIFVwZGF0ZVxuICAgKiBTZXQgYSBjdXN0b20gZnVuY3Rpb24gdG8gcnVuIG9uIGlucHV0IHR5cGluZ1xuICAgKlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gY3VzdG9tIGZ1bmN0aW9uXG4gICAqL1xuICB2YXIgc2V0Q3VzdG9tVXBkYXRlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gdXBkYXRlIGZyb20gZGluYW1pYyBmdW5jdGlvblxuICAgICAgY29uZmlnLnVwZGF0ZUxpc3QgPSBmbjtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERlZmF1bHQgTGlzdFxuICAgKiBTZXQgZGVmYXVsdCBsaXN0IG9mIHN1Z2dlc3Rpb25zIGFuZCB0aXRsZSwgZGVmaW5lZCBieSBjb25maWcuZGVmYXVsdExpc3RcbiAgICogYW5kIGNvbmZpZy5kZWZhdWx0VGl0bGUsIHJlc3BlY3RpdmVseS5cbiAgICpcbiAgICogQHBhcmFtICB7QXJyYXl9ICBsaXN0ICBsaXN0IG9mIHN1Z2dlc3Rpb25zXG4gICAqIEBwYXJhbSAge1N0cmluZ30gdGl0bGUgYSB0aXRsZSB0byBzdWdnZXN0aW9ucyBsaXN0XG4gICAqL1xuICB2YXIgc2V0RGVmYXVsdExpc3QgPSBmdW5jdGlvbiAobGlzdCwgdGl0bGUpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShsaXN0KSkgY29uZmlnLmRlZmF1bHRMaXN0ID0gbGlzdDtcbiAgICBpZiAodHlwZW9mIHRpdGxlID09PSAnc3RyaW5nJykgY29uZmlnLmRlZmF1bHRUaXRsZSA9IHRpdGxlO1xuICAgIGJ1aWxkTGlzdChjb25maWcuZGVmYXVsdExpc3QsIGNvbmZpZy5kZWZhdWx0VGl0bGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgSXRlbVxuICAgKiBBZGQgYW4gaXRlbSA8bGk+IHRvIHN1Z2dlc3Rpb25zIGxpc3RcbiAgICpcbiAgICogT2JqZWN0OlxuICAgKiAgIHRlcm06IHN0cmluZyAtIHRoZSBwYXJ0IG9mIHRleHQgdGhhdCBoYXMgdGhlIHNlYXJjaCB0ZXJtXG4gICAqICAgbGluazogc3RyaW5nIC0gdXJsIHRvIHRoZSBwYWdlIG9mIHRoZSBpdGVtXG4gICAqICAgbG9jYXRpb246IHN0cmluZyAtIG5hbWUgb2YgdGhlIHBhZ2Ugb2YgdGhlIGl0ZW1cbiAgICpcbiAgICogQHBhcmFtICB7T2JqZWN0fSBpdGVtIG9iamVjdCB3aXRoIHRoZSBjb250ZW50IG9mIGl0ZW1cbiAgICogQHJldHVybiB7U3RyaW5nfSBIVE1MIHN0cmluZyBvZiB0aGUgaXRlbVxuICAgKi9cbiAgdmFyIGFkZEl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIHZhciBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgdmFyIGFuY2hvcjtcbiAgICB2YXIgY29udGVudHM7XG5cbiAgICBpZiAoIWl0ZW0gfHwgIWl0ZW0uY29udGVudC5sZW5ndGgpIHJldHVybjtcblxuICAgIGlmICh0eXBlb2YgaXRlbS5jb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudHMgPSBbaXRlbS5jb250ZW50XTtcbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGl0ZW0uY29udGVudCkpIGNvbnRlbnRzID0gaXRlbS5jb250ZW50O1xuICAgIGVsc2UgY29uc29sZS5lcnJvcignaXRlbSBjb250ZW50IHNob3VsZCBiZSBhIHN0cmluZyBvciBhbiBhcnJheSBvZiBzdHJpbmdzJyk7XG5cbiAgICBsaS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pdGVtQ2xhc3MpO1xuXG4gICAgaWYgKGl0ZW0ubGluaykge1xuICAgICAgYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgYW5jaG9yLmhyZWYgPSBpdGVtLmxpbms7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgYW5jaG9yLnR5cGUgPSAnYnV0dG9uJztcbiAgICB9XG5cbiAgICBhbmNob3IuY2xhc3NMaXN0LmFkZChjb25maWcuaXRlbUxpbmtDbGFzcyk7XG4gICAgbGkuYXBwZW5kQ2hpbGQoYW5jaG9yKTtcblxuICAgIGNvbnRlbnRzLmZvckVhY2goZnVuY3Rpb24gKGNvbnRlbnQsIGluZGV4KSB7XG4gICAgICB2YXIgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIHZhciBjb250ZW50SGlnaGxpZ2h0ZWQgPSByZXBsYWNlVGVybXMoY29udGVudCwgY29uZmlnLnNlYXJjaFRlcm0pIHx8ICcnO1xuICAgICAgc3Bhbi5pbm5lckhUTUwgPSBjb250ZW50SGlnaGxpZ2h0ZWQgfHwgY29udGVudDtcbiAgICAgIHNwYW4uc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgY29udGVudCk7XG4gICAgICBpZiAoY29uZmlnLmNvbnRlbnRDbGFzc2VzLmxlbmd0aCkgc3Bhbi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5jb250ZW50Q2xhc3Nlc1tpbmRleF0pO1xuICAgICAgaWYgKGFuY2hvcikgYW5jaG9yLmFwcGVuZENoaWxkKHNwYW4pO1xuICAgICAgZWxzZSBsaS5hcHBlbmRDaGlsZChzcGFuKTtcbiAgICB9KTtcblxuICAgIGlmICghaXRlbS5saW5rKSB7XG4gICAgICBhbmNob3IuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbmZpZy5zZWFyY2gudmFsdWUgPSBnZXRJdGVtQ29udGVudChsaSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCBBbGwgSXRlbXNcbiAgICogR2V0IHRoZSBub2RlbGlzdCB3aXRoIGFsbCBsaXN0IGl0ZW0gZWxlbWVudHNcbiAgICpcbiAgICogQHJldHVybiB7Tm9kZUxpc3R9IGFycmF5IHdpdGggYWxsIGl0ZW0gZWxlbWVudHNcbiAgICovXG4gIHZhciBnZXRBbGxJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY29uZmlnLmxpc3QucXVlcnlTZWxlY3RvckFsbCgnLicgKyBjb25maWcuaXRlbUNsYXNzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgSXRlbUNvbnRlbnRcbiAgICogR2V0IHRoZSB0ZXh0IGNvbnRlbnQgb2YgYW4gbGlzdCBpdGVtIGVsZW1lbnRcbiAgICpcbiAgICogQHBhcmFtICB7T2JqZWN0fSBpdGVtIGl0ZW0gZWxlbWVudCB3aXRoIHRoZSBjb250ZW50IG9mIGl0ZW1cbiAgICogQHJldHVybiB7U3RyaW5nfSAgICAgIHRoZSBpdGVtIHRleHRDb250ZW50XG4gICAqL1xuICB2YXIgZ2V0SXRlbUNvbnRlbnQgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIHZhciBpdGVtVGVybTtcbiAgICBpZiAoIWl0ZW0pIHJldHVybjtcbiAgICBpdGVtVGVybSA9IGl0ZW0ucXVlcnlTZWxlY3RvckFsbCgnc3BhbicpO1xuICAgIHJldHVybiBpdGVtVGVybVswXS50ZXh0Q29udGVudDtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgYWN0aXZlIGl0ZW1cbiAgICogR2V0IHRoZSBjdXJyZW50IGl0ZW0gbWFya2VkIGFzIGFjdGl2ZSBkdXJpbmcga2V5Ym9hcmQgYXJyb3dzIG5hdmlnYXRpb24uXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdH0gRE9NIE9iamVjdCBvZiB0aGUgaXRlbVxuICAgKi9cbiAgdmFyIGdldEl0ZW1BY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNvbmZpZy5zdWdnZXN0aW9ucy5xdWVyeVNlbGVjdG9yKCcuJyArIGNvbmZpZy5pdGVtc0FjdGl2ZUNsYXNzKTtcbiAgfTtcblxuICAvKipcbiAgICogRGlzYWJsZSBjdXJyZW50IGFjdGl2ZSBpdGVtXG4gICAqIERpc2FibGUgdGhlIGN1cnJlbnQgaXRlbSBtYXJrZWQgYXMgYWN0aXZlIGR1cmluZyBrZXlib2FyZCBhcnJvd3MgbmF2aWdhdGlvbi5cbiAgICovXG4gIHZhciBkaXNhYmxlSXRlbUFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYWN0aXZlID0gZ2V0SXRlbUFjdGl2ZSgpO1xuICAgIC8vIHVuc2VsZWN0IGl0ZW0gYWN0aXZlXG4gICAgaWYgKGFjdGl2ZSkgYWN0aXZlLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLml0ZW1zQWN0aXZlQ2xhc3MpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXBsYWNlIFRlcm1zXG4gICAqIFJlcGxhY2UgdGhlIHNlYXJjaFRlcm0gaW4gdGhlIHRlcm0gc3RyaW5nIHdpdGggY3VzdG9tIEhUTUwgdG8gbWFrZSBpdCBib2xkXG4gICAqXG4gICAqIEBwYXJhbSAge1N0cmluZ30gc3RyV2hlcmVTZWFyY2ggaXRlbSB0ZXJtXG4gICAqIEBwYXJhbSAge1N0cmluZ30gc3RyVG9GaW5kICAgICAgc2VhcmNoIHRlcm0gdG8gcmVwbGFjZSBpbiBpdGVtIHRlcm1cbiAgICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgICAgICBpdGVtIHRlcm0gcmVwbGFjZWQgd2l0aCBib2xkIHNlYXJjaCB0ZXJtXG4gICAqL1xuICB2YXIgcmVwbGFjZVRlcm1zID0gZnVuY3Rpb24gKHN0cldoZXJlU2VhcmNoLCBzdHJUb0ZpbmQpIHtcbiAgICAvLyBBcnJheSB0byBzdG9yZSBzdHJpbmdzIGJlZm9yZSBqb2luXG4gICAgdmFyIG9jY3VycmVuY2VzU3RyaW5nID0gW107XG5cbiAgICAvLyBDaGVjayBpZiBib3RoIHBhcmFtZXRlcnMgd2FzIHBhc3NlZFxuICAgIGlmICh0eXBlb2Ygc3RyV2hlcmVTZWFyY2ggPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICB0eXBlb2Ygc3RyVG9GaW5kID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuXG4gICAgLyoqXG4gICAgICogTG9vcCB0aHJvdWdoIHBhcnRzIG9mIHN0cldoZXJlU2VhcmNoIHRvIGNoZWNrIGlmIGl0IGhhcyBzdHJUb0ZpbmQgaW5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyUGFydCBzb21lIHN0cmluZyB3aGVyZSB0byBmaW5kIG91dCBzdHJUb0ZpbmRcbiAgICAgKi9cbiAgICB2YXIgYWxsSW5kZXggPSBmdW5jdGlvbiAoc3RyUGFydCkge1xuICAgICAgdmFyIHJlYWxTdHJpbmcgPSAnJztcbiAgICAgIHZhciBuZXdTdHJpbmcgPSAnJztcbiAgICAgIHZhciBpZHg7XG4gICAgICAvLyBjaGVjayBpZiBzdHJQYXJ0IGhhcyBzdHJUb0ZpbmQsXG4gICAgICBpZHggPSBpbmRleE9mU3BlY2lhbChzdHJQYXJ0LCBzdHJUb0ZpbmQpO1xuICAgICAgaWYgKGlkeCA+IC0xKSB7XG4gICAgICAgIC8vIHN0b3JlIHRoZSByZWFsU3RyaW5nXG4gICAgICAgIHJlYWxTdHJpbmcgPSBzdHJQYXJ0LnN1YnN0cmluZyhpZHgsIGlkeCArIHN0clRvRmluZC5sZW5ndGgpO1xuICAgICAgICBuZXdTdHJpbmcgPSAnPGIgY2xhc3M9XCInICsgY29uZmlnLml0ZW1UZXJtVHlwZWRDbGFzcyArICdcIj4nICsgcmVhbFN0cmluZyArICc8L2I+JztcbiAgICAgICAgLy8gc3RvcmUgdGhlIHBhcnQgb2YgdGhlIHN0clBhcnQgYmVmb3JlIHJlYWxTdHJpbmcgYW5kIHJlYWxTdHJpbmcgcmVwbGFjZWRcbiAgICAgICAgLy8gd2l0aCBib2xkIEhUTUwgdGFnc1xuICAgICAgICBzdHJCZWZvcmUgPSBzdHJQYXJ0LnN1YnN0cmluZygwLCBpZHggKyByZWFsU3RyaW5nLmxlbmd0aCkucmVwbGFjZShyZWFsU3RyaW5nLCBuZXdTdHJpbmcpO1xuICAgICAgICAvLyBzdG9yZSB0aGUgcGFydCBvZiB0aGUgc3RyUGFydCBhZnRlciByZWFsU3RyaW5nXG4gICAgICAgIHN0ckFmdGVyID0gc3RyUGFydC5zdWJzdHJpbmcoaWR4ICsgcmVhbFN0cmluZy5sZW5ndGgpO1xuICAgICAgICAvLyBwdXNoIHN0ckJlZm9yZSB0byB0aGUgb2NjdXJyZW5jZXNTdHJpbmdcbiAgICAgICAgb2NjdXJyZW5jZXNTdHJpbmcucHVzaChzdHJCZWZvcmUpO1xuICAgICAgICAvLyBpZiBzdHJBZnRlciBub3QgZW1wdHksIHBhc3MgaXQgdG8gYWxsSW5kZXggZnVuY3Rpb25cbiAgICAgICAgaWYgKHN0ckFmdGVyKSBhbGxJbmRleChzdHJBZnRlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpZiBzdHJQYXJ0IGhhcyBub3Qgc3RyVG9GaW5kIGluLCBwdXNoIGl0IHRvIHRoZSBlbmQgb2Ygb2NjdXJyZW5jZXNTdHJpbmdcbiAgICAgICAgb2NjdXJyZW5jZXNTdHJpbmcucHVzaChzdHJQYXJ0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gcnVuIGFsbEluZGV4XG4gICAgYWxsSW5kZXgoc3RyV2hlcmVTZWFyY2gpO1xuXG4gICAgLy8gcmV0dXJuIHN0cldoZXJlU2VhcmNoIHJlcGxhY2VkIHN0clRvRmluZCBib2xkXG4gICAgcmV0dXJuIG9jY3VycmVuY2VzU3RyaW5nLmpvaW4oJycpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgbG9hZGluZyBzdGF0ZVxuICAgKiBAcGFyYW0gIHtCb29sZWFufSBzdGF0ZSB0cnVlIHRvIGFkZCBsb2FkaW5nLCBmYWxzZSB0byByZW1vdmUgbG9hZGluZ1xuICAgKi9cbiAgdmFyIHNldExvYWRpbmdTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgIC8vIGNoZWNrIHBhcmFtZXRlcnNcbiAgICAvLyBpZiBzdGF0ZSBlbXB0eSwgdG9vZ2xlIGxvYWRpbmcgaW5zdGVhZCBzZXRcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgc3RhdGUgPSAhY29uZmlnLnN1Z2dlc3Rpb25zLmNsYXNzTGlzdC5jb250YWlucyhjb25maWcuc3VnZ2VzdGlvbnNMb2FkaW5nQ2xhc3MpO1xuICAgIH1cblxuICAgIC8vIFNldCBzdGF0ZVxuICAgIGlmIChzdGF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgY29uZmlnLnN1Z2dlc3Rpb25zLmNsYXNzTGlzdC5hZGQoY29uZmlnLnN1Z2dlc3Rpb25zTG9hZGluZ0NsYXNzKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlID09PSBmYWxzZSkge1xuICAgICAgY29uZmlnLnN1Z2dlc3Rpb25zLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLnN1Z2dlc3Rpb25zTG9hZGluZ0NsYXNzKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIFNlYXJjaCBJbnB1dCBvciBhbnkgaXRlbSBvZiBzdWdnZXN0aW9ucyBsaXN0IGhhcyBmb2N1c1xuICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIHNlYXJjaCBoYXMgZm9jdXNcbiAgICovXG4gIHZhciBzZWFyY2hIYXNGb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBhbGwgbGlua3MgKDxhPikgaW5zaWRlIGxpc3RcbiAgICB2YXIgbGlua3MgPSBjb25maWcubGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdhJyk7XG4gICAgLy8gQ2hlY2sgaWYgc2VhcmNoIElucHV0IGhhcyBmb2N1c1xuICAgIHZhciBzZWFyY2hJbnB1dEhhc0ZvY3VzID0gY29uZmlnLnNlYXJjaCA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAvLyBDaGVjayBpZiBhbnkgaXRlbSBvZiBzdWdnZXN0aW9ucyBsaXN0IGhhcyBmb2N1c1xuICAgIHZhciBhbnlMaW5rSGFzRm9jdXMgPSBBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xuICAgICAgcmV0dXJuIGxpbmsgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgfSk7XG4gICAgLy8gcmV0dXJuIGlmIGFueSBvZiB0aG9zZSBhcmUgdHJ1ZVxuICAgIHJldHVybiAoc2VhcmNoSW5wdXRIYXNGb2N1cyB8fCBhbnlMaW5rSGFzRm9jdXMpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdCxcbiAgICB0b2dnbGU6IHRvZ2dsZVN1Z2dlc3Rpb25zLFxuICAgIG9wZW46IG9wZW5TdWdnZXN0aW9ucyxcbiAgICBjbG9zZTogY2xvc2VTdWdnZXN0aW9ucyxcbiAgICBpc09wZW46IHN1Z2dlc3Rpb25zSXNPcGVuLFxuICAgIGZpbHRlcjogZmlsdGVyTGlzdCxcbiAgICBidWlsZDogYnVpbGRMaXN0LFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3lMaXN0LFxuICAgIHVwZGF0ZTogY29uZmlnLnVwZGF0ZUxpc3QsXG4gICAgY3VzdG9tOiBzZXRDdXN0b21VcGRhdGUsXG4gICAgc2V0TG9hZGluZzogc2V0TG9hZGluZ1N0YXRlLFxuICAgIGRlZmF1bHRMaXN0OiBjb25maWcuZGVmYXVsdExpc3QsXG4gICAgc2V0RGVmYXVsdExpc3Q6IHNldERlZmF1bHRMaXN0LFxuICAgIGdldFNlcmNoVGVybTogY29uZmlnLnNlYXJjaFRlcm0sXG4gICAgY29uZmlnOiBjb25maWcsXG4gIH07XG59O1xuXG4vKipcbiAqIEV4YW1wbGVzXG4gKi9cbi8vXG4vLyAvLyBJbml0IFNlYXJjaCBDb25zdHJ1Y3RvciB3aXRoIGRlZmF1bHQgYW5kIHN1Z2dlc3Rpb25zIGxpc3RzXG4vLyB2YXIgZGVmYXVsdEV4YW1wbGUgPSBmdW5jdGlvbiAoKSB7XG4vLyAgIC8vIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4vL1xuLy8gICB2YXIgc3VnZXN0b2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLXNlYXJjaC1zdWdnZXN0aW9ucycpO1xuLy8gICB2YXIgaW5zdGFuY2VzID0gW107XG4vLyAgIGlmIChzdWdlc3RvZXMgJiYgc3VnZXN0b2VzLmxlbmd0aCkge1xuLy8gICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoc3VnZXN0b2VzLCBmdW5jdGlvbiAoZWwpIHtcbi8vICAgICAgIHZhciBpbnN0YW5jZSA9IG5ldyBCc1NlYXJjaFN1Z2dlc3Rpb25zKGVsLCB7XG4vLyAgICAgICAgIGNvbnRlbnRDbGFzc2VzOiBbXG4vLyAgICAgICAgICAgJ2JzLXNlYXJjaC1zdWdnZXN0aW9uc19fdGVybScsXG4vLyAgICAgICAgICAgJ2JzLXNlYXJjaC1zdWdnZXN0aW9uc19fbG9jYXRpb24nLFxuLy8gICAgICAgICBdLFxuLy8gICAgICAgICBtYXhJdGVtczogOCxcbi8vICAgICAgICAgZGVmYXVsdFRpdGxlOiAnTWFpcyBCdXNjYWRvcycsXG4vLyAgICAgICAgIGRlZmF1bHRMaXN0OiBbXG4vLyAgICAgICAgICAge1xuLy8gICAgICAgICAgICAgY29udGVudDogJ1NlbSBsaW5rIGUgc2VtIGxvY2F0aW9uJyxcbi8vICAgICAgICAgICB9LFxuLy8gICAgICAgICAgIHtcbi8vICAgICAgICAgICAgIGxpbms6ICcjIScsXG4vLyAgICAgICAgICAgICBjb250ZW50OiBbXG4vLyAgICAgICAgICAgICAgICdMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCcsXG4vLyAgICAgICAgICAgICAgICdpcnVyZSBkb2xvcicsXG4vLyAgICAgICAgICAgICBdLFxuLy8gICAgICAgICAgIH0sXG4vLyAgICAgICAgICAge1xuLy8gICAgICAgICAgICAgbGluazogJyMhJyxcbi8vICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbi8vICAgICAgICAgICAgICAgJ0xvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0Jyxcbi8vICAgICAgICAgICAgICAgJ2lydXJlIGRvbG9yJyxcbi8vICAgICAgICAgICAgIF0sXG4vLyAgICAgICAgICAgfSxcbi8vICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuLy8gICAgICAgICAgICAgY29udGVudDogW1xuLy8gICAgICAgICAgICAgICAnY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdCcsXG4vLyAgICAgICAgICAgICAgICdpbiByZXByZWhlbmRlcml0Jyxcbi8vICAgICAgICAgICAgIF0sXG4vLyAgICAgICAgICAgfSxcbi8vICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuLy8gICAgICAgICAgICAgY29udGVudDogW1xuLy8gICAgICAgICAgICAgICAnc2VkIGRvIGVpdXNtb2QgdGVtcG9yIGluY2lkaWR1bnQnLFxuLy8gICAgICAgICAgICAgICAndm9sdXB0YXRlIHZlbGl0Jyxcbi8vICAgICAgICAgICAgIF0sXG4vLyAgICAgICAgICAgfSxcbi8vICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuLy8gICAgICAgICAgICAgY29udGVudDogW1xuLy8gICAgICAgICAgICAgICAndXQgbGFib3JlIGV0IGRvbG9yZSBtYWduYSBhbGlxdWEnLFxuLy8gICAgICAgICAgICAgICAnZXNzZSBjaWxsdW0gZG9sb3JlJyxcbi8vICAgICAgICAgICAgIF0sXG4vLyAgICAgICAgICAgfSxcbi8vICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuLy8gICAgICAgICAgICAgY29udGVudDogW1xuLy8gICAgICAgICAgICAgICAnVXQgZW5pbSBhZCBtaW5pbSB2ZW5pYW0nLFxuLy8gICAgICAgICAgICAgICAnZXUgZnVnaWF0IG51bGxhJyxcbi8vICAgICAgICAgICAgIF0sXG4vLyAgICAgICAgICAgfSxcbi8vICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuLy8gICAgICAgICAgICAgY29udGVudDogW1xuLy8gICAgICAgICAgICAgICAncXVpcyBub3N0cnVkIGV4ZXJjaXRhdGlvbiB1bGxhbWNvJyxcbi8vICAgICAgICAgICAgICAgJ2V4Y2VwdGV1ciBzaW50IG9jY2FlY2F0Jyxcbi8vICAgICAgICAgICAgIF0sXG4vLyAgICAgICAgICAgfSxcbi8vICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuLy8gICAgICAgICAgICAgY29udGVudDogW1xuLy8gICAgICAgICAgICAgICAnbGFib3JpcyBuaXNpIHV0IGFsaXF1aXAgZXggZWEnLFxuLy8gICAgICAgICAgICAgICAnY3VwaWRhdGF0IG5vbiBwcm9pZGVudCcsXG4vLyAgICAgICAgICAgICBdLFxuLy8gICAgICAgICAgIH0sXG4vLyAgICAgICAgICAge1xuLy8gICAgICAgICAgICAgbGluazogJyMhJyxcbi8vICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbi8vICAgICAgICAgICAgICAgJ2NvbW1vZG8gY29uc2VxdWF0LiBEdWlzIGF1dGUnLFxuLy8gICAgICAgICAgICAgICAncXVpIG9mZmljaWEgZGVzZXJ1bnQnLFxuLy8gICAgICAgICAgICAgXSxcbi8vICAgICAgICAgICB9LFxuLy8gICAgICAgICBdLFxuLy8gICAgICAgICBzdWdnZXN0aW9uc0xpc3Q6IFtcbi8vICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICBjb250ZW50OiAnU2VtIGxpbmsgZSBzZW0gbG9jYXRpb24nLFxuLy8gICAgICAgICAgIH0sXG4vLyAgICAgICAgICAge1xuLy8gICAgICAgICAgICAgbGluazogJyMhJyxcbi8vICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbi8vICAgICAgICAgICAgICAgJ0xvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0Jyxcbi8vICAgICAgICAgICAgICAgJ2lydXJlIGRvbG9yJyxcbi8vICAgICAgICAgICAgIF0sXG4vLyAgICAgICAgICAgfSxcbi8vICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuLy8gICAgICAgICAgICAgY29udGVudDogW1xuLy8gICAgICAgICAgICAgICAnY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdCcsXG4vLyAgICAgICAgICAgICAgICdpbiByZXByZWhlbmRlcml0Jyxcbi8vICAgICAgICAgICAgIF0sXG4vLyAgICAgICAgICAgfSxcbi8vICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuLy8gICAgICAgICAgICAgY29udGVudDogW1xuLy8gICAgICAgICAgICAgICAnc2VkIGRvIGVpdXNtb2QgdGVtcG9yIGluY2lkaWR1bnQnLFxuLy8gICAgICAgICAgICAgICAndm9sdXB0YXRlIHZlbGl0Jyxcbi8vICAgICAgICAgICAgIF0sXG4vLyAgICAgICAgICAgfSxcbi8vICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuLy8gICAgICAgICAgICAgY29udGVudDogW1xuLy8gICAgICAgICAgICAgICAndXQgbGFib3JlIGV0IGRvbG9yZSBtYWduYSBhbGlxdWEnLFxuLy8gICAgICAgICAgICAgICAnZXNzZSBjaWxsdW0gZG9sb3JlJyxcbi8vICAgICAgICAgICAgIF0sXG4vLyAgICAgICAgICAgfSxcbi8vICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuLy8gICAgICAgICAgICAgY29udGVudDogW1xuLy8gICAgICAgICAgICAgICAnVXQgZW5pbSBhZCBtaW5pbSB2ZW5pYW0nLFxuLy8gICAgICAgICAgICAgICAnZXUgZnVnaWF0IG51bGxhJyxcbi8vICAgICAgICAgICAgIF0sXG4vLyAgICAgICAgICAgfSxcbi8vICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuLy8gICAgICAgICAgICAgY29udGVudDogW1xuLy8gICAgICAgICAgICAgICAncXVpcyBub3N0cnVkIGV4ZXJjaXRhdGlvbiB1bGxhbWNvJyxcbi8vICAgICAgICAgICAgICAgJ2V4Y2VwdGV1ciBzaW50IG9jY2FlY2F0Jyxcbi8vICAgICAgICAgICAgIF0sXG4vLyAgICAgICAgICAgfSxcbi8vICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICBsaW5rOiAnIyEnLFxuLy8gICAgICAgICAgICAgY29udGVudDogW1xuLy8gICAgICAgICAgICAgICAnbGFib3JpcyBuaXNpIHV0IGFsaXF1aXAgZXggZWEnLFxuLy8gICAgICAgICAgICAgICAnY3VwaWRhdGF0IG5vbiBwcm9pZGVudCcsXG4vLyAgICAgICAgICAgICBdLFxuLy8gICAgICAgICAgIH0sXG4vLyAgICAgICAgICAge1xuLy8gICAgICAgICAgICAgbGluazogJyMhJyxcbi8vICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbi8vICAgICAgICAgICAgICAgJ2NvbW1vZG8gY29uc2VxdWF0LiBEdWlzIGF1dGUnLFxuLy8gICAgICAgICAgICAgICAncXVpIG9mZmljaWEgZGVzZXJ1bnQnLFxuLy8gICAgICAgICAgICAgXSxcbi8vICAgICAgICAgICB9LFxuLy8gICAgICAgICBdLFxuLy8gICAgICAgfSk7XG4vLyAgICAgICBpbnN0YW5jZS5pbml0KCk7XG4vLyAgICAgICBpbnN0YW5jZXMucHVzaChpbnN0YW5jZSk7XG4vLyAgICAgfSk7XG4vLyAgIH1cbi8vIH07XG4vLyBkZWZhdWx0RXhhbXBsZSgpO1xuLy9cbi8vIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVzY2EnKSkge1xuLy8gICB2YXIgZGlmZmVyZW50Q2xhc3Nlc0V4YW1wbGUgPSBuZXcgQnNTZWFyY2hTdWdnZXN0aW9ucygnLmJzLWF1dG9jb21wbGV0ZScsIHtcbi8vICAgICBzZWFyY2g6ICcuYnVzY2EnLFxuLy8gICAgIC8vIHN1Z2dlc3Rpb25zOiAnLmJzLWF1dG9jb21wbGV0ZScsXG4vLyAgICAgLy8gbGlzdDogJy5icy1zZWFyY2gtc3VnZ2VzdGlvbnNfX2xpc3QnLFxuLy8gICAgIGxpc3Q6ICcuYnMtc2VhcmNoLXN1Z2dlc3Rpb25zX19saXN0Jyxcbi8vICAgICBzdWdnZXN0aW9uc0FjdGl2ZUNsYXNzOiAnYnMtaXMtb3BlbicsXG4vLyAgICAgc3VnZ2VzdGlvbnNMb2FkaW5nQ2xhc3M6ICdicy1pcy1sb2FkaW5nJyxcbi8vICAgICBpdGVtQ2xhc3M6ICdsaScsXG4vLyAgICAgaXRlbXNBY3RpdmVDbGFzczogJ2xpLS1hY3RpdmUnLFxuLy8gICAgIGl0ZW1MaW5rQ2xhc3M6ICdsaW5rJyxcbi8vICAgICBpdGVtVGVybUNsYXNzOiAndGVybScsXG4vLyAgICAgaXRlbVRlcm1UeXBlZENsYXNzOiAndGVybS10eXBlZCcsXG4vLyAgICAgaXRlbUxvY2F0aW9uQ2xhc3M6ICdsb2NhdGlvbicsXG4vLyAgICAgZGVmYXVsdFRpdGxlOiAnJyxcbi8vICAgICBkZWZhdWx0TGlzdDogW1xuLy8gICAgICAge1xuLy8gICAgICAgICB0ZXJtOiAnTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQnLFxuLy8gICAgICAgICBsaW5rOiAnIyEnLFxuLy8gICAgICAgICBsb2NhdGlvbjogJ2lydXJlIGRvbG9yJyxcbi8vICAgICAgIH0sXG4vLyAgICAgICB7XG4vLyAgICAgICAgIHRlcm06ICdjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0Jyxcbi8vICAgICAgICAgbGluazogJyMhJyxcbi8vICAgICAgICAgbG9jYXRpb246ICdpbiByZXByZWhlbmRlcml0Jyxcbi8vICAgICAgIH0sXG4vLyAgICAgICB7XG4vLyAgICAgICAgIHRlcm06ICdzZWQgZG8gZWl1c21vZCB0ZW1wb3IgaW5jaWRpZHVudCcsXG4vLyAgICAgICAgIGxpbms6ICcjIScsXG4vLyAgICAgICAgIGxvY2F0aW9uOiAndm9sdXB0YXRlIHZlbGl0Jyxcbi8vICAgICAgIH0sXG4vLyAgICAgICB7XG4vLyAgICAgICAgIHRlcm06ICd1dCBsYWJvcmUgZXQgZG9sb3JlIG1hZ25hIGFsaXF1YScsXG4vLyAgICAgICAgIGxpbms6ICcjIScsXG4vLyAgICAgICAgIGxvY2F0aW9uOiAnZXNzZSBjaWxsdW0gZG9sb3JlJyxcbi8vICAgICAgIH0sXG4vLyAgICAgICB7XG4vLyAgICAgICAgIHRlcm06ICdVdCBlbmltIGFkIG1pbmltIHZlbmlhbScsXG4vLyAgICAgICAgIGxpbms6ICcjIScsXG4vLyAgICAgICAgIGxvY2F0aW9uOiAnZXUgZnVnaWF0IG51bGxhJyxcbi8vICAgICAgIH0sXG4vLyAgICAgICB7XG4vLyAgICAgICAgIHRlcm06ICdxdWlzIG5vc3RydWQgZXhlcmNpdGF0aW9uIHVsbGFtY28nLFxuLy8gICAgICAgICBsaW5rOiAnIyEnLFxuLy8gICAgICAgICBsb2NhdGlvbjogJ2V4Y2VwdGV1ciBzaW50IG9jY2FlY2F0Jyxcbi8vICAgICAgIH0sXG4vLyAgICAgICB7XG4vLyAgICAgICAgIHRlcm06ICdsYWJvcmlzIG5pc2kgdXQgYWxpcXVpcCBleCBlYScsXG4vLyAgICAgICAgIGxpbms6ICcjIScsXG4vLyAgICAgICAgIGxvY2F0aW9uOiAnY3VwaWRhdGF0IG5vbiBwcm9pZGVudCcsXG4vLyAgICAgICB9LFxuLy8gICAgICAge1xuLy8gICAgICAgICB0ZXJtOiAnY29tbW9kbyBjb25zZXF1YXQuIER1aXMgYXV0ZScsXG4vLyAgICAgICAgIGxpbms6ICcjIScsXG4vLyAgICAgICAgIGxvY2F0aW9uOiAncXVpIG9mZmljaWEgZGVzZXJ1bnQnLFxuLy8gICAgICAgfSxcbi8vICAgICBdLFxuLy8gICAgIHN1Z2dlc3Rpb25zTGlzdDogW1xuLy8gICAgICAge1xuLy8gICAgICAgICB0ZXJtOiAnTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQnLFxuLy8gICAgICAgICBsaW5rOiAnIyEnLFxuLy8gICAgICAgICBsb2NhdGlvbjogJ2lydXJlIGRvbG9yJyxcbi8vICAgICAgIH0sXG4vLyAgICAgICB7XG4vLyAgICAgICAgIHRlcm06ICdjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0Jyxcbi8vICAgICAgICAgbGluazogJyMhJyxcbi8vICAgICAgICAgbG9jYXRpb246ICdpbiByZXByZWhlbmRlcml0Jyxcbi8vICAgICAgIH0sXG4vLyAgICAgICB7XG4vLyAgICAgICAgIHRlcm06ICdzZWQgZG8gZWl1c21vZCB0ZW1wb3IgaW5jaWRpZHVudCcsXG4vLyAgICAgICAgIGxpbms6ICcjIScsXG4vLyAgICAgICAgIGxvY2F0aW9uOiAndm9sdXB0YXRlIHZlbGl0Jyxcbi8vICAgICAgIH0sXG4vLyAgICAgICB7XG4vLyAgICAgICAgIHRlcm06ICd1dCBsYWJvcmUgZXQgZG9sb3JlIG1hZ25hIGFsaXF1YScsXG4vLyAgICAgICAgIGxpbms6ICcjIScsXG4vLyAgICAgICAgIGxvY2F0aW9uOiAnZXNzZSBjaWxsdW0gZG9sb3JlJyxcbi8vICAgICAgIH0sXG4vLyAgICAgICB7XG4vLyAgICAgICAgIHRlcm06ICdVdCBlbmltIGFkIG1pbmltIHZlbmlhbScsXG4vLyAgICAgICAgIGxpbms6ICcjIScsXG4vLyAgICAgICAgIGxvY2F0aW9uOiAnZXUgZnVnaWF0IG51bGxhJyxcbi8vICAgICAgIH0sXG4vLyAgICAgICB7XG4vLyAgICAgICAgIHRlcm06ICdxdWlzIG5vc3RydWQgZXhlcmNpdGF0aW9uIHVsbGFtY28nLFxuLy8gICAgICAgICBsaW5rOiAnIyEnLFxuLy8gICAgICAgICBsb2NhdGlvbjogJ2V4Y2VwdGV1ciBzaW50IG9jY2FlY2F0Jyxcbi8vICAgICAgIH0sXG4vLyAgICAgICB7XG4vLyAgICAgICAgIHRlcm06ICdsYWJvcmlzIG5pc2kgdXQgYWxpcXVpcCBleCBlYScsXG4vLyAgICAgICAgIGxpbms6ICcjIScsXG4vLyAgICAgICAgIGxvY2F0aW9uOiAnY3VwaWRhdGF0IG5vbiBwcm9pZGVudCcsXG4vLyAgICAgICB9LFxuLy8gICAgICAge1xuLy8gICAgICAgICB0ZXJtOiAnY29tbW9kbyBjb25zZXF1YXQuIER1aXMgYXV0ZScsXG4vLyAgICAgICAgIGxpbms6ICcjIScsXG4vLyAgICAgICAgIGxvY2F0aW9uOiAncXVpIG9mZmljaWEgZGVzZXJ1bnQnLFxuLy8gICAgICAgfSxcbi8vICAgICBdLFxuLy8gICB9KTtcbi8vICAgZGlmZmVyZW50Q2xhc3Nlc0V4YW1wbGUuaW5pdCgpO1xuLy8gICAvLyBjb25zb2xlLmxvZyhkaWZmZXJlbnRDbGFzc2VzRXhhbXBsZSk7XG4vLyB9XG4vL1xuLy8gLy8gR2V0IGV4dGVybmFsIGxpc3QgYW5kIHVwZGF0ZSB0aGUgc3RhdGljIGxpc3Qgb2Ygc3VnZ2VzdGlvbnNcbi8vIHZhciBhamF4U3RhdGljRXhhbXBsZSA9IGZ1bmN0aW9uICgpIHtcbi8vICAgdmFyIHN3UGVvcGxlID0gZnVuY3Rpb24gKHBlb3BsZSkge1xuLy8gICAgIHBlb3BsZSA9IEpTT04ucGFyc2UocGVvcGxlKTtcbi8vICAgICB2YXIgbGlzdCA9IHBlb3BsZS5yZXN1bHRzLm1hcChmdW5jdGlvbiAocGVyc29uKSB7XG4vLyAgICAgICByZXR1cm4ge1xuLy8gICAgICAgICB0ZXJtOiBwZXJzb24ubmFtZSxcbi8vICAgICAgICAgdXJsOiBwZXJzb24udXJsLFxuLy8gICAgICAgICBsb2NhdGlvbjogJycsXG4vLyAgICAgICB9O1xuLy8gICAgIH0pO1xuLy9cbi8vICAgICAvLyByZWJ1aWxkXG4vLyAgICAgQnNTZWFyY2hTdWdnZXN0aW9ucy51cGRhdGUobGlzdCk7XG4vLyAgICAgQnNTZWFyY2hTdWdnZXN0aW9ucy5zZXRMb2FkaW5nKGZhbHNlKTtcbi8vICAgfTtcbi8vXG4vLyAgIC8vIGRlc3Ryb3lcbi8vICAgQnNTZWFyY2hTdWdnZXN0aW9ucy5kZXN0cm95KCk7XG4vLyAgIEJzU2VhcmNoU3VnZ2VzdGlvbnMuc2V0TG9hZGluZyh0cnVlKTtcbi8vXG4vLyAgIGh0dHBHZXQoJ2h0dHBzOi8vc3dhcGkuY28vYXBpL3Blb3BsZS8/Zm9ybWF0PWpzb24nLCBzd1Blb3BsZS5iaW5kKCkpO1xuLy8gfTtcbi8vXG4vLyAvLyB1cGRhdGVzIHRoZSBkZWZhdWx0IHVwZGF0ZUxpc3QgZnVuY3Rpb24gdG8gY2FsbCBhamF4IHJlcXVlc3QgZHVyaW5nIGlucHV0IHR5cGluZ1xuLy8gdmFyIGFqYXhPblR5cGVFeGFtcGxlID0gZnVuY3Rpb24gKCkge1xuLy8gICBCc1NlYXJjaFN1Z2dlc3Rpb25zLmN1c3RvbShmdW5jdGlvbiAoKSB7XG4vLyAgICAgYWpheFN0YXRpY0V4YW1wbGUoKTtcbi8vICAgfSk7XG4vLyB9O1xuIiwiLyoqXG4gKiBTbmFja2JhclxuICogaHR0cHM6Ly9naXRodWIuY29tL21hdGVyaWFsLWNvbXBvbmVudHMvbWF0ZXJpYWwtY29tcG9uZW50cy13ZWIvdHJlZS9tYXN0ZXIvcGFja2FnZXMvbWRjLXNuYWNrYmFyXG4gKi9cbnZhciBCc1NuYWNrYmFyID0gKGZ1bmN0aW9uICgpIHtcbiAgLy8gQ29uZmlnXG4gIHZhciBjb25maWcgPSB7XG4gICAgYnV0dG9uczoge1xuICAgICAgdHJpZ2dlcjogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLXRyaWdnZXItc25hY2tiYXInKSxcbiAgICAgIGNsb3NlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtanMtY2xvc2Utc25hY2tiYXInKSxcbiAgICB9LFxuICAgIGNsYXNzZXM6IHtcbiAgICAgIGFsZXJ0OiAnYnMtc25hY2tiYXItLWFsZXJ0JyxcbiAgICAgIHZpc2libGU6ICdicy1zbmFja2Jhci0tdmlzaWJsZScsXG4gICAgfSxcbiAgICBzbmFja2JhcnM6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1zbmFja2JhcicpLFxuICAgIHRpbWVvdXRGbjogbnVsbCxcbiAgICB0aW1lb3V0VGltZTogMjc1MCxcbiAgfTtcblxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoY29uZmlnLmJ1dHRvbnMudHJpZ2dlcikge1xuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuYnV0dG9ucy50cmlnZ2VyLCBmdW5jdGlvbiAoYnV0dG9uKSB7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgc25hY2tiYXJJZCA9IGJ1dHRvbi5kYXRhc2V0LnNuYWNrYmFySWQ7XG4gICAgICAgICAgaWYgKHNuYWNrYmFySWQpIHNob3dTbmFja2JhcihzbmFja2JhcklkKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLnNuYWNrYmFycykge1xuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuc25hY2tiYXJzLCBmdW5jdGlvbiAoc25hY2tiYXIpIHtcbiAgICAgICAgc25hY2tiYXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dChjb25maWcudGltZW91dEZuKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc25hY2tiYXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aW1lb3V0KHNuYWNrYmFyKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHNob3dTbmFja2JhciA9IGZ1bmN0aW9uIChzbmFja2JhcklkKSB7XG4gICAgdmFyIHNuYWNrYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLXNuYWNrYmFyW2RhdGEtc25hY2tiYXItaWQ9XCInICsgc25hY2tiYXJJZCArICdcIl0nKTtcbiAgICB2YXIgaXNWaXNpYmxlID0gc25hY2tiYXIuY2xhc3NMaXN0LmNvbnRhaW5zKGNvbmZpZy5jbGFzc2VzLnZpc2libGUpO1xuXG4gICAgaWYgKCFpc1Zpc2libGUgJiYgc25hY2tiYXIpIHtcbiAgICAgIHNuYWNrYmFyLmNsYXNzTGlzdC5hZGQoY29uZmlnLmNsYXNzZXMudmlzaWJsZSk7XG4gICAgICB0aW1lb3V0KHNuYWNrYmFyKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHRpbWVvdXQgPSBmdW5jdGlvbiAoc25hY2tiYXIpIHtcbiAgICBjb25maWcudGltZW91dEZuID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBoaWRlU25hY2tiYXIoc25hY2tiYXIpO1xuICAgIH0sIGNvbmZpZy50aW1lb3V0VGltZSk7XG4gIH07XG5cbiAgdmFyIGhpZGVTbmFja2JhciA9IGZ1bmN0aW9uIChzbmFja2Jhcikge1xuICAgIHNuYWNrYmFyLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmNsYXNzZXMudmlzaWJsZSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICAgIHNob3c6IHNob3dTbmFja2JhcixcbiAgICBoaWRlOiBoaWRlU25hY2tiYXIsXG4gIH07XG59KCkpO1xuXG4vKipcbiAqIEluaXQgQnNTbmFja2JhciBjb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH0gQnNTbmFja2Jhci5pbml0KCk7XG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtc25hY2tiYXInKS5sZW5ndGgpIHtcbiAgICBCc1NuYWNrYmFyLmluaXQoKTtcbiAgfVxufSk7XG4iLCJ2YXIgQnNTaGFyZSA9IChmdW5jdGlvbigpIHtcblxuICAvLyBDb25maWcgTGlzdCBhbmQgU2VsZWN0XG4gIHZhciBjb25maWcgPSB7XG4gICAgc2hhcmVTb2NpYWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1zb2NpYWwtc2hhcmUnKVxuICB9XG5cbiAgLy8gU3RhcnQgRnVuY3Rpb25zIERvd25sb2FkXG4gIHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5zaGFyZVNvY2lhbCwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICB2YXIgYnV0dG9uU29jaWFsID0gZWwucXVlcnlTZWxlY3RvcignYScpO1xuICAgIFxuICAgICAgYnV0dG9uU29jaWFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyBcbiAgICAgICAgXG4gICAgICAgIHZhciBzb2NpYWxGYWNlYm9vayA9IGJ1dHRvblNvY2lhbC5jbGFzc0xpc3QuY29udGFpbnMoJ2JzLWpzLWZhY2Vib29rJykgPyAnaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3NoYXJlci9zaGFyZXIucGhwP3U9JyA6ICcnO1xuICAgICAgICB2YXIgc29jaWFsVHdpdHRlciA9IGJ1dHRvblNvY2lhbC5jbGFzc0xpc3QuY29udGFpbnMoJ2JzLWpzLXR3aXR0ZXInKSA/ICdodHRwczovL3R3aXR0ZXIuY29tL2ludGVudC90d2VldD91cmw9JyA6ICcnO1xuICAgICAgICB2YXIgc29jaWFsR3BsdXMgPSBidXR0b25Tb2NpYWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdicy1qcy1ncGx1cycpID8gJ2h0dHBzOi8vcGx1cy5nb29nbGUuY29tL3NoYXJlP2FwcD0xMTAmdXJsPScgOiAnJztcbiAgICAgICAgdmFyIHNvY2lhbExpbmtkaW4gPSBidXR0b25Tb2NpYWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdicy1qcy1saW5rZGluJykgPyAnaHR0cHM6Ly93d3cubGlua2VkaW4uY29tL3NoYXJlQXJ0aWNsZT9taW5pPXRydWUmdXJsPScgOiAnJztcbiAgICBcbiAgICAgICAgdmFyIHVybCA9IHNvY2lhbEZhY2Vib29rLmNvbmNhdChzb2NpYWxUd2l0dGVyLCBzb2NpYWxHcGx1cywgc29jaWFsTGlua2Rpbik7XG4gICAgICAgIHZhciBvcGVuV2luZG93ID0gd2luZG93Lm9wZW4odXJsICsgZG9jdW1lbnQuVVJMICAsICdwb3B1cCcsICdoZWlnaHQ9NDUwLHdpZHRoPTM1MCcpO1xuXG4gICAgICAgIGlmIChvcGVuV2luZG93LmZvY3VzKSB7IFxuICAgICAgICAgICAgb3BlbldpbmRvdy5mb2N1cygpOyBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgICAgaW5pdDogaW5pdFxuICB9O1xufSgpKTtcblxuLyoqXG4qIEluaXQgTW9kYWwgQ29uc3RydWN0b3JcbiogQHJldHVybiB7dm9pZH0gSGVhZGVyLmluaXQoKTtcbiovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtc29jaWFsLXNoYXJlJykubGVuZ3RoKSB7XG4gICAgQnNTaGFyZS5pbml0KCk7XG4gIH1cbn0pOyIsInZhciBCc1N0aWNreSA9IChmdW5jdGlvbigpIHtcblxuICB2YXIgcmVmZXJlbmNlTm9kZSA9IG51bGw7XG4gIHZhciBjZmdOYXYgPSB7fTtcbiAgdmFyIGNmZ1NpemUgPSB7fTtcblxuICAvLyBTdGFydCBGdW5jdGlvbnMgTmF2XG4gIHZhciBpbml0ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHZhciBuZXdOb2RlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIG5ld05vZGVDaGlsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHZhciBwYXJlbnROb2RlID0gbnVsbDtcblxuICAgIC8vIENvbmZpZyBuYXYgYW5kIHNpemVzXG4gICAgY2ZnU2l6ZSA9IHtcbiAgICAgIHNldFNpemVXaW5kb3cgOiA3NjgsXG4gICAgICBzZXRNYXJnaW5Ub3AgOiAzMCxcbiAgICAgIHNldFBhcmVudENsYXNzOiAnYnMtanMtYXNpZGUnLFxuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAob3B0aW9ucy5zZXRTaXplV2luZG93KSBjZmdTaXplLnNldFNpemVXaW5kb3cgPSBvcHRpb25zLnNldFNpemVXaW5kb3dcbiAgICAgIGlmIChvcHRpb25zLnNldE1hcmdpblRvcCkgY2ZnU2l6ZS5zZXRNYXJnaW5Ub3AgPSBvcHRpb25zLnNldE1hcmdpblRvcFxuICAgICAgaWYgKG9wdGlvbnMuc2V0UGFyZW50Q2xhc3MpIGNmZ1NpemUuc2V0UGFyZW50Q2xhc3MgPSBvcHRpb25zLnNldFBhcmVudENsYXNzXG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBwYXJlbnQgbm9kZVxuICAgIHJlZmVyZW5jZU5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtanMtc3RpY2t5JylcbiAgICBuZXdOb2RlQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2JzLXN0aWNreScpXG4gICAgaWYgKHJlZmVyZW5jZU5vZGUpIHtcbiAgICAgIHBhcmVudE5vZGUgPSByZWZlcmVuY2VOb2RlLnBhcmVudE5vZGU7XG4gICAgICBpZiAoY2ZnU2l6ZS5zZXRQYXJlbnRDbGFzcyAmJiBnZXRQYXJlbnQocmVmZXJlbmNlTm9kZSwgY2ZnU2l6ZS5zZXRQYXJlbnRDbGFzcykpIHtcbiAgICAgICAgcGFyZW50Tm9kZSA9IGdldFBhcmVudChyZWZlcmVuY2VOb2RlLCBjZmdTaXplLnNldFBhcmVudENsYXNzKTtcbiAgICAgICAgbmV3Tm9kZUNoaWxkID0gcGFyZW50Tm9kZS5jaGlsZHJlblswXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld05vZGVDaGlsZCA9IHJlZmVyZW5jZU5vZGU7XG4gICAgICB9XG4gICAgICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdOb2RlQ29udGFpbmVyLCBuZXdOb2RlQ2hpbGQpO1xuICAgICAgbmV3Tm9kZUNvbnRhaW5lci5hcHBlbmRDaGlsZChuZXdOb2RlQ2hpbGQpO1xuICAgIH1cblxuICAgIGlmIChyZWZlcmVuY2VOb2RlICYmIG5ld05vZGVDb250YWluZXIpIHtcbiAgICAgIGNmZ05hdiA9IHtcbiAgICAgICAgbmF2Rml4IDogbmV3Tm9kZUNoaWxkLFxuICAgICAgICBuYXZGaXhDb250YWluZXIgOiBuZXdOb2RlQ29udGFpbmVyLFxuICAgICAgfTtcbiAgICAgIGNmZ1NpemUubmF2Rml4U3RpY2t5ID0gY2ZnTmF2Lm5hdkZpeC5vZmZzZXRUb3A7XG4gICAgICBjZmdTaXplLm5hdkZpeFN0aWNreUNvbnRhaW5lciA9IGNmZ05hdi5uYXZGaXhDb250YWluZXIub2Zmc2V0VG9wO1xuICAgICAgY2ZnU2l6ZS5uYXZQYXJlbnQgPSBjZmdOYXYubmF2Rml4LnBhcmVudE5vZGU7XG4gICAgfVxuXG4gICAgcmVzaXplSGVhZGVyT25TY3JvbGwoKTtcblxuICAgIC8vIEV4ZWN1dGEgVmVyaWZpY2HDp8OjbyBkZSB0ZWxhIGUgcmV0b3JuYSBmdW7Dp8OjbyBpbmljaWFsXG4gICAgdmlld3BvcnRXaWR0aCgpO1xuICAgIG5hdlNpemVWaWV3KCk7XG5cbiAgICAvLyBFdmVudG8gcGFyYSByZXNpemUgZGUgdmVyaWZpY2HDp8OjbyBkYSB2aWV3cG9ydCBhdGUgdGFtYW5obyBwcmVjaXNvXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZpZXdwb3J0V2lkdGgoKTtcbiAgICAgIG5hdlNpemVWaWV3KCk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHZpZXdwb3J0V2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgY2ZnU2l6ZS52aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xuICB9XG5cbiAgdmFyIG5hdlNpemVWaWV3ID0gZnVuY3Rpb24gKCkge1xuICAgIHZpZXdwb3J0V2lkdGgoKTtcbiAgICBpZiAoY2ZnU2l6ZS52aWV3cG9ydFdpZHRoIDwgY2ZnU2l6ZS5zZXRTaXplV2luZG93KSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgcmVzaXplSGVhZGVyT25TY3JvbGwpO1xuICAgICAgY2ZnTmF2Lm5hdkZpeC5zdHlsZS5jc3NUZXh0ID0gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCByZXNpemVIZWFkZXJPblNjcm9sbCk7XG4gICAgICBjZmdOYXYubmF2Rml4LnN0eWxlLndpZHRoID0gY2ZnU2l6ZS5uYXZQYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKyAncHgnXG4gICAgICByZXNpemVIZWFkZXJPblNjcm9sbCgpO1xuICAgIH1cbiAgfVxuXG4gIHZhciByZXNpemVIZWFkZXJPblNjcm9sbCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gQ29uZmlnIG5hdiBJbnNpZGUgV2l0aCBTY3JvbGxcbiAgICB2YXIgY2ZnSW5zaWRlID0ge1xuICAgICAgLy8gQ2FwdHVyYSBhIGRpc3RhbmNpYSBkbyB0b3BvIGF0w6kgbyBlbGVtZW50byBpbmNpYWwgZGEgZGl2XG4gICAgICBkaXN0YW5jZU9yaWdpbiA6ICh3aW5kb3cucGFnZVlPZmZzZXQgKSxcbiAgICAgIC8vIENhcHR1cmEgZGlzdGFuY2lhcyBzZWxlY2lvbmFkYXMgcGVsYSBmdW7Dp8Ojb1xuICAgICAgdG9wUmVjdEluc2lkZSA6IGNmZ1NpemUubmF2UGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCxcbiAgICAgIGJvdHRvbVJlY3RJbnNpZGUgOiBjZmdTaXplLm5hdlBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20sXG4gICAgICAvLyAgQ2FwdHVyYSBhbHR1cmEgZG8gZWxlbWVudG8gaW50ZXJubyBubyBzY3JvbGxcbiAgICAgIG5hdkhlaWdodEluc2lkZSA6IGNmZ05hdi5uYXZGaXgub2Zmc2V0SGVpZ2h0LFxuICAgICAgd2lkdGhSZWN0SW5zaWRlIDogY2ZnU2l6ZS5uYXZQYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgsXG4gICAgICAvLyBSZWNlYmUgdmFsb3IgZGEgYWx0dXJhIGRhIG5hdmVnYcOnw6NvIGUgZGltaW51aSBwb3IgVGFtYW5obyBkYSBuYXZlZ2HDp8Ojb1xuICAgICAgc2V0SGVhZGVyIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWhlYWRlcicpLFxuICAgICAgc2V0SGVhZGVyUGluIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWhlYWRlci0tcGlubmVkJylcbiAgICB9O1xuXG4gICAgLy8gQWx0dXJhIGRvIHN0aWNrIHBhaVxuICAgIHZhciBjZmdSZWN0ID0ge1xuICAgICAgaGVpZ2h0UmVjdE91dCA6IGNmZ1NpemUubmF2UGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodFxuICAgIH1cblxuICAgIC8vIENhbGN1bG9zIHBhcmEgZGltZW5zaW9uYXIgcG9zacOnw6NvIGRhIG5hdiBlbSByZWxhw6fDo28gYSBwYWdpbmEgZSBhbyBtZW51IGZpeG9cbiAgICB2YXIgY2ZnQ2FsYyA9IHtcbiAgICAgIC8vIEFkaWNpb25hIG1hcmdlbSBhIHBvc2nDp8OjbyBwYXJhIGZpY2FyIGZpeGEgbm8gcm9kYXDDqSBkbyBlbGVtZW50byBwYWlcbiAgICAgIG5hdkhlaWdodENvbnRlbnQgOiBjZmdSZWN0LmhlaWdodFJlY3RPdXQgLSBjZmdJbnNpZGUubmF2SGVpZ2h0SW5zaWRlLFxuICAgICAgLy8gZGVzY29udGEgdGFtYW5obyBkbyBib3ggcGFyYSBpbmljaWFyIGFjaW1hIGRvIGhlYWRlciBwaW4gc2UgZXhpc3RpclxuICAgICAgbmF2SGVpZ2h0SW5zaWRlIDogY2ZnSW5zaWRlLmJvdHRvbVJlY3RJbnNpZGUgLSBjZmdJbnNpZGUubmF2SGVpZ2h0SW5zaWRlLFxuICAgICAgZGlzdGFuY2VSZWxhdGl2ZU9yaWdpbiA6IChjZmdJbnNpZGUuZGlzdGFuY2VPcmlnaW4pXG4gICAgfTtcblxuICAgIHZhciBkb3duU3RhdGljID0gZnVuY3Rpb24oKSB7XG4gICAgICBjZmdOYXYubmF2Rml4LnN0eWxlLnRyYW5zaXRpb24gPSAnMHMnO1xuICAgICAgY2ZnTmF2Lm5hdkZpeC5zdHlsZS5wb3NpdGlvbiA9ICdzdGF0aWMnO1xuICAgICAgY2ZnTmF2Lm5hdkZpeC5zdHlsZS50b3AgPSAnMzBweCc7XG4gICAgfVxuICAgIHZhciBkb3duRml4ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGNmZ05hdi5uYXZGaXguc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgY2ZnTmF2Lm5hdkZpeC5zdHlsZS50cmFuc2l0aW9uID0gJy4zcyc7XG4gICAgICBjZmdOYXYubmF2Rml4LnN0eWxlLnRvcCA9IGNmZ1NpemUuc2V0TWFyZ2luVG9wICsgJ3B4JztcbiAgICB9XG4gICAgdmFyIGRvd25SZWxhdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgY2ZnTmF2Lm5hdkZpeC5zdHlsZS50cmFuc2l0aW9uID0gJzBzJztcbiAgICAgIGNmZ05hdi5uYXZGaXguc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgY2ZnTmF2Lm5hdkZpeC5zdHlsZS50b3AgPSBjZmdDYWxjLm5hdkhlaWdodENvbnRlbnQgKyAncHgnO1xuICAgICAgY2ZnTmF2Lm5hdkZpeC5zdHlsZS50cmFuc2l0aW9uID0gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgdXBTdGF0aWMgPSBmdW5jdGlvbigpIHtcbiAgICAgIGNmZ05hdi5uYXZGaXguc3R5bGUudHJhbnNpdGlvbiA9ICcwcyc7XG4gICAgICBjZmdOYXYubmF2Rml4LnN0eWxlLnBvc2l0aW9uID0gJ3N0YXRpYyc7XG4gICAgICBjZmdOYXYubmF2Rml4LnN0eWxlLnRvcCA9ICczMHB4JztcbiAgICB9XG4gICAgdmFyIHVwRml4ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGNmZ05hdi5uYXZGaXguc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgY2ZnTmF2Lm5hdkZpeC5zdHlsZS50b3AgPSBjZmdTZXRIZWFkZXIuaGVhZGVyT3JpZ2luICsgMzAgKydweCc7XG4gICAgfVxuICAgIHZhciB1cFJlbGF0aXZlID0gZnVuY3Rpb24oKSB7XG4gICAgICBjZmdOYXYubmF2Rml4LnN0eWxlLnRyYW5zaXRpb24gPSAnMHMnO1xuICAgICAgY2ZnTmF2Lm5hdkZpeC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICBjZmdOYXYubmF2Rml4LnN0eWxlLnRvcCA9IGNmZ0NhbGMubmF2SGVpZ2h0Q29udGVudCArICdweCc7XG4gICAgfVxuXG5cbiAgICBpZiAoY2ZnSW5zaWRlLnNldEhlYWRlcikge1xuICAgICAgLy8gQ2FsY3Vsb3MgcGFyYSBkaW1lbnNpb25hciBwb3Npw6fDo28gZGEgbmF2IGVtIHJlbGHDp8OjbyBhIHBhZ2luYSBlIGFvIG1lbnUgZml4b1xuICAgICAgY2ZnU2V0SGVhZGVyID0ge1xuICAgICAgICBoZWFkZXJPcmlnaW4gOiAoY2ZnSW5zaWRlLnNldEhlYWRlci5vZmZzZXRIZWlnaHQpXG4gICAgICB9XG4gICAgICAvLyBjZmdJbnNpZGUuZGlzdGFuY2VPcmlnaW4gLT0gY2ZnU2V0SGVhZGVyLmhlYWRlck9yaWdpbjtcbiAgICAgIGNvbnNvbGUubG9nKCdkaXN0YW5jZU9yaWdpbjogJywgY2ZnSW5zaWRlLmRpc3RhbmNlT3JpZ2luKTtcbiAgICB9XG5cbiAgICAvLyByZWNhbGN1bGEgb2Zmc2V0VG9wIGJzLWpzLXN0aWNrXG4gICAgY2ZnU2l6ZS5uYXZGaXhTdGlja3kgPSBjZmdOYXYubmF2Rml4Lm9mZnNldFRvcDtcbiAgICAvLyByZWNhbGN1bGEgb2Zmc2V0VG9wIGRvIGZpbGhvXG4gICAgY2ZnU2l6ZS5uYXZGaXhTdGlja3lDb250YWluZXIgPSBjZmdOYXYubmF2Rml4Q29udGFpbmVyLm9mZnNldFRvcDtcbiAgICAvLyBBZGljaW9uYSBUYW1hbmhvIE9yaWdpbmFsIGRhIGRpdiBQYWlcbiAgICBjZmdOYXYubmF2Rml4LnN0eWxlLndpZHRoID0gY2ZnSW5zaWRlLndpZHRoUmVjdEluc2lkZSArICdweCdcbiAgICAvLyBBdHVhbGl6YSBtYXJnZW0gYSBwb3Npw6fDo28gcGFyYSBmaWNhciBmaXhhIG5vIHJvZGFww6kgZG8gZWxlbWVudG8gcGFpXG5cbiAgICAvLyBTZSB0aXZlciBoZWFkZXIgY29tIHBpblxuICAgIGlmIChjZmdJbnNpZGUuc2V0SGVhZGVyUGluKSB7XG4gICAgICAvLyBOYXZlZ2HDp8OjbyBTZSBmaW5hbCBkbyBlbGVtZW50byBmaXhhIHJlbGF0aXZvXG4gICAgICAvLyBFbnF1YW50byBzb2JlIG8gZXN0YXRpY28gbm8gdG9wb1xuICAgICAgY29uc29sZS5sb2coJ2NmZ0NhbGMubmF2SGVpZ2h0SW5zaWRlOiAnLCBjZmdDYWxjLm5hdkhlaWdodEluc2lkZSk7XG4gICAgICBjb25zb2xlLmxvZygnY2ZnU2V0SGVhZGVyLmhlYWRlck9yaWdpbjogJywgY2ZnU2V0SGVhZGVyLmhlYWRlck9yaWdpbik7XG4gICAgICBjb25zb2xlLmxvZygnY2ZnQ2FsYy5kaXN0YW5jZVJlbGF0aXZlT3JpZ2luOiAnLCBjZmdDYWxjLmRpc3RhbmNlUmVsYXRpdmVPcmlnaW4pO1xuICAgICAgY29uc29sZS5sb2coJ2NmZ1NpemUubmF2Rml4U3RpY2t5Q29udGFpbmVyOiAnLCBjZmdTaXplLm5hdkZpeFN0aWNreUNvbnRhaW5lcik7XG4gICAgICBpZiAoY2ZnQ2FsYy5uYXZIZWlnaHRJbnNpZGUgLSAzMCA8IChjZmdTZXRIZWFkZXIuaGVhZGVyT3JpZ2luKSkge1xuICAgICAgICBjb25zb2xlLmxvZygndXBSZWxhdGl2ZSgpJyk7XG4gICAgICAgIHVwUmVsYXRpdmUoKVxuICAgICAgfSBlbHNlIGlmKCgoY2ZnQ2FsYy5kaXN0YW5jZVJlbGF0aXZlT3JpZ2luICsgMzApICsgY2ZnU2V0SGVhZGVyLmhlYWRlck9yaWdpbikgPCAoY2ZnU2l6ZS5uYXZGaXhTdGlja3lDb250YWluZXIgKSkge1xuICAgICAgICBjb25zb2xlLmxvZygndXBTdGF0aWMoKScpO1xuICAgICAgICB1cFN0YXRpYygpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygndXBGaXhlZCgpJyk7XG4gICAgICAgIHVwRml4ZWQoKVxuICAgICAgfVxuXG4gICAgLy8gU2UgdGl2ZXIgaGVhZGVyIHNlbSBwaW5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTmF2ZWdhw6fDo28gU2UgZmluYWwgZG8gZWxlbWVudG8gZml4YSByZWxhdGl2b1xuICAgICAgLy8gUXVhbmRvIHBhcmEgbm8gYm90dG9tIGRvIHBhaVxuICAgICAgaWYgKGNmZ0NhbGMubmF2SGVpZ2h0SW5zaWRlIDwgY2ZnU2l6ZS5zZXRNYXJnaW5Ub3ApIHtcbiAgICAgICAgZG93blJlbGF0aXZlKClcbiAgICAgIH1cbiAgICAgIC8vLSBBbHR1cmEgUmVsYXRpdmEgZG8gTmF2ICdzZScgTWFpb3IgcXVlICdBbHR1cmEgZG8gTWVudSdcbiAgICAgIC8vIEZpeGEgbm8gdG9wIGEgbmF2ZWdhw6fDo29cbiAgICAgIGVsc2UgaWYoKChjZmdJbnNpZGUuZGlzdGFuY2VPcmlnaW4gKyAzMCkgPiAoY2ZnU2l6ZS5uYXZGaXhTdGlja3lDb250YWluZXIpKSkge1xuICAgICAgICBkb3duRml4ZWQoKVxuICAgICAgfVxuICAgICAgLy8gRGlzdGFuY2lhIGF0ZSBhIGFsdHVyYSBkbyBzY3JvbGwgcmVsYXRpdm8gYW8gYWx0dXJhIGZpeGEgZG8gbWFyZ2luIHRvcFxuICAgICAgLy8gLSBFbnF1YW50byBlc3RhdGljbyBuYSBwYWdpbmEgYW50ZXMgZGUgZml4YXIgbm8gdG9wb1xuICAgICAgZWxzZSBpZihjZmdDYWxjLmRpc3RhbmNlUmVsYXRpdmVPcmlnaW4gPCBjZmdTaXplLm5hdkZpeFN0aWNreUNvbnRhaW5lcikge1xuICAgICAgICBkb3duU3RhdGljKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgICAgaW5pdDogaW5pdCxcbiAgICAgIGxvYWQ6IHJlc2l6ZUhlYWRlck9uU2Nyb2xsLFxuICB9O1xufSgpKTtcblxuLyoqXG4qIEluaXQgTW9kYWwgQ29uc3RydWN0b3JcbiogQHJldHVybiB7dm9pZH0gSGVhZGVyLmluaXQoKTtcbiovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtc3RpY2t5JykubGVuZ3RoKSB7XG4gICAgQnNTdGlja3kuaW5pdCgpO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcbiAgICAgIEJzU3RpY2t5LmxvYWQoKTtcbiAgICB9KTtcbiAgfVxufSk7XG4iLCIvKipcbiAqIFRhYmVsYSBkZSBSZXN1bHRhZG8gZGUgU29ydGVpb3NcbiAqIFBvZGUgZXhwYW5kaXIgbGluaGFzIHBhcmEgZXhpYmlyIHVtIGNvbnRlw7pkbyBtYWlvclxuICpcbiAqL1xudmFyIEJzVGFibGVDb2xsYXBzaWJsZSA9IChmdW5jdGlvbiAoKSB7XG4gIC8vIENvbmZpZ1xuICB2YXIgY29uZmlnID0ge1xuICAgIHRhYmxlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtdGFibGUtLWNvbGxhcHNpYmxlJyksXG4gICAgYnV0dG9uczoge1xuICAgICAgdHJpZ2dlcjogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLXRyaWdnZXItY29sbGFwc2libGUnKSxcbiAgICAgIHNvcnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy1zb3J0LWNvbGxhcHNpYmxlJyksXG4gICAgfSxcbiAgICB0YWJsZUZpbHRlclNlbGVjdDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLWpzLWZpbHRlci10YWJsZS1jb2xsYXBzaWJsZS1pdGVtcycpLFxuICAgIHRhYmxlUm93czogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLXRhYmxlX19yb3cnKSxcbiAgICB0YWJsZUl0ZW1zOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtdGFibGUtY29sbGFwc2libGUtaXRlbScpLFxuICAgIGNsYXNzZXM6IHtcbiAgICAgIHJvd0NvbGxhcHNlZDogJ2JzLXRhYmxlX19yb3ctLWNvbGxhcHNlZCcsXG4gICAgICB0YWJsZVJvdzogJ2JzLXRhYmxlX19yb3cnLFxuICAgICAgcm93QWN0aXZlOiAnYnMtdGFibGVfX3Jvdy0tYWN0aXZlJyxcbiAgICAgIHRhYmxlSGFzRmlsdGVyOiAnYnMtaGFzLWZpbHRlcicsXG4gICAgfSxcbiAgfTtcblxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoY29uZmlnLmJ1dHRvbnMudHJpZ2dlcikge1xuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjb25maWcuYnV0dG9ucy50cmlnZ2VyLCBmdW5jdGlvbiAoYnV0dG9uKSB7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0b2dnbGVSb3coYnV0dG9uKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLnRhYmxlKSB7XG4gICAgICBCc1RhYmxlU29ydC5pbml0KGNvbmZpZy50YWJsZS5xdWVyeVNlbGVjdG9yKCd0YWJsZScpKTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLnRhYmxlRmlsdGVyU2VsZWN0KSB7XG4gICAgICBjb25maWcudGFibGVGaWx0ZXJTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIHZhciBpZCA9IGV2LnRhcmdldC52YWx1ZTtcbiAgICAgICAgZmlsdGVySXRlbXMoaWQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBmaWx0ZXJJdGVtcyA9IGZ1bmN0aW9uIChmaWx0ZXJJZCkge1xuICAgIHZhciBhY3RpdmVJdGVtO1xuICAgIHZhciBhY3RpdmVJdGVtUm93ID0gJyc7XG4gICAgdmFyIGN1cnJlbnRBY3RpdmVSb3cgPSBjb25maWcudGFibGUucXVlcnlTZWxlY3RvcignLicgKyBjb25maWcuY2xhc3Nlcy5yb3dBY3RpdmUpO1xuXG4gICAgaWYgKHR5cGVvZiBmaWx0ZXJJZCAhPT0gJ3N0cmluZycpIHJldHVybjtcblxuICAgIGFjdGl2ZUl0ZW0gPSBjb25maWcudGFibGUucXVlcnlTZWxlY3RvcignLmJzLWpzLXRhYmxlLWNvbGxhcHNpYmxlLWl0ZW1bZGF0YS1pdGVtLWlkPVwiJyArIGZpbHRlcklkICsgJ1wiXScpO1xuICAgIGFjdGl2ZUl0ZW1Sb3cgPSBnZXRQYXJlbnQoYWN0aXZlSXRlbSwgJ2JzLXRhYmxlX19yb3cnKTtcblxuICAgIGlmIChjdXJyZW50QWN0aXZlUm93KSBjdXJyZW50QWN0aXZlUm93LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmNsYXNzZXMucm93QWN0aXZlKTtcblxuICAgIGlmIChmaWx0ZXJJZCA9PT0gJycpIHtcbiAgICAgIGNvbmZpZy50YWJsZS5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5jbGFzc2VzLnRhYmxlSGFzRmlsdGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uZmlnLnRhYmxlLmNsYXNzTGlzdC5hZGQoY29uZmlnLmNsYXNzZXMudGFibGVIYXNGaWx0ZXIpO1xuICAgICAgYWN0aXZlSXRlbVJvdy5jbGFzc0xpc3QuYWRkKGNvbmZpZy5jbGFzc2VzLnJvd0FjdGl2ZSk7XG4gICAgfVxuICB9O1xuXG5cbiAgdmFyIHRvZ2dsZVJvdyA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgdmFyIHJvdyA9IGdldFJvdyhlbGVtZW50KTtcblxuICAgIGlmIChyb3cgJiYgcm93LmNsYXNzTGlzdC5jb250YWlucyhjb25maWcuY2xhc3Nlcy5yb3dDb2xsYXBzZWQpKSB7XG4gICAgICByb3cuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuY2xhc3Nlcy5yb3dDb2xsYXBzZWQpO1xuICAgIH0gZWxzZSBpZiAoIXJvdy5jbGFzc0xpc3QuY29udGFpbnMoY29uZmlnLmNsYXNzZXMucm93Q29sbGFwc2VkKSkge1xuICAgICAgcm93LmNsYXNzTGlzdC5hZGQoY29uZmlnLmNsYXNzZXMucm93Q29sbGFwc2VkKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGdldFJvdyA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgcmV0dXJuIGdldFBhcmVudHMoZWxlbWVudCwgY29uZmlnLmNsYXNzZXMudGFibGVSb3cpWzBdO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdCxcbiAgfTtcbn0oKSk7XG5cbi8qKlxuICogSW5pdCBCc1RhYmxlQ29sbGFwc2libGUgY29uc3RydWN0b3JcbiAqIEByZXR1cm4ge3ZvaWR9IEJzVGFibGVDb2xsYXBzaWJsZS5pbml0KCk7XG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtdGFibGUtLWNvbGxhcHNpYmxlJykpIHtcbiAgICBCc1RhYmxlQ29sbGFwc2libGUuaW5pdCgpO1xuICB9XG59KTtcbiIsIi8qKlxuICogVGFic1xuICogR3VpYXMgKHRhYnMpIG9yZ2FuaXphbSBlIHBlcm1pdGVtIGEgbmF2ZWdhw6fDo28gZW50cmUgZ3J1cG9zIGRlIGNvbnRlw7pkb1xuICogcXVlIGVzdMOjbyByZWxhY2lvbmFkb3MgZSBwb3NzdWVtIG8gbWVzbW8gbsOtdmVsIGRlIGhpZXJhcnF1aWEuXG4gKlxuICogUmVmZXJlbmNlczpcbiAqIC0gaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLXByYWN0aWNlcy9leGFtcGxlcy90YWJzL3RhYnMtMS90YWJzLmh0bWxcbiAqIC0gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vam9uYXRoYW50bmVhbC80MzU0NzhlNDE1YmZlNGY1NGQwNlxuICogLSBodHRwczovL2NvZHlob3VzZS5jby9nZW0vcmVzcG9uc2l2ZS10YWJiZWQtbmF2aWdhdGlvbi9cbiAqIC0gaHR0cHM6Ly91eHBsYW5ldC5vcmcvdGFicy1mb3ItbW9iaWxlLXV4LWRlc2lnbi1kNGNjNGQ5NDEwZDFcbiAqIC0gaHR0cHM6Ly93d3cubm5ncm91cC5jb20vYXJ0aWNsZXMvdGFicy11c2VkLXJpZ2h0L1xuICogLSBodHRwczovL21hdGVyaWFsLmlvL2Rlc2lnbi9jb21wb25lbnRzL3RhYnMuaHRtbCNzdGF0ZXNcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IHRoZSBtb2R1bGUgbWV0aG9kc1xuICovXG52YXIgQnNUYWJzID0gZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQ29uZmlnIG9iamVjdFxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgdmFyIGNvbmZpZyA9IHt9O1xuXG4gIC8qKlxuICAgKiBTZXQgQ29uZmlnXG4gICAqIEBwYXJhbSAge09iamVjdH0gZWwgYSBET00gZWxlbWVudFxuICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgIG1vZHVsZSdzIGNvbmZpZyBvYmplY3RcbiAgICovXG4gIHZhciBzZXRDb25maWcgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGFiczogZWwsXG4gICAgICBsaXN0OiBlbC5xdWVyeVNlbGVjdG9yKCcuYnMtdGFic19fbGlzdCcpLFxuICAgICAgaXRlbXM6IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy10YWJzX19saW5rJyksXG4gICAgICBwYW5lbDogZWwucXVlcnlTZWxlY3RvcignLmJzLXRhYnNfX3BhbmVsLWl0ZW1zJyksXG4gICAgICBwYW5lbENvbnRlbnQ6IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy10YWJzX19jb250ZW50JyksXG4gICAgICBwYW5lbFNsaWRlcjogZWwucXVlcnlTZWxlY3RvcignLmJzLWpzLXBhbmVsLXNsaWRlcicpLFxuICAgICAgYXJyb3dzOiBlbC5xdWVyeVNlbGVjdG9yKCcuYnMtdGFic19fYXJyb3dzJyksXG4gICAgICBidXR0b25QcmV2OiBlbC5xdWVyeVNlbGVjdG9yKCcuYnMtdGFic19fYXJyb3ctcHJldicpLFxuICAgICAgYnV0dG9uTmV4dDogZWwucXVlcnlTZWxlY3RvcignLmJzLXRhYnNfX2Fycm93LW5leHQnKSxcbiAgICAgIGNsYXNzZXM6IHtcbiAgICAgICAgY29udGVudEFjdGl2ZTogJ2JzLXRhYnNfX2NvbnRlbnQtLWFjdGl2ZScsXG4gICAgICAgIHRhYkFjdGl2ZTogJ2JzLWlzLWFjdGl2ZScsXG4gICAgICB9LFxuICAgICAgZmxrdHlUYWJzOiBudWxsLFxuICAgICAgZmxrdHlQYW5lbDogbnVsbCxcbiAgICAgIHNlbGVjdFRhYk9uUmVhZHk6IHRydWUsXG4gICAgfTtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdCBtb2R1bGVcbiAgICogQHBhcmFtICB7T2JqZWN0fSBlbGVtIGEgRE9NIGVsZW1lbnRcbiAgICovXG4gIHZhciBpbml0ID0gZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAvLyByZXR1cm4gaWYgdGhlcmUncyBub3QgYW4gZWxlbWVudFxuICAgIGlmICghZWxlbSB8fCB0eXBlb2YgZWxlbSAhPT0gJ29iamVjdCcpIHJldHVybjtcbiAgICAvLyBwYXNzIGVsZW0gdG8gc2V0IGNvbmZpZ1xuICAgIGNvbmZpZyA9IHNldENvbmZpZyhlbGVtKTtcblxuICAgIC8vIFJlbW92ZSB0YWIgaWYgdGhlcmUncyBvbmx5IG9uZVxuICAgIGlmIChjb25maWcuaXRlbXMubGVuZ3RoIDwgMikge1xuICAgICAgY29uZmlnLnRhYnMuY2xhc3NMaXN0LmFkZCgnYnMtdGFicy0tcmVtb3ZlLXRhYicpO1xuICAgIH1cblxuICAgIGRlYm91bmNlKGJ1aWxkU2xpZGVyKCkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBCdWlsZCBTbGlkZXJcbiAgICogU2xpZGVycyBmb3IgdGFicyBhbmQgY29udGVudFxuICAgKi9cbiAgdmFyIGJ1aWxkU2xpZGVyID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIEluaXQgYSB0b2dnbGVDb250ZW50XG4gICAgdmFyIGNvbnRlbnRUb2dnbGVyID0gbmV3IEJzVG9nZ2xlQ29udGVudCgpO1xuXG4gICAgLy8gU2V0IHRoZSB0YWJzIHNsaWRlclxuICAgIGNvbmZpZy5mbGt0eVRhYnMgPSBuZXcgRmxpY2tpdHkoY29uZmlnLmxpc3QsIHtcbiAgICAgIC8vIGFkZCBwYW5lbCBhc05hdkZvciBpZiBpdCdzIGRlZmluZWQgYXMgc2xpZGVyXG4gICAgICBhc05hdkZvcjogY29uZmlnLnBhbmVsU2xpZGVyIHx8IGZhbHNlLFxuICAgICAgY2VsbEFsaWduOiAnbGVmdCcsXG4gICAgICBhZGFwdGl2ZUhlaWdodDogdHJ1ZSxcbiAgICAgIHBhZ2VEb3RzOiBmYWxzZSxcbiAgICAgIHByZXZOZXh0QnV0dG9uczogZmFsc2UsXG4gICAgICBjb250YWluOiB0cnVlLFxuICAgICAgZ3JvdXBDZWxsczogdHJ1ZSxcbiAgICAgIG9uOiB7XG4gICAgICAgIHJlYWR5OiBvblRhYnNSZWFkeSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBpZiBwYW5lbCdzIGRlZmluZWQgYXMgc2xpZGVyXG4gICAgaWYgKGNvbmZpZy5wYW5lbFNsaWRlcikge1xuICAgICAgLy8gU2V0IHRoZSBwYW5lbCBzbGlkZXJcbiAgICAgIGNvbmZpZy5mbGt0eVBhbmVsID0gbmV3IEZsaWNraXR5KGNvbmZpZy5wYW5lbFNsaWRlciwge1xuICAgICAgICBwYWdlRG90czogZmFsc2UsXG4gICAgICAgIGNlbGxBbGlnbjogJ2xlZnQnLFxuICAgICAgICBhZGFwdGl2ZUhlaWdodDogdHJ1ZSxcbiAgICAgICAgcHJldk5leHRCdXR0b25zOiBmYWxzZSxcbiAgICAgICAgb246IHtcbiAgICAgICAgICByZWFkeTogb25UYWJzUmVhZHksXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5pdGVtcyAmJiBjb25maWcucGFuZWxDb250ZW50KSB7XG4gICAgICAvLyBzZXQgY29udGVudCB0b2dnbGVyXG4gICAgICBvcHRpb25zID0ge1xuICAgICAgICBidXR0b25zOiBjb25maWcuaXRlbXMsXG4gICAgICAgIGNvbnRhaW5lcnM6IGNvbmZpZy5wYW5lbENvbnRlbnQsXG4gICAgICAgIGFjdGl2ZUJ1dHRvbkNsYXNzOiBjb25maWcuY2xhc3Nlcy50YWJBY3RpdmUsXG4gICAgICAgIGFjdGl2ZUNvbnRhaW5lckNsYXNzOiBjb25maWcuY2xhc3Nlcy5jb250ZW50QWN0aXZlLFxuICAgICAgICBtZXRob2Q6ICdjbGljaycsXG4gICAgICB9O1xuICAgICAgY29udGVudFRvZ2dsZXIuaW5pdChvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvLyBPbiBUYWJzIHNlbGVjdFxuICAgIGNvbmZpZy5mbGt0eVRhYnMub24oJ3NlbGVjdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIHZpZXdwb3J0J3Mgd2lkdGggb2YgdGhlIHRhYnMgY29udGFpbmVyXG4gICAgICB2YXIgb2ZmU2V0ID0gY29uZmlnLnRhYnMub2Zmc2V0V2lkdGg7XG5cbiAgICAgIC8vIHN1bSBvZiB0aGUgZWFjaCB0YWIncyB3aWR0aFxuICAgICAgdmFyIHRvdGFsUmVkdWNlID0gQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKGNvbmZpZy5pdGVtcywgZnVuY3Rpb24gKHdpZHRoLCBlbCkge1xuICAgICAgICB3aWR0aCArPSBlbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgcmV0dXJuIHdpZHRoO1xuICAgICAgfSwgMCk7XG5cbiAgICAgIHZhciBjZWxscyA9IGNvbmZpZy5mbGt0eVRhYnMuY2VsbHM7XG4gICAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IGNvbmZpZy5mbGt0eVRhYnMuc2VsZWN0ZWRJbmRleDtcblxuICAgICAgLy8gaWYgdGhlIGZpcnN0IGdyb3VwIG9mIHRhYnMgaXMgc2VsZWN0ZWRcbiAgICAgIGlmICghY2VsbHNbc2VsZWN0ZWRJbmRleCAtIDFdKSB7XG4gICAgICAgIC8vIGRpc2FibGUgcHJldmlvdXMgYnV0dG9uIG9uIGhvdmVyXG4gICAgICAgIGNvbmZpZy5idXR0b25QcmV2LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgY29uZmlnLnRhYnMuY2xhc3NMaXN0LnJlbW92ZSgnYnMtdGFicy0tb3Zlci1wcmV2Jyk7XG5cbiAgICAgICAgLy8gaWYgdmlld3BvcnQgb2Zmc2V0IGlzIGxlc3MgdGhhbiB0aGUgc3VtIG9mIGVhY2ggdGFiJ3Mgd2lkdGhcbiAgICAgICAgaWYgKG9mZlNldCA8IHRvdGFsUmVkdWNlKSB7XG4gICAgICAgICAgLy8gc2hvdyBhcnJvd3NcbiAgICAgICAgICBjb25maWcuYXJyb3dzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgIC8vIGVuYWJsZSBuZXh0IGJ1dHRvbiBvbiBob3ZlclxuICAgICAgICAgIGNvbmZpZy5idXR0b25OZXh0LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgICBjb25maWcudGFicy5jbGFzc0xpc3QuYWRkKCdicy10YWJzLS1vdmVyLW5leHQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBoaWRlIGFycm93c1xuICAgICAgICAgIGNvbmZpZy5hcnJvd3Muc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuXG4gICAgICAvLyBpZiB0aGUgZ3JvdXAgb2YgdGFicyBzZWxlY3RlZCBpcyBub3QgdGhlIGZpcnN0XG4gICAgICB9IGVsc2UgaWYgKCFjZWxsc1tjZWxscy5sZW5ndGhdKSB7XG4gICAgICAgIC8vIHNob3cgYXJyb3dzXG4gICAgICAgIGNvbmZpZy5hcnJvd3Muc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIC8vIGVuYWJsZSBwcmV2aW91cyBidXR0b25cbiAgICAgICAgY29uZmlnLmJ1dHRvblByZXYucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICBjb25maWcudGFicy5jbGFzc0xpc3QuYWRkKCdicy10YWJzLS1vdmVyLXByZXYnKTtcblxuICAgICAgICAvLyBpZiB0aGUgbGFzdCBncm91cCBvZiB0YWJzIGlzIHNlbGVjdGVkXG4gICAgICAgIGlmIChzZWxlY3RlZEluZGV4ID09PSAoY29uZmlnLmZsa3R5VGFicy5wYWdlRG90cy5kb3RzLmxlbmd0aCAtIDEpKSB7XG4gICAgICAgICAgLy8gZGlzYWJsZSBwcmV2aW91cyBidXR0b25cbiAgICAgICAgICBjb25maWcuYnV0dG9uTmV4dC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgY29uZmlnLnRhYnMuY2xhc3NMaXN0LnJlbW92ZSgnYnMtdGFicy0tb3Zlci1uZXh0Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gZW5hYmxlIG5leHQgYnV0dG9uXG4gICAgICAgICAgY29uZmlnLmJ1dHRvbk5leHQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAgIGNvbmZpZy50YWJzLmNsYXNzTGlzdC5hZGQoJ2JzLXRhYnMtLW92ZXItbmV4dCcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25maWcuYXJyb3dzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25maWcuZmxrdHlUYWJzLnJlc2l6ZSgpO1xuXG4gICAgY29uZmlnLmJ1dHRvblByZXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25maWcuZmxrdHlUYWJzLnByZXZpb3VzKCk7XG4gICAgfSk7XG4gICAgY29uZmlnLmJ1dHRvbk5leHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25maWcuZmxrdHlUYWJzLm5leHQoKTtcbiAgICB9KTtcblxuICAgIC8vIHJlbW92ZSBwcsOpIHN0eWxlIGRlZmF1bHRcbiAgICBjb25maWcubGlzdC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgfTtcblxuICAvKipcbiAgICogT24gVGFicyBTbGlkZXIncyBSZWFkeVxuICAgKiBUbyBydW4gd2hlbiB0YWIgc2xpZGVyIChmbGlja2l0eSkgaXMgcmVhZHlcbiAgICovXG4gIHZhciBvblRhYnNSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoY29uZmlnLnNlbGVjdFRhYk9uUmVhZHkpIHNldFRpbWVvdXQoc2VsZWN0VGFiT25SZWFkeSwgMTAwKTtcbiAgfTtcblxuICAvKipcbiAgICogU2VsZWN0IFRhYiBPblJlYWR5XG4gICAqIENoZWNrIGlmIHRoZXJlJ3MgYSBoYXNoIG9uIFVSTCBhbmQgaWYgaXQgbWF0Y2ggYW4gdGFiIElEXG4gICAqL1xuICB2YXIgc2VsZWN0VGFiT25SZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaW5kZXggPSAtMTtcbiAgICB2YXIgdGFiID0gbnVsbDtcbiAgICB2YXIgaGFzaCA9IGdldEhhc2hBc0lkRnJvbVVybFN0cmluZyh3aW5kb3cubG9jYXRpb24uaGFzaCk7XG4gICAgLy8gY2hlY2sgaWYgaGFzaCBtYXRjaCBhbiBlbGVtZW50XG4gICAgaWYgKGhhc2gpIHRhYiA9IGNvbmZpZy50YWJzLnF1ZXJ5U2VsZWN0b3IoaGFzaCk7XG4gICAgLy8gaWYgdGhlcmUncyBhbiBlbGVtZW50LCBjaGVjayBpZiBpdCdzIGEgdGFiXG4gICAgaWYgKHRhYikgaW5kZXggPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGNvbmZpZy5pdGVtcywgdGFiKTtcbiAgICAvLyBpZiBpdCdzIGEgdGFiLCBzZWxlY3QgaXRcbiAgICBpZiAoaW5kZXggPiAtMSkgc2VsZWN0VGFiKGluZGV4KTtcbiAgfTtcblxuICAvKipcbiAgICogU2VsZWN0IFRhYlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGluZGV4IHRoZSBpbmRleCBvZiB0aGUgdGFiXG4gICAqL1xuICB2YXIgc2VsZWN0VGFiID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgLy8gaWYgcGFuZWwgaXMgYSBzbGlkZXJcbiAgICBpZiAoY29uZmlnLmZsa3R5UGFuZWwpIHtcbiAgICAgIC8vIHNlbGVjdCB0aGUgc2xpZGUgaW5kZXhcbiAgICAgIGNvbmZpZy5mbGt0eVBhbmVsLnNlbGVjdChpbmRleCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHRyaWdnZXIgYSBjbGljayBvbiB0aGUgaW5kZXggdGFiXG4gICAgICAvLyB0aGUgY2xpY2sgaXMgbmVjZXNzYXJ5IGhlcmUgdG8gcnVuIG90aGVyIGV2ZW50cyBhdGFjaGVkIHRvIHRoZVxuICAgICAgLy8gZWxlbWVudCwgcmVsYXRlZCB0byBCc1RvZ2dsZUNvbnRlbnRcbiAgICAgIGNvbmZpZy5pdGVtc1tpbmRleF0uY2xpY2soKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgVGFiIFNsaWRlciBPYmplY3RcbiAgICogQHJldHVybiB7T2JqZWN0fSB0aGUgZmxpY2tpdHkgb2JqZWN0IG9mIHRoZSB0YWJzXG4gICAqL1xuICB2YXIgZ2V0RmxrdHlUYWJzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjb25maWcuZmxrdHlUYWJzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIFRhYnMgbW9kdWxlXG4gICAqIEByZXR1cm4ge09iamVjdH0gdGhlIG1vZHVsZSBpbnN0YW5jZVxuICAgKi9cbiAgdmFyIGdldFRhYnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGJzTW9kdWxlO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdCxcbiAgICBnZXQ6IGdldFRhYnMsXG4gICAgcmVhZHk6IG9uVGFic1JlYWR5LFxuICAgIHNlbGVjdDogc2VsZWN0VGFiLFxuICAgIGZsa3R5VGFiczogZ2V0RmxrdHlUYWJzLFxuICB9O1xufTtcblxuLyoqXG4gKiBJbml0IEJzVGFicyBjb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH0gQnNUYWJzLmluaXQoKTtcbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRhYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtanMtdGFiLS1zbGlkZXInKTtcbiAgaWYgKHRhYnMubGVuZ3RoKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0YWJzLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgIHZhciB0YWIgPSBuZXcgQnNUYWJzKCk7XG4gICAgICB0YWIuaW5pdChlbCk7XG4gICAgfSk7XG4gIH1cbn0pO1xuIiwidmFyIEJzVGVsZWNvcmRpb24gPSAoZnVuY3Rpb24gKCkge1xuXG4gIHZhciBjb25maWcgPSB7XG4gICAgZWxzOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtdGVsZWNvcmRpb24nKSxcbiAgICBpdGVtOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnMtdGVsZWNvcmRpb25fX2l0ZW0nKSxcbiAgICBib3g6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy10ZWxlY29yZGlvbl9fYm94JyksXG4gICAgdHJpZ2dlcjogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLW9wZW4tdGVsZWNvcmRpb24nKSxcbiAgICBpdGVtQ2xhc3M6ICdicy10ZWxlY29yZGlvbl9faXRlbScsXG4gICAgYm94Q2xhc3M6ICdicy10ZWxlY29yZGlvbl9fYm94JyxcbiAgICBoZWFkZXJDbGFzczogJ2JzLXRlbGVjb3JkaW9uX19oZWFkZXInLFxuICAgIGFjdGl2ZUNsYXNzOiAnaXMtZXhwYW5kZWQnLFxuICB9O1xuXG4gIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXNpemVUaW1lcjtcblxuICAgIC8vIEFkZCBleHBhbmQvY29sbGFwc2UgZXZlbnRcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy50cmlnZ2VyLCBmdW5jdGlvbiAodHJpZ2dlcikge1xuICAgICAgdmFyIHBhcmVudCA9IHRyaWdnZXIuY2xvc2VzdCgnLicgKyBjb25maWcuaXRlbUNsYXNzKTtcbiAgICAgIHRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGUuYmluZChudWxsLCBwYXJlbnQpKTtcbiAgICAgIGFkanVzdEhlaWdodChwYXJlbnQpO1xuICAgIH0pO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNsZWFyVGltZW91dChyZXNpemVUaW1lcik7XG4gICAgICByZXNpemVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNvbmZpZy5pdGVtLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgIGFkanVzdEhlaWdodChpdGVtKTtcbiAgICAgICAgfSk7XG4gICAgICB9LCAyNTApO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciB0b2dnbGUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIGlmIChpc0V4cGFuZGVkKGl0ZW0pKSBjb2xsYXBzZShpdGVtKTtcbiAgICBlbHNlIGV4cGFuZChpdGVtKTtcbiAgfTtcblxuICB2YXIgZXhwYW5kID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpdGVtLmNsYXNzTGlzdC5hZGQoY29uZmlnLmFjdGl2ZUNsYXNzKTtcbiAgICBhZGp1c3RIZWlnaHQoaXRlbSk7XG4gIH07XG5cbiAgdmFyIGNvbGxhcHNlID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmFjdGl2ZUNsYXNzKTtcbiAgICBhZGp1c3RIZWlnaHQoaXRlbSk7XG4gIH07XG5cbiAgdmFyIGlzRXhwYW5kZWQgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIHJldHVybiBpdGVtLmNsYXNzTGlzdC5jb250YWlucyhjb25maWcuYWN0aXZlQ2xhc3MpO1xuICB9O1xuXG4gIHZhciBhZGp1c3RIZWlnaHQgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIHZhciBib3ggPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy4nICsgY29uZmlnLmJveENsYXNzKTtcbiAgICB2YXIgaGVpZ2h0ID0gaXNFeHBhbmRlZChpdGVtKSA/IGdldEl0ZW1IZWlnaHQoaXRlbSkgOiBnZXRIZWFkZXJIZWlnaHQoaXRlbSk7XG4gICAgYm94LnN0eWxlLmhlaWdodCA9IChoZWlnaHQgPiA2MCA/IGhlaWdodCA6IDYwKSArICdweCc7XG4gIH07XG5cbiAgdmFyIGdldEl0ZW1IZWlnaHQgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIHZhciBib3ggPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy4nICsgY29uZmlnLmJveENsYXNzKTtcbiAgICByZXR1cm4gYm94LnNjcm9sbEhlaWdodDtcbiAgfTtcblxuICB2YXIgZ2V0SGVhZGVySGVpZ2h0ID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICB2YXIgaGVhZGVyID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuJyArIGNvbmZpZy5oZWFkZXJDbGFzcyk7XG4gICAgcmV0dXJuIGhlYWRlci5zY3JvbGxIZWlnaHQ7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICB9O1xufSgpKTtcblxuLyoqXG4gKiBJbml0IE1vZGFsIENvbnN0cnVjdG9yXG4gKiBAcmV0dXJuIHt2b2lkfSBIZWFkZXIuaW5pdCgpO1xuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLXRlbGVjb3JkaW9uJykubGVuZ3RoKSB7XG4gICAgQnNUZWxlY29yZGlvbi5pbml0KCk7XG4gIH1cbn0pO1xuIiwiLyoqXG4gKiBCc1RpbWVMaW5lXG4gKiBAcmV0dXJuIE1vZHVsZSBjb25maWdcbiAqL1xudmFyIEJzVGltZUxpbmUgPSAoZnVuY3Rpb24gKCkge1xuXG4gIC8vIENvbmZpZ1xuICB2YXIgY29uZmlnID0ge1xuICAgIG5hdlNlbGVjdDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLXRpbWUtbGluZV9fbmF2JyksXG4gICAgbmF2Q29udGVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLXRpbWUtbGluZV9fY29udGVudCcpLFxuICAgIHByZXZpb3VzQnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtdGltZS1saW5lLS1wcmV2JyksXG4gICAgbmV4dEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJzLXRpbWUtbGluZS0tbmV4dCcpXG4gIH1cblxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgIHNldFRpbWVvdXQgKGZ1bmN0aW9uICgpIHtcblxuICAgICAgLy8gbmF2IGl0ZW1zIHNlbGVjdCBBTkQgY29udGVudCBpbiBhcyBuYXYgZm9yXG4gICAgICB2YXIgZmxrdHkgPSBuZXcgRmxpY2tpdHkoY29uZmlnLm5hdlNlbGVjdCwge1xuICAgICAgICBhc05hdkZvcjogY29uZmlnLm5hdkNvbnRlbnQsXG4gICAgICAgIGNlbGxBbGlnbjogJ2NlbnRlcicsXG4gICAgICAgIGFkYXB0aXZlSGVpZ2h0OiB0cnVlLFxuICAgICAgICBpbml0aWFsSW5kZXg6IDIsXG4gICAgICAgIHByZXZOZXh0QnV0dG9uczogZmFsc2UsXG4gICAgICAgIC8vIHJlc2l6ZTogdHJ1ZSxcbiAgICAgICAgaW1hZ2VzTG9hZGVkOiB0cnVlLFxuICAgICAgICBjb250YWluOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIC8vIG5hdiBpdGVtcyBjb250ZW50XG4gICAgICBmbGt0eSA9IG5ldyBGbGlja2l0eShjb25maWcubmF2Q29udGVudCwge1xuICAgICAgICBwYWdlRG90czogZmFsc2UsXG4gICAgICAgIGNlbGxBbGlnbjogJ2NlbnRlcicsXG4gICAgICAgIGFkYXB0aXZlSGVpZ2h0OiB0cnVlLFxuICAgICAgICBwcmV2TmV4dEJ1dHRvbnM6IGZhbHNlLFxuICAgICAgICBpbml0aWFsSW5kZXg6IDJcbiAgICAgIH0pO1xuXG4gICAgICBmbGt0eS5vbiggJ2NlbGxTZWxlY3QnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYoIWZsa3R5LmNlbGxzW2Zsa3R5LnNlbGVjdGVkSW5kZXggLSAxXSkge1xuICAgICAgICAgIGNvbmZpZy5wcmV2aW91c0J1dHRvbi5zZXRBdHRyaWJ1dGUoICdkaXNhYmxlZCcsICdkaXNhYmxlZCcgKTtcbiAgICAgICAgICBjb25maWcubmV4dEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJylcbiAgICAgICAgfSBlbHNlIGlmKCFmbGt0eS5jZWxsc1tmbGt0eS5zZWxlY3RlZEluZGV4ICsgMV0pIHtcbiAgICAgICAgICBjb25maWcucHJldmlvdXNCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpXG4gICAgICAgICAgY29uZmlnLm5leHRCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpXG4gICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25maWcucHJldmlvdXNCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpXG4gICAgICAgICAgY29uZmlnLm5leHRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25maWcucHJldmlvdXNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZmxrdHkucHJldmlvdXMoKTtcbiAgICAgIH0pO1xuICAgICAgY29uZmlnLm5leHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZmxrdHkubmV4dCgpO1xuICAgICAgfSk7XG4gICAgfSwgMjAwKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGluaXQ6IGluaXQsXG4gIH07XG59KCkpO1xuXG4vKipcbiAqIEluaXQgTWVudSBDb25zdHJ1Y3RvclxuICogQHJldHVybiB7dm9pZH0gTWVudS5pbml0KCk7XG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnMtdGltZS1saW5lJykpIHtcbiAgICBCc1RpbWVMaW5lLmluaXQoKTtcbiAgfVxufSk7XG4iLCIvKipcbiAqIEJzIFRvb2x0aXBcbiAqIEEgY3VzdG9tIGltcGxlbWVudGF0aW9uIG9mIHRpcHB5LmpzXG4gKiBAbGluayBodHRwczovL2F0b21pa3MuZ2l0aHViLmlvL3RpcHB5anMvdGhlbWVzL1xuICpcbiAqIEBwYXJhbSAge0RPTUxpc3R9IGVsZW1lbnRzIGVsZW1lbnRzIHRvIHJlY2VpdmUgdGhlIHRvb2x0aXBcbiAqL1xudmFyIEJzVG9vbHRpcCA9IGZ1bmN0aW9uIChlbGVtZW50cywgb3B0aW9ucykge1xuICB2YXIgdGlwcHlTZXR0aW5ncyA9IGV4dGVuZCh7fSwge1xuICAgIGFycm93OiB0cnVlLFxuICAgIHRoZW1lOiAnYnMnLFxuICAgIGRpc3RhbmNlOiAyMCxcbiAgfSwgKG9wdGlvbnMgfHwge30pKTtcbiAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbGVtZW50cywgZnVuY3Rpb24gKHRvb2x0aXApIHtcbiAgICB0b29sdGlwLnNldEF0dHJpYnV0ZSgnZGF0YS10aXBweS1jb250ZW50JywgdG9vbHRpcC50aXRsZSk7XG4gICAgdG9vbHRpcC50aXRsZSA9ICcnO1xuICAgIHRpcHB5KHRvb2x0aXAsIHRpcHB5U2V0dGluZ3MpO1xuICB9KTtcbn07XG5cbi8qKlxuICogSW5pdCBIZWFkZXIgQ29uc3RydWN0b3JcbiAqIEByZXR1cm4ge3ZvaWR9IEhlYWRlci5pbml0KCk7XG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIHZhciB0b29sdGlwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy0tb3Zlci10b29sdGlwLCAuYnMtanMtdG9vbHRpcCcpO1xuICBpZiAodG9vbHRpcHMubGVuZ3RoKSBCc1Rvb2x0aXAodG9vbHRpcHMpO1xufSk7XG4iLCIvLyAvKipcbi8vICAqIEJzIFRvcE1lbnVcbi8vICAqXG4vLyAgKiBSZWZlcmVuY2U6XG4vLyAgKlxuLy8gICogW1RPRE9dOiBSZWZhdG9yYXIgcGFyYSBxdWUgb3MgZWxlbWVudG9zIGRvIGNvbmZpZyByZWZlcmVuY2llbVxuLy8gICogdW0gdG9wTWVudSBlc3BlY8OtZmljbyBhbyBpbnbDqXMgZGUgcGVnYXIgdG9kb3Mgb3MgZXhpc3RlbnRlcyBubyBkb2N1bWVudG8uXG4vLyAgKi9cbi8vIHZhciBCc1RvcE1lbnUgPSAoZnVuY3Rpb24gKCkge1xuLy8gICAvLyBDb25maWdcbi8vICAgdmFyIGNvbmZpZyA9IHtcbi8vICAgICBkcm9wZG93bjogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJzLWpzLXRvcC1tZW51JyksXG4vLyAgICAgZHJvcGRvd25BY3RpdmVDbGFzczogJ2JzLWpzLWhhcy1mb2N1cycsXG4vLyAgIH07XG4vL1xuLy8gICAvLyB2YXIgJCA9IGNvbmZpZztcbi8vXG4vLyAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xuLy8gICAgIHZhciBpID0gMDtcbi8vXG4vLyAgICAgLy8gLy8gQmx1ciB0b3BNZW51IGRyb3Bkb3duIG9uIGNsaWNrIG91dHNpZGVcbi8vICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdib2R5LCBodG1sJykuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbi8vICAgICAvLyAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4vLyAgICAgLy8gICAgIGlmIChcbi8vICAgICAvLyAgICAgICBkcm9wZG93bkhhc0ZvY3VzICYmXG4vLyAgICAgLy8gICAgICAgIWNvbmZpZy5kcm9wZG93bi5jb250YWlucyhldmVudC50YXJnZXQpKSB7XG4vLyAgICAgLy8gICAgICAgYmx1ckRyb3Bkb3duKCk7XG4vLyAgICAgLy8gICAgICAgcmV0dXJuIGZhbHNlO1xuLy8gICAgIC8vICAgICB9XG4vLyAgICAgLy8gICB9KTtcbi8vICAgICAvLyB9KTtcbi8vXG4vLyAgICAgLy8ga2VlcCBkcm9wZG93biBvcGVuIG9uIGNoaWxkIGZvY3VzXG4vLyAgICAgZm9yICg7IGkgPCBjb25maWcuZHJvcGRvd24ubGVuZ3RoOyBpICs9IDEpIHtcbi8vICAgICAgIGNvbmZpZy5kcm9wZG93bltpXS5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGJsdXJEcm9wZG93bik7XG4vLyAgICAgICBjb25maWcuZHJvcGRvd25baV0uYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIGZvY3VzRHJvcGRvd24pO1xuLy8gICAgIH1cbi8vXG4vLyAgICAgLy8gQ2xvc2UgdG9wTWVudSBvbiBjbGlja1xuLy8gICAgIC8vIGkgPSAwO1xuLy8gICAgIC8vIGZvciAoOyBpIDwgY29uZmlnLnRvcE1lbnVDbG9zZS5sZW5ndGg7IGkgKz0gMSkge1xuLy8gICAgIC8vICAgY29uZmlnLnRvcE1lbnVDbG9zZVtpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlVG9wTWVudSk7XG4vLyAgICAgLy8gfVxuLy8gICB9O1xuLy9cbi8vICAgdmFyIGZvY3VzRHJvcGRvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbi8vICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoY29uZmlnLmRyb3Bkb3duQWN0aXZlQ2xhc3MpO1xuLy8gICB9O1xuLy9cbi8vICAgdmFyIGJsdXJEcm9wZG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuLy8gICAgIC8vIGRlYnVnZ2VyO1xuLy8gICAgIGlmIChcbi8vICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQgIT09IGV2ZW50LnRhcmdldCAmJlxuLy8gICAgICAgZXZlbnQuY3VycmVudFRhcmdldCAhPT0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUgJiZcbi8vICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQgIT09IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGVcbi8vICAgICApIHtcbi8vICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuZHJvcGRvd25BY3RpdmVDbGFzcyk7XG4vLyAgICAgfVxuLy8gICB9O1xuLy9cbi8vICAgdmFyIGRyb3Bkb3duSGFzRm9jdXMgPSBmdW5jdGlvbiAoKSB7XG4vLyAgICAgcmV0dXJuIGNvbmZpZy5kcm9wZG93bi5jbGFzc0xpc3QuY29udGFpbnMoY29uZmlnLmRyb3Bkb3duQWN0aXZlQ2xhc3MpO1xuLy8gICB9O1xuLy9cbi8vICAgcmV0dXJuIHtcbi8vICAgICBpbml0OiBpbml0LFxuLy8gICB9O1xuLy8gfSgpKTtcbi8vXG4vLyAvKipcbi8vICAqIEluaXQgVG9wTWVudSBDb25zdHJ1Y3RvclxuLy8gICogQHJldHVybiB7dm9pZH0gSGVhZGVyLmluaXQoKTtcbi8vICAqL1xuLy8gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbi8vICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icy1qcy10b3AtbWVudScpLmxlbmd0aCkge1xuLy8gICAgIEJzVG9wTWVudS5pbml0KCk7XG4vLyAgIH1cbi8vIH0pO1xuIiwiaWRlbnRpZnlOb3RMb2FkZWRJbWFnZXMoKTtcbm9iamVjdEZpdEltYWdlcygpO1xuIl19
